<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ä½¿ç”¨Obsidianç®¡ç†Hexo</title>
      <link href="/posts/51056.html"/>
      <url>/posts/51056.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>ä»¥åä¸ç®¡é‡åˆ°ä»€ä¹ˆï¼Œä½ éƒ½ä¸è¦å¯¹è¿™ä¸ªä¸–ç•Œå¤±å»å¸Œæœ›</p></div><h2 id="è½¯ä»¶å®‰è£…"><a href="#è½¯ä»¶å®‰è£…" class="headerlink" title="è½¯ä»¶å®‰è£…"></a>è½¯ä»¶å®‰è£…</h2><p>å»å®˜ç½‘ä¸‹è½½<a href="https://obsidian.md/">Obsidian</a> , ç„¶åå†è¿›è¡Œå®‰è£…</p><h2 id="è½¯ä»¶è®¾ç½®"><a href="#è½¯ä»¶è®¾ç½®" class="headerlink" title="è½¯ä»¶è®¾ç½®"></a>è½¯ä»¶è®¾ç½®</h2><h3 id="ç¼–è¾‘å™¨ç›¸å…³è®¾ç½®"><a href="#ç¼–è¾‘å™¨ç›¸å…³è®¾ç½®" class="headerlink" title="ç¼–è¾‘å™¨ç›¸å…³è®¾ç½®"></a>ç¼–è¾‘å™¨ç›¸å…³è®¾ç½®</h3><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20240922082054-r90hn7k.png" alt="image">â€‹</p><h3 id="æ–‡ä»¶ä¸è¿æ¥è®¾ç½®"><a href="#æ–‡ä»¶ä¸è¿æ¥è®¾ç½®" class="headerlink" title="æ–‡ä»¶ä¸è¿æ¥è®¾ç½®"></a>æ–‡ä»¶ä¸è¿æ¥è®¾ç½®</h3><p>â€</p><blockquote><p>è¿™é‡Œä½¿ç”¨Obsidianæ‰“å¡Blogè¿™ä¸ªæ–‡ä»¶å¤¹ ï¼Œç„¶åå°†å…¶ä¸é‡è¦çš„ç»™å¿½ç•¥æ‰</p></blockquote><p>â€</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20240922082128-qdbntij.png" alt="image">â€‹</p><h3 id="å¤–è§‚è®¾ç½®"><a href="#å¤–è§‚è®¾ç½®" class="headerlink" title="å¤–è§‚è®¾ç½®"></a>å¤–è§‚è®¾ç½®</h3><p>è¿™ä¸ªæ ¹æ®è‡ªå·±çš„å–œå¥½è¿›è¡Œè®¾ç½®<br><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20240922082312-ctet2pp.png" alt="image">â€‹</p><h2 id="æ¨¡æ¿è®¾ç½®"><a href="#æ¨¡æ¿è®¾ç½®" class="headerlink" title="æ¨¡æ¿è®¾ç½®"></a>æ¨¡æ¿è®¾ç½®</h2><p>æ‰¾åˆ°<code>scaffolds</code>â€‹è¿™ä¸ªæ–‡ä»¶å¤¹ ï¼Œæ‰“å¼€pageè¿™ä¸ªæ–‡ä»¶å¤¹ ï¼Œå¡«å†™ä»¥ä¸‹å†…å®¹</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123;title&#125;&#125;</span><br><span class="line">date: &#123;&#123;date&#125;&#125; &#123;&#123;time&#125;&#125;</span><br><span class="line">author: ææœˆäº®ã®å°åŒ—</span><br><span class="line">tags: </span><br><span class="line">categories: </span><br><span class="line"><span class="section">cover: </span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><h2 id="å‘å¸ƒæ–¹æ¡ˆ"><a href="#å‘å¸ƒæ–¹æ¡ˆ" class="headerlink" title="å‘å¸ƒæ–¹æ¡ˆ"></a>å‘å¸ƒæ–¹æ¡ˆ</h2><p>åœ¨blogæ–‡ä»¶å¤¹ä¸‹æ–°å»º<code>deploy.bat</code>â€‹æ–‡ä»¶å¹¶å¡«å†™ä»¥ä¸‹å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure><p>ä»¥åæ¯æ¬¡å‘å¸ƒæ–‡ç« çš„æ—¶å€™ ï¼Œåªéœ€ç‚¹å‡»<code>deploy.bat</code>â€‹è¿›è¡Œå‘å¸ƒå³å¯</p>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterflyä¸»é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç™¾å¤©æ‰“å¡</title>
      <link href="/posts/56917.html"/>
      <url>/posts/56917.html</url>
      
        <content type="html"><![CDATA[<div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>åœ£äººä»¥å¿ƒæŸè¡Œ ï¼Œå›å­ä»¥è¡ŒæŸå¿ƒ</p></div><h2 id="ä¹æœˆä»½æ‰“å¡è®°å½•"><a href="#ä¹æœˆä»½æ‰“å¡è®°å½•" class="headerlink" title="ä¹æœˆä»½æ‰“å¡è®°å½•"></a>ä¹æœˆä»½æ‰“å¡è®°å½•</h2><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç¬¬1å¤©æ‰“å¡ : 2024-09-22</p>            </div> <div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç¬¬2å¤©æ‰“å¡ : 2024-09-23</p>            </div> <div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç¬¬3å¤©æ‰“å¡ : 2024-09-24</p>            </div> <div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç¬¬4å¤©æ‰“å¡ : 2024-09-25</p>            </div> ]]></content>
      
      
      <categories>
          
          <category> æœˆå½±å¢¨ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘åœ¨äººé—´å‡‘æ•°çš„æ—¥å­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeterå¿«é€Ÿå…¥é—¨</title>
      <link href="/posts/11220.html"/>
      <url>/posts/11220.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="Jmeterå¿«é€Ÿå…¥é—¨"><a href="#Jmeterå¿«é€Ÿå…¥é—¨" class="headerlink" title="Jmeterå¿«é€Ÿå…¥é—¨"></a>Jmeterå¿«é€Ÿå…¥é—¨</h1><h1 id="1-å®‰è£…Jmeter"><a href="#1-å®‰è£…Jmeter" class="headerlink" title="1.å®‰è£…Jmeter"></a>1.å®‰è£…Jmeter</h1><p>Jmeterä¾èµ–äºJDKï¼Œæ‰€ä»¥å¿…é¡»ç¡®ä¿å½“å‰è®¡ç®—æœºä¸Šå·²ç»å®‰è£…äº†JDKï¼Œå¹¶ä¸”é…ç½®äº†ç¯å¢ƒå˜é‡ã€‚</p><h2 id="1-1-ä¸‹è½½"><a href="#1-1-ä¸‹è½½" class="headerlink" title="1.1.ä¸‹è½½"></a>1.1.ä¸‹è½½</h2><p>å¯ä»¥Apache Jmeterå®˜ç½‘ä¸‹è½½ï¼Œåœ°å€ï¼š<a href="http://jmeter.apache.org/download_jmeter.cgi">http://jmeter.apache.org/download_jmeter.cgi</a></p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715193149837-20240919111128-2pi7vs2.png" alt="image-20210715193149837" style="zoom:67%;" /><p>å½“ç„¶ï¼Œæˆ‘ä»¬è¯¾å‰èµ„æ–™ä¹Ÿæä¾›äº†ä¸‹è½½å¥½çš„å®‰è£…åŒ…ï¼š</p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715193224094-20240919111128-gdsi9fd.png" alt="image-20210715193224094" style="zoom:67%;" /><h2 id="1-2-è§£å‹"><a href="#1-2-è§£å‹" class="headerlink" title="1.2.è§£å‹"></a>1.2.è§£å‹</h2><p>å› ä¸ºä¸‹è½½çš„æ˜¯zipåŒ…ï¼Œè§£å‹ç¼©å³å¯ä½¿ç”¨ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715193334367-20240919111128-vqjz5ny.png" alt="image-20210715193334367" style="zoom:67%;" /><p>å…¶ä¸­çš„binç›®å½•å°±æ˜¯æ‰§è¡Œçš„è„šæœ¬ï¼Œå…¶ä¸­åŒ…å«å¯åŠ¨è„šæœ¬ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715193414601-20240919111128-fmepw7d.png" alt="image-20210715193414601"></p><h3 id="1-3-è¿è¡Œ"><a href="#1-3-è¿è¡Œ" class="headerlink" title="1.3.è¿è¡Œ"></a>1.3.è¿è¡Œ</h3><p>åŒå‡»å³å¯è¿è¡Œï¼Œä½†æ˜¯æœ‰ä¸¤ç‚¹æ³¨æ„ï¼š</p><ul><li>å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œè¦è€å¿ƒç­‰å¾…</li><li>å¯åŠ¨åé»‘çª—å£ä¸èƒ½å…³é—­ï¼Œå¦åˆ™Jmeterä¹Ÿè·Ÿç€å…³é—­äº†</li></ul><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715193730096-20240919111128-6l870ce.png" alt="image-20210715193730096"></p><h1 id="2-å¿«é€Ÿå…¥é—¨"><a href="#2-å¿«é€Ÿå…¥é—¨" class="headerlink" title="2.å¿«é€Ÿå…¥é—¨"></a>2.å¿«é€Ÿå…¥é—¨</h1><h2 id="2-1-è®¾ç½®ä¸­æ–‡è¯­è¨€"><a href="#2-1-è®¾ç½®ä¸­æ–‡è¯­è¨€" class="headerlink" title="2.1.è®¾ç½®ä¸­æ–‡è¯­è¨€"></a>2.1.è®¾ç½®ä¸­æ–‡è¯­è¨€</h2><p>é»˜è®¤Jmeterçš„è¯­è¨€æ˜¯è‹±æ–‡ï¼Œéœ€è¦è®¾ç½®ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715193838719-20240919111128-ajzftp8.png" alt="image-20210715193838719"></p><p>æ•ˆæœï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715193914039-20240919111128-6no3ej8.png" alt="image-20210715193914039"></p><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸Šé¢çš„é…ç½®åªèƒ½ä¿è¯æœ¬æ¬¡è¿è¡Œæ˜¯ä¸­æ–‡ï¼Œå¦‚æœè¦æ°¸ä¹…ä¸­æ–‡ï¼Œéœ€è¦ä¿®æ”¹Jmeterçš„é…ç½®æ–‡ä»¶</p></blockquote><p>æ‰“å¼€jmeteræ–‡ä»¶å¤¹ï¼Œåœ¨binç›®å½•ä¸­æ‰¾åˆ° <strong>jmeter.properties</strong>ï¼Œæ·»åŠ ä¸‹é¢é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language</span>=<span class="string">zh_CN</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715194137982-20240919111128-76fdnd8.png" alt="image-20210715194137982"></p><blockquote><p>æ³¨æ„ï¼šå‰é¢ä¸è¦å‡ºç°#ï¼Œ#ä»£è¡¨æ³¨é‡Šï¼Œå¦å¤–è¿™é‡Œæ˜¯ä¸‹åˆ’çº¿ï¼Œä¸æ˜¯ä¸­åˆ’çº¿</p></blockquote><h2 id="2-2-åŸºæœ¬ç”¨æ³•"><a href="#2-2-åŸºæœ¬ç”¨æ³•" class="headerlink" title="2.2.åŸºæœ¬ç”¨æ³•"></a>2.2.åŸºæœ¬ç”¨æ³•</h2><p>åœ¨æµ‹è¯•è®¡åˆ’ä¸Šç‚¹é¼ æ ‡å³é”®ï¼Œé€‰æ‹©æ·»åŠ  &gt; çº¿ç¨‹ï¼ˆç”¨æˆ·ï¼‰ &gt; çº¿ç¨‹ç»„ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715194413178-20240919111128-omxtjm9.png" alt="image-20210715194413178"></p><p>åœ¨æ–°å¢çš„çº¿ç¨‹ç»„ä¸­ï¼Œå¡«å†™çº¿ç¨‹ä¿¡æ¯ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715195053807-20240919111128-csmqqvf.png" alt="image-20210715195053807"></p><p>ç»™çº¿ç¨‹ç»„ç‚¹é¼ æ ‡å³é”®ï¼Œæ·»åŠ httpå–æ ·å™¨ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715195144130-20240919111128-ic1a2c7.png" alt="image-20210715195144130"></p><p>ç¼–å†™å–æ ·å™¨å†…å®¹ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715195410764-20240919111128-ej0w5dv.png" alt="image-20210715195410764"></p><p>æ·»åŠ ç›‘å¬æŠ¥å‘Šï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715195844978-20240919111128-zj6lnho.png" alt="image-20210715195844978"></p><p>æ·»åŠ ç›‘å¬ç»“æœæ ‘ï¼š</p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715200155537-20240919111128-ivb1ski.png" alt="image-20210715200155537" style="zoom:67%;" /><p>æ±‡æ€»æŠ¥å‘Šç»“æœï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715200243194-20240919111128-oi5ammi.png" alt="image-20210715200243194"></p><p>ç»“æœæ ‘ï¼š</p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20210715200336526-20240919111128-hvte8cx.png" alt="image-20210715200336526" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jmeterä½¿ç”¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2. å¾®æœåŠ¡å†æ¢</title>
      <link href="/posts/33382.html"/>
      <url>/posts/33382.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>æŸäº›äººå’Œäº‹ï¼Œå“ªæ€•æ˜¯è·¯è¾¹çš„é£æ™¯ï¼Œå¯æ˜¯åªè¦çœ‹ä¸€çœ¼ï¼Œä¾ç„¶ä¼šè®©äººè§‰å¾—å¾ˆç¾å¥½</p></div><a href="https://www.bilibili.com/video/BV1S142197x7/">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://i0.hdslb.com/bfs/article/cf9264b4309c06a7e4ecb4074e0a24c2645325325.png"></a><p>åœ¨æ˜¨å¤©çš„ä½œä¸šä¸­ï¼Œæˆ‘ä»¬å°†é»‘é©¬å•†åŸæ‹†åˆ†ä¸º5ä¸ªå¾®æœåŠ¡ï¼š</p><ul><li>ç”¨æˆ·æœåŠ¡</li><li>å•†å“æœåŠ¡</li><li>è´­ç‰©è½¦æœåŠ¡</li><li>äº¤æ˜“æœåŠ¡</li><li>æ”¯ä»˜æœåŠ¡</li></ul><p>ç”±äºæ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰ä¸åŒçš„åœ°å€æˆ–ç«¯å£ï¼Œå…¥å£ä¸åŒï¼Œç›¸ä¿¡å¤§å®¶åœ¨ä¸å‰ç«¯è”è°ƒçš„æ—¶å€™å‘ç°äº†ä¸€äº›é—®é¢˜ï¼š</p><ul><li>è¯·æ±‚ä¸åŒæ•°æ®æ—¶è¦è®¿é—®ä¸åŒçš„å…¥å£ï¼Œéœ€è¦ç»´æŠ¤å¤šä¸ªå…¥å£åœ°å€ï¼Œéº»çƒ¦</li><li>å‰ç«¯æ— æ³•è°ƒç”¨nacosï¼Œæ— æ³•å®æ—¶æ›´æ–°æœåŠ¡åˆ—è¡¨</li></ul><p>å•ä½“æ¶æ„æ—¶æˆ‘ä»¬åªéœ€è¦å®Œæˆä¸€æ¬¡ç”¨æˆ·ç™»å½•ã€èº«ä»½æ ¡éªŒï¼Œå°±å¯ä»¥åœ¨æ‰€æœ‰ä¸šåŠ¡ä¸­è·å–åˆ°ç”¨æˆ·ä¿¡æ¯ã€‚è€Œå¾®æœåŠ¡æ‹†åˆ†åï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½ç‹¬ç«‹éƒ¨ç½²ï¼Œè¿™å°±å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ul><li>æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ç¼–å†™ç™»å½•æ ¡éªŒã€ç”¨æˆ·ä¿¡æ¯è·å–çš„åŠŸèƒ½å—ï¼Ÿ</li><li>å½“å¾®æœåŠ¡ä¹‹é—´è°ƒç”¨æ—¶ï¼Œè¯¥å¦‚ä½•ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼Ÿ</li></ul><p>ä¸è¦ç€æ€¥ï¼Œè¿™äº›é—®é¢˜éƒ½å¯ä»¥åœ¨ä»Šå¤©çš„å­¦ä¹ ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼Œæˆ‘ä»¬ä¼šé€šè¿‡<strong>ç½‘å…³</strong>æŠ€æœ¯è§£å†³ä¸Šè¿°é—®é¢˜ã€‚ä»Šå¤©çš„å†…å®¹ä¼šåˆ†ä¸º3ç« ï¼š</p><ul><li>ç¬¬ä¸€ç« ï¼šç½‘å…³è·¯ç”±ï¼Œè§£å†³å‰ç«¯è¯·æ±‚å…¥å£çš„é—®é¢˜ã€‚</li><li>ç¬¬äºŒç« ï¼šç½‘å…³é‰´æƒï¼Œè§£å†³ç»Ÿä¸€ç™»å½•æ ¡éªŒå’Œç”¨æˆ·ä¿¡æ¯è·å–çš„é—®é¢˜ã€‚</li><li>ç¬¬ä¸‰ç« ï¼šç»Ÿä¸€é…ç½®ç®¡ç†ï¼Œè§£å†³å¾®æœåŠ¡çš„é…ç½®æ–‡ä»¶é‡å¤å’Œé…ç½®çƒ­æ›´æ–°é—®é¢˜ã€‚</li></ul><p>é€šè¿‡ä»Šå¤©çš„å­¦ä¹ ä½ å°†æŒæ¡ä¸‹åˆ—èƒ½åŠ›ï¼š</p><ul><li>ä¼šåˆ©ç”¨å¾®æœåŠ¡ç½‘å…³åšè¯·æ±‚è·¯ç”±</li><li>ä¼šåˆ©ç”¨å¾®æœåŠ¡ç½‘å…³åšç™»å½•èº«ä»½æ ¡éªŒ</li><li>ä¼šåˆ©ç”¨Nacoså®ç°ç»Ÿä¸€é…ç½®ç®¡ç†</li><li>ä¼šåˆ©ç”¨Nacoså®ç°é…ç½®çƒ­æ›´æ–°</li></ul><p>å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€èµ·è¿›å…¥ä»Šå¤©çš„å­¦ä¹ å§ã€‚</p><h1 id="1-ç½‘å…³è·¯ç”±"><a href="#1-ç½‘å…³è·¯ç”±" class="headerlink" title="1.ç½‘å…³è·¯ç”±"></a>1.ç½‘å…³è·¯ç”±</h1><h2 id="1-1-è®¤è¯†ç½‘å…³"><a href="#1-1-è®¤è¯†ç½‘å…³" class="headerlink" title="1.1.è®¤è¯†ç½‘å…³"></a>1.1.è®¤è¯†ç½‘å…³</h2><p>ä»€ä¹ˆæ˜¯ç½‘å…³ï¼Ÿ</p><p>é¡¾æ˜æ€è®®ï¼Œç½‘å…³å°±æ˜¯<strong>ç½‘</strong>ç»œçš„<strong>å…³</strong>å£ã€‚æ•°æ®åœ¨ç½‘ç»œé—´ä¼ è¾“ï¼Œä»ä¸€ä¸ªç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ç½‘ç»œæ—¶å°±éœ€è¦ç»è¿‡ç½‘å…³æ¥åšæ•°æ®çš„<strong>è·¯ç”±å’Œè½¬å‘ä»¥åŠæ•°æ®å®‰å…¨çš„æ ¡éªŒ</strong>ã€‚</p><p>æ›´é€šä¿—çš„æ¥è®²ï¼Œ<span data-type="text" style="color: var(--b3-font-color3);">ç½‘å…³å°±åƒæ˜¯ä»¥å‰å›­åŒºä¼ è¾¾å®¤çš„å¤§çˆ·</span></p><ul><li>å¤–é¢çš„äººè¦æƒ³è¿›å…¥å›­åŒºï¼Œå¿…é¡»ç»è¿‡å¤§çˆ·çš„è®¤å¯ï¼Œå¦‚æœä½ æ˜¯ä¸æ€€å¥½æ„çš„äººï¼Œè‚¯å®šè¢«ç›´æ¥æ‹¦æˆªã€‚</li><li>å¤–é¢çš„äººè¦ä¼ è¯æˆ–é€ä¿¡ï¼Œè¦æ‰¾å¤§çˆ·ã€‚å¤§çˆ·å¸®ä½ å¸¦ç»™ç›®æ ‡äººã€‚</li></ul><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/image-20240909164651-6hmu9aw.png" alt="image">â€‹</p><p>ç°åœ¨ï¼Œå¾®æœåŠ¡ç½‘å…³å°±èµ·åˆ°åŒæ ·çš„ä½œç”¨ã€‚<span data-type="text" style="color: var(--b3-font-color2);">å‰ç«¯è¯·æ±‚ä¸èƒ½ç›´æ¥è®¿é—®å¾®æœåŠ¡</span>ï¼Œè€Œæ˜¯è¦è¯·æ±‚ç½‘å…³ï¼š<span data-type="text" style="color: var(--b3-font-color2);">ç½‘å…³ä¹Ÿæ˜¯ä¸ªå¾®æœåŠ¡</span></p><ul><li>ç½‘å…³å¯ä»¥åšå®‰å…¨æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯ç™»å½•èº«ä»½æ ¡éªŒï¼Œæ ¡éªŒé€šè¿‡æ‰æ”¾è¡Œ</li><li>é€šè¿‡è®¤è¯åï¼Œç½‘å…³å†æ ¹æ®è¯·æ±‚åˆ¤æ–­åº”è¯¥è®¿é—®å“ªä¸ªå¾®æœåŠ¡ï¼Œå°†è¯·æ±‚è½¬å‘è¿‡å»</li></ul><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-17258713746771-20240909164336-k52xhsc.jpeg" alt="img">â€‹</p><p>åœ¨SpringCloudå½“ä¸­ï¼Œæä¾›äº†ä¸¤ç§ç½‘å…³å®ç°æ–¹æ¡ˆï¼š</p><ul><li>Netflix Zuulï¼šæ—©æœŸå®ç°ï¼Œç›®å‰å·²ç»æ·˜æ±°</li><li><span data-type="text" style="color: var(--b3-font-color9);">SpringCloudGatewayï¼šåŸºäºSpringçš„WebFluxæŠ€æœ¯ï¼Œå®Œå…¨æ”¯æŒå“åº”å¼ç¼–ç¨‹ï¼Œååèƒ½åŠ›æ›´å¼º</span></li></ul><p>è¯¾å ‚ä¸­æˆ‘ä»¬ä»¥SpringCloudGatewayä¸ºä¾‹æ¥è®²è§£ï¼Œå®˜æ–¹ç½‘ç«™ï¼š</p><p><a href="https://spring.io/projects/spring-cloud-gateway#learn">ğŸ³ gateway</a></p><h2 id="1-2-å¿«é€Ÿå…¥é—¨"><a href="#1-2-å¿«é€Ÿå…¥é—¨" class="headerlink" title="1.2.å¿«é€Ÿå…¥é—¨"></a>1.2.å¿«é€Ÿå…¥é—¨</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹å¦‚ä½•åˆ©ç”¨ç½‘å…³å®ç°è¯·æ±‚è·¯ç”±ã€‚ç”±äºç½‘å…³æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œå› æ­¤ä¹Ÿéœ€è¦åˆ›å»ºä¸€ä¸ªæ¨¡å—å¼€å‘åŠŸèƒ½ã€‚å¤§æ¦‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>åˆ›å»ºç½‘å…³å¾®æœåŠ¡</li><li>å¼•å…¥SpringCloudGatewayã€NacosDiscoveryä¾èµ–</li><li>ç¼–å†™å¯åŠ¨ç±»</li><li>é…ç½®ç½‘å…³è·¯ç”±</li></ul><h3 id="1-2-1-åˆ›å»ºé¡¹ç›®"><a href="#1-2-1-åˆ›å»ºé¡¹ç›®" class="headerlink" title="1.2.1.åˆ›å»ºé¡¹ç›®"></a>1.2.1.åˆ›å»ºé¡¹ç›®</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦åœ¨hmallä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„moduleï¼Œå‘½åä¸ºhm-gatewayï¼Œä½œä¸ºç½‘å…³å¾®æœåŠ¡ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-17258713746772-20240909164336-2uv4lsq.png" alt="img">â€‹</p><h3 id="1-2-2-å¼•å…¥ä¾èµ–"><a href="#1-2-2-å¼•å…¥ä¾èµ–" class="headerlink" title="1.2.2.å¼•å…¥ä¾èµ–"></a>1.2.2.å¼•å…¥ä¾èµ–</h3><p>åœ¨<code>hm-gateway</code>æ¨¡å—çš„<code>pom.xml</code>æ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hmall<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--common--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç½‘å…³--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--nacos discovery--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è´Ÿè½½å‡è¡¡--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-2-3-å¯åŠ¨ç±»"><a href="#1-2-3-å¯åŠ¨ç±»" class="headerlink" title="1.2.3.å¯åŠ¨ç±»"></a>1.2.3.å¯åŠ¨ç±»</h3><p>åœ¨<code>hm-gateway</code>æ¨¡å—çš„<code>com.hmall.gateway</code>åŒ…ä¸‹æ–°å»ºä¸€ä¸ªå¯åŠ¨ç±»ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-17258713746783-20240909164336-7dr6kwj.png" alt="img"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.gateway;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GatewayApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(GatewayApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-2-4-é…ç½®è·¯ç”±"><a href="#1-2-4-é…ç½®è·¯ç”±" class="headerlink" title="1.2.4.é…ç½®è·¯ç”±"></a>1.2.4.é…ç½®è·¯ç”±</h3><p>æ¥ä¸‹æ¥ï¼Œåœ¨<code>hm-gateway</code>æ¨¡å—çš„<code>resources</code>ç›®å½•æ–°å»ºä¸€ä¸ª<code>application.yaml</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span><span class="string">:8848</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">item</span> <span class="comment"># è·¯ç”±è§„åˆ™idï¼Œè‡ªå®šä¹‰ï¼Œå”¯ä¸€</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://item-service</span> <span class="comment"># è·¯ç”±çš„ç›®æ ‡æœåŠ¡ï¼Œlbä»£è¡¨è´Ÿè½½å‡è¡¡ï¼Œä¼šä»æ³¨å†Œä¸­å¿ƒæ‹‰å–æœåŠ¡åˆ—è¡¨</span></span><br><span class="line">          <span class="attr">predicates:</span> <span class="comment"># è·¯ç”±æ–­è¨€ï¼Œåˆ¤æ–­å½“å‰è¯·æ±‚æ˜¯å¦ç¬¦åˆå½“å‰è§„åˆ™ï¼Œç¬¦åˆåˆ™è·¯ç”±åˆ°ç›®æ ‡æœåŠ¡</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/items/**,/search/**</span> <span class="comment"># è¿™é‡Œæ˜¯ä»¥è¯·æ±‚è·¯å¾„ä½œä¸ºåˆ¤æ–­è§„åˆ™</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">cart</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://cart-service</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/carts/**</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://user-service</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/users/**,/addresses/**</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">trade</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://trade-service</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/orders/**</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">pay</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://pay-service</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/pay-orders/**</span></span><br></pre></td></tr></table></figure><h3 id="1-2-5-æµ‹è¯•"><a href="#1-2-5-æµ‹è¯•" class="headerlink" title="1.2.5.æµ‹è¯•"></a>1.2.5.æµ‹è¯•</h3><p>å¯åŠ¨GatewayApplicationï¼Œä»¥ <span data-type="text" style="color: var(--b3-font-color3);"><a href="http://localhost:8080/">http://localhost:8080</a></span> æ‹¼æ¥å¾®æœåŠ¡æ¥å£è·¯å¾„æ¥æµ‹è¯•ã€‚ä¾‹å¦‚ï¼š</p><p><a href="http://localhost:8080/items/page?pageNo=1&pageSize=1">http://localhost:8080/items/page?pageNo=1&amp;pageSize=1</a></p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-17258713746784-20240909164336-1shy2la.png" alt="img">â€‹</p><p>æ­¤æ—¶ï¼Œå¯åŠ¨UserApplicationã€CartApplicationï¼Œç„¶åæ‰“å¼€å‰ç«¯é¡µé¢ï¼Œå‘ç°ç›¸å…³åŠŸèƒ½éƒ½å¯ä»¥æ­£å¸¸è®¿é—®äº†ï¼š</p><h2 id="1-3-è·¯ç”±è¿‡æ»¤"><a href="#1-3-è·¯ç”±è¿‡æ»¤" class="headerlink" title="1.3.è·¯ç”±è¿‡æ»¤"></a>1.3.è·¯ç”±è¿‡æ»¤</h2><p>è·¯ç”±è§„åˆ™çš„å®šä¹‰è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">item</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://item-service</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/items/**,/search/**</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­routeså¯¹åº”çš„ç±»å‹å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-17258713746785-20240909164336-6imu3pd.png" alt="img">â€‹</p><p>æ˜¯ä¸€ä¸ªé›†åˆï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥å®šä¹‰å¾ˆå¤šè·¯ç”±è§„åˆ™ã€‚é›†åˆä¸­çš„<code>RouteDefinition</code>å°±æ˜¯å…·ä½“çš„è·¯ç”±è§„åˆ™å®šä¹‰ï¼Œå…¶ä¸­å¸¸è§çš„å±æ€§å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-17258713746786-20240909164336-twyl5qn.png" alt="img">â€‹</p><p>å››ä¸ªå±æ€§å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li><code>id</code>â€‹ï¼šè·¯ç”±çš„å”¯ä¸€æ ‡ç¤º</li><li><code>predicates</code>â€‹ï¼šè·¯ç”±æ–­è¨€ï¼Œå…¶å®å°±æ˜¯åŒ¹é…æ¡ä»¶</li><li><code>filters</code>â€‹ï¼šè·¯ç”±è¿‡æ»¤æ¡ä»¶ï¼Œåé¢è®²</li><li><code>uri</code>â€‹ï¼šè·¯ç”±ç›®æ ‡åœ°å€ï¼Œ<code>lb://</code>â€‹ä»£è¡¨è´Ÿè½½å‡è¡¡ï¼Œä»æ³¨å†Œä¸­å¿ƒè·å–ç›®æ ‡å¾®æœåŠ¡çš„å®ä¾‹åˆ—è¡¨ï¼Œå¹¶ä¸”è´Ÿè½½å‡è¡¡é€‰æ‹©ä¸€ä¸ªè®¿é—®ã€‚</li></ul><p>è¿™é‡Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨<code>predicates</code>â€‹ï¼Œä¹Ÿå°±æ˜¯<span data-type="text" style="color: var(--b3-font-color3);">è·¯ç”±æ–­è¨€</span>ã€‚SpringCloudGatewayä¸­æ”¯æŒçš„æ–­è¨€ç±»å‹æœ‰å¾ˆå¤šï¼š</p><table><thead><tr><th align="left"><strong>åç§°</strong></th><th align="left"><strong>è¯´æ˜</strong></th><th align="left"><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td align="left">After</td><td align="left">æ˜¯æŸä¸ªæ—¶é—´ç‚¹åçš„è¯·æ±‚</td><td align="left">- After&#x3D;2037-01-20T17:42:47.789-07:00[America&#x2F;Denver]</td></tr><tr><td align="left">Before</td><td align="left">æ˜¯æŸä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„è¯·æ±‚</td><td align="left">- Before&#x3D;2031-04-13T15:14:47.433+08:00[Asia&#x2F;Shanghai]</td></tr><tr><td align="left">Between</td><td align="left">æ˜¯æŸä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„è¯·æ±‚</td><td align="left">- Between&#x3D;2037-01-20T17:42:47.789-07:00[America&#x2F;Denver], 2037-01-21T17:42:47.789-07:00[America&#x2F;Denver]</td></tr><tr><td align="left">Cookie</td><td align="left">è¯·æ±‚å¿…é¡»åŒ…å«æŸäº›cookie</td><td align="left">- Cookie&#x3D;chocolate, ch.p</td></tr><tr><td align="left">Header</td><td align="left">è¯·æ±‚å¿…é¡»åŒ…å«æŸäº›header</td><td align="left">- Header&#x3D;X-Request-Id, \d+</td></tr><tr><td align="left">Host</td><td align="left">è¯·æ±‚å¿…é¡»æ˜¯è®¿é—®æŸä¸ªhostï¼ˆåŸŸåï¼‰</td><td align="left">- Host&#x3D; <strong>.somehost.org,</strong> .anotherhost.org</td></tr><tr><td align="left">Method</td><td align="left">è¯·æ±‚æ–¹å¼å¿…é¡»æ˜¯æŒ‡å®šæ–¹å¼</td><td align="left">- Method&#x3D;GET,POST</td></tr><tr><td align="left">Path</td><td align="left">è¯·æ±‚è·¯å¾„å¿…é¡»ç¬¦åˆæŒ‡å®šè§„åˆ™</td><td align="left">- Path&#x3D;&#x2F;red&#x2F;{segment},&#x2F;blue&#x2F;**</td></tr><tr><td align="left">Query</td><td align="left">è¯·æ±‚å‚æ•°å¿…é¡»åŒ…å«æŒ‡å®šå‚æ•°</td><td align="left">- Query&#x3D;name, Jackæˆ–è€…- Query&#x3D;name</td></tr><tr><td align="left">RemoteAddr</td><td align="left">è¯·æ±‚è€…çš„ipå¿…é¡»æ˜¯æŒ‡å®šèŒƒå›´</td><td align="left">- RemoteAddr&#x3D;192.168.1.1&#x2F;24</td></tr><tr><td align="left">weight</td><td align="left">æƒé‡å¤„ç†</td><td align="left"></td></tr></tbody></table><h1 id="2-ç½‘å…³ç™»å½•æ ¡éªŒ"><a href="#2-ç½‘å…³ç™»å½•æ ¡éªŒ" class="headerlink" title="2.ç½‘å…³ç™»å½•æ ¡éªŒ"></a>2.ç½‘å…³ç™»å½•æ ¡éªŒ</h1><p><span data-type="text" style="color: var(--b3-font-color2);">å•ä½“æ¶æ„æ—¶æˆ‘ä»¬åªéœ€è¦å®Œæˆä¸€æ¬¡ç”¨æˆ·ç™»å½•ã€èº«ä»½æ ¡éªŒï¼Œå°±å¯ä»¥åœ¨æ‰€æœ‰ä¸šåŠ¡ä¸­è·å–åˆ°ç”¨æˆ·ä¿¡æ¯ã€‚è€Œå¾®æœåŠ¡æ‹†åˆ†åï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½ç‹¬ç«‹éƒ¨ç½²ï¼Œä¸å†å…±äº«æ•°æ®</span>ã€‚ä¹Ÿå°±æ„å‘³ç€æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦åšç™»å½•æ ¡éªŒï¼Œè¿™æ˜¾ç„¶ä¸å¯å–ã€‚</p><h2 id="2-1-é‰´æƒæ€è·¯åˆ†æ"><a href="#2-1-é‰´æƒæ€è·¯åˆ†æ" class="headerlink" title="2.1.é‰´æƒæ€è·¯åˆ†æ"></a>2.1.é‰´æƒæ€è·¯åˆ†æ</h2><p>æˆ‘ä»¬çš„ç™»å½•æ˜¯åŸºäºJWTæ¥å®ç°çš„ï¼Œæ ¡éªŒJWTçš„ç®—æ³•å¤æ‚ï¼Œè€Œä¸”éœ€è¦ç”¨åˆ°ç§˜é’¥ã€‚å¦‚æœæ¯ä¸ªå¾®æœåŠ¡éƒ½å»åšç™»å½•æ ¡éªŒï¼Œè¿™å°±å­˜åœ¨ç€ä¸¤å¤§é—®é¢˜ï¼š</p><ul><li>æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦çŸ¥é“JWTçš„ç§˜é’¥ï¼Œä¸å®‰å…¨</li><li>æ¯ä¸ªå¾®æœåŠ¡é‡å¤ç¼–å†™ç™»å½•æ ¡éªŒä»£ç ã€æƒé™æ ¡éªŒä»£ç ï¼Œéº»çƒ¦</li></ul><p>æ—¢ç„¶ç½‘å…³æ˜¯æ‰€æœ‰å¾®æœåŠ¡çš„å…¥å£ï¼Œä¸€åˆ‡è¯·æ±‚éƒ½éœ€è¦å…ˆç»è¿‡ç½‘å…³ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠç™»å½•æ ¡éªŒçš„å·¥ä½œæ”¾åˆ°ç½‘å…³å»åšï¼Œè¿™æ ·ä¹‹å‰è¯´çš„é—®é¢˜å°±è§£å†³äº†ï¼š</p><ul><li>åªéœ€è¦åœ¨ç½‘å…³å’Œç”¨æˆ·æœåŠ¡ä¿å­˜ç§˜é’¥</li><li>åªéœ€è¦åœ¨ç½‘å…³å¼€å‘ç™»å½•æ ¡éªŒåŠŸèƒ½</li></ul><p>æ­¤æ—¶ï¼Œç™»å½•æ ¡éªŒçš„æµç¨‹å¦‚å›¾ï¼š</p><p>æš‚æ—¶æ— æ³•åœ¨é£ä¹¦æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹</p><p>ä¸è¿‡ï¼Œè¿™é‡Œå­˜åœ¨å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>ç½‘å…³è·¯ç”±æ˜¯é…ç½®çš„ï¼Œè¯·æ±‚è½¬å‘æ˜¯Gatewayå†…éƒ¨ä»£ç ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨è½¬å‘ä¹‹å‰åšç™»å½•æ ¡éªŒï¼Ÿ</li><li>ç½‘å…³æ ¡éªŒJWTä¹‹åï¼Œå¦‚ä½•å°†ç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™å¾®æœåŠ¡ï¼Ÿ</li><li>å¾®æœåŠ¡ä¹‹é—´ä¹Ÿä¼šç›¸äº’è°ƒç”¨ï¼Œè¿™ç§è°ƒç”¨ä¸ç»è¿‡ç½‘å…³ï¼Œåˆè¯¥å¦‚ä½•ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼Ÿ</li></ul><p>è¿™äº›é—®é¢˜å°†åœ¨æ¥ä¸‹æ¥å‡ èŠ‚ä¸€ä¸€è§£å†³ã€‚</p><h2 id="2-2-ç½‘å…³è¿‡æ»¤å™¨"><a href="#2-2-ç½‘å…³è¿‡æ»¤å™¨" class="headerlink" title="2.2.ç½‘å…³è¿‡æ»¤å™¨"></a>2.2.ç½‘å…³è¿‡æ»¤å™¨</h2><p>ç™»å½•æ ¡éªŒå¿…é¡»åœ¨è¯·æ±‚è½¬å‘åˆ°å¾®æœåŠ¡ä¹‹å‰åšï¼Œå¦åˆ™å°±å¤±å»äº†æ„ä¹‰ã€‚è€Œç½‘å…³çš„è¯·æ±‚è½¬å‘æ˜¯<code>Gateway</code>å†…éƒ¨ä»£ç å®ç°çš„ï¼Œè¦æƒ³åœ¨è¯·æ±‚è½¬å‘ä¹‹å‰åšç™»å½•æ ¡éªŒï¼Œå°±å¿…é¡»äº†è§£<code>Gateway</code>å†…éƒ¨å·¥ä½œçš„åŸºæœ¬åŸç†ã€‚</p><p>æš‚æ—¶æ— æ³•åœ¨é£ä¹¦æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹</p><p>å¦‚å›¾æ‰€ç¤ºï¼š</p><ol><li>å®¢æˆ·ç«¯è¯·æ±‚è¿›å…¥ç½‘å…³åç”±<code>HandlerMapping</code>å¯¹è¯·æ±‚åšåˆ¤æ–­ï¼Œæ‰¾åˆ°ä¸å½“å‰è¯·æ±‚åŒ¹é…çš„è·¯ç”±è§„åˆ™ï¼ˆ<strong>â€‹<code>Route</code>â€‹</strong>ï¼‰ï¼Œç„¶åå°†è¯·æ±‚äº¤ç»™<code>WebHandler</code>å»å¤„ç†ã€‚</li><li><code>WebHandler</code>åˆ™ä¼šåŠ è½½å½“å‰è·¯ç”±ä¸‹éœ€è¦æ‰§è¡Œçš„è¿‡æ»¤å™¨é“¾ï¼ˆ<strong>â€‹<code>Filter chain</code>â€‹</strong>ï¼‰ï¼Œç„¶åæŒ‰ç…§é¡ºåºé€ä¸€æ‰§è¡Œè¿‡æ»¤å™¨ï¼ˆåé¢ç§°ä¸º**<code>Filter</code>**ï¼‰ã€‚</li><li>å›¾ä¸­<code>Filter</code>è¢«è™šçº¿åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œæ˜¯å› ä¸º<code>Filter</code>å†…éƒ¨çš„é€»è¾‘åˆ†ä¸º<code>pre</code>å’Œ<code>post</code>ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¼šåœ¨è¯·æ±‚è·¯ç”±åˆ°å¾®æœåŠ¡<strong>ä¹‹å‰</strong>å’Œ<strong>ä¹‹å</strong>è¢«æ‰§è¡Œã€‚</li><li>åªæœ‰æ‰€æœ‰<code>Filter</code>çš„<code>pre</code>é€»è¾‘éƒ½ä¾æ¬¡é¡ºåºæ‰§è¡Œé€šè¿‡åï¼Œè¯·æ±‚æ‰ä¼šè¢«è·¯ç”±åˆ°å¾®æœåŠ¡ã€‚</li><li>å¾®æœåŠ¡è¿”å›ç»“æœåï¼Œå†å€’åºæ‰§è¡Œ<code>Filter</code>çš„<code>post</code>é€»è¾‘ã€‚</li><li>æœ€ç»ˆæŠŠå“åº”ç»“æœè¿”å›ã€‚</li></ol><p>å¦‚å›¾ä¸­æ‰€ç¤ºï¼Œæœ€ç»ˆè¯·æ±‚è½¬å‘æ˜¯æœ‰ä¸€ä¸ªåä¸º<code>NettyRoutingFilter</code>çš„è¿‡æ»¤å™¨æ¥æ‰§è¡Œçš„ï¼Œè€Œä¸”è¿™ä¸ªè¿‡æ»¤å™¨æ˜¯æ•´ä¸ªè¿‡æ»¤å™¨é“¾ä¸­é¡ºåºæœ€é åçš„ä¸€ä¸ªã€‚<strong>å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œåœ¨å…¶ä¸­å®ç°ç™»å½•æ ¡éªŒé€»è¾‘ï¼Œå¹¶ä¸”å°†è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåºå®šä¹‰åˆ°</strong>**<code>NettyRoutingFilter</code>**<strong>ä¹‹å‰</strong>ï¼Œè¿™å°±ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚äº†ï¼</p><p>é‚£ä¹ˆï¼Œè¯¥å¦‚ä½•å®ç°ä¸€ä¸ªç½‘å…³è¿‡æ»¤å™¨å‘¢ï¼Ÿ</p><p>ç½‘å…³è¿‡æ»¤å™¨é“¾ä¸­çš„è¿‡æ»¤å™¨æœ‰ä¸¤ç§ï¼š</p><ul><li><strong>â€‹<code>GatewayFilter</code>â€‹</strong>ï¼šè·¯ç”±è¿‡æ»¤å™¨ï¼Œä½œç”¨èŒƒå›´æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥æ˜¯ä»»æ„æŒ‡å®šçš„è·¯ç”±<code>Route</code>.</li><li><strong>â€‹<code>GlobalFilter</code>â€‹</strong>ï¼šå…¨å±€è¿‡æ»¤å™¨ï¼Œä½œç”¨èŒƒå›´æ˜¯æ‰€æœ‰è·¯ç”±ï¼Œä¸å¯é…ç½®ã€‚</li></ul><p><strong>æ³¨æ„</strong>ï¼šè¿‡æ»¤å™¨é“¾ä¹‹å¤–è¿˜æœ‰ä¸€ç§è¿‡æ»¤å™¨ï¼ŒHttpHeadersFilterï¼Œç”¨æ¥å¤„ç†ä¼ é€’åˆ°ä¸‹æ¸¸å¾®æœåŠ¡çš„è¯·æ±‚å¤´ã€‚ä¾‹å¦‚org.springframework.cloud.gateway.filter.headers.XForwardedHeadersFilterå¯ä»¥ä¼ é€’ä»£ç†è¯·æ±‚åŸæœ¬çš„hostå¤´åˆ°ä¸‹æ¸¸å¾®æœåŠ¡ã€‚</p><p>å…¶å®<code>GatewayFilter</code>å’Œ<code>GlobalFilter</code>è¿™ä¸¤ç§è¿‡æ»¤å™¨çš„æ–¹æ³•ç­¾åå®Œå…¨ä¸€è‡´ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤„ç†è¯·æ±‚å¹¶å°†å…¶ä¼ é€’ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> exchange å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ï¼Œå…¶ä¸­åŒ…å«requestã€responseç­‰å„ç§æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> chain è¿‡æ»¤å™¨é“¾ï¼ŒåŸºäºå®ƒå‘ä¸‹ä¼ é€’è¯·æ±‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> æ ¹æ®è¿”å›å€¼æ ‡è®°å½“å‰è¯·æ±‚æ˜¯å¦è¢«å®Œæˆæˆ–æ‹¦æˆªï¼Œchain.filter(exchange)å°±æ”¾è¡Œäº†ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span>;</span><br></pre></td></tr></table></figure><p><code>FilteringWebHandler</code>åœ¨å¤„ç†è¯·æ±‚æ—¶ï¼Œä¼šå°†<code>GlobalFilter</code>è£…é¥°ä¸º<code>GatewayFilter</code>ï¼Œç„¶åæ”¾åˆ°åŒä¸€ä¸ªè¿‡æ»¤å™¨é“¾ä¸­ï¼Œæ’åºä»¥åä¾æ¬¡æ‰§è¡Œã€‚</p><p><code>Gateway</code>ä¸­å†…ç½®äº†å¾ˆå¤šçš„<code>GatewayFilter</code>ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://docs.spring.io/spring-cloud-gateway/docs/3.1.7/reference/html/#gatewayfilter-factories">https://docs.spring.io/spring-cloud-gateway/docs/3.1.7/reference/html/#gatewayfilter-factories</a></p><p><code>Gateway</code>å†…ç½®çš„<code>GatewayFilter</code>è¿‡æ»¤å™¨ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œæ— éœ€ç¼–ç ï¼Œåªè¦åœ¨yamlæ–‡ä»¶ä¸­ç®€å•é…ç½®å³å¯ã€‚è€Œä¸”å…¶ä½œç”¨èŒƒå›´ä¹Ÿå¾ˆçµæ´»ï¼Œé…ç½®åœ¨å“ªä¸ª<code>Route</code>ä¸‹ï¼Œå°±ä½œç”¨äºå“ªä¸ª<code>Route</code>.</p><p>ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªè¿‡æ»¤å™¨å«åš<code>AddRequestHeaderGatewayFilterFacotry</code>ï¼Œé¡¾æ˜æ€è®®ï¼Œå°±æ˜¯æ·»åŠ è¯·æ±‚å¤´çš„è¿‡æ»¤å™¨ï¼Œå¯ä»¥ç»™è¯·æ±‚æ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´å¹¶ä¼ é€’åˆ°ä¸‹æ¸¸å¾®æœåŠ¡ã€‚</p><p>ä½¿ç”¨çš„ä½¿ç”¨åªéœ€è¦åœ¨application.yamlä¸­è¿™æ ·é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">test_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://test-service</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">          <span class="string">-Path=/test/**</span></span><br><span class="line">        <span class="attr">filters:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">AddRequestHeader=key,</span> <span class="string">value</span> <span class="comment"># é€—å·ä¹‹å‰æ˜¯è¯·æ±‚å¤´çš„keyï¼Œé€—å·ä¹‹åæ˜¯value</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦è®©è¿‡æ»¤å™¨ä½œç”¨äºæ‰€æœ‰çš„è·¯ç”±ï¼Œåˆ™å¯ä»¥è¿™æ ·é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">default-filters:</span> <span class="comment"># default-filtersä¸‹çš„è¿‡æ»¤å™¨å¯ä»¥ä½œç”¨äºæ‰€æœ‰è·¯ç”±</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddRequestHeader=key,</span> <span class="string">value</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">test_route</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://test-service</span></span><br><span class="line">        <span class="attr">predicates:</span></span><br><span class="line">          <span class="string">-Path=/test/**</span></span><br></pre></td></tr></table></figure><h2 id="2-3-è‡ªå®šä¹‰è¿‡æ»¤å™¨"><a href="#2-3-è‡ªå®šä¹‰è¿‡æ»¤å™¨" class="headerlink" title="2.3.è‡ªå®šä¹‰è¿‡æ»¤å™¨"></a>2.3.è‡ªå®šä¹‰è¿‡æ»¤å™¨</h2><p>æ— è®ºæ˜¯<code>GatewayFilter</code>â€‹è¿˜æ˜¯<code>GlobalFilter</code>â€‹éƒ½æ”¯æŒè‡ªå®šä¹‰ï¼Œåªä¸è¿‡ç¼–ç æ–¹å¼ã€ä½¿ç”¨æ–¹å¼ç•¥æœ‰å·®åˆ«ã€‚</p><h3 id="2-3-1-è‡ªå®šä¹‰GatewayFilter"><a href="#2-3-1-è‡ªå®šä¹‰GatewayFilter" class="headerlink" title="2.3.1.è‡ªå®šä¹‰GatewayFilter"></a>2.3.1.è‡ªå®šä¹‰GatewayFilter</h3><p>è‡ªå®šä¹‰<code>GatewayFilter</code>ä¸æ˜¯ç›´æ¥å®ç°<code>GatewayFilter</code>ï¼Œè€Œæ˜¯å®ç°<code>AbstractGatewayFilterFactory</code>ã€‚æœ€ç®€å•çš„æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintAnyGatewayFilterFactory</span> <span class="keyword">extends</span> <span class="title class_">AbstractGatewayFilterFactory</span>&lt;Object&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> GatewayFilter <span class="title function_">apply</span><span class="params">(Object config)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">GatewayFilter</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">                <span class="comment">// è·å–è¯·æ±‚</span></span><br><span class="line">                <span class="type">ServerHttpRequest</span> <span class="variable">request</span> <span class="operator">=</span> exchange.getRequest();</span><br><span class="line">                <span class="comment">// ç¼–å†™è¿‡æ»¤å™¨é€»è¾‘</span></span><br><span class="line">                System.out.println(<span class="string">&quot;è¿‡æ»¤å™¨æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">                <span class="comment">// æ”¾è¡Œ</span></span><br><span class="line">                <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šè¯¥ç±»çš„åç§°ä¸€å®šè¦ä»¥<code>GatewayFilterFactory</code>ä¸ºåç¼€ï¼</p><p>ç„¶ååœ¨yamlé…ç½®ä¸­è¿™æ ·ä½¿ç”¨ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">default-filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">PrintAny</span> <span class="comment"># æ­¤å¤„ç›´æ¥ä»¥è‡ªå®šä¹‰çš„GatewayFilterFactoryç±»åç§°å‰ç¼€ç±»å£°æ˜è¿‡æ»¤å™¨</span></span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œè¿™ç§è¿‡æ»¤å™¨è¿˜å¯ä»¥æ”¯æŒåŠ¨æ€é…ç½®å‚æ•°ï¼Œä¸è¿‡å®ç°èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintAnyGatewayFilterFactory</span> <span class="comment">// çˆ¶ç±»æ³›å‹æ˜¯å†…éƒ¨ç±»çš„Configç±»å‹</span></span><br><span class="line">                <span class="keyword">extends</span> <span class="title class_">AbstractGatewayFilterFactory</span>&lt;PrintAnyGatewayFilterFactory.Config&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> GatewayFilter <span class="title function_">apply</span><span class="params">(Config config)</span> &#123;</span><br><span class="line">        <span class="comment">// OrderedGatewayFilteræ˜¯GatewayFilterçš„å­ç±»ï¼ŒåŒ…å«ä¸¤ä¸ªå‚æ•°ï¼š</span></span><br><span class="line">        <span class="comment">// - GatewayFilterï¼šè¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="comment">// - int orderå€¼ï¼šå€¼è¶Šå°ï¼Œè¿‡æ»¤å™¨æ‰§è¡Œä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderedGatewayFilter</span>(<span class="keyword">new</span> <span class="title class_">GatewayFilter</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">                <span class="comment">// è·å–configå€¼</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> config.getA();</span><br><span class="line">                <span class="type">String</span> <span class="variable">b</span> <span class="operator">=</span> config.getB();</span><br><span class="line">                <span class="type">String</span> <span class="variable">c</span> <span class="operator">=</span> config.getC();</span><br><span class="line">                <span class="comment">// ç¼–å†™è¿‡æ»¤å™¨é€»è¾‘</span></span><br><span class="line">                System.out.println(<span class="string">&quot;a = &quot;</span> + a);</span><br><span class="line">                System.out.println(<span class="string">&quot;b = &quot;</span> + b);</span><br><span class="line">                System.out.println(<span class="string">&quot;c = &quot;</span> + c);</span><br><span class="line">                <span class="comment">// æ”¾è¡Œ</span></span><br><span class="line">                <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰é…ç½®å±æ€§ï¼Œæˆå‘˜å˜é‡åç§°å¾ˆé‡è¦ï¼Œä¸‹é¢ä¼šç”¨åˆ°</span></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Config</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String a;</span><br><span class="line">        <span class="keyword">private</span> String b;</span><br><span class="line">        <span class="keyword">private</span> String c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å°†å˜é‡åç§°ä¾æ¬¡è¿”å›ï¼Œé¡ºåºå¾ˆé‡è¦ï¼Œå°†æ¥è¯»å–å‚æ•°æ—¶éœ€è¦æŒ‰é¡ºåºè·å–</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">shortcutFieldOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> List.of(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">// è¿”å›å½“å‰é…ç½®ç±»çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å†…éƒ¨çš„Config</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;Config&gt; <span class="title function_">getConfigClass</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Config.class;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨yamlæ–‡ä»¶ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">default-filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">PrintAny=1,2,3</span> <span class="comment"># æ³¨æ„ï¼Œè¿™é‡Œå¤šä¸ªå‚æ•°ä»¥&quot;,&quot;éš”å¼€ï¼Œå°†æ¥ä¼šæŒ‰ç…§shortcutFieldOrder()æ–¹æ³•è¿”å›çš„å‚æ•°é¡ºåºä¾æ¬¡å¤åˆ¶</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ç§é…ç½®æ–¹å¼å‚æ•°å¿…é¡»ä¸¥æ ¼æŒ‰ç…§shortcutFieldOrder()æ–¹æ³•çš„è¿”å›å‚æ•°åé¡ºåºæ¥èµ‹å€¼ã€‚</p><p>è¿˜æœ‰ä¸€ç§ç”¨æ³•ï¼Œæ— éœ€æŒ‰ç…§è¿™ä¸ªé¡ºåºï¼Œå°±æ˜¯æ‰‹åŠ¨æŒ‡å®šå‚æ•°åï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">default-filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">PrintAny</span></span><br><span class="line">              <span class="attr">args:</span> <span class="comment"># æ‰‹åŠ¨æŒ‡å®šå‚æ•°åï¼Œæ— éœ€æŒ‰ç…§å‚æ•°é¡ºåº</span></span><br><span class="line">                <span class="attr">a:</span> <span class="number">1</span></span><br><span class="line">                <span class="attr">b:</span> <span class="number">2</span></span><br><span class="line">                <span class="attr">c:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><h3 id="2-3-2-è‡ªå®šä¹‰GlobalFilter"><a href="#2-3-2-è‡ªå®šä¹‰GlobalFilter" class="headerlink" title="2.3.2.è‡ªå®šä¹‰GlobalFilter"></a>2.3.2.è‡ªå®šä¹‰GlobalFilter</h3><p>è‡ªå®šä¹‰GlobalFilteråˆ™ç®€å•å¾ˆå¤šï¼Œç›´æ¥å®ç°GlobalFilterå³å¯ï¼Œè€Œä¸”ä¹Ÿæ— æ³•è®¾ç½®åŠ¨æ€å‚æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintAnyGlobalFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span>, Ordered &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="comment">// ç¼–å†™è¿‡æ»¤å™¨é€»è¾‘</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æœªç™»å½•ï¼Œæ— æ³•è®¿é—®&quot;</span>);</span><br><span class="line">        <span class="comment">// æ”¾è¡Œ</span></span><br><span class="line">        <span class="comment">// return chain.filter(exchange);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‹¦æˆª</span></span><br><span class="line">        <span class="type">ServerHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> exchange.getResponse();</span><br><span class="line">        response.setRawStatusCode(<span class="number">401</span>);</span><br><span class="line">        <span class="keyword">return</span> response.setComplete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåºï¼Œå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-4-ç™»å½•æ ¡éªŒ"><a href="#2-4-ç™»å½•æ ¡éªŒ" class="headerlink" title="2.4.ç™»å½•æ ¡éªŒ"></a>2.4.ç™»å½•æ ¡éªŒ</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨è‡ªå®šä¹‰<code>GlobalFilter</code>æ¥å®Œæˆç™»å½•æ ¡éªŒã€‚</p><h3 id="2-4-1-JWTå·¥å…·"><a href="#2-4-1-JWTå·¥å…·" class="headerlink" title="2.4.1.JWTå·¥å…·"></a>2.4.1.JWTå·¥å…·</h3><p>ç™»å½•æ ¡éªŒéœ€è¦ç”¨åˆ°JWTï¼Œè€Œä¸”JWTçš„åŠ å¯†éœ€è¦ç§˜é’¥å’ŒåŠ å¯†å·¥å…·ã€‚è¿™äº›åœ¨<code>hm-service</code>ä¸­å·²ç»æœ‰äº†ï¼Œæˆ‘ä»¬ç›´æ¥æ‹·è´è¿‡æ¥ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-17258713746787-20240909164336-9dmijkv.png" alt="img"></p><p>å…·ä½“ä½œç”¨å¦‚ä¸‹ï¼š</p><ul><li><code>AuthProperties</code>ï¼šé…ç½®ç™»å½•æ ¡éªŒéœ€è¦æ‹¦æˆªçš„è·¯å¾„ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰çš„è·¯å¾„éƒ½éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®</li><li><code>JwtProperties</code>ï¼šå®šä¹‰ä¸JWTå·¥å…·æœ‰å…³çš„å±æ€§ï¼Œæ¯”å¦‚ç§˜é’¥æ–‡ä»¶ä½ç½®</li><li><code>SecurityConfig</code>ï¼šå·¥å…·çš„è‡ªåŠ¨è£…é…</li><li><code>JwtTool</code>ï¼šJWTå·¥å…·ï¼Œå…¶ä¸­åŒ…å«äº†æ ¡éªŒå’Œè§£æ<code>token</code>çš„åŠŸèƒ½</li><li><code>hmall.jks</code>ï¼šç§˜é’¥æ–‡ä»¶</li></ul><p>å…¶ä¸­<code>AuthProperties</code>å’Œ<code>JwtProperties</code>æ‰€éœ€çš„å±æ€§è¦åœ¨<code>application.yaml</code>ä¸­é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hm:</span></span><br><span class="line">  <span class="attr">jwt:</span></span><br><span class="line">    <span class="attr">location:</span> <span class="string">classpath:hmall.jks</span> <span class="comment"># ç§˜é’¥åœ°å€</span></span><br><span class="line">    <span class="attr">alias:</span> <span class="string">hmall</span> <span class="comment"># ç§˜é’¥åˆ«å</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">hmall123</span> <span class="comment"># ç§˜é’¥æ–‡ä»¶å¯†ç </span></span><br><span class="line">    <span class="attr">tokenTTL:</span> <span class="string">30m</span> <span class="comment"># ç™»å½•æœ‰æ•ˆæœŸ</span></span><br><span class="line">  <span class="attr">auth:</span></span><br><span class="line">    <span class="attr">excludePaths:</span> <span class="comment"># æ— éœ€ç™»å½•æ ¡éªŒçš„è·¯å¾„</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/search/**</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/users/login</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/items/**</span></span><br></pre></td></tr></table></figure><h3 id="2-4-2-ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨"><a href="#2-4-2-ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨" class="headerlink" title="2.4.2.ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨"></a>2.4.2.ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç™»å½•æ ¡éªŒçš„è¿‡æ»¤å™¨ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-17258713746788-20240909164336-ywjloyl.png" alt="img"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.gateway.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hmall.common.exception.UnauthorizedException;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.utils.CollUtils;</span><br><span class="line"><span class="keyword">import</span> com.hmall.gateway.config.AuthProperties;</span><br><span class="line"><span class="keyword">import</span> com.hmall.gateway.util.JwtTool;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.GatewayFilterChain;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.GlobalFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.Ordered;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.server.reactive.ServerHttpRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.server.reactive.ServerHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.AntPathMatcher;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.server.ServerWebExchange;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(AuthProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthGlobalFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span>, Ordered &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> JwtTool jwtTool;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> AuthProperties authProperties;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">AntPathMatcher</span> <span class="variable">antPathMatcher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AntPathMatcher</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.è·å–Request</span></span><br><span class="line">        <span class="type">ServerHttpRequest</span> <span class="variable">request</span> <span class="operator">=</span> exchange.getRequest();</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­æ˜¯å¦ä¸éœ€è¦æ‹¦æˆª</span></span><br><span class="line">        <span class="keyword">if</span>(isExclude(request.getPath().toString()))&#123;</span><br><span class="line">            <span class="comment">// æ— éœ€æ‹¦æˆªï¼Œç›´æ¥æ”¾è¡Œ</span></span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.è·å–è¯·æ±‚å¤´ä¸­çš„token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        List&lt;String&gt; headers = request.getHeaders().get(<span class="string">&quot;authorization&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!CollUtils.isEmpty(headers)) &#123;</span><br><span class="line">            token = headers.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.æ ¡éªŒå¹¶è§£ætoken</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            userId = jwtTool.parseToken(token);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnauthorizedException e) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ— æ•ˆï¼Œæ‹¦æˆª</span></span><br><span class="line">            <span class="type">ServerHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> exchange.getResponse();</span><br><span class="line">            response.setRawStatusCode(<span class="number">401</span>);</span><br><span class="line">            <span class="keyword">return</span> response.setComplete();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// TODO 5.å¦‚æœæœ‰æ•ˆï¼Œä¼ é€’ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        System.out.println(<span class="string">&quot;userId = &quot;</span> + userId);</span><br><span class="line">        <span class="comment">// 6.æ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isExclude</span><span class="params">(String antPath)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (String pathPattern : authProperties.getExcludePaths()) &#123;</span><br><span class="line">            <span class="keyword">if</span>(antPathMatcher.match(pathPattern, antPath))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¯æµ‹è¯•ï¼Œä¼šå‘ç°è®¿é—®&#x2F;itemså¼€å¤´çš„è·¯å¾„ï¼Œæœªç™»å½•çŠ¶æ€ä¸‹ä¸ä¼šè¢«æ‹¦æˆªï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-17258713746789-20240909164336-vf1jyi2.png" alt="img"></p><p>è®¿é—®å…¶ä»–è·¯å¾„åˆ™ï¼Œæœªç™»å½•çŠ¶æ€ä¸‹è¯·æ±‚ä¼šè¢«æ‹¦æˆªï¼Œå¹¶ä¸”è¿”å›<code>401</code>çŠ¶æ€ç ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467810-20240909164336-tllcns6.png" alt="img"></p><h2 id="2-5-å¾®æœåŠ¡è·å–ç”¨æˆ·"><a href="#2-5-å¾®æœåŠ¡è·å–ç”¨æˆ·" class="headerlink" title="2.5.å¾®æœåŠ¡è·å–ç”¨æˆ·"></a>2.5.å¾®æœåŠ¡è·å–ç”¨æˆ·</h2><p>ç°åœ¨ï¼Œç½‘å…³å·²ç»å¯ä»¥å®Œæˆç™»å½•æ ¡éªŒå¹¶è·å–ç™»å½•ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚ä½†æ˜¯å½“ç½‘å…³å°†è¯·æ±‚è½¬å‘åˆ°å¾®æœåŠ¡æ—¶ï¼Œå¾®æœåŠ¡åˆè¯¥å¦‚ä½•è·å–ç”¨æˆ·èº«ä»½å‘¢ï¼Ÿ</p><p>ç”±äºç½‘å…³å‘é€è¯·æ±‚åˆ°å¾®æœåŠ¡ä¾ç„¶é‡‡ç”¨çš„æ˜¯<code>Http</code>è¯·æ±‚ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·ä¿¡æ¯ä»¥è¯·æ±‚å¤´çš„æ–¹å¼ä¼ é€’åˆ°ä¸‹æ¸¸å¾®æœåŠ¡ã€‚ç„¶åå¾®æœåŠ¡å¯ä»¥ä»è¯·æ±‚å¤´ä¸­è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ã€‚è€ƒè™‘åˆ°å¾®æœåŠ¡å†…éƒ¨å¯èƒ½å¾ˆå¤šåœ°æ–¹éƒ½éœ€è¦ç”¨åˆ°ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨SpringMVCçš„æ‹¦æˆªå™¨æ¥å®ç°ç™»å½•ç”¨æˆ·ä¿¡æ¯è·å–ï¼Œå¹¶å­˜å…¥ThreadLocalï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ã€‚</p><p>æ®å›¾æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467811-20240909164336-fm54osb.jpeg" alt="img"></p><p>å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„äº‹æƒ…æœ‰ï¼š</p><ul><li>æ”¹é€ ç½‘å…³è¿‡æ»¤å™¨ï¼Œåœ¨è·å–ç”¨æˆ·ä¿¡æ¯åä¿å­˜åˆ°è¯·æ±‚å¤´ï¼Œè½¬å‘åˆ°ä¸‹æ¸¸å¾®æœåŠ¡</li><li>ç¼–å†™å¾®æœåŠ¡æ‹¦æˆªå™¨ï¼Œæ‹¦æˆªè¯·æ±‚è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œä¿å­˜åˆ°ThreadLocalåæ”¾è¡Œ</li></ul><h3 id="2-5-1-ä¿å­˜ç”¨æˆ·åˆ°è¯·æ±‚å¤´"><a href="#2-5-1-ä¿å­˜ç”¨æˆ·åˆ°è¯·æ±‚å¤´" class="headerlink" title="2.5.1.ä¿å­˜ç”¨æˆ·åˆ°è¯·æ±‚å¤´"></a>2.5.1.ä¿å­˜ç”¨æˆ·åˆ°è¯·æ±‚å¤´</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¿®æ”¹ç™»å½•æ ¡éªŒæ‹¦æˆªå™¨çš„å¤„ç†é€»è¾‘ï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°è¯·æ±‚å¤´ä¸­ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467812-20240909164336-wx73b0b.png" alt="img"></p><h3 id="2-5-2-æ‹¦æˆªå™¨è·å–ç”¨æˆ·"><a href="#2-5-2-æ‹¦æˆªå™¨è·å–ç”¨æˆ·" class="headerlink" title="2.5.2.æ‹¦æˆªå™¨è·å–ç”¨æˆ·"></a>2.5.2.æ‹¦æˆªå™¨è·å–ç”¨æˆ·</h3><p>åœ¨hm-commonä¸­å·²ç»æœ‰ä¸€ä¸ªç”¨äºä¿å­˜ç™»å½•ç”¨æˆ·çš„ThreadLocalå·¥å…·ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467913-20240909164336-e86ax74.png" alt="img"></p><p>å…¶ä¸­å·²ç»æä¾›äº†ä¿å­˜å’Œè·å–ç”¨æˆ·çš„æ–¹æ³•ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467914-20240909164336-ibbd1ty.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™æ‹¦æˆªå™¨ï¼Œè·å–ç”¨æˆ·ä¿¡æ¯å¹¶ä¿å­˜åˆ°<code>UserContext</code>ï¼Œç„¶åæ”¾è¡Œå³å¯ã€‚</p><p>ç”±äºæ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è·å–ç™»å½•ç”¨æˆ·çš„éœ€æ±‚ï¼Œå› æ­¤æ‹¦æˆªå™¨æˆ‘ä»¬ç›´æ¥å†™åœ¨<code>hm-common</code>ä¸­ï¼Œå¹¶å†™å¥½è‡ªåŠ¨è£…é…ã€‚è¿™æ ·å¾®æœåŠ¡åªéœ€è¦å¼•å…¥<code>hm-common</code>å°±å¯ä»¥ç›´æ¥å…·å¤‡æ‹¦æˆªå™¨åŠŸèƒ½ï¼Œæ— éœ€é‡å¤ç¼–å†™ã€‚</p><p>æˆ‘ä»¬åœ¨<code>hm-common</code>æ¨¡å—ä¸‹å®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467915-20240909164336-pn0zma8.png" alt="img"></p><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.common.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.utils.UserContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserInfoInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 1.è·å–è¯·æ±‚å¤´ä¸­çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userInfo</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;user-info&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isNotBlank(userInfo)) &#123;</span><br><span class="line">            <span class="comment">// ä¸ä¸ºç©ºï¼Œä¿å­˜åˆ°ThreadLocal</span></span><br><span class="line">                UserContext.setUser(Long.valueOf(userInfo));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.æ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// ç§»é™¤ç”¨æˆ·</span></span><br><span class="line">        UserContext.removeUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€åœ¨<code>hm-common</code>æ¨¡å—ä¸‹ç¼–å†™<code>SpringMVC</code>çš„é…ç½®ç±»ï¼Œé…ç½®ç™»å½•æ‹¦æˆªå™¨ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467916-20240909164336-5oefgql.png" alt="img"></p><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.common.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hmall.common.interceptors.UserInfoInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnClass;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.DispatcherServlet;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(DispatcherServlet.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">UserInfoInterceptor</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªé…ç½®ç±»é»˜è®¤æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼Œå› ä¸ºå®ƒæ‰€åœ¨çš„åŒ…æ˜¯<code>com.hmall.common.config</code>ï¼Œä¸å…¶å®ƒå¾®æœåŠ¡çš„æ‰«æåŒ…ä¸ä¸€è‡´ï¼Œæ— æ³•è¢«æ‰«æåˆ°ï¼Œå› æ­¤æ— æ³•ç”Ÿæ•ˆã€‚</p><p>åŸºäºSpringBootçš„è‡ªåŠ¨è£…é…åŸç†ï¼Œæˆ‘ä»¬è¦å°†å…¶æ·»åŠ åˆ°<code>resources</code>ç›®å½•ä¸‹çš„<code>META-INF/spring.factories</code>æ–‡ä»¶ä¸­ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467917-20240909164336-4uzrv8h.png" alt="img"></p><p>å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="string">\</span></span><br><span class="line"><span class="string">  com.hmall.common.config.MyBatisConfig,\</span></span><br><span class="line"><span class="string">  com.hmall.common.config.MvcConfig</span></span><br></pre></td></tr></table></figure><h3 id="2-5-3-æ¢å¤è´­ç‰©è½¦ä»£ç "><a href="#2-5-3-æ¢å¤è´­ç‰©è½¦ä»£ç " class="headerlink" title="2.5.3.æ¢å¤è´­ç‰©è½¦ä»£ç "></a>2.5.3.æ¢å¤è´­ç‰©è½¦ä»£ç </h3><p>ä¹‹å‰æˆ‘ä»¬æ— æ³•è·å–ç™»å½•ç”¨æˆ·ï¼Œæ‰€ä»¥æŠŠè´­ç‰©è½¦æœåŠ¡çš„ç™»å½•ç”¨æˆ·å†™æ­»äº†ï¼Œç°åœ¨éœ€è¦æ¢å¤åˆ°åŸæ¥çš„æ ·å­ã€‚</p><p>æ‰¾åˆ°<code>cart-service</code>æ¨¡å—çš„<code>com.hmall.cart.service.impl.CartServiceImpl</code>ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467918-20240909164336-xzunu98.png" alt="img"></p><p>ä¿®æ”¹å…¶ä¸­çš„<code>queryMyCarts</code>æ–¹æ³•ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467919-20240909164336-nj9fejm.png" alt="img"></p><h2 id="2-6-OpenFeignä¼ é€’ç”¨æˆ·"><a href="#2-6-OpenFeignä¼ é€’ç”¨æˆ·" class="headerlink" title="2.6.OpenFeignä¼ é€’ç”¨æˆ·"></a>2.6.OpenFeignä¼ é€’ç”¨æˆ·</h2><p>å‰ç«¯å‘èµ·çš„è¯·æ±‚éƒ½ä¼šç»è¿‡ç½‘å…³å†åˆ°å¾®æœåŠ¡ï¼Œç”±äºæˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨åŠŸèƒ½ï¼Œå¾®æœåŠ¡å¯ä»¥è½»æ¾è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>ä½†æœ‰äº›ä¸šåŠ¡æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œè¯·æ±‚åˆ°è¾¾å¾®æœåŠ¡åè¿˜éœ€è¦è°ƒç”¨å…¶å®ƒå¤šä¸ªå¾®æœåŠ¡ã€‚æ¯”å¦‚ä¸‹å•ä¸šåŠ¡ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467920-20240909164336-2f8zp6p.jpeg" alt="img"></p><p>ä¸‹å•çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è°ƒç”¨å•†å“æœåŠ¡æ‰£å‡åº“å­˜ï¼Œè°ƒç”¨è´­ç‰©è½¦æœåŠ¡æ¸…ç†ç”¨æˆ·è´­ç‰©è½¦ã€‚è€Œæ¸…ç†è´­ç‰©è½¦æ—¶å¿…é¡»çŸ¥é“å½“å‰ç™»å½•çš„ç”¨æˆ·èº«ä»½ã€‚ä½†æ˜¯ï¼Œ<strong>è®¢å•æœåŠ¡è°ƒç”¨è´­ç‰©è½¦æ—¶å¹¶æ²¡æœ‰ä¼ é€’ç”¨æˆ·ä¿¡æ¯</strong>ï¼Œè´­ç‰©è½¦æœåŠ¡æ— æ³•çŸ¥é“å½“å‰ç”¨æˆ·æ˜¯è°ï¼</p><p>ç”±äºå¾®æœåŠ¡è·å–ç”¨æˆ·ä¿¡æ¯æ˜¯é€šè¿‡æ‹¦æˆªå™¨åœ¨è¯·æ±‚å¤´ä¸­è¯»å–ï¼Œå› æ­¤è¦æƒ³å®ç°å¾®æœåŠ¡ä¹‹é—´çš„ç”¨æˆ·ä¿¡æ¯ä¼ é€’ï¼Œå°±<strong>å¿…é¡»åœ¨å¾®æœåŠ¡å‘èµ·è°ƒç”¨æ—¶æŠŠç”¨æˆ·ä¿¡æ¯å­˜å…¥è¯·æ±‚å¤´</strong>ã€‚</p><p>å¾®æœåŠ¡ä¹‹é—´è°ƒç”¨æ˜¯åŸºäºOpenFeignæ¥å®ç°çš„ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬è‡ªå·±å‘é€çš„è¯·æ±‚ã€‚æˆ‘ä»¬å¦‚ä½•æ‰èƒ½è®©æ¯ä¸€ä¸ªç”±OpenFeignå‘èµ·çš„è¯·æ±‚è‡ªåŠ¨æºå¸¦ç™»å½•ç”¨æˆ·ä¿¡æ¯å‘¢ï¼Ÿ</p><p>è¿™é‡Œè¦å€ŸåŠ©Feignä¸­æä¾›çš„ä¸€ä¸ªæ‹¦æˆªå™¨æ¥å£ï¼š<code>feign.RequestInterceptor</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RequestInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Called for every request. </span></span><br><span class="line"><span class="comment">   * Add data using methods on the supplied &#123;<span class="doctag">@link</span> RequestTemplate&#125;.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">apply</span><span class="params">(RequestTemplate template)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åªéœ€è¦å®ç°è¿™ä¸ªæ¥å£ï¼Œç„¶åå®ç°applyæ–¹æ³•ï¼Œåˆ©ç”¨<code>RequestTemplate</code>ç±»æ¥æ·»åŠ è¯·æ±‚å¤´ï¼Œå°†ç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°è¯·æ±‚å¤´ä¸­ã€‚è¿™æ ·ä»¥æ¥ï¼Œæ¯æ¬¡OpenFeignå‘èµ·è¯·æ±‚çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¼ é€’ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>ç”±äº<code>FeignClient</code>å…¨éƒ¨éƒ½æ˜¯åœ¨<code>hm-api</code>æ¨¡å—ï¼Œå› æ­¤æˆ‘ä»¬åœ¨<code>hm-api</code>æ¨¡å—çš„<code>com.hmall.api.config.DefaultFeignConfig</code>ä¸­ç¼–å†™è¿™ä¸ªæ‹¦æˆªå™¨ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467921-20240909164336-0pcz54q.png" alt="img"></p><p>åœ¨<code>com.hmall.api.config.DefaultFeignConfig</code>ä¸­æ·»åŠ ä¸€ä¸ªBeanï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> RequestInterceptor <span class="title function_">userInfoRequestInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RequestInterceptor</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">apply</span><span class="params">(RequestTemplate template)</span> &#123;</span><br><span class="line">            <span class="comment">// è·å–ç™»å½•ç”¨æˆ·</span></span><br><span class="line">            <span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> UserContext.getUser();</span><br><span class="line">            <span class="keyword">if</span>(userId == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœä¸ºç©ºåˆ™ç›´æ¥è·³è¿‡</span></span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœä¸ä¸ºç©ºåˆ™æ”¾å…¥è¯·æ±‚å¤´ä¸­ï¼Œä¼ é€’ç»™ä¸‹æ¸¸å¾®æœåŠ¡</span></span><br><span class="line">            template.header(<span class="string">&quot;user-info&quot;</span>, userId.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œç°åœ¨å¾®æœåŠ¡ä¹‹é—´é€šè¿‡OpenFeignè°ƒç”¨æ—¶ä¹Ÿä¼šä¼ é€’ç™»å½•ç”¨æˆ·ä¿¡æ¯äº†ã€‚</p><h1 id="3-é…ç½®ç®¡ç†"><a href="#3-é…ç½®ç®¡ç†" class="headerlink" title="3.é…ç½®ç®¡ç†"></a>3.é…ç½®ç®¡ç†</h1><p>åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»è§£å†³äº†å¾®æœåŠ¡ç›¸å…³çš„å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨</li><li>å¾®æœåŠ¡æ³¨å†Œã€å‘ç°</li><li>å¾®æœåŠ¡è¯·æ±‚è·¯ç”±ã€è´Ÿè½½å‡è¡¡</li><li>å¾®æœåŠ¡ç™»å½•ç”¨æˆ·ä¿¡æ¯ä¼ é€’</li></ul><p>ä¸è¿‡ï¼Œç°åœ¨ä¾ç„¶è¿˜æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼š</p><ul><li>ç½‘å…³è·¯ç”±åœ¨é…ç½®æ–‡ä»¶ä¸­å†™æ­»äº†ï¼Œå¦‚æœå˜æ›´å¿…é¡»é‡å¯å¾®æœåŠ¡</li><li>æŸäº›ä¸šåŠ¡é…ç½®åœ¨é…ç½®æ–‡ä»¶ä¸­å†™æ­»äº†ï¼Œæ¯æ¬¡ä¿®æ”¹éƒ½è¦é‡å¯æœåŠ¡</li><li>æ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰å¾ˆå¤šé‡å¤çš„é…ç½®ï¼Œç»´æŠ¤æˆæœ¬é«˜</li></ul><p>è¿™äº›é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ç»Ÿä¸€çš„<strong>é…ç½®ç®¡ç†å™¨æœåŠ¡</strong>è§£å†³ã€‚è€ŒNacosä¸ä»…ä»…å…·å¤‡æ³¨å†Œä¸­å¿ƒåŠŸèƒ½ï¼Œä¹Ÿå…·å¤‡é…ç½®ç®¡ç†çš„åŠŸèƒ½ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467922-20240909164336-2glcxb6.jpeg" alt="img"></p><p>å¾®æœåŠ¡å…±äº«çš„é…ç½®å¯ä»¥ç»Ÿä¸€äº¤ç»™Nacosä¿å­˜å’Œç®¡ç†ï¼Œåœ¨Nacosæ§åˆ¶å°ä¿®æ”¹é…ç½®åï¼ŒNacosä¼šå°†é…ç½®å˜æ›´æ¨é€ç»™ç›¸å…³çš„å¾®æœåŠ¡ï¼Œå¹¶ä¸”æ— éœ€é‡å¯å³å¯ç”Ÿæ•ˆï¼Œå®ç°é…ç½®çƒ­æ›´æ–°ã€‚</p><p>ç½‘å…³çš„è·¯ç”±åŒæ ·æ˜¯é…ç½®ï¼Œå› æ­¤åŒæ ·å¯ä»¥åŸºäºè¿™ä¸ªåŠŸèƒ½å®ç°åŠ¨æ€è·¯ç”±åŠŸèƒ½ï¼Œæ— éœ€é‡å¯ç½‘å…³å³å¯ä¿®æ”¹è·¯ç”±é…ç½®ã€‚</p><h2 id="3-1-é…ç½®å…±äº«"><a href="#3-1-é…ç½®å…±äº«" class="headerlink" title="3.1.é…ç½®å…±äº«"></a>3.1.é…ç½®å…±äº«</h2><p>æˆ‘ä»¬å¯ä»¥æŠŠå¾®æœåŠ¡å…±äº«çš„é…ç½®æŠ½å–åˆ°Nacosä¸­ç»Ÿä¸€ç®¡ç†ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯ä¸ªå¾®æœåŠ¡éƒ½é‡å¤é…ç½®äº†ã€‚åˆ†ä¸ºä¸¤æ­¥ï¼š</p><ul><li>åœ¨Nacosä¸­æ·»åŠ å…±äº«é…ç½®</li><li>å¾®æœåŠ¡æ‹‰å–é…ç½®</li></ul><h3 id="3-1-1-æ·»åŠ å…±äº«é…ç½®"><a href="#3-1-1-æ·»åŠ å…±äº«é…ç½®" class="headerlink" title="3.1.1.æ·»åŠ å…±äº«é…ç½®"></a>3.1.1.æ·»åŠ å…±äº«é…ç½®</h3><p>ä»¥cart-serviceä¸ºä¾‹ï¼Œæˆ‘ä»¬çœ‹çœ‹æœ‰å“ªäº›é…ç½®æ˜¯é‡å¤çš„ï¼Œå¯ä»¥æŠ½å–çš„ï¼š</p><p>é¦–å…ˆæ˜¯jdbcç›¸å…³é…ç½®ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467923-20240909164336-zv8jqjo.png" alt="img"></p><p>ç„¶åæ˜¯æ—¥å¿—é…ç½®ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137467924-20240909164336-wue7r8r.png" alt="img"></p><p>ç„¶åæ˜¯swaggerä»¥åŠOpenFeignçš„é…ç½®ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468025-20240909164336-gkd9hd7.png" alt="img"></p><p>æˆ‘ä»¬åœ¨nacosæ§åˆ¶å°åˆ†åˆ«æ·»åŠ è¿™äº›é…ç½®ã€‚</p><p>é¦–å…ˆæ˜¯jdbcç›¸å…³é…ç½®ï¼Œåœ¨<code>é…ç½®ç®¡ç†</code>-&gt;<code>é…ç½®åˆ—è¡¨</code>ä¸­ç‚¹å‡»<code>+</code>æ–°å»ºä¸€ä¸ªé…ç½®ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468026-20240909164336-u1vu6zh.png" alt="img"></p><p>åœ¨å¼¹å‡ºçš„è¡¨å•ä¸­å¡«å†™ä¿¡æ¯ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468027-20240909164336-h6fcxq2.png" alt="img"></p><p>å…¶ä¸­è¯¦ç»†çš„é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://$&#123;hm.db.host:192.168.150.101&#125;:$&#123;hm.db.port:3306&#125;/$&#123;hm.db.database&#125;?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">$&#123;hm.db.un:root&#125;</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;hm.db.pw:123&#125;</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">update-strategy:</span> <span class="string">not_null</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„jdbcçš„ç›¸å…³å‚æ•°å¹¶æ²¡æœ‰å†™æ­»ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>æ•°æ®åº“ip</code>ï¼šé€šè¿‡<code>$&#123;hm.db.host:192.168.150.101&#125;</code>é…ç½®äº†é»˜è®¤å€¼ä¸º<code>192.168.150.101</code>ï¼ŒåŒæ—¶å…è®¸é€šè¿‡<code>$&#123;hm.db.host&#125;</code>æ¥è¦†ç›–é»˜è®¤å€¼</li><li><code>æ•°æ®åº“ç«¯å£</code>â€‹ï¼šé€šè¿‡<code>$&#123;hm.db.port:3306&#125;</code>â€‹é…ç½®äº†é»˜è®¤å€¼ä¸º<code>3306</code>â€‹ï¼ŒåŒæ—¶<span data-type="text" style="color: var(--b3-font-color6);">å…è®¸</span>é€šè¿‡<code>$&#123;hm.db.port&#125;</code>â€‹æ¥è¦†ç›–é»˜è®¤å€¼</li><li><code>æ•°æ®åº“database</code>ï¼šå¯ä»¥é€šè¿‡<code>$&#123;hm.db.database&#125;</code>æ¥è®¾å®šï¼Œæ— é»˜è®¤å€¼</li></ul><p>ç„¶åæ˜¯ç»Ÿä¸€çš„æ—¥å¿—é…ç½®ï¼Œå‘½åä¸º<code>shared-log.yaml</code>â€‹ï¼Œé…<span data-type="text" style="color: var(--b3-font-color3);">ç½®å†…å®¹å¦‚</span>ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.hmall:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">HH:mm:ss:SSS</span></span><br><span class="line">  <span class="attr">file:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">&quot;logs/$&#123;spring.application.name&#125;&quot;</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ˜¯ç»Ÿä¸€çš„swaggeré…ç½®ï¼Œå‘½åä¸º<code>shared-swagger.yaml</code>ï¼Œé…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">openapi:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">$&#123;hm.swagger.title:é»‘é©¬å•†åŸæ¥å£æ–‡æ¡£&#125;</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">$&#123;hm.swagger.description:é»‘é©¬å•†åŸæ¥å£æ–‡æ¡£&#125;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">$&#123;hm.swagger.email:zhanghuyi@itcast.cn&#125;</span></span><br><span class="line">    <span class="attr">concat:</span> <span class="string">$&#123;hm.swagger.concat:è™å“¥&#125;</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://www.itcast.cn</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">v1.0.0</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">group-name:</span> <span class="string">default</span></span><br><span class="line">        <span class="attr">api-rule:</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">api-rule-resources:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">$&#123;hm.swagger.package&#125;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œè¿™é‡Œçš„swaggerç›¸å…³é…ç½®æˆ‘ä»¬æ²¡æœ‰å†™æ­»ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>title</code>ï¼šæ¥å£æ–‡æ¡£æ ‡é¢˜ï¼Œæˆ‘ä»¬ç”¨äº†<code>$&#123;hm.swagger.title&#125;</code>æ¥ä»£æ›¿ï¼Œå°†æ¥å¯ä»¥æœ‰ç”¨æˆ·æ‰‹åŠ¨æŒ‡å®š</li><li><code>email</code>â€‹ï¼šè”ç³»äººé‚®ç®±ï¼Œæˆ‘ä»¬ç”¨äº†<code>$&#123;hm.swagger.email:``zhanghuyi@itcast.cn``&#125;</code>â€‹ï¼Œ<span data-type="text" style="color: var(--b3-font-color10);">é»˜è®¤</span>å€¼æ˜¯<code>zhanghuyi@itcast.cn</code>â€‹ï¼ŒåŒæ—¶å…è®¸ç”¨æˆ·åˆ©ç”¨<code>$&#123;hm.swagger.email&#125;</code>â€‹æ¥è¦†ç›–ã€‚</li></ul><h3 id="3-1-2-æ‹‰å–å…±äº«é…ç½®"><a href="#3-1-2-æ‹‰å–å…±äº«é…ç½®" class="headerlink" title="3.1.2.æ‹‰å–å…±äº«é…ç½®"></a>3.1.2.æ‹‰å–å…±äº«é…ç½®</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åœ¨å¾®æœåŠ¡æ‹‰å–å…±äº«é…ç½®ã€‚å°†æ‹‰å–åˆ°çš„å…±äº«é…ç½®ä¸æœ¬åœ°çš„<code>application.yaml</code>é…ç½®åˆå¹¶ï¼Œå®Œæˆé¡¹ç›®ä¸Šä¸‹æ–‡çš„åˆå§‹åŒ–ã€‚</p><p>ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯»å–Nacosé…ç½®æ˜¯SpringCloudä¸Šä¸‹æ–‡ï¼ˆ<code>ApplicationContext</code>ï¼‰åˆå§‹åŒ–æ—¶å¤„ç†çš„ï¼Œå‘ç”Ÿåœ¨é¡¹ç›®çš„å¼•å¯¼é˜¶æ®µã€‚ç„¶åæ‰ä¼šåˆå§‹åŒ–SpringBootä¸Šä¸‹æ–‡ï¼Œå»è¯»å–<code>application.yaml</code>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´å¼•å¯¼é˜¶æ®µï¼Œ<code>application.yaml</code>æ–‡ä»¶å°šæœªè¯»å–ï¼Œæ ¹æœ¬ä¸çŸ¥é“nacos åœ°å€ï¼Œè¯¥å¦‚ä½•å»åŠ è½½nacosä¸­çš„é…ç½®æ–‡ä»¶å‘¢ï¼Ÿ</p><p>SpringCloudåœ¨åˆå§‹åŒ–ä¸Šä¸‹æ–‡çš„æ—¶å€™ä¼šå…ˆè¯»å–ä¸€ä¸ªåä¸º<code>bootstrap.yaml</code>(æˆ–è€…<code>bootstrap.properties</code>)çš„æ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬å°†nacosåœ°å€é…ç½®åˆ°<code>bootstrap.yaml</code>ä¸­ï¼Œé‚£ä¹ˆåœ¨é¡¹ç›®å¼•å¯¼é˜¶æ®µå°±å¯ä»¥è¯»å–nacosä¸­çš„é…ç½®äº†ã€‚</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468028-20240909164336-4tvvij3.jpeg" alt="img"></p><p>å› æ­¤ï¼Œå¾®æœåŠ¡æ•´åˆNacosé…ç½®ç®¡ç†çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ï¼‰å¼•å…¥ä¾èµ–ï¼š</p><p>åœ¨cart-serviceæ¨¡å—å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--nacosé…ç½®ç®¡ç†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¯»å–bootstrapæ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ï¼‰æ–°å»ºbootstrap.yaml</p><p>åœ¨cart-serviceä¸­çš„resourcesç›®å½•æ–°å»ºä¸€ä¸ªbootstrap.yamlæ–‡ä»¶ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468029-20240909164336-ieh2kbb.png" alt="img"></p><p>å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cart-service</span> <span class="comment"># æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span> <span class="comment"># nacosåœ°å€</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span> <span class="comment"># æ–‡ä»¶åç¼€å</span></span><br><span class="line">        <span class="attr">shared-configs:</span> <span class="comment"># å…±äº«é…ç½®</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">dataId:</span> <span class="string">shared-jdbc.yaml</span> <span class="comment"># å…±äº«mybatisé…ç½®</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">dataId:</span> <span class="string">shared-log.yaml</span> <span class="comment"># å…±äº«æ—¥å¿—é…ç½®</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">dataId:</span> <span class="string">shared-swagger.yaml</span> <span class="comment"># å…±äº«æ—¥å¿—é…ç½®</span></span><br></pre></td></tr></table></figure><p>3ï¼‰ä¿®æ”¹application.yaml</p><p>ç”±äºä¸€äº›é…ç½®æŒªåˆ°äº†bootstrap.yamlï¼Œå› æ­¤<span data-type="text" style="background-color: var(--b3-font-background4);">application.yaml</span>éœ€è¦ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">okhttp:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯OKHttpè¿æ¥æ± æ”¯æŒ</span></span><br><span class="line"><span class="attr">hm:</span></span><br><span class="line">  <span class="attr">swagger:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">è´­ç‰©è½¦æœåŠ¡æ¥å£æ–‡æ¡£</span></span><br><span class="line">    <span class="attr">package:</span> <span class="string">com.hmall.cart.controller</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">database:</span> <span class="string">hm-cart</span></span><br></pre></td></tr></table></figure><p>é‡å¯æœåŠ¡ï¼Œå‘ç°æ‰€æœ‰é…ç½®éƒ½ç”Ÿæ•ˆäº†ã€‚</p><h2 id="3-2-é…ç½®çƒ­æ›´æ–°"><a href="#3-2-é…ç½®çƒ­æ›´æ–°" class="headerlink" title="3.2.é…ç½®çƒ­æ›´æ–°"></a>3.2.é…ç½®çƒ­æ›´æ–°</h2><p>æœ‰å¾ˆå¤šçš„ä¸šåŠ¡ç›¸å…³å‚æ•°ï¼Œå°†æ¥å¯èƒ½ä¼šæ ¹æ®å®é™…æƒ…å†µä¸´æ—¶è°ƒæ•´ã€‚ä¾‹å¦‚è´­ç‰©è½¦ä¸šåŠ¡ï¼Œè´­ç‰©è½¦æ•°é‡æœ‰ä¸€ä¸ªä¸Šé™ï¼Œé»˜è®¤æ˜¯10ï¼Œå¯¹åº”ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468030-20240909164336-jvifbaw.png" alt="img"></p><p>ç°åœ¨è¿™é‡Œè´­ç‰©è½¦æ˜¯å†™æ­»çš„å›ºå®šå€¼ï¼Œæˆ‘ä»¬åº”è¯¥å°†å…¶é…ç½®åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åæœŸä¿®æ”¹ã€‚</p><p>ä½†ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œå³ä¾¿å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹äº†é…ç½®è¿˜æ˜¯éœ€è¦é‡æ–°æ‰“åŒ…ã€é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆã€‚èƒ½ä¸èƒ½ä¸ç”¨é‡å¯ï¼Œç›´æ¥ç”Ÿæ•ˆå‘¢ï¼Ÿ</p><p>è¿™å°±è¦ç”¨åˆ°Nacosçš„é…ç½®çƒ­æ›´æ–°èƒ½åŠ›äº†ï¼Œåˆ†ä¸ºä¸¤æ­¥ï¼š</p><ul><li>åœ¨Nacosä¸­æ·»åŠ é…ç½®</li><li>åœ¨å¾®æœåŠ¡è¯»å–é…ç½®</li></ul><h3 id="3-2-1-æ·»åŠ é…ç½®åˆ°Nacos"><a href="#3-2-1-æ·»åŠ é…ç½®åˆ°Nacos" class="headerlink" title="3.2.1.æ·»åŠ é…ç½®åˆ°Nacos"></a>3.2.1.æ·»åŠ é…ç½®åˆ°Nacos</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨nacosä¸­æ·»åŠ ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå°†è´­ç‰©è½¦çš„ä¸Šé™æ•°é‡æ·»åŠ åˆ°é…ç½®ä¸­ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468031-20240909164336-apy691r.png" alt="img"></p><p>æ³¨æ„æ–‡ä»¶çš„dataIdæ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[æœåŠ¡å]-[spring.active.profile].[åç¼€å]</span><br></pre></td></tr></table></figure><p>æ–‡ä»¶åç§°ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ul><li><strong>â€‹<code>æœåŠ¡å</code>â€‹</strong>ï¼šæˆ‘ä»¬æ˜¯è´­ç‰©è½¦æœåŠ¡ï¼Œæ‰€ä»¥æ˜¯<code>cart-service</code></li><li><strong>â€‹<code>spring.active.profile</code>â€‹</strong>ï¼šå°±æ˜¯spring bootä¸­çš„<code>spring.active.profile</code>ï¼Œå¯ä»¥çœç•¥ï¼Œåˆ™æ‰€æœ‰profileå…±äº«è¯¥é…ç½®</li><li><strong>â€‹<code>åç¼€å</code>â€‹</strong>ï¼šä¾‹å¦‚yaml</li></ul><p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨<code>cart-service.yaml</code>è¿™ä¸ªåç§°ï¼Œåˆ™ä¸ç®¡æ˜¯devè¿˜æ˜¯localç¯å¢ƒéƒ½å¯ä»¥å…±äº«è¯¥é…ç½®ã€‚</p><p>é…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hm:</span></span><br><span class="line">  <span class="attr">cart:</span></span><br><span class="line">    <span class="attr">maxAmount:</span> <span class="number">1</span> <span class="comment"># è´­ç‰©è½¦å•†å“æ•°é‡ä¸Šé™</span></span><br></pre></td></tr></table></figure><p>æäº¤é…ç½®ï¼Œåœ¨æ§åˆ¶å°èƒ½çœ‹åˆ°æ–°æ·»åŠ çš„é…ç½®ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468032-20240909164336-8veb5jp.png" alt="img"></p><h3 id="3-2-2-é…ç½®çƒ­æ›´æ–°"><a href="#3-2-2-é…ç½®çƒ­æ›´æ–°" class="headerlink" title="3.2.2.é…ç½®çƒ­æ›´æ–°"></a>3.2.2.é…ç½®çƒ­æ›´æ–°</h3><p>æ¥ç€ï¼Œæˆ‘ä»¬åœ¨å¾®æœåŠ¡ä¸­è¯»å–é…ç½®ï¼Œå®ç°é…ç½®çƒ­æ›´æ–°ã€‚</p><p>åœ¨<code>cart-service</code>ä¸­æ–°å»ºä¸€ä¸ªå±æ€§è¯»å–ç±»ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468033-20240909164336-q7s0fn4.png" alt="img"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.cart.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;hm.cart&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer maxAmount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œåœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨è¯¥å±æ€§åŠ è½½ç±»ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468034-20240909164336-4ra1paf.png" alt="img"></p><p>æµ‹è¯•ï¼Œå‘è´­ç‰©è½¦ä¸­æ·»åŠ å¤šä¸ªå•†å“ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468035-20240909164336-tou0y6s.png" alt="img"></p><p>æˆ‘ä»¬åœ¨nacosæ§åˆ¶å°ï¼Œå°†è´­ç‰©è½¦ä¸Šé™é…ç½®ä¸º5ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468036-20240909164336-8196mvb.png" alt="img"></p><p>æ— éœ€é‡å¯ï¼Œå†æ¬¡æµ‹è¯•è´­ç‰©è½¦åŠŸèƒ½ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468037-20240909164336-6nw2zwp.png" alt="img"></p><p>åŠ å…¥æˆåŠŸï¼</p><p>æ— éœ€é‡å¯æœåŠ¡ï¼Œé…ç½®çƒ­æ›´æ–°å°±ç”Ÿæ•ˆäº†ï¼</p><h2 id="3-3-åŠ¨æ€è·¯ç”±"><a href="#3-3-åŠ¨æ€è·¯ç”±" class="headerlink" title="3.3.åŠ¨æ€è·¯ç”±"></a>3.3.åŠ¨æ€è·¯ç”±</h2><p>ç½‘å…³çš„è·¯ç”±é…ç½®å…¨éƒ¨æ˜¯åœ¨é¡¹ç›®å¯åŠ¨æ—¶ç”±<code>org.springframework.cloud.gateway.route.CompositeRouteDefinitionLocator</code>åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ è½½ï¼Œå¹¶ä¸”ä¸€ç»åŠ è½½å°±ä¼šç¼“å­˜åˆ°å†…å­˜ä¸­çš„è·¯ç”±è¡¨å†…ï¼ˆä¸€ä¸ªMapï¼‰ï¼Œä¸ä¼šæ”¹å˜ã€‚ä¹Ÿä¸ä¼šç›‘å¬è·¯ç”±å˜æ›´ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æ— æ³•åˆ©ç”¨ä¸ŠèŠ‚è¯¾å­¦ä¹ çš„é…ç½®çƒ­æ›´æ–°æ¥å®ç°è·¯ç”±æ›´æ–°ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»ç›‘å¬Nacosçš„é…ç½®å˜æ›´ï¼Œç„¶åæ‰‹åŠ¨æŠŠæœ€æ–°çš„è·¯ç”±æ›´æ–°åˆ°è·¯ç”±è¡¨ä¸­ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªéš¾ç‚¹ï¼š</p><ul><li>å¦‚ä½•ç›‘å¬Nacosé…ç½®å˜æ›´ï¼Ÿ</li><li>å¦‚ä½•æŠŠè·¯ç”±ä¿¡æ¯æ›´æ–°åˆ°è·¯ç”±è¡¨ï¼Ÿ</li></ul><h3 id="3-3-1-ç›‘å¬Nacosé…ç½®å˜æ›´"><a href="#3-3-1-ç›‘å¬Nacosé…ç½®å˜æ›´" class="headerlink" title="3.3.1.ç›‘å¬Nacosé…ç½®å˜æ›´"></a>3.3.1.ç›‘å¬Nacosé…ç½®å˜æ›´</h3><p>åœ¨Nacoså®˜ç½‘ä¸­ç»™å‡ºäº†æ‰‹åŠ¨ç›‘å¬Nacosé…ç½®å˜æ›´çš„SDKï¼š</p><p><a href="https://nacos.io/zh-cn/docs/sdk.html">https://nacos.io/zh-cn/docs/sdk.html</a></p><p>å¦‚æœå¸Œæœ› Nacos æ¨é€é…ç½®å˜æ›´ï¼Œå¯ä»¥ä½¿ç”¨ Nacos åŠ¨æ€ç›‘å¬é…ç½®æ¥å£æ¥å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addListener</span><span class="params">(String dataId, String group, Listener listener)</span></span><br></pre></td></tr></table></figure><p>è¯·æ±‚å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th align="left"><strong>å‚æ•°å</strong></th><th align="left"><strong>å‚æ•°ç±»å‹</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">dataId</td><td align="left">string</td><td align="left">é…ç½® IDï¼Œä¿è¯å…¨å±€å”¯ä¸€æ€§ï¼Œåªå…è®¸è‹±æ–‡å­—ç¬¦å’Œ 4 ç§ç‰¹æ®Šå­—ç¬¦ï¼ˆâ€.â€ã€â€:â€ã€â€-â€œã€â€_â€ï¼‰ã€‚ä¸è¶…è¿‡ 256 å­—èŠ‚ã€‚</td></tr><tr><td align="left">group</td><td align="left">string</td><td align="left">é…ç½®åˆ†ç»„ï¼Œä¸€èˆ¬æ˜¯é»˜è®¤çš„DEFAULT_GROUPã€‚</td></tr><tr><td align="left">listener</td><td align="left">Listener</td><td align="left">ç›‘å¬å™¨ï¼Œé…ç½®å˜æ›´è¿›å…¥ç›‘å¬å™¨çš„å›è°ƒå‡½æ•°ã€‚</td></tr></tbody></table><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">serverAddr</span> <span class="operator">=</span> <span class="string">&quot;&#123;serverAddr&#125;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">dataId</span> <span class="operator">=</span> <span class="string">&quot;&#123;dataId&#125;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">group</span> <span class="operator">=</span> <span class="string">&quot;&#123;group&#125;&quot;</span>;</span><br><span class="line"><span class="comment">// 1.åˆ›å»ºConfigServiceï¼Œè¿æ¥Nacos</span></span><br><span class="line"><span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">properties.put(<span class="string">&quot;serverAddr&quot;</span>, serverAddr);</span><br><span class="line"><span class="type">ConfigService</span> <span class="variable">configService</span> <span class="operator">=</span> NacosFactory.createConfigService(properties);</span><br><span class="line"><span class="comment">// 2.è¯»å–é…ç½®</span></span><br><span class="line"><span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> configService.getConfig(dataId, group, <span class="number">5000</span>);</span><br><span class="line"><span class="comment">// 3.æ·»åŠ é…ç½®ç›‘å¬å™¨</span></span><br><span class="line">configService.addListener(dataId, group, <span class="keyword">new</span> <span class="title class_">Listener</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveConfigInfo</span><span class="params">(String configInfo)</span> &#123;</span><br><span class="line">        <span class="comment">// é…ç½®å˜æ›´çš„é€šçŸ¥å¤„ç†</span></span><br><span class="line">                System.out.println(<span class="string">&quot;recieve1:&quot;</span> + configInfo);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Executor <span class="title function_">getExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ ¸å¿ƒçš„æ­¥éª¤æœ‰2æ­¥ï¼š</p><ul><li>åˆ›å»ºConfigServiceï¼Œç›®çš„æ˜¯è¿æ¥åˆ°Nacos</li><li>æ·»åŠ é…ç½®ç›‘å¬å™¨ï¼Œç¼–å†™é…ç½®å˜æ›´çš„é€šçŸ¥å¤„ç†é€»è¾‘</li></ul><p>ç”±äºæˆ‘ä»¬é‡‡ç”¨äº†<code>spring-cloud-starter-alibaba-nacos-config</code>è‡ªåŠ¨è£…é…ï¼Œå› æ­¤<code>ConfigService</code>å·²ç»åœ¨<code>com.alibaba.cloud.nacos.NacosConfigAutoConfiguration</code>ä¸­è‡ªåŠ¨åˆ›å»ºå¥½äº†ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468138-20240909164336-34m62nx.png" alt="img"></p><p>NacosConfigManagerä¸­æ˜¯è´Ÿè´£ç®¡ç†Nacosçš„ConfigServiceçš„ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468139-20240909164336-t6qabtr.png" alt="img"></p><p>å› æ­¤ï¼Œåªè¦æˆ‘ä»¬æ‹¿åˆ°<code>NacosConfigManager</code>â€‹å°±ç­‰äºæ‹¿åˆ°äº†<code>ConfigService</code>â€‹ï¼Œç¬¬ä¸€æ­¥å°±å®ç°äº†ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œ<span data-type="text" style="color: var(--b3-font-color1);">ç¼–å†™ç›‘å¬å™¨</span>ã€‚è™½ç„¶å®˜æ–¹æä¾›çš„SDKæ˜¯ConfigSe<span data-type="text" style="background-color: var(--b3-font-background6);">rviceä¸­çš„addList</span>enerï¼Œä¸è¿‡é¡¹ç›®ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ä¸<span data-type="text" style="background-color: var(--b3-font-background10);">ä»…ä»…éœ€è¦æ·»åŠ ç›‘å¬å™¨ï¼Œä¹Ÿ</span>éœ€è¦è¯»å–é…<span data-type="text" style="background-color: var(--b3-font-background8);">ç½®ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨</span>çš„APIæ˜¯è¿™ä¸ªï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String <span class="title function_">getConfigAndSignListener</span><span class="params">(</span></span><br><span class="line"><span class="params">    String dataId, // é…ç½®æ–‡ä»¶id</span></span><br><span class="line"><span class="params">    String group, // é…ç½®ç»„ï¼Œèµ°é»˜è®¤</span></span><br><span class="line"><span class="params">    <span class="type">long</span> timeoutMs, // è¯»å–é…ç½®çš„è¶…æ—¶æ—¶é—´</span></span><br><span class="line"><span class="params">    Listener listener // ç›‘å¬å™¨</span></span><br><span class="line"><span class="params">)</span> <span class="keyword">throws</span> NacosException;</span><br></pre></td></tr></table></figure><p><span data-type="text" style="color: var(--b3-font-color7);">æ—¢å¯ä»¥é…ç½®ç›‘å¬å™¨</span>ï¼Œå¹¶ä¸”ä¼šæ ¹æ®dataIdå’Œgroupè¯»å–é…ç½®å¹¶è¿”å›ã€‚<span data-type="text" style="color: var(--b3-font-color8);">æˆ‘ä»¬å°±å¯ä»¥åœ¨é¡¹ç›®å¯åŠ¨æ—¶å…ˆæ›´æ–°ä¸€æ¬¡è·¯ç”±</span>ï¼Œ<span data-type="text" style="color: var(--b3-font-color2);">åç»­éšç€é…ç½®å˜æ›´é€šçŸ¥åˆ°ç›‘å¬å™¨</span>ï¼Œå®Œæˆè·¯ç”±æ›´æ–°ã€‚</p><h3 id="3-3-2-æ›´æ–°è·¯ç”±"><a href="#3-3-2-æ›´æ–°è·¯ç”±" class="headerlink" title="3.3.2.æ›´æ–°è·¯ç”±"></a>3.3.2.æ›´æ–°è·¯ç”±</h3><p>æ›´æ–°è·¯ç”±è¦ç”¨åˆ°<code>org.springframework.cloud.gateway.route.RouteDefinitionWriter</code>è¿™ä¸ªæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.cloud.gateway.route;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Spencer Gibb</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RouteDefinitionWriter</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°è·¯ç”±åˆ°è·¯ç”±è¡¨ï¼Œå¦‚æœè·¯ç”±idé‡å¤ï¼Œåˆ™ä¼šè¦†ç›–æ—§çš„è·¯ç”±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">        Mono&lt;Void&gt; <span class="title function_">save</span><span class="params">(Mono&lt;RouteDefinition&gt; route)</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®è·¯ç”±idåˆ é™¤æŸä¸ªè·¯ç”±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">        Mono&lt;Void&gt; <span class="title function_">delete</span><span class="params">(Mono&lt;String&gt; routeId)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ›´æ–°çš„è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯RouteDefinitionï¼Œä¹‹å‰æˆ‘ä»¬è§è¿‡ï¼ŒåŒ…å«ä¸‹åˆ—å¸¸è§å­—æ®µï¼š</p><ul><li>idï¼šè·¯ç”±id</li><li>predicatesï¼šè·¯ç”±åŒ¹é…è§„åˆ™</li><li>filtersï¼šè·¯ç”±è¿‡æ»¤å™¨</li><li>uriï¼šè·¯ç”±ç›®çš„åœ°</li></ul><p>å°†æ¥æˆ‘ä»¬ä¿å­˜åˆ°Nacosçš„é…ç½®ä¹Ÿè¦ç¬¦åˆè¿™ä¸ªå¯¹è±¡ç»“æ„ï¼Œå°†æ¥æˆ‘ä»¬ä»¥JSONæ¥ä¿å­˜ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;item&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;predicates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Path&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;_genkey_0&quot;</span><span class="punctuation">:</span><span class="string">&quot;/items/**&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;_genkey_1&quot;</span><span class="punctuation">:</span><span class="string">&quot;/search/**&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;filters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lb://item-service&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸ŠJSONé…ç½®å°±ç­‰åŒäºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">item</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://item-service</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/items/**,/search/**</span></span><br></pre></td></tr></table></figure><p>OKï¼Œæˆ‘ä»¬æ‰€éœ€è¦ç”¨åˆ°çš„SDKå·²ç»é½å…¨äº†ã€‚</p><h3 id="3-3-3-å®ç°åŠ¨æ€è·¯ç”±"><a href="#3-3-3-å®ç°åŠ¨æ€è·¯ç”±" class="headerlink" title="3.3.3.å®ç°åŠ¨æ€è·¯ç”±"></a>3.3.3.å®ç°åŠ¨æ€è·¯ç”±</h3><p>é¦–å…ˆï¼Œ æˆ‘ä»¬åœ¨ç½‘å…³gatewayå¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç»Ÿä¸€é…ç½®ç®¡ç†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--åŠ è½½bootstrap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ç½‘å…³<code>gateway</code>çš„<code>resources</code>ç›®å½•åˆ›å»º<code>bootstrap.yaml</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gateway</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span></span><br><span class="line">        <span class="attr">shared-configs:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">dataId:</span> <span class="string">shared-log.yaml</span> <span class="comment"># å…±äº«æ—¥å¿—é…ç½®</span></span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œä¿®æ”¹<code>gateway</code>çš„<code>resources</code>ç›®å½•ä¸‹çš„<code>application.yml</code>ï¼ŒæŠŠä¹‹å‰çš„è·¯ç”±ç§»é™¤ï¼Œæœ€ç»ˆå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span> <span class="comment"># ç«¯å£</span></span><br><span class="line"><span class="attr">hm:</span></span><br><span class="line">  <span class="attr">jwt:</span></span><br><span class="line">    <span class="attr">location:</span> <span class="string">classpath:hmall.jks</span> <span class="comment"># ç§˜é’¥åœ°å€</span></span><br><span class="line">    <span class="attr">alias:</span> <span class="string">hmall</span> <span class="comment"># ç§˜é’¥åˆ«å</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">hmall123</span> <span class="comment"># ç§˜é’¥æ–‡ä»¶å¯†ç </span></span><br><span class="line">    <span class="attr">tokenTTL:</span> <span class="string">30m</span> <span class="comment"># ç™»å½•æœ‰æ•ˆæœŸ</span></span><br><span class="line">  <span class="attr">auth:</span></span><br><span class="line">    <span class="attr">excludePaths:</span> <span class="comment"># æ— éœ€ç™»å½•æ ¡éªŒçš„è·¯å¾„</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/search/**</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/users/login</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/items/**</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨<code>gateway</code>ä¸­å®šä¹‰é…ç½®ç›‘å¬å™¨ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468140-20240909164336-0t9kj2t.png" alt="img"></p><p>å…¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.gateway.route;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.json.JSONUtil;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.nacos.NacosConfigManager;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.nacos.api.config.listener.Listener;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.nacos.api.exception.NacosException;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.utils.CollUtils;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.route.RouteDefinition;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.route.RouteDefinitionWriter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicRouteLoader</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RouteDefinitionWriter writer;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> NacosConfigManager nacosConfigManager;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·¯ç”±é…ç½®æ–‡ä»¶çš„idå’Œåˆ†ç»„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">dataId</span> <span class="operator">=</span> <span class="string">&quot;gateway-routes.json&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">group</span> <span class="operator">=</span> <span class="string">&quot;DEFAULT_GROUP&quot;</span>;</span><br><span class="line">    <span class="comment">// ä¿å­˜æ›´æ–°è¿‡çš„è·¯ç”±id</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Set&lt;String&gt; routeIds = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initRouteConfigListener</span><span class="params">()</span> <span class="keyword">throws</span> NacosException &#123;</span><br><span class="line">        <span class="comment">// 1.æ³¨å†Œç›‘å¬å™¨å¹¶é¦–æ¬¡æ‹‰å–é…ç½®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">configInfo</span> <span class="operator">=</span> nacosConfigManager.getConfigService()</span><br><span class="line">                .getConfigAndSignListener(dataId, group, <span class="number">5000</span>, <span class="keyword">new</span> <span class="title class_">Listener</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> Executor <span class="title function_">getExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveConfigInfo</span><span class="params">(String configInfo)</span> &#123;</span><br><span class="line">                        updateConfigInfo(configInfo);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="comment">// 2.é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œæ›´æ–°ä¸€æ¬¡é…ç½®</span></span><br><span class="line">        updateConfigInfo(configInfo);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateConfigInfo</span><span class="params">(String configInfo)</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;ç›‘å¬åˆ°è·¯ç”±é…ç½®å˜æ›´ï¼Œ&#123;&#125;&quot;</span>, configInfo);</span><br><span class="line">        <span class="comment">// 1.ååºåˆ—åŒ–</span></span><br><span class="line">        List&lt;RouteDefinition&gt; routeDefinitions = JSONUtil.toList(configInfo, RouteDefinition.class);</span><br><span class="line">        <span class="comment">// 2.æ›´æ–°å‰å…ˆæ¸…ç©ºæ—§è·¯ç”±</span></span><br><span class="line">        <span class="comment">// 2.1.æ¸…é™¤æ—§è·¯ç”±</span></span><br><span class="line">        <span class="keyword">for</span> (String routeId : routeIds) &#123;</span><br><span class="line">            writer.delete(Mono.just(routeId)).subscribe();</span><br><span class="line">        &#125;</span><br><span class="line">        routeIds.clear();</span><br><span class="line">        <span class="comment">// 2.2.åˆ¤æ–­æ˜¯å¦æœ‰æ–°çš„è·¯ç”±è¦æ›´æ–°</span></span><br><span class="line">        <span class="keyword">if</span> (CollUtils.isEmpty(routeDefinitions)) &#123;</span><br><span class="line">            <span class="comment">// æ— æ–°è·¯ç”±é…ç½®ï¼Œç›´æ¥ç»“æŸ</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.æ›´æ–°è·¯ç”±</span></span><br><span class="line">        routeDefinitions.forEach(routeDefinition -&gt; &#123;</span><br><span class="line">            <span class="comment">// 3.1.æ›´æ–°è·¯ç”±</span></span><br><span class="line">            writer.save(Mono.just(routeDefinition)).subscribe();</span><br><span class="line">            <span class="comment">// 3.2.è®°å½•è·¯ç”±idï¼Œæ–¹ä¾¿å°†æ¥åˆ é™¤</span></span><br><span class="line">            routeIds.add(routeDefinition.getId());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¯ç½‘å…³ï¼Œä»»æ„è®¿é—®ä¸€ä¸ªæ¥å£ï¼Œæ¯”å¦‚ <a href="http://localhost:8080/search/list?pageNo=1&pageSize=1%EF%BC%9A">http://localhost:8080/search/list?pageNo=1&amp;pageSize=1ï¼š</a></p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468141-20240909164336-mdfzh8x.png" alt="img"></p><p>å‘ç°æ˜¯404ï¼Œæ— æ³•è®¿é—®ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨Nacosæ§åˆ¶å°æ·»åŠ è·¯ç”±ï¼Œè·¯ç”±æ–‡ä»¶åä¸º<code>gateway-routes.json</code>ï¼Œç±»å‹ä¸º<code>json</code>ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468142-20240909164336-5vl1pih.png" alt="img"></p><p>é…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;item&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;predicates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Path&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;_genkey_0&quot;</span><span class="punctuation">:</span><span class="string">&quot;/items/**&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;_genkey_1&quot;</span><span class="punctuation">:</span><span class="string">&quot;/search/**&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;filters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lb://item-service&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cart&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;predicates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Path&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;_genkey_0&quot;</span><span class="punctuation">:</span><span class="string">&quot;/carts/**&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;filters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lb://cart-service&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;predicates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Path&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;_genkey_0&quot;</span><span class="punctuation">:</span><span class="string">&quot;/users/**&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;_genkey_1&quot;</span><span class="punctuation">:</span><span class="string">&quot;/addresses/**&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;filters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lb://user-service&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;trade&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;predicates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Path&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;_genkey_0&quot;</span><span class="punctuation">:</span><span class="string">&quot;/orders/**&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;filters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lb://trade-service&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pay&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;predicates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Path&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;_genkey_0&quot;</span><span class="punctuation">:</span><span class="string">&quot;/pay-orders/**&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;filters&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lb://pay-service&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>æ— éœ€é‡å¯ç½‘å…³ï¼Œç¨ç­‰å‡ ç§’é’Ÿåï¼Œå†æ¬¡è®¿é—®åˆšæ‰çš„åœ°å€ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/-172587137468143-20240909164336-c7c5567.png" alt="img"></p><p>ç½‘å…³è·¯ç”±æˆåŠŸäº†ï¼</p><h1 id="4-ä½œä¸š"><a href="#4-ä½œä¸š" class="headerlink" title="4.ä½œä¸š"></a>4.ä½œä¸š</h1><p>å°†é¡¹ç›®ä¸€æ‹†åˆ†ä¸ºä¸€ä¸ªå¾®æœåŠ¡é¡¹ç›®ï¼Œå¹¶å®Œæˆä¸‹åˆ—éœ€æ±‚ï¼š</p><ul><li>åŸºäºOpenFeignå®ç°æœåŠ¡é—´è¿œç¨‹è°ƒç”¨</li><li>å®šä¹‰ç½‘å…³ï¼Œå®ç°å¯¹å¾®æœåŠ¡çš„è¯·æ±‚è·¯ç”±</li><li>åŸºäºç½‘å…³å®ç°ç™»å½•ç”¨æˆ·æ ¡éªŒå’Œç”¨æˆ·ä¿¡æ¯ä¼ é€’</li></ul><p>ä»¥è‹ç©¹å¤–å–ä¸ºä¾‹ï¼Œé¡¹ç›®å¯ä»¥æ‹†åˆ†ä¸ºï¼š</p><ul><li>ä¸šåŠ¡æœåŠ¡ï¼š<ul><li>ç”¨æˆ·æœåŠ¡ï¼šç”¨æˆ·ã€åœ°å€ã€ç™»å½•ç­‰ç›¸å…³ä¸šåŠ¡</li><li>äº§å“æœåŠ¡ï¼šåº—é“ºã€åˆ†ç±»ã€èœå“ã€å¥—é¤ç­‰ä¸šåŠ¡</li><li>äº¤æ˜“æœåŠ¡ï¼šè®¢å•ã€è´­ç‰©è½¦ä¸šåŠ¡</li><li>æ•°æ®æœåŠ¡ï¼šå·¥ä½œå°ã€æŠ¥è¡¨ç»Ÿè®¡ç­‰ä¸šåŠ¡</li></ul></li><li>åŸºç¡€æœåŠ¡ï¼š<ul><li>æ”¯ä»˜æœåŠ¡ï¼šæ”¯ä»˜ç›¸å…³ä¸šåŠ¡</li><li>æ–‡ä»¶æœåŠ¡ï¼šæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Giteeå›¾åºŠæ­å»º</title>
      <link href="/posts/7811.html"/>
      <url>/posts/7811.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h2 id="Gitee-è®¾ç½®ç›¸å…³"><a href="#Gitee-è®¾ç½®ç›¸å…³" class="headerlink" title="Gitee è®¾ç½®ç›¸å…³"></a>Gitee è®¾ç½®ç›¸å…³</h2><ol><li>æ³¨å†ŒGiteeè´¦å·</li><li>åˆ›å»ºä»“åº“ ï¼Œåå­—ä»»æ„ , è®¾ä¸ºå…¬å¼€</li><li>è¿›å…¥è´¦å·è®¾ç½® ï¼Œåˆ›å»ºç§äººä»¤ç‰Œ ï¼Œè®°å¾—å°†ç”Ÿæˆçš„Tokenå¤åˆ¶ä¸‹æ¥</li></ol><h2 id="PicGo-è®¾ç½®ç›¸å…³"><a href="#PicGo-è®¾ç½®ç›¸å…³" class="headerlink" title="PicGo è®¾ç½®ç›¸å…³"></a>PicGo è®¾ç½®ç›¸å…³</h2><ol><li>å®‰è£…æ’ä»¶ <a href="https://github.com/lizhuangs/picgo-plugin-gitee-uploader">picgo-plugin-gitee-uploader</a></li><li>é…ç½®å›¾åºŠ ï¼Œä»“åº“åé€‰æ‹©ä½ çš„<code>Giteeåç§°/ä»“åº“åç§°</code>â€‹</li><li>åˆ†æ”¯é»˜è®¤ ï¼šmaster</li><li>tokené€‰æ‹©ä»Giteeä¸Šå¤åˆ¶ä¸‹æ¥çš„Token</li><li>path : æ–‡ä»¶å¤¹åç§° ï¼Œåå­—ä»»æ„</li><li>customPath : è¿™é‡Œæˆ‘é€‰æ‹©çš„å¹´æœˆ</li><li>æ²¡æœ‰è¯´åˆ°çš„å°±æ˜¯ä¸å¡«</li></ol><h2 id="é˜²ç›—é“¾è§£å†³"><a href="#é˜²ç›—é“¾è§£å†³" class="headerlink" title="é˜²ç›—é“¾è§£å†³"></a>é˜²ç›—é“¾è§£å†³</h2><p>ä¸Šè¿°è®¾ç½®å¥½ä¹‹å ï¼Œå›¾ç‰‡å¯ä»¥ä¸Šä¼ ä¹Ÿå¯ä»¥è®¿é—® ï¼Œä½†æ˜¯å´ä¸èƒ½åœ¨åšå®¢ä¸­å±•ç¤º ï¼Œå›¾ç‰‡è§£å†³æ–¹æ¡ˆ</p><p>åœ¨æ–‡ç« ç¬¬ä¸€è¡Œæ·»åŠ ä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;referrer&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-referrer&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å›¾ç‰‡æµ‹è¯•ï¼š</p><p><img src="https://gitee.com/NorthCJ/north-img/raw/master/images/x-9.jpg">â€‹</p>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åºŠæ­å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®æœåŠ¡æ‹†åˆ†ä½œä¸š</title>
      <link href="/posts/1457.html"/>
      <url>/posts/1457.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>äººç”Ÿä¸å¦‚æ„ä¹‹äº‹ä¸ƒå…«ä¹ï¼Œèƒ½ä¸äººè¨€ä¸€äºŒä¸‰éƒ½æ— ï¼Œæ‰ç®—åå·</p></div><a href="https://www.bilibili.com/video/BV1S142197x7/">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://i0.hdslb.com/bfs/article/cf9264b4309c06a7e4ecb4074e0a24c2645325325.png"></a><h1 id="1-ç”¨æˆ·æœåŠ¡"><a href="#1-ç”¨æˆ·æœåŠ¡" class="headerlink" title="1.ç”¨æˆ·æœåŠ¡"></a>1.ç”¨æˆ·æœåŠ¡</h1><h2 id="1-1-åˆ›å»ºé¡¹ç›®"><a href="#1-1-åˆ›å»ºé¡¹ç›®" class="headerlink" title="1.1.åˆ›å»ºé¡¹ç›®"></a>1.1.åˆ›å»ºé¡¹ç›®</h2><p>åœ¨hmallä¸‹æ–°å»ºä¸€ä¸ªmoduleï¼Œå‘½åä¸ºuser-serviceï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/3ed53b244443b83b2e6b06ebdb9e2b18645325325.png">â€‹</p><h2 id="1-2-ä¾èµ–"><a href="#1-2-ä¾èµ–" class="headerlink" title="1.2.ä¾èµ–"></a>1.2.ä¾èµ–</h2><p>user-serviceçš„pom.xmlæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hmall<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>user-service<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--common--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--api--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--web--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ•°æ®åº“--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--nacos æœåŠ¡æ³¨å†Œå‘ç°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-3-å¯åŠ¨ç±»"><a href="#1-3-å¯åŠ¨ç±»" class="headerlink" title="1.3.å¯åŠ¨ç±»"></a>1.3.å¯åŠ¨ç±»</h2><p>åœ¨user-serviceä¸­çš„<code>com.hmall.user</code>â€‹åŒ…ä¸‹åˆ›å»ºå¯åŠ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.user;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.hmall.user.mapper&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(UserApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1-4-é…ç½®æ–‡ä»¶"><a href="#1-4-é…ç½®æ–‡ä»¶" class="headerlink" title="1.4.é…ç½®æ–‡ä»¶"></a>1.4.é…ç½®æ–‡ä»¶</h2><p>ä»<code>hm-service</code>â€‹é¡¹ç›®ä¸­å¤åˆ¶3ä¸ªyamlé…ç½®æ–‡ä»¶åˆ°<code>user-service</code>â€‹çš„<code>resource</code>â€‹ç›®å½•ã€‚</p><p>å…¶ä¸­<code>application-dev.yaml</code>â€‹å’Œ<code>application-local.yaml</code>â€‹ä¿æŒä¸å˜ã€‚<code>application.yaml</code>â€‹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8084</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">user-service</span> <span class="comment"># æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://$&#123;hm.db.host&#125;:3306/hm-user?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;hm.db.pw&#125;</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span> <span class="comment"># nacosåœ°å€</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">update-strategy:</span> <span class="string">not_null</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.hmall:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">HH:mm:ss:SSS</span></span><br><span class="line">  <span class="attr">file:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">&quot;logs/$&#123;spring.application.name&#125;&quot;</span></span><br><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">openapi:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">ç”¨æˆ·æœåŠ¡æ¥å£æ–‡æ¡£</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;ä¿¡æ¯&quot;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">zhanghuyi@itcast.cn</span></span><br><span class="line">    <span class="attr">concat:</span> <span class="string">è™å“¥</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://www.itcast.cn</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">v1.0.0</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">group-name:</span> <span class="string">default</span></span><br><span class="line">        <span class="attr">api-rule:</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">api-rule-resources:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">com.hmall.user.controller</span></span><br><span class="line"><span class="attr">hm:</span></span><br><span class="line">  <span class="attr">jwt:</span></span><br><span class="line">    <span class="attr">location:</span> <span class="string">classpath:hmall.jks</span></span><br><span class="line">    <span class="attr">alias:</span> <span class="string">hmall</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">hmall123</span></span><br><span class="line">    <span class="attr">tokenTTL:</span> <span class="string">30m</span></span><br></pre></td></tr></table></figure><p>å°†hm-serviceä¸‹çš„hmall.jksæ–‡ä»¶æ‹·è´åˆ°user-serviceä¸‹çš„resourcesç›®å½•ï¼Œè¿™æ˜¯JWTåŠ å¯†çš„ç§˜é’¥æ–‡ä»¶ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/9cda156067d5a7881034859b1712e100645325325.png">â€‹</p><h2 id="1-5-ä»£ç "><a href="#1-5-ä»£ç " class="headerlink" title="1.5.ä»£ç "></a>1.5.ä»£ç </h2><p>å¤åˆ¶hm-serviceä¸­æ‰€æœ‰ä¸userã€addressã€jwtæœ‰å…³çš„ä»£ç ï¼Œæœ€ç»ˆé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/21ac22bbf077e1b89bec17a62c6e2559645325325.png">â€‹</p><h2 id="1-6-æ•°æ®åº“"><a href="#1-6-æ•°æ®åº“" class="headerlink" title="1.6.æ•°æ®åº“"></a>1.6.æ•°æ®åº“</h2><p>user-serviceä¹Ÿéœ€è¦è‡ªå·±çš„ç‹¬ç«‹çš„databaseï¼Œå‘MySQLä¸­å¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„SQLï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/7b1e0c574f6a3a06a4587d22ecc3003f645325325.png">â€‹</p><p>å¯¼å…¥ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e410dd97e4f84a54fe0b6d21735931ad645325325.png">â€‹</p><h2 id="1-7-é…ç½®å¯åŠ¨é¡¹"><a href="#1-7-é…ç½®å¯åŠ¨é¡¹" class="headerlink" title="1.7.é…ç½®å¯åŠ¨é¡¹"></a>1.7.é…ç½®å¯åŠ¨é¡¹</h2><p>ç»™user-serviceé…ç½®å¯åŠ¨é¡¹ï¼Œè®¾ç½®profileä¸ºlocalï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/955584a75ed1a11bfb1e87f110d08883645325325.png">â€‹</p><h2 id="1-8-æµ‹è¯•"><a href="#1-8-æµ‹è¯•" class="headerlink" title="1.8.æµ‹è¯•"></a>1.8.æµ‹è¯•</h2><p>å¯åŠ¨UserApplicationï¼Œè®¿é—®<a href="http://localhost:8084/doc.html#/default/%E7%94%A8%E6%88%B7%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3/loginUsingPOST">http://localhost:8084/doc.html#/default/ç”¨æˆ·ç›¸å…³æ¥å£/loginUsingPOST</a>ï¼Œæµ‹è¯•ç™»å½•æ¥å£ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/965e26b3fe48f5d4f1727e9457278c52645325325.png">â€‹</p><p>ç”¨æˆ·æœåŠ¡æµ‹è¯•é€šè¿‡ã€‚</p><h1 id="2-äº¤æ˜“æœåŠ¡"><a href="#2-äº¤æ˜“æœåŠ¡" class="headerlink" title="2.äº¤æ˜“æœåŠ¡"></a>2.äº¤æ˜“æœåŠ¡</h1><h2 id="2-1-åˆ›å»ºé¡¹ç›®"><a href="#2-1-åˆ›å»ºé¡¹ç›®" class="headerlink" title="2.1.åˆ›å»ºé¡¹ç›®"></a>2.1.åˆ›å»ºé¡¹ç›®</h2><p>åœ¨hmallä¸‹æ–°å»ºä¸€ä¸ªmoduleï¼Œå‘½åä¸ºtrade-serviceï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/0ffd9f4327b5486a60a5cbaf6f3147e5645325325.png">â€‹</p><h2 id="2-2-ä¾èµ–"><a href="#2-2-ä¾èµ–" class="headerlink" title="2.2.ä¾èµ–"></a>2.2.ä¾èµ–</h2><p>trade-serviceçš„pom.xmlæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hmall<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>trade-service<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--common--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--api--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--web--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ•°æ®åº“--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--nacos æœåŠ¡æ³¨å†Œå‘ç°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-3-å¯åŠ¨ç±»"><a href="#2-3-å¯åŠ¨ç±»" class="headerlink" title="2.3.å¯åŠ¨ç±»"></a>2.3.å¯åŠ¨ç±»</h2><p>åœ¨trade-serviceä¸­çš„<code>com.hmall.trade</code>â€‹åŒ…ä¸‹åˆ›å»ºå¯åŠ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.trade;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableFeignClients(basePackages = &quot;com.hmall.api.client&quot;, defaultConfiguration = DefaultFeignConfig.class)</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.hmall.trade.mapper&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TradeApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(TradeApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-4-é…ç½®æ–‡ä»¶"><a href="#2-4-é…ç½®æ–‡ä»¶" class="headerlink" title="2.4.é…ç½®æ–‡ä»¶"></a>2.4.é…ç½®æ–‡ä»¶</h2><p>ä»<code>hm-service</code>â€‹é¡¹ç›®ä¸­å¤åˆ¶3ä¸ªyamlé…ç½®æ–‡ä»¶åˆ°<code>trade-service</code>â€‹çš„<code>resource</code>â€‹ç›®å½•ã€‚</p><p>å…¶ä¸­<code>application-dev.yaml</code>â€‹å’Œ<code>application-local.yaml</code>â€‹ä¿æŒä¸å˜ã€‚<code>application.yaml</code>â€‹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8085</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">trade-service</span> <span class="comment"># æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://$&#123;hm.db.host&#125;:3306/hm-trade?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;hm.db.pw&#125;</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span> <span class="comment"># nacosåœ°å€</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">update-strategy:</span> <span class="string">not_null</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.hmall:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">HH:mm:ss:SSS</span></span><br><span class="line">  <span class="attr">file:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">&quot;logs/$&#123;spring.application.name&#125;&quot;</span></span><br><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">openapi:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">äº¤æ˜“æœåŠ¡æ¥å£æ–‡æ¡£</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;ä¿¡æ¯&quot;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">zhanghuyi@itcast.cn</span></span><br><span class="line">    <span class="attr">concat:</span> <span class="string">è™å“¥</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://www.itcast.cn</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">v1.0.0</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">group-name:</span> <span class="string">default</span></span><br><span class="line">        <span class="attr">api-rule:</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">api-rule-resources:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">com.hmall.trade.controller</span></span><br></pre></td></tr></table></figure><h2 id="2-5-ä»£ç "><a href="#2-5-ä»£ç " class="headerlink" title="2.5.ä»£ç "></a>2.5.ä»£ç </h2><h3 id="2-5-1-åŸºç¡€ä»£ç "><a href="#2-5-1-åŸºç¡€ä»£ç " class="headerlink" title="2.5.1.åŸºç¡€ä»£ç "></a>2.5.1.åŸºç¡€ä»£ç </h3><p>å¤åˆ¶hm-serviceä¸­æ‰€æœ‰ä¸tradeæœ‰å…³çš„ä»£ç ï¼Œæœ€ç»ˆé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/45b8ec9ed0da47e05423c07d5ef6a557645325325.png">â€‹</p><p>åœ¨äº¤æ˜“æœåŠ¡ä¸­ï¼Œç”¨æˆ·ä¸‹å•æ—¶éœ€è¦åšä¸‹åˆ—äº‹æƒ…ï¼š</p><ul><li><strong>æ ¹æ®idæŸ¥è¯¢å•†å“åˆ—è¡¨</strong></li><li>è®¡ç®—å•†å“æ€»ä»·</li><li>ä¿å­˜è®¢å•</li><li><strong>æ‰£å‡åº“å­˜</strong></li><li><strong>æ¸…ç†è´­ç‰©è½¦å•†å“</strong></li></ul><p>å…¶ä¸­ï¼ŒæŸ¥è¯¢å•†å“ã€æ‰£å‡åº“å­˜éƒ½æ˜¯ä¸å•†å“æœ‰å…³çš„ä¸šåŠ¡ï¼Œåœ¨item-serviceä¸­æœ‰ç›¸å…³åŠŸèƒ½ï¼›æ¸…ç†è´­ç‰©è½¦å•†å“æ˜¯è´­ç‰©è½¦ä¸šåŠ¡ï¼Œåœ¨cart-serviceä¸­æœ‰ç›¸å…³åŠŸèƒ½ã€‚</p><p>å› æ­¤äº¤æ˜“æœåŠ¡è¦è°ƒç”¨ä»–ä»¬ï¼Œå¿…é¡»é€šè¿‡OpenFeignè¿œç¨‹è°ƒç”¨ã€‚æˆ‘ä»¬éœ€è¦å°†ä¸Šè¿°åŠŸèƒ½æŠ½å–ä¸ºFeignClient.</p><h3 id="2-5-2-æŠ½å–ItemClientæ¥å£"><a href="#2-5-2-æŠ½å–ItemClientæ¥å£" class="headerlink" title="2.5.2.æŠ½å–ItemClientæ¥å£"></a>2.5.2.æŠ½å–ItemClientæ¥å£</h3><p>é¦–å…ˆæ˜¯<strong>æ‰£å‡åº“å­˜</strong>ï¼Œåœ¨<code>item-service</code>â€‹ä¸­çš„å¯¹åº”ä¸šåŠ¡æ¥å£å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/33c3ba33d894ed98c2f02af206532e7d645325325.png">â€‹</p><p>æˆ‘ä»¬å°†è¿™ä¸ªæ¥å£æŠ½å–åˆ°<code>hm-api</code>â€‹æ¨¡å—çš„<code>com.hmall.api.client.ItemClient</code>â€‹ä¸­:</p><p><img src="https://i0.hdslb.com/bfs/article/6c307a602cda0b9277aadf26a4c32ec4645325325.png">â€‹</p><p>å°†æ¥å£å‚æ•°çš„<code>OrderDetailDTO</code>â€‹æŠ½å–åˆ°<code>hm-api</code>â€‹æ¨¡å—çš„<code>com.hmall.api.dto</code>â€‹åŒ…ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/d2211109fc95608aeb6f17f8e73494d2645325325.png">â€‹</p><h3 id="2-5-3-æŠ½å–CartClientæ¥å£"><a href="#2-5-3-æŠ½å–CartClientæ¥å£" class="headerlink" title="2.5.3.æŠ½å–CartClientæ¥å£"></a>2.5.3.æŠ½å–CartClientæ¥å£</h3><p>æ¥ä¸‹æ¥æ˜¯<strong>æ¸…ç†è´­ç‰©è½¦å•†å“</strong>ï¼Œåœ¨<code>cart-service</code>â€‹ä¸­çš„å¯¹åº”ä¸šåŠ¡æ¥å£å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/34c75e466dfce9d305b5cb5f580e98fb645325325.png">â€‹</p><p>æˆ‘ä»¬åœ¨<code>hm-api</code>â€‹æ¨¡å—çš„<code>com.hmall.api.client</code>â€‹åŒ…ä¸‹å®šä¹‰ä¸€ä¸ª<code>CartClient</code>â€‹æ¥å£ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/94fd0a43596222588d8ca35837106176645325325.png">â€‹</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.api.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.DeleteMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FeignClient(&quot;cart-service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CartClient</span> &#123;</span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/carts&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteCartItemByIds</span><span class="params">(<span class="meta">@RequestParam(&quot;ids&quot;)</span> Collection&lt;Long&gt; ids)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-5-4-æ”¹é€ OrderServiceImpl"><a href="#2-5-4-æ”¹é€ OrderServiceImpl" class="headerlink" title="2.5.4.æ”¹é€ OrderServiceImpl"></a>2.5.4.æ”¹é€ OrderServiceImpl</h3><p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥æ”¹é€ OrderServiceImplä¸­çš„é€»è¾‘ï¼Œå°†æœ¬åœ°æ–¹æ³•è°ƒç”¨æ”¹é€ ä¸ºåŸºäºFeignClientçš„è°ƒç”¨ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.trade.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.hmall.api.client.CartClient;</span><br><span class="line"><span class="keyword">import</span> com.hmall.api.client.ItemClient;</span><br><span class="line"><span class="keyword">import</span> com.hmall.api.dto.ItemDTO;</span><br><span class="line"><span class="keyword">import</span> com.hmall.api.dto.OrderDetailDTO;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.exception.BadRequestException;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.utils.UserContext;</span><br><span class="line"><span class="keyword">import</span> com.hmall.trade.domain.dto.OrderFormDTO;</span><br><span class="line"><span class="keyword">import</span> com.hmall.trade.domain.po.Order;</span><br><span class="line"><span class="keyword">import</span> com.hmall.trade.domain.po.OrderDetail;</span><br><span class="line"><span class="keyword">import</span> com.hmall.trade.mapper.OrderMapper;</span><br><span class="line"><span class="keyword">import</span> com.hmall.trade.service.IOrderDetailService;</span><br><span class="line"><span class="keyword">import</span> com.hmall.trade.service.IOrderService;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * æœåŠ¡å®ç°ç±»</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;OrderMapper, Order&gt; <span class="keyword">implements</span> <span class="title class_">IOrderService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ItemClient itemClient;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IOrderDetailService detailService;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CartClient cartClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">createOrder</span><span class="params">(OrderFormDTO orderFormDTO)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.è®¢å•æ•°æ®</span></span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Order</span>();</span><br><span class="line">        <span class="comment">// 1.1.æŸ¥è¯¢å•†å“</span></span><br><span class="line">        List&lt;OrderDetailDTO&gt; detailDTOS = orderFormDTO.getDetails();</span><br><span class="line">        <span class="comment">// 1.2.è·å–å•†å“idå’Œæ•°é‡çš„Map</span></span><br><span class="line">        Map&lt;Long, Integer&gt; itemNumMap = detailDTOS.stream()</span><br><span class="line">                .collect(Collectors.toMap(OrderDetailDTO::getItemId, OrderDetailDTO::getNum));</span><br><span class="line">        Set&lt;Long&gt; itemIds = itemNumMap.keySet();</span><br><span class="line">        <span class="comment">// 1.3.æŸ¥è¯¢å•†å“</span></span><br><span class="line">        List&lt;ItemDTO&gt; items = itemClient.queryItemByIds(itemIds);</span><br><span class="line">        <span class="keyword">if</span> (items == <span class="literal">null</span> || items.size() &lt; itemIds.size()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BadRequestException</span>(<span class="string">&quot;å•†å“ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 1.4.åŸºäºå•†å“ä»·æ ¼ã€è´­ä¹°æ•°é‡è®¡ç®—å•†å“æ€»ä»·ï¼štotalFee</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (ItemDTO item : items) &#123;</span><br><span class="line">            total += item.getPrice()  itemNumMap.get(item.getId());</span><br><span class="line">        &#125;</span><br><span class="line">        order.setTotalFee(total);</span><br><span class="line">        <span class="comment">// 1.5.å…¶å®ƒå±æ€§</span></span><br><span class="line">        order.setPaymentType(orderFormDTO.getPaymentType());</span><br><span class="line">        order.setUserId(UserContext.getUser());</span><br><span class="line">        order.setStatus(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 1.6.å°†Orderå†™å…¥æ•°æ®åº“orderè¡¨ä¸­</span></span><br><span class="line">        save(order);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.ä¿å­˜è®¢å•è¯¦æƒ…</span></span><br><span class="line">        List&lt;OrderDetail&gt; details = buildDetails(order.getId(), items, itemNumMap);</span><br><span class="line">        detailService.saveBatch(details);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.æ‰£å‡åº“å­˜</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            itemClient.deductStock(detailDTOS);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;åº“å­˜ä¸è¶³ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.æ¸…ç†è´­ç‰©è½¦å•†å“</span></span><br><span class="line">        cartClient.deleteCartItemByIds(itemIds);</span><br><span class="line">        <span class="keyword">return</span> order.getId();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderDetail&gt; <span class="title function_">buildDetails</span><span class="params">(Long orderId, List&lt;ItemDTO&gt; items, Map&lt;Long, Integer&gt; numMap)</span> &#123;</span><br><span class="line">        List&lt;OrderDetail&gt; details = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(items.size());</span><br><span class="line">        <span class="keyword">for</span> (ItemDTO item : items) &#123;</span><br><span class="line">            <span class="type">OrderDetail</span> <span class="variable">detail</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderDetail</span>();</span><br><span class="line">            detail.setName(item.getName());</span><br><span class="line">            detail.setSpec(item.getSpec());</span><br><span class="line">            detail.setPrice(item.getPrice());</span><br><span class="line">            detail.setNum(numMap.get(item.getId()));</span><br><span class="line">            detail.setItemId(item.getId());</span><br><span class="line">            detail.setImage(item.getImage());</span><br><span class="line">            detail.setOrderId(orderId);</span><br><span class="line">            details.add(detail);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> details;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-6-æ•°æ®åº“"><a href="#2-6-æ•°æ®åº“" class="headerlink" title="2.6.æ•°æ®åº“"></a>2.6.æ•°æ®åº“</h2><p>trade-serviceä¹Ÿéœ€è¦è‡ªå·±çš„ç‹¬ç«‹çš„databaseï¼Œå‘MySQLä¸­å¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„SQLï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/8f427ce3ba3c07b977a5b4513264a0c0645325325.png">â€‹</p><p>å¯¼å…¥ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/70a106d0147190b3c2e08b9e48a02ddb645325325.png">â€‹</p><h2 id="2-7-é…ç½®å¯åŠ¨é¡¹"><a href="#2-7-é…ç½®å¯åŠ¨é¡¹" class="headerlink" title="2.7.é…ç½®å¯åŠ¨é¡¹"></a>2.7.é…ç½®å¯åŠ¨é¡¹</h2><p>ç»™trade-serviceé…ç½®å¯åŠ¨é¡¹ï¼Œè®¾ç½®profileä¸ºlocalï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/75967a64716fa70d3751400f72d7af04645325325.png">â€‹</p><h2 id="2-8-æµ‹è¯•"><a href="#2-8-æµ‹è¯•" class="headerlink" title="2.8.æµ‹è¯•"></a>2.8.æµ‹è¯•</h2><p>å¯åŠ¨TradeApplicationï¼Œè®¿é—®<a href="http://localhost:8085/doc.html#/default/%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E6%8E%A5%E5%8F%A3/queryOrderByIdUsingGET">http://localhost:8085/doc.html</a>ï¼Œæµ‹è¯•æŸ¥è¯¢è®¢å•æ¥å£ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/0878ce1a8da9d90c45eb7901e7021ad0645325325.png">â€‹</p><p>è¯·æ±‚å‚æ•°ï¼š1654779387523936258ï¼Œäº¤æ˜“æœåŠ¡æµ‹è¯•é€šè¿‡ã€‚</p><p>æ³¨æ„ï¼Œåˆ›å»ºè®¢å•æ¥å£æ— æ³•æµ‹è¯•ï¼Œå› ä¸ºæ— æ³•è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ã€‚</p><h1 id="3-æ”¯ä»˜æœåŠ¡"><a href="#3-æ”¯ä»˜æœåŠ¡" class="headerlink" title="3.æ”¯ä»˜æœåŠ¡"></a>3.æ”¯ä»˜æœåŠ¡</h1><h2 id="3-1-åˆ›å»ºé¡¹ç›®"><a href="#3-1-åˆ›å»ºé¡¹ç›®" class="headerlink" title="3.1.åˆ›å»ºé¡¹ç›®"></a>3.1.åˆ›å»ºé¡¹ç›®</h2><p>åœ¨<code>hmall</code>â€‹ä¸‹æ–°å»ºä¸€ä¸ªmoduleï¼Œå‘½åä¸º<code>pay-service</code>â€‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/13b5b626aea5ccadbd1f6dbd92191f02645325325.png">â€‹</p><h2 id="3-2-ä¾èµ–"><a href="#3-2-ä¾èµ–" class="headerlink" title="3.2.ä¾èµ–"></a>3.2.ä¾èµ–</h2><p><code>pay-service</code>â€‹çš„<code>pom.xml</code>â€‹æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hmall<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pay-service<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--common--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--api--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--web--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ•°æ®åº“--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--nacos æœåŠ¡æ³¨å†Œå‘ç°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-3-å¯åŠ¨ç±»"><a href="#3-3-å¯åŠ¨ç±»" class="headerlink" title="3.3.å¯åŠ¨ç±»"></a>3.3.å¯åŠ¨ç±»</h2><p>åœ¨pay-serviceä¸­çš„<code>com.hmall.pay</code>â€‹åŒ…ä¸‹åˆ›å»ºå¯åŠ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.pay;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableFeignClients(basePackages = &quot;com.hmall.api.client&quot;, defaultConfiguration = DefaultFeignConfig.class)</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.hmall.pay.mapper&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PayApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(PayApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-4-é…ç½®æ–‡ä»¶"><a href="#3-4-é…ç½®æ–‡ä»¶" class="headerlink" title="3.4.é…ç½®æ–‡ä»¶"></a>3.4.é…ç½®æ–‡ä»¶</h2><p>ä»<code>hm-service</code>â€‹é¡¹ç›®ä¸­å¤åˆ¶3ä¸ªyamlé…ç½®æ–‡ä»¶åˆ°<code>trade-service</code>â€‹çš„<code>resource</code>â€‹ç›®å½•ã€‚</p><p>å…¶ä¸­<code>application-dev.yaml</code>â€‹å’Œ<code>application-local.yaml</code>â€‹ä¿æŒä¸å˜ã€‚<code>application.yaml</code>â€‹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8086</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">pay-service</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://$&#123;hm.db.host&#125;:3306/hm-pay?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;hm.db.pw&#125;</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">update-strategy:</span> <span class="string">not_null</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.hmall:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">HH:mm:ss:SSS</span></span><br><span class="line">  <span class="attr">file:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">&quot;logs/$&#123;spring.application.name&#125;&quot;</span></span><br><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">openapi:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">æ”¯ä»˜æœåŠ¡æ¥å£æ–‡æ¡£</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;æ”¯ä»˜æœåŠ¡æ¥å£æ–‡æ¡£&quot;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">zhanghuyi@itcast.cn</span></span><br><span class="line">    <span class="attr">concat:</span> <span class="string">è™å“¥</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://www.itcast.cn</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">v1.0.0</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">group-name:</span> <span class="string">default</span></span><br><span class="line">        <span class="attr">api-rule:</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">api-rule-resources:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">com.hmall.pay.controller</span></span><br></pre></td></tr></table></figure><h2 id="3-5-ä»£ç "><a href="#3-5-ä»£ç " class="headerlink" title="3.5.ä»£ç "></a>3.5.ä»£ç </h2><h3 id="3-5-1-åŸºç¡€ä»£ç "><a href="#3-5-1-åŸºç¡€ä»£ç " class="headerlink" title="3.5.1.åŸºç¡€ä»£ç "></a>3.5.1.åŸºç¡€ä»£ç </h3><p>å¤åˆ¶hm-serviceä¸­æ‰€æœ‰ä¸æ”¯ä»˜æœ‰å…³çš„ä»£ç ï¼Œæœ€ç»ˆé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/029770845a51c85a109c5973e8d706cd645325325.png">â€‹</p><p>åœ¨æ”¯ä»˜æœåŠ¡ä¸­ï¼ŒåŸºäºç”¨æˆ·ä½™é¢æ”¯ä»˜æ—¶éœ€è¦åšä¸‹åˆ—äº‹æƒ…ï¼š</p><ul><li><strong>æ‰£å‡ç”¨æˆ·ä½™é¢</strong></li><li>æ ‡è®°æ”¯ä»˜å•çŠ¶æ€ä¸ºå·²æ”¯ä»˜</li><li><strong>æ ‡è®°è®¢å•çŠ¶æ€ä¸ºå·²æ”¯ä»˜</strong></li></ul><p>å…¶ä¸­ï¼Œ<strong>æ‰£å‡ç”¨æˆ·ä½™é¢</strong>æ˜¯åœ¨<code>user-service</code>â€‹ä¸­æœ‰ç›¸å…³åŠŸèƒ½ï¼›<strong>æ ‡è®°è®¢å•çŠ¶æ€</strong>åˆ™æ˜¯åœ¨<code>trade-service</code>â€‹ä¸­æœ‰ç›¸å…³åŠŸèƒ½ã€‚å› æ­¤äº¤æ˜“æœåŠ¡è¦è°ƒç”¨ä»–ä»¬ï¼Œå¿…é¡»é€šè¿‡OpenFeignè¿œç¨‹è°ƒç”¨ã€‚æˆ‘ä»¬éœ€è¦å°†ä¸Šè¿°åŠŸèƒ½æŠ½å–ä¸ºFeignClient.</p><h3 id="2-5-2-æŠ½å–UserClientæ¥å£"><a href="#2-5-2-æŠ½å–UserClientæ¥å£" class="headerlink" title="2.5.2.æŠ½å–UserClientæ¥å£"></a>2.5.2.æŠ½å–UserClientæ¥å£</h3><p>é¦–å…ˆæ˜¯<strong>æ‰£å‡ç”¨æˆ·ä½™é¢</strong>ï¼Œåœ¨<code>user-service</code>â€‹ä¸­çš„å¯¹åº”ä¸šåŠ¡æ¥å£å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/5505fab51de881084a0929aa85ac44d4645325325.png">â€‹</p><p>æˆ‘ä»¬å°†è¿™ä¸ªæ¥å£æŠ½å–åˆ°<code>hm-api</code>â€‹æ¨¡å—çš„<code>com.hmall.api.client.UserClient</code>â€‹ä¸­:</p><p><img src="https://i0.hdslb.com/bfs/article/7c8ed62130a4c4991a3cc71c50d3c2af645325325.png">â€‹</p><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.api.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PutMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FeignClient(&quot;user-service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserClient</span> &#123;</span><br><span class="line">    <span class="meta">@PutMapping(&quot;/users/money/deduct&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deductMoney</span><span class="params">(<span class="meta">@RequestParam(&quot;pw&quot;)</span> String pw,<span class="meta">@RequestParam(&quot;amount&quot;)</span> Integer amount)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-5-3-æŠ½å–TradeClientæ¥å£"><a href="#2-5-3-æŠ½å–TradeClientæ¥å£" class="headerlink" title="2.5.3.æŠ½å–TradeClientæ¥å£"></a>2.5.3.æŠ½å–TradeClientæ¥å£</h3><p>æ¥ä¸‹æ¥æ˜¯<strong>æ ‡è®°è®¢å•çŠ¶æ€</strong>ï¼Œåœ¨<code>trade-service</code>â€‹ä¸­çš„å¯¹åº”ä¸šåŠ¡æ¥å£å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/b4ebc4939cad3238fb2270f2985c1ba2645325325.png">â€‹</p><p>æˆ‘ä»¬å°†è¿™ä¸ªæ¥å£æŠ½å–åˆ°<code>hm-api</code>â€‹æ¨¡å—çš„<code>com.hmall.api.client.TradeClient</code>â€‹ä¸­:</p><p><img src="https://i0.hdslb.com/bfs/article/ecf88dd961dcd7d13c78ac13567071d7645325325.png">â€‹</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.api.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PutMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FeignClient(&quot;trade-service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TradeClient</span> &#123;</span><br><span class="line">    <span class="meta">@PutMapping(&quot;/orders/&#123;orderId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">markOrderPaySuccess</span><span class="params">(<span class="meta">@PathVariable(&quot;orderId&quot;)</span> Long orderId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-5-4-æ”¹é€ PayOrderServiceImpl"><a href="#2-5-4-æ”¹é€ PayOrderServiceImpl" class="headerlink" title="2.5.4.æ”¹é€ PayOrderServiceImpl"></a>2.5.4.æ”¹é€ PayOrderServiceImpl</h3><p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥æ”¹é€ <code>PayOrderServiceImpl</code>â€‹ä¸­çš„é€»è¾‘ï¼Œå°†æœ¬åœ°æ–¹æ³•è°ƒç”¨æ”¹é€ ä¸ºåŸºäº<code>FeignClient</code>â€‹çš„è°ƒç”¨ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.pay.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.IdWorker;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.StringUtils;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.hmall.api.client.TradeClient;</span><br><span class="line"><span class="keyword">import</span> com.hmall.api.client.UserClient;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.exception.BizIllegalException;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.utils.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.utils.UserContext;</span><br><span class="line"><span class="keyword">import</span> com.hmall.pay.domain.dto.PayApplyDTO;</span><br><span class="line"><span class="keyword">import</span> com.hmall.pay.domain.dto.PayOrderFormDTO;</span><br><span class="line"><span class="keyword">import</span> com.hmall.pay.domain.po.PayOrder;</span><br><span class="line"><span class="keyword">import</span> com.hmall.pay.enums.PayStatus;</span><br><span class="line"><span class="keyword">import</span> com.hmall.pay.mapper.PayOrderMapper;</span><br><span class="line"><span class="keyword">import</span> com.hmall.pay.service.IPayOrderService;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * æ”¯ä»˜è®¢å• æœåŠ¡å®ç°ç±»</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PayOrderServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;PayOrderMapper, PayOrder&gt; <span class="keyword">implements</span> <span class="title class_">IPayOrderService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserClient userClient;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TradeClient tradeClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">applyPayOrder</span><span class="params">(PayApplyDTO applyDTO)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.å¹‚ç­‰æ€§æ ¡éªŒ</span></span><br><span class="line">        <span class="type">PayOrder</span> <span class="variable">payOrder</span> <span class="operator">=</span> checkIdempotent(applyDTO);</span><br><span class="line">        <span class="comment">// 2.è¿”å›ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> payOrder.getId().toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tryPayOrderByBalance</span><span class="params">(PayOrderFormDTO payOrderDTO)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.æŸ¥è¯¢æ”¯ä»˜å•</span></span><br><span class="line">        <span class="type">PayOrder</span> <span class="variable">po</span> <span class="operator">=</span> getById(payOrderDTO.getId());</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">if</span>(!PayStatus.WAIT_BUYER_PAY.equalsValue(po.getStatus()))&#123;</span><br><span class="line">            <span class="comment">// è®¢å•ä¸æ˜¯æœªæ”¯ä»˜ï¼ŒçŠ¶æ€å¼‚å¸¸</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BizIllegalException</span>(<span class="string">&quot;äº¤æ˜“å·²æ”¯ä»˜æˆ–å…³é—­ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.å°è¯•æ‰£å‡ä½™é¢</span></span><br><span class="line">        userClient.deductMoney(payOrderDTO.getPw(), po.getAmount());</span><br><span class="line">        <span class="comment">// 4.ä¿®æ”¹æ”¯ä»˜å•çŠ¶æ€</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">success</span> <span class="operator">=</span> markPayOrderSuccess(payOrderDTO.getId(), LocalDateTime.now());</span><br><span class="line">        <span class="keyword">if</span> (!success) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BizIllegalException</span>(<span class="string">&quot;äº¤æ˜“å·²æ”¯ä»˜æˆ–å…³é—­ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 5.ä¿®æ”¹è®¢å•çŠ¶æ€</span></span><br><span class="line">        tradeClient.markOrderPaySuccess(po.getBizOrderNo());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">markPayOrderSuccess</span><span class="params">(Long id, LocalDateTime successTime)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lambdaUpdate()</span><br><span class="line">                .set(PayOrder::getStatus, PayStatus.TRADE_SUCCESS.getValue())</span><br><span class="line">                .set(PayOrder::getPaySuccessTime, successTime)</span><br><span class="line">                .eq(PayOrder::getId, id)</span><br><span class="line">                <span class="comment">// æ”¯ä»˜çŠ¶æ€çš„ä¹è§‚é”åˆ¤æ–­</span></span><br><span class="line">                .in(PayOrder::getStatus, PayStatus.NOT_COMMIT.getValue(), PayStatus.WAIT_BUYER_PAY.getValue())</span><br><span class="line">                .update();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> PayOrder <span class="title function_">checkIdempotent</span><span class="params">(PayApplyDTO applyDTO)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.é¦–å…ˆæŸ¥è¯¢æ”¯ä»˜å•</span></span><br><span class="line">        <span class="type">PayOrder</span> <span class="variable">oldOrder</span> <span class="operator">=</span> queryByBizOrderNo(applyDTO.getBizOrderNo());</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (oldOrder == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// ä¸å­˜åœ¨æ”¯ä»˜å•ï¼Œè¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡ï¼Œå†™å…¥æ–°çš„æ”¯ä»˜å•å¹¶è¿”å›</span></span><br><span class="line">            <span class="type">PayOrder</span> <span class="variable">payOrder</span> <span class="operator">=</span> buildPayOrder(applyDTO);</span><br><span class="line">            payOrder.setPayOrderNo(IdWorker.getId());</span><br><span class="line">            save(payOrder);</span><br><span class="line">            <span class="keyword">return</span> payOrder;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.æ—§å•å·²ç»å­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦æ”¯ä»˜æˆåŠŸ</span></span><br><span class="line">        <span class="keyword">if</span> (PayStatus.TRADE_SUCCESS.equalsValue(oldOrder.getStatus())) &#123;</span><br><span class="line">            <span class="comment">// å·²ç»æ”¯ä»˜æˆåŠŸï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BizIllegalException</span>(<span class="string">&quot;è®¢å•å·²ç»æ”¯ä»˜ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.æ—§å•å·²ç»å­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦å·²ç»å…³é—­</span></span><br><span class="line">        <span class="keyword">if</span> (PayStatus.TRADE_CLOSED.equalsValue(oldOrder.getStatus())) &#123;</span><br><span class="line">            <span class="comment">// å·²ç»å…³é—­ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BizIllegalException</span>(<span class="string">&quot;è®¢å•å·²å…³é—­&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 5.æ—§å•å·²ç»å­˜åœ¨ï¼Œåˆ¤æ–­æ”¯ä»˜æ¸ é“æ˜¯å¦ä¸€è‡´</span></span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.equals(oldOrder.getPayChannelCode(), applyDTO.getPayChannelCode())) &#123;</span><br><span class="line">            <span class="comment">// æ”¯ä»˜æ¸ é“ä¸ä¸€è‡´ï¼Œéœ€è¦é‡ç½®æ•°æ®ï¼Œç„¶åé‡æ–°ç”³è¯·æ”¯ä»˜å•</span></span><br><span class="line">            <span class="type">PayOrder</span> <span class="variable">payOrder</span> <span class="operator">=</span> buildPayOrder(applyDTO);</span><br><span class="line">            payOrder.setId(oldOrder.getId());</span><br><span class="line">            payOrder.setQrCodeUrl(<span class="string">&quot;&quot;</span>);</span><br><span class="line">            updateById(payOrder);</span><br><span class="line">            payOrder.setPayOrderNo(oldOrder.getPayOrderNo());</span><br><span class="line">            <span class="keyword">return</span> payOrder;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 6.æ—§å•å·²ç»å­˜åœ¨ï¼Œä¸”å¯èƒ½æ˜¯æœªæ”¯ä»˜æˆ–æœªæäº¤ï¼Œä¸”æ”¯ä»˜æ¸ é“ä¸€è‡´ï¼Œç›´æ¥è¿”å›æ—§æ•°æ®</span></span><br><span class="line">        <span class="keyword">return</span> oldOrder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> PayOrder <span class="title function_">buildPayOrder</span><span class="params">(PayApplyDTO payApplyDTO)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.æ•°æ®è½¬æ¢</span></span><br><span class="line">        <span class="type">PayOrder</span> <span class="variable">payOrder</span> <span class="operator">=</span> BeanUtils.toBean(payApplyDTO, PayOrder.class);</span><br><span class="line">        <span class="comment">// 2.åˆå§‹åŒ–æ•°æ®</span></span><br><span class="line">        payOrder.setPayOverTime(LocalDateTime.now().plusMinutes(<span class="number">120L</span>));</span><br><span class="line">        payOrder.setStatus(PayStatus.WAIT_BUYER_PAY.getValue());</span><br><span class="line">        payOrder.setBizUserId(UserContext.getUser());</span><br><span class="line">        <span class="keyword">return</span> payOrder;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> PayOrder <span class="title function_">queryByBizOrderNo</span><span class="params">(Long bizOrderNo)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lambdaQuery()</span><br><span class="line">                .eq(PayOrder::getBizOrderNo, bizOrderNo)</span><br><span class="line">                .one();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-6-æ•°æ®åº“-1"><a href="#2-6-æ•°æ®åº“-1" class="headerlink" title="2.6.æ•°æ®åº“"></a>2.6.æ•°æ®åº“</h2><p><code>pay-service</code>â€‹ä¹Ÿéœ€è¦è‡ªå·±çš„ç‹¬ç«‹çš„databaseï¼Œå‘MySQLä¸­å¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„SQLï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/7ca56fe9212e5a4b1c5f05b3bf5f10df645325325.png">â€‹</p><p>å¯¼å…¥ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f6bfeb408e785ecbf10a461ec7525577645325325.png">â€‹</p><h2 id="2-7-é…ç½®å¯åŠ¨é¡¹-1"><a href="#2-7-é…ç½®å¯åŠ¨é¡¹-1" class="headerlink" title="2.7.é…ç½®å¯åŠ¨é¡¹"></a>2.7.é…ç½®å¯åŠ¨é¡¹</h2><p>ç»™<code>pay-service</code>â€‹é…ç½®å¯åŠ¨é¡¹ï¼Œè®¾ç½®profileä¸º<code>local</code>â€‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/74030dc362aea08b4ac5187797dd7a5e645325325.png">â€‹</p><h2 id="2-8-æµ‹è¯•-1"><a href="#2-8-æµ‹è¯•-1" class="headerlink" title="2.8.æµ‹è¯•"></a>2.8.æµ‹è¯•</h2><p>åœ¨æ”¯ä»˜æœåŠ¡çš„PayControllerä¸­æ·»åŠ ä¸€ä¸ªæ¥å£æ–¹ä¾¿æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(&quot;æŸ¥è¯¢æ”¯ä»˜å•&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="keyword">public</span> List&lt;PayOrderVO&gt; <span class="title function_">queryPayOrders</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> BeanUtils.copyList(payOrderService.list(), PayOrderVO.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨PayApplicationï¼Œè®¿é—®<a href="http://localhost:8086/doc.html#/default/%E6%94%AF%E4%BB%98%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3/queryPayOrdersUsingGET">http://localhost:8086/doc.html</a>ï¼Œæµ‹è¯•æŸ¥è¯¢è®¢å•æ¥å£ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/cbb01b6d9ae55ae26c294431cdcfef3e645325325.png">â€‹</p><p>æ”¯ä»˜æœåŠ¡æµ‹è¯•é€šè¿‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1. åˆå§‹å¾®æœåŠ¡</title>
      <link href="/posts/11212.html"/>
      <url>/posts/11212.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>è‡ªç”±çœ‹ä¼¼æ¡æ¡æ¡†æ¡†ä½†æ˜¯æ€»æœ‰ä¸€ç¬”å‡ºå¤´ï¼Œç‰¢ç¬¼çœ‹ç€é€é£å´è¢«ç½©ä½äº†å¤´</p></div><a href="https://www.bilibili.com/video/BV1S142197x7/">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://i0.hdslb.com/bfs/article/cf9264b4309c06a7e4ecb4074e0a24c2645325325.png"></a><h1 id="0-å¯¼å…¥é»‘é©¬å•†åŸé¡¹ç›®"><a href="#0-å¯¼å…¥é»‘é©¬å•†åŸé¡¹ç›®" class="headerlink" title="0.å¯¼å…¥é»‘é©¬å•†åŸé¡¹ç›®"></a>0.å¯¼å…¥é»‘é©¬å•†åŸé¡¹ç›®</h1><p>åœ¨è¯¾å‰èµ„æ–™ä¸­ç»™å¤§å®¶æä¾›äº†é»‘é©¬å•†åŸé¡¹ç›®çš„èµ„æ–™ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¼å…¥è¿™ä¸ªå•ä½“é¡¹ç›®ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ¬ç¯‡åŠåç»­çš„å¾®æœåŠ¡å­¦ä¹ éƒ½æ˜¯<strong>åŸºäºCentos7ç³»ç»Ÿä¸‹çš„Dockeréƒ¨ç½²</strong>ï¼Œå› æ­¤ä½ å¿…é¡»åšå¥½ä¸€äº›å‡†å¤‡ï¼š</p><ul><li>Centos7çš„ç¯å¢ƒåŠä¸€ä¸ªå¥½ç”¨çš„SSHå®¢æˆ·ç«¯</li><li>å®‰è£…å¥½Docker</li><li>ä¼šä½¿ç”¨Docker</li></ul><h2 id="0-1-å®‰è£…MySQL"><a href="#0-1-å®‰è£…MySQL" class="headerlink" title="0.1.å®‰è£…MySQL"></a>0.1.å®‰è£…MySQL</h2><p>åœ¨è¯¾å‰èµ„æ–™æä¾›å¥½äº†MySQLçš„ä¸€ä¸ªç›®å½•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/b11c1c051d2d919bf46e651607147b0d645325325.png">â€‹</p><p>å…¶ä¸­æœ‰MySQLçš„é…ç½®æ–‡ä»¶å’Œåˆå§‹åŒ–è„šæœ¬ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/451a034ad230d582d73956039282e6aa645325325.png">â€‹</p><p>æˆ‘ä»¬å°†å…¶å¤åˆ¶åˆ°è™šæ‹Ÿæœºçš„<code>/root</code>â€‹ç›®å½•ã€‚å¦‚æœ<code>/root</code>â€‹ä¸‹å·²ç»å­˜åœ¨<code>mysql</code>â€‹ç›®å½•åˆ™åˆ é™¤æ—§çš„ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç›´æ¥å¤åˆ¶æœ¬åœ°çš„ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/86d17952c77862150cc7d6ca10994f7d645325325.png">â€‹</p><p>ç„¶ååˆ›å»ºä¸€ä¸ªé€šç”¨ç½‘ç»œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create hm-net</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…MySQLï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name mysql \</span><br><span class="line">  -p 3306:3306 \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  -e MYSQL_ROOT_PASSWORD=123 \</span><br><span class="line">  -v /root/mysql/data:/var/lib/mysql \</span><br><span class="line">  -v /root/mysql/conf:/etc/mysql/conf.d \</span><br><span class="line">  -v /root/mysql/init:/docker-entrypoint-initdb.d \</span><br><span class="line">  --network hm-net\</span><br><span class="line">  mysql</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œé€šè¿‡å‘½ä»¤æŸ¥çœ‹mysqlå®¹å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><p>å¦‚å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/90f2147a66418ab86cf47921d186ac58645325325.png">â€‹</p><p>å‘ç°mysqlå®¹å™¨æ­£å¸¸è¿è¡Œã€‚</p><p>æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨MySQLçš„å®¢æˆ·ç«¯å·¥å…·è¿æ¥MySQLï¼Œåº”è¯¥èƒ½å‘ç°å·²ç»åˆ›å»ºäº†é»‘é©¬å•†åŸæ‰€éœ€è¦çš„è¡¨ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/b2267c5e3cc78613aae37eb6227453fd645325325.png">â€‹</p><h2 id="0-2-åç«¯"><a href="#0-2-åç«¯" class="headerlink" title="0.2.åç«¯"></a>0.2.åç«¯</h2><p>ç„¶åæ˜¯Javaä»£ç ï¼Œåœ¨è¯¾å‰èµ„æ–™æä¾›äº†ä¸€ä¸ªhmallç›®å½•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/a837dccc37cf1f45610d00f0f59a5d38645325325.png">â€‹</p><p>å°†å…¶å¤åˆ¶åˆ°ä½ çš„å·¥ä½œç©ºé—´ï¼Œç„¶ååˆ©ç”¨Ideaæ‰“å¼€ã€‚</p><p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/683ddd8f0ca5d4dab2688dea7c00f84a645325325.png">â€‹</p><p>æŒ‰ä¸‹<code>ALT</code>â€‹ + <code>8</code>â€‹é”®æ‰“å¼€servicesçª—å£ï¼Œæ–°å¢ä¸€ä¸ªå¯åŠ¨é¡¹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/998e71d1ca61cbe5d19a9d9396b5ce4c645325325.png">â€‹</p><p>åœ¨å¼¹å‡ºçª—å£ä¸­é¼ æ ‡å‘ä¸‹æ»šåŠ¨ï¼Œæ‰¾åˆ°<code>Spring Boot</code>:</p><p><img src="https://i0.hdslb.com/bfs/article/fe89df7790d097cbfcfd9a66866dc259645325325.png">â€‹</p><p>ç‚¹å‡»ååº”è¯¥ä¼šåœ¨servicesä¸­å‡ºç°hmallçš„å¯åŠ¨é¡¹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f8df17982da8ef1e3af6a4e8941a5134645325325.png">â€‹</p><p>ç‚¹å‡»å¯¹åº”æŒ‰é’®ï¼Œå³å¯å®ç°è¿è¡Œæˆ–DEBUGè¿è¡Œã€‚</p><p><strong>ä¸è¿‡åˆ«ç€æ€¥ï¼ï¼</strong></p><p>æˆ‘ä»¬è¿˜éœ€è¦å¯¹è¿™ä¸ªå¯åŠ¨é¡¹åšç®€å•é…ç½®ï¼Œåœ¨<code>HMallApplication</code>â€‹ä¸Šç‚¹å‡»é¼ æ ‡å³é”®ï¼Œä¼šå¼¹å‡ºçª—å£ï¼Œç„¶åé€‰æ‹©<code>Edit Configuration</code>â€‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/a2d1957bf9dac3ee076c6789ad75b512645325325.png">â€‹</p><p>åœ¨å¼¹å‡ºçª—å£ä¸­é…ç½®SpringBootçš„å¯åŠ¨ç¯å¢ƒä¸ºlocalï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/641a7bb52a647e0e76f585dbc415dd24645325325.png">â€‹</p><p>ç‚¹å‡»OKé…ç½®å®Œæˆã€‚æ¥ä¸‹æ¥å°±å¯ä»¥è¿è¡Œäº†ï¼</p><p>å¯åŠ¨å®Œæˆåï¼Œè¯•è¯•çœ‹è®¿é—®ä¸‹ <a href="http://localhost:8080/hi">http://localhost:8080/hi</a> å§ï¼</p><h2 id="0-3-å‰ç«¯"><a href="#0-3-å‰ç«¯" class="headerlink" title="0.3.å‰ç«¯"></a>0.3.å‰ç«¯</h2><p>åœ¨è¯¾å‰èµ„æ–™ä¸­è¿˜æä¾›äº†ä¸€ä¸ªhmall-nginxçš„ç›®å½•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/16e7b438f8e32b029604adc6064dd6ab645325325.png">â€‹</p><p>å…¶ä¸­å°±æ˜¯ä¸€ä¸ªnginxç¨‹åºä»¥åŠæˆ‘ä»¬çš„å‰ç«¯ä»£ç ï¼Œç›´æ¥åœ¨windowsä¸‹å°†å…¶å¤åˆ¶åˆ°ä¸€ä¸ªéä¸­æ–‡ã€ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„ç›®å½•ä¸‹ã€‚ç„¶åè¿›å…¥hmall-nginxåï¼Œåˆ©ç”¨cmdå¯åŠ¨å³å¯ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨nginx</span></span><br><span class="line"><span class="built_in">start</span> nginx.exe</span><br><span class="line"><span class="comment"># åœæ­¢</span></span><br><span class="line">nginx.exe <span class="literal">-s</span> stop</span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½é…ç½®</span></span><br><span class="line">nginx.exe <span class="literal">-s</span> reload</span><br><span class="line"><span class="comment"># é‡å¯</span></span><br><span class="line">nginx.exe <span class="literal">-s</span> restart</span><br></pre></td></tr></table></figure><p>ç‰¹åˆ«æ³¨æ„ï¼š</p><p>nginx.exe ä¸è¦åŒå‡»å¯åŠ¨ï¼Œè€Œæ˜¯æ‰“å¼€cmdçª—å£ï¼Œé€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨ã€‚åœæ­¢çš„æ—¶å€™ä¹Ÿä¸€æ ·è¦æ˜¯ç”¨å‘½ä»¤åœæ­¢ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ä¸è¦é‡å¤å¯åŠ¨ï¼Œè€Œæ˜¯æŸ¥çœ‹logsç›®å½•ä¸­çš„error.logæ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦æ˜¯ç«¯å£å†²çªã€‚å¦‚æœæ˜¯ç«¯å£å†²çªåˆ™è‡ªè¡Œä¿®æ”¹ç«¯å£è§£å†³ã€‚</p><p>ç‰¹åˆ«æé†’ï¼šè¿™é‡Œå¯åŠ¨å¤±è´¥çš„è¯ ï¼Œè¦æŠŠ<strong>application-local</strong> åé¢çš„æ•°å­—è¿›è¡Œåˆ é™¤</p><p>å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®<a href="http://localhost:18080ï¼Œåº”è¯¥èƒ½çœ‹åˆ°æˆ‘ä»¬çš„é—¨æˆ·é¡µé¢ï¼š">http://localhost:18080ï¼Œåº”è¯¥èƒ½çœ‹åˆ°æˆ‘ä»¬çš„é—¨æˆ·é¡µé¢ï¼š</a></p><p><img src="https://i0.hdslb.com/bfs/article/751134211295e98325c273ebdd49f26f645325325.png">â€‹</p><h1 id="1-è®¤è¯†å¾®æœåŠ¡"><a href="#1-è®¤è¯†å¾®æœåŠ¡" class="headerlink" title="1.è®¤è¯†å¾®æœåŠ¡"></a>1.è®¤è¯†å¾®æœåŠ¡</h1><p>è¿™ä¸€ç« æˆ‘ä»¬ä»å•ä½“æ¶æ„çš„ä¼˜ç¼ºç‚¹æ¥åˆ†æï¼Œçœ‹çœ‹å¼€å‘å¤§å‹é¡¹ç›®é‡‡ç”¨å•ä½“æ¶æ„å­˜åœ¨å“ªäº›é—®é¢˜ï¼Œè€Œå¾®æœåŠ¡æ¶æ„åˆæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ã€‚</p><h2 id="1-1-å•ä½“æ¶æ„"><a href="#1-1-å•ä½“æ¶æ„" class="headerlink" title="1.1.å•ä½“æ¶æ„"></a>1.1.å•ä½“æ¶æ„</h2><p>å•ä½“æ¶æ„ï¼ˆmonolithic structureï¼‰ï¼šé¡¾åæ€ä¹‰ï¼Œæ•´ä¸ªé¡¹ç›®ä¸­æ‰€æœ‰åŠŸèƒ½æ¨¡å—éƒ½åœ¨ä¸€ä¸ªå·¥ç¨‹ä¸­å¼€å‘ï¼›é¡¹ç›®éƒ¨ç½²æ—¶éœ€è¦å¯¹æ‰€æœ‰æ¨¡å—ä¸€èµ·ç¼–è¯‘ã€æ‰“åŒ…ï¼›é¡¹ç›®çš„æ¶æ„è®¾è®¡ã€å¼€å‘æ¨¡å¼éƒ½éå¸¸ç®€å•ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/89d912b1ff173288d6a899cad97cb1ed645325325.jpg">â€‹</p><p>å½“é¡¹ç›®è§„æ¨¡è¾ƒå°æ—¶ï¼Œè¿™ç§æ¨¡å¼ä¸Šæ‰‹å¿«ï¼Œéƒ¨ç½²ã€è¿ç»´ä¹Ÿéƒ½å¾ˆæ–¹ä¾¿ï¼Œå› æ­¤æ—©æœŸå¾ˆå¤šå°å‹é¡¹ç›®éƒ½é‡‡ç”¨è¿™ç§æ¨¡å¼ã€‚</p><p>ä½†éšç€é¡¹ç›®çš„ä¸šåŠ¡è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œå›¢é˜Ÿå¼€å‘äººå‘˜ä¹Ÿä¸æ–­å¢åŠ ï¼Œå•ä½“æ¶æ„å°±å‘ˆç°å‡ºè¶Šæ¥è¶Šå¤šçš„é—®é¢˜ï¼š</p><ul><li><strong>å›¢é˜Ÿåä½œæˆæœ¬é«˜</strong>ï¼šè¯•æƒ³ä¸€ä¸‹ï¼Œä½ ä»¬å›¢é˜Ÿæ•°åä¸ªäººåŒæ—¶åä½œå¼€å‘åŒä¸€ä¸ªé¡¹ç›®ï¼Œç”±äºæ‰€æœ‰æ¨¡å—éƒ½åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä¸åŒæ¨¡å—çš„ä»£ç ä¹‹é—´ç‰©ç†è¾¹ç•Œè¶Šæ¥è¶Šæ¨¡ç³Šã€‚æœ€ç»ˆè¦æŠŠåŠŸèƒ½åˆå¹¶åˆ°ä¸€ä¸ªåˆ†æ”¯ï¼Œä½ ç»å¯¹ä¼šé™·å…¥åˆ°è§£å†³å†²çªçš„æ³¥æ½­ä¹‹ä¸­ã€‚</li><li><strong>ç³»ç»Ÿå‘å¸ƒæ•ˆç‡ä½</strong>ï¼šä»»ä½•æ¨¡å—å˜æ›´éƒ½éœ€è¦å‘å¸ƒæ•´ä¸ªç³»ç»Ÿï¼Œè€Œç³»ç»Ÿå‘å¸ƒè¿‡ç¨‹ä¸­éœ€è¦å¤šä¸ªæ¨¡å—ä¹‹é—´åˆ¶çº¦è¾ƒå¤šï¼Œéœ€è¦å¯¹æ¯”å„ç§æ–‡ä»¶ï¼Œä»»ä½•ä¸€å¤„å‡ºç°é—®é¢˜éƒ½ä¼šå¯¼è‡´å‘å¸ƒå¤±è´¥ï¼Œå¾€å¾€ä¸€æ¬¡å‘å¸ƒéœ€è¦æ•°ååˆ†é’Ÿç”šè‡³æ•°å°æ—¶ã€‚</li><li><strong>ç³»ç»Ÿå¯ç”¨æ€§å·®</strong>ï¼šå•ä½“æ¶æ„å„ä¸ªåŠŸèƒ½æ¨¡å—æ˜¯ä½œä¸ºä¸€ä¸ªæœåŠ¡éƒ¨ç½²ï¼Œç›¸äº’ä¹‹é—´ä¼šäº’ç›¸å½±å“ï¼Œä¸€äº›çƒ­ç‚¹åŠŸèƒ½ä¼šè€—å°½ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´å…¶å®ƒæœåŠ¡ä½å¯ç”¨ã€‚</li></ul><p>åœ¨ä¸Šè¿°é—®é¢˜ä¸­ï¼Œå‰ä¸¤ç‚¹ç›¸ä¿¡å¤§å®¶åœ¨å®æˆ˜è¿‡ç¨‹ä¸­åº”è¯¥æ·±æœ‰ä½“ä¼šã€‚å¯¹äºç¬¬ä¸‰ç‚¹ç³»ç»Ÿå¯ç”¨æ€§é—®é¢˜ï¼Œå¾ˆå¤šåŒå­¦å¯èƒ½æ„Ÿè§¦ä¸æ·±ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡é»‘é©¬å•†åŸè¿™ä¸ªé¡¹ç›®ï¼Œç»™å¤§å®¶åšä¸€ä¸ªç®€å•æ¼”ç¤ºã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¿®æ”¹hm-serviceæ¨¡å—ä¸‹çš„<code>com.hmall.controller.HelloController</code>â€‹ä¸­çš„<code>hello</code>â€‹æ–¹æ³•ï¼Œæ¨¡æ‹Ÿæ–¹æ³•æ‰§è¡Œæ—¶çš„è€—æ—¶ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/33960f3fc7a49a2975067870f69a8f8a645325325.png">â€‹</p><p>æ¥ä¸‹æ¥ï¼Œå¯åŠ¨é¡¹ç›®ï¼Œç›®å‰æœ‰ä¸¤ä¸ªæ¥å£æ˜¯æ— éœ€ç™»å½•å³å¯è®¿é—®çš„ï¼š</p><ul><li><code>http://localhost:8080/hi</code>â€‹</li><li><code>http://localhost:8080/search/list</code>â€‹</li></ul><p>ç»è¿‡æµ‹è¯•ï¼Œç›®å‰<code>/search/list</code>â€‹ æ˜¯æ¯”è¾ƒæ­£å¸¸çš„ï¼Œè®¿é—®è€—æ—¶åœ¨30æ¯«ç§’å·¦å³ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å‡è®¾<code>/hi</code>â€‹è¿™ä¸ªæ¥å£æ˜¯ä¸€ä¸ªå¹¶å‘è¾ƒé«˜çš„çƒ­ç‚¹æ¥å£ï¼Œæˆ‘ä»¬é€šè¿‡Jemeteræ¥æ¨¡æ‹Ÿ500ä¸ªç”¨æˆ·ä¸åœè®¿é—®ã€‚åœ¨è¯¾å‰èµ„æ–™ä¸­å·²ç»æä¾›äº†Jemeterçš„æµ‹è¯•è„šæœ¬ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/20497ce02567529a11d1e65997910256645325325.png">â€‹</p><p>å¯¼å…¥Jemeterå¹¶æµ‹è¯•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/fe6f3b97cb1b5ebada62dcaf50303661645325325.png">â€‹</p><p>è¿™ä¸ªè„šæœ¬ä¼šå¼€å¯500ä¸ªçº¿ç¨‹å¹¶å‘è¯·æ±‚<code>http://localhost/hi</code>â€‹è¿™ä¸ªæ¥å£ã€‚ç”±äºè¯¥æ¥å£å­˜åœ¨æ‰§è¡Œè€—æ—¶ï¼ˆ500æ¯«ç§’ï¼‰ï¼Œè¿™å°±æœåŠ¡ç«¯å¯¼è‡´æ¯ç§’èƒ½å¤„ç†çš„è¯·æ±‚æ•°é‡æœ‰é™ï¼Œæœ€ç»ˆä¼šæœ‰è¶Šæ¥è¶Šå¤šè¯·æ±‚ç§¯å‹ï¼Œç›´è‡³Tomcatèµ„æºè€—å°½ã€‚è¿™æ ·ï¼Œå…¶å®ƒæœ¬æ¥æ­£å¸¸çš„æ¥å£ï¼ˆä¾‹å¦‚<code>/search/list</code>â€‹ï¼‰ä¹Ÿéƒ½ä¼šè¢«æ‹–æ…¢ï¼Œç”šè‡³å› è¶…æ—¶è€Œæ— æ³•è®¿é—®äº†ã€‚</p><p>æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ï¼Œå¯åŠ¨æµ‹è¯•è„šæœ¬ï¼Œç„¶ååœ¨æµè§ˆå™¨è®¿é—®<code>http://localhost:8080/search/list</code>â€‹è¿™ä¸ªæ¥å£ï¼Œä¼šå‘ç°å“åº”é€Ÿåº¦éå¸¸æ…¢ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/a4c2dceee628fe9d7e23dedc449c35ed645325325.png">â€‹</p><p>å¦‚æœè¿›ä¸€æ­¥æé«˜<code>/hi</code>â€‹è¿™ä¸ªæ¥å£çš„å¹¶å‘ï¼Œæœ€ç»ˆä¼šå‘ç°<code>/search/list</code>â€‹æ¥å£çš„è¯·æ±‚å“åº”é€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ã€‚</p><p>å¯è§ï¼Œå•ä½“æ¶æ„çš„å¯ç”¨æ€§æ˜¯æ¯”è¾ƒå·®çš„ï¼ŒåŠŸèƒ½ä¹‹é—´ç›¸äº’å½±å“æ¯”è¾ƒå¤§ã€‚</p><p>å½“ç„¶ï¼Œæœ‰åŒå­¦ä¼šè¯´æˆ‘ä»¬å¯ä»¥åšæ°´å¹³æ‰©å±•ã€‚</p><p>æ­¤æ—¶å¦‚æœæˆ‘ä»¬å¯¹ç³»ç»Ÿåšæ°´å¹³æ‰©å±•ï¼Œå¢åŠ æ›´å¤šæœºå™¨ï¼Œèµ„æºè¿˜æ˜¯ä¼šè¢«è¿™æ ·çš„çƒ­ç‚¹æ¥å£å ç”¨ï¼Œä»è€Œå½±å“åˆ°å…¶å®ƒæ¥å£ï¼Œå¹¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ã€‚è¿™ä¹Ÿå°±æ˜¯å•ä½“æ¶æ„çš„æ‰©å±•æ€§å·®çš„ä¸€ä¸ªåŸå› ã€‚</p><p>è€Œè¦æƒ³è§£å†³è¿™äº›é—®é¢˜ï¼Œå°±éœ€è¦ä½¿ç”¨å¾®æœåŠ¡æ¶æ„äº†ã€‚</p><p><strong>å•ä½“æ¶æ„é€‚åˆå¼€å‘åŠŸèƒ½ç›¸å¯¹ç®€å• ï¼Œè§„æ¨¡è¾ƒå°çš„é¡¹ç›®</strong></p><h2 id="1-2-å¾®æœåŠ¡"><a href="#1-2-å¾®æœåŠ¡" class="headerlink" title="1.2.å¾®æœåŠ¡"></a>1.2.å¾®æœåŠ¡</h2><p>å¾®æœåŠ¡æ¶æ„ï¼Œé¦–å…ˆæ˜¯æœåŠ¡åŒ–ï¼Œå°±æ˜¯å°†å•ä½“æ¶æ„ä¸­çš„åŠŸèƒ½æ¨¡å—ä»å•ä½“åº”ç”¨ä¸­æ‹†åˆ†å‡ºæ¥ï¼Œç‹¬ç«‹éƒ¨ç½²ä¸ºå¤šä¸ªæœåŠ¡ã€‚åŒæ—¶è¦æ»¡è¶³ä¸‹é¢çš„ä¸€äº›ç‰¹ç‚¹ï¼š</p><ul><li><strong>å•ä¸€èŒè´£</strong>ï¼šä¸€ä¸ªå¾®æœåŠ¡è´Ÿè´£ä¸€éƒ¨åˆ†ä¸šåŠ¡åŠŸèƒ½ï¼Œå¹¶ä¸”å…¶æ ¸å¿ƒæ•°æ®ä¸ä¾èµ–äºå…¶å®ƒæ¨¡å—ã€‚</li><li><strong>å›¢é˜Ÿè‡ªæ²»</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å¼€å‘ã€æµ‹è¯•ã€å‘å¸ƒã€è¿ç»´äººå‘˜ï¼Œå›¢é˜Ÿäººå‘˜è§„æ¨¡ä¸è¶…è¿‡10äººï¼ˆ2å¼ æŠ«è¨èƒ½å–‚é¥±ï¼‰</li><li><strong>æœåŠ¡è‡ªæ²»</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡éƒ½ç‹¬ç«‹æ‰“åŒ…éƒ¨ç½²ï¼Œè®¿é—®è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ã€‚å¹¶ä¸”è¦åšå¥½æœåŠ¡éš”ç¦»ï¼Œé¿å…å¯¹å…¶å®ƒæœåŠ¡äº§ç”Ÿå½±å“</li></ul><p>ä¾‹å¦‚ï¼Œé»‘é©¬å•†åŸé¡¹ç›®ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå•†å“ã€ç”¨æˆ·ã€è´­ç‰©è½¦ã€äº¤æ˜“ç­‰æ¨¡å—æ‹†åˆ†ï¼Œäº¤ç»™ä¸åŒçš„å›¢é˜Ÿå»å¼€å‘ï¼Œå¹¶ç‹¬ç«‹éƒ¨ç½²ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f2ffaf8fcceba471e8cd85302355b345645325325.jpg">â€‹</p><p>é‚£ä¹ˆï¼Œå•ä½“æ¶æ„å­˜åœ¨çš„é—®é¢˜æœ‰æ²¡æœ‰è§£å†³å‘¢ï¼Ÿ</p><ul><li><p>å›¢é˜Ÿåä½œæˆæœ¬é«˜ï¼Ÿ</p><ul><li>ç”±äºæœåŠ¡æ‹†åˆ†ï¼Œæ¯ä¸ªæœåŠ¡ä»£ç é‡å¤§å¤§å‡å°‘ï¼Œå‚ä¸å¼€å‘çš„åå°äººå‘˜åœ¨1~3åï¼Œåä½œæˆæœ¬å¤§å¤§é™ä½</li></ul></li><li><p>ç³»ç»Ÿå‘å¸ƒæ•ˆç‡ä½ï¼Ÿ</p><ul><li>æ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹éƒ¨ç½²ï¼Œå½“æœ‰æŸä¸ªæœåŠ¡æœ‰ä»£ç å˜æ›´æ—¶ï¼Œåªéœ€è¦æ‰“åŒ…éƒ¨ç½²è¯¥æœåŠ¡å³å¯</li></ul></li><li><p>ç³»ç»Ÿå¯ç”¨æ€§å·®ï¼Ÿ</p><ul><li>æ¯ä¸ªæœåŠ¡ç‹¬ç«‹éƒ¨ç½²ï¼Œå¹¶ä¸”åšå¥½æœåŠ¡éš”ç¦»ï¼Œä½¿ç”¨è‡ªå·±çš„æœåŠ¡å™¨èµ„æºï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒæœåŠ¡ã€‚</li></ul></li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¾®æœåŠ¡æ¶æ„è§£å†³äº†å•ä½“æ¶æ„å­˜åœ¨çš„é—®é¢˜ï¼Œç‰¹åˆ«é€‚åˆå¤§å‹äº’è”ç½‘é¡¹ç›®çš„å¼€å‘ï¼Œå› æ­¤è¢«å„å¤§äº’è”ç½‘å…¬å¸æ™®éé‡‡ç”¨ã€‚å¤§å®¶ä»¥å‰å¯èƒ½å¬è¯´è¿‡åˆ†å¸ƒå¼æ¶æ„ï¼Œåˆ†å¸ƒå¼å°±æ˜¯æœåŠ¡æ‹†åˆ†çš„è¿‡ç¨‹ï¼Œå…¶å®å¾®æœåŠ¡æ¶æ„æ­£å¼åˆ†å¸ƒå¼æ¶æ„çš„ä¸€ç§æœ€ä½³å®è·µçš„æ–¹æ¡ˆã€‚</p><p>å½“ç„¶ï¼Œå¾®æœåŠ¡æ¶æ„è™½ç„¶èƒ½è§£å†³å•ä½“æ¶æ„çš„å„ç§é—®é¢˜ï¼Œä½†åœ¨æ‹†åˆ†çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šé¢ä¸´å¾ˆå¤šå…¶å®ƒé—®é¢˜ã€‚æ¯”å¦‚ï¼š</p><ul><li>å¦‚æœå‡ºç°è·¨æœåŠ¡çš„ä¸šåŠ¡è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</li><li>é¡µé¢è¯·æ±‚åˆ°åº•è¯¥è®¿é—®å“ªä¸ªæœåŠ¡ï¼Ÿ</li><li>å¦‚ä½•å®ç°å„ä¸ªæœåŠ¡ä¹‹é—´çš„æœåŠ¡éš”ç¦»ï¼Ÿ</li></ul><p>è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨åç»­çš„å­¦ä¹ ä¸­ä¼šç»™å¤§å®¶é€ä¸€è§£ç­”ã€‚</p><h2 id="1-3-SpringCloud"><a href="#1-3-SpringCloud" class="headerlink" title="1.3.SpringCloud"></a>1.3.SpringCloud</h2><p>å¾®æœåŠ¡æ‹†åˆ†ä»¥åç¢°åˆ°çš„å„ç§é—®é¢˜éƒ½æœ‰å¯¹åº”çš„è§£å†³æ–¹æ¡ˆå’Œå¾®æœåŠ¡ç»„ä»¶ï¼Œè€ŒSpringCloudæ¡†æ¶å¯ä»¥è¯´æ˜¯ç›®å‰Javaé¢†åŸŸæœ€å…¨é¢çš„å¾®æœåŠ¡ç»„ä»¶çš„é›†åˆäº†ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/dc28b5e737fa76f937f579806b5dc261645325325.png">â€‹</p><p>è€Œä¸”SpringCloudä¾æ‰˜äºSpringBootçš„è‡ªåŠ¨è£…é…èƒ½åŠ›ï¼Œå¤§å¤§é™ä½äº†å…¶é¡¹ç›®æ­å»ºã€ç»„ä»¶ä½¿ç”¨çš„æˆæœ¬ã€‚å¯¹äºæ²¡æœ‰è‡ªç ”å¾®æœåŠ¡ç»„ä»¶èƒ½åŠ›çš„ä¸­å°å‹ä¼ä¸šï¼Œä½¿ç”¨SpringCloudå…¨å®¶æ¡¶æ¥å®ç°å¾®æœåŠ¡å¼€å‘å¯ä»¥è¯´æ˜¯æœ€åˆé€‚çš„é€‰æ‹©äº†ï¼</p><p><a href="https://spring.io/projects/spring-cloud#overview">https://spring.io/projects/spring-cloud#overview</a></p><p>ç›®å‰SpringCloudæœ€æ–°ç‰ˆæœ¬ä¸º<code>2022.0.x</code>â€‹ç‰ˆæœ¬ï¼Œå¯¹åº”çš„SpringBootç‰ˆæœ¬ä¸º<code>3.x</code>â€‹ç‰ˆæœ¬ï¼Œä½†å®ƒä»¬å…¨éƒ¨ä¾èµ–äºJDK17ï¼Œç›®å‰åœ¨ä¼ä¸šä¸­ä½¿ç”¨ç›¸å¯¹è¾ƒå°‘ã€‚</p><table><thead><tr><th>SpringCloudç‰ˆæœ¬</th><th>SpringBootç‰ˆæœ¬</th></tr></thead><tbody><tr><td><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2022.0-Release-Notes">2022.0.x</a>aka Kilburn</td><td>3.0.x</td></tr><tr><td><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2021.0-Release-Notes">2021.0.x</a>aka Jubilee</td><td>2.6.x, 2.7.x (Starting with 2021.0.3)</td></tr><tr><td><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes">2020.0.x</a>aka Ilford</td><td>2.4.x, 2.5.x (Starting with 2020.0.3)</td></tr><tr><td><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-Hoxton-Release-Notes">Hoxton</a></td><td>2.2.x, 2.3.x (Starting with SR5)</td></tr><tr><td><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Greenwich-Release-Notes">Greenwich</a></td><td>2.1.x</td></tr><tr><td><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Finchley-Release-Notes">Finchley</a></td><td>2.0.x</td></tr><tr><td><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Edgware-Release-Notes">Edgware</a></td><td>1.5.x</td></tr><tr><td><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Dalston-Release-Notes">Dalston</a></td><td>1.5.x</td></tr></tbody></table><p>å› æ­¤ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨æ¬¡æ–°ç‰ˆæœ¬ï¼šSpring Cloud 2021.0.xä»¥åŠSpring Boot 2.7.xç‰ˆæœ¬ã€‚</p><p>å¦å¤–ï¼ŒAlibabaçš„å¾®æœåŠ¡äº§å“SpringCloudAlibabaç›®å‰ä¹Ÿæˆä¸ºäº†SpringCloudç»„ä»¶ä¸­çš„ä¸€å‘˜ï¼Œæˆ‘ä»¬è¯¾å ‚ä¸­ä¹Ÿä¼šä½¿ç”¨å…¶ä¸­çš„éƒ¨åˆ†ç»„ä»¶ã€‚</p><p>åœ¨æˆ‘ä»¬çš„çˆ¶å·¥ç¨‹hmallä¸­å·²ç»é…ç½®äº†SpringCloudä»¥åŠSpringCloudAlibabaçš„ä¾èµ–ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/52f6c04253b53f49614328965f9214ed645325325.png">â€‹</p><p>å¯¹åº”çš„ç‰ˆæœ¬ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/9da2f6184d2335c23a98b831366ce148645325325.png">â€‹</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨åç»­éœ€è¦ä½¿ç”¨SpringCloudæˆ–è€…SpringCloudAlibabaç»„ä»¶æ—¶ï¼Œå°±æ— éœ€å•ç‹¬æŒ‡å®šç‰ˆæœ¬äº†ã€‚</p><h1 id="2-å¾®æœåŠ¡æ‹†åˆ†"><a href="#2-å¾®æœåŠ¡æ‹†åˆ†" class="headerlink" title="2.å¾®æœåŠ¡æ‹†åˆ†"></a>2.å¾®æœåŠ¡æ‹†åˆ†</h1><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€èµ·å°†é»‘é©¬å•†åŸè¿™ä¸ªå•ä½“é¡¹ç›®æ‹†åˆ†ä¸ºå¾®æœåŠ¡é¡¹ç›®ï¼Œå¹¶è§£å†³å…¶ä¸­å‡ºç°çš„å„ç§é—®é¢˜ã€‚</p><h2 id="2-1-ç†Ÿæ‚‰é»‘é©¬å•†åŸ"><a href="#2-1-ç†Ÿæ‚‰é»‘é©¬å•†åŸ" class="headerlink" title="2.1.ç†Ÿæ‚‰é»‘é©¬å•†åŸ"></a>2.1.ç†Ÿæ‚‰é»‘é©¬å•†åŸ</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç†Ÿæ‚‰é»‘é©¬å•†åŸé¡¹ç›®çš„åŸºæœ¬ç»“æ„ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/ccd89c11691924c4f9db849c9e5e9a8e645325325.png">â€‹</p><p>å¤§å®¶å¯ä»¥ç›´æ¥å¯åŠ¨è¯¥é¡¹ç›®ï¼Œæµ‹è¯•æ•ˆæœã€‚ä¸è¿‡ï¼Œéœ€è¦ä¿®æ”¹æ•°æ®åº“è¿æ¥å‚æ•°ï¼Œåœ¨application-local.yamlä¸­ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hm:</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span> <span class="comment"># ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„è™šæ‹ŸæœºIPåœ°å€</span></span><br><span class="line">    <span class="attr">pw:</span> <span class="number">123</span> <span class="comment"># ä¿®æ”¹ä¸ºdockerä¸­çš„MySQLå¯†ç </span></span><br></pre></td></tr></table></figure><p>åŒæ—¶é…ç½®å¯åŠ¨é¡¹æ¿€æ´»çš„æ˜¯localç¯å¢ƒï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/5f16b4508af82f219b77c22bee08bc23645325325.png">â€‹</p><h3 id="2-1-1-ç™»å½•"><a href="#2-1-1-ç™»å½•" class="headerlink" title="2.1.1.ç™»å½•"></a>2.1.1.ç™»å½•</h3><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ç™»å½•ä¸šåŠ¡æµç¨‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/4273befa6341663c2305c5ea9cdddd97645325325.png" alt="image">â€‹</p><p>ç™»å½•å…¥å£åœ¨<code>com.hmall.controller.UserController</code>â€‹ä¸­çš„<code>login</code>â€‹æ–¹æ³•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/7e5623a0ad7eac902ae625f56f6ed048645325325.png">â€‹</p><h3 id="2-2-2-æœç´¢å•†å“"><a href="#2-2-2-æœç´¢å•†å“" class="headerlink" title="2.2.2.æœç´¢å•†å“"></a>2.2.2.æœç´¢å•†å“</h3><p>åœ¨é¦–é¡µæœç´¢æ¡†è¾“å…¥å…³é”®å­—ï¼Œç‚¹å‡»æœç´¢å³å¯è¿›å…¥æœç´¢åˆ—è¡¨é¡µé¢ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/dd9f477245d64cf7b30fb6ced3f91005645325325.png">â€‹</p><p>è¯¥é¡µé¢ä¼šè°ƒç”¨æ¥å£ï¼š<code>/search/list</code>â€‹ï¼Œå¯¹åº”çš„æœåŠ¡ç«¯å…¥å£åœ¨<code>com.hmall.controller.SearchController</code>â€‹ä¸­çš„<code>search</code>â€‹æ–¹æ³•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e9ee29984eef9cb980961ae1369b8f22645325325.png">â€‹</p><p>è¿™é‡Œç›®å‰æ˜¯åˆ©ç”¨æ•°æ®åº“å®ç°äº†ç®€å•çš„åˆ†é¡µæŸ¥è¯¢ã€‚</p><h3 id="2-2-3-è´­ç‰©è½¦"><a href="#2-2-3-è´­ç‰©è½¦" class="headerlink" title="2.2.3.è´­ç‰©è½¦"></a>2.2.3.è´­ç‰©è½¦</h3><p>åœ¨æœç´¢åˆ°çš„å•†å“åˆ—è¡¨ä¸­ï¼Œç‚¹å‡»æŒ‰é’®<code>åŠ å…¥è´­ç‰©è½¦</code>â€‹ï¼Œå³å¯å°†å•†å“åŠ å…¥è´­ç‰©è½¦ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/020606cb760f23b867e47ce5e9651085645325325.png">â€‹</p><p>åŠ å…¥æˆåŠŸåå³å¯è¿›å…¥è´­ç‰©è½¦åˆ—è¡¨é¡µï¼ŒæŸ¥çœ‹è‡ªå·±è´­ç‰©è½¦å•†å“åˆ—è¡¨ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/cd98ada9dccdc494d461e58c5906660f645325325.png">â€‹</p><p>åŒæ—¶è¿™é‡Œè¿˜å¯ä»¥å¯¹è´­ç‰©è½¦å®ç°ä¿®æ”¹ã€åˆ é™¤ç­‰æ“ä½œã€‚</p><p>ç›¸å…³åŠŸèƒ½å…¨éƒ¨åœ¨<code>com.hmall.controller.CartController</code>â€‹ä¸­ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/46d1e41272f6a6397b6d18ead335306a645325325.png">â€‹</p><p>å…¶ä¸­ï¼ŒæŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨æ—¶ï¼Œç”±äºè¦åˆ¤æ–­å•†å“æœ€æ–°çš„ä»·æ ¼å’ŒçŠ¶æ€ï¼Œæ‰€ä»¥è¿˜éœ€è¦æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œä¸šåŠ¡æµç¨‹å¦‚ä¸‹ï¼š</p><p>æš‚æ—¶æ— æ³•åœ¨é£ä¹¦æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹</p><h3 id="2-2-4-ä¸‹å•"><a href="#2-2-4-ä¸‹å•" class="headerlink" title="2.2.4.ä¸‹å•"></a>2.2.4.ä¸‹å•</h3><p>åœ¨è´­ç‰©è½¦é¡µé¢ç‚¹å‡»<code>ç»“ç®—</code>â€‹æŒ‰é’®ï¼Œä¼šè¿›å…¥è®¢å•ç»“ç®—é¡µé¢ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f734ced5aa5904c028f868611d3d05e7645325325.png">â€‹</p><p>ç‚¹å‡»æäº¤è®¢å•ï¼Œä¼šæäº¤è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯åš3ä»¶äº‹æƒ…ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªæ–°çš„è®¢å•</li><li>æ‰£å‡å•†å“åº“å­˜</li><li>æ¸…ç†è´­ç‰©è½¦ä¸­å•†å“</li></ul><p>ä¸šåŠ¡å…¥å£åœ¨<code>com.hmall.controller.OrderController</code>â€‹ä¸­çš„<code>createOrder</code>â€‹æ–¹æ³•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/5c93bca625cb42855e08b5f60a6509b9645325325.png">â€‹</p><h3 id="2-2-5-æ”¯ä»˜"><a href="#2-2-5-æ”¯ä»˜" class="headerlink" title="2.2.5.æ”¯ä»˜"></a>2.2.5.æ”¯ä»˜</h3><p>ä¸‹å•å®Œæˆåä¼šè·³è½¬åˆ°æ”¯ä»˜é¡µé¢ï¼Œç›®å‰åªæ”¯æŒ<strong>ä½™é¢æ”¯ä»˜</strong>ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/a485899030bf8c7b58a43c65b9fc8d75645325325.png">â€‹</p><p>åœ¨é€‰æ‹©<strong>ä½™é¢æ”¯ä»˜</strong>è¿™ç§æ–¹å¼åï¼Œä¼šå‘èµ·è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¼šç«‹åˆ»åˆ›å»ºä¸€ä¸ªæ”¯ä»˜æµæ°´å•ï¼Œå¹¶è¿”å›æ”¯ä»˜æµæ°´å•å·åˆ°å‰ç«¯ã€‚</p><p>å½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·å¯†ç ï¼Œç„¶åç‚¹å‡»ç¡®è®¤æ”¯ä»˜æ—¶ï¼Œé¡µé¢ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œè€ŒæœåŠ¡ç«¯ä¼šåšå‡ ä»¶äº‹æƒ…ï¼š</p><ul><li>æ ¡éªŒç”¨æˆ·å¯†ç </li><li>æ‰£å‡ä½™é¢</li><li>ä¿®æ”¹æ”¯ä»˜æµæ°´çŠ¶æ€</li><li>ä¿®æ”¹äº¤æ˜“è®¢å•çŠ¶æ€</li></ul><p>è¯·æ±‚å…¥å£åœ¨<code>com.hmall.controller.PayController</code>â€‹ä¸­ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/8caa5b9b0e5bcbb0ddfbbdb9fe0d98f1645325325.png">â€‹</p><h2 id="2-2-æœåŠ¡æ‹†åˆ†åŸåˆ™"><a href="#2-2-æœåŠ¡æ‹†åˆ†åŸåˆ™" class="headerlink" title="2.2.æœåŠ¡æ‹†åˆ†åŸåˆ™"></a>2.2.æœåŠ¡æ‹†åˆ†åŸåˆ™</h2><p>æœåŠ¡æ‹†åˆ†ä¸€å®šè¦è€ƒè™‘å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>ä»€ä¹ˆæ—¶å€™æ‹†ï¼Ÿ</li><li>å¦‚ä½•æ‹†ï¼Ÿ</li></ul><h3 id="2-2-1-ä»€ä¹ˆæ—¶å€™æ‹†"><a href="#2-2-1-ä»€ä¹ˆæ—¶å€™æ‹†" class="headerlink" title="2.2.1.ä»€ä¹ˆæ—¶å€™æ‹†"></a>2.2.1.ä»€ä¹ˆæ—¶å€™æ‹†</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äºä¸€ä¸ªåˆåˆ›çš„é¡¹ç›®ï¼Œé¦–å…ˆè¦åšçš„æ˜¯éªŒè¯é¡¹ç›®çš„å¯è¡Œæ€§ã€‚å› æ­¤è¿™ä¸€é˜¶æ®µçš„é¦–è¦ä»»åŠ¡æ˜¯æ•æ·å¼€å‘ï¼Œå¿«é€Ÿäº§å‡ºç”Ÿäº§å¯ç”¨çš„äº§å“ï¼ŒæŠ•å…¥å¸‚åœºåšéªŒè¯ã€‚ä¸ºäº†è¾¾æˆè¿™ä¸€ç›®çš„ï¼Œè¯¥é˜¶æ®µé¡¹ç›®æ¶æ„å¾€å¾€ä¼šæ¯”è¾ƒç®€å•ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ä¼šç›´æ¥é‡‡ç”¨å•ä½“æ¶æ„ï¼Œè¿™æ ·å¼€å‘æˆæœ¬æ¯”è¾ƒä½ï¼Œå¯ä»¥å¿«é€Ÿäº§å‡ºç»“æœï¼Œä¸€æ—¦å‘ç°é¡¹ç›®ä¸ç¬¦åˆå¸‚åœºï¼ŒæŸå¤±è¾ƒå°ã€‚</p><p>å¦‚æœè¿™ä¸€é˜¶æ®µé‡‡ç”¨å¤æ‚çš„å¾®æœåŠ¡æ¶æ„ï¼ŒæŠ•å…¥å¤§é‡çš„äººåŠ›å’Œæ—¶é—´æˆæœ¬ç”¨äºæ¶æ„è®¾è®¡ï¼Œæœ€ç»ˆå‘ç°äº§å“ä¸ç¬¦åˆå¸‚åœºéœ€æ±‚ï¼Œç­‰äºå…¨éƒ¨åšäº†æ— ç”¨åŠŸã€‚</p><p>æ‰€ä»¥ï¼Œå¯¹äº<strong>å¤§å¤šæ•°å°å‹é¡¹ç›®æ¥è¯´ï¼Œä¸€èˆ¬æ˜¯å…ˆé‡‡ç”¨å•ä½“æ¶æ„</strong>ï¼Œéšç€ç”¨æˆ·è§„æ¨¡æ‰©å¤§ã€ä¸šåŠ¡å¤æ‚å<strong>å†é€æ¸æ‹†åˆ†ä¸ºå¾®æœåŠ¡æ¶æ„</strong>ã€‚è¿™æ ·åˆæœŸæˆæœ¬ä¼šæ¯”è¾ƒä½ï¼Œå¯ä»¥å¿«é€Ÿè¯•é”™ã€‚ä½†æ˜¯ï¼Œè¿™ä¹ˆåšçš„é—®é¢˜å°±åœ¨äºåæœŸåšæœåŠ¡æ‹†åˆ†æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šä»£ç è€¦åˆå¸¦æ¥çš„é—®é¢˜ï¼Œæ‹†åˆ†æ¯”è¾ƒå›°éš¾ï¼ˆ<strong>å‰æ˜“åéš¾</strong>ï¼‰ã€‚</p><p>è€Œå¯¹äºä¸€äº›å¤§å‹é¡¹ç›®ï¼Œåœ¨ç«‹é¡¹ä¹‹åˆç›®çš„å°±å¾ˆæ˜ç¡®ï¼Œä¸ºäº†é•¿è¿œè€ƒè™‘ï¼Œåœ¨æ¶æ„è®¾è®¡æ—¶å°±ç›´æ¥é€‰æ‹©å¾®æœåŠ¡æ¶æ„ã€‚è™½ç„¶å‰æœŸæŠ•å…¥è¾ƒå¤šï¼Œä½†åæœŸå°±å°‘äº†æ‹†åˆ†æœåŠ¡çš„çƒ¦æ¼ï¼ˆ<strong>å‰éš¾åæ˜“</strong>ï¼‰ã€‚</p><h3 id="2-2-2-æ€ä¹ˆæ‹†"><a href="#2-2-2-æ€ä¹ˆæ‹†" class="headerlink" title="2.2.2.æ€ä¹ˆæ‹†"></a>2.2.2.æ€ä¹ˆæ‹†</h3><p>ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼Œå¾®æœåŠ¡æ‹†åˆ†æ—¶<strong>ç²’åº¦è¦å°</strong>ï¼Œè¿™å…¶å®æ˜¯æ‹†åˆ†çš„ç›®æ ‡ã€‚å…·ä½“å¯ä»¥ä»ä¸¤ä¸ªè§’åº¦æ¥åˆ†æï¼š</p><ul><li><strong>é«˜å†…èš</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡çš„èŒè´£è¦å°½é‡å•ä¸€ï¼ŒåŒ…å«çš„ä¸šåŠ¡ç›¸äº’å…³è”åº¦é«˜ã€å®Œæ•´åº¦é«˜ã€‚</li><li><strong>ä½è€¦åˆ</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡çš„åŠŸèƒ½è¦ç›¸å¯¹ç‹¬ç«‹ï¼Œå°½é‡å‡å°‘å¯¹å…¶å®ƒå¾®æœåŠ¡çš„ä¾èµ–ï¼Œæˆ–è€…ä¾èµ–æ¥å£çš„ç¨³å®šæ€§è¦å¼ºã€‚</li></ul><p><strong>é«˜å†…èš</strong>é¦–å…ˆæ˜¯<strong>å•ä¸€èŒè´£ï¼Œ</strong> ä½†ä¸èƒ½è¯´ä¸€ä¸ªå¾®æœåŠ¡å°±ä¸€ä¸ªæ¥å£ï¼Œè€Œæ˜¯è¦ä¿è¯å¾®æœåŠ¡å†…éƒ¨ä¸šåŠ¡çš„å®Œæ•´æ€§ä¸ºå‰æã€‚ç›®æ ‡æ˜¯å½“æˆ‘ä»¬è¦ä¿®æ”¹æŸä¸ªä¸šåŠ¡æ—¶ï¼Œæœ€å¥½å°±åªä¿®æ”¹å½“å‰å¾®æœåŠ¡ï¼Œè¿™æ ·å˜æ›´çš„æˆæœ¬æ›´ä½ã€‚</p><p>ä¸€æ—¦å¾®æœåŠ¡åšåˆ°äº†é«˜å†…èšï¼Œé‚£ä¹ˆæœåŠ¡ä¹‹é—´çš„<strong>è€¦åˆåº¦</strong>è‡ªç„¶å°±é™ä½äº†ã€‚</p><p>å½“ç„¶ï¼Œå¾®æœåŠ¡ä¹‹é—´ä¸å¯é¿å…çš„ä¼šæœ‰æˆ–å¤šæˆ–å°‘çš„ä¸šåŠ¡äº¤äº’ï¼Œæ¯”å¦‚ä¸‹å•æ—¶éœ€è¦æŸ¥è¯¢å•†å“æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¸èƒ½åœ¨è®¢å•æœåŠ¡ç›´æ¥æŸ¥è¯¢å•†å“æ•°æ®åº“ï¼Œå¦åˆ™å°±å¯¼è‡´äº†æ•°æ®è€¦åˆã€‚è€Œåº”è¯¥ç”±å•†å“æœåŠ¡å¯¹åº”æš´éœ²æ¥å£ï¼Œå¹¶ä¸”ä¸€å®šè¦ä¿è¯å¾®æœåŠ¡å¯¹å¤–<strong>æ¥å£çš„ç¨³å®šæ€§</strong>ï¼ˆå³ï¼šå°½é‡ä¿è¯æ¥å£å¤–è§‚ä¸å˜ï¼‰ã€‚è™½ç„¶å‡ºç°äº†æœåŠ¡é—´è°ƒç”¨ï¼Œä½†æ­¤æ—¶æ— è®ºä½ å¦‚ä½•åœ¨å•†å“æœåŠ¡åšå†…éƒ¨ä¿®æ”¹ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°è®¢å•å¾®æœåŠ¡ï¼ŒæœåŠ¡é—´çš„è€¦åˆåº¦å°±é™ä½äº†ã€‚</p><p>æ˜ç¡®äº†æ‹†åˆ†ç›®æ ‡ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ‹†åˆ†æ–¹å¼äº†ã€‚æˆ‘ä»¬åœ¨åšæœåŠ¡æ‹†åˆ†æ—¶ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><strong>çºµå‘</strong>æ‹†åˆ†</li><li><strong>æ¨ªå‘</strong>æ‹†åˆ†</li></ul><p>æ‰€è°“<strong>çºµå‘æ‹†åˆ†</strong>ï¼Œå°±æ˜¯æŒ‰ç…§é¡¹ç›®çš„åŠŸèƒ½æ¨¡å—æ¥æ‹†åˆ†ã€‚ä¾‹å¦‚é»‘é©¬å•†åŸä¸­ï¼Œå°±æœ‰ç”¨æˆ·ç®¡ç†åŠŸèƒ½ã€è®¢å•ç®¡ç†åŠŸèƒ½ã€è´­ç‰©è½¦åŠŸèƒ½ã€å•†å“ç®¡ç†åŠŸèƒ½ã€æ”¯ä»˜åŠŸèƒ½ç­‰ã€‚é‚£ä¹ˆæŒ‰ç…§åŠŸèƒ½æ¨¡å—å°†ä»–ä»¬æ‹†åˆ†ä¸ºä¸€ä¸ªä¸ªæœåŠ¡ï¼Œå°±å±äºçºµå‘æ‹†åˆ†ã€‚è¿™ç§æ‹†åˆ†æ¨¡å¼å¯ä»¥å°½å¯èƒ½æé«˜æœåŠ¡çš„å†…èšæ€§ã€‚</p><p>è€Œ<strong>æ¨ªå‘æ‹†åˆ†</strong>ï¼Œæ˜¯çœ‹å„ä¸ªåŠŸèƒ½æ¨¡å—ä¹‹é—´æœ‰æ²¡æœ‰å…¬å…±çš„ä¸šåŠ¡éƒ¨åˆ†ï¼Œå¦‚æœæœ‰å°†å…¶æŠ½å–å‡ºæ¥ä½œä¸ºé€šç”¨æœåŠ¡ã€‚ä¾‹å¦‚ç”¨æˆ·ç™»å½•æ˜¯éœ€è¦å‘é€æ¶ˆæ¯é€šçŸ¥ï¼Œè®°å½•é£æ§æ•°æ®ï¼Œä¸‹å•æ—¶ä¹Ÿè¦å‘é€çŸ­ä¿¡ï¼Œè®°å½•é£æ§æ•°æ®ã€‚å› æ­¤æ¶ˆæ¯å‘é€ã€é£æ§æ•°æ®è®°å½•å°±æ˜¯é€šç”¨çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œå› æ­¤å¯ä»¥å°†ä»–ä»¬åˆ†åˆ«æŠ½å–ä¸ºå…¬å…±æœåŠ¡ï¼šæ¶ˆæ¯ä¸­å¿ƒæœåŠ¡ã€é£æ§ç®¡ç†æœåŠ¡ã€‚è¿™æ ·å¯ä»¥æé«˜ä¸šåŠ¡çš„å¤ç”¨æ€§ï¼Œé¿å…é‡å¤å¼€å‘ã€‚åŒæ—¶é€šç”¨ä¸šåŠ¡ä¸€èˆ¬æ¥å£ç¨³å®šæ€§è¾ƒå¼ºï¼Œä¹Ÿä¸ä¼šä½¿æœåŠ¡ä¹‹é—´è¿‡åˆ†è€¦åˆã€‚</p><p>å½“ç„¶ï¼Œç”±äºé»‘é©¬å•†åŸå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼Œå…¶ä¸­çš„çŸ­ä¿¡å‘é€ã€é£æ§ç®¡ç†å¹¶æ²¡æœ‰å®ç°ï¼Œè¿™é‡Œå°±ä¸å†è€ƒè™‘äº†ã€‚è€Œå…¶å®ƒçš„ä¸šåŠ¡æŒ‰ç…§çºµå‘æ‹†åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªå¾®æœåŠ¡ï¼š</p><ul><li>ç”¨æˆ·æœåŠ¡</li><li>å•†å“æœåŠ¡</li><li>è®¢å•æœåŠ¡</li><li>è´­ç‰©è½¦æœåŠ¡</li><li>æ”¯ä»˜æœåŠ¡</li></ul><h2 id="2-3-æ‹†åˆ†è´­ç‰©è½¦ã€å•†å“æœåŠ¡"><a href="#2-3-æ‹†åˆ†è´­ç‰©è½¦ã€å•†å“æœåŠ¡" class="headerlink" title="2.3.æ‹†åˆ†è´­ç‰©è½¦ã€å•†å“æœåŠ¡"></a>2.3.æ‹†åˆ†è´­ç‰©è½¦ã€å•†å“æœåŠ¡</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆæŠŠå•†å“ç®¡ç†åŠŸèƒ½ã€è´­ç‰©è½¦åŠŸèƒ½æŠ½å–ä¸ºä¸¤ä¸ªç‹¬ç«‹æœåŠ¡ã€‚</p><p>ä¸€èˆ¬å¾®æœåŠ¡é¡¹ç›®æœ‰ä¸¤ç§ä¸åŒçš„å·¥ç¨‹ç»“æ„ï¼š</p><ul><li><p>å®Œå…¨è§£è€¦ï¼šæ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½åˆ›å»ºä¸ºä¸€ä¸ªç‹¬ç«‹çš„å·¥ç¨‹ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ä¸åŒçš„å¼€å‘è¯­è¨€æ¥å¼€å‘ï¼Œé¡¹ç›®å®Œå…¨è§£è€¦ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šæœåŠ¡ä¹‹é—´è€¦åˆåº¦ä½</li><li>ç¼ºç‚¹ï¼šæ¯ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹ä»“åº“ï¼Œç®¡ç†èµ·æ¥æ¯”è¾ƒéº»çƒ¦</li></ul></li><li><p>Mavenèšåˆï¼šæ•´ä¸ªé¡¹ç›®ä¸ºä¸€ä¸ªProjectï¼Œç„¶åæ¯ä¸ªå¾®æœåŠ¡æ˜¯å…¶ä¸­çš„ä¸€ä¸ªModule</p><ul><li>ä¼˜ç‚¹ï¼šé¡¹ç›®ä»£ç é›†ä¸­ï¼Œç®¡ç†å’Œè¿ç»´æ–¹ä¾¿ï¼ˆæˆè¯¾ä¹Ÿæ–¹ä¾¿ï¼‰</li><li>ç¼ºç‚¹ï¼šæœåŠ¡ä¹‹é—´è€¦åˆï¼Œç¼–è¯‘æ—¶é—´è¾ƒé•¿</li></ul></li></ul><p><strong>æ³¨æ„</strong>ï¼š</p><p>ä¸ºäº†æˆè¯¾æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨Mavenèšåˆå·¥ç¨‹ï¼Œå¤§å®¶ä»¥ååˆ°äº†ä¼ä¸šï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è‡ªç”±é€‰æ‹©å·¥ç¨‹ç»“æ„ã€‚</p><p>åœ¨hmallçˆ¶å·¥ç¨‹ä¹‹ä¸­ï¼Œæˆ‘å·²ç»æå‰å®šä¹‰äº†SpringBootã€SpringCloudçš„ä¾èµ–ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿æœŸé—´ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨è¿™ä¸ªé¡¹ç›®ä¸­åˆ›å»ºå¾®æœåŠ¡module.</p><h3 id="2-3-1-å•†å“æœåŠ¡"><a href="#2-3-1-å•†å“æœåŠ¡" class="headerlink" title="2.3.1.å•†å“æœåŠ¡"></a>2.3.1.å•†å“æœåŠ¡</h3><p>åœ¨hmallä¸­åˆ›å»ºmoduleï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/cdf89ca11e1c53270b01389f7b1ebc65645325325.png">â€‹</p><p>é€‰æ‹©mavenæ¨¡å—ï¼Œå¹¶è®¾å®šJDKç‰ˆæœ¬ä¸º11ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f1d8c61195d78c26457ee43e8c5ba188645325325.png">â€‹</p><p>å•†å“æ¨¡å—ï¼Œæˆ‘ä»¬èµ·åä¸º<code>item-service</code>â€‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/c94a291360d371ef8a65a884c24c290c645325325.png">â€‹</p><p>å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hmall<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>item-service<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--common--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--web--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ•°æ®åº“--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å•å…ƒæµ‹è¯•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¼–å†™å¯åŠ¨ç±»ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/66d15ce5357a1f5519607ff15d22c30c645325325.png">â€‹</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.item;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.hmall.item.mapper&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ItemApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(ItemApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æ˜¯é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä»<code>hm-service</code>â€‹ä¸­æ‹·è´ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/7e9fbeea3d093f1be60b842175ded454645325325.png">â€‹</p><p>å…¶ä¸­ï¼Œ<code>application.yaml</code>â€‹å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">item-service</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://$&#123;hm.db.host&#125;:3306/hm-item?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;hm.db.pw&#125;</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">update-strategy:</span> <span class="string">not_null</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.hmall:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">HH:mm:ss:SSS</span></span><br><span class="line">  <span class="attr">file:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">&quot;logs/$&#123;spring.application.name&#125;&quot;</span></span><br><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">openapi:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">å•†å“æœåŠ¡æ¥å£æ–‡æ¡£</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;ä¿¡æ¯&quot;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">zhanghuyi@itcast.cn</span></span><br><span class="line">    <span class="attr">concat:</span> <span class="string">è™å“¥</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://www.itcast.cn</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">v1.0.0</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">group-name:</span> <span class="string">default</span></span><br><span class="line">        <span class="attr">api-rule:</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">api-rule-resources:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">com.hmall.item.controller</span></span><br></pre></td></tr></table></figure><p>å‰©ä¸‹çš„<code>application-dev.yaml</code>â€‹å’Œ<code>application-local.yaml</code>â€‹ç›´æ¥ä»hm-serviceæ‹·è´å³å¯ã€‚</p><p>ç„¶åæ‹·è´<code>hm-service</code>â€‹ä¸­ä¸å•†å“ç®¡ç†æœ‰å…³çš„ä»£ç åˆ°<code>item-service</code>â€‹ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/c56f2fc6e276c4c86779252535133e4e645325325.png">â€‹</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªåœ°æ–¹çš„ä»£ç éœ€è¦æ”¹åŠ¨ï¼Œå°±æ˜¯<code>ItemServiceImpl</code>â€‹ä¸­çš„<code>deductStock</code>â€‹æ–¹æ³•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/ed9331ee06e6e7861b932200f69da512645325325.png">â€‹<img src="https://i0.hdslb.com/bfs/article/90846548113768fc0dbee9f1a337ee63645325325.png">â€‹</p><p><strong>æ”¹åŠ¨å‰</strong></p><p><strong>æ”¹åŠ¨å</strong></p><p>è¿™ä¹Ÿæ˜¯å› ä¸ºItemMapperçš„æ‰€åœ¨åŒ…å‘ç”Ÿäº†å˜åŒ–ï¼Œå› æ­¤è¿™é‡Œä»£ç å¿…é¡»ä¿®æ”¹åŒ…è·¯å¾„ã€‚</p><p>æœ€åï¼Œè¿˜è¦å¯¼å…¥æ•°æ®åº“è¡¨ã€‚é»˜è®¤çš„æ•°æ®åº“è¿æ¥çš„æ˜¯è™šæ‹Ÿæœºï¼Œåœ¨ä½ dockeræ•°æ®åº“æ‰§è¡Œè¯¾å‰èµ„æ–™æä¾›çš„SQLæ–‡ä»¶ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/6434f3abe936aa89344df8f4f99cd7b7645325325.png">â€‹</p><p>æœ€ç»ˆï¼Œä¼šåœ¨æ•°æ®åº“åˆ›å»ºä¸€ä¸ªåä¸ºhm-itemçš„databaseï¼Œå°†æ¥çš„æ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½ä¼šæœ‰è‡ªå·±çš„ä¸€ä¸ªdatabaseï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/102742d9b156069ca0b9c8fc54c885a4645325325.png">â€‹</p><p><strong>æ³¨æ„</strong>ï¼šåœ¨ä¼ä¸šå¼€å‘çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½åº”è¯¥æœ‰è‡ªå·±çš„<strong>ç‹¬ç«‹æ•°æ®åº“æœåŠ¡</strong>ï¼Œè€Œä¸ä»…ä»…æ˜¯databaseï¼Œè¯¾å ‚æˆ‘ä»¬ç”¨databaseæ¥ä»£æ›¿ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥å¯åŠ¨æµ‹è¯•äº†ï¼Œåœ¨å¯åŠ¨å‰æˆ‘ä»¬è¦é…ç½®ä¸€ä¸‹å¯åŠ¨é¡¹ï¼Œè®©é»˜è®¤æ¿€æ´»çš„é…ç½®ä¸º<code>local</code>â€‹è€Œä¸æ˜¯<code>dev</code>â€‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/9a0507e113d7d9e31933874154ed8b12645325325.png">â€‹</p><p>åœ¨æ‰“å¼€çš„ç¼–è¾‘æ¡†å¡«å†™<code>active profiles</code>:</p><p><img src="https://i0.hdslb.com/bfs/article/d72de2ad797db9b8a48ef9b33f2d72f2645325325.png">â€‹</p><p>æ¥ç€ï¼Œå¯åŠ¨<code>item-service</code>â€‹ï¼Œè®¿é—®å•†å“å¾®æœåŠ¡çš„swaggeræ¥å£æ–‡æ¡£ï¼š<a href="http://localhost:8081/doc.html">http://localhost:8081/doc.html</a></p><p>ç„¶åæµ‹è¯•å…¶ä¸­çš„æ ¹æ®idæ‰¹é‡æŸ¥è¯¢å•†å“è¿™ä¸ªæ¥å£ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f5daa6cecd8e3239b0648b335095ee96645325325.png">â€‹</p><p>æµ‹è¯•å‚æ•°ï¼š100002672302,100002624500,100002533430ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/1bd6ca6fc9778c33fccf78481dc9c45d645325325.png">â€‹</p><p>è¯´æ˜å•†å“å¾®æœåŠ¡æŠ½å–æˆåŠŸäº†ã€‚</p><h3 id="2-3-2-è´­ç‰©è½¦æœåŠ¡"><a href="#2-3-2-è´­ç‰©è½¦æœåŠ¡" class="headerlink" title="2.3.2.è´­ç‰©è½¦æœåŠ¡"></a>2.3.2.è´­ç‰©è½¦æœåŠ¡</h3><p>ä¸å•†å“æœåŠ¡ç±»ä¼¼ï¼Œåœ¨hmallä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„<code>module</code>â€‹ï¼Œèµ·åä¸º<code>cart-service</code>:</p><p><img src="https://i0.hdslb.com/bfs/article/09231a50430fd4884e849342a4ced3fe645325325.png">â€‹</p><p>ç„¶åæ˜¯ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hmall<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cart-service<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--common--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--web--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ•°æ®åº“--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å•å…ƒæµ‹è¯•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ˜¯å¯åŠ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.cart;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.hmall.cart.mapper&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(CartApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæ˜¯é…ç½®æ–‡ä»¶ï¼ŒåŒæ ·å¯ä»¥æ‹·è´è‡ª<code>item-service</code>â€‹ï¼Œä¸è¿‡å…¶ä¸­çš„<code>application.yaml</code>â€‹éœ€è¦ä¿®æ”¹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cart-service</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://$&#123;hm.db.host&#125;:3306/hm-cart?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;hm.db.pw&#125;</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">update-strategy:</span> <span class="string">not_null</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.hmall:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">HH:mm:ss:SSS</span></span><br><span class="line">  <span class="attr">file:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">&quot;logs/$&#123;spring.application.name&#125;&quot;</span></span><br><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">openapi:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">å•†å“æœåŠ¡æ¥å£æ–‡æ¡£</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;ä¿¡æ¯&quot;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">zhanghuyi@itcast.cn</span></span><br><span class="line">    <span class="attr">concat:</span> <span class="string">è™å“¥</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://www.itcast.cn</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">v1.0.0</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">group-name:</span> <span class="string">default</span></span><br><span class="line">        <span class="attr">api-rule:</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">api-rule-resources:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">com.hmall.cart.controller</span></span><br></pre></td></tr></table></figure><p>æœ€åï¼ŒæŠŠhm-serviceä¸­çš„ä¸è´­ç‰©è½¦æœ‰å…³åŠŸèƒ½æ‹·è´è¿‡æ¥ï¼Œæœ€ç»ˆçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f3b59ce56c84d4013c09cb7ea8d41276645325325.png">â€‹</p><p>ç‰¹åˆ«æ³¨æ„çš„æ˜¯<code>com.hmall.cart.service.impl.CartServiceImpl</code>â€‹ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦å¤„ç†ï¼š</p><ul><li>éœ€è¦<strong>è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯</strong>ï¼Œä½†ç™»å½•æ ¡éªŒåŠŸèƒ½ç›®å‰æ²¡æœ‰å¤åˆ¶è¿‡æ¥ï¼Œå…ˆå†™æ­»å›ºå®šç”¨æˆ·id</li><li>æŸ¥è¯¢è´­ç‰©è½¦æ—¶éœ€è¦<strong>æŸ¥è¯¢å•†å“ä¿¡æ¯</strong>ï¼Œè€Œå•†å“ä¿¡æ¯ä¸åœ¨å½“å‰æœåŠ¡ï¼Œéœ€è¦å…ˆå°†è¿™éƒ¨åˆ†ä»£ç æ³¨é‡Š</li></ul><p><img src="https://i0.hdslb.com/bfs/article/d8b51da67b74ff32a02ec4e582a88457645325325.png">â€‹</p><p>æˆ‘ä»¬å¯¹è¿™éƒ¨åˆ†ä»£ç åšå¦‚ä¸‹ä¿®æ”¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.cart.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.StrUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.hmall.cart.domain.dto.CartFormDTO;</span><br><span class="line"><span class="keyword">import</span> com.hmall.cart.domain.po.Cart;</span><br><span class="line"><span class="keyword">import</span> com.hmall.cart.domain.vo.CartVO;</span><br><span class="line"><span class="keyword">import</span> com.hmall.cart.mapper.CartMapper;</span><br><span class="line"><span class="keyword">import</span> com.hmall.cart.service.ICartService;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.exception.BizIllegalException;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.utils.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.utils.CollUtils;</span><br><span class="line"><span class="keyword">import</span> com.hmall.common.utils.UserContext;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * è®¢å•è¯¦æƒ…è¡¨ æœåŠ¡å®ç°ç±»</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> è™å“¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-05-05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;CartMapper, Cart&gt; <span class="keyword">implements</span> <span class="title class_">ICartService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// private final IItemService itemService;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addItem2Cart</span><span class="params">(CartFormDTO cartFormDTO)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.è·å–ç™»å½•ç”¨æˆ·</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> UserContext.getUser();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (checkItemExists(cartFormDTO.getItemId(), userId)) &#123;</span><br><span class="line">            <span class="comment">// 2.1.å­˜åœ¨ï¼Œåˆ™æ›´æ–°æ•°é‡</span></span><br><span class="line">            baseMapper.updateNum(cartFormDTO.getItemId(), userId);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.2.ä¸å­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡è´­ç‰©è½¦æ•°é‡</span></span><br><span class="line">        checkCartsFull(userId);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.æ–°å¢è´­ç‰©è½¦æ¡ç›®</span></span><br><span class="line">        <span class="comment">// 3.1.è½¬æ¢PO</span></span><br><span class="line">        <span class="type">Cart</span> <span class="variable">cart</span> <span class="operator">=</span> BeanUtils.copyBean(cartFormDTO, Cart.class);</span><br><span class="line">        <span class="comment">// 3.2.ä¿å­˜å½“å‰ç”¨æˆ·</span></span><br><span class="line">        cart.setUserId(userId);</span><br><span class="line">        <span class="comment">// 3.3.ä¿å­˜åˆ°æ•°æ®åº“</span></span><br><span class="line">        save(cart);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;CartVO&gt; <span class="title function_">queryMyCarts</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 1.æŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦åˆ—è¡¨</span></span><br><span class="line">        List&lt;Cart&gt; carts = lambdaQuery().eq(Cart::getUserId, <span class="number">1L</span> <span class="comment">/*TODO UserContext.getUser()*/</span>).list();</span><br><span class="line">        <span class="keyword">if</span> (CollUtils.isEmpty(carts)) &#123;</span><br><span class="line">            <span class="keyword">return</span> CollUtils.emptyList();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.è½¬æ¢VO</span></span><br><span class="line">        List&lt;CartVO&gt; vos = BeanUtils.copyList(carts, CartVO.class);</span><br><span class="line">        <span class="comment">// 3.å¤„ç†VOä¸­çš„å•†å“ä¿¡æ¯</span></span><br><span class="line">        handleCartItems(vos);</span><br><span class="line">        <span class="comment">// 4.è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> vos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">handleCartItems</span><span class="params">(List&lt;CartVO&gt; vos)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.è·å–å•†å“id TODO å¤„ç†å•†å“ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">/*Set&lt;Long&gt; itemIds = vos.stream().map(CartVO::getItemId).collect(Collectors.toSet());</span></span><br><span class="line"><span class="comment">        // 2.æŸ¥è¯¢å•†å“</span></span><br><span class="line"><span class="comment">        List&lt;ItemDTO&gt; items = itemService.queryItemByIds(itemIds);</span></span><br><span class="line"><span class="comment">        if (CollUtils.isEmpty(items)) &#123;</span></span><br><span class="line"><span class="comment">            throw new BadRequestException(&quot;è´­ç‰©è½¦ä¸­å•†å“ä¸å­˜åœ¨ï¼&quot;);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        // 3.è½¬ä¸º id åˆ° itemçš„map</span></span><br><span class="line"><span class="comment">        Map&lt;Long, ItemDTO&gt; itemMap = items.stream().collect(Collectors.toMap(ItemDTO::getId, Function.identity()));</span></span><br><span class="line"><span class="comment">        // 4.å†™å…¥vo</span></span><br><span class="line"><span class="comment">        for (CartVO v : vos) &#123;</span></span><br><span class="line"><span class="comment">            ItemDTO item = itemMap.get(v.getItemId());</span></span><br><span class="line"><span class="comment">            if (item == null) &#123;</span></span><br><span class="line"><span class="comment">                continue;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">            v.setNewPrice(item.getPrice());</span></span><br><span class="line"><span class="comment">            v.setStatus(item.getStatus());</span></span><br><span class="line"><span class="comment">            v.setStock(item.getStock());</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeByItemIds</span><span class="params">(Collection&lt;Long&gt; itemIds)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.æ„å»ºåˆ é™¤æ¡ä»¶ï¼ŒuserIdå’ŒitemId</span></span><br><span class="line">        QueryWrapper&lt;Cart&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Cart&gt;();</span><br><span class="line">        queryWrapper.lambda()</span><br><span class="line">                .eq(Cart::getUserId, UserContext.getUser())</span><br><span class="line">                .in(Cart::getItemId, itemIds);</span><br><span class="line">        <span class="comment">// 2.åˆ é™¤</span></span><br><span class="line">        remove(queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkCartsFull</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> lambdaQuery().eq(Cart::getUserId, userId).count();</span><br><span class="line">        <span class="keyword">if</span> (count &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BizIllegalException</span>(StrUtil.format(<span class="string">&quot;ç”¨æˆ·è´­ç‰©è½¦è¯¾ç¨‹ä¸èƒ½è¶…è¿‡&#123;&#125;&quot;</span>, <span class="number">10</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">checkItemExists</span><span class="params">(Long itemId, Long userId)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> lambdaQuery()</span><br><span class="line">                .eq(Cart::getUserId, userId)</span><br><span class="line">                .eq(Cart::getItemId, itemId)</span><br><span class="line">                .count();</span><br><span class="line">        <span class="keyword">return</span> count &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œè¿˜æ˜¯è¦å¯¼å…¥æ•°æ®åº“è¡¨ï¼Œåœ¨æœ¬åœ°æ•°æ®åº“ç›´æ¥æ‰§è¡Œè¯¾å‰èµ„æ–™å¯¹åº”çš„SQLæ–‡ä»¶ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/319ddae2ed2da22937f69639e68d25ac645325325.png">â€‹</p><p>åœ¨æ•°æ®åº“ä¸­ä¼šå‡ºç°åä¸º<code>hm-cart</code>â€‹çš„<code>database</code>â€‹ï¼Œä»¥åŠå…¶ä¸­çš„<code>cart</code>â€‹è¡¨ï¼Œä»£è¡¨è´­ç‰©è½¦ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/0003f50d13be29b3dbd1a8b521018742645325325.png">â€‹</p><p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥æµ‹è¯•äº†ã€‚ä¸è¿‡åœ¨å¯åŠ¨å‰ï¼ŒåŒæ ·è¦é…ç½®å¯åŠ¨é¡¹çš„<code>active profile</code>â€‹ä¸º<code>local</code>â€‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e35d660e7504baeac818e7ab56df4a85645325325.png">â€‹</p><p>ç„¶åå¯åŠ¨<code>CartApplication</code>â€‹ï¼Œè®¿é—®swaggeræ–‡æ¡£é¡µé¢ï¼š<a href="http://localhost:8082/doc.html">http://localhost:8082/doc.html</a></p><p>æˆ‘ä»¬æµ‹è¯•å…¶ä¸­çš„<code>æŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦åˆ—è¡¨</code>â€‹æ¥å£ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/293a56c57e3f4a9eae51d3ed7440b211645325325.png">â€‹</p><p>æ— éœ€å¡«å†™å‚æ•°ï¼Œç›´æ¥è®¿é—®ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/80836175ccd08eeee6187750c442162a645325325.png">â€‹</p><p>æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œå…¶ä¸­ä¸å•†å“æœ‰å…³çš„å‡ ä¸ªå­—æ®µå€¼éƒ½ä¸ºç©ºï¼è¿™å°±æ˜¯å› ä¸ºåˆšæ‰æˆ‘ä»¬æ³¨é‡Šæ‰äº†æŸ¥è¯¢è´­ç‰©è½¦æ—¶ï¼ŒæŸ¥è¯¢å•†å“ä¿¡æ¯çš„ç›¸å…³ä»£ç ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åœ¨<code>cart-service</code>â€‹æœåŠ¡ä¸­å®ç°å¯¹<code>item-service</code>â€‹æœåŠ¡çš„æŸ¥è¯¢å‘¢ï¼Ÿ</p><h2 id="2-4-æœåŠ¡è°ƒç”¨"><a href="#2-4-æœåŠ¡è°ƒç”¨" class="headerlink" title="2.4.æœåŠ¡è°ƒç”¨"></a>2.4.æœåŠ¡è°ƒç”¨</h2><p>åœ¨æ‹†åˆ†çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šå°±æ˜¯è´­ç‰©è½¦ä¸šåŠ¡ä¸­éœ€è¦æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œä½†å•†å“ä¿¡æ¯æŸ¥è¯¢çš„é€»è¾‘å…¨éƒ¨è¿ç§»åˆ°äº†<code>item-service</code>â€‹æœåŠ¡ï¼Œå¯¼è‡´æˆ‘ä»¬æ— æ³•æŸ¥è¯¢ã€‚</p><p>æœ€ç»ˆç»“æœå°±æ˜¯æŸ¥è¯¢åˆ°çš„è´­ç‰©è½¦æ•°æ®ä¸å®Œæ•´ï¼Œå› æ­¤è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±å¿…é¡»æ”¹é€ å…¶ä¸­çš„ä»£ç ï¼ŒæŠŠåŸæœ¬æœ¬åœ°æ–¹æ³•è°ƒç”¨ï¼Œæ”¹é€ æˆè·¨å¾®æœåŠ¡çš„è¿œç¨‹è°ƒç”¨ï¼ˆRPCï¼Œå³<strong>R</strong>emote <strong>P</strong>roduce <strong>C</strong>allï¼‰ã€‚</p><p>å› æ­¤ï¼Œç°åœ¨æŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨çš„æµç¨‹å˜æˆäº†è¿™æ ·ï¼š</p><p>æš‚æ—¶æ— æ³•åœ¨é£ä¹¦æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹</p><p>ä»£ç ä¸­éœ€è¦å˜åŒ–çš„å°±æ˜¯è¿™ä¸€æ­¥ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/47821720978cfc22cd728fbbfb9b489f645325325.png">â€‹</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šæˆ‘ä»¬è¯¥å¦‚ä½•è·¨æœåŠ¡è°ƒç”¨ï¼Œå‡†ç¡®çš„è¯´ï¼Œå¦‚ä½•åœ¨<code>cart-service</code>â€‹ä¸­è·å–<code>item-service</code>â€‹æœåŠ¡ä¸­çš„æä¾›çš„å•†å“æ•°æ®å‘¢ï¼Ÿ</p><p>å¤§å®¶æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬ä»¥å‰æœ‰æ²¡æœ‰å®ç°è¿‡ç±»ä¼¼çš„è¿œç¨‹æŸ¥è¯¢çš„åŠŸèƒ½å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæˆ‘ä»¬å‰ç«¯å‘æœåŠ¡ç«¯æŸ¥è¯¢æ•°æ®ï¼Œå…¶å®å°±æ˜¯ä»æµè§ˆå™¨è¿œç¨‹æŸ¥è¯¢æœåŠ¡ç«¯æ•°æ®ã€‚æ¯”å¦‚æˆ‘ä»¬åˆšæ‰é€šè¿‡Swaggeræµ‹è¯•å•†å“æŸ¥è¯¢æ¥å£ï¼Œå°±æ˜¯å‘<code>http://localhost:8081/items</code>â€‹è¿™ä¸ªæ¥å£å‘èµ·çš„è¯·æ±‚ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/900290c9da05589886cedbd05f4f1c00645325325.png">â€‹</p><p>è€Œè¿™ç§æŸ¥è¯¢å°±æ˜¯é€šè¿‡httpè¯·æ±‚çš„æ–¹å¼æ¥å®Œæˆçš„ï¼Œä¸ä»…ä»…å¯ä»¥å®ç°è¿œç¨‹æŸ¥è¯¢ï¼Œè¿˜å¯ä»¥å®ç°æ–°å¢ã€åˆ é™¤ç­‰å„ç§è¿œç¨‹è¯·æ±‚ã€‚</p><p>å‡å¦‚æˆ‘ä»¬åœ¨cart-serviceä¸­èƒ½æ¨¡æ‹Ÿæµè§ˆå™¨ï¼Œå‘é€httpè¯·æ±‚åˆ°item-serviceï¼Œæ˜¯ä¸æ˜¯å°±å®ç°äº†è·¨å¾®æœåŠ¡çš„<strong>è¿œç¨‹è°ƒç”¨</strong>äº†å‘¢ï¼Ÿ</p><p>é‚£ä¹ˆï¼šæˆ‘ä»¬è¯¥å¦‚ä½•ç”¨Javaä»£ç å‘é€Httpçš„è¯·æ±‚å‘¢ï¼Ÿ</p><h3 id="2-4-1-RestTemplate"><a href="#2-4-1-RestTemplate" class="headerlink" title="2.4.1.RestTemplate"></a>2.4.1.RestTemplate</h3><p>Springç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªRestTemplateçš„APIï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°Httpè¯·æ±‚çš„å‘é€ã€‚</p><blockquote><p>org.springframework.web.client public class RestTemplate</p><p>extends InterceptingHttpAccessor</p><p>implements RestOperations</p><p>åŒæ­¥å®¢æˆ·ç«¯æ‰§è¡ŒHTTPè¯·æ±‚ï¼Œåœ¨åº•å±‚HTTPå®¢æˆ·ç«¯åº“(å¦‚JDK HttpURLConnectionã€Apache HttpComponentsç­‰)ä¸Šå…¬å¼€ä¸€ä¸ªç®€å•çš„æ¨¡æ¿æ–¹æ³•APIã€‚RestTemplateé€šè¿‡HTTPæ–¹æ³•ä¸ºå¸¸è§åœºæ™¯æä¾›äº†æ¨¡æ¿ï¼Œæ­¤å¤–è¿˜æä¾›äº†æ”¯æŒä¸å¤ªå¸¸è§æƒ…å†µçš„é€šç”¨äº¤æ¢å’Œæ‰§è¡Œæ–¹æ³•ã€‚ RestTemplateé€šå¸¸ç”¨ä½œå…±äº«ç»„ä»¶ã€‚ç„¶è€Œï¼Œå®ƒçš„é…ç½®ä¸æ”¯æŒå¹¶å‘ä¿®æ”¹ï¼Œå› æ­¤å®ƒçš„é…ç½®é€šå¸¸æ˜¯åœ¨å¯åŠ¨æ—¶å‡†å¤‡çš„ã€‚å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥åœ¨å¯åŠ¨æ—¶åˆ›å»ºå¤šä¸ªä¸åŒé…ç½®çš„RestTemplateå®ä¾‹ã€‚å¦‚æœè¿™äº›å®ä¾‹éœ€è¦å…±äº«HTTPå®¢æˆ·ç«¯èµ„æºï¼Œå®ƒä»¬å¯ä»¥ä½¿ç”¨ç›¸åŒçš„åº•å±‚ClientHttpRequestFactoryã€‚ æ³¨æ„:ä»5.0å¼€å§‹ï¼Œè¿™ä¸ªç±»å¤„äºç»´æŠ¤æ¨¡å¼ï¼Œåªæœ‰å¯¹æ›´æ”¹å’Œé”™è¯¯çš„å°è¯·æ±‚æ‰ä¼šè¢«æ¥å—ã€‚è¯·è€ƒè™‘ä½¿ç”¨org.springframework.web.react .client. webclientï¼Œå®ƒæœ‰æ›´ç°ä»£çš„APIï¼Œæ”¯æŒåŒæ­¥ã€å¼‚æ­¥å’Œæµåœºæ™¯ã€‚</p><p>è‡ª: 3.0 å‚è§: HttpMessageConverter, RequestCallback, ResponseExtractor, ResponseErrorHandler</p></blockquote><p>å…¶ä¸­æä¾›äº†å¤§é‡çš„æ–¹æ³•ï¼Œæ–¹ä¾¿æˆ‘ä»¬å‘é€Httpè¯·æ±‚ï¼Œä¾‹å¦‚ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/7bb14dd7e3c7141bfb48adc48dd8aed8645325325.png">â€‹</p><p>å¯ä»¥çœ‹åˆ°å¸¸è§çš„Getã€Postã€Putã€Deleteè¯·æ±‚éƒ½æ”¯æŒï¼Œå¦‚æœè¯·æ±‚å‚æ•°æ¯”è¾ƒå¤æ‚ï¼Œè¿˜å¯ä»¥ä½¿ç”¨exchangeæ–¹æ³•æ¥æ„é€ è¯·æ±‚ã€‚</p><p>æˆ‘ä»¬åœ¨<code>cart-service</code>â€‹æœåŠ¡ä¸­å®šä¹‰ä¸€ä¸ªé…ç½®ç±»ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/4693a294b702aa6a81d3cb8adc85c988645325325.png">â€‹</p><p>å…ˆå°†RestTemplateæ³¨å†Œä¸ºä¸€ä¸ªBeanï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.cart.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RemoteCallConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">restTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-2-è¿œç¨‹è°ƒç”¨"><a href="#2-4-2-è¿œç¨‹è°ƒç”¨" class="headerlink" title="2.4.2.è¿œç¨‹è°ƒç”¨"></a>2.4.2.è¿œç¨‹è°ƒç”¨</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¿®æ”¹<code>cart-service</code>â€‹ä¸­çš„<code>com.hmall.cart.service.impl.CartServiceImpl</code>â€‹çš„<code>handleCartItems</code>â€‹æ–¹æ³•ï¼Œå‘é€httpè¯·æ±‚åˆ°<code>item-service</code>â€‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/5093fcae8d5af78eb35bcc19fd22180f645325325.png">â€‹</p><p>å¯ä»¥çœ‹åˆ°ï¼Œ<span data-type="text" style="color: var(--b3-font-color9);">åˆ©ç”¨RestTemplateå‘é€httpè¯·æ±‚ä¸å‰ç«¯ajaxå‘é€è¯·æ±‚éå¸¸ç›¸ä¼¼</span>ï¼Œéƒ½åŒ…å«å››éƒ¨åˆ†ä¿¡æ¯ï¼š</p><ul><li>â‘  è¯·æ±‚æ–¹å¼</li><li>â‘¡ è¯·æ±‚è·¯å¾„</li><li>â‘¢ è¯·æ±‚å‚æ•°</li><li>â‘£  è¿”å›å€¼ç±»å‹</li></ul><p><code>handleCartItems</code>â€‹æ–¹æ³•çš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">handleCartItems</span><span class="params">(List&lt;CartVO&gt; vos)</span> &#123;</span><br><span class="line">    <span class="comment">// TODO 1.è·å–å•†å“id</span></span><br><span class="line">    Set&lt;Long&gt; itemIds = vos.stream().map(CartVO::getItemId).collect(Collectors.toSet());</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢å•†å“</span></span><br><span class="line">    <span class="comment">// List&lt;ItemDTO&gt; items = itemService.queryItemByIds(itemIds);</span></span><br><span class="line">    <span class="comment">// 2.1.åˆ©ç”¨RestTemplateå‘èµ·httpè¯·æ±‚ï¼Œå¾—åˆ°httpçš„å“åº”</span></span><br><span class="line">    ResponseEntity&lt;List&lt;ItemDTO&gt;&gt; response = restTemplate.exchange(</span><br><span class="line">            <span class="string">&quot;http://localhost:8081/items?ids=&#123;ids&#125;&quot;</span>,</span><br><span class="line">            HttpMethod.GET,</span><br><span class="line">            <span class="literal">null</span>,</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">ParameterizedTypeReference</span>&lt;List&lt;ItemDTO&gt;&gt;() &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            Map.of(<span class="string">&quot;ids&quot;</span>, CollUtil.join(itemIds, <span class="string">&quot;,&quot;</span>))</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// 2.2.è§£æå“åº”</span></span><br><span class="line">    <span class="keyword">if</span>(!response.getStatusCode().is2xxSuccessful())&#123;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢å¤±è´¥ï¼Œç›´æ¥ç»“æŸ</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    List&lt;ItemDTO&gt; items = response.getBody();</span><br><span class="line">    <span class="keyword">if</span> (CollUtils.isEmpty(items)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3.è½¬ä¸º id åˆ° itemçš„map</span></span><br><span class="line">    Map&lt;Long, ItemDTO&gt; itemMap = items.stream().collect(Collectors.toMap(ItemDTO::getId, Function.identity()));</span><br><span class="line">    <span class="comment">// 4.å†™å…¥vo</span></span><br><span class="line">    <span class="keyword">for</span> (CartVO v : vos) &#123;</span><br><span class="line">        <span class="type">ItemDTO</span> <span class="variable">item</span> <span class="operator">=</span> itemMap.get(v.getItemId());</span><br><span class="line">        <span class="keyword">if</span> (item == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        v.setNewPrice(item.getPrice());</span><br><span class="line">        v.setStatus(item.getStatus());</span><br><span class="line">        v.setStock(item.getStock());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œç°åœ¨é‡å¯<code>cart-service</code>â€‹ï¼Œå†æ¬¡æµ‹è¯•æŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦åˆ—è¡¨æ¥å£ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e81fd374e63142c6ad62be2d2a1b0026645325325.png">â€‹</p><p>å¯ä»¥å‘ç°ï¼Œæ‰€æœ‰å•†å“ç›¸å…³æ•°æ®éƒ½å·²ç»æŸ¥è¯¢åˆ°äº†ã€‚</p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<code>item-service</code>â€‹æä¾›äº†æŸ¥è¯¢æ¥å£ï¼Œ<code>cart-service</code>â€‹åˆ©ç”¨Httpè¯·æ±‚è°ƒç”¨è¯¥æ¥å£ã€‚å› æ­¤<code>item-service</code>â€‹å¯ä»¥ç§°ä¸ºæœåŠ¡çš„æä¾›è€…ï¼Œè€Œ<code>cart-service</code>â€‹åˆ™ç§°ä¸ºæœåŠ¡çš„æ¶ˆè´¹è€…æˆ–æœåŠ¡è°ƒç”¨è€…ã€‚</p><h2 id="2-5-æ€»ç»“"><a href="#2-5-æ€»ç»“" class="headerlink" title="2.5.æ€»ç»“"></a>2.5.æ€»ç»“</h2><p>ä»€ä¹ˆæ—¶å€™éœ€è¦æ‹†åˆ†å¾®æœåŠ¡ï¼Ÿ</p><ul><li>å¦‚æœæ˜¯åˆ›ä¸šå‹å…¬å¸ï¼Œæœ€å¥½å…ˆç”¨å•ä½“æ¶æ„å¿«é€Ÿè¿­ä»£å¼€å‘ï¼ŒéªŒè¯å¸‚åœºè¿ä½œæ¨¡å‹ï¼Œå¿«é€Ÿè¯•é”™ã€‚å½“ä¸šåŠ¡è·‘é€šä»¥åï¼Œéšç€ä¸šåŠ¡è§„æ¨¡æ‰©å¤§ã€äººå‘˜è§„æ¨¡å¢åŠ ï¼Œå†è€ƒè™‘æ‹†åˆ†å¾®æœåŠ¡ã€‚</li><li>å¦‚æœæ˜¯å¤§å‹ä¼ä¸šï¼Œæœ‰å……è¶³çš„èµ„æºï¼Œå¯ä»¥åœ¨é¡¹ç›®å¼€å§‹ä¹‹åˆå°±æ­å»ºå¾®æœåŠ¡æ¶æ„ã€‚</li></ul><p>â€</p><p>ğŸ¦‰ å¦‚ä½•æ‹†åˆ†ï¼Ÿ</p><ul><li>é¦–å…ˆè¦åšåˆ°é«˜å†…èšã€ä½è€¦åˆ</li><li>ä»æ‹†åˆ†æ–¹å¼æ¥è¯´ï¼Œæœ‰æ¨ªå‘æ‹†åˆ†å’Œçºµå‘æ‹†åˆ†ä¸¤ç§ã€‚çºµå‘å°±æ˜¯æŒ‰ç…§ä¸šåŠ¡åŠŸèƒ½æ¨¡å—ï¼Œæ¨ªå‘åˆ™æ˜¯æ‹†åˆ†é€šç”¨æ€§ä¸šåŠ¡ï¼Œæé«˜å¤ç”¨æ€§</li></ul><p>â€</p><p>æœåŠ¡æ‹†åˆ†ä¹‹åï¼Œä¸å¯é¿å…çš„ä¼šå‡ºç°è·¨å¾®æœåŠ¡çš„ä¸šåŠ¡ï¼Œæ­¤æ—¶å¾®æœåŠ¡ä¹‹é—´å°±éœ€è¦è¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚å¾®æœåŠ¡ä¹‹é—´çš„è¿œç¨‹è°ƒç”¨è¢«ç§°ä¸ºRPCï¼Œå³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚RPCçš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š</p><ul><li>åŸºäºHttpåè®®</li><li>åŸºäºDubboåè®®</li></ul><p>æˆ‘ä»¬è¯¾å ‚ä¸­ä½¿ç”¨çš„æ˜¯Httpæ–¹å¼ï¼Œè¿™ç§æ–¹å¼ä¸å…³å¿ƒæœåŠ¡æä¾›è€…çš„å…·ä½“æŠ€æœ¯å®ç°ï¼Œåªè¦å¯¹å¤–æš´éœ²Httpæ¥å£å³å¯ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡çš„éœ€è¦ã€‚</p><blockquote><p>Javaå‘é€httpè¯·æ±‚å¯ä»¥ä½¿ç”¨Springæä¾›çš„RestTemplateï¼Œä½¿ç”¨çš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li><p>æ³¨å†ŒRestTemplateåˆ°Springå®¹å™¨</p></li><li><p>è°ƒç”¨RestTemplateçš„APIå‘é€è¯·æ±‚ï¼Œå¸¸è§æ–¹æ³•æœ‰ï¼š</p><ul><li>getForObjectï¼šå‘é€Getè¯·æ±‚å¹¶è¿”å›æŒ‡å®šç±»å‹å¯¹è±¡</li><li>PostForObjectï¼šå‘é€Postè¯·æ±‚å¹¶è¿”å›æŒ‡å®šç±»å‹å¯¹è±¡</li><li>putï¼šå‘é€PUTè¯·æ±‚</li><li>deleteï¼šå‘é€Deleteè¯·æ±‚</li><li>exchangeï¼šå‘é€ä»»æ„ç±»å‹è¯·æ±‚ï¼Œè¿”å›ResponseEntity</li></ul></li></ul></blockquote><h1 id="3-æœåŠ¡æ³¨å†Œå’Œå‘ç°"><a href="#3-æœåŠ¡æ³¨å†Œå’Œå‘ç°" class="headerlink" title="3.æœåŠ¡æ³¨å†Œå’Œå‘ç°"></a>3.æœåŠ¡æ³¨å†Œå’Œå‘ç°</h1><p>åœ¨ä¸Šä¸€ç« æˆ‘ä»¬å®ç°äº†å¾®æœåŠ¡æ‹†åˆ†ï¼Œå¹¶ä¸”é€šè¿‡Httpè¯·æ±‚å®ç°äº†è·¨å¾®æœåŠ¡çš„è¿œç¨‹è°ƒç”¨â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦.0.0</p><p>ä¸è¿‡è¿™ç§æ‰‹åŠ¨å‘é€Httpè¯·æ±‚çš„æ–¹å¼å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚</p><p>è¯•æƒ³ä¸€ä¸‹ï¼Œå‡å¦‚å•†å“å¾®æœåŠ¡è¢«è°ƒç”¨è¾ƒå¤šï¼Œä¸ºäº†åº”å¯¹æ›´é«˜çš„å¹¶å‘ï¼Œæˆ‘ä»¬è¿›è¡Œäº†å¤šå®ä¾‹éƒ¨ç½²ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/4cc1fb203710e89361b0b7a0f9cce722645325325.png" alt="image-20240903140930-zxlkmnm">â€‹</p><p>æ­¤æ—¶ï¼Œæ¯ä¸ª<code>item-service</code>â€‹çš„å®ä¾‹å…¶IPæˆ–ç«¯å£ä¸åŒï¼Œé—®é¢˜æ¥äº†ï¼š</p><ul><li>item-serviceè¿™ä¹ˆå¤šå®ä¾‹ï¼Œcart-serviceå¦‚ä½•çŸ¥é“æ¯ä¸€ä¸ªå®ä¾‹çš„åœ°å€ï¼Ÿ</li><li>httpè¯·æ±‚è¦å†™urlåœ°å€ï¼Œ<code>cart-service</code>â€‹æœåŠ¡åˆ°åº•è¯¥è°ƒç”¨å“ªä¸ªå®ä¾‹å‘¢ï¼Ÿ</li><li>å¦‚æœåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŸä¸€ä¸ª<code>item-service</code>â€‹å®ä¾‹å®•æœºï¼Œ<code>cart-service</code>â€‹ä¾ç„¶åœ¨è°ƒç”¨è¯¥æ€ä¹ˆåŠï¼Ÿ</li><li>å¦‚æœå¹¶å‘å¤ªé«˜ï¼Œ<code>item-service</code>â€‹ä¸´æ—¶å¤šéƒ¨ç½²äº†Nå°å®ä¾‹ï¼Œ<code>cart-service</code>â€‹å¦‚ä½•çŸ¥é“æ–°å®ä¾‹çš„åœ°å€ï¼Ÿ</li></ul><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå°±å¿…é¡»å¼•å…¥æ³¨å†Œä¸­å¿ƒçš„æ¦‚å¿µäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€èµ·æ¥åˆ†æä¸‹æ³¨å†Œä¸­å¿ƒçš„åŸç†ã€‚</p><h2 id="3-1-æ³¨å†Œä¸­å¿ƒåŸç†"><a href="#3-1-æ³¨å†Œä¸­å¿ƒåŸç†" class="headerlink" title="3.1.æ³¨å†Œä¸­å¿ƒåŸç†"></a>3.1.æ³¨å†Œä¸­å¿ƒåŸç†</h2><p>åœ¨å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªè§’è‰²ï¼š</p><ul><li><span data-type="text" style="background-color: var(--b3-font-background13);">æœåŠ¡æä¾›è€…</span>ï¼šæä¾›æ¥å£ä¾›å…¶å®ƒå¾®æœåŠ¡è®¿é—®ï¼Œæ¯”å¦‚<code>item-service</code>â€‹</li><li><span data-type="text" style="background-color: var(--b3-font-background13);">æœåŠ¡æ¶ˆè´¹è€…</span>ï¼šè°ƒç”¨å…¶å®ƒå¾®æœåŠ¡æä¾›çš„æ¥å£ï¼Œæ¯”å¦‚<code>cart-service</code>â€‹</li></ul><p>åœ¨å¤§å‹å¾®æœåŠ¡é¡¹ç›®ä¸­ï¼ŒæœåŠ¡æä¾›è€…çš„æ•°é‡ä¼šéå¸¸å¤šï¼Œä¸ºäº†ç®¡ç†è¿™äº›æœåŠ¡å°±å¼•å…¥äº†<strong>æ³¨å†Œä¸­å¿ƒ</strong>çš„æ¦‚å¿µã€‚æ³¨å†Œä¸­å¿ƒã€æœåŠ¡æä¾›è€…ã€æœåŠ¡æ¶ˆè´¹è€…ä¸‰è€…é—´å…³ç³»å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e5cdf0ee8d4265ef1aa52c7679813e89645325325.jpg">â€‹</p><blockquote><p>æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>æœåŠ¡å¯åŠ¨æ—¶å°±ä¼šæ³¨å†Œè‡ªå·±çš„æœåŠ¡ä¿¡æ¯ï¼ˆæœåŠ¡åã€IPã€ç«¯å£ï¼‰åˆ°æ³¨å†Œä¸­å¿ƒ</li><li>è°ƒç”¨è€…å¯ä»¥ä»æ³¨å†Œä¸­å¿ƒè®¢é˜…æƒ³è¦çš„æœåŠ¡ï¼Œè·å–æœåŠ¡å¯¹åº”çš„å®ä¾‹åˆ—è¡¨ï¼ˆ1ä¸ªæœåŠ¡å¯èƒ½å¤šå®ä¾‹éƒ¨ç½²ï¼‰</li><li>è°ƒç”¨è€…è‡ªå·±å¯¹å®ä¾‹åˆ—è¡¨è´Ÿè½½å‡è¡¡ï¼ŒæŒ‘é€‰ä¸€ä¸ªå®ä¾‹</li><li>è°ƒç”¨è€…å‘è¯¥å®ä¾‹å‘èµ·è¿œç¨‹è°ƒç”¨</li></ul></blockquote><p>â€</p><p>å½“æœåŠ¡æä¾›è€…çš„å®ä¾‹å®•æœºæˆ–è€…å¯åŠ¨æ–°å®ä¾‹æ—¶ï¼Œè°ƒç”¨è€…å¦‚ä½•å¾—çŸ¥å‘¢ï¼Ÿ</p><ul><li>æœåŠ¡æä¾›è€…ä¼šå®šæœŸå‘æ³¨å†Œä¸­å¿ƒå‘é€è¯·æ±‚ï¼ŒæŠ¥å‘Šè‡ªå·±çš„å¥åº·çŠ¶æ€ï¼ˆå¿ƒè·³è¯·æ±‚ï¼‰</li><li>å½“æ³¨å†Œä¸­å¿ƒé•¿æ—¶é—´æ”¶ä¸åˆ°æä¾›è€…çš„å¿ƒè·³æ—¶ï¼Œä¼šè®¤ä¸ºè¯¥å®ä¾‹å®•æœºï¼Œå°†å…¶ä»æœåŠ¡çš„å®ä¾‹åˆ—è¡¨ä¸­å‰”é™¤ (å¿ƒè·³åœæ­¢ ï¼Œè¿›è¡Œåœæ­¢)</li><li>å½“æœåŠ¡æœ‰æ–°å®ä¾‹å¯åŠ¨æ—¶ï¼Œä¼šå‘é€æ³¨å†ŒæœåŠ¡è¯·æ±‚ï¼Œå…¶ä¿¡æ¯ä¼šè¢«è®°å½•åœ¨æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡å®ä¾‹åˆ—è¡¨</li><li>å½“æ³¨å†Œä¸­å¿ƒæœåŠ¡åˆ—è¡¨å˜æ›´æ—¶ï¼Œä¼šä¸»åŠ¨é€šçŸ¥å¾®æœåŠ¡ï¼Œæ›´æ–°æœ¬åœ°æœåŠ¡åˆ—è¡¨</li></ul><p>â€</p><p><img src="https://i0.hdslb.com/bfs/article/9d7d81b89b4833cc30d1b1bd1d82f974645325325.png" alt="image">â€‹</p><h2 id="3-2-Nacosæ³¨å†Œä¸­å¿ƒ"><a href="#3-2-Nacosæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="3.2.Nacosæ³¨å†Œä¸­å¿ƒ"></a>3.2.Nacosæ³¨å†Œä¸­å¿ƒ</h2><p>ç›®å‰å¼€æºçš„æ³¨å†Œä¸­å¿ƒæ¡†æ¶æœ‰å¾ˆå¤šï¼Œå›½å†…æ¯”è¾ƒå¸¸è§çš„æœ‰ï¼š</p><ul><li>Eurekaï¼šNetflixå…¬å¸å‡ºå“ï¼Œç›®å‰è¢«é›†æˆåœ¨SpringCloudå½“ä¸­ï¼Œä¸€èˆ¬ç”¨äºJavaåº”ç”¨</li><li><span data-type="text" style="color: var(--b3-font-color11);">Nacosï¼šAlibabaå…¬å¸å‡ºå“ï¼Œç›®å‰è¢«é›†æˆåœ¨SpringCloudAlibabaä¸­ï¼Œä¸€èˆ¬ç”¨äºJavaåº”ç”¨</span></li><li>Consulï¼šHashiCorpå…¬å¸å‡ºå“ï¼Œç›®å‰é›†æˆåœ¨SpringCloudä¸­ï¼Œä¸é™åˆ¶å¾®æœåŠ¡è¯­è¨€</li></ul><p>ä»¥ä¸Šå‡ ç§æ³¨å†Œä¸­å¿ƒéƒ½éµå¾ªSpringCloudä¸­çš„APIè§„èŒƒï¼Œå› æ­¤åœ¨ä¸šåŠ¡å¼€å‘ä½¿ç”¨ä¸Šæ²¡æœ‰å¤ªå¤§å·®å¼‚ã€‚ç”±äºNacosæ˜¯å›½å†…äº§å“ï¼Œä¸­æ–‡æ–‡æ¡£æ¯”è¾ƒä¸°å¯Œï¼Œè€Œä¸”åŒæ—¶å…·å¤‡<strong>é…ç½®ç®¡ç†</strong>åŠŸèƒ½ï¼ˆåé¢ä¼šå­¦ä¹ ï¼‰ï¼Œå› æ­¤åœ¨å›½å†…ä½¿ç”¨è¾ƒå¤šï¼Œè¯¾å ‚ä¸­æˆ‘ä»¬ä¼šNacosä¸ºä¾‹æ¥å­¦ä¹ ã€‚</p><p>å®˜æ–¹ç½‘ç«™å¦‚ä¸‹ï¼š<a href="https://nacos.io/zh-cn/docs/quick-start.html" title="Nacos å¿«é€Ÿå¼€å§‹">Nacos å¿«é€Ÿå¼€å§‹</a></p><p>æˆ‘ä»¬åŸºäºDockeræ¥éƒ¨ç½²Nacosçš„æ³¨å†Œä¸­å¿ƒï¼Œé¦–å…ˆæˆ‘ä»¬è¦å‡†å¤‡MySQLæ•°æ®åº“è¡¨ï¼Œç”¨æ¥å­˜å‚¨Nacosçš„æ•°æ®ã€‚ç”±äºæ˜¯Dockeréƒ¨ç½²ï¼Œæ‰€ä»¥å¤§å®¶éœ€è¦å°†èµ„æ–™ä¸­çš„SQLæ–‡ä»¶å¯¼å…¥åˆ°ä½ <strong>Dockerä¸­çš„MySQLå®¹å™¨</strong>ä¸­ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/54a712aa434a1a0f47da0498543b05f9645325325.png">â€‹</p><p>æœ€ç»ˆè¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/10ca13a15efc5f7c97c7ee9defeed6e3645325325.png">â€‹</p><p>ç„¶åï¼Œæ‰¾åˆ°è¯¾å‰èµ„æ–™ä¸‹çš„nacosæ–‡ä»¶å¤¹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e7f2ef4ccf40d6092dc27c301aec01d5645325325.png">â€‹</p><p>å…¶ä¸­çš„<code>nacos/custom.env</code>â€‹æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ªMYSQL_SERVICE_HOSTä¹Ÿå°±æ˜¯mysqlåœ°å€ï¼Œéœ€è¦ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„è™šæ‹ŸæœºIPåœ°å€ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/c64ef1feffc6884bab8629eb2833d2b7645325325.png">â€‹</p><p>ç„¶åï¼Œå°†è¯¾å‰èµ„æ–™ä¸­çš„<code>nacos</code>â€‹ç›®å½•ä¸Šä¼ è‡³è™šæ‹Ÿæœºçš„<code>/root</code>â€‹ç›®å½•ã€‚</p><p>è¿›å…¥rootç›®å½•ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„dockerå‘½ä»¤ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run <span class="literal">-d</span> \</span><br><span class="line"><span class="literal">--name</span> nacos \</span><br><span class="line"><span class="literal">--env-file</span> ./nacos/custom.env \</span><br><span class="line"><span class="literal">-p</span> <span class="number">8848</span>:<span class="number">8848</span> \</span><br><span class="line"><span class="literal">-p</span> <span class="number">9848</span>:<span class="number">9848</span> \</span><br><span class="line"><span class="literal">-p</span> <span class="number">9849</span>:<span class="number">9849</span> \</span><br><span class="line"><span class="literal">--restart</span>=always \</span><br><span class="line">nacos/nacos<span class="literal">-server</span>:v2.<span class="number">1.0</span><span class="literal">-slim</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨å®Œæˆåï¼Œè®¿é—®ä¸‹é¢åœ°å€ï¼š<a href="http://192.168.150.101:8848/nacos/">http://192.168.150.101:8848/nacos/</a>ï¼Œæ³¨æ„å°†<code>192.168.150.101</code>â€‹æ›¿æ¢ä¸ºä½ è‡ªå·±çš„è™šæ‹ŸæœºIPåœ°å€ã€‚</p><p>é¦–æ¬¡è®¿é—®ä¼šè·³è½¬åˆ°ç™»å½•é¡µï¼Œ<strong>è´¦å·å¯†ç éƒ½æ˜¯nacos</strong></p><p><img src="https://i0.hdslb.com/bfs/article/7e85ecce77e89d16dcb23c6170f42d9a645325325.png">â€‹</p><h2 id="3-3-æœåŠ¡æ³¨å†Œ"><a href="#3-3-æœåŠ¡æ³¨å†Œ" class="headerlink" title="3.3.æœåŠ¡æ³¨å†Œ"></a>3.3.æœåŠ¡æ³¨å†Œ</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠ<code>item-service</code>â€‹æ³¨å†Œåˆ°Nacosï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å¼•å…¥ä¾èµ–</li><li>é…ç½®Nacosåœ°å€</li><li>é‡å¯</li></ul><h3 id="3-3-1-æ·»åŠ ä¾èµ–"><a href="#3-3-1-æ·»åŠ ä¾èµ–" class="headerlink" title="3.3.1.æ·»åŠ ä¾èµ–"></a>3.3.1.æ·»åŠ ä¾èµ–</h3><p>åœ¨<code>item-service</code>â€‹çš„<code>pom.xml</code>â€‹ä¸­æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--nacos æœåŠ¡æ³¨å†Œå‘ç°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-3-2-é…ç½®Nacos"><a href="#3-3-2-é…ç½®Nacos" class="headerlink" title="3.3.2.é…ç½®Nacos"></a>3.3.2.é…ç½®Nacos</h3><p>åœ¨<code>item-service</code>â€‹çš„<code>application.yml</code>â€‹ä¸­æ·»åŠ nacosåœ°å€é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">item-service</span> <span class="comment"># æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span><span class="string">:8848</span> <span class="comment"># nacosåœ°å€</span></span><br></pre></td></tr></table></figure><h3 id="3-3-3-å¯åŠ¨æœåŠ¡å®ä¾‹"><a href="#3-3-3-å¯åŠ¨æœåŠ¡å®ä¾‹" class="headerlink" title="3.3.3.å¯åŠ¨æœåŠ¡å®ä¾‹"></a>3.3.3.å¯åŠ¨æœåŠ¡å®ä¾‹</h3><p>ä¸ºäº†æµ‹è¯•ä¸€ä¸ªæœåŠ¡å¤šä¸ªå®ä¾‹çš„æƒ…å†µï¼Œæˆ‘ä»¬å†é…ç½®ä¸€ä¸ª<code>item-service</code>â€‹çš„éƒ¨ç½²å®ä¾‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/0a7c32dd564171fddf194e4c52499575645325325.png">â€‹</p><p>ç„¶åé…ç½®å¯åŠ¨é¡¹ï¼Œæ³¨æ„é‡å‘½åå¹¶ä¸”é…ç½®æ–°çš„ç«¯å£ï¼Œé¿å…å†²çªï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/0fa7bf8a3642fca63b329054a9c1ecdd645325325.png">â€‹</p><p>é‡å¯<code>item-service</code>â€‹çš„ä¸¤ä¸ªå®ä¾‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/b00656ef561b2634560440d611328c5b645325325.png">â€‹</p><p>è®¿é—®nacosæ§åˆ¶å°ï¼Œå¯ä»¥å‘ç°æœåŠ¡æ³¨å†ŒæˆåŠŸï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/12ab685a4a6b4fbfed1be9127993ed17645325325.png">â€‹</p><p>ç‚¹å‡»è¯¦æƒ…ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°<code>item-service</code>â€‹æœåŠ¡çš„ä¸¤ä¸ªå®ä¾‹ä¿¡æ¯ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/021189e7f8ece6f6133b2b41940b5d27645325325.png">â€‹</p><h2 id="3-4-æœåŠ¡å‘ç°"><a href="#3-4-æœåŠ¡å‘ç°" class="headerlink" title="3.4.æœåŠ¡å‘ç°"></a>3.4.æœåŠ¡å‘ç°</h2><p>æœåŠ¡çš„æ¶ˆè´¹è€…è¦å»nacosè®¢é˜…æœåŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯æœåŠ¡å‘ç°ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å¼•å…¥ä¾èµ–</li><li>é…ç½®Nacosåœ°å€</li><li>å‘ç°å¹¶è°ƒç”¨æœåŠ¡</li></ul><h3 id="3-4-1-å¼•å…¥ä¾èµ–"><a href="#3-4-1-å¼•å…¥ä¾èµ–" class="headerlink" title="3.4.1.å¼•å…¥ä¾èµ–"></a>3.4.1.å¼•å…¥ä¾èµ–</h3><p>æœåŠ¡å‘ç°é™¤äº†è¦å¼•å…¥nacosä¾èµ–ä»¥å¤–ï¼Œç”±äºè¿˜éœ€è¦è´Ÿè½½å‡è¡¡ï¼Œå› æ­¤è¦å¼•å…¥SpringCloudæä¾›çš„LoadBalancerä¾èµ–ã€‚</p><p>æˆ‘ä»¬åœ¨<code>cart-service</code>â€‹ä¸­çš„<code>pom.xml</code>â€‹ä¸­æ·»åŠ ä¸‹é¢çš„ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--nacos æœåŠ¡æ³¨å†Œå‘ç°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°ï¼Œè¿™é‡ŒNacosçš„ä¾èµ–äºæœåŠ¡æ³¨å†Œæ—¶ä¸€è‡´ï¼Œè¿™ä¸ªä¾èµ–ä¸­åŒæ—¶åŒ…å«äº†æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„åŠŸèƒ½ã€‚å› ä¸ºä»»ä½•ä¸€ä¸ªå¾®æœåŠ¡éƒ½å¯ä»¥è°ƒç”¨åˆ«äººï¼Œä¹Ÿå¯ä»¥è¢«åˆ«äººè°ƒç”¨ï¼Œå³å¯ä»¥æ˜¯è°ƒç”¨è€…ï¼Œä¹Ÿå¯ä»¥æ˜¯æä¾›è€…ã€‚</p><p>å› æ­¤ï¼Œç­‰ä¸€ä¼šå„¿<code>cart-service</code>â€‹å¯åŠ¨ï¼ŒåŒæ ·ä¼šæ³¨å†Œåˆ°Nacos</p><h3 id="3-4-2-é…ç½®Nacosåœ°å€"><a href="#3-4-2-é…ç½®Nacosåœ°å€" class="headerlink" title="3.4.2.é…ç½®Nacosåœ°å€"></a>3.4.2.é…ç½®Nacosåœ°å€</h3><p>åœ¨<code>cart-service</code>â€‹çš„<code>application.yml</code>â€‹ä¸­æ·»åŠ nacosåœ°å€é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span><span class="string">:8848</span></span><br></pre></td></tr></table></figure><h3 id="3-4-3-å‘ç°å¹¶è°ƒç”¨æœåŠ¡"><a href="#3-4-3-å‘ç°å¹¶è°ƒç”¨æœåŠ¡" class="headerlink" title="3.4.3.å‘ç°å¹¶è°ƒç”¨æœåŠ¡"></a>3.4.3.å‘ç°å¹¶è°ƒç”¨æœåŠ¡</h3><p>æ¥ä¸‹æ¥ï¼ŒæœåŠ¡è°ƒç”¨è€…<code>cart-service</code>â€‹å°±å¯ä»¥å»è®¢é˜…<code>item-service</code>â€‹æœåŠ¡äº†ã€‚ä¸è¿‡item-serviceæœ‰å¤šä¸ªå®ä¾‹ï¼Œè€ŒçœŸæ­£å‘èµ·è°ƒç”¨æ—¶åªéœ€è¦çŸ¥é“ä¸€ä¸ªå®ä¾‹çš„åœ°å€ã€‚</p><p>å› æ­¤ï¼Œ<span data-type="text" style="color: var(--b3-font-color3);">æœåŠ¡è°ƒç”¨è€…å¿…é¡»åˆ©ç”¨è´Ÿè½½å‡è¡¡çš„ç®—æ³•ï¼Œä»å¤šä¸ªå®ä¾‹ä¸­æŒ‘é€‰ä¸€ä¸ªå»è®¿é—®</span>ã€‚å¸¸è§çš„è´Ÿè½½å‡è¡¡ç®—æ³•æœ‰ï¼š</p><ul><li>éšæœº</li><li>è½®è¯¢</li><li>IPçš„hash</li><li>æœ€è¿‘æœ€å°‘è®¿é—®</li><li>â€¦</li></ul><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æœ€ç®€å•çš„éšæœºè´Ÿè½½å‡è¡¡ã€‚</p><p>å¦å¤–ï¼ŒæœåŠ¡å‘ç°éœ€è¦ç”¨åˆ°ä¸€ä¸ªå·¥å…·ï¼ŒDiscoveryClientï¼ŒSpringCloudå·²ç»å¸®æˆ‘ä»¬è‡ªåŠ¨è£…é…ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ³¨å…¥ä½¿ç”¨ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f6649a8dc4b53a84c5efbd2a9c970554645325325.png">â€‹</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹åŸæ¥çš„è¿œç¨‹è°ƒç”¨åšä¿®æ”¹äº†ï¼Œä¹‹å‰è°ƒç”¨æ—¶æˆ‘ä»¬éœ€è¦å†™æ­»æœåŠ¡æä¾›è€…çš„IPå’Œç«¯å£ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f352e8fcac648cadb9a653762c6d24b4645325325.png">â€‹</p><p>ä½†ç°åœ¨ä¸éœ€è¦äº†ï¼Œæˆ‘ä»¬é€šè¿‡DiscoveryClientå‘ç°æœåŠ¡å®ä¾‹åˆ—è¡¨ï¼Œç„¶åé€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰æ‹©ä¸€ä¸ªå®ä¾‹å»è°ƒç”¨ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/17290fd21cf8bff2ddc1de3c36d15eba645325325.png">â€‹</p><p>ç»è¿‡swaggeræµ‹è¯•ï¼Œå‘ç°æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p><h1 id="4-OpenFeign"><a href="#4-OpenFeign" class="headerlink" title="4.OpenFeign"></a>4.OpenFeign</h1><p>åœ¨ä¸Šä¸€ç« ï¼Œæˆ‘ä»¬åˆ©ç”¨Nacoså®ç°äº†æœåŠ¡çš„æ²»ç†ï¼Œåˆ©ç”¨RestTemplateå®ç°äº†æœåŠ¡çš„è¿œç¨‹è°ƒç”¨ã€‚ä½†æ˜¯è¿œç¨‹è°ƒç”¨çš„ä»£ç å¤ªå¤æ‚äº†ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/ad49b17ad517f2d3893efb2c43d37b1f645325325.png">â€‹</p><p>è€Œä¸”è¿™ç§è°ƒç”¨æ–¹å¼ï¼Œä¸åŸæœ¬çš„æœ¬åœ°æ–¹æ³•è°ƒç”¨å·®å¼‚å¤ªå¤§ï¼Œç¼–ç¨‹æ—¶çš„ä½“éªŒä¹Ÿä¸ç»Ÿä¸€ï¼Œä¸€ä¼šå„¿è¿œç¨‹è°ƒç”¨ï¼Œä¸€ä¼šå„¿æœ¬åœ°è°ƒç”¨ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»æƒ³åŠæ³•æ”¹å˜è¿œç¨‹è°ƒç”¨çš„å¼€å‘æ¨¡å¼ï¼Œè®©<strong>è¿œç¨‹è°ƒç”¨åƒæœ¬åœ°æ–¹æ³•è°ƒç”¨ä¸€æ ·ç®€å•</strong>ã€‚è€Œè¿™å°±è¦ç”¨åˆ°OpenFeignç»„ä»¶äº†ã€‚</p><p>å…¶å®è¿œç¨‹è°ƒç”¨çš„å…³é”®ç‚¹å°±åœ¨äºå››ä¸ªï¼š</p><ul><li>è¯·æ±‚æ–¹å¼</li><li>è¯·æ±‚è·¯å¾„</li><li>è¯·æ±‚å‚æ•°</li><li>è¿”å›å€¼ç±»å‹</li></ul><p>æ‰€ä»¥ï¼ŒOpenFeignå°±åˆ©ç”¨SpringMVCçš„ç›¸å…³æ³¨è§£æ¥å£°æ˜ä¸Šè¿°4ä¸ªå‚æ•°ï¼Œç„¶ååŸºäºåŠ¨æ€ä»£ç†å¸®æˆ‘ä»¬ç”Ÿæˆè¿œç¨‹è°ƒç”¨çš„ä»£ç ï¼Œè€Œæ— éœ€æˆ‘ä»¬æ‰‹åŠ¨å†ç¼–å†™ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªå¿«é€Ÿå…¥é—¨çš„æ¡ˆä¾‹æ¥ä½“éªŒä¸€ä¸‹OpenFeignçš„ä¾¿æ·å§ã€‚</p><h2 id="4-1-å¿«é€Ÿå…¥é—¨"><a href="#4-1-å¿«é€Ÿå…¥é—¨" class="headerlink" title="4.1.å¿«é€Ÿå…¥é—¨"></a>4.1.å¿«é€Ÿå…¥é—¨</h2><p>æˆ‘ä»¬è¿˜æ˜¯ä»¥cart-serviceä¸­çš„æŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦ä¸ºä¾‹ã€‚å› æ­¤ä¸‹é¢çš„æ“ä½œéƒ½æ˜¯åœ¨cart-serviceä¸­è¿›è¡Œã€‚</p><h3 id="4-1-1-å¼•å…¥ä¾èµ–"><a href="#4-1-1-å¼•å…¥ä¾èµ–" class="headerlink" title="4.1.1.å¼•å…¥ä¾èµ–"></a>4.1.1.å¼•å…¥ä¾èµ–</h3><p>åœ¨<code>cart-service</code>â€‹æœåŠ¡çš„pom.xmlä¸­å¼•å…¥<code>OpenFeign</code>â€‹çš„ä¾èµ–å’Œ<code>loadBalancer</code>â€‹ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--openFeign--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è´Ÿè½½å‡è¡¡å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-1-2-å¯ç”¨OpenFeign"><a href="#4-1-2-å¯ç”¨OpenFeign" class="headerlink" title="4.1.2.å¯ç”¨OpenFeign"></a>4.1.2.å¯ç”¨OpenFeign</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨<code>cart-service</code>â€‹çš„<code>CartApplication</code>â€‹å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ï¼Œå¯åŠ¨OpenFeignåŠŸèƒ½ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/8c893e2f7ab73b6e9220672e28409ee9645325325.png">â€‹</p><h3 id="4-1-3-ç¼–å†™OpenFeignå®¢æˆ·ç«¯"><a href="#4-1-3-ç¼–å†™OpenFeignå®¢æˆ·ç«¯" class="headerlink" title="4.1.3.ç¼–å†™OpenFeignå®¢æˆ·ç«¯"></a>4.1.3.ç¼–å†™OpenFeignå®¢æˆ·ç«¯</h3><p>åœ¨<code>cart-service</code>â€‹ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„æ¥å£ï¼Œç¼–å†™Feignå®¢æˆ·ç«¯ï¼š</p><p>å…¶ä¸­ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.cart.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hmall.cart.domain.dto.ItemDTO;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FeignClient(&quot;item-service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ItemClient</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/items&quot;)</span></span><br><span class="line">    List&lt;ItemDTO&gt; <span class="title function_">queryItemByIds</span><span class="params">(<span class="meta">@RequestParam(&quot;ids&quot;)</span> Collection&lt;Long&gt; ids)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåªéœ€è¦å£°æ˜æ¥å£ï¼Œæ— éœ€å®ç°æ–¹æ³•ã€‚æ¥å£ä¸­çš„å‡ ä¸ªå…³é”®ä¿¡æ¯ï¼š</p><ul><li><code>@FeignClient(&quot;item-service&quot;)</code>â€‹ ï¼šå£°æ˜æœåŠ¡åç§°</li><li><code>@GetMapping</code>â€‹ ï¼šå£°æ˜è¯·æ±‚æ–¹å¼</li><li><code>@GetMapping(&quot;/items&quot;)</code>â€‹ ï¼šå£°æ˜è¯·æ±‚è·¯å¾„</li><li><code>@RequestParam(&quot;ids&quot;) Collection&lt;Long&gt; ids</code>â€‹ ï¼šå£°æ˜è¯·æ±‚å‚æ•°</li><li><code>List&lt;ItemDTO&gt;</code>â€‹ ï¼šè¿”å›å€¼ç±»å‹</li></ul><p>æœ‰äº†ä¸Šè¿°ä¿¡æ¯ï¼ŒOpenFeignå°±å¯ä»¥åˆ©ç”¨åŠ¨æ€ä»£ç†å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”å‘<code>http://item-service/items</code>â€‹å‘é€ä¸€ä¸ª<code>GET</code>â€‹è¯·æ±‚ï¼Œæºå¸¦idsä¸ºè¯·æ±‚å‚æ•°ï¼Œå¹¶è‡ªåŠ¨å°†è¿”å›å€¼å¤„ç†ä¸º<code>List&lt;ItemDTO&gt;</code>â€‹ã€‚</p><p>æˆ‘ä»¬åªéœ€è¦ç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå³å¯å®ç°è¿œç¨‹è°ƒç”¨äº†ã€‚</p><h3 id="4-1-4-ä½¿ç”¨FeignClient"><a href="#4-1-4-ä½¿ç”¨FeignClient" class="headerlink" title="4.1.4.ä½¿ç”¨FeignClient"></a>4.1.4.ä½¿ç”¨FeignClient</h3><p>æœ€åï¼Œæˆ‘ä»¬åœ¨<code>cart-service</code>â€‹çš„<code>com.hmall.cart.service.impl.CartServiceImpl</code>â€‹ä¸­æ”¹é€ ä»£ç ï¼Œç›´æ¥è°ƒç”¨<code>ItemClient</code>â€‹çš„æ–¹æ³•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/81f4f9623b2a6a5e3bb88460a92c9b3e645325325.png">â€‹</p><p>feignæ›¿æˆ‘ä»¬å®Œæˆäº†æœåŠ¡æ‹‰å–ã€è´Ÿè½½å‡è¡¡ã€å‘é€httpè¯·æ±‚çš„æ‰€æœ‰å·¥ä½œï¼Œæ˜¯ä¸æ˜¯çœ‹èµ·æ¥ä¼˜é›…å¤šäº†ã€‚</p><p>è€Œä¸”ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å†éœ€è¦RestTemplateäº†ï¼Œè¿˜çœå»äº†RestTemplateçš„æ³¨å†Œã€‚</p><h2 id="4-2-è¿æ¥æ± "><a href="#4-2-è¿æ¥æ± " class="headerlink" title="4.2.è¿æ¥æ± "></a>4.2.è¿æ¥æ± </h2><p><span data-type="text" style="color: var(--b3-font-color2);">Feignåº•å±‚å‘èµ·httpè¯·æ±‚ï¼Œä¾èµ–äºå…¶å®ƒçš„æ¡†æ¶</span>ã€‚å…¶åº•å±‚æ”¯æŒçš„httpå®¢æˆ·ç«¯å®ç°åŒ…æ‹¬ï¼š</p><ul><li>HttpURLConnectionï¼šé»˜è®¤å®ç°ï¼Œä¸æ”¯æŒè¿æ¥æ± </li><li>Apache HttpClient ï¼šæ”¯æŒè¿æ¥æ± </li><li>OKHttpï¼šæ”¯æŒè¿æ¥æ± </li></ul><p>å› æ­¤æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å¸¦æœ‰è¿æ¥æ± çš„å®¢æˆ·ç«¯æ¥ä»£æ›¿é»˜è®¤çš„HttpURLConnectionã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨OK Http.</p><h3 id="4-2-1-å¼•å…¥ä¾èµ–"><a href="#4-2-1-å¼•å…¥ä¾èµ–" class="headerlink" title="4.2.1.å¼•å…¥ä¾èµ–"></a>4.2.1.å¼•å…¥ä¾èµ–</h3><p>åœ¨<code>cart-service</code>â€‹çš„<code>pom.xml</code>â€‹ä¸­å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--OK http çš„ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.openfeign<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-okhttp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-2-2-å¼€å¯è¿æ¥æ± "><a href="#4-2-2-å¼€å¯è¿æ¥æ± " class="headerlink" title="4.2.2.å¼€å¯è¿æ¥æ± "></a>4.2.2.å¼€å¯è¿æ¥æ± </h3><p>åœ¨<code>cart-service</code>â€‹çš„<code>application.yml</code>â€‹é…ç½®æ–‡ä»¶ä¸­å¼€å¯Feignçš„è¿æ¥æ± åŠŸèƒ½ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">okhttp:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯OKHttpåŠŸèƒ½</span></span><br></pre></td></tr></table></figure><p>é‡å¯æœåŠ¡ï¼Œè¿æ¥æ± å°±ç”Ÿæ•ˆäº†ã€‚</p><h3 id="4-2-3-éªŒè¯"><a href="#4-2-3-éªŒè¯" class="headerlink" title="4.2.3.éªŒè¯"></a>4.2.3.éªŒè¯</h3><p>æˆ‘ä»¬å¯ä»¥æ‰“æ–­ç‚¹éªŒè¯è¿æ¥æ± æ˜¯å¦ç”Ÿæ•ˆï¼Œåœ¨<code>org.springframework.cloud.openfeign.loadbalancer.FeignBlockingLoadBalancerClient</code>â€‹ä¸­çš„<code>execute</code>â€‹æ–¹æ³•ä¸­æ‰“æ–­ç‚¹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/4c7c01a6dcf360242251dd1ead7de79d645325325.png">â€‹</p><p>Debugæ–¹å¼å¯åŠ¨cart-serviceï¼Œè¯·æ±‚ä¸€æ¬¡æŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦æ–¹æ³•ï¼Œè¿›å…¥æ–­ç‚¹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/a9b36c57d4a1fd8ee7bf1a3585dcee46645325325.png">â€‹</p><p>å¯ä»¥å‘ç°è¿™é‡Œåº•å±‚çš„å®ç°å·²ç»æ”¹ä¸º<code>OkHttpClient</code>â€‹</p><h2 id="4-3-æœ€ä½³å®è·µ"><a href="#4-3-æœ€ä½³å®è·µ" class="headerlink" title="4.3.æœ€ä½³å®è·µ"></a>4.3.æœ€ä½³å®è·µ</h2><p>å°†æ¥æˆ‘ä»¬è¦æŠŠä¸ä¸‹å•æœ‰å…³çš„ä¸šåŠ¡æŠ½å–ä¸ºä¸€ä¸ªç‹¬ç«‹å¾®æœåŠ¡:<code>trade-service</code>â€‹ï¼Œä¸è¿‡æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹<code>hm-service</code>â€‹ä¸­åŸæœ¬ä¸ä¸‹å•æœ‰å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p>å…¥å£åœ¨<code>com.hmall.controller.OrderController</code>â€‹çš„<code>createOrder</code>â€‹æ–¹æ³•ï¼Œç„¶åè°ƒç”¨äº†<code>IOrderService</code>â€‹ä¸­çš„<code>createOrder</code>â€‹æ–¹æ³•ã€‚</p><p>ç”±äºä¸‹å•æ—¶å‰ç«¯æäº¤äº†å•†å“idï¼Œä¸ºäº†è®¡ç®—è®¢å•æ€»ä»·ï¼Œéœ€è¦æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/079cfaa92188817d7935ad4150d2f3c0645325325.png">â€‹</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ‹†åˆ†äº†äº¤æ˜“å¾®æœåŠ¡ï¼ˆ<code>trade-service</code>â€‹ï¼‰ï¼Œå®ƒä¹Ÿéœ€è¦è¿œç¨‹è°ƒç”¨<code>item-service</code>â€‹ä¸­çš„æ ¹æ®idæ‰¹é‡æŸ¥è¯¢å•†å“åŠŸèƒ½ã€‚è¿™ä¸ªéœ€æ±‚ä¸<code>cart-service</code>â€‹ä¸­æ˜¯ä¸€æ ·çš„ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨<code>trade-service</code>â€‹ä¸­å†æ¬¡å®šä¹‰<code>ItemClient</code>â€‹æ¥å£ï¼Œè¿™ä¸æ˜¯é‡å¤ç¼–ç å—ï¼Ÿ æœ‰ä»€ä¹ˆåŠæ³•èƒ½åŠ é¿å…é‡å¤ç¼–ç å‘¢ï¼Ÿ</p><h3 id="4-3-1-æ€è·¯åˆ†æ"><a href="#4-3-1-æ€è·¯åˆ†æ" class="headerlink" title="4.3.1.æ€è·¯åˆ†æ"></a>4.3.1.æ€è·¯åˆ†æ</h3><p>ç›¸ä¿¡å¤§å®¶éƒ½èƒ½æƒ³åˆ°ï¼Œé¿å…é‡å¤ç¼–ç çš„åŠæ³•å°±æ˜¯<strong>æŠ½å–</strong>ã€‚ä¸è¿‡è¿™é‡Œæœ‰ä¸¤ç§æŠ½å–æ€è·¯ï¼š</p><ul><li>æ€è·¯1ï¼šæŠ½å–åˆ°å¾®æœåŠ¡ä¹‹å¤–çš„å…¬å…±module</li><li>æ€è·¯2ï¼šæ¯ä¸ªå¾®æœåŠ¡è‡ªå·±æŠ½å–ä¸€ä¸ªmodule</li></ul><p>å¦‚å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/fa97e7887a53102d9684bd580e54d71f645325325.jpg">â€‹</p><p>æ–¹æ¡ˆ1æŠ½å–æ›´åŠ ç®€å•ï¼Œå·¥ç¨‹ç»“æ„ä¹Ÿæ¯”è¾ƒæ¸…æ™°ï¼Œä½†ç¼ºç‚¹æ˜¯æ•´ä¸ªé¡¹ç›®è€¦åˆåº¦åé«˜ã€‚</p><p>æ–¹æ¡ˆ2æŠ½å–ç›¸å¯¹éº»çƒ¦ï¼Œå·¥ç¨‹ç»“æ„ç›¸å¯¹æ›´å¤æ‚ï¼Œä½†æœåŠ¡ä¹‹é—´è€¦åˆåº¦é™ä½ã€‚</p><p>ç”±äºitem-serviceå·²ç»åˆ›å»ºå¥½ï¼Œæ— æ³•ç»§ç»­æ‹†åˆ†ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨æ–¹æ¡ˆ1.</p><h3 id="4-3-2-æŠ½å–Feignå®¢æˆ·ç«¯"><a href="#4-3-2-æŠ½å–Feignå®¢æˆ·ç«¯" class="headerlink" title="4.3.2.æŠ½å–Feignå®¢æˆ·ç«¯"></a>4.3.2.æŠ½å–Feignå®¢æˆ·ç«¯</h3><p>åœ¨<code>hmall</code>â€‹ä¸‹å®šä¹‰ä¸€ä¸ªæ–°çš„moduleï¼Œå‘½åä¸ºhm-api</p><p><img src="https://i0.hdslb.com/bfs/article/ff92422ba177c3a7cad161878ced5477645325325.png">â€‹</p><p>å…¶ä¾èµ–å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hmall<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--open feign--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- load balancer--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- swagger æ³¨è§£ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.swagger<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åæŠŠItemDTOå’ŒItemClientéƒ½æ‹·è´è¿‡æ¥ï¼Œæœ€ç»ˆç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/c64fc4ad406a5f081db82d8239d8bad9645325325.png">â€‹</p><p>ç°åœ¨ï¼Œä»»ä½•å¾®æœåŠ¡è¦è°ƒç”¨<code>item-service</code>â€‹ä¸­çš„æ¥å£ï¼Œåªéœ€è¦å¼•å…¥<code>hm-api</code>â€‹æ¨¡å—ä¾èµ–å³å¯ï¼Œæ— éœ€è‡ªå·±ç¼–å†™Feignå®¢æˆ·ç«¯äº†ã€‚</p><h3 id="4-3-3-æ‰«æåŒ…"><a href="#4-3-3-æ‰«æåŒ…" class="headerlink" title="4.3.3.æ‰«æåŒ…"></a>4.3.3.æ‰«æåŒ…</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨<code>cart-service</code>â€‹çš„<code>pom.xml</code>â€‹ä¸­å¼•å…¥<code>hm-api</code>â€‹æ¨¡å—ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--feignæ¨¡å—--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hm-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ é™¤<code>cart-service</code>â€‹ä¸­åŸæ¥çš„ItemDTOå’ŒItemClientï¼Œé‡å¯é¡¹ç›®ï¼Œå‘ç°æŠ¥é”™äº†ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/9bc2f88b64a3e5448a6e07b13e6ec9bb645325325.png">â€‹</p><p>è¿™é‡Œå› ä¸º<code>ItemClient</code>â€‹ç°åœ¨å®šä¹‰åˆ°äº†<code>com.hmall.api.client</code>â€‹åŒ…ä¸‹ï¼Œ<span data-type="text" style="background-color: var(--b3-font-background1);">è€Œcart-serviceçš„å¯åŠ¨ç±»å®š</span>ä¹‰åœ¨<code>com.hmall.cart</code>â€‹åŒ…ä¸‹ï¼Œæ‰«æä¸åˆ°<code>ItemClient</code>â€‹ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚</p><p>è§£å†³åŠæ³•å¾ˆç®€å•ï¼Œ<span data-type="text" style="background-color: var(--b3-font-background1);">åœ¨cart-serviceçš„å¯åŠ¨ç±»ä¸Šæ·»åŠ å£°æ˜å³å¯</span>ï¼Œ<span data-type="text" style="background-color: var(--b3-font-background6);">ä¸¤ç§æ–¹å¼ï¼š</span></p><ul><li>æ–¹å¼1ï¼šå£°æ˜æ‰«æåŒ…ï¼š</li></ul><p><img src="https://i0.hdslb.com/bfs/article/930e71dd86c7f47c5912e2d33e7671fb645325325.png">â€‹</p><ul><li>æ–¹å¼2ï¼šå£°æ˜è¦ç”¨çš„FeignClient</li></ul><p><img src="https://i0.hdslb.com/bfs/article/e8477f3634ae2d3e755fca601119a7ad645325325.png">â€‹</p><h2 id="4-4-æ—¥å¿—é…ç½®"><a href="#4-4-æ—¥å¿—é…ç½®" class="headerlink" title="4.4.æ—¥å¿—é…ç½®"></a>4.4.æ—¥å¿—é…ç½®</h2><p>OpenFeignåªä¼šåœ¨FeignClientæ‰€åœ¨åŒ…çš„æ—¥å¿—çº§åˆ«ä¸º<strong>DEBUG</strong>æ—¶ï¼Œæ‰ä¼šè¾“å‡ºæ—¥å¿—ã€‚è€Œä¸”å…¶æ—¥å¿—çº§åˆ«æœ‰4çº§ï¼š</p><ul><li><strong>NONE</strong>ï¼šä¸è®°å½•ä»»ä½•æ—¥å¿—ä¿¡æ¯ï¼Œè¿™æ˜¯é»˜è®¤å€¼ã€‚</li><li><strong>BASIC</strong>ï¼šä»…è®°å½•è¯·æ±‚çš„æ–¹æ³•ï¼ŒURLä»¥åŠå“åº”çŠ¶æ€ç å’Œæ‰§è¡Œæ—¶é—´</li><li><strong>HEADERS</strong>ï¼šåœ¨BASICçš„åŸºç¡€ä¸Šï¼Œé¢å¤–è®°å½•äº†è¯·æ±‚å’Œå“åº”çš„å¤´ä¿¡æ¯</li><li><strong>FULL</strong>ï¼šè®°å½•æ‰€æœ‰è¯·æ±‚å’Œå“åº”çš„æ˜ç»†ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯ã€è¯·æ±‚ä½“ã€å…ƒæ•°æ®ã€‚</li></ul><p>Feigné»˜è®¤çš„æ—¥å¿—çº§åˆ«å°±æ˜¯NONEï¼Œæ‰€ä»¥é»˜è®¤æˆ‘ä»¬çœ‹ä¸åˆ°è¯·æ±‚æ—¥å¿—ã€‚</p><h3 id="4-4-1-å®šä¹‰æ—¥å¿—çº§åˆ«"><a href="#4-4-1-å®šä¹‰æ—¥å¿—çº§åˆ«" class="headerlink" title="4.4.1.å®šä¹‰æ—¥å¿—çº§åˆ«"></a>4.4.1.å®šä¹‰æ—¥å¿—çº§åˆ«</h3><p>åœ¨hm-apiæ¨¡å—ä¸‹æ–°å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œå®šä¹‰Feignçš„æ—¥å¿—çº§åˆ«ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/c5c8babb4fdb968241900bc31c7c7801645325325.png">â€‹</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hmall.api.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> feign.Logger;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DefaultFeignConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Logger.Level <span class="title function_">feignLogLevel</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Logger.Level.FULL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-4-2-é…ç½®"><a href="#4-4-2-é…ç½®" class="headerlink" title="4.4.2.é…ç½®"></a>4.4.2.é…ç½®</h3><p>æ¥ä¸‹æ¥ï¼Œè¦è®©æ—¥å¿—çº§åˆ«ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦é…ç½®è¿™ä¸ªç±»ã€‚æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><strong>å±€éƒ¨</strong>ç”Ÿæ•ˆï¼šåœ¨æŸä¸ª<code>FeignClient</code>â€‹ä¸­é…ç½®ï¼Œåªå¯¹å½“å‰<code>FeignClient</code>â€‹ç”Ÿæ•ˆ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(value = &quot;item-service&quot;, configuration = DefaultFeignConfig.class)</span></span><br></pre></td></tr></table></figure><ul><li><strong>å…¨å±€</strong>ç”Ÿæ•ˆï¼šåœ¨<code>@EnableFeignClients</code>â€‹ä¸­é…ç½®ï¼Œé’ˆå¯¹æ‰€æœ‰<code>FeignClient</code>â€‹ç”Ÿæ•ˆã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients(defaultConfiguration = DefaultFeignConfig.class)</span></span><br></pre></td></tr></table></figure><p>æ—¥å¿—æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">17:35:32:148 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---&gt; GET http://item-service/items?ids=100000006163 HTTP/1.1</span><br><span class="line">17:35:32:148 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---&gt; END HTTP (0-byte body)</span><br><span class="line">17:35:32:278 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] &lt;--- HTTP/1.1 200  (127ms)</span><br><span class="line">17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive</span><br><span class="line">17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json</span><br><span class="line">17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 26 May 2023 09:35:32 GMT</span><br><span class="line">17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60</span><br><span class="line">17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked</span><br><span class="line">17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] </span><br><span class="line">17:35:32:280 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [&#123;&quot;id&quot;:100000006163,&quot;name&quot;:&quot;å·´å¸ƒè±†(BOBDOG)æŸ”è–„æ‚¦åŠ¨å©´å„¿æ‹‰æ‹‰è£¤XXLç 80ç‰‡(15kgä»¥ä¸Š)&quot;,&quot;price&quot;:67100,&quot;stock&quot;:10000,&quot;image&quot;:&quot;https://m.360buyimg.com/mobilecms/s720x720_jfs/t23998/350/2363990466/222391/a6e9581d/5b7cba5bN0c18fb4f.jpg!q70.jpg.webp&quot;,&quot;category&quot;:&quot;æ‹‰æ‹‰è£¤&quot;,&quot;brand&quot;:&quot;å·´å¸ƒè±†&quot;,&quot;spec&quot;:&quot;&#123;&#125;&quot;,&quot;sold&quot;:11,&quot;commentCount&quot;:33343434,&quot;isAD&quot;:false,&quot;status&quot;:2&#125;]</span><br><span class="line">17:35:32:281 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] &lt;--- END HTTP (369-byte body)</span><br></pre></td></tr></table></figure><h1 id="5-ä½œä¸š"><a href="#5-ä½œä¸š" class="headerlink" title="5.ä½œä¸š"></a>5.ä½œä¸š</h1><h2 id="5-1-æ‹†åˆ†å¾®æœåŠ¡"><a href="#5-1-æ‹†åˆ†å¾®æœåŠ¡" class="headerlink" title="5.1.æ‹†åˆ†å¾®æœåŠ¡"></a>5.1.æ‹†åˆ†å¾®æœåŠ¡</h2><p>å°†hm-serviceä¸­çš„å…¶å®ƒä¸šåŠ¡ä¹Ÿéƒ½æ‹†åˆ†ä¸ºå¾®æœåŠ¡ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>user-serviceï¼šç”¨æˆ·å¾®æœåŠ¡ï¼ŒåŒ…å«ç”¨æˆ·ç™»å½•ã€ç®¡ç†ç­‰åŠŸèƒ½</li><li>trade-serviceï¼šäº¤æ˜“å¾®æœåŠ¡ï¼ŒåŒ…å«è®¢å•ç›¸å…³åŠŸèƒ½</li><li>pay-serviceï¼šæ”¯ä»˜å¾®æœåŠ¡ï¼ŒåŒ…å«æ”¯ä»˜ç›¸å…³åŠŸèƒ½</li></ul><p>å…¶ä¸­äº¤æ˜“æœåŠ¡ã€æ”¯ä»˜æœåŠ¡ã€ç”¨æˆ·æœåŠ¡ä¸­çš„ä¸šåŠ¡éƒ½éœ€è¦çŸ¥é“å½“å‰ç™»å½•ç”¨æˆ·æ˜¯è°ï¼Œç›®å‰æš‚æœªå®ç°ï¼Œå…ˆå°†ç”¨æˆ·idå†™æ­»ã€‚</p><p><strong>æ€è€ƒ</strong>ï¼šå¦‚ä½•æ‰èƒ½åœ¨æ¯ä¸ªå¾®æœåŠ¡ä¸­éƒ½æ‹¿åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Ÿå¦‚ä½•åœ¨å¾®æœåŠ¡ä¹‹é—´ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼Ÿ</p><h2 id="5-2-å®šä¹‰FeignClient"><a href="#5-2-å®šä¹‰FeignClient" class="headerlink" title="5.2.å®šä¹‰FeignClient"></a>5.2.å®šä¹‰FeignClient</h2><p>åœ¨ä¸Šè¿°ä¸šåŠ¡ä¸­ï¼ŒåŒ…å«å¤§é‡çš„å¾®æœåŠ¡è°ƒç”¨ï¼Œå°†è¢«è°ƒç”¨çš„æ¥å£å…¨éƒ¨å®šä¹‰ä¸ºFeignClientï¼Œå°†å…¶ä¸å¯¹åº”çš„DTOæ”¾åœ¨hm-apiæ¨¡å—</p><h2 id="5-3-å°†å¾®æœåŠ¡ä¸å‰ç«¯è”è°ƒ"><a href="#5-3-å°†å¾®æœåŠ¡ä¸å‰ç«¯è”è°ƒ" class="headerlink" title="5.3.å°†å¾®æœåŠ¡ä¸å‰ç«¯è”è°ƒ"></a>5.3.å°†å¾®æœåŠ¡ä¸å‰ç«¯è”è°ƒ</h2><p>è¯¾å‰èµ„æ–™æä¾›äº†ä¸€ä¸ª<code>hmall-nginx</code>â€‹ç›®å½•ï¼Œå…¶ä¸­åŒ…å«äº†Nginxä»¥åŠæˆ‘ä»¬çš„å‰ç«¯ä»£ç ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/713c97ee21385719a40e82242d1d7ae6645325325.png">â€‹</p><p>å°†å…¶æ‹·è´åˆ°ä¸€ä¸ªä¸åŒ…å«ä¸­æ–‡ã€ç©ºæ ¼ã€ç‰¹æ®Šå­—ç¬¦çš„ç›®å½•ï¼Œå¯åŠ¨åå³å¯è®¿é—®åˆ°é¡µé¢ï¼š</p><ul><li>18080æ˜¯ç”¨æˆ·ç«¯é¡µé¢</li><li>18081æ˜¯ç®¡ç†ç«¯é¡µé¢</li></ul><p>ä¹‹å‰<code>nginx</code>â€‹å†…éƒ¨ä¼šå°†å‘å‘æœåŠ¡ç«¯è¯·æ±‚å…¨éƒ¨ä»£ç†åˆ°8080ç«¯å£ï¼Œä½†æ˜¯ç°åœ¨æ‹†åˆ†äº†Nä¸ªå¾®æœåŠ¡ï¼Œ8080ä¸å¯ç”¨äº†ã€‚è¯·é€šè¿‡<code>Nginx</code>â€‹é…ç½®ï¼Œå®Œæˆå¯¹ä¸åŒå¾®æœåŠ¡çš„åå‘ä»£ç†ã€‚</p><p><strong>è®¤çœŸæ€è€ƒè¿™ç§æ–¹å¼å­˜åœ¨å“ªäº›é—®é¢˜</strong>ï¼Œ<strong>æœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3. åŸºç¡€ç®—æ³•</title>
      <link href="/posts/54117.html"/>
      <url>/posts/54117.html</url>
      
        <content type="html"><![CDATA[<h2 id="3-1-æŸ¥æ‰¾æ¦‚è¿°"><a href="#3-1-æŸ¥æ‰¾æ¦‚è¿°" class="headerlink" title="3.1 æŸ¥æ‰¾æ¦‚è¿°"></a>3.1 æŸ¥æ‰¾æ¦‚è¿°</h2><p>æŸ¥æ‰¾ç®—æ³•æ˜¯ä¸€ç§åœ¨æ•°æ®é›†ä¸­å¯»æ‰¾ç‰¹å®šæ•°æ®é¡¹çš„æ–¹æ³•ã€‚é€šå¸¸ï¼Œæ•°æ®é›†æ˜¯åœ¨è®¡ç®—æœºç¨‹åºä¸­å­˜å‚¨çš„ï¼Œä¾‹å¦‚æ•°ç»„ã€é“¾è¡¨æˆ–æ•£åˆ—è¡¨ã€‚åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼ŒæŸ¥æ‰¾ç®—æ³•æ˜¯éå¸¸é‡è¦çš„ï¼Œå®ƒæœ‰åŠ©äºå¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„æ•°æ®ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€äº›åŸºæœ¬çš„æŸ¥æ‰¾ç®—æ³•åŠå…¶ç‰¹ç‚¹ã€‚</p><h3 id="çº¿æ€§æŸ¥æ‰¾"><a href="#çº¿æ€§æŸ¥æ‰¾" class="headerlink" title="çº¿æ€§æŸ¥æ‰¾"></a>çº¿æ€§æŸ¥æ‰¾</h3><p>çº¿æ€§æŸ¥æ‰¾ä¹Ÿç§°ä¸ºé¡ºåºæŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§æœ€ç®€å•çš„æŸ¥æ‰¾ç®—æ³•ã€‚åœ¨è¿™ç§ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬ä»æ•°æ®é›†çš„å¼€å¤´å¼€å§‹ï¼Œé€ä¸ªæ¯”è¾ƒæ¯ä¸ªæ•°æ®é¡¹ï¼Œä»¥å¯»æ‰¾è¦æŸ¥æ‰¾çš„æ•°æ®ã€‚å¦‚æœæˆ‘ä»¬æ‰¾åˆ°äº†ç›®æ ‡æ•°æ®ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹å°±ç»“æŸäº†ã€‚å¦‚æœæˆ‘ä»¬åˆ°è¾¾æ•°æ®é›†çš„æœ«å°¾ï¼Œä»ç„¶æ‰¾ä¸åˆ°ç›®æ ‡æ•°æ®ï¼Œåˆ™å¯ä»¥è®¤ä¸ºå®ƒä¸å­˜åœ¨äºæ•°æ®é›†ä¸­ã€‚</p><p>çº¿æ€§æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œå…¶ä¸­næ˜¯æ•°æ®é›†çš„å¤§å°ã€‚å› æ­¤ï¼Œå®ƒåœ¨å¤§å‹æ•°æ®é›†ä¸­å¯èƒ½ä¼šå¾ˆæ…¢ã€‚ç„¶è€Œï¼Œåœ¨å°å‹æ•°æ®é›†ä¸­ï¼Œå®ƒä»ç„¶æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„ç®—æ³•ã€‚</p><h3 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h3><p>äºŒåˆ†æŸ¥æ‰¾ä¹Ÿç§°ä¸ºæŠ˜åŠæŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§æ›´å¿«é€Ÿçš„æŸ¥æ‰¾ç®—æ³•ã€‚ä½†å‰ææ˜¯ï¼Œæ•°æ®é›†å¿…é¡»å·²ç»æ’åºã€‚åœ¨äºŒåˆ†æŸ¥æ‰¾ä¸­ï¼Œæˆ‘ä»¬å–æ•°æ®é›†çš„ä¸­é—´å€¼ï¼Œç„¶åå°†ç›®æ ‡ä¸ä¸­é—´å€¼è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœç›®æ ‡å°äºä¸­é—´å€¼ï¼Œåˆ™åœ¨å·¦ä¾§å­é›†ä¸­ç»§ç»­æŸ¥æ‰¾ï¼›å¦‚æœç›®æ ‡å¤§äºä¸­é—´å€¼ï¼Œåˆ™åœ¨å³ä¾§å­é›†ä¸­ç»§ç»­æŸ¥æ‰¾ã€‚æ¯æ¬¡æ¯”è¾ƒéƒ½ä¼šç¼©å°è¦æœç´¢çš„æ•°æ®é›†çš„å¤§å°ã€‚</p><p>äºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log n)ï¼Œå…¶ä¸­næ˜¯æ•°æ®é›†çš„å¤§å°ã€‚è¿™ç§ç®—æ³•åœ¨å¤§å‹æ•°æ®é›†ä¸­éå¸¸æœ‰æ•ˆï¼Œä½†åœ¨å°å‹æ•°æ®é›†ä¸­å¯èƒ½å¹¶ä¸æ˜¯æœ€å¿«çš„é€‰æ‹©ã€‚</p><h3 id="å“ˆå¸Œè¡¨æŸ¥æ‰¾"><a href="#å“ˆå¸Œè¡¨æŸ¥æ‰¾" class="headerlink" title="å“ˆå¸Œè¡¨æŸ¥æ‰¾"></a>å“ˆå¸Œè¡¨æŸ¥æ‰¾</h3><p>å“ˆå¸Œè¡¨æŸ¥æ‰¾ä¹Ÿç§°ä¸ºæ•£åˆ—è¡¨æŸ¥æ‰¾ï¼Œæ˜¯å¦ä¸€ç§å¸¸è§çš„æŸ¥æ‰¾ç®—æ³•ã€‚å®ƒåˆ©ç”¨å“ˆå¸Œå‡½æ•°å°†æ•°æ®é¡¹æ˜ å°„åˆ°æ•£åˆ—è¡¨ä¸­çš„ä½ç½®ã€‚åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªéœ€é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—ç›®æ ‡æ•°æ®çš„ä½ç½®ï¼Œç„¶åæ£€æŸ¥è¯¥ä½ç½®æ˜¯å¦åŒ…å«ç›®æ ‡æ•°æ®ã€‚</p><p>å“ˆå¸Œè¡¨æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ã€‚è¿™ä½¿å¾—å®ƒæˆä¸ºå¤§å‹æ•°æ®é›†ä¸­æœ€å¿«çš„æŸ¥æ‰¾ç®—æ³•ä¹‹ä¸€ã€‚ä½†æ˜¯ï¼Œå“ˆå¸Œè¡¨æŸ¥æ‰¾çš„æ•ˆç‡å–å†³äºå“ˆå¸Œå‡½æ•°çš„è´¨é‡ã€‚å¦‚æœä¸¤ä¸ªæ•°æ®é¡¹æ˜ å°„åˆ°ç›¸åŒçš„ä½ç½®ï¼Œå°±ä¼šå‘ç”Ÿå“ˆå¸Œå†²çªï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©é€‚åˆæ•°æ®é›†å¤§å°å’Œå…¶ä»–è¦æ±‚çš„æœ€ä½³æŸ¥æ‰¾ç®—æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ•°æ®é›†å¾ˆå°ï¼Œåˆ™çº¿æ€§æŸ¥æ‰¾å¯èƒ½æ˜¯æœ€å¿«çš„é€‰æ‹©ï¼›å¦‚æœæ•°æ®é›†å·²ç»æ’åºï¼Œåˆ™äºŒåˆ†æŸ¥æ‰¾æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ç„¶è€Œï¼Œåœ¨å¤§å‹æ•°æ®é›†ä¸­ï¼Œå“ˆå¸Œè¡¨æŸ¥æ‰¾é€šå¸¸æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚äº†è§£ä¸åŒç±»å‹çš„æŸ¥æ‰¾ç®—æ³•åŠå…¶ç‰¹ç‚¹å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ç¼–å†™ç¨‹åºæ—¶åšå‡ºæ˜æ™ºçš„é€‰æ‹©ã€‚</p><p>ä¸ç®¡æ˜¯ä¹‹å‰å­¦è¿‡çš„æ•°ç»„ã€é“¾è¡¨ã€é˜Ÿåˆ—ã€è¿˜æ˜¯æ ˆï¼Œè¿™äº›çº¿æ€§ç»“æ„ä¸­ï¼Œå¦‚æœæƒ³åœ¨å…¶ä¸­æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ ï¼Œæ•ˆç‡æ˜¯æ¯”è¾ƒæ…¢çš„ï¼Œåªæœ‰$O(N)$ï¼Œå› æ­¤å¦‚æœä½ çš„éœ€æ±‚æ˜¯å®ç°æ•°æ®çš„å¿«é€ŸæŸ¥æ‰¾ï¼Œé‚£ä¹ˆå°±éœ€è¦<strong>æ–°çš„æ•°æ®ç»“æ„</strong>æ”¯æŒã€‚</p><p>è¿˜è®°å¾—æœ€å…ˆä»‹ç»çš„é‚£ä¸ªäºŒåˆ†æŸ¥æ‰¾ç®—æ³•å—ï¼Ÿå®ƒçš„æŸ¥æ‰¾æ•ˆç‡èƒ½å¤Ÿè¾¾åˆ° $O(\log{N})$ï¼Œæ˜¯ä¸æ˜¯è¿˜ä¸é”™ï¼Ÿä¸è¿‡å‘¢ï¼Œå®ƒéœ€è¦å¯¹æ•°ç»„äº‹å…ˆæ’å¥½åºï¼Œè€Œæ’åºçš„æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ä¸ªæŠ˜ä¸­çš„åŠæ³•å‘¢ï¼Ÿæœ‰ï¼Œé‚£å°±æ˜¯æ¥ä¸‹æ¥è¦ç»™å¤§å®¶ä»‹ç»çš„<strong>äºŒå‰æœç´¢æ ‘</strong>ï¼Œå®ƒæ’å…¥å…ƒç´ åï¼Œè‡ªç„¶å°±æ˜¯æ’å¥½åºçš„ï¼Œæ¥ä¸‹æ¥çš„æŸ¥è¯¢ä¹Ÿè‡ªç„¶è€Œç„¶å¯ä»¥åº”ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•è¿›è¡Œé«˜æ•ˆæœç´¢ã€‚</p><h2 id="3-2-äºŒå‰æœç´¢æ ‘"><a href="#3-2-äºŒå‰æœç´¢æ ‘" class="headerlink" title="3.2 äºŒå‰æœç´¢æ ‘"></a>3.2 äºŒå‰æœç´¢æ ‘</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><h4 id="å†å²"><a href="#å†å²" class="headerlink" title="å†å²"></a>å†å²</h4><blockquote><p>äºŒå‰æœç´¢æ ‘æœ€æ—©æ˜¯ç”±Bernoulliå…„å¼Ÿåœ¨18ä¸–çºªä¸­æå‡ºçš„ï¼Œä½†æ˜¯çœŸæ­£æ¨å¹¿å’Œåº”ç”¨è¯¥æ•°æ®ç»“æ„çš„æ˜¯1960å¹´ä»£çš„D.L. Griesã€‚ä»–çš„è‘—ä½œã€ŠThe Science of Programmingã€‹ä¸­è¯¦ç»†ä»‹ç»äº†äºŒå‰æœç´¢æ ‘çš„å®ç°å’Œåº”ç”¨ã€‚</p><p>åœ¨è®¡ç®—æœºç§‘å­¦çš„å‘å±•ä¸­ï¼ŒäºŒå‰æœç´¢æ ‘æˆä¸ºäº†ä¸€ç§éå¸¸åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œè¢«å¹¿æ³›åº”ç”¨åœ¨å„ç§é¢†åŸŸï¼ŒåŒ…æ‹¬æœç´¢ã€æ’åºã€æ•°æ®åº“ç´¢å¼•ç­‰ã€‚éšç€è®¡ç®—æœºç®—åŠ›çš„æå‡å’Œå¯¹æ•°æ®ç»“æ„çš„æ·±å…¥ç ”ç©¶ï¼ŒäºŒå‰æœç´¢æ ‘ä¹Ÿä¸æ–­è¢«ä¼˜åŒ–å’Œæ‰©å±•ï¼Œä¾‹å¦‚AVLæ ‘ã€çº¢é»‘æ ‘ç­‰ã€‚</p></blockquote><h4 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h4><p>äºŒå‰æœç´¢æ ‘ï¼ˆä¹Ÿç§°äºŒå‰æ’åºæ ‘ï¼‰æ˜¯ç¬¦åˆä¸‹é¢ç‰¹å¾çš„äºŒå‰æ ‘ï¼š</p><ol><li>æ ‘èŠ‚ç‚¹å¢åŠ  key å±æ€§ï¼Œç”¨æ¥æ¯”è¾ƒè°å¤§è°å°ï¼Œkey ä¸å¯ä»¥é‡å¤</li><li>å¯¹äºä»»æ„ä¸€ä¸ªæ ‘èŠ‚ç‚¹ï¼Œå®ƒçš„ key æ¯”å·¦å­æ ‘çš„ key éƒ½å¤§ï¼ŒåŒæ—¶ä¹Ÿæ¯”å³å­æ ‘çš„ key éƒ½å°ï¼Œä¾‹å¦‚ä¸‹å›¾æ‰€ç¤º</li></ol><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230228090412983-20240713121119-sihgj7y.png" alt="image-20230228090412983">â€‹</p><p>è½»æ˜“çœ‹å‡ºè¦æŸ¥æ‰¾ 7 ï¼ˆä»æ ¹å¼€å§‹ï¼‰è‡ªç„¶å°±å¯åº”ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œåªéœ€ä¸‰æ¬¡æ¯”è¾ƒ</p><ul><li>ä¸ 4 æ¯”ï¼Œè¾ƒä¹‹å¤§ï¼Œå‘å³æ‰¾</li><li>ä¸ 6 æ¯”ï¼Œè¾ƒä¹‹å¤§ï¼Œç»§ç»­å‘å³æ‰¾</li><li>ä¸ 7 æ¯”ï¼Œæ‰¾åˆ°</li></ul><p>æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸<strong>æ ‘é«˜</strong>ç›¸å…³ï¼Œæ’å…¥ã€åˆ é™¤ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><ul><li>å¦‚æœè¿™æ£µæ ‘é•¿å¾—è¿˜ä¸èµ–ï¼ˆå·¦å³å¹³è¡¡ï¼‰ä¸Šå›¾ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦å‡æ˜¯ $O(\log{N})$</li><li>å½“ç„¶ï¼Œè¿™æ£µæ ‘å¦‚æœé•¿å¾—ä¸‘ï¼ˆå·¦å³é«˜åº¦ç›¸å·®è¿‡å¤§ï¼‰ä¸‹å›¾ï¼Œé‚£ä¹ˆè¿™æ—¶æ˜¯æœ€ç³Ÿçš„æƒ…å†µï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(N)$</li></ul><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230228091405293-20240713121119-arb60gr.png" alt="image-20230228091405293">â€‹</p><blockquote><p>æ³¨ï¼š</p><ul><li>äºŒå‰æœç´¢æ ‘ - è‹±æ–‡ binary search treeï¼Œç®€ç§° BST</li><li>äºŒå‰æ’åºæ ‘ - è‹±æ–‡ binary ordered tree æˆ– binary sorted tree</li></ul></blockquote><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="å®šä¹‰èŠ‚ç‚¹"><a href="#å®šä¹‰èŠ‚ç‚¹" class="headerlink" title="å®šä¹‰èŠ‚ç‚¹"></a>å®šä¹‰èŠ‚ç‚¹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">BSTNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> key; <span class="comment">// è‹¥å¸Œæœ›ä»»æ„ç±»å‹ä½œä¸º key, åˆ™åç»­å¯ä»¥å°†å…¶è®¾è®¡ä¸º Comparable æ¥å£</span></span><br><span class="line">    Object value;</span><br><span class="line">    BSTNode left;</span><br><span class="line">    BSTNode right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BSTNode</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = key;</span><br><span class="line">        <span class="built_in">this</span>.value = key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BSTNode</span><span class="params">(<span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = key;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BSTNode</span><span class="params">(<span class="type">int</span> key, Object value, BSTNode left, BSTNode right)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = key;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.left = left;</span><br><span class="line">        <span class="built_in">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h4><p><strong>é€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> doGet(root, key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Object <span class="title function_">doGet</span><span class="params">(BSTNode node, <span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// æ²¡æ‰¾åˆ°</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (key &lt; node.key) &#123;</span><br><span class="line">        <span class="keyword">return</span> doGet(node.left, key); <span class="comment">// å‘å·¦æ‰¾</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.key &lt; key) &#123;</span><br><span class="line">        <span class="keyword">return</span> doGet(node.right, key); <span class="comment">// å‘å³æ‰¾</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> node.value; <span class="comment">// æ‰¾åˆ°äº†</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>éé€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">node</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="keyword">while</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; node.key) &#123;</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.key &lt; key) &#123;</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> node.value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Comparable"><a href="#Comparable" class="headerlink" title="Comparable"></a>Comparable</h4><p>å¦‚æœå¸Œæœ›è®©é™¤ int å¤–æ›´å¤šçš„ç±»å‹èƒ½å¤Ÿä½œä¸º keyï¼Œä¸€ç§æ–¹å¼æ˜¯ key å¿…é¡»å®ç° Comparable æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BSTTree2</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Comparable</span>&lt;T&gt;&gt; &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">BSTNode</span>&lt;T&gt; &#123;</span><br><span class="line">        T key; <span class="comment">// è‹¥å¸Œæœ›ä»»æ„ç±»å‹ä½œä¸º key, åˆ™åç»­å¯ä»¥å°†å…¶è®¾è®¡ä¸º Comparable æ¥å£</span></span><br><span class="line">        Object value;</span><br><span class="line">        BSTNode&lt;T&gt; left;</span><br><span class="line">        BSTNode&lt;T&gt; right;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">BSTNode</span><span class="params">(T key)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = key;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">BSTNode</span><span class="params">(T key, Object value)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">BSTNode</span><span class="params">(T key, Object value, BSTNode&lt;T&gt; left, BSTNode&lt;T&gt; right)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.left = left;</span><br><span class="line">            <span class="built_in">this</span>.right = right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    BSTNode&lt;T&gt; root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(T key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> doGet(root, key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object <span class="title function_">doGet</span><span class="params">(BSTNode&lt;T&gt; node, T key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> node.key.compareTo(key);</span><br><span class="line">        <span class="keyword">if</span> (result &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> doGet(node.left, key);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> doGet(node.right, key);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> node.value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ç§åšæ³•ä¸è¦æ±‚ key å®ç° Comparable æ¥å£ï¼Œè€Œæ˜¯åœ¨æ„é€  Tree æ—¶æŠŠæ¯”è¾ƒè§„åˆ™ä½œä¸º Comparator ä¼ å…¥ï¼Œå°†æ¥æ¯”è¾ƒ key å¤§å°æ—¶éƒ½è°ƒç”¨æ­¤ Comparator è¿›è¡Œæ¯”è¾ƒï¼Œè¿™ç§åšæ³•å¯ä»¥å‚è€ƒ Java ä¸­çš„ java.util.TreeMap</p><h4 id="æœ€å°"><a href="#æœ€å°" class="headerlink" title="æœ€å°"></a>æœ€å°</h4><p><strong>é€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">min</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> doMin(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">doMin</span><span class="params">(BSTNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å·¦è¾¹å·²èµ°åˆ°å¤´</span></span><br><span class="line">    <span class="keyword">if</span> (node.left == <span class="literal">null</span>) &#123; </span><br><span class="line">        <span class="keyword">return</span> node.value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> doMin(node.left);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>éé€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">min</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="comment">// å·¦è¾¹æœªèµ°åˆ°å¤´</span></span><br><span class="line">    <span class="keyword">while</span> (p.left != <span class="literal">null</span>) &#123;</span><br><span class="line">        p = p.left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p.value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœ€å¤§"><a href="#æœ€å¤§" class="headerlink" title="æœ€å¤§"></a>æœ€å¤§</h4><p><strong>é€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">max</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> doMax(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">doMax</span><span class="params">(BSTNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å³è¾¹å·²èµ°åˆ°å¤´</span></span><br><span class="line">    <span class="keyword">if</span> (node.left == <span class="literal">null</span>) &#123; </span><br><span class="line">        <span class="keyword">return</span> node.value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> doMin(node.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>éé€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">max</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="comment">// å³è¾¹æœªèµ°åˆ°å¤´</span></span><br><span class="line">    <span class="keyword">while</span> (p.right != <span class="literal">null</span>) &#123;</span><br><span class="line">        p = p.right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p.value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ–°å¢"><a href="#æ–°å¢" class="headerlink" title="æ–°å¢"></a>æ–°å¢</h4><p><strong>é€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">    root = doPut(root, key, value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> BSTNode <span class="title function_">doPut</span><span class="params">(BSTNode node, <span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BSTNode</span>(key, value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (key &lt; node.key) &#123;</span><br><span class="line">        node.left = doPut(node.left, key, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.key &lt; key) &#123;</span><br><span class="line">        node.right = doPut(node.right, key, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        node.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>è‹¥æ‰¾åˆ° keyï¼Œèµ° else æ›´æ–°æ‰¾åˆ°èŠ‚ç‚¹çš„å€¼</p></li><li><p>è‹¥æ²¡æ‰¾åˆ° keyï¼Œèµ°ç¬¬ä¸€ä¸ª ifï¼Œåˆ›å»ºå¹¶è¿”å›æ–°èŠ‚ç‚¹</p><ul><li>è¿”å›çš„æ–°èŠ‚ç‚¹ï¼Œä½œä¸ºä¸Šæ¬¡é€’å½’æ—¶ node çš„å·¦å­©å­æˆ–å³å­©å­</li><li>ç¼ºç‚¹æ˜¯ï¼Œä¼šæœ‰å¾ˆå¤šä¸å¿…è¦çš„èµ‹å€¼æ“ä½œ</li></ul></li></ul><p><strong>éé€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">node</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">parent</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">        parent = node;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; node.key) &#123;</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.key &lt; key) &#123;</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 1. key å­˜åœ¨åˆ™æ›´æ–°</span></span><br><span class="line">            node.value = value;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2. key ä¸å­˜åœ¨åˆ™æ–°å¢</span></span><br><span class="line">    <span class="keyword">if</span> (parent == <span class="literal">null</span>) &#123;</span><br><span class="line">        root = <span class="keyword">new</span> <span class="title class_">BSTNode</span>(key, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &lt; parent.key) &#123;</span><br><span class="line">        parent.left = <span class="keyword">new</span> <span class="title class_">BSTNode</span>(key, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        parent.right = <span class="keyword">new</span> <span class="title class_">BSTNode</span>(key, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‰é©±åç»§"><a href="#å‰é©±åç»§" class="headerlink" title="å‰é©±åç»§"></a>å‰é©±åç»§</h4><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230228144422128-20240713121119-ndm8c1x.png" alt="image-20230228144422128">â€‹</p><p>ä¸€ä¸ªèŠ‚ç‚¹çš„å‰é©±ï¼ˆå‰ä»»ï¼‰èŠ‚ç‚¹æ˜¯æŒ‡æ¯”å®ƒå°çš„èŠ‚ç‚¹ä¸­ï¼Œæœ€å¤§çš„é‚£ä¸ª</p><p>ä¸€ä¸ªèŠ‚ç‚¹çš„åç»§ï¼ˆåä»»ï¼‰èŠ‚ç‚¹æ˜¯æŒ‡æ¯”å®ƒå¤§çš„èŠ‚ç‚¹ä¸­ï¼Œæœ€å°çš„é‚£ä¸ª</p><p>ä¾‹å¦‚ä¸Šå›¾ä¸­</p><ul><li>1 æ²¡æœ‰å‰é©±ï¼Œåç»§æ˜¯ 2</li><li>2 å‰é©±æ˜¯ 1ï¼Œåç»§æ˜¯ 3</li><li>3 å‰é©±æ˜¯ 2ï¼Œåç»§æ˜¯ 4</li><li>â€¦</li></ul><p>ç®€å•çš„åŠæ³•æ˜¯ä¸­åºéå†ï¼Œå³å¯è·å¾—æ’åºç»“æœï¼Œæ­¤æ—¶å¾ˆå®¹æ˜“æ‰¾åˆ°å‰é©±åç»§</p><p>è¦æ•ˆç‡æ›´é«˜ï¼Œéœ€è¦ç ”ç©¶ä¸€ä¸‹è§„å¾‹ï¼Œ<strong>æ‰¾å‰é©±</strong>åˆ†æˆ 2 ç§æƒ…å†µï¼š</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230228144422128-20240713121119-suohafg.png" alt="image-20230228144422128">â€‹</p><ol><li><p>èŠ‚ç‚¹æœ‰å·¦å­æ ‘ï¼Œæ­¤æ—¶å‰é©±èŠ‚ç‚¹å°±æ˜¯å·¦å­æ ‘çš„æœ€å¤§å€¼ï¼Œå›¾ä¸­å±äºè¿™ç§æƒ…å†µçš„æœ‰</p><ul><li>2 çš„å‰é©±æ˜¯1</li><li>4 çš„å‰é©±æ˜¯ 3</li><li>6 çš„å‰é©±æ˜¯ 5</li><li>7 çš„å‰é©±æ˜¯ 6</li></ul></li><li><p>èŠ‚ç‚¹æ²¡æœ‰å·¦å­æ ‘ï¼Œè‹¥ç¦»å®ƒæœ€è¿‘çš„ç¥–å…ˆè‡ªä»å·¦è€Œæ¥ï¼Œæ­¤ç¥–å…ˆå³ä¸ºå‰é©±ï¼Œå¦‚</p><ul><li>3 çš„ç¥–å…ˆ 2 è‡ªå·¦è€Œæ¥ï¼Œå‰é©± 2</li><li>5 çš„ç¥–å…ˆ 4 è‡ªå·¦è€Œæ¥ï¼Œå‰é©± 4</li><li>8 çš„ç¥–å…ˆ 7 è‡ªå·¦è€Œæ¥ï¼Œå‰é©± 7</li><li>1 æ²¡æœ‰è¿™æ ·çš„ç¥–å…ˆï¼Œå‰é©± null</li></ul></li></ol><p><strong>æ‰¾åç»§</strong>ä¹Ÿåˆ†æˆ 2 ç§æƒ…å†µ</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230228152715296-20240713121119-5gq4nrk.png" alt="image-20230228152715296">â€‹</p><ol><li><p>èŠ‚ç‚¹æœ‰å³å­æ ‘ï¼Œæ­¤æ—¶åç»§èŠ‚ç‚¹å³ä¸ºå³å­æ ‘çš„æœ€å°å€¼ï¼Œå¦‚</p><ul><li>2 çš„åç»§ 3</li><li>3 çš„åç»§ 4</li><li>5 çš„åç»§ 6</li><li>7 çš„åç»§ 8</li></ul></li><li><p>èŠ‚ç‚¹æ²¡æœ‰å³å­æ ‘ï¼Œè‹¥ç¦»å®ƒæœ€è¿‘çš„ç¥–å…ˆè‡ªä»å³è€Œæ¥ï¼Œæ­¤ç¥–å…ˆå³ä¸ºåç»§ï¼Œå¦‚</p><ul><li>1 çš„ç¥–å…ˆ 2 è‡ªå³è€Œæ¥ï¼Œåç»§ 2</li><li>4 çš„ç¥–å…ˆ 5 è‡ªå³è€Œæ¥ï¼Œåç»§ 5</li><li>6 çš„ç¥–å…ˆ 7 è‡ªå³è€Œæ¥ï¼Œåç»§ 7</li><li>8 æ²¡æœ‰è¿™æ ·çš„ç¥–å…ˆï¼Œåç»§ null</li></ul></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">predecessor</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">ancestorFromLeft</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; p.key) &#123;</span><br><span class="line">            p = p.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.key &lt; key) &#123;</span><br><span class="line">            ancestorFromLeft = p;</span><br><span class="line">            p = p.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æƒ…å†µ1 - æœ‰å·¦å­©å­</span></span><br><span class="line">    <span class="keyword">if</span> (p.left != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> max(p.left);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æƒ…å†µ2 - æœ‰ç¥–å…ˆè‡ªå·¦è€Œæ¥</span></span><br><span class="line">    <span class="keyword">return</span> ancestorFromLeft != <span class="literal">null</span> ? ancestorFromLeft.value : <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">successor</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">ancestorFromRight</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; p.key) &#123;</span><br><span class="line">            ancestorFromRight = p;</span><br><span class="line">            p = p.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.key &lt; key) &#123;</span><br><span class="line">            p = p.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æƒ…å†µ1 - æœ‰å³å­©å­</span></span><br><span class="line">    <span class="keyword">if</span> (p.right != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> min(p.right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æƒ…å†µ2 - æœ‰ç¥–å…ˆè‡ªå³è€Œæ¥</span></span><br><span class="line">    <span class="keyword">return</span> ancestorFromRight != <span class="literal">null</span> ? ancestorFromRight.value : <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><p>è¦åˆ é™¤æŸèŠ‚ç‚¹ï¼ˆç§°ä¸º Dï¼‰ï¼Œå¿…é¡»å…ˆæ‰¾åˆ°è¢«åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œè¿™é‡Œç§°ä¸º Parent</p><ol><li><p>åˆ é™¤èŠ‚ç‚¹æ²¡æœ‰å·¦å­©å­ï¼Œå°†å³å­©å­æ‰˜å­¤ç»™ Parent</p></li><li><p>åˆ é™¤èŠ‚ç‚¹æ²¡æœ‰å³å­©å­ï¼Œå°†å·¦å­©å­æ‰˜å­¤ç»™ Parent</p></li><li><p>åˆ é™¤èŠ‚ç‚¹å·¦å³å­©å­éƒ½æ²¡æœ‰ï¼Œå·²ç»è¢«æ¶µç›–åœ¨æƒ…å†µ1ã€æƒ…å†µ2 å½“ä¸­ï¼ŒæŠŠ null æ‰˜å­¤ç»™ Parent</p></li><li><p>åˆ é™¤èŠ‚ç‚¹å·¦å³å­©å­éƒ½æœ‰ï¼Œå¯ä»¥å°†å®ƒçš„åç»§èŠ‚ç‚¹ï¼ˆç§°ä¸º Sï¼‰æ‰˜å­¤ç»™ Parentï¼Œè®¾ S çš„çˆ¶äº²ä¸º SPï¼Œåˆåˆ†ä¸¤ç§æƒ…å†µ</p><ol><li>SP å°±æ˜¯è¢«åˆ é™¤èŠ‚ç‚¹ï¼Œæ­¤æ—¶ D ä¸ S ç´§é‚»ï¼Œåªéœ€å°† S æ‰˜å­¤ç»™ Parent</li><li>SP ä¸æ˜¯è¢«åˆ é™¤èŠ‚ç‚¹ï¼Œæ­¤æ—¶ D ä¸ S ä¸ç›¸é‚»ï¼Œæ­¤æ—¶éœ€è¦å°† S çš„åä»£æ‰˜å­¤ç»™ SPï¼Œå†å°† S æ‰˜å­¤ç»™ Parent</li></ol></li></ol><p><strong>éé€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;h3&gt;æ ¹æ®å…³é”®å­—åˆ é™¤&lt;/h3&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key å…³é”®å­—</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è¢«åˆ é™¤å…³é”®å­—å¯¹åº”å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">delete</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">parent</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; p.key) &#123;</span><br><span class="line">            parent = p;</span><br><span class="line">            p = p.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.key &lt; key) &#123;</span><br><span class="line">            parent = p;</span><br><span class="line">            p = p.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ é™¤æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span> (p.left == <span class="literal">null</span>) &#123;</span><br><span class="line">        shift(parent, p, p.right); <span class="comment">// æƒ…å†µ1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.right == <span class="literal">null</span>) &#123;</span><br><span class="line">        shift(parent, p, p.left); <span class="comment">// æƒ…å†µ2</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æƒ…å†µ4</span></span><br><span class="line">        <span class="comment">// 4.1 è¢«åˆ é™¤èŠ‚ç‚¹æ‰¾åç»§</span></span><br><span class="line">        <span class="type">BSTNode</span> <span class="variable">s</span> <span class="operator">=</span> p.right;</span><br><span class="line">        <span class="type">BSTNode</span> <span class="variable">sParent</span> <span class="operator">=</span> p; <span class="comment">// åç»§çˆ¶äº²</span></span><br><span class="line">        <span class="keyword">while</span> (s.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            sParent = s;</span><br><span class="line">            s = s.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.2 åˆ é™¤å’Œåç»§ä¸ç›¸é‚», å¤„ç†åç»§çš„åäº‹</span></span><br><span class="line">        <span class="keyword">if</span> (sParent != p) &#123;            </span><br><span class="line">            shift(sParent, s, s.right); <span class="comment">// ä¸å¯èƒ½æœ‰å·¦å­©å­</span></span><br><span class="line">            s.right = p.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.3 åç»§å–ä»£è¢«åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line">        shift(parent, p, s);</span><br><span class="line">        s.left = p.left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p.value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰˜å­¤æ–¹æ³•</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> parent  è¢«åˆ é™¤èŠ‚ç‚¹çš„çˆ¶äº²</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> deleted è¢«åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> child   è¢«é¡¶ä¸Šå»çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// åªè€ƒè™‘è®© n1çˆ¶äº²çš„å·¦æˆ–å³å­©å­æŒ‡å‘ n2, n1è‡ªå·±çš„å·¦æˆ–å³å­©å­å¹¶æœªåœ¨æ–¹æ³•å†…æ”¹å˜</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">shift</span><span class="params">(BSTNode parent, BSTNode deleted, BSTNode child)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (parent == <span class="literal">null</span>) &#123;</span><br><span class="line">        root = child;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (deleted == parent.left) &#123;</span><br><span class="line">        parent.left = child;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        parent.right = child;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">delete</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    ArrayList&lt;Object&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    root = doDelete(root, key, result);</span><br><span class="line">    <span class="keyword">return</span> result.isEmpty() ? <span class="literal">null</span> : result.get(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> BSTNode <span class="title function_">doDelete</span><span class="params">(BSTNode node, <span class="type">int</span> key, ArrayList&lt;Object&gt; result)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (key &lt; node.key) &#123;</span><br><span class="line">        node.left = doDelete(node.left, key, result);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.key &lt; key) &#123;</span><br><span class="line">        node.right = doDelete(node.right, key, result);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    result.add(node.value);</span><br><span class="line">    <span class="keyword">if</span> (node.left != <span class="literal">null</span> &amp;&amp; node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">BSTNode</span> <span class="variable">s</span> <span class="operator">=</span> node.right;</span><br><span class="line">        <span class="keyword">while</span> (s.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            s = s.left;</span><br><span class="line">        &#125;</span><br><span class="line">        s.right = doDelete(node.right, s.key, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">        s.left = node.left;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node.left != <span class="literal">null</span> ? node.left : node.right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜</p><ol><li><code>ArrayList&lt;Object&gt; result</code>â€‹ ç”¨æ¥ä¿å­˜è¢«åˆ é™¤èŠ‚ç‚¹çš„å€¼</li><li>ç¬¬äºŒã€ç¬¬ä¸‰ä¸ª if å¯¹åº”æ²¡æ‰¾åˆ°çš„æƒ…å†µï¼Œç»§ç»­é€’å½’æŸ¥æ‰¾å’Œåˆ é™¤ï¼Œæ³¨æ„åç»­çš„ doDelete è¿”å›å€¼ä»£è¡¨åˆ å‰©ä¸‹çš„ï¼Œå› æ­¤éœ€è¦æ›´æ–°</li><li>æœ€åä¸€ä¸ª return å¯¹åº”åˆ é™¤èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­©å­çš„æƒ…å†µï¼Œè¿”å›é‚£ä¸ªä¸ä¸ºç©ºçš„å­©å­ï¼Œå¾…åˆ èŠ‚ç‚¹è‡ªå·±å› æ²¡æœ‰è¿”å›è€Œè¢«åˆ é™¤</li><li>ç¬¬å››ä¸ª if å¯¹åº”åˆ é™¤èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­©å­çš„æƒ…å†µï¼Œæ­¤æ—¶éœ€è¦æ‰¾åˆ°åç»§èŠ‚ç‚¹ï¼Œå¹¶åœ¨å¾…åˆ é™¤èŠ‚ç‚¹çš„å³å­æ ‘ä¸­åˆ æ‰åç»§èŠ‚ç‚¹ï¼Œæœ€åç”¨åç»§èŠ‚ç‚¹æ›¿ä»£æ‰å¾…åˆ é™¤èŠ‚ç‚¹è¿”å›ï¼Œåˆ«å¿˜äº†æ”¹å˜åç»§èŠ‚ç‚¹çš„å·¦å³æŒ‡é’ˆ</li></ol><h4 id="æ‰¾å°çš„"><a href="#æ‰¾å°çš„" class="headerlink" title="æ‰¾å°çš„"></a>æ‰¾å°çš„</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">less</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    ArrayList&lt;Object&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    LinkedList&lt;BSTNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(p);</span><br><span class="line">            p = p.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">BSTNode</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (pop.key &lt; key) &#123;</span><br><span class="line">                result.add(pop.value);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            p = pop.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ‰¾å¤§çš„"><a href="#æ‰¾å¤§çš„" class="headerlink" title="æ‰¾å¤§çš„"></a>æ‰¾å¤§çš„</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">greater</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    ArrayList&lt;Object&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    LinkedList&lt;BSTNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(p);</span><br><span class="line">            p = p.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">BSTNode</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (pop.key &gt; key) &#123;</span><br><span class="line">                result.add(pop.value);</span><br><span class="line">            &#125;</span><br><span class="line">            p = pop.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†è¿™æ ·æ•ˆç‡ä¸é«˜ï¼Œå¯ä»¥ç”¨ RNL éå†</p><blockquote><p>æ³¨ï¼š</p><ul><li>Pre-order, NLR</li><li>In-order, LNR</li><li>Post-order, LRN</li><li>Reverse pre-order, NRL</li><li>Reverse in-order, RNL</li><li>Reverse post-order, RLN</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">greater</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    ArrayList&lt;Object&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    LinkedList&lt;BSTNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(p);</span><br><span class="line">            p = p.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">BSTNode</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (pop.key &gt; key) &#123;</span><br><span class="line">                result.add(pop.value);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            p = pop.left;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ‰¾ä¹‹é—´"><a href="#æ‰¾ä¹‹é—´" class="headerlink" title="æ‰¾ä¹‹é—´"></a>æ‰¾ä¹‹é—´</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">between</span><span class="params">(<span class="type">int</span> key1, <span class="type">int</span> key2)</span> &#123;</span><br><span class="line">    ArrayList&lt;Object&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">BSTNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    LinkedList&lt;BSTNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(p);</span><br><span class="line">            p = p.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">BSTNode</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (pop.key &gt;= key1 &amp;&amp; pop.key &lt;= key2) &#123;</span><br><span class="line">                result.add(pop.value);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pop.key &gt; key2) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            p = pop.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>ä¼˜ç‚¹ï¼š</p><ol><li>å¦‚æœæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘çš„å¤§å°å·®è·ä¸è¶…è¿‡ä¸€ï¼Œå¯ä»¥ä¿è¯æœç´¢æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(log n)ï¼Œæ•ˆç‡é«˜ã€‚</li><li>æ’å…¥ã€åˆ é™¤ç»“ç‚¹ç­‰æ“ä½œä¹Ÿæ¯”è¾ƒå®¹æ˜“å®ç°ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚</li><li>å¯¹äºæœ‰åºæ•°æ®çš„æŸ¥è¯¢å’Œå¤„ç†ï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘éå¸¸é€‚ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸­åºéå†å¾—åˆ°æœ‰åºåºåˆ—ã€‚</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>å¦‚æœè¾“å…¥çš„æ•°æ®æ˜¯æœ‰åºæˆ–è€…è¿‘ä¼¼æœ‰åºçš„ï¼Œå°±ä¼šå‡ºç°æåº¦ä¸å¹³è¡¡çš„æƒ…å†µï¼Œå¯èƒ½å¯¼è‡´æœç´¢æ•ˆç‡ä¸‹é™ï¼Œæ—¶é—´å¤æ‚åº¦é€€åŒ–æˆO(n)ã€‚</li><li>å¯¹äºé¢‘ç¹åœ°æ’å…¥ã€åˆ é™¤æ“ä½œï¼Œéœ€è¦ç»´æŠ¤å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œä¾‹å¦‚çº¢é»‘æ ‘ã€AVL æ ‘ç­‰ï¼Œå¦åˆ™æœç´¢æ•ˆç‡ä¹Ÿä¼šä¸‹é™ã€‚</li><li>å¯¹äºå­˜åœ¨å¤§é‡é‡å¤æ•°æ®çš„æƒ…å†µï¼Œéœ€è¦åšç›¸åº”çš„å¤„ç†ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ ‘çš„æ·±åº¦å¢åŠ ï¼Œæœç´¢æ•ˆç‡ä¸‹é™ã€‚</li><li>å¯¹äºç»“ç‚¹è¿‡å¤šçš„æƒ…å†µï¼Œç”±äºæ ‘çš„ç©ºé—´å¼€é”€è¾ƒå¤§ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ¶ˆè€—è¿‡å¤§ï¼Œä¸é€‚åˆå¯¹å†…å­˜è¦æ±‚é«˜çš„åœºæ™¯ã€‚</li></ol><h3 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-åˆ é™¤èŠ‚ç‚¹-Leetcode-450"><a href="#E01-åˆ é™¤èŠ‚ç‚¹-Leetcode-450" class="headerlink" title="E01. åˆ é™¤èŠ‚ç‚¹-Leetcode 450"></a>E01. åˆ é™¤èŠ‚ç‚¹-Leetcode 450</h4><p>ä¾‹é¢˜å·²ç»è®²è¿‡ï¼Œç”¨éé€’å½’å’Œé€’å½’å‡å¯å®ç°ï¼Œè¿™é‡Œåªç»™å‡ºé€’å½’å‚è€ƒä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">deleteNode</span><span class="params">(TreeNode node, <span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (key &lt; node.val) &#123;</span><br><span class="line">        node.left = deleteNode(node.left, key);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.val &lt; key) &#123;</span><br><span class="line">        node.right = deleteNode(node.right, key);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.left == <span class="literal">null</span>) &#123; <span class="comment">// æƒ…å†µ1 - åªæœ‰å³å­©å­</span></span><br><span class="line">        <span class="keyword">return</span> node.right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.right == <span class="literal">null</span>) &#123; <span class="comment">// æƒ…å†µ2 - åªæœ‰å·¦å­©å­</span></span><br><span class="line">        <span class="keyword">return</span> node.left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">s</span> <span class="operator">=</span> node.right; <span class="comment">// æƒ…å†µ3 - æœ‰ä¸¤ä¸ªå­©å­</span></span><br><span class="line">    <span class="keyword">while</span> (s.left != <span class="literal">null</span>) &#123;</span><br><span class="line">        s = s.left;</span><br><span class="line">    &#125;</span><br><span class="line">    s.right = deleteNode(node.right, s.val);</span><br><span class="line">    s.left = node.left;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>æ ‘èŠ‚ç‚¹ TreeNode ç›¸å½“äºä¾‹é¢˜ä¸­çš„ BSTNode</p><ul><li>TreeNode  æœ‰å±æ€§ï¼šval, left, rightï¼Œå¹¶æœªåŒºåˆ†é”®å€¼</li><li>BSTNode æœ‰å±æ€§ï¼škey, value, left, rightï¼ŒåŒºåˆ†äº†é”®å€¼</li></ul></li><li><p>å®ƒçš„ TreeNode æ²¡æœ‰ keyï¼Œæ¯”è¾ƒç”¨çš„æ˜¯ TreeNode.val å±æ€§ä¸å¾…åˆ é™¤ key è¿›è¡Œæ¯”è¾ƒ</p></li></ul><h4 id="E02-æ–°å¢èŠ‚ç‚¹-Leetcode-701"><a href="#E02-æ–°å¢èŠ‚ç‚¹-Leetcode-701" class="headerlink" title="E02. æ–°å¢èŠ‚ç‚¹-Leetcode 701"></a>E02. æ–°å¢èŠ‚ç‚¹-Leetcode 701</h4><p>ä¾‹é¢˜ä¹Ÿè®²è¿‡äº†ï¼ˆputï¼‰ï¼Œä¸‹é¢ç»™å‡ºé€’å½’å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">insertIntoBST</span><span class="params">(TreeNode node, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(val &lt; node.val) &#123;</span><br><span class="line">        node.left = insertIntoBST(node.left, val);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(node.val &lt; val) &#123;</span><br><span class="line">        node.right = insertIntoBST(node.right, val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„äº‹é¡¹ä¸ä¸Šé¢˜ç›¸åŒï¼Œä¸å†èµ˜è¿°</li><li>é¢˜ç›®æç¤ºè¾“å…¥çš„ val ä¸€å®šä¸æ ‘ä¸­èŠ‚ç‚¹ä¸åŒï¼Œå› æ­¤åªéœ€è€ƒè™‘<strong>æ–°å¢</strong>æƒ…å†µï¼Œä¸ä¼šå‡ºç°<strong>æ›´æ–°</strong>æƒ…å†µ</li></ul><h4 id="E03-æŸ¥è¯¢èŠ‚ç‚¹-Leetcode-700"><a href="#E03-æŸ¥è¯¢èŠ‚ç‚¹-Leetcode-700" class="headerlink" title="E03. æŸ¥è¯¢èŠ‚ç‚¹-Leetcode 700"></a>E03. æŸ¥è¯¢èŠ‚ç‚¹-Leetcode 700</h4><p>ä¾‹é¢˜è®²è¿‡ï¼Œä¸‹é¢ç»™å‡ºé€’å½’å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">searchBST</span><span class="params">(TreeNode node, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(val &lt; node.val) &#123;</span><br><span class="line">        <span class="keyword">return</span> searchBST(node.left, val);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(node.val &lt; val) &#123;</span><br><span class="line">        <span class="keyword">return</span> searchBST(node.right, val);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E04-éªŒè¯äºŒå‰æœç´¢æ ‘-Leetcode-98"><a href="#E04-éªŒè¯äºŒå‰æœç´¢æ ‘-Leetcode-98" class="headerlink" title="E04. éªŒè¯äºŒå‰æœç´¢æ ‘-Leetcode 98"></a>E04. éªŒè¯äºŒå‰æœç´¢æ ‘-Leetcode 98</h4><p><strong>ä¸­åºéé€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">long</span> <span class="variable">prev</span> <span class="operator">=</span> Long.MIN_VALUE;</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(p);</span><br><span class="line">            p = p.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (prev &gt;= pop.val) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            prev = pop.val;</span><br><span class="line">            p = pop.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è®°å½• prev éœ€è¦ç”¨ longï¼Œå¦åˆ™è‹¥æµ‹è¯•ç”¨ä¾‹ä¸­æœ€å°çš„èŠ‚ç‚¹ä¸º Integer.MIN_VALUE åˆ™æµ‹è¯•ä¼šå¤±è´¥</li><li>æ³¨æ„ï¼Œå¦‚æœç›¸é‚»ä¸¤ä¸ªèŠ‚ç‚¹ç›¸ç­‰ï¼Œä¹Ÿä¸åº”å½“é€šè¿‡æµ‹è¯•ï¼Œä¾‹å¦‚ï¼Œä¸‹é¢çš„æ ‘ä¹Ÿæ˜¯ä¸åˆæ³•çš„</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">  / </span><br><span class="line"> 2 </span><br></pre></td></tr></table></figure><p><strong>ä¸­åºé€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> doValid(<span class="keyword">new</span> <span class="title class_">AtomicLong</span>(Long.MIN_VALUE),root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">doValid</span><span class="params">(AtomicLong prev, TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">a</span> <span class="operator">=</span> doValid(prev, node.left);</span><br><span class="line">    <span class="keyword">if</span> (prev.get() &gt;= node.val) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    prev.set(node.val);</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> doValid(prev, node.right);</span><br><span class="line">    <span class="keyword">return</span> a &amp;&amp; b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸ºä½•ä¸èƒ½ç”¨ Long æˆ– longï¼Ÿå› ä¸ºå®ƒä»¬éƒ½æ˜¯å±€éƒ¨å˜é‡ä¸”ä¸å¯å˜ï¼Œå› æ­¤æ¯æ¬¡èµ‹å€¼æ—¶ï¼Œå¹¶ä¸ä¼šæ”¹å˜å…¶å®ƒæ–¹æ³•è°ƒç”¨æ—¶çš„ prev</li><li>è¦ä¹ˆæŠŠ prev è®¾ç½®ä¸º AtomicLongï¼Œè¦ä¹ˆæŠŠ prev è®¾ç½®ä¸ºå…¨å±€å˜é‡ï¼Œè€Œä¸è¦é‡‡ç”¨æ–¹æ³•å‚æ•°è¿™æ ·çš„å±€éƒ¨å˜é‡</li><li>ä¸Šè¿°ä»£ç å¹¶ä¸æ˜¯æœ€æœ‰æ•ˆç‡çš„ï¼Œåˆ†æè¿‡ç¨‹è§è§†é¢‘è®²è§£</li></ul><p><strong>ä¸Šä¸‹é™é€’å½’</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> doValid(node, Long.MIN_VALUE, Long.MAX_VALUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">doValid</span><span class="params">(TreeNode node, <span class="type">long</span> min, <span class="type">long</span> max)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.val &lt;= min || node.val &gt;= max) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> doValid(node.left, min, node.val) &amp;&amp; doValid(node.right, node.val, max);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è®¾æ¯ä¸ªèŠ‚ç‚¹å¿…é¡»åœ¨ä¸€ä¸ªèŒƒå›´å†…ï¼š$(min, max)$ï¼Œä¸åŒ…å«è¾¹ç•Œï¼Œè‹¥èŠ‚ç‚¹å€¼è¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œåˆ™è¿”å› false</li><li>å¯¹äº node.left èŒƒå›´è‚¯å®šæ˜¯ $(min, node.val)$</li><li>å¯¹äº node.right èŒƒå›´è‚¯å®šæ˜¯ $(node.val, max)$</li><li>ä¸€å¼€å§‹ä¸çŸ¥é“ minï¼Œmax åˆ™å– java ä¸­é•¿æ•´æ•°çš„æœ€å°ã€æœ€å¤§å€¼</li><li>æœ¬è´¨æ˜¯å‰åºéå† + å‰ªæ</li></ul><h4 id="E05-æ±‚èŒƒå›´å’Œ-Leetcode-938"><a href="#E05-æ±‚èŒƒå›´å’Œ-Leetcode-938" class="headerlink" title="E05. æ±‚èŒƒå›´å’Œ-Leetcode 938"></a>E05. æ±‚èŒƒå›´å’Œ-Leetcode 938</h4><p><strong>ä¸­åºé€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rangeSumBST</span><span class="params">(TreeNode node, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> rangeSumBST(node.left, low, high);</span><br><span class="line">    <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (node.val &gt;= low &amp;&amp; node.val &lt;= high) &#123;</span><br><span class="line">        b = node.val;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a + b + rangeSumBST(node.right, low, high);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸­åºéé€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rangeSumBST</span><span class="params">(TreeNode node, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">p</span> <span class="operator">=</span> node;</span><br><span class="line">    LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(p != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(p);</span><br><span class="line">            p = p.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (pop.val &gt; high) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (pop.val &gt;= low) &#123;</span><br><span class="line">                sum += pop.val;</span><br><span class="line">            &#125;</span><br><span class="line">            p = pop.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>leedcode æ‰§è¡Œè€—æ—¶ 4ms</li></ul><p><strong>ä¸Šä¸‹é™é€’å½’å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rangeSumBST</span><span class="params">(TreeNode node, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.val &lt; low) &#123;</span><br><span class="line">        <span class="keyword">return</span> rangeSumBST(node.right, low, high);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (node.val &gt; high) &#123;</span><br><span class="line">        <span class="keyword">return</span> rangeSumBST(node.left, low, high);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node.val + </span><br><span class="line">        rangeSumBST(node.left, low, high) + </span><br><span class="line">        rangeSumBST(node.right, low, high);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>leetcode æ‰§è¡Œè€—æ—¶ 0 ms</li><li>node.val &lt; low åªéœ€è€ƒè™‘å®ƒå³å­æ ‘çš„ç´¯åŠ ç»“æœ</li><li>node.val &gt; high åªéœ€è€ƒè™‘å®ƒå·¦å­æ ‘çš„ç´¯åŠ ç»“æœ</li><li>node.val åœ¨èŒƒå›´å†…ï¼Œéœ€è¦æŠŠå½“å‰èŠ‚ç‚¹çš„å€¼åŠ ä¸Šå…¶å·¦å³å­æ ‘çš„ç´¯åŠ ç»“æœ</li></ul><h4 id="E06-æ ¹æ®å‰åºéå†ç»“æœæ„é€ äºŒå‰æœç´¢æ ‘-Leetcode-1008"><a href="#E06-æ ¹æ®å‰åºéå†ç»“æœæ„é€ äºŒå‰æœç´¢æ ‘-Leetcode-1008" class="headerlink" title="E06. æ ¹æ®å‰åºéå†ç»“æœæ„é€ äºŒå‰æœç´¢æ ‘-Leetcode 1008"></a>E06. æ ¹æ®å‰åºéå†ç»“æœæ„é€ äºŒå‰æœç´¢æ ‘-Leetcode 1008</h4><p><strong>ç›´æ¥æ’å…¥</strong></p><p>æ³¨æ„ï¼šæ ¹æ®å‰åºéå†çš„ç»“æœï¼Œå¯ä»¥å”¯ä¸€åœ°æ„é€ å‡ºä¸€ä¸ªäºŒå‰æœç´¢æ ‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">bstFromPreorder</span><span class="params">(<span class="type">int</span>[] preorder)</span> &#123;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> insert(<span class="literal">null</span>, preorder[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; preorder.length; i++) &#123;</span><br><span class="line">        insert(root, preorder[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> TreeNode <span class="title function_">insert</span><span class="params">(TreeNode node, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(val &lt; node.val) &#123;</span><br><span class="line">        node.left = insert(node.left, val);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(node.val &lt; val)&#123;</span><br><span class="line">        node.right = insert(node.right, val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸Šé™æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">bstFromPreorder</span><span class="params">(<span class="type">int</span>[] preorder)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> insert(preorder, Integer.MAX_VALUE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> TreeNode <span class="title function_">insert</span><span class="params">(<span class="type">int</span>[] preorder, <span class="type">int</span> max)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i == preorder.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">val</span> <span class="operator">=</span> preorder[i];</span><br><span class="line">    System.out.println(val + String.format(<span class="string">&quot;[%d]&quot;</span>, max));</span><br><span class="line">    <span class="keyword">if</span> (val &gt; max) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(val);</span><br><span class="line">    i++;</span><br><span class="line">    node.left = insert(preorder, node.val); </span><br><span class="line">    node.right = insert(preorder, max);   </span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾æ¬¡å¤„ç† prevorder ä¸­æ¯ä¸ªå€¼, è¿”å›åˆ›å»ºå¥½çš„èŠ‚ç‚¹æˆ– null ä½œä¸ºä¸Šä¸ªèŠ‚ç‚¹çš„å­©å­</p><ol><li><p>å¦‚æœè¶…è¿‡ä¸Šé™, è¿”å› null</p></li><li><p>å¦‚æœæ²¡è¶…è¿‡ä¸Šé™, åˆ›å»ºèŠ‚ç‚¹, å¹¶å°†å…¶å·¦å³å­©å­è®¾ç½®å®Œæ•´åè¿”å›</p><ul><li>i++ éœ€è¦æ”¾åœ¨è®¾ç½®å·¦å³å­©å­ä¹‹å‰ï¼Œæ„æ€æ˜¯ä»å‰©ä¸‹çš„å…ƒç´ ä¸­æŒ‘é€‰å·¦å³å­©å­</li></ul></li></ol><p><strong>åˆ†æ²»æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">bstFromPreorder</span><span class="params">(<span class="type">int</span>[] preorder)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> partition(preorder, <span class="number">0</span>, preorder.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> TreeNode <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] preorder, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (start &gt; end) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(preorder[start]);</span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> start + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (index &lt;= end) &#123;</span><br><span class="line">        <span class="keyword">if</span> (preorder[index] &gt; preorder[start]) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// index å°±æ˜¯å³å­æ ‘çš„èµ·ç‚¹</span></span><br><span class="line">    root.left = partition(preorder, start + <span class="number">1</span>, index - <span class="number">1</span>);</span><br><span class="line">    root.right = partition(preorder, index, end);</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆšå¼€å§‹ 8, 5, 1, 7, 10, 12ï¼Œæ–¹æ³•æ¯æ¬¡æ‰§è¡Œï¼Œç¡®å®šæœ¬æ¬¡çš„æ ¹èŠ‚ç‚¹å’Œå·¦å³å­æ ‘çš„åˆ†ç•Œçº¿</li><li>ç¬¬ä¸€æ¬¡ç¡®å®šæ ¹èŠ‚ç‚¹ä¸º 8ï¼Œå·¦å­æ ‘ 5, 1, 7ï¼Œå³å­æ ‘ 10, 12</li><li>å¯¹ 5, 1, 7 åšé€’å½’æ“ä½œï¼Œç¡®å®šæ ¹èŠ‚ç‚¹æ˜¯ 5ï¼Œ å·¦å­æ ‘æ˜¯ 1ï¼Œ å³å­æ ‘æ˜¯ 7</li><li>å¯¹ 1 åšé€’å½’æ“ä½œï¼Œç¡®å®šæ ¹èŠ‚ç‚¹æ˜¯ 1ï¼Œå·¦å³å­æ ‘ä¸º null</li><li>å¯¹ 7 åšé€’å½’æ“ä½œï¼Œç¡®å®šæ ¹èŠ‚ç‚¹æ˜¯ 7ï¼Œå·¦å³å­æ ‘ä¸º null</li><li>å¯¹ 10, 12 åšé€’å½’æ“ä½œï¼Œç¡®å®šæ ¹èŠ‚ç‚¹æ˜¯ 10ï¼Œå·¦å­æ ‘ä¸º nullï¼Œå³å­æ ‘ä¸º 12</li><li>å¯¹ 12 åšé€’å½’æ“ä½œï¼Œç¡®å®šæ ¹èŠ‚ç‚¹æ˜¯ 12ï¼Œå·¦å³å­æ ‘ä¸º null</li><li>é€’å½’ç»“æŸï¼Œè¿”å›æœ¬èŒƒå›´å†…çš„æ ¹èŠ‚ç‚¹</li></ul><h4 id="E07-äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ-Leetcode-235"><a href="#E07-äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ-Leetcode-235" class="headerlink" title="E07. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ-Leetcode 235"></a>E07. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ-Leetcode 235</h4><p>è¦ç‚¹ï¼šè‹¥ pï¼Œq åœ¨ ancestor çš„ä¸¤ä¾§ï¼Œåˆ™ ancestor å°±æ˜¯å®ƒä»¬çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> &#123;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">ancestor</span> <span class="operator">=</span> root;</span><br><span class="line">    <span class="keyword">while</span> (ancestor.val &gt; p.val &amp;&amp; ancestor.val &gt; q.val || </span><br><span class="line">           ancestor.val &lt; p.val &amp;&amp; ancestor.val &lt; q.val) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ancestor.val &gt; p.val) &#123;</span><br><span class="line">            ancestor = ancestor.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ancestor = ancestor.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ancestor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…¶å®ƒé¢˜ç›®"><a href="#å…¶å®ƒé¢˜ç›®" class="headerlink" title="å…¶å®ƒé¢˜ç›®"></a>å…¶å®ƒé¢˜ç›®</h4><table><thead><tr><th>é¢˜å·</th><th>åç§°</th></tr></thead><tbody><tr><td>Leetcode 236</td><td>äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</td></tr><tr><td>Leetcode 114</td><td>äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨</td></tr><tr><td>Leetcode 108</td><td>æœ‰åºæ•°ç»„æ„é€ å¹³è¡¡äºŒå‰æœç´¢æ ‘</td></tr><tr><td>Leetcode 1382</td><td>äºŒå‰æœç´¢æ ‘å˜ä¸ºå¹³è¡¡</td></tr></tbody></table><h2 id="3-3-AVL-æ ‘"><a href="#3-3-AVL-æ ‘" class="headerlink" title="3.3 AVL æ ‘"></a>3.3 AVL æ ‘</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><h4 id="å†å²-1"><a href="#å†å²-1" class="headerlink" title="å†å²"></a>å†å²</h4><blockquote><p>AVL æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œç”±æ‰˜å°”Â·å“ˆæ–¯ç‰¹ç½—å§†åœ¨ 1960 å¹´æå‡ºå¹¶åœ¨ 1962 å¹´å‘è¡¨ã€‚å®ƒçš„åå­—æ¥æºäºå‘æ˜è€…çš„åå­—ï¼šAdelson-Velsky å’Œ Landisï¼Œä»–ä»¬æ˜¯è‹è”æ•°å­¦å®¶ï¼Œäº 1962 å¹´å‘è¡¨äº†ä¸€ç¯‡è®ºæ–‡ï¼Œè¯¦ç»†ä»‹ç»äº† AVL æ ‘çš„æ¦‚å¿µå’Œæ€§è´¨ã€‚</p><p>åœ¨äºŒå‰æœç´¢æ ‘ä¸­ï¼Œå¦‚æœæ’å…¥çš„å…ƒç´ æŒ‰ç…§ç‰¹å®šçš„é¡ºåºæ’åˆ—ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ ‘å˜å¾—éå¸¸ä¸å¹³è¡¡ï¼Œä»è€Œé™ä½æœç´¢ã€æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒAVL æ ‘é€šè¿‡åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­ç»´æŠ¤ä¸€ä¸ªå¹³è¡¡å› å­æ¥ç¡®ä¿æ ‘çš„å¹³è¡¡ã€‚å¹³è¡¡å› å­æ˜¯å·¦å­æ ‘çš„é«˜åº¦å‡å»å³å­æ ‘çš„é«˜åº¦ã€‚å¦‚æœå¹³è¡¡å› å­çš„ç»å¯¹å€¼å¤§äºç­‰äº 2ï¼Œåˆ™é€šè¿‡æ—‹è½¬æ“ä½œæ¥é‡æ–°å¹³è¡¡æ ‘ã€‚</p><p>AVL æ ‘æ˜¯ç”¨äºå­˜å‚¨æœ‰åºæ•°æ®çš„ä¸€ç§é‡è¦æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯äºŒå‰æœç´¢æ ‘çš„ä¸€ç§æ”¹è¿›å’Œæ‰©å±•ã€‚å®ƒä¸ä»…èƒ½å¤Ÿæé«˜æœç´¢ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ•ˆç‡ï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿç¡®ä¿æ ‘çš„æ·±åº¦å§‹ç»ˆä¿æŒåœ¨ O(log n) çš„æ°´å¹³ã€‚éšç€è®¡ç®—æœºæŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒAVL æ ‘å·²ç»æˆä¸ºäº†è®¸å¤šé«˜æ•ˆç®—æ³•å’Œç³»ç»Ÿä¸­å¿…ä¸å¯å°‘çš„ä¸€ç§åŸºç¡€æ•°æ®ç»“æ„ã€‚</p></blockquote><p>å‰é¢ä»‹ç»è¿‡ï¼Œå¦‚æœä¸€æ£µäºŒå‰æœç´¢æ ‘é•¿çš„ä¸å¹³è¡¡ï¼Œé‚£ä¹ˆæŸ¥è¯¢çš„æ•ˆç‡ä¼šå—åˆ°å½±å“ï¼Œå¦‚ä¸‹å›¾</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230313090500760-20240713121119-0n5bs1t.png" alt="image-20230313090500760">â€‹</p><p>é€šè¿‡æ—‹è½¬å¯ä»¥è®©æ ‘é‡æ–°å˜å¾—å¹³è¡¡ï¼Œå¹¶ä¸”ä¸ä¼šæ”¹å˜äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼ˆå³å·¦è¾¹ä»ç„¶å°ï¼Œå³è¾¹ä»ç„¶å¤§ï¼‰</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230313090817485-20240713121119-y6vml1j.png" alt="image-20230313090817485">â€‹</p><h4 id="å¦‚ä½•åˆ¤æ–­å¤±è¡¡ï¼Ÿ"><a href="#å¦‚ä½•åˆ¤æ–­å¤±è¡¡ï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ¤æ–­å¤±è¡¡ï¼Ÿ"></a>å¦‚ä½•åˆ¤æ–­å¤±è¡¡ï¼Ÿ</h4><blockquote><p>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„<strong>å·¦å³å­©å­ï¼Œé«˜åº¦å·®è¶…è¿‡ 1</strong>ï¼Œåˆ™æ­¤èŠ‚ç‚¹å¤±è¡¡ï¼Œæ‰éœ€è¦æ—‹è½¬</p></blockquote><h4 id="å¤„ç†é«˜åº¦"><a href="#å¤„ç†é«˜åº¦" class="headerlink" title="å¤„ç†é«˜åº¦"></a>å¤„ç†é«˜åº¦</h4><p>å¦‚ä½•å¾—åˆ°èŠ‚ç‚¹é«˜åº¦ï¼Ÿä¸€ç§æ–¹å¼ä¹‹å‰åšè¿‡çš„ä¸€é“é¢˜ç›®ï¼šE05. æ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼ˆé«˜åº¦ï¼‰ï¼Œä½†ç”±äºæ±‚é«˜åº¦æ˜¯ä¸€ä¸ªéå¸¸é¢‘ç¹çš„æ“ä½œï¼Œå› æ­¤å°†é«˜åº¦ä½œä¸ºèŠ‚ç‚¹çš„ä¸€ä¸ªå±æ€§ï¼Œå°†æ¥æ–°å¢æˆ–åˆ é™¤æ—¶åŠæ—¶æ›´æ–°ï¼Œé»˜è®¤ä¸º 1ï¼ˆæŒ‰åŠ›æ‰£è¯´æ³•ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AVLNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> key;</span><br><span class="line">    Object value;</span><br><span class="line">    AVLNode left;</span><br><span class="line">    AVLNode right;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ±‚é«˜åº¦ä»£ç </strong></p><p>è¿™é‡ŒåŠ å…¥äº† height å‡½æ•°æ–¹ä¾¿æ±‚èŠ‚ç‚¹ä¸º null æ—¶çš„é«˜åº¦</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">height</span><span class="params">(AVLNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> node == <span class="literal">null</span> ? <span class="number">0</span> : node.height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ›´æ–°é«˜åº¦ä»£ç </strong></p><p>å°†æ¥æ–°å¢ã€åˆ é™¤ã€æ—‹è½¬æ—¶ï¼Œé«˜åº¦éƒ½å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦æ›´æ–°ã€‚ä¸‹é¢æ˜¯æ›´æ–°é«˜åº¦çš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateHeight</span><span class="params">(AVLNode node)</span> &#123;</span><br><span class="line">    node.height = Integer.max(height(node.left), height(node.right)) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½•æ—¶è§¦å‘å¤±è¡¡åˆ¤æ–­ï¼Ÿ"><a href="#ä½•æ—¶è§¦å‘å¤±è¡¡åˆ¤æ–­ï¼Ÿ" class="headerlink" title="ä½•æ—¶è§¦å‘å¤±è¡¡åˆ¤æ–­ï¼Ÿ"></a>ä½•æ—¶è§¦å‘å¤±è¡¡åˆ¤æ–­ï¼Ÿ</h4><p>å®šä¹‰å¹³è¡¡å› å­ï¼ˆbalance factorï¼‰å¦‚ä¸‹</p><p>$$<br>å¹³è¡¡å› å­ &#x3D; å·¦å­æ ‘é«˜åº¦ - å³å­æ ‘é«˜åº¦<br>$$</p><p>å½“å¹³è¡¡å› å­</p><ul><li>bf &#x3D; 0ï¼Œ1ï¼Œ-1 æ—¶ï¼Œè¡¨ç¤ºå·¦å³å¹³è¡¡</li><li>bf &gt; 1 æ—¶ï¼Œè¡¨ç¤ºå·¦è¾¹å¤ªé«˜</li><li>bf &lt; -1 æ—¶ï¼Œè¡¨ç¤ºå³è¾¹å¤ªé«˜</li></ul><p>å¯¹åº”ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">bf</span><span class="params">(AVLNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> height(node.left) - height(node.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æ’å…¥æ–°èŠ‚ç‚¹ï¼Œæˆ–åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œå¼•èµ·é«˜åº¦å˜åŒ–æ—¶ï¼Œä¾‹å¦‚</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310153645397-20240713121119-t1bczd4.png" alt="image-20230310153645397">â€‹</p><p>ç›®å‰æ­¤æ ‘å¹³è¡¡ï¼Œå½“å†æ’å…¥ä¸€ä¸ª 4 æ—¶ï¼ŒèŠ‚ç‚¹ä»¬çš„é«˜åº¦éƒ½äº§ç”Ÿäº†ç›¸åº”çš„å˜åŒ–ï¼Œ8 èŠ‚ç‚¹å¤±è¡¡äº†</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310153803661-20240713121119-zmbho8m.png" alt="image-20230310153803661">â€‹</p><p>åœ¨æ¯”å¦‚è¯´ï¼Œä¸‹é¢è¿™æ£µæ ‘ä¸€å¼€å§‹ä¹Ÿæ˜¯å¹³è¡¡çš„</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310154155728-20240713121119-khmjfcp.png" alt="image-20230310154155728">â€‹</p><p>å½“åˆ é™¤èŠ‚ç‚¹ 8 æ—¶ï¼ŒèŠ‚ç‚¹ä»¬çš„é«˜åº¦éƒ½äº§ç”Ÿäº†ç›¸åº”çš„å˜åŒ–ï¼Œ6 èŠ‚ç‚¹å¤±è¡¡äº†</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310154232729-20240713121119-pactw46.png" alt="image-20230310154232729">â€‹</p><h4 id="å¤±è¡¡çš„å››ç§æƒ…å†µ"><a href="#å¤±è¡¡çš„å››ç§æƒ…å†µ" class="headerlink" title="å¤±è¡¡çš„å››ç§æƒ…å†µ"></a>å¤±è¡¡çš„å››ç§æƒ…å†µ</h4><p><strong>LL</strong></p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310154459709-20240713121119-2ig1fox.png" alt="image-20230310154459709">â€‹</p><ul><li>å¤±è¡¡èŠ‚ç‚¹ï¼ˆå›¾ä¸­ 8 çº¢è‰²ï¼‰çš„ bf &gt; 1ï¼Œå³å·¦è¾¹æ›´é«˜</li><li>å¤±è¡¡èŠ‚ç‚¹çš„å·¦å­©å­ï¼ˆå›¾ä¸­ 6ï¼‰çš„ bf &gt;&#x3D; 0 å³å·¦å­©å­è¿™è¾¹ä¹Ÿæ˜¯å·¦è¾¹æ›´é«˜æˆ–ç­‰é«˜</li></ul><p><strong>LR</strong></p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310154858754-20240713121119-qo9c6nd.png" alt="image-20230310154858754">â€‹</p><ul><li>å¤±è¡¡èŠ‚ç‚¹ï¼ˆå›¾ä¸­ 8ï¼‰çš„ bf &gt; 1ï¼Œå³å·¦è¾¹æ›´é«˜</li><li>å¤±è¡¡èŠ‚ç‚¹çš„å·¦å­©å­ï¼ˆå›¾ä¸­ 6 çº¢è‰²ï¼‰çš„ bf &lt; 0 å³å·¦å­©å­è¿™è¾¹æ˜¯å³è¾¹æ›´é«˜</li></ul><p>å¯¹ç§°çš„è¿˜æœ‰ä¸¤ç§æƒ…å†µ</p><p><strong>RL</strong></p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310155048187-20240713121119-97998dw.png" alt="image-20230310155048187">â€‹</p><ul><li>å¤±è¡¡èŠ‚ç‚¹ï¼ˆå›¾ä¸­ 3ï¼‰çš„ bf &lt;-1ï¼Œå³å³è¾¹æ›´é«˜</li><li>å¤±è¡¡èŠ‚ç‚¹çš„å³å­©å­ï¼ˆå›¾ä¸­ 6 çº¢è‰²ï¼‰çš„ bf &gt; 0ï¼Œå³å³å­©å­è¿™è¾¹å·¦è¾¹æ›´é«˜</li></ul><p><strong>RR</strong></p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310155347349-20240713121119-sjv8sc2.png" alt="image-20230310155347349">â€‹</p><ul><li>å¤±è¡¡èŠ‚ç‚¹ï¼ˆå›¾ä¸­ 3ï¼‰çš„ bf &lt;-1ï¼Œå³å³è¾¹æ›´é«˜</li><li>å¤±è¡¡èŠ‚ç‚¹çš„å³å­©å­ï¼ˆå›¾ä¸­ 6 çº¢è‰²ï¼‰çš„ bf &lt;&#x3D; 0ï¼Œå³å³å­©å­è¿™è¾¹å³è¾¹æ›´é«˜æˆ–ç­‰é«˜</li></ul><h3 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="è§£å†³å¤±è¡¡"><a href="#è§£å†³å¤±è¡¡" class="headerlink" title="è§£å†³å¤±è¡¡"></a>è§£å†³å¤±è¡¡</h4><p>å¤±è¡¡å¯ä»¥é€šè¿‡æ ‘çš„æ—‹è½¬è§£å†³ã€‚ä»€ä¹ˆæ˜¯æ ‘çš„æ—‹è½¬å‘¢ï¼Ÿå®ƒæ˜¯åœ¨ä¸å¹²æ‰°å…ƒç´ é¡ºåºçš„æƒ…å†µä¸‹æ›´æ”¹ç»“æ„ï¼Œé€šå¸¸ç”¨æ¥è®©æ ‘çš„é«˜åº¦å˜å¾—å¹³è¡¡ã€‚</p><p>è§‚å¯Ÿä¸‹é¢ä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ—‹è½¬åï¼Œå¹¶æœªæ”¹å˜æ ‘çš„å·¦å°å³å¤§ç‰¹æ€§ï¼Œä½†æ ¹ã€çˆ¶ã€å­©å­èŠ‚ç‚¹éƒ½å‘ç”Ÿäº†å˜åŒ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    4                                   2</span><br><span class="line">   / \             4 right             / \</span><br><span class="line">  2   5      --------------------&gt;    1   4</span><br><span class="line"> / \         &lt;--------------------       / \</span><br><span class="line">1   3              2 left               3   5</span><br></pre></td></tr></table></figure><p><strong>å³æ—‹</strong></p><p>æ—‹è½¬å‰</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310162158692-20240713121119-auplsmf.png" alt="image-20230310162158692">â€‹</p><ul><li>çº¢è‰²èŠ‚ç‚¹ï¼Œæ—§æ ¹ï¼ˆå¤±è¡¡èŠ‚ç‚¹ï¼‰</li><li>é»„è‰²èŠ‚ç‚¹ï¼Œæ—§æ ¹çš„å·¦å­©å­ï¼Œå°†æ¥ä½œä¸ºæ–°æ ¹ï¼Œæ—§æ ¹æ˜¯å®ƒå³å­©å­</li><li>ç»¿è‰²èŠ‚ç‚¹ï¼Œæ–°æ ¹çš„å³å­©å­ï¼Œå°†æ¥è¦æ¢çˆ¹ä½œä¸ºæ—§æ ¹çš„å·¦å­©å­</li></ul><p>æ—‹è½¬å</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310162442932-20240713121119-5beqrry.png" alt="image-20230310162442932">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> AVLNode <span class="title function_">rightRotate</span><span class="params">(AVLNode red)</span> &#123;</span><br><span class="line">    <span class="type">AVLNode</span> <span class="variable">yellow</span> <span class="operator">=</span> red.left;</span><br><span class="line">    <span class="type">AVLNode</span> <span class="variable">green</span> <span class="operator">=</span> yellow.right;</span><br><span class="line">    yellow.right = red;</span><br><span class="line">    red.left = green;</span><br><span class="line">    <span class="keyword">return</span> yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å·¦æ—‹</strong></p><p>æ—‹è½¬å‰</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310162945078-20240713121119-ybyy6yk.png" alt="image-20230310162945078">â€‹</p><ul><li>çº¢è‰²èŠ‚ç‚¹ï¼Œæ—§æ ¹ï¼ˆå¤±è¡¡èŠ‚ç‚¹ï¼‰</li><li>é»„è‰²èŠ‚ç‚¹ï¼Œæ—§æ ¹çš„å³å­©å­ï¼Œå°†æ¥ä½œä¸ºæ–°æ ¹ï¼Œæ—§æ ¹æ˜¯å®ƒå·¦å­©å­</li><li>ç»¿è‰²èŠ‚ç‚¹ï¼Œæ–°æ ¹çš„å·¦å­©å­ï¼Œå°†æ¥è¦æ¢çˆ¹ä½œä¸ºæ—§æ ¹çš„å³å­©å­</li></ul><p>æ—‹è½¬å</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310163019508-20240713121119-j2ndihl.png" alt="image-20230310163019508">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> AVLNode <span class="title function_">leftRotate</span><span class="params">(AVLNode red)</span> &#123;</span><br><span class="line">    <span class="type">AVLNode</span> <span class="variable">yellow</span> <span class="operator">=</span> red.right;</span><br><span class="line">    <span class="type">AVLNode</span> <span class="variable">green</span> <span class="operator">=</span> yellow.left;</span><br><span class="line">    yellow.left = red;</span><br><span class="line">    red.right = green;</span><br><span class="line">    <span class="keyword">return</span> yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å·¦å³æ—‹</strong></p><p>æŒ‡å…ˆå·¦æ—‹å·¦å­æ ‘ï¼Œå†å³æ—‹æ ¹èŠ‚ç‚¹ï¼ˆå¤±è¡¡ï¼‰ï¼Œè¿™æ—¶ä¸€æ¬¡æ—‹è½¬å¹¶ä¸èƒ½è§£å†³å¤±è¡¡</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310171424362-20240713121119-3boq3c0.png" alt="image-20230310171424362">â€‹</p><p>å·¦å­æ ‘æ—‹è½¬å</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310171636904-20240713121119-3vljoo2.png" alt="image-20230310171636904">â€‹</p><p>æ ¹å³æ—‹å‰</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310171821578-20240713121119-ab0r663.png" alt="image-20230310171821578">â€‹</p><p>æ ¹å³æ—‹å</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310171903417-20240713121119-3vn7hst.png" alt="image-20230310171903417">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> AVLNode <span class="title function_">leftRightRotate</span><span class="params">(AVLNode root)</span> &#123;</span><br><span class="line">    root.left = leftRotate(root.left);</span><br><span class="line">    <span class="keyword">return</span> rightRotate(root);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å³å·¦æ—‹</strong></p><p>æŒ‡å…ˆå³æ—‹å³å­æ ‘ï¼Œå†å·¦æ—‹æ ¹èŠ‚ç‚¹ï¼ˆå¤±è¡¡ï¼‰</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310172212302-20240713121119-cg121o9.png" alt="image-20230310172212302">â€‹</p><p>å³å­æ ‘å³æ—‹å</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310172234154-20240713121119-m7qhkxn.png" alt="image-20230310172234154">â€‹</p><p>æ ¹å·¦æ—‹å‰</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310172303012-20240713121119-d6b9i9s.png" alt="image-20230310172303012">â€‹</p><p>æ ¹å·¦æ—‹å</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230310172317379-20240713121119-r400jno.png" alt="image-20230310172317379">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> AVLNode <span class="title function_">rightLeftRotate</span><span class="params">(AVLNode root)</span> &#123;</span><br><span class="line">    root.right = rightRotate(root.right);</span><br><span class="line">    <span class="keyword">return</span> leftRotate(root);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆ¤æ–­åŠè°ƒæ•´å¹³è¡¡ä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> AVLNode <span class="title function_">balance</span><span class="params">(AVLNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">bf</span> <span class="operator">=</span> bf(node);</span><br><span class="line">    <span class="keyword">if</span> (bf &gt; <span class="number">1</span> &amp;&amp; bf(node.left) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> rightRotate(node);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bf &gt; <span class="number">1</span> &amp;&amp; bf(node.left) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> rightLeftRotate(node);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bf &lt; -<span class="number">1</span> &amp;&amp; bf(node.right) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> leftRightRotate(node);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bf &lt; -<span class="number">1</span> &amp;&amp; bf(node.right) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> rightRotate(node);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå››ç§æ—‹è½¬ä»£ç é‡Œï¼Œéƒ½éœ€è¦æ›´æ–°é«˜åº¦ï¼Œéœ€è¦æ›´æ–°çš„èŠ‚ç‚¹æ˜¯çº¢è‰²ã€é»„è‰²ï¼Œè€Œç»¿è‰²èŠ‚ç‚¹é«˜åº¦ä¸å˜</p><h4 id="æ–°å¢-1"><a href="#æ–°å¢-1" class="headerlink" title="æ–°å¢"></a>æ–°å¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">    root = doPut(root, key, value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> AVLNode <span class="title function_">doPut</span><span class="params">(AVLNode node, <span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AVLNode</span>(key, value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (key == node.key) &#123;</span><br><span class="line">        node.value = value;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (key &lt; node.key) &#123;</span><br><span class="line">        node.left = doPut(node.left, key, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        node.right = doPut(node.right, key, value);</span><br><span class="line">    &#125;</span><br><span class="line">    updateHeight(node);</span><br><span class="line">    <span class="keyword">return</span> balance(node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤-1"><a href="#åˆ é™¤-1" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    root = doRemove(root, key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> AVLNode <span class="title function_">doRemove</span><span class="params">(AVLNode node, <span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (key &lt; node.key) &#123;</span><br><span class="line">        node.left = doRemove(node.left, key);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.key &lt; key) &#123;</span><br><span class="line">        node.right = doRemove(node.right, key);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node.left == <span class="literal">null</span>) &#123;</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.right == <span class="literal">null</span>) &#123;</span><br><span class="line">            node = node.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">AVLNode</span> <span class="variable">s</span> <span class="operator">=</span> node.right;</span><br><span class="line">            <span class="keyword">while</span> (s.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                s = s.left;</span><br><span class="line">            &#125;</span><br><span class="line">            s.right = doRemove(node.right, s.key);</span><br><span class="line">            s.left = node.left;</span><br><span class="line">            node = s;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    updateHeight(node);</span><br><span class="line">    <span class="keyword">return</span> balance(node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç å¤‡ä»½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AVLTree</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AVLNode</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> key;</span><br><span class="line">        Object value;</span><br><span class="line">        AVLNode left;</span><br><span class="line">        AVLNode right;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">AVLNode</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">AVLNode</span><span class="params">(<span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">AVLNode</span><span class="params">(<span class="type">int</span> key, Object value, AVLNode left, AVLNode right)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.left = left;</span><br><span class="line">            <span class="built_in">this</span>.right = right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    AVLNode root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AVLNode <span class="title function_">leftRotate</span><span class="params">(AVLNode p)</span> &#123;</span><br><span class="line">        <span class="type">AVLNode</span> <span class="variable">r</span> <span class="operator">=</span> p.right;</span><br><span class="line">        <span class="type">AVLNode</span> <span class="variable">b</span> <span class="operator">=</span> r.left;</span><br><span class="line">        r.left = p;</span><br><span class="line">        p.right = b;</span><br><span class="line">        updateHeight(p);</span><br><span class="line">        updateHeight(r);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateHeight</span><span class="params">(AVLNode node)</span> &#123;</span><br><span class="line">        node.height = Integer.max(height(node.left), height(node.right)) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AVLNode <span class="title function_">rightRotate</span><span class="params">(AVLNode r)</span> &#123;</span><br><span class="line">        <span class="type">AVLNode</span> <span class="variable">a</span> <span class="operator">=</span> r.left;</span><br><span class="line">        <span class="type">AVLNode</span> <span class="variable">b</span> <span class="operator">=</span> a.right;</span><br><span class="line">        a.right = r;</span><br><span class="line">        r.left = b;</span><br><span class="line">        updateHeight(r);</span><br><span class="line">        updateHeight(a);</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AVLNode <span class="title function_">leftRightRotate</span><span class="params">(AVLNode p)</span> &#123;</span><br><span class="line">        <span class="type">AVLNode</span> <span class="variable">r</span> <span class="operator">=</span> p.left;</span><br><span class="line">        p.left = leftRotate(r);</span><br><span class="line">        <span class="keyword">return</span> rightRotate(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AVLNode <span class="title function_">rightLeftRotate</span><span class="params">(AVLNode p)</span> &#123;</span><br><span class="line">        <span class="type">AVLNode</span> <span class="variable">r</span> <span class="operator">=</span> p.right;</span><br><span class="line">        p.right = rightRotate(r);</span><br><span class="line">        <span class="keyword">return</span> leftRotate(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">height</span><span class="params">(AVLNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> node == <span class="literal">null</span> ? <span class="number">0</span> : node.height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        root = doRemove(root, key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AVLNode <span class="title function_">doRemove</span><span class="params">(AVLNode node, <span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; node.key) &#123;</span><br><span class="line">            node.left = doRemove(node.left, key);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.key &lt; key) &#123;</span><br><span class="line">            node.right = doRemove(node.right, key);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (node.left == <span class="literal">null</span>) &#123;</span><br><span class="line">                node = node.right;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (node.right == <span class="literal">null</span>) &#123;</span><br><span class="line">                node = node.left;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">AVLNode</span> <span class="variable">s</span> <span class="operator">=</span> node.right;</span><br><span class="line">                <span class="keyword">while</span> (s.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                    s = s.left;</span><br><span class="line">                &#125;</span><br><span class="line">                s.right = doRemove(node.right, s.key);</span><br><span class="line">                s.left = node.left;</span><br><span class="line">                node = s;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        updateHeight(node);</span><br><span class="line">        <span class="keyword">return</span> balance(node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">        root = doPut(root, key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AVLNode <span class="title function_">doPut</span><span class="params">(AVLNode node, <span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AVLNode</span>(key, value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (key == node.key) &#123;</span><br><span class="line">            node.value = value;</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; node.key) &#123;</span><br><span class="line">            node.left = doPut(node.left, key, value);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            node.right = doPut(node.right, key, value);</span><br><span class="line">        &#125;</span><br><span class="line">        updateHeight(node);</span><br><span class="line">        <span class="keyword">return</span> balance(node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">bf</span><span class="params">(AVLNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> height(node.left) - height(node.right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AVLNode <span class="title function_">balance</span><span class="params">(AVLNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">bf</span> <span class="operator">=</span> bf(node);</span><br><span class="line">        <span class="keyword">if</span> (bf &gt; <span class="number">1</span> &amp;&amp; bf(node.left) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> rightRotate(node);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bf &gt; <span class="number">1</span> &amp;&amp; bf(node.left) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> rightLeftRotate(node);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bf &lt; -<span class="number">1</span> &amp;&amp; bf(node.right) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> leftRightRotate(node);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bf &lt; -<span class="number">1</span> &amp;&amp; bf(node.right) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> rightRotate(node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å°ç»“-2"><a href="#å°ç»“-2" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>AVLæ ‘çš„ä¼˜ç‚¹ï¼š</p><ol><li>AVLæ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡æ ‘ï¼Œä¿è¯äº†æ ‘çš„é«˜åº¦å¹³è¡¡ï¼Œä»è€Œä¿è¯äº†æ ‘çš„æŸ¥è¯¢å’Œæ’å…¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(logn)ã€‚</li><li>ç›¸æ¯”äºä¸€èˆ¬äºŒå‰æœç´¢æ ‘ï¼ŒAVLæ ‘å¯¹æŸ¥è¯¢æ•ˆç‡çš„æå‡æ›´ä¸ºæ˜¾è‘—ï¼Œå› ä¸ºå…¶å·¦å³å­æ ‘é«˜åº¦çš„å·®å€¼ä¸ä¼šè¶…è¿‡1ï¼Œé¿å…äº†äºŒå‰æœç´¢æ ‘é€€åŒ–ä¸ºé“¾è¡¨çš„æƒ…å†µï¼Œä½¿å¾—æ•´æ£µæ ‘çš„é«˜åº¦æ›´ä½ã€‚</li><li>AVLæ ‘çš„åˆ é™¤æ“ä½œæ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦åƒæ’å…¥ä¸€æ ·æ—‹è½¬å³å¯ï¼Œåœ¨æ—‹è½¬è¿‡ç¨‹ä¸­æ ‘çš„å¹³è¡¡æ€§å¯ä»¥å¾—åˆ°ç»´æŠ¤ã€‚</li></ol><p>AVLæ ‘çš„ç¼ºç‚¹ï¼š</p><ol><li>AVLæ ‘æ¯æ¬¡æ’å…¥æˆ–åˆ é™¤èŠ‚ç‚¹æ—¶éœ€è¦è¿›è¡Œæ—‹è½¬æ“ä½œï¼Œè¿™ä¸ªæ“ä½œæ¯”è¾ƒè€—æ—¶ï¼Œå› æ­¤åœ¨ä¸€äº›åº”ç”¨ä¸­ä¸å¤ªé€‚ç”¨ã€‚</li><li>åœ¨AVLæ ‘è¿›è¡Œæ’å…¥æˆ–åˆ é™¤æ“ä½œæ—¶ï¼Œä¸ºä¿æŒæ ‘çš„å¹³è¡¡éœ€è¦ä¸æ–­è¿›è¡Œæ—‹è½¬æ“ä½œï¼Œåœ¨ä¸€äº›é«˜å¹¶å‘ç¯èŠ‚å’Œå¤§æ•°æ®é‡ç¯å¢ƒä¸‹ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å¤šä½™çš„å†™é”å¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚</li><li>AVLæ ‘çš„æ—‹è½¬æ“ä½œç›¸å¯¹è¾ƒå¤šï¼Œå› æ­¤åœ¨ä¸€äº›åº”ç”¨ä¸­å¯èƒ½ä¼šé€ æˆè¾ƒå¤§çš„ç©ºé—´æµªè´¹ã€‚</li></ol><h2 id="3-4-çº¢é»‘æ ‘"><a href="#3-4-çº¢é»‘æ ‘" class="headerlink" title="3.4 çº¢é»‘æ ‘"></a>3.4 çº¢é»‘æ ‘</h2><h3 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><h4 id="å†å²-2"><a href="#å†å²-2" class="headerlink" title="å†å²"></a>å†å²</h4><blockquote><p>çº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæœ€æ—©ç”±ä¸€ä½åå«Rudolf Bayerçš„å¾·å›½è®¡ç®—æœºç§‘å­¦å®¶äº1972å¹´å‘æ˜ã€‚ç„¶è€Œï¼Œæœ€åˆçš„æ ‘å½¢ç»“æ„ä¸æ˜¯ç°åœ¨çš„çº¢é»‘æ ‘ï¼Œè€Œæ˜¯ä¸€ç§ç§°ä¸ºBæ ‘çš„ç»“æ„ï¼Œå®ƒæ˜¯ä¸€ç§å¤šå‰æ ‘ï¼Œå¯ç”¨äºåœ¨ç£ç›˜ä¸Šå­˜å‚¨å¤§é‡æ•°æ®ã€‚</p><p>åœ¨1980å¹´ä»£æ—©æœŸï¼Œè®¡ç®—æœºç§‘å­¦å®¶Leonard Adlemanå’ŒDaniel Sleatoræ¨å¹¿äº†çº¢é»‘æ ‘ï¼Œå¹¶è¯æ˜äº†å®ƒçš„è‡ªå¹³è¡¡æ€§å’Œé«˜æ•ˆæ€§ã€‚ä»é‚£æ—¶èµ·ï¼Œçº¢é»‘æ ‘æˆä¸ºäº†æœ€æµè¡Œçš„è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ä¹‹ä¸€ï¼Œå¹¶è¢«å¹¿æ³›åº”ç”¨äºè®¸å¤šé¢†åŸŸï¼Œå¦‚ç¼–è¯‘å™¨ã€æ“ä½œç³»ç»Ÿã€æ•°æ®åº“ç­‰ã€‚</p><p>çº¢é»‘æ ‘çš„åå­—æ¥æºäºçº¢è‰²èŠ‚ç‚¹å’Œé»‘è‰²èŠ‚ç‚¹çš„äº¤æ›¿å‡ºç°ï¼Œå®ƒä»¬çš„é¢œè‰²æ˜¯ç”¨æ¥ç»´æŠ¤æ ‘çš„å¹³è¡¡æ€§çš„å…³é”®ã€‚å®ƒä»¬çš„é¢œè‰²å…·æœ‰ç‰¹æ®Šçš„æ„ä¹‰ï¼Œé»‘è‰²èŠ‚ç‚¹ä»£è¡¨æ™®é€šèŠ‚ç‚¹ï¼Œè€Œçº¢è‰²èŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªæ–°æ·»åŠ çš„èŠ‚ç‚¹ï¼Œå®ƒä»¬å¿…é¡»æ»¡è¶³ä¸€äº›ç‰¹å®šçš„è§„åˆ™æ‰èƒ½ç»´æŒæ ‘çš„å¹³è¡¡æ€§ã€‚</p></blockquote><p>çº¢é»‘æ ‘ä¹Ÿæ˜¯ä¸€ç§è‡ªå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œè¾ƒä¹‹ AVLï¼Œæ’å…¥å’Œåˆ é™¤æ—¶æ—‹è½¬æ¬¡æ•°æ›´å°‘</p><h4 id="çº¢é»‘æ ‘ç‰¹æ€§"><a href="#çº¢é»‘æ ‘ç‰¹æ€§" class="headerlink" title="çº¢é»‘æ ‘ç‰¹æ€§"></a>çº¢é»‘æ ‘ç‰¹æ€§</h4><ol><li>æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰ä¸¤ç§é¢œè‰²ï¼šçº¢ğŸ”´ã€é»‘âš«ï¸</li><li>æ‰€æœ‰ null è§†ä¸ºé»‘è‰²âš«ï¸</li><li>çº¢è‰²ğŸ”´èŠ‚ç‚¹ä¸èƒ½ç›¸é‚»</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²âš«ï¸</li><li>ä»æ ¹åˆ°ä»»æ„ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œè·¯å¾„ä¸­çš„é»‘è‰²âš«ï¸èŠ‚ç‚¹æ•°ä¸€æ ·</li></ol><h3 id="å®ç°-2"><a href="#å®ç°-2" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="æ’å…¥æƒ…å†µ"><a href="#æ’å…¥æƒ…å†µ" class="headerlink" title="æ’å…¥æƒ…å†µ"></a>æ’å…¥æƒ…å†µ</h4><p>æ’å…¥èŠ‚ç‚¹å‡è§†ä¸ºçº¢è‰²ğŸ”´</p><p>case 1ï¼šæ’å…¥èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹ï¼Œå°†æ ¹èŠ‚ç‚¹å˜é»‘âš«ï¸</p><p>case 2ï¼šæ’å…¥èŠ‚ç‚¹çš„çˆ¶äº²è‹¥ä¸ºé»‘è‰²âš«ï¸ï¼Œæ ‘çš„çº¢é»‘æ€§è´¨ä¸å˜ï¼Œæ— éœ€è°ƒæ•´</p><p>æ’å…¥èŠ‚ç‚¹çš„çˆ¶äº²ä¸ºçº¢è‰²ğŸ”´ï¼Œè§¦å‘çº¢çº¢ç›¸é‚»</p><p>case 3ï¼šå”å”ä¸ºçº¢è‰²ğŸ”´</p><ul><li>çˆ¶äº²å˜ä¸ºé»‘è‰²âš«ï¸ï¼Œä¸ºäº†ä¿è¯é»‘è‰²å¹³è¡¡ï¼Œè¿å¸¦çš„å”å”ä¹Ÿå˜ä¸ºé»‘è‰²âš«ï¸</li><li>ç¥–çˆ¶å¦‚æœæ˜¯é»‘è‰²ä¸å˜ï¼Œä¼šé€ æˆè¿™é¢—å­æ ‘é»‘è‰²è¿‡å¤šï¼Œå› æ­¤ç¥–çˆ¶èŠ‚ç‚¹å˜ä¸ºçº¢è‰²ğŸ”´</li><li>ç¥–çˆ¶å¦‚æœå˜æˆçº¢è‰²ï¼Œå¯èƒ½ä¼šæ¥ç€è§¦å‘çº¢çº¢ç›¸é‚»ï¼Œå› æ­¤å¯¹å°†ç¥–çˆ¶è¿›è¡Œé€’å½’è°ƒæ•´</li></ul><p>case 4ï¼šå”å”ä¸ºé»‘è‰²âš«ï¸</p><ol><li><p>çˆ¶äº²ä¸ºå·¦å­©å­ï¼Œæ’å…¥èŠ‚ç‚¹ä¹Ÿæ˜¯å·¦å­©å­ï¼Œæ­¤æ—¶å³ LL ä¸å¹³è¡¡</p><ul><li>è®©çˆ¶äº²å˜é»‘âš«ï¸ï¼Œä¸ºäº†ä¿è¯è¿™é¢—å­æ ‘é»‘è‰²ä¸å˜ï¼Œå°†ç¥–çˆ¶å˜æˆçº¢ğŸ”´ï¼Œä½†å”å”å­æ ‘å°‘äº†ä¸€ä¸ªé»‘è‰²</li><li>ç¥–çˆ¶å³æ—‹ï¼Œè¡¥é½ä¸€ä¸ªé»‘è‰²ç»™å”å”ï¼Œçˆ¶äº²æ—‹è½¬ä¸Šå»å–ä»£ç¥–çˆ¶ï¼Œç”±äºå®ƒæ˜¯é»‘è‰²ï¼Œä¸ä¼šå†æ¬¡è§¦å‘çº¢çº¢ç›¸é‚»</li></ul></li><li><p>çˆ¶äº²ä¸ºå·¦å­©å­ï¼Œæ’å…¥èŠ‚ç‚¹æ˜¯å³å­©å­ï¼Œæ­¤æ—¶å³ LR ä¸å¹³è¡¡</p><ul><li>çˆ¶äº²å·¦æ—‹ï¼Œå˜æˆ LL æƒ…å†µï¼ŒæŒ‰ 1. æ¥åç»­å¤„ç†</li></ul></li><li><p>çˆ¶äº²ä¸ºå³å­©å­ï¼Œæ’å…¥èŠ‚ç‚¹ä¹Ÿæ˜¯å³å­©å­ï¼Œæ­¤æ—¶å³ RR ä¸å¹³è¡¡</p><ul><li>è®©çˆ¶äº²å˜é»‘âš«ï¸ï¼Œä¸ºäº†ä¿è¯è¿™é¢—å­æ ‘é»‘è‰²ä¸å˜ï¼Œå°†ç¥–çˆ¶å˜æˆçº¢ğŸ”´ï¼Œä½†å”å”å­æ ‘å°‘äº†ä¸€ä¸ªé»‘è‰²</li><li>ç¥–çˆ¶å·¦æ—‹ï¼Œè¡¥é½ä¸€ä¸ªé»‘è‰²ç»™å”å”ï¼Œçˆ¶äº²æ—‹è½¬ä¸Šå»å–ä»£ç¥–çˆ¶ï¼Œç”±äºå®ƒæ˜¯é»‘è‰²ï¼Œä¸ä¼šå†æ¬¡è§¦å‘çº¢çº¢ç›¸é‚»</li></ul></li><li><p>çˆ¶äº²ä¸ºå³å­©å­ï¼Œæ’å…¥èŠ‚ç‚¹æ˜¯å·¦å­©å­ï¼Œæ­¤æ—¶å³ RL ä¸å¹³è¡¡</p><ul><li>çˆ¶äº²å³æ—‹ï¼Œå˜æˆ RR æƒ…å†µï¼ŒæŒ‰ 3. æ¥åç»­å¤„ç†</li></ul></li></ol><h4 id="åˆ é™¤æƒ…å†µ"><a href="#åˆ é™¤æƒ…å†µ" class="headerlink" title="åˆ é™¤æƒ…å†µ"></a>åˆ é™¤æƒ…å†µ</h4><p>case0ï¼šå¦‚æœåˆ é™¤èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­©å­</p><ul><li>äº¤æ¢åˆ é™¤èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹çš„ keyï¼Œvalueï¼Œé€’å½’åˆ é™¤åç»§èŠ‚ç‚¹ï¼Œç›´åˆ°è¯¥èŠ‚ç‚¹æ²¡æœ‰å­©å­æˆ–åªå‰©ä¸€ä¸ªå­©å­</li></ul><p>å¦‚æœåˆ é™¤èŠ‚ç‚¹æ²¡æœ‰å­©å­æˆ–åªå‰©ä¸€ä¸ªå­©å­</p><p>case 1ï¼šåˆ çš„æ˜¯æ ¹èŠ‚ç‚¹</p><ul><li>åˆ å®Œäº†ï¼Œç›´æ¥å°† root &#x3D; null</li><li>ç”¨å‰©ä½™èŠ‚ç‚¹æ›¿æ¢äº†æ ¹èŠ‚ç‚¹çš„ keyï¼Œvalueï¼Œæ ¹èŠ‚ç‚¹å­©å­ &#x3D; nullï¼Œé¢œè‰²ä¿æŒé»‘è‰²âš«ï¸ä¸å˜</li></ul><p>åˆ é»‘è‰²ä¼šå¤±è¡¡ï¼Œåˆ çº¢è‰²ä¸ä¼šå¤±è¡¡ï¼Œä½†åˆ é»‘è‰²æœ‰ä¸€ç§ç®€å•æƒ…å†µ</p><p>case 2ï¼šåˆ çš„æ˜¯é»‘âš«ï¸ï¼Œå‰©ä¸‹çš„æ˜¯çº¢ğŸ”´ï¼Œå‰©ä¸‹è¿™ä¸ªçº¢èŠ‚ç‚¹å˜é»‘âš«ï¸</p><p>åˆ é™¤èŠ‚ç‚¹å’Œå‰©ä¸‹èŠ‚ç‚¹éƒ½æ˜¯é»‘âš«ï¸ï¼Œè§¦å‘åŒé»‘ï¼ŒåŒé»‘æ„æ€æ˜¯ï¼Œ<strong>å°‘äº†ä¸€ä¸ªé»‘</strong></p><p>case 3ï¼šè¢«è°ƒæ•´èŠ‚ç‚¹çš„å…„å¼Ÿä¸ºçº¢ğŸ”´ï¼Œæ­¤æ—¶ä¸¤ä¸ªä¾„å­å®šä¸ºé»‘ âš«ï¸</p><ul><li>åˆ é™¤èŠ‚ç‚¹æ˜¯å·¦å­©å­ï¼Œçˆ¶äº²å·¦æ—‹</li><li>åˆ é™¤èŠ‚ç‚¹æ˜¯å³å­©å­ï¼Œçˆ¶äº²å³æ—‹</li><li>çˆ¶äº²å’Œå…„å¼Ÿè¦å˜è‰²ï¼Œä¿è¯æ—‹è½¬åé¢œè‰²å¹³è¡¡</li><li>æ—‹è½¬çš„ç›®çš„æ˜¯è®©é»‘ä¾„å­å˜ä¸ºåˆ é™¤èŠ‚ç‚¹çš„é»‘å…„å¼Ÿï¼Œå¯¹åˆ é™¤èŠ‚ç‚¹å†æ¬¡é€’å½’ï¼Œè¿›å…¥ case 4 æˆ– case 5</li></ul><p>case 4ï¼šè¢«è°ƒæ•´èŠ‚ç‚¹çš„å…„å¼Ÿä¸ºé»‘âš«ï¸ï¼Œä¸¤ä¸ªä¾„å­éƒ½ä¸ºé»‘ âš«ï¸</p><ul><li>å°†å…„å¼Ÿå˜çº¢ğŸ”´ï¼Œç›®çš„æ˜¯å°†åˆ é™¤èŠ‚ç‚¹å’Œå…„å¼Ÿé‚£è¾¹çš„é»‘è‰²é«˜åº¦åŒæ—¶å‡å°‘ 1</li><li>å¦‚æœçˆ¶äº²æ˜¯çº¢ğŸ”´ï¼Œåˆ™éœ€å°†çˆ¶äº²å˜ä¸ºé»‘ï¼Œé¿å…çº¢çº¢ï¼Œæ­¤æ—¶è·¯å¾„é»‘èŠ‚ç‚¹æ•°ç›®ä¸å˜</li><li>å¦‚æœçˆ¶äº²æ˜¯é»‘âš«ï¸ï¼Œè¯´æ˜è¿™æ¡è·¯å¾„è¿˜æ˜¯å°‘é»‘ï¼Œå†æ¬¡è®©çˆ¶èŠ‚ç‚¹è§¦å‘åŒé»‘</li></ul><p>case 5ï¼šè¢«è°ƒæ•´èŠ‚ç‚¹çš„å…„å¼Ÿä¸ºé»‘âš«ï¸ï¼Œè‡³å°‘ä¸€ä¸ªçº¢ğŸ”´ä¾„å­</p><ul><li><p>å¦‚æœå…„å¼Ÿæ˜¯å·¦å­©å­ï¼Œå·¦ä¾„å­æ˜¯çº¢ğŸ”´ï¼ŒLL ä¸å¹³è¡¡</p><ul><li>å°†æ¥åˆ é™¤èŠ‚ç‚¹è¿™è¾¹å°‘ä¸ªé»‘ï¼Œæ‰€ä»¥æœ€åæ—‹è½¬è¿‡æ¥çš„çˆ¶äº²éœ€è¦å˜æˆé»‘âš«ï¸ï¼Œå¹³è¡¡èµ·è§ï¼Œå·¦ä¾„å­ä¹Ÿæ˜¯é»‘âš«ï¸</li><li>åŸæ¥å…„å¼Ÿè¦æˆä¸ºçˆ¶äº²ï¼Œéœ€è¦ä¿ç•™çˆ¶äº²é¢œè‰²</li></ul></li><li><p>å¦‚æœå…„å¼Ÿæ˜¯å·¦å­©å­ï¼Œå³ä¾„å­æ˜¯çº¢ğŸ”´ï¼ŒLR ä¸å¹³è¡¡</p><ul><li>å°†æ¥åˆ é™¤èŠ‚ç‚¹è¿™è¾¹å°‘ä¸ªé»‘ï¼Œæ‰€ä»¥æœ€åæ—‹è½¬è¿‡æ¥çš„çˆ¶äº²éœ€è¦å˜æˆé»‘âš«ï¸</li><li>å³ä¾„å­ä¼šå–ä»£åŸæ¥çˆ¶äº²ï¼Œå› æ­¤å®ƒä¿ç•™çˆ¶äº²é¢œè‰²</li><li>å…„å¼Ÿå·²ç»æ˜¯é»‘äº†âš«ï¸ï¼Œæ— éœ€æ”¹å˜</li></ul></li><li><p>å¦‚æœå…„å¼Ÿæ˜¯å³å­©å­ï¼Œå³ä¾„å­æ˜¯çº¢ğŸ”´ï¼ŒRR ä¸å¹³è¡¡</p><ul><li>å°†æ¥åˆ é™¤èŠ‚ç‚¹è¿™è¾¹å°‘ä¸ªé»‘ï¼Œæ‰€ä»¥æœ€åæ—‹è½¬è¿‡æ¥çš„çˆ¶äº²éœ€è¦å˜æˆé»‘âš«ï¸ï¼Œå¹³è¡¡èµ·è§ï¼Œå³ä¾„å­ä¹Ÿæ˜¯é»‘âš«ï¸</li><li>åŸæ¥å…„å¼Ÿè¦æˆä¸ºçˆ¶äº²ï¼Œéœ€è¦ä¿ç•™çˆ¶äº²é¢œè‰²</li></ul></li><li><p>å¦‚æœå…„å¼Ÿæ˜¯å³å­©å­ï¼Œå·¦ä¾„å­æ˜¯çº¢ğŸ”´ï¼ŒRL ä¸å¹³è¡¡</p><ul><li>å°†æ¥åˆ é™¤èŠ‚ç‚¹è¿™è¾¹å°‘ä¸ªé»‘ï¼Œæ‰€ä»¥æœ€åæ—‹è½¬è¿‡æ¥çš„çˆ¶äº²éœ€è¦å˜æˆé»‘âš«ï¸</li><li>å·¦ä¾„å­ä¼šå–ä»£åŸæ¥çˆ¶äº²ï¼Œå› æ­¤å®ƒä¿ç•™çˆ¶äº²é¢œè‰²</li><li>å…„å¼Ÿå·²ç»æ˜¯é»‘äº†âš«ï¸ï¼Œæ— éœ€æ”¹å˜</li></ul></li></ul><h4 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.datastructure.redblacktree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.itheima.datastructure.redblacktree.RedBlackTree.Color.BLACK;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.itheima.datastructure.redblacktree.RedBlackTree.Color.RED;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* &lt;h3&gt;çº¢é»‘æ ‘&lt;/h3&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedBlackTree</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">enum</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">       RED, BLACK;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   Node root;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">       <span class="type">int</span> key;</span><br><span class="line">       Object value;</span><br><span class="line">       Node left;</span><br><span class="line">       Node right;</span><br><span class="line">       Node parent;        <span class="comment">// çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">       <span class="type">Color</span> <span class="variable">color</span> <span class="operator">=</span> RED;  <span class="comment">// é¢œè‰²</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">           <span class="built_in">this</span>.key = key;</span><br><span class="line">           <span class="built_in">this</span>.value = value;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">           <span class="built_in">this</span>.key = key;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> key, Color color)</span> &#123;</span><br><span class="line">           <span class="built_in">this</span>.key = key;</span><br><span class="line">           <span class="built_in">this</span>.color = color;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> key, Color color, Node left, Node right)</span> &#123;</span><br><span class="line">           <span class="built_in">this</span>.key = key;</span><br><span class="line">           <span class="built_in">this</span>.color = color;</span><br><span class="line">           <span class="built_in">this</span>.left = left;</span><br><span class="line">           <span class="built_in">this</span>.right = right;</span><br><span class="line">           <span class="keyword">if</span> (left != <span class="literal">null</span>) &#123;</span><br><span class="line">               left.parent = <span class="built_in">this</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (right != <span class="literal">null</span>) &#123;</span><br><span class="line">               right.parent = <span class="built_in">this</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// æ˜¯å¦æ˜¯å·¦å­©å­</span></span><br><span class="line">       <span class="type">boolean</span> <span class="title function_">isLeftChild</span><span class="params">()</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> parent != <span class="literal">null</span> &amp;&amp; parent.left == <span class="built_in">this</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// å”å”</span></span><br><span class="line">       Node <span class="title function_">uncle</span><span class="params">()</span> &#123;</span><br><span class="line">           <span class="keyword">if</span> (parent == <span class="literal">null</span> || parent.parent == <span class="literal">null</span>) &#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (parent.isLeftChild()) &#123;</span><br><span class="line">               <span class="keyword">return</span> parent.parent.right;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">return</span> parent.parent.left;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// å…„å¼Ÿ</span></span><br><span class="line">       Node <span class="title function_">sibling</span><span class="params">()</span> &#123;</span><br><span class="line">           <span class="keyword">if</span> (parent == <span class="literal">null</span>) &#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (<span class="built_in">this</span>.isLeftChild()) &#123;</span><br><span class="line">               <span class="keyword">return</span> parent.right;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">return</span> parent.left;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// åˆ¤æ–­çº¢</span></span><br><span class="line">   <span class="type">boolean</span> <span class="title function_">isRed</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> node != <span class="literal">null</span> &amp;&amp; node.color == RED;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// åˆ¤æ–­é»‘</span></span><br><span class="line">   <span class="type">boolean</span> <span class="title function_">isBlack</span><span class="params">(Node node)</span> &#123;</span><br><span class="line"><span class="comment">//        return !isRed(node);</span></span><br><span class="line">       <span class="keyword">return</span> node == <span class="literal">null</span> || node.color == BLACK;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// å³æ—‹ 1. parent çš„å¤„ç† 2. æ—‹è½¬åæ–°æ ¹çš„çˆ¶å­å…³ç³»</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">rightRotate</span><span class="params">(Node pink)</span> &#123;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">parent</span> <span class="operator">=</span> pink.parent;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">yellow</span> <span class="operator">=</span> pink.left;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">green</span> <span class="operator">=</span> yellow.right;</span><br><span class="line">       <span class="keyword">if</span> (green != <span class="literal">null</span>) &#123;</span><br><span class="line">           green.parent = pink;</span><br><span class="line">       &#125;</span><br><span class="line">       yellow.right = pink;</span><br><span class="line">       yellow.parent = parent;</span><br><span class="line">       pink.left = green;</span><br><span class="line">       pink.parent = yellow;</span><br><span class="line">       <span class="keyword">if</span> (parent == <span class="literal">null</span>) &#123;</span><br><span class="line">           root = yellow;</span><br><span class="line">       &#125; <span class="keyword">else</span> <span class="keyword">if</span> (parent.left == pink) &#123;</span><br><span class="line">           parent.left = yellow;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           parent.right = yellow;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// å·¦æ—‹</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">leftRotate</span><span class="params">(Node pink)</span> &#123;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">parent</span> <span class="operator">=</span> pink.parent;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">yellow</span> <span class="operator">=</span> pink.right;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">green</span> <span class="operator">=</span> yellow.left;</span><br><span class="line">       <span class="keyword">if</span> (green != <span class="literal">null</span>) &#123;</span><br><span class="line">           green.parent = pink;</span><br><span class="line">       &#125;</span><br><span class="line">       yellow.left = pink;</span><br><span class="line">       yellow.parent = parent;</span><br><span class="line">       pink.right = green;</span><br><span class="line">       pink.parent = yellow;</span><br><span class="line">       <span class="keyword">if</span> (parent == <span class="literal">null</span>) &#123;</span><br><span class="line">           root = yellow;</span><br><span class="line">       &#125; <span class="keyword">else</span> <span class="keyword">if</span> (parent.left == pink) &#123;</span><br><span class="line">           parent.left = yellow;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           parent.right = yellow;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ–°å¢æˆ–æ›´æ–°</span></span><br><span class="line"><span class="comment">    * &lt;br&gt;</span></span><br><span class="line"><span class="comment">    * æ­£å¸¸å¢ã€é‡åˆ°çº¢çº¢ä¸å¹³è¡¡è¿›è¡Œè°ƒæ•´</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, Object value)</span> &#123;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">parent</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">       <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">           parent = p;</span><br><span class="line">           <span class="keyword">if</span> (key &lt; p.key) &#123;</span><br><span class="line">               p = p.left;</span><br><span class="line">           &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.key &lt; key) &#123;</span><br><span class="line">               p = p.right;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               p.value = value; <span class="comment">// æ›´æ–°</span></span><br><span class="line">               <span class="keyword">return</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">inserted</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(key, value);</span><br><span class="line">       <span class="keyword">if</span> (parent == <span class="literal">null</span>) &#123;</span><br><span class="line">           root = inserted;</span><br><span class="line">       &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key &lt; parent.key) &#123;</span><br><span class="line">           parent.left = inserted;</span><br><span class="line">           inserted.parent = parent;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           parent.right = inserted;</span><br><span class="line">           inserted.parent = parent;</span><br><span class="line">       &#125;</span><br><span class="line">       fixRedRed(inserted);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">void</span> <span class="title function_">fixRedRed</span><span class="params">(Node x)</span> &#123;</span><br><span class="line">       <span class="comment">// case 1 æ’å…¥èŠ‚ç‚¹æ˜¯æ ¹èŠ‚ç‚¹ï¼Œå˜é»‘å³å¯</span></span><br><span class="line">       <span class="keyword">if</span> (x == root) &#123;</span><br><span class="line">           x.color = BLACK;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// case 2 æ’å…¥èŠ‚ç‚¹çˆ¶äº²æ˜¯é»‘è‰²ï¼Œæ— éœ€è°ƒæ•´</span></span><br><span class="line">       <span class="keyword">if</span> (isBlack(x.parent)) &#123;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">/* case 3 å½“çº¢çº¢ç›¸é‚»ï¼Œå”å”ä¸ºçº¢æ—¶</span></span><br><span class="line"><span class="comment">           éœ€è¦å°†çˆ¶äº²ã€å”å”å˜é»‘ã€ç¥–çˆ¶å˜çº¢ï¼Œç„¶åå¯¹ç¥–çˆ¶åšé€’å½’å¤„ç†</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">       <span class="type">Node</span> <span class="variable">parent</span> <span class="operator">=</span> x.parent;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">uncle</span> <span class="operator">=</span> x.uncle();</span><br><span class="line">       <span class="type">Node</span> <span class="variable">grandparent</span> <span class="operator">=</span> parent.parent;</span><br><span class="line">       <span class="keyword">if</span> (isRed(uncle)) &#123;</span><br><span class="line">           parent.color = BLACK;</span><br><span class="line">           uncle.color = BLACK;</span><br><span class="line">           grandparent.color = RED;</span><br><span class="line">           fixRedRed(grandparent);</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// case 4 å½“çº¢çº¢ç›¸é‚»ï¼Œå”å”ä¸ºé»‘æ—¶</span></span><br><span class="line">       <span class="keyword">if</span> (parent.isLeftChild() &amp;&amp; x.isLeftChild()) &#123; <span class="comment">// LL</span></span><br><span class="line">           parent.color = BLACK;</span><br><span class="line">           grandparent.color = RED;</span><br><span class="line">           rightRotate(grandparent);</span><br><span class="line">       &#125; <span class="keyword">else</span> <span class="keyword">if</span> (parent.isLeftChild()) &#123; <span class="comment">// LR</span></span><br><span class="line">           leftRotate(parent);</span><br><span class="line">           x.color = BLACK;</span><br><span class="line">           grandparent.color = RED;</span><br><span class="line">           rightRotate(grandparent);</span><br><span class="line">       &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!x.isLeftChild()) &#123; <span class="comment">// RR</span></span><br><span class="line">           parent.color = BLACK;</span><br><span class="line">           grandparent.color = RED;</span><br><span class="line">           leftRotate(grandparent);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123; <span class="comment">// RL</span></span><br><span class="line">           rightRotate(parent);</span><br><span class="line">           x.color = BLACK;</span><br><span class="line">           grandparent.color = RED;</span><br><span class="line">           leftRotate(grandparent);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * åˆ é™¤</span></span><br><span class="line"><span class="comment">    * &lt;br&gt;</span></span><br><span class="line"><span class="comment">    * æ­£å¸¸åˆ ã€ä¼šç”¨åˆ°æä»£æ¡ƒåƒµæŠ€å·§ã€é‡åˆ°é»‘é»‘ä¸å¹³è¡¡è¿›è¡Œè°ƒæ•´</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">deleted</span> <span class="operator">=</span> find(key);</span><br><span class="line">       <span class="keyword">if</span> (deleted == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       doRemove(deleted);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> find(key) != <span class="literal">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// æŸ¥æ‰¾åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line">   <span class="keyword">private</span> Node <span class="title function_">find</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">       <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">if</span> (key &lt; p.key) &#123;</span><br><span class="line">               p = p.left;</span><br><span class="line">           &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.key &lt; key) &#123;</span><br><span class="line">               p = p.right;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">return</span> p;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// æŸ¥æ‰¾å‰©ä½™èŠ‚ç‚¹</span></span><br><span class="line">   <span class="keyword">private</span> Node <span class="title function_">findReplaced</span><span class="params">(Node deleted)</span> &#123;</span><br><span class="line">       <span class="keyword">if</span> (deleted.left == <span class="literal">null</span> &amp;&amp; deleted.right == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> (deleted.left == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> deleted.right;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> (deleted.right == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> deleted.left;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">s</span> <span class="operator">=</span> deleted.right;</span><br><span class="line">       <span class="keyword">while</span> (s.left != <span class="literal">null</span>) &#123;</span><br><span class="line">           s = s.left;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> s;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// å¤„ç†åŒé»‘ (case3ã€case4ã€case5)</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fixDoubleBlack</span><span class="params">(Node x)</span> &#123;</span><br><span class="line">       <span class="keyword">if</span> (x == root) &#123;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">parent</span> <span class="operator">=</span> x.parent;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">sibling</span> <span class="operator">=</span> x.sibling();</span><br><span class="line">       <span class="comment">// case 3 å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²</span></span><br><span class="line">       <span class="keyword">if</span> (isRed(sibling)) &#123;</span><br><span class="line">           <span class="keyword">if</span> (x.isLeftChild()) &#123;</span><br><span class="line">               leftRotate(parent);</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               rightRotate(parent);</span><br><span class="line">           &#125;</span><br><span class="line">           parent.color = RED;</span><br><span class="line">           sibling.color = BLACK;</span><br><span class="line">           fixDoubleBlack(x);</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> (sibling != <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="comment">// case 4 å…„å¼Ÿæ˜¯é»‘è‰², ä¸¤ä¸ªä¾„å­ä¹Ÿæ˜¯é»‘è‰²</span></span><br><span class="line">           <span class="keyword">if</span> (isBlack(sibling.left) &amp;&amp; isBlack(sibling.right)) &#123;</span><br><span class="line">               sibling.color = RED;</span><br><span class="line">               <span class="keyword">if</span> (isRed(parent)) &#123;</span><br><span class="line">                   parent.color = BLACK;</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   fixDoubleBlack(parent);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">// case 5 å…„å¼Ÿæ˜¯é»‘è‰², ä¾„å­æœ‰çº¢è‰²</span></span><br><span class="line">           <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="comment">// LL</span></span><br><span class="line">               <span class="keyword">if</span> (sibling.isLeftChild() &amp;&amp; isRed(sibling.left)) &#123;</span><br><span class="line">                   rightRotate(parent);</span><br><span class="line">                   sibling.left.color = BLACK;</span><br><span class="line">                   sibling.color = parent.color;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="comment">// LR</span></span><br><span class="line">               <span class="keyword">else</span> <span class="keyword">if</span> (sibling.isLeftChild() &amp;&amp; isRed(sibling.right)) &#123;</span><br><span class="line">                   sibling.right.color = parent.color;</span><br><span class="line">                   leftRotate(sibling);</span><br><span class="line">                   rightRotate(parent);</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="comment">// RL</span></span><br><span class="line">               <span class="keyword">else</span> <span class="keyword">if</span> (!sibling.isLeftChild() &amp;&amp; isRed(sibling.left)) &#123;</span><br><span class="line">                   sibling.left.color = parent.color;</span><br><span class="line">                   rightRotate(sibling);</span><br><span class="line">                   leftRotate(parent);</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="comment">// RR</span></span><br><span class="line">               <span class="keyword">else</span> &#123;</span><br><span class="line">                   leftRotate(parent);</span><br><span class="line">                   sibling.right.color = BLACK;</span><br><span class="line">                   sibling.color = parent.color;</span><br><span class="line">               &#125;</span><br><span class="line">               parent.color = BLACK;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="comment">// @TODO å®é™…ä¹Ÿä¸ä¼šå‡ºç°ï¼Œè§¦å‘åŒé»‘åï¼Œå…„å¼ŸèŠ‚ç‚¹ä¸ä¼šä¸º null</span></span><br><span class="line">           fixDoubleBlack(parent);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doRemove</span><span class="params">(Node deleted)</span> &#123;</span><br><span class="line">       <span class="type">Node</span> <span class="variable">replaced</span> <span class="operator">=</span> findReplaced(deleted);</span><br><span class="line">       <span class="type">Node</span> <span class="variable">parent</span> <span class="operator">=</span> deleted.parent;</span><br><span class="line">       <span class="comment">// æ²¡æœ‰å­©å­</span></span><br><span class="line">       <span class="keyword">if</span> (replaced == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="comment">// case 1 åˆ é™¤çš„æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">           <span class="keyword">if</span> (deleted == root) &#123;</span><br><span class="line">               root = <span class="literal">null</span>;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">if</span> (isBlack(deleted)) &#123;</span><br><span class="line">                   <span class="comment">// åŒé»‘è°ƒæ•´</span></span><br><span class="line">                   fixDoubleBlack(deleted);</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   <span class="comment">// çº¢è‰²å¶å­, æ— éœ€ä»»ä½•å¤„ç†</span></span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">if</span> (deleted.isLeftChild()) &#123;</span><br><span class="line">                   parent.left = <span class="literal">null</span>;</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   parent.right = <span class="literal">null</span>;</span><br><span class="line">               &#125;</span><br><span class="line">               deleted.parent = <span class="literal">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// æœ‰ä¸€ä¸ªå­©å­</span></span><br><span class="line">       <span class="keyword">if</span> (deleted.left == <span class="literal">null</span> || deleted.right == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="comment">// case 1 åˆ é™¤çš„æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">           <span class="keyword">if</span> (deleted == root) &#123;</span><br><span class="line">               root.key = replaced.key;</span><br><span class="line">               root.value = replaced.value;</span><br><span class="line">               root.left = root.right = <span class="literal">null</span>;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">if</span> (deleted.isLeftChild()) &#123;</span><br><span class="line">                   parent.left = replaced;</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   parent.right = replaced;</span><br><span class="line">               &#125;</span><br><span class="line">               replaced.parent = parent;</span><br><span class="line">               deleted.left = deleted.right = deleted.parent = <span class="literal">null</span>;</span><br><span class="line">               <span class="keyword">if</span> (isBlack(deleted) &amp;&amp; isBlack(replaced)) &#123;</span><br><span class="line">                   <span class="comment">// @TODO å®é™…ä¸ä¼šæœ‰è¿™ç§æƒ…å†µ å› ä¸ºåªæœ‰ä¸€ä¸ªå­©å­æ—¶ è¢«åˆ é™¤èŠ‚ç‚¹æ˜¯é»‘è‰² é‚£ä¹ˆå‰©ä½™èŠ‚ç‚¹åªèƒ½æ˜¯çº¢è‰²ä¸ä¼šè§¦å‘åŒé»‘</span></span><br><span class="line">                   fixDoubleBlack(replaced);</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                   <span class="comment">// case 2 åˆ é™¤æ˜¯é»‘ï¼Œå‰©ä¸‹æ˜¯çº¢</span></span><br><span class="line">                   replaced.color = BLACK;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// case 0 æœ‰ä¸¤ä¸ªå­©å­ =&gt; æœ‰ä¸€ä¸ªå­©å­ æˆ– æ²¡æœ‰å­©å­</span></span><br><span class="line">       <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> deleted.key;</span><br><span class="line">       deleted.key = replaced.key;</span><br><span class="line">       replaced.key = t;</span><br><span class="line"></span><br><span class="line">       <span class="type">Object</span> <span class="variable">v</span> <span class="operator">=</span> deleted.value;</span><br><span class="line">       deleted.value = replaced.value;</span><br><span class="line">       replaced.value = v;</span><br><span class="line">       doRemove(replaced);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»¥ä¸Šä»£ç ä¸­çš„ TODO æœªä½œæ”¹æ­£</li></ul><h4 id="å°ç»“-3"><a href="#å°ç»“-3" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><table><thead><tr><th>ç»´åº¦</th><th>æ™®é€šäºŒå‰æœç´¢æ ‘</th><th>AVLæ ‘</th><th>çº¢é»‘æ ‘</th></tr></thead><tbody><tr><td>æŸ¥è¯¢</td><td>å¹³å‡O(logn)ï¼Œæœ€åO(n)</td><td>O(logn)</td><td>O(logn)</td></tr><tr><td>æ’å…¥</td><td>å¹³å‡O(logn)ï¼Œæœ€åO(n)</td><td>O(logn)</td><td>O(logn)</td></tr><tr><td>åˆ é™¤</td><td>å¹³å‡O(logn)ï¼Œæœ€åO(n)</td><td>O(logn)</td><td>O(logn)</td></tr><tr><td>å¹³è¡¡æ€§</td><td>ä¸å¹³è¡¡</td><td>ä¸¥æ ¼å¹³è¡¡</td><td>è¿‘ä¼¼å¹³è¡¡</td></tr><tr><td>ç»“æ„</td><td>äºŒå‰æ ‘</td><td>è‡ªå¹³è¡¡çš„äºŒå‰æ ‘</td><td>å…·æœ‰çº¢é»‘æ€§è´¨çš„è‡ªå¹³è¡¡äºŒå‰æ ‘</td></tr><tr><td>æŸ¥æ‰¾æ•ˆç‡</td><td>ä½</td><td>é«˜</td><td>é«˜</td></tr><tr><td>æ’å…¥åˆ é™¤æ•ˆç‡</td><td>ä½</td><td>ä¸­ç­‰</td><td>é«˜</td></tr></tbody></table><p>æ™®é€šäºŒå‰æœç´¢æ ‘æ’å…¥ã€åˆ é™¤ã€æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸æ ‘çš„é«˜åº¦ç›¸å…³ï¼Œå› æ­¤åœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œè€Œä¸”å®¹æ˜“é€€åŒ–æˆé“¾è¡¨ï¼ŒæŸ¥æ‰¾æ•ˆç‡ä½ã€‚</p><p>AVLæ ‘æ˜¯ä¸€ç§é«˜åº¦å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå…¶å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡1ã€‚å› æ­¤ï¼Œå®ƒèƒ½å¤Ÿåœ¨lognçš„å¹³å‡æ—¶é—´å†…å®Œæˆæ’å…¥ã€åˆ é™¤ã€æŸ¥è¯¢æ“ä½œï¼Œä½†æ˜¯åœ¨ç»´æŠ¤å¹³è¡¡çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦é¢‘ç¹åœ°è¿›è¡Œæ—‹è½¬æ“ä½œï¼Œå¯¼è‡´æ’å…¥åˆ é™¤æ•ˆç‡è¾ƒä½ã€‚</p><p>çº¢é»‘æ ‘æ˜¯ä¸€ç§è¿‘ä¼¼å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå®ƒåœ¨ä¿æŒé«˜åº¦å¹³è¡¡çš„åŒæ—¶ï¼Œåˆèƒ½å¤Ÿä¿æŒè¾ƒé«˜çš„æ’å…¥åˆ é™¤æ•ˆç‡ã€‚çº¢é»‘æ ‘é€šè¿‡èŠ‚ç‚¹ç€è‰²å’Œæ—‹è½¬æ“ä½œæ¥ç»´æŠ¤å¹³è¡¡ã€‚çº¢é»‘æ ‘åœ¨ç»´æŠ¤å¹³è¡¡çš„è¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿè¿›è¡Œè¾ƒå°‘çš„èŠ‚ç‚¹æ—‹è½¬æ“ä½œï¼Œå› æ­¤æ’å…¥åˆ é™¤æ•ˆç‡è¾ƒé«˜ï¼Œå¹¶ä¸”æŸ¥è¯¢æ•ˆç‡ä¹Ÿè¾ƒé«˜ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œçº¢é»‘æ ‘å…·æœ‰è¾ƒé«˜çš„ç»¼åˆæ€§èƒ½ï¼Œæ˜¯ä¸€ç§å¹¿æ³›åº”ç”¨çš„æ•°æ®ç»“æ„ã€‚</p><h2 id="3-5-B-æ ‘"><a href="#3-5-B-æ ‘" class="headerlink" title="3.5 B æ ‘"></a>3.5 B æ ‘</h2><p>ai é—®é¢˜åˆ—è¡¨</p><p>è¯·ç”¨ä¸­æ–‡å›ç­”ï¼šB-æ ‘å†å²</p><p>è¯·ç”¨ä¸­æ–‡å›ç­”ï¼š100ä¸‡çš„æ•°æ®ä½¿ç”¨ avl æ ‘æ¥å­˜å‚¨ï¼Œæ ‘é«˜æ˜¯å¤šå°‘?</p><p>è¯·ç”¨ä¸­æ–‡å›ç­”ï¼š100ä¸‡çš„æ•°æ®ï¼Œå¦‚æœå­˜å‚¨åˆ°B-æ ‘(æœ€å°åº¦æ•°æ˜¯500)ï¼Œé‚£ä¹ˆæ ‘é«˜å¤§çº¦æ˜¯å¤šå°‘?</p><p>è¯·ç”¨ä¸­æ–‡å›ç­”ï¼šB-æ ‘çš„ç‰¹æ€§æœ‰å“ªäº›ï¼Ÿ</p><h3 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><h4 id="å†å²-3"><a href="#å†å²-3" class="headerlink" title="å†å²"></a>å†å²</h4><blockquote><p>Bæ ‘ï¼ˆB-Treeï¼‰ç»“æ„æ˜¯ä¸€ç§é«˜æ•ˆå­˜å‚¨å’ŒæŸ¥è¯¢æ•°æ®çš„æ–¹æ³•ï¼Œå®ƒçš„å†å²å¯ä»¥è¿½æº¯åˆ°1970å¹´ä»£æ—©æœŸã€‚Bæ ‘çš„å‘æ˜äººRudolf Bayerå’ŒEdward M. McCreightåˆ†åˆ«å‘è¡¨äº†ä¸€ç¯‡è®ºæ–‡ä»‹ç»äº†Bæ ‘ã€‚è¿™ç¯‡è®ºæ–‡æ˜¯1972å¹´å‘è¡¨äºã€ŠACM Transactions on Database Systemsã€‹ä¸­çš„ï¼Œé¢˜ç›®ä¸ºâ€Organization and Maintenance of Large Ordered Indexesâ€ã€‚</p><p>è¿™ç¯‡è®ºæ–‡æå‡ºäº†ä¸€ç§èƒ½å¤Ÿé«˜æ•ˆåœ°ç»´æŠ¤å¤§å‹æœ‰åºç´¢å¼•çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•çš„ä¸»è¦æ€æƒ³æ˜¯å°†æ¯ä¸ªèŠ‚ç‚¹æ‰©å±•æˆå¤šä¸ªå­èŠ‚ç‚¹ï¼Œä»¥å‡å°‘æŸ¥æ‰¾æ‰€éœ€çš„æ¬¡æ•°ã€‚Bæ ‘ç»“æ„éå¸¸é€‚åˆåº”ç”¨äºç£ç›˜ç­‰å¤§å‹å­˜å‚¨å™¨çš„é«˜æ•ˆæ“ä½œï¼Œè¢«å¹¿æ³›åº”ç”¨äºå…³ç³»æ•°æ®åº“å’Œæ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p><p>Bæ ‘ç»“æ„æœ‰å¾ˆå¤šå˜ç§å’Œå‡çº§ç‰ˆï¼Œä¾‹å¦‚B+æ ‘ï¼ŒB*æ ‘å’ŒSBæ ‘ç­‰ã€‚è¿™äº›å˜ç§å’Œå‡çº§ç‰ˆæœ¬éƒ½åŸºäºBæ ‘çš„æ ¸å¿ƒæ€æƒ³ï¼Œé€šè¿‡è°ƒæ•´Bæ ‘çš„å‚æ•°å’Œç»“æ„ï¼Œæé«˜äº†Bæ ‘åœ¨ä¸åŒåœºæ™¯ä¸‹çš„æ€§èƒ½è¡¨ç°ã€‚</p><p>æ€»çš„æ¥è¯´ï¼ŒBæ ‘ç»“æ„æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ•°æ®ç»“æ„ï¼Œä¸ºé«˜æ•ˆå­˜å‚¨å’ŒæŸ¥è¯¢å¤§é‡æ•°æ®æä¾›äº†å¯é çš„æ–¹æ³•ã€‚å®ƒçš„å†å²å¯ä»¥è¿½æº¯åˆ°ä¸Šä¸ªä¸–çºª70å¹´ä»£ï¼Œè€Œä¸”åœ¨ä»Šå¤©ä»ç„¶è¢«å¹¿æ³›åº”ç”¨äºå„ç§åœºæ™¯ã€‚</p></blockquote><h4 id="B-çš„å«ä¹‰"><a href="#B-çš„å«ä¹‰" class="headerlink" title="B çš„å«ä¹‰"></a>B çš„å«ä¹‰</h4><blockquote><p>B-æ ‘çš„åç§°æ˜¯ç”±å…¶å‘æ˜è€…Rudolf  Bayeræå‡ºçš„ã€‚Bayerå’ŒMcCreightä»æœªè§£é‡ŠBä»£è¡¨ä»€ä¹ˆï¼Œäººä»¬æå‡ºäº†è®¸å¤šå¯èƒ½çš„è§£é‡Šï¼Œæ¯”å¦‚Boeingã€balancedã€betweenã€broadã€bushyå’ŒBayerç­‰ã€‚ä½†McCreightè¡¨ç¤ºï¼Œè¶Šæ˜¯æ€è€ƒB-treesä¸­çš„Bä»£è¡¨ä»€ä¹ˆï¼Œå°±è¶Šèƒ½æ›´å¥½åœ°ç†è§£B-trees</p></blockquote><h4 id="ç‰¹æ€§-1"><a href="#ç‰¹æ€§-1" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h4><p>ä¸€æ£µ B-æ ‘å…·æœ‰ä»¥ä¸‹æ€§è´¨</p><p>ç‰¹æ€§1ï¼šæ¯ä¸ªèŠ‚ç‚¹ x å…·æœ‰</p><ul><li>å±æ€§ nï¼Œè¡¨ç¤ºèŠ‚ç‚¹ x ä¸­ key çš„ä¸ªæ•°</li><li>å±æ€§ leafï¼Œè¡¨ç¤ºèŠ‚ç‚¹æ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹</li><li>èŠ‚ç‚¹ key å¯ä»¥æœ‰å¤šä¸ªï¼Œä»¥å‡åºå­˜å‚¨</li></ul><p>ç‰¹æ€§2ï¼šæ¯ä¸ªéå¶å­èŠ‚ç‚¹ä¸­çš„å­©å­æ•°æ˜¯ n + 1ã€å¶å­èŠ‚ç‚¹æ²¡æœ‰å­©å­</p><p>ç‰¹æ€§3ï¼šæœ€å°åº¦æ•°tï¼ˆèŠ‚ç‚¹çš„å­©å­æ•°ç§°ä¸ºåº¦ï¼‰å’ŒèŠ‚ç‚¹ä¸­é”®æ•°é‡çš„å…³ç³»å¦‚ä¸‹ï¼š</p><table><thead><tr><th>æœ€å°åº¦æ•°t</th><th>é”®æ•°é‡èŒƒå›´</th></tr></thead><tbody><tr><td>2</td><td>1 ~ 3</td></tr><tr><td>3</td><td>2 ~ 5</td></tr><tr><td>4</td><td>3 ~ 7</td></tr><tr><td>â€¦</td><td>â€¦</td></tr><tr><td>n</td><td>(n-1) ~ (2n-1)</td></tr></tbody></table><p>å…¶ä¸­ï¼Œå½“èŠ‚ç‚¹ä¸­é”®æ•°é‡è¾¾åˆ°å…¶æœ€å¤§å€¼æ—¶ï¼Œå³ 3ã€5ã€7 â€¦ 2n-1ï¼Œéœ€è¦åˆ†è£‚</p><p>ç‰¹æ€§4ï¼šå¶å­èŠ‚ç‚¹çš„æ·±åº¦éƒ½ç›¸åŒ</p><blockquote><p>é—®ï¼š</p><p>B-æ ‘ä¸ºä»€ä¹ˆæœ‰æœ€å°åº¦æ•°çš„é™åˆ¶ï¼Ÿ</p><p>ç­”ï¼š</p><p>Bæ ‘ä¸­æœ‰æœ€å°åº¦æ•°çš„é™åˆ¶æ˜¯ä¸ºäº†ä¿è¯Bæ ‘çš„å¹³è¡¡ç‰¹æ€§ã€‚</p><p>åœ¨Bæ ‘ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œè¿™ä½¿å¾—Bæ ‘å¯ä»¥å­˜å‚¨å¤§é‡çš„é”®å€¼ï¼Œä½†ä¹Ÿå¸¦æ¥äº†ä¸€äº›é—®é¢˜ã€‚å¦‚æœèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡å¤ªå°‘ï¼Œé‚£ä¹ˆå°±å¯èƒ½å¯¼è‡´Bæ ‘çš„é«˜åº¦è¿‡é«˜ï¼Œä»è€Œé™ä½äº†Bæ ‘çš„æ•ˆç‡ã€‚æ­¤å¤–ï¼Œå¦‚æœèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡å¤ªå¤šï¼Œé‚£ä¹ˆå°±å¯èƒ½å¯¼è‡´èŠ‚ç‚¹çš„æœç´¢ã€æ’å…¥å’Œåˆ é™¤æ“ä½œå˜å¾—å¤æ‚å’Œä½æ•ˆã€‚</p><p>æœ€å°åº¦æ•°çš„é™åˆ¶é€šè¿‡é™åˆ¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡ï¼Œæ¥å¹³è¡¡è¿™äº›é—®é¢˜ã€‚åœ¨Bæ ‘ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡éƒ½å¿…é¡»åœ¨ä¸€å®šçš„èŒƒå›´å†…ï¼Œå³tåˆ°2tä¹‹é—´ï¼ˆå…¶ä¸­tä¸ºæœ€å°åº¦æ•°ï¼‰</p></blockquote><h4 id="B-æ ‘ä¸-2-3-æ ‘ã€2-3-4-æ ‘çš„å…³ç³»"><a href="#B-æ ‘ä¸-2-3-æ ‘ã€2-3-4-æ ‘çš„å…³ç³»" class="headerlink" title="B-æ ‘ä¸ 2-3 æ ‘ã€2-3-4 æ ‘çš„å…³ç³»"></a>B-æ ‘ä¸ 2-3 æ ‘ã€2-3-4 æ ‘çš„å…³ç³»</h4><p>å¯ä»¥è¿™æ ·æ€»ç»“å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼š</p><ol><li>2-3æ ‘æ˜¯æœ€å°åº¦æ•°ä¸º2çš„Bæ ‘ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åŒ…å«2ä¸ªæˆ–3ä¸ªå­èŠ‚ç‚¹ã€‚</li><li>2-3-4æ ‘æ˜¯æœ€å°åº¦æ•°ä¸º2çš„Bæ ‘çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åŒ…å«2ä¸ªã€3ä¸ªæˆ–4ä¸ªå­èŠ‚ç‚¹ã€‚</li><li>Bæ ‘æ˜¯ä¸€ç§æ›´åŠ ä¸€èˆ¬åŒ–çš„å¹³è¡¡æ ‘ï¼Œå¯ä»¥é€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œå…¶èŠ‚ç‚¹å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„é”®å€¼ï¼ŒèŠ‚ç‚¹çš„åº¦æ•°å–å†³äºæœ€å°åº¦æ•°tçš„è®¾å®šã€‚</li></ol><h3 id="å®ç°-3"><a href="#å®ç°-3" class="headerlink" title="å®ç°"></a>å®ç°</h3><h4 id="å®šä¹‰èŠ‚ç‚¹-1"><a href="#å®šä¹‰èŠ‚ç‚¹-1" class="headerlink" title="å®šä¹‰èŠ‚ç‚¹"></a>å®šä¹‰èŠ‚ç‚¹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">leaf</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="type">int</span> keyNumber;</span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    <span class="type">int</span>[] keys;</span><br><span class="line">    Node[] children;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> t)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.t = t;</span><br><span class="line">        <span class="built_in">this</span>.keys = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span> * t - <span class="number">1</span>];</span><br><span class="line">        <span class="built_in">this</span>.children = <span class="keyword">new</span> <span class="title class_">Node</span>[<span class="number">2</span> * t];</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.toString(Arrays.copyOfRange(keys, <span class="number">0</span>, keyNumber));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>leaf è¡¨ç¤ºæ˜¯å¦ä¸ºå¶å­èŠ‚ç‚¹</li><li>keyNumber ä¸º keys ä¸­æœ‰æ•ˆ key æ•°ç›®</li><li>t ä¸ºæœ€å°åº¦æ•°ï¼Œå®ƒå†³å®šäº†èŠ‚ç‚¹ä¸­key çš„æœ€å°ã€æœ€å¤§æ•°ç›®ï¼Œåˆ†åˆ«æ˜¯ t-1 å’Œ 2t-1</li><li>keys å­˜å‚¨æ­¤èŠ‚ç‚¹çš„ key</li><li>children å­˜å‚¨æ­¤èŠ‚ç‚¹çš„ child</li><li>toString åªæ˜¯ä¸ºäº†æ–¹ä¾¿è°ƒè¯•å’Œæµ‹è¯•ï¼Œéå¿…é¡»</li></ul><blockquote><p>å®é™… keys åº”å½“æ”¹ä¸º entries ä»¥ä¾¿åŒæ—¶ä¿å­˜ key å’Œ valueï¼Œåˆšå¼€å§‹ç®€åŒ–å®ç°</p></blockquote><h4 id="å¤šè·¯æŸ¥æ‰¾"><a href="#å¤šè·¯æŸ¥æ‰¾" class="headerlink" title="å¤šè·¯æŸ¥æ‰¾"></a>å¤šè·¯æŸ¥æ‰¾</h4><p>ä¸ºä¸Šé¢èŠ‚ç‚¹ç±»æ·»åŠ  get æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Node <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; keyNumber &amp;&amp; keys[i] &lt; key) &#123;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; keyNumber &amp;&amp; keys[i] == key) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (leaf) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> children[i].get(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ’å…¥-key-å’Œ-child"><a href="#æ’å…¥-key-å’Œ-child" class="headerlink" title="æ’å…¥ key å’Œ child"></a>æ’å…¥ key å’Œ child</h4><p>ä¸ºä¸Šé¢èŠ‚ç‚¹ç±»æ·»åŠ  insertKey å’Œ insertChild æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">insertKey</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">    System.arraycopy(keys, index, keys, index + <span class="number">1</span>, keyNumber - index);</span><br><span class="line">    keys[index] = key;</span><br><span class="line">    keyNumber++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertChild</span><span class="params">(Node child, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">    System.arraycopy(children, index, children, index + <span class="number">1</span>, keyNumber - index);</span><br><span class="line">    children[index] = child;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½œç”¨æ˜¯å‘ keys æ•°ç»„æˆ– children æ•°ç»„æŒ‡å®š index å¤„æ’å…¥æ–°æ•°æ®ï¼Œæ³¨æ„</p><ul><li><p>ç”±äºä½¿ç”¨äº†é™æ€æ•°ç»„ï¼Œå¹¶ä¸”ä¸ä¼šåœ¨æ–°å¢æˆ–åˆ é™¤æ—¶æ”¹å˜å®ƒçš„å¤§å°ï¼Œå› æ­¤éœ€è¦é¢å¤–çš„ keyNumber æ¥æŒ‡å®šæ•°ç»„å†…æœ‰æ•ˆ key çš„æ•°ç›®</p><ul><li>æ’å…¥æ—¶ keyNumber++</li><li>åˆ é™¤æ—¶å‡å°‘  keyNumber çš„å€¼å³å¯</li></ul></li><li><p>children ä¸ä¼šå•ç‹¬ç»´æŠ¤æ•°ç›®ï¼Œå®ƒæ¯” keys å¤šä¸€ä¸ª</p></li><li><p>å¦‚æœè¿™ä¸¤ä¸ªæ–¹æ³•åŒæ—¶è°ƒç”¨ï¼Œæ³¨æ„å®ƒä»¬çš„å…ˆåé¡ºåºï¼ŒinsertChild åè°ƒç”¨ï¼Œå› ä¸ºå®ƒè®¡ç®—å¤åˆ¶å…ƒç´ ä¸ªæ•°æ—¶ç”¨åˆ°äº† keyNumber</p></li></ul><h4 id="å®šä¹‰æ ‘"><a href="#å®šä¹‰æ ‘" class="headerlink" title="å®šä¹‰æ ‘"></a>å®šä¹‰æ ‘</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BTree</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> t;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> MIN_KEY_NUMBER;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> MAX_KEY_NUMBER;</span><br><span class="line">    Node root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BTree</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BTree</span><span class="params">(<span class="type">int</span> t)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.t = t;</span><br><span class="line">        MIN_KEY_NUMBER = t - <span class="number">1</span>;</span><br><span class="line">        MAX_KEY_NUMBER = <span class="number">2</span> * t - <span class="number">1</span>;</span><br><span class="line">        root = <span class="keyword">new</span> <span class="title class_">Node</span>(t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">    doPut(<span class="literal">null</span>, <span class="number">0</span>, root, key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doPut</span><span class="params">(Node parent, <span class="type">int</span> index, Node node, <span class="type">int</span> key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; node.keyNumber &amp;&amp; node.keys[i] &lt; key) &#123;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; node.keyNumber &amp;&amp; node.keys[i] == key) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.leaf) &#123;</span><br><span class="line">        node.insertKey(key, i);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        doPut(node, i, node.children[i], key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isFull(node)) &#123;</span><br><span class="line">        split(parent, index, node);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>é¦–å…ˆæŸ¥æ‰¾æœ¬èŠ‚ç‚¹ä¸­çš„æ’å…¥ä½ç½® iï¼Œå¦‚æœæ²¡æœ‰ç©ºä½ï¼ˆkey è¢«æ‰¾åˆ°ï¼‰ï¼Œåº”è¯¥èµ°æ›´æ–°çš„é€»è¾‘ï¼Œç›®å‰ä»€ä¹ˆæ²¡åš</p></li><li><p>æ¥ä¸‹æ¥åˆ†ä¸¤ç§æƒ…å†µ</p><ul><li>å¦‚æœèŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå¯ä»¥ç›´æ¥æ’å…¥äº†</li><li>å¦‚æœèŠ‚ç‚¹æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œéœ€è¦ç»§ç»­åœ¨ children[i] å¤„ç»§ç»­é€’å½’æ’å…¥</li></ul></li><li><p>æ— è®ºå“ªç§æƒ…å†µï¼Œæ’å…¥å®Œæˆåéƒ½å¯èƒ½è¶…è¿‡èŠ‚ç‚¹ keys æ•°ç›®é™åˆ¶ï¼Œæ­¤æ—¶åº”å½“æ‰§è¡ŒèŠ‚ç‚¹åˆ†è£‚</p><ul><li>å‚æ•°ä¸­çš„ parent å’Œ index éƒ½æ˜¯ç»™åˆ†è£‚æ–¹æ³•ç”¨çš„ï¼Œä»£è¡¨å½“å‰èŠ‚ç‚¹çˆ¶èŠ‚ç‚¹ï¼Œå’Œåˆ†è£‚èŠ‚ç‚¹æ˜¯ç¬¬å‡ ä¸ªå­©å­</li></ul></li></ul><p>åˆ¤æ–­ä¾æ®ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> node.keyNumber == MAX_KEY_NUMBER;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ†è£‚"><a href="#åˆ†è£‚" class="headerlink" title="åˆ†è£‚"></a>åˆ†è£‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">split</span><span class="params">(Node parent, <span class="type">int</span> index , Node left)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (parent == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">newRoot</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="built_in">this</span>.t);</span><br><span class="line">        newRoot.leaf = <span class="literal">false</span>;</span><br><span class="line">        newRoot.insertChild(root, <span class="number">0</span>);</span><br><span class="line">        root = newRoot;</span><br><span class="line">        parent = newRoot;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Node</span> <span class="variable">right</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="built_in">this</span>.t);</span><br><span class="line">    right.leaf = left.leaf;</span><br><span class="line">    right.keyNumber = t - <span class="number">1</span>;</span><br><span class="line">    System.arraycopy(left.keys, t, right.keys, <span class="number">0</span>, t - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (!left.leaf) &#123;</span><br><span class="line">        System.arraycopy(left.children, t, right.children, <span class="number">0</span>, t);</span><br><span class="line">    &#125;</span><br><span class="line">    left.keyNumber = t - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> left.keys[t - <span class="number">1</span>];</span><br><span class="line">    parent.insertKey(mid, index);</span><br><span class="line">    parent.insertChild(right, index + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†ä¸¤ç§æƒ…å†µï¼š</p><ul><li><p>å¦‚æœ parent &#x3D;&#x3D; null è¡¨ç¤ºè¦åˆ†è£‚çš„æ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ­¤æ—¶éœ€è¦åˆ›å»ºæ–°æ ¹ï¼ŒåŸæ¥çš„æ ¹èŠ‚ç‚¹ä½œä¸ºæ–°æ ¹çš„ 0 å­©å­</p></li><li><p>å¦åˆ™</p><ul><li>åˆ›å»º right èŠ‚ç‚¹ï¼ˆåˆ†è£‚åå¤§äºå½“å‰ left èŠ‚ç‚¹çš„ï¼‰ï¼ŒæŠŠ t ä»¥åçš„ key å’Œ child éƒ½æ‹·è´è¿‡å»</li><li>t-1 å¤„çš„ key æ’å…¥åˆ° parent çš„ index å¤„ï¼Œindex æŒ‡ left ä½œä¸ºå­©å­æ—¶çš„ç´¢å¼•</li><li>right èŠ‚ç‚¹ä½œä¸º parent çš„å­©å­æ’å…¥åˆ° index + 1 å¤„</li></ul></li></ul><h4 id="åˆ é™¤-2"><a href="#åˆ é™¤-2" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><p>case 1ï¼šå½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œæ²¡æ‰¾åˆ°</p><p>case 2ï¼šå½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œæ‰¾åˆ°äº†</p><p>case 3ï¼šå½“å‰èŠ‚ç‚¹æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œæ²¡æ‰¾åˆ°</p><p>case 4ï¼šå½“å‰èŠ‚ç‚¹æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œæ‰¾åˆ°äº†</p><p>case 5ï¼šåˆ é™¤å key æ•°ç›® &lt; ä¸‹é™ï¼ˆä¸å¹³è¡¡ï¼‰</p><p>case 6ï¼šæ ¹èŠ‚ç‚¹</p><h4 id="å®Œæ•´ä»£ç -1"><a href="#å®Œæ•´ä»£ç -1" class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.algorithm.btree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;h3&gt;B-æ ‘&lt;/h3&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BTree</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] keys; <span class="comment">// å…³é”®å­—</span></span><br><span class="line">        Node[] children; <span class="comment">// å­©å­</span></span><br><span class="line">        <span class="type">int</span> keyNumber; <span class="comment">// æœ‰æ•ˆå…³é”®å­—æ•°ç›®</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">leaf</span> <span class="operator">=</span> <span class="literal">true</span>; <span class="comment">// æ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">int</span> t; <span class="comment">// æœ€å°åº¦æ•° (æœ€å°å­©å­æ•°)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> t)</span> &#123; <span class="comment">// t&gt;=2</span></span><br><span class="line">            <span class="built_in">this</span>.t = t;</span><br><span class="line">            <span class="built_in">this</span>.children = <span class="keyword">new</span> <span class="title class_">Node</span>[<span class="number">2</span> * t];</span><br><span class="line">            <span class="built_in">this</span>.keys = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span> * t - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span>[] keys)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.keys = keys;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Arrays.toString(Arrays.copyOfRange(keys, <span class="number">0</span>, keyNumber));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤šè·¯æŸ¥æ‰¾</span></span><br><span class="line">        Node <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; keyNumber) &#123;</span><br><span class="line">                <span class="keyword">if</span> (keys[i] == key) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (keys[i] &gt; key) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ‰§è¡Œåˆ°æ­¤æ—¶ keys[i]&gt;key æˆ– i==keyNumber</span></span><br><span class="line">            <span class="keyword">if</span> (leaf) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// éå¶å­æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">return</span> children[i].get(key);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘ keys æŒ‡å®šç´¢å¼•å¤„æ’å…¥ key</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">insertKey</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">            System.arraycopy(keys, index, keys, index + <span class="number">1</span>, keyNumber - index);</span><br><span class="line">            keys[index] = key;</span><br><span class="line">            keyNumber++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘ children æŒ‡å®šç´¢å¼•å¤„æ’å…¥ child</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">insertChild</span><span class="params">(Node child, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">            System.arraycopy(children, index, children, index + <span class="number">1</span>, keyNumber - index);</span><br><span class="line">            children[index] = child;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="title function_">removeKey</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> keys[index];</span><br><span class="line">            System.arraycopy(keys, index + <span class="number">1</span>, keys, index, --keyNumber - index);</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="title function_">removeLeftmostKey</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> removeKey(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="title function_">removeRightmostKey</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> removeKey(keyNumber - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node <span class="title function_">removeChild</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">t</span> <span class="operator">=</span> children[index];</span><br><span class="line">            System.arraycopy(children, index + <span class="number">1</span>, children, index, keyNumber - index);</span><br><span class="line">            children[keyNumber] = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node <span class="title function_">removeLeftmostChild</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> removeChild(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node <span class="title function_">removeRightmostChild</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> removeChild(keyNumber);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">moveToLeft</span><span class="params">(Node left)</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> left.keyNumber;</span><br><span class="line">            <span class="keyword">if</span> (!leaf) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= keyNumber; i++) &#123;</span><br><span class="line">                    left.children[start + i] = children[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; keyNumber; i++) &#123;</span><br><span class="line">                left.keys[left.keyNumber++] = keys[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node <span class="title function_">leftSibling</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> index &gt; <span class="number">0</span> ? children[index - <span class="number">1</span>] : <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node <span class="title function_">rightSibling</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> index == keyNumber ? <span class="literal">null</span> : children[index + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Node root;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t; <span class="comment">// æ ‘ä¸­èŠ‚ç‚¹æœ€å°åº¦æ•°</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> MIN_KEY_NUMBER; <span class="comment">// æœ€å°keyæ•°ç›®</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> MAX_KEY_NUMBER; <span class="comment">// æœ€å¤§keyæ•°ç›®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BTree</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BTree</span><span class="params">(<span class="type">int</span> t)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.t = t;</span><br><span class="line">        root = <span class="keyword">new</span> <span class="title class_">Node</span>(t);</span><br><span class="line">        MAX_KEY_NUMBER = <span class="number">2</span> * t - <span class="number">1</span>;</span><br><span class="line">        MIN_KEY_NUMBER = t - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> root.get(key) != <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. æ–°å¢</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        doPut(root, key, <span class="literal">null</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doPut</span><span class="params">(Node node, <span class="type">int</span> key, Node parent, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; node.keyNumber) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node.keys[i] == key) &#123;</span><br><span class="line">                <span class="keyword">return</span>; <span class="comment">// æ›´æ–°</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.keys[i] &gt; key) &#123;</span><br><span class="line">                <span class="keyword">break</span>; <span class="comment">// æ‰¾åˆ°äº†æ’å…¥ä½ç½®ï¼Œå³ä¸ºæ­¤æ—¶çš„ i</span></span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.leaf) &#123;</span><br><span class="line">            node.insertKey(key, i);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            doPut(node.children[i], key, node, i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.keyNumber == MAX_KEY_NUMBER) &#123;</span><br><span class="line">            split(node, parent, index);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;h3&gt;åˆ†è£‚æ–¹æ³•&lt;/h3&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> left   è¦åˆ†è£‚çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parent åˆ†è£‚èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index  åˆ†è£‚èŠ‚ç‚¹æ˜¯ç¬¬å‡ ä¸ªå­©å­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">split</span><span class="params">(Node left, Node parent, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ†è£‚çš„æ˜¯æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (parent == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">newRoot</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(t);</span><br><span class="line">            newRoot.leaf = <span class="literal">false</span>;</span><br><span class="line">            newRoot.insertChild(left, <span class="number">0</span>);</span><br><span class="line">            <span class="built_in">this</span>.root = newRoot;</span><br><span class="line">            parent = newRoot;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»º right èŠ‚ç‚¹ï¼ŒæŠŠ left ä¸­ t ä¹‹åçš„ key å’Œ child ç§»åŠ¨è¿‡å»</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">right</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(t);</span><br><span class="line">        right.leaf = left.leaf;</span><br><span class="line">        System.arraycopy(left.keys, t, right.keys, <span class="number">0</span>, t - <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// åˆ†è£‚èŠ‚ç‚¹æ˜¯éå¶å­çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (!left.leaf) &#123;</span><br><span class="line">            System.arraycopy(left.children, t, right.children, <span class="number">0</span>, t);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> t; i &lt;= left.keyNumber; i++) &#123;</span><br><span class="line">                left.children[i] = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        right.keyNumber = t - <span class="number">1</span>;</span><br><span class="line">        left.keyNumber = t - <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 2. ä¸­é—´çš„ key ï¼ˆt-1 å¤„ï¼‰æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> left.keys[t - <span class="number">1</span>];</span><br><span class="line">        parent.insertKey(mid, index);</span><br><span class="line">        <span class="comment">// 3. right èŠ‚ç‚¹ä½œä¸ºçˆ¶èŠ‚ç‚¹çš„å­©å­</span></span><br><span class="line">        parent.insertChild(right, index + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. åˆ é™¤</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        doRemove(root, key, <span class="literal">null</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doRemove</span><span class="params">(Node node, <span class="type">int</span> key, Node parent, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; node.keyNumber) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node.keys[i] &gt;= key) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.leaf) &#123;</span><br><span class="line">            <span class="keyword">if</span> (notFound(node, key, i)) &#123; <span class="comment">// case 1</span></span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            node.removeKey(i);  <span class="comment">// case 2</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (notFound(node, key, i)) &#123; <span class="comment">// case 3</span></span><br><span class="line">                doRemove(node.children[i], key, node, i);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// case 4</span></span><br><span class="line">                <span class="type">Node</span> <span class="variable">s</span> <span class="operator">=</span> node.children[i + <span class="number">1</span>];</span><br><span class="line">                <span class="keyword">while</span> (!s.leaf) &#123;</span><br><span class="line">                    s = s.children[<span class="number">0</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> s.keys[<span class="number">0</span>];</span><br><span class="line">                node.keys[i] = k;</span><br><span class="line">                doRemove(node.children[i + <span class="number">1</span>], k, node, i + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.keyNumber &lt; MIN_KEY_NUMBER) &#123; <span class="comment">// case 5</span></span><br><span class="line">            balance(node, parent, index);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">notFound</span><span class="params">(Node node, <span class="type">int</span> key, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i &gt;= node.keyNumber || (i &lt; node.keyNumber &amp;&amp; node.keys[i] != key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">balance</span><span class="params">(Node node, Node parent, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == root) &#123;</span><br><span class="line">            <span class="keyword">if</span> (root.keyNumber == <span class="number">0</span> &amp;&amp; root.children[<span class="number">0</span>] != <span class="literal">null</span>) &#123;</span><br><span class="line">                root = root.children[<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">leftSibling</span> <span class="operator">=</span> parent.leftSibling(i);</span><br><span class="line">        <span class="type">Node</span> <span class="variable">rightSibling</span> <span class="operator">=</span> parent.rightSibling(i);</span><br><span class="line">        <span class="keyword">if</span> (leftSibling != <span class="literal">null</span> &amp;&amp; leftSibling.keyNumber &gt; MIN_KEY_NUMBER) &#123;</span><br><span class="line">            rightRotate(node, leftSibling, parent, i);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rightSibling != <span class="literal">null</span> &amp;&amp; rightSibling.keyNumber &gt; MIN_KEY_NUMBER) &#123;</span><br><span class="line">            leftRotate(node, rightSibling, parent, i);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (leftSibling != <span class="literal">null</span>) &#123;</span><br><span class="line">            mergeToLeft(leftSibling, parent, i - <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mergeToLeft(node, parent, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">mergeToLeft</span><span class="params">(Node left, Node parent, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">right</span> <span class="operator">=</span> parent.removeChild(i + <span class="number">1</span>);</span><br><span class="line">        left.insertKey(parent.removeKey(i), left.keyNumber);</span><br><span class="line">        right.moveToLeft(left);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">rightRotate</span><span class="params">(Node node, Node leftSibling, Node parent, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        node.insertKey(parent.keys[i - <span class="number">1</span>], <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span> (!leftSibling.leaf) &#123;</span><br><span class="line">            node.insertChild(leftSibling.removeRightmostChild(), <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        parent.keys[i - <span class="number">1</span>] = leftSibling.removeRightmostKey();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">leftRotate</span><span class="params">(Node node, Node rightSibling, Node parent, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        node.insertKey(parent.keys[i], node.keyNumber);</span><br><span class="line">        <span class="keyword">if</span> (!rightSibling.leaf) &#123;</span><br><span class="line">            node.insertChild(rightSibling.removeLeftmostChild(), node.keyNumber + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        parent.keys[i] = rightSibling.removeLeftmostKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-6-å“ˆå¸Œè¡¨"><a href="#3-6-å“ˆå¸Œè¡¨" class="headerlink" title="3.6 å“ˆå¸Œè¡¨"></a>3.6 å“ˆå¸Œè¡¨</h2><h3 id="ç¬¬ä¸€ç‰ˆ"><a href="#ç¬¬ä¸€ç‰ˆ" class="headerlink" title="ç¬¬ä¸€ç‰ˆ"></a>ç¬¬ä¸€ç‰ˆ</h3><p>æœªè€ƒè™‘ hash ç çš„ç”Ÿæˆï¼Œå‡å®šè¯¥ hash ç ç”±æˆ‘ä»¬æä¾›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashTable</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// èŠ‚ç‚¹ç±»</span></span><br><span class="line">   <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Entry</span> &#123;</span><br><span class="line">       <span class="type">int</span> hash; <span class="comment">// å“ˆå¸Œç </span></span><br><span class="line">       Object key; <span class="comment">// é”®</span></span><br><span class="line">       Object value; <span class="comment">// å€¼</span></span><br><span class="line">       Entry next;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">Entry</span><span class="params">(<span class="type">int</span> hash, Object key, Object value)</span> &#123;</span><br><span class="line">           <span class="built_in">this</span>.hash = hash;</span><br><span class="line">           <span class="built_in">this</span>.key = key;</span><br><span class="line">           <span class="built_in">this</span>.value = value;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   Entry[] table = <span class="keyword">new</span> <span class="title class_">Entry</span>[<span class="number">16</span>];</span><br><span class="line">   <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">   <span class="type">float</span> <span class="variable">loadFactor</span> <span class="operator">=</span> <span class="number">0.75f</span>; <span class="comment">// 12 é˜ˆå€¼</span></span><br><span class="line">   <span class="type">int</span> <span class="variable">threshold</span> <span class="operator">=</span> (<span class="type">int</span>) (loadFactor * table.length);</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* æ±‚æ¨¡è¿ç®—æ›¿æ¢ä¸ºä½è¿ç®—</span></span><br><span class="line"><span class="comment">       - å‰æï¼šæ•°ç»„é•¿åº¦æ˜¯ 2 çš„ n æ¬¡æ–¹</span></span><br><span class="line"><span class="comment">       - hash % æ•°ç»„é•¿åº¦ ç­‰ä»·äº hash &amp; (æ•°ç»„é•¿åº¦-1)</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// æ ¹æ® hash ç è·å– value</span></span><br><span class="line">   Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> hash, Object key)</span> &#123;</span><br><span class="line">       <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> hash &amp; (table.length - <span class="number">1</span>);</span><br><span class="line">       <span class="keyword">if</span> (table[idx] == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">Entry</span> <span class="variable">p</span> <span class="operator">=</span> table[idx];</span><br><span class="line">       <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">if</span> (p.key.equals(key)) &#123;</span><br><span class="line">               <span class="keyword">return</span> p.value;</span><br><span class="line">           &#125;</span><br><span class="line">           p = p.next;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// å‘ hash è¡¨å­˜å…¥æ–° key valueï¼Œå¦‚æœ key é‡å¤ï¼Œåˆ™æ›´æ–° value</span></span><br><span class="line">   <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> hash, Object key, Object value)</span> &#123;</span><br><span class="line">       <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> hash &amp; (table.length - <span class="number">1</span>);</span><br><span class="line">       <span class="keyword">if</span> (table[idx] == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="comment">// 1. idx å¤„æœ‰ç©ºä½, ç›´æ¥æ–°å¢</span></span><br><span class="line">           table[idx] = <span class="keyword">new</span> <span class="title class_">Entry</span>(hash, key, value);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="comment">// 2. idx å¤„æ— ç©ºä½, æ²¿é“¾è¡¨æŸ¥æ‰¾ æœ‰é‡å¤keyæ›´æ–°ï¼Œå¦åˆ™æ–°å¢</span></span><br><span class="line">           <span class="type">Entry</span> <span class="variable">p</span> <span class="operator">=</span> table[idx];</span><br><span class="line">           <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">               <span class="keyword">if</span> (p.key.equals(key)) &#123;</span><br><span class="line">                   p.value = value; <span class="comment">// æ›´æ–°</span></span><br><span class="line">                   <span class="keyword">return</span>;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">if</span> (p.next == <span class="literal">null</span>) &#123;</span><br><span class="line">                   <span class="keyword">break</span>;</span><br><span class="line">               &#125;</span><br><span class="line">               p = p.next;</span><br><span class="line">           &#125;</span><br><span class="line">           p.next = <span class="keyword">new</span> <span class="title class_">Entry</span>(hash, key, value); <span class="comment">// æ–°å¢</span></span><br><span class="line">       &#125;</span><br><span class="line">       size++;</span><br><span class="line">       <span class="keyword">if</span> (size &gt; threshold) &#123;</span><br><span class="line">           resize();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resize</span><span class="params">()</span> &#123;</span><br><span class="line">       Entry[] newTable = <span class="keyword">new</span> <span class="title class_">Entry</span>[table.length &lt;&lt; <span class="number">1</span>];</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; table.length; i++) &#123;</span><br><span class="line">           <span class="type">Entry</span> <span class="variable">p</span> <span class="operator">=</span> table[i]; <span class="comment">// æ‹¿åˆ°æ¯ä¸ªé“¾è¡¨å¤´</span></span><br><span class="line">           <span class="keyword">if</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="comment">/*</span></span><br><span class="line"><span class="comment">               æ‹†åˆ†é“¾è¡¨ï¼Œç§»åŠ¨åˆ°æ–°æ•°ç»„ï¼Œæ‹†åˆ†è§„å¾‹</span></span><br><span class="line"><span class="comment">               * ä¸€ä¸ªé“¾è¡¨æœ€å¤šæ‹†æˆä¸¤ä¸ª</span></span><br><span class="line"><span class="comment">               * hash &amp; table.length == 0 çš„ä¸€ç»„</span></span><br><span class="line"><span class="comment">               * hash &amp; table.length != 0 çš„ä¸€ç»„</span></span><br><span class="line"><span class="comment">                                         p</span></span><br><span class="line"><span class="comment">               0-&gt;8-&gt;16-&gt;24-&gt;32-&gt;40-&gt;48-&gt;null</span></span><br><span class="line"><span class="comment">                           a</span></span><br><span class="line"><span class="comment">               0-&gt;16-&gt;32-&gt;48-&gt;null</span></span><br><span class="line"><span class="comment">                       b</span></span><br><span class="line"><span class="comment">               8-&gt;24-&gt;40-&gt;null</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">               <span class="type">Entry</span> <span class="variable">a</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">               <span class="type">Entry</span> <span class="variable">b</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">               <span class="type">Entry</span> <span class="variable">aHead</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">               <span class="type">Entry</span> <span class="variable">bHead</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">               <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">                   <span class="keyword">if</span> ((p.hash &amp; table.length) == <span class="number">0</span>) &#123;</span><br><span class="line">                       <span class="keyword">if</span> (a != <span class="literal">null</span>) &#123;</span><br><span class="line">                           a.next = p;</span><br><span class="line">                       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                           aHead = p;</span><br><span class="line">                       &#125;</span><br><span class="line">                       a = p; <span class="comment">// åˆ†é…åˆ°a</span></span><br><span class="line">                   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                       <span class="keyword">if</span> (b != <span class="literal">null</span>) &#123;</span><br><span class="line">                           b.next = p;</span><br><span class="line">                       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                           bHead = p;</span><br><span class="line">                       &#125;</span><br><span class="line">                       b = p; <span class="comment">// åˆ†é…åˆ°b</span></span><br><span class="line">                   &#125;</span><br><span class="line">                   p = p.next;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="comment">// è§„å¾‹ï¼š a é“¾è¡¨ä¿æŒç´¢å¼•ä½ç½®ä¸å˜ï¼Œb é“¾è¡¨ç´¢å¼•ä½ç½®+table.length</span></span><br><span class="line">               <span class="keyword">if</span> (a != <span class="literal">null</span>) &#123;</span><br><span class="line">                   a.next = <span class="literal">null</span>;</span><br><span class="line">                   newTable[i] = aHead;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">if</span> (b != <span class="literal">null</span>) &#123;</span><br><span class="line">                   b.next = <span class="literal">null</span>;</span><br><span class="line">                   newTable[i + table.length] = bHead;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       table = newTable;</span><br><span class="line">       threshold = (<span class="type">int</span>) (loadFactor * table.length);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// æ ¹æ® hash ç åˆ é™¤ï¼Œè¿”å›åˆ é™¤çš„ value</span></span><br><span class="line">   Object <span class="title function_">remove</span><span class="params">(<span class="type">int</span> hash, Object key)</span> &#123;</span><br><span class="line">       <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> hash &amp; (table.length - <span class="number">1</span>);</span><br><span class="line">       <span class="keyword">if</span> (table[idx] == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">Entry</span> <span class="variable">p</span> <span class="operator">=</span> table[idx];</span><br><span class="line">       <span class="type">Entry</span> <span class="variable">prev</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">       <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">if</span> (p.key.equals(key)) &#123;</span><br><span class="line">               <span class="comment">// æ‰¾åˆ°äº†, åˆ é™¤</span></span><br><span class="line">               <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123; <span class="comment">// é“¾è¡¨å¤´</span></span><br><span class="line">                   table[idx] = p.next;</span><br><span class="line">               &#125; <span class="keyword">else</span> &#123; <span class="comment">// éé“¾è¡¨å¤´</span></span><br><span class="line">                   prev.next = p.next;</span><br><span class="line">               &#125;</span><br><span class="line">               size--;</span><br><span class="line">               <span class="keyword">return</span> p.value;</span><br><span class="line">           &#125;</span><br><span class="line">           prev = p;</span><br><span class="line">           p = p.next;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆ-hashCode"><a href="#ç”Ÿæˆ-hashCode" class="headerlink" title="ç”Ÿæˆ hashCode"></a>ç”Ÿæˆ hashCode</h3><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230424083655435-20240713121119-xjn7gyg.png" alt="image-20230424083655435">â€‹</p><p>hash ç®—æ³•æ˜¯å°†ä»»æ„å¯¹è±¡ï¼Œåˆ†é…ä¸€ä¸ª<strong>ç¼–å·</strong>çš„è¿‡ç¨‹ï¼Œå…¶ä¸­ç¼–å·æ˜¯ä¸€ä¸ªæœ‰é™èŒƒå›´å†…çš„æ•°å­—ï¼ˆå¦‚ int èŒƒå›´å†…ï¼‰</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230424090603325-20240713121119-4q7u6s7.png" alt="image-20230424090603325">â€‹</p><p><strong>Object.hashCode</strong></p><ul><li>Object çš„ hashCode æ–¹æ³•é»˜è®¤æ˜¯ç”Ÿæˆéšæœºæ•°ä½œä¸º hash å€¼ï¼ˆä¼šç¼“å­˜åœ¨å¯¹è±¡å¤´å½“ä¸­ï¼‰</li><li>ç¼ºç‚¹æ˜¯åŒ…å«ç›¸åŒ<strong>å€¼</strong>çš„ä¸åŒå¯¹è±¡ï¼Œä»–ä»¬çš„ hashCode ä¸ä¸€æ ·ï¼Œä¸èƒ½å¤Ÿç”¨ hash å€¼æ¥åæ˜ å¯¹è±¡çš„<strong>å€¼</strong>ç‰¹å¾ï¼Œå› æ­¤è¯¸å¤šå­ç±»éƒ½ä¼šé‡å†™ hashCode æ–¹æ³•</li></ul><p><strong>String.hashCode</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;bac&quot;</span>;                 </span><br><span class="line">    <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;abc&quot;</span>);     </span><br><span class="line"></span><br><span class="line">    System.out.println(s1.hashCode());</span><br><span class="line">    System.out.println(s2.hashCode());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŸåˆ™ï¼šå€¼ç›¸åŒçš„å­—ç¬¦ä¸²ç”Ÿæˆç›¸åŒçš„ hash ç , å°½é‡è®©å€¼ä¸åŒçš„å­—ç¬¦ä¸²ç”Ÿæˆä¸åŒçš„ hash ç </span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    å¯¹äº abc  a * 100 + b * 10 + c</span></span><br><span class="line"><span class="comment">    å¯¹äº bac  b * 100 + a * 10 + c</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">hash</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s1.length(); i++) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> s1.charAt(i);</span><br><span class="line">        System.out.println((<span class="type">int</span>) c);</span><br><span class="line">        <span class="comment">// (a*10 + b)*10 + c  ==&gt;  a*100 + b*10 + c  2^5</span></span><br><span class="line">        hash = (hash &lt;&lt; <span class="number">5</span>) - hash + c;   </span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(hash);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç»éªŒè¡¨æ˜å¦‚æœæ¯æ¬¡ä¹˜çš„æ˜¯è¾ƒå¤§è´¨æ•°ï¼Œå¯ä»¥æœ‰æ›´å¥½åœ°é™ä½ hash å†²çªï¼Œå› æ­¤æ”¹ã€ä¹˜ 10ã€‘ä¸ºã€ä¹˜ 31ã€‘</li><li>ã€ä¹˜ 31ã€‘å¯ä»¥ç­‰ä»·ä¸ºã€ä¹˜ 32 - hashã€‘ï¼Œè¿›ä¸€æ­¥å¯ä»¥è½¬ä¸ºæ›´é«˜æ•ˆåœ°ã€å·¦ç§»5ä½ - hashã€‘</li></ul><p><strong>æ£€æŸ¥ hash è¡¨çš„åˆ†æ•£æ€§</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] sum = <span class="keyword">new</span> <span class="title class_">int</span>[table.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; table.length; i++) &#123;</span><br><span class="line">        <span class="type">Entry</span> <span class="variable">p</span> <span class="operator">=</span> table[i];</span><br><span class="line">        <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">            sum[i]++;</span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(Arrays.toString(sum));</span><br><span class="line"></span><br><span class="line">    Map&lt;Integer, Long&gt; result = Arrays.stream(sum).boxed()</span><br><span class="line">        .collect(Collectors.groupingBy(s -&gt; s, Collectors.counting()));</span><br><span class="line">    System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// æµ‹è¯• Object.hashCode</span></span><br><span class="line">    <span class="type">HashTable</span> <span class="variable">table</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashTable</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">200000</span>; i++) &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        table.put(obj, obj);</span><br><span class="line">    &#125;</span><br><span class="line">    table.print();</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// æµ‹è¯• String.hashCode</span></span><br><span class="line">    table = <span class="keyword">new</span> <span class="title class_">HashTable</span>();</span><br><span class="line">    List&lt;String&gt; strings = Files.readAllLines(Path.of(<span class="string">&quot;words&quot;</span>));</span><br><span class="line">    <span class="keyword">for</span> (String string : strings) &#123;</span><br><span class="line">        table.put(string, string);</span><br><span class="line">    &#125;</span><br><span class="line">    table.print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>MurmurHash</strong></p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230425084247888-20240713121119-8cb9c1t.png" alt="image-20230425084247888">â€‹</p><h3 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h3><ol><li>æˆ‘ä»¬çš„ä»£ç é‡Œä½¿ç”¨äº†å°¾æ’æ³•ï¼Œå¦‚æœæ”¹æˆå¤´æ’æ³•å‘¢ï¼Ÿ</li><li>JDK çš„ HashMap ä¸­é‡‡ç”¨äº†å°†å¯¹è±¡ hashCode é«˜ä½ä½ç›¸äº’å¼‚æˆ–çš„æ–¹å¼å‡å°‘å†²çªï¼Œæ€ä¹ˆç†è§£</li><li>æˆ‘ä»¬çš„ HashTable ä¸­è¡¨æ ¼å®¹é‡æ˜¯ 2 çš„ n æ¬¡æ–¹ï¼Œå¾ˆå¤šä¼˜åŒ–éƒ½æ˜¯åŸºäºè¿™ä¸ªå‰æï¼Œèƒ½å¦ä¸ç”¨ 2 çš„ n æ¬¡æ–¹ä½œä¸ºè¡¨æ ¼å®¹é‡ï¼Ÿ</li><li>JDK çš„ HashMap åœ¨é“¾è¡¨é•¿åº¦è¿‡é•¿ä¼šè½¬æ¢æˆçº¢é»‘æ ‘ï¼Œå¯¹æ­¤ä½ æ€ä¹ˆçœ‹</li></ol><h3 id="ä¹ é¢˜-1"><a href="#ä¹ é¢˜-1" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-ä¸¤æ•°ä¹‹å’Œ-Leetcode-1"><a href="#E01-ä¸¤æ•°ä¹‹å’Œ-Leetcode-1" class="headerlink" title="E01. ä¸¤æ•°ä¹‹å’Œ-Leetcode 1"></a>E01. ä¸¤æ•°ä¹‹å’Œ-Leetcode 1</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E01Leetcode1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> target - nums[i];</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(k)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, map.get(k)&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼šé¢˜ç›®æ˜ç¡®è¯´æ˜<strong>åªä¼šå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ</strong>ï¼Œå› æ­¤ä¸ä¼šæ‰§è¡Œåˆ°æœ€åçš„ return null</li></ul><h4 id="E02-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­—ä¸²-Leetcode-3"><a href="#E02-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­—ä¸²-Leetcode-3" class="headerlink" title="E02. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­—ä¸²-Leetcode 3"></a>E02. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­—ä¸²-Leetcode 3</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLongestSubstring</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    HashMap&lt;Character, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">begin</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxLength</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> <span class="number">0</span>; end &lt; s.length(); end++) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> s.charAt(end);</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(ch)) &#123; <span class="comment">// é‡å¤æ—¶è°ƒæ•´ begin</span></span><br><span class="line">            begin = Math.max(begin, map.get(ch) + <span class="number">1</span>);</span><br><span class="line">            map.put(ch, end);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// ä¸é‡å¤</span></span><br><span class="line">            map.put(ch, end);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(s.substring(begin, end + <span class="number">1</span>));</span><br><span class="line">        maxLength = Math.max(maxLength, end - begin + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxLength;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>begin è°ƒæ•´æ—¶çš„è§£é‡Šï¼Œé‡åˆ°é‡å¤çš„ begin åº”è¯¥å‘å³è°ƒæ•´ï¼Œä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abca</span><br></pre></td></tr></table></figure><ul><li>é‡åˆ°é‡å¤çš„ aï¼Œè¿™æ—¶ begin åº”è¯¥è°ƒæ•´åˆ°ä¸Šä¸ªé‡å¤å­—ç¬¦ a ç´¢å¼•åŠ  1 å¤„ï¼Œå³ map.get(â€˜aâ€™) + 1 &#x3D; 1ï¼Œ</li></ul><p>ä½†è¿˜æœ‰ä¸€ç§æƒ…å†µéœ€è¦è€ƒè™‘ï¼Œå°±æ˜¯è¿ç»­é‡åˆ°ä¸¤æ¬¡é‡å¤ï¼Œä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abba</span><br></pre></td></tr></table></figure><ul><li>é‡åˆ°é‡å¤çš„ bï¼Œè¿™æ—¶ begin åº”è¯¥è°ƒæ•´åˆ°ä¸Šä¸ªé‡å¤å­—ç¬¦ b ç´¢å¼•åŠ  1 å¤„ï¼Œå³ map.get(â€˜bâ€™) + 1 &#x3D; 2</li><li>ä¸è¿‡æ¥ä¸‹æ¥ï¼Œåˆé‡åˆ°äº†é‡å¤çš„ aï¼Œæ­¤æ—¶è‹¥è¿˜æ‰§è¡Œ map.get(â€˜aâ€™) + 1 &#x3D; 1ï¼Œåˆ™ begin ç›¸å½“äºå‘å·¦é€€äº†ï¼Œä¸å¯¹</li><li>åº”è¯¥æ˜¯ Math.max(2, map.get(â€˜aâ€™) + 1)ï¼Œå³ begin åº”è¯¥æ˜¯ä¸¤ä¸ªé‡å¤å­—ç¬¦ç´¢å¼•ä¸­æ›´é å³è€…</li></ul><p>é¢˜ç›®ä¸­è¯´æ˜ s ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç¬¦å·å’Œç©ºæ ¼ç»„æˆï¼Œå› æ­¤å®ƒçš„èŒƒå›´æ˜¯æœ‰é™çš„ï¼ˆåœ¨ 0 ~127 ä¹‹å†…ï¼‰ï¼Œå¯ä»¥ç”¨æ•°ç»„æ¥æ›¿ä»£ HashMap ä¼˜åŒ–ï¼Œå¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLongestSubstring</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] map = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">128</span>];</span><br><span class="line">    Arrays.fill(map, -<span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">begin</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxLength</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> <span class="number">0</span>; end &lt; s.length(); end++) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> s.charAt(end);</span><br><span class="line">        <span class="keyword">if</span> (map[ch] != -<span class="number">1</span>) &#123; <span class="comment">// é‡å¤æ—¶è°ƒæ•´ begin</span></span><br><span class="line">            begin = Math.max(begin, map[ch] + <span class="number">1</span>);</span><br><span class="line">            map[ch] = end;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// ä¸é‡å¤</span></span><br><span class="line">            map[ch] = end;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(s.substring(begin, end + <span class="number">1</span>));</span><br><span class="line">        maxLength = Math.max(maxLength, end - begin + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxLength;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E03-å­—æ¯å¼‚ä½è¯åˆ†ç»„-Leetcode-49"><a href="#E03-å­—æ¯å¼‚ä½è¯åˆ†ç»„-Leetcode-49" class="headerlink" title="E03. å­—æ¯å¼‚ä½è¯åˆ†ç»„-Leetcode 49"></a>E03. å­—æ¯å¼‚ä½è¯åˆ†ç»„-Leetcode 49</h4><p>è§£æ³•1</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; <span class="title function_">groupAnagrams</span><span class="params">(String[] strs)</span> &#123;</span><br><span class="line">    HashMap&lt;String, List&lt;String&gt;&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String str : strs) &#123;</span><br><span class="line">        <span class="type">char</span>[] chars = str.toCharArray();</span><br><span class="line">        Arrays.sort(chars);</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(chars);</span><br><span class="line">        List&lt;String&gt; strings = map.computeIfAbsent(key, k -&gt; <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">        strings.add(str);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(map.values());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£æ³•2</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ArrayKey</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] key = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayKey</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; str.length(); i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> str.charAt(i);</span><br><span class="line">            key[ch - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">ArrayKey</span> <span class="variable">arrayKey</span> <span class="operator">=</span> (ArrayKey) o;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Arrays.equals(key, arrayKey.key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.hashCode(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; <span class="title function_">groupAnagrams</span><span class="params">(String[] strs)</span> &#123;</span><br><span class="line">    HashMap&lt;ArrayKey, List&lt;String&gt;&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String str : strs) &#123;</span><br><span class="line">        List&lt;String&gt; strings = map.computeIfAbsent(<span class="keyword">new</span> <span class="title class_">ArrayKey</span>(str), k -&gt; <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;());</span><br><span class="line">        strings.add(str);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(map.values());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E04-åˆ¤æ–­æœ‰æ²¡æœ‰é‡å¤å…ƒç´ -Leetcode-217"><a href="#E04-åˆ¤æ–­æœ‰æ²¡æœ‰é‡å¤å…ƒç´ -Leetcode-217" class="headerlink" title="E04. åˆ¤æ–­æœ‰æ²¡æœ‰é‡å¤å…ƒç´ -Leetcode 217"></a>E04. åˆ¤æ–­æœ‰æ²¡æœ‰é‡å¤å…ƒç´ -Leetcode 217</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsDuplicate</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123; <span class="comment">// 5ms</span></span><br><span class="line">    HashSet&lt;Integer&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> key : nums) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!set.add(key)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E05-æ‰¾å‡ºå‡ºç°ä¸€æ¬¡çš„æ•°å­—-Leetcode-136"><a href="#E05-æ‰¾å‡ºå‡ºç°ä¸€æ¬¡çš„æ•°å­—-Leetcode-136" class="headerlink" title="E05. æ‰¾å‡ºå‡ºç°ä¸€æ¬¡çš„æ•°å­—-Leetcode 136"></a>E05. æ‰¾å‡ºå‡ºç°ä¸€æ¬¡çš„æ•°å­—-Leetcode 136</h4><p>è§£æ³•1ï¼šç”¨ HashSet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">singleNumber</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    HashSet&lt;Integer&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!set.add(num)) &#123;</span><br><span class="line">            set.remove(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> set.toArray(<span class="keyword">new</span> <span class="title class_">Integer</span>[<span class="number">0</span>])[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£æ³•2ï¼šç”¨ xor</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">singleNumber</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">        num = num ^ nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E06-åˆ¤æ–­å­—æ¯å¼‚ä½è¯-Leetcode-242"><a href="#E06-åˆ¤æ–­å­—æ¯å¼‚ä½è¯-Leetcode-242" class="headerlink" title="E06. åˆ¤æ–­å­—æ¯å¼‚ä½è¯-Leetcode 242"></a>E06. åˆ¤æ–­å­—æ¯å¼‚ä½è¯-Leetcode 242</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAnagram</span><span class="params">(String s, String t)</span> &#123; <span class="comment">// 1ms</span></span><br><span class="line">    <span class="keyword">return</span> Arrays.equals(getKey(s), getKey(t));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[] getKey(String s) &#123;</span><br><span class="line">    <span class="type">int</span>[] array = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line">    <span class="type">char</span>[] chars = s.toCharArray();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> ch : chars) &#123;</span><br><span class="line">        array[ch - <span class="number">97</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å…¶ä¸­ç”¨ s.toCharArray() æ€§èƒ½æ˜æ˜¾é«˜äºç”¨ s.charAt() ä¸€ä¸ªä¸ªè·å–å­—ç¬¦</li></ul><h4 id="E07-ç¬¬ä¸€ä¸ªä¸é‡å¤å­—ç¬¦-Leetcode-387"><a href="#E07-ç¬¬ä¸€ä¸ªä¸é‡å¤å­—ç¬¦-Leetcode-387" class="headerlink" title="E07. ç¬¬ä¸€ä¸ªä¸é‡å¤å­—ç¬¦-Leetcode 387"></a>E07. ç¬¬ä¸€ä¸ªä¸é‡å¤å­—ç¬¦-Leetcode 387</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">firstUniqChar</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] array = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line">    <span class="type">char</span>[] chars = s.toCharArray();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> ch : chars) &#123;</span><br><span class="line">        array[ch-<span class="number">97</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; chars.length; i++) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> chars[i];</span><br><span class="line">        <span class="keyword">if</span> (array[ch - <span class="number">97</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E08-å‡ºç°æ¬¡æ•°æœ€å¤šçš„å•è¯-Leetcode-819"><a href="#E08-å‡ºç°æ¬¡æ•°æœ€å¤šçš„å•è¯-Leetcode-819" class="headerlink" title="E08. å‡ºç°æ¬¡æ•°æœ€å¤šçš„å•è¯-Leetcode 819"></a>E08. å‡ºç°æ¬¡æ•°æœ€å¤šçš„å•è¯-Leetcode 819</h4><p>ç®€æ´è§£æ³• 14 ms</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">mostCommonWord</span><span class="params">(String paragraph, String[] banned)</span> &#123;</span><br><span class="line">    Set&lt;String&gt; banSet = Set.of(banned);</span><br><span class="line">    HashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">String[] split = paragraph.toLowerCase().split(<span class="string">&quot;[^A-Za-z]+&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (String key : split) &#123;</span><br><span class="line">        <span class="keyword">if</span>(banSet.contains(key)) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        map.compute(key, (k, v) -&gt; v == <span class="literal">null</span> ? <span class="number">1</span> : v + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">Optional&lt;Map.Entry&lt;String, Integer&gt;&gt; optional = map.entrySet().stream().max(Map.Entry.comparingByValue());</span><br><span class="line">    <span class="keyword">return</span> optional.map(Map.Entry::getKey).orElse(<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åä¸¤è¡Œé¿å… lambdaï¼Œ12 ms</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">mostCommonWord</span><span class="params">(String paragraph, String[] banned)</span> &#123;</span><br><span class="line">    Set&lt;String&gt; banSet = Set.of(banned);</span><br><span class="line">    String[] split = paragraph.toLowerCase().split(<span class="string">&quot;[^A-Za-z]+&quot;</span>);</span><br><span class="line">    HashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String key : split) &#123;</span><br><span class="line">        <span class="keyword">if</span>(banSet.contains(key)) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        map.compute(key, (k, v) -&gt; v == <span class="literal">null</span> ? <span class="number">1</span> : v + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">maxKey</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; e : map.entrySet()) &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> e.getValue();</span><br><span class="line">        <span class="keyword">if</span> (value &gt; max) &#123;</span><br><span class="line">            max = value;</span><br><span class="line">            maxKey = e.getKey();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxKey;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¿å…æ­£åˆ™åŒ¹é… 5ms</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">mostCommonWord</span><span class="params">(String paragraph, String[] banned)</span> &#123;</span><br><span class="line">    Set&lt;String&gt; banSet = Set.of(banned);</span><br><span class="line">    HashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="type">char</span>[] chars = paragraph.toLowerCase().toCharArray();</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> ch : chars) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ch &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; ch &lt;= <span class="string">&#x27;z&#x27;</span>) &#123;</span><br><span class="line">            sb.append(ch);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            put(banSet, map, sb);</span><br><span class="line">            sb = <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    put(banSet, map, sb);</span><br><span class="line"></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">maxKey</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; e : map.entrySet()) &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> e.getValue();</span><br><span class="line">        <span class="keyword">if</span> (value &gt; max) &#123;</span><br><span class="line">            max = value;</span><br><span class="line">            maxKey = e.getKey();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxKey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(Set&lt;String&gt; banSet, HashMap&lt;String, Integer&gt; map, StringBuilder sb)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (sb.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> sb.toString();</span><br><span class="line">        <span class="keyword">if</span>(!banSet.contains(key)) &#123;</span><br><span class="line">            map.compute(key, (k, v) -&gt; v == <span class="literal">null</span> ? <span class="number">1</span> : v + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>sb é¿å…æ¯æ¬¡æ–°å»º 4ms</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sb.setLength(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><h4 id="E09-æ ¹æ®å‰åºä¸ä¸­åºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode105-Improved"><a href="#E09-æ ¹æ®å‰åºä¸ä¸­åºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode105-Improved" class="headerlink" title="E09. æ ¹æ®å‰åºä¸ä¸­åºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode105 Improved"></a>E09. æ ¹æ®å‰åºä¸ä¸­åºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode105 Improved</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E09Leetcode105Improved</span> &#123;</span><br><span class="line">    <span class="comment">//  ç”¨ hashmap æ”¹å–„æŸ¥æ‰¾æ€§èƒ½ï¼Œå…¶ä¸­ key æ˜¯ inOrder å€¼ï¼Œ value æ˜¯ inOrder ç´¢å¼•</span></span><br><span class="line">    HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] preOrder, <span class="type">int</span>[] inOrder)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; inOrder.length; i++) &#123;</span><br><span class="line">            map.put(inOrder[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> helper(preOrder, <span class="number">0</span>, <span class="number">0</span>, inOrder.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// preBegin å†³å®šäº†æ¯æ¬¡åœ¨ preOrder ä¸­æ‰¾åˆ°æ ¹å…ƒç´ </span></span><br><span class="line">    <span class="comment">// inBegin å’Œ inEnd å¯ä»¥ç”¨æ¥è·å–åŒºé—´å†…å…ƒç´ ä¸ªæ•°ï¼Œç»“æŸé€’å½’ç­‰</span></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">helper</span><span class="params">(<span class="type">int</span>[] preOrder, <span class="type">int</span> preBegin, <span class="type">int</span> inBegin, <span class="type">int</span> inEnd)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (inBegin &gt; inEnd) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rootValue</span> <span class="operator">=</span> preOrder[preBegin];</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(rootValue);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> map.get(rootValue);</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftSize</span> <span class="operator">=</span> i - inBegin;</span><br><span class="line">        System.out.println(<span class="string">&quot;å…ƒç´ ï¼š&quot;</span> + rootValue + <span class="string">&quot; left[&quot;</span> + (preBegin + <span class="number">1</span>) + <span class="string">&quot;] inOrder ç´¢å¼•èŒƒå›´[&quot;</span> + inBegin + <span class="string">&quot;~&quot;</span> + (i - <span class="number">1</span>) + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å…ƒç´ ï¼š&quot;</span> + rootValue + <span class="string">&quot; right[&quot;</span> + (preBegin + <span class="number">1</span> + leftSize) + <span class="string">&quot;] inOrder ç´¢å¼•èŒƒå›´[&quot;</span> + (i + <span class="number">1</span>) + <span class="string">&quot;~&quot;</span> + inEnd + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        root.left = helper(preOrder, preBegin + <span class="number">1</span>, inBegin, i - <span class="number">1</span>);</span><br><span class="line">        root.right = helper(preOrder, preBegin + <span class="number">1</span> + leftSize, i + <span class="number">1</span>, inEnd);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] preOrder = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[] inOrder = &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">7</span>&#125;;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="comment">        æ ¹æ®æ ¹èŠ‚ç‚¹[1] åˆ°ä¸­åºéå†æ•°ç»„ä¸­ä¸€åˆ†ä¸º2ï¼Œé¦–æ¬¡é€’å½’</span></span><br><span class="line"><span class="comment">            [1] 2  4  3  6  7  å‰</span></span><br><span class="line"><span class="comment">            0   1  2  3  4  5  å‰ç´¢å¼•</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            4  2  [1] 6  3  7  ä¸­</span></span><br><span class="line"><span class="comment">            0  1  2   3  4  5  ä¸­ç´¢å¼•</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            ç¡®å®š preOrder ä¸­ left å’Œ right çš„é€’å½’èµ·å§‹ç´¢å¼•ï¼Œå½“ç„¶ä¹Ÿè¦ç¡®å®š inOrder å¯¹åº”çš„ä¸¤ä¸ªç´¢å¼•ä½ç½®</span></span><br><span class="line"><span class="comment">                left    right</span></span><br><span class="line"><span class="comment">            1   [2]  4  [3]  6  7  å‰</span></span><br><span class="line"><span class="comment">            0   1    2  3    4  5  å‰ç´¢å¼•</span></span><br><span class="line"><span class="comment">            left  inOrder ç´¢å¼•èŒƒå›´ï¼š 0~1</span></span><br><span class="line"><span class="comment">            right inOrder ç´¢å¼•èŒƒå›´ï¼š 3~5</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">E09Leetcode105Improved</span>().buildTree(preOrder, inOrder);</span><br><span class="line">        System.out.println(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E10-æ ¹æ®ä¸­åºä¸ååºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode106-Improved"><a href="#E10-æ ¹æ®ä¸­åºä¸ååºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode106-Improved" class="headerlink" title="E10. æ ¹æ®ä¸­åºä¸ååºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode106 Improved"></a>E10. æ ¹æ®ä¸­åºä¸ååºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode106 Improved</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E10Leetcode106Improved</span> &#123;</span><br><span class="line">    HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] inOrder, <span class="type">int</span>[] postOrder)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; inOrder.length; i++) &#123;</span><br><span class="line">            map.put(inOrder[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> helper(postOrder, postOrder.length - <span class="number">1</span>, <span class="number">0</span>, inOrder.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        inOrder = &#123;4,2,1,6,3,7&#125;</span></span><br><span class="line"><span class="comment">        postOrder = &#123;4,2,6,7,3,1&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">helper</span><span class="params">(<span class="type">int</span>[] postOrder, <span class="type">int</span> postEnd, <span class="type">int</span> inBegin, <span class="type">int</span> inEnd)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (inBegin &gt; inEnd) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rootValue</span> <span class="operator">=</span> postOrder[postEnd];</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(rootValue);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> map.get(rootValue);</span><br><span class="line"><span class="comment">//        int leftSize = i - inBegin;</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">rightSize</span> <span class="operator">=</span> inEnd - i;</span><br><span class="line">        System.out.println(<span class="string">&quot;å…ƒç´ ï¼š&quot;</span> + rootValue + <span class="string">&quot; left[&quot;</span> + (postEnd - <span class="number">1</span> - rightSize) + <span class="string">&quot;] inOrder ç´¢å¼•èŒƒå›´[&quot;</span> + inBegin + <span class="string">&quot;~&quot;</span> + (i - <span class="number">1</span>) + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å…ƒç´ ï¼š&quot;</span> + rootValue + <span class="string">&quot; right[&quot;</span> + (postEnd - <span class="number">1</span>) + <span class="string">&quot;] inOrder ç´¢å¼•èŒƒå›´[&quot;</span> + (i + <span class="number">1</span>) + <span class="string">&quot;~&quot;</span> + inEnd + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        root.left = helper(postOrder, postEnd - <span class="number">1</span> - rightSize, inBegin, i - <span class="number">1</span>);</span><br><span class="line">        root.right = helper(postOrder, postEnd - <span class="number">1</span>, i + <span class="number">1</span>, inEnd);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] postOrder = &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[] inOrder = &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">7</span>&#125;;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">E10Leetcode106Improved</span>().buildTree(inOrder, postOrder);</span><br><span class="line">        System.out.println(root);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-7-æ’åºç®—æ³•"><a href="#3-7-æ’åºç®—æ³•" class="headerlink" title="3.7 æ’åºç®—æ³•"></a>3.7 æ’åºç®—æ³•</h2><h3 id="æ¦‚è¿°-4"><a href="#æ¦‚è¿°-4" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><h4 id="æ¯”è¾ƒæ’åºç®—æ³•"><a href="#æ¯”è¾ƒæ’åºç®—æ³•" class="headerlink" title="æ¯”è¾ƒæ’åºç®—æ³•"></a>æ¯”è¾ƒæ’åºç®—æ³•</h4><table><thead><tr><th align="center">ç®—æ³•</th><th align="center">æœ€å¥½</th><th align="center">æœ€å</th><th align="center">å¹³å‡</th><th align="center">ç©ºé—´</th><th align="center">ç¨³å®š</th><th align="center">æ€æƒ³</th><th align="center">æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td align="center">å†’æ³¡</td><td align="center">O(n)</td><td align="center">O($n^2$)</td><td align="center">O($n^2$)</td><td align="center">O(1)</td><td align="center">Y</td><td align="center">æ¯”è¾ƒ</td><td align="center">æœ€å¥½æƒ…å†µéœ€è¦é¢å¤–åˆ¤æ–­</td></tr><tr><td align="center">é€‰æ‹©</td><td align="center">O($n^2$)</td><td align="center">O($n^2$)</td><td align="center">O($n^2$)</td><td align="center">O(1)</td><td align="center">N</td><td align="center">æ¯”è¾ƒ</td><td align="center">äº¤æ¢æ¬¡æ•°ä¸€èˆ¬å°‘äºå†’æ³¡</td></tr><tr><td align="center">å †</td><td align="center">O($nlogn$)</td><td align="center">O($nlogn$)</td><td align="center">O($nlogn$)</td><td align="center">O(1)</td><td align="center">N</td><td align="center">é€‰æ‹©</td><td align="center">å †æ’åºçš„è¾…åŠ©æ€§è¾ƒå¼ºï¼Œç†è§£å‰å…ˆç†è§£å †çš„æ•°æ®ç»“æ„</td></tr><tr><td align="center">æ’å…¥</td><td align="center">O(n)</td><td align="center">O($n^2$)</td><td align="center">O($n^2$)</td><td align="center">O(1)</td><td align="center">Y</td><td align="center">æ¯”è¾ƒ</td><td align="center">æ’å…¥æ’åºå¯¹äºè¿‘ä¹æœ‰åºçš„æ•°æ®å¤„ç†é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œå¤æ‚åº¦æœ‰æ‰€ä¸‹é™ï¼Œå¯ä»¥æå‰ç»“æŸ</td></tr><tr><td align="center">å¸Œå°”</td><td align="center">O(nlogn)</td><td align="center">O($n^2$)</td><td align="center">O($nlogn$)</td><td align="center">O(1)</td><td align="center">N</td><td align="center">æ’å…¥</td><td align="center">gapåºåˆ—çš„æ„é€ æœ‰å¤šç§æ–¹å¼ï¼Œä¸åŒæ–¹å¼å¤„ç†çš„æ•°æ®å¤æ‚åº¦å¯èƒ½ä¸åŒ</td></tr><tr><td align="center">å½’å¹¶</td><td align="center">O($nlogn$)</td><td align="center">O($nlogn$)</td><td align="center">O($nlogn$)</td><td align="center">O(n)</td><td align="center">Y</td><td align="center">åˆ†æ²»</td><td align="center">éœ€è¦é¢å¤–çš„O(n)çš„å­˜å‚¨ç©ºé—´</td></tr><tr><td align="center">å¿«é€Ÿ</td><td align="center">O($nlogn$)</td><td align="center">O($n^2$)</td><td align="center">O($nlogn$)</td><td align="center">O(logn)</td><td align="center">N</td><td align="center">åˆ†æ²»</td><td align="center">å¿«æ’å¯èƒ½å­˜åœ¨æœ€åæƒ…å†µï¼Œéœ€è¦æŠŠæ¢è½´å€¼é€‰å–å¾—å°½é‡éšæœºåŒ–æ¥ç¼“è§£æœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦</td></tr></tbody></table><h4 id="éæ¯”è¾ƒæ’åºç®—æ³•"><a href="#éæ¯”è¾ƒæ’åºç®—æ³•" class="headerlink" title="éæ¯”è¾ƒæ’åºç®—æ³•"></a>éæ¯”è¾ƒæ’åºç®—æ³•</h4><table><thead><tr><th>éæ¯”è¾ƒæ’åºç®—æ³•</th><th>æ—¶é—´å¤æ‚åº¦</th><th>ç©ºé—´å¤æ‚åº¦</th><th>ç¨³å®šæ€§</th></tr></thead><tbody><tr><td>è®¡æ•°æ’åº</td><td>O(n+k)</td><td>O(n+k)</td><td>ç¨³å®š</td></tr><tr><td>æ¡¶æ’åº</td><td>O(n+k)</td><td>O(n+k)</td><td>ç¨³å®š</td></tr><tr><td>åŸºæ•°æ’åº</td><td>O(d*(n+k))</td><td>O(n+k)</td><td>ç¨³å®š</td></tr></tbody></table><p>å…¶ä¸­</p><ul><li>n æ˜¯æ•°ç»„é•¿åº¦</li><li>k æ˜¯æ¡¶é•¿åº¦</li><li>d æ˜¯åŸºæ•°ä½æ•°</li></ul><h4 id="ç¨³å®š-vs-ä¸ç¨³å®š"><a href="#ç¨³å®š-vs-ä¸ç¨³å®š" class="headerlink" title="ç¨³å®š vs ä¸ç¨³å®š"></a>ç¨³å®š vs ä¸ç¨³å®š</h4><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/stability_playing_cards.svg-20240713121119-0e7hshw.png" alt="stability_playing_cards.svg">â€‹</p><h4 id="Java-ä¸­çš„æ’åº"><a href="#Java-ä¸­çš„æ’åº" class="headerlink" title="Java ä¸­çš„æ’åº"></a>Java ä¸­çš„æ’åº</h4><p>Arrays.sort</p><p>JDK 7~13 ä¸­çš„æ’åºå®ç°</p><table><thead><tr><th>æ’åºç›®æ ‡</th><th>æ¡ä»¶</th><th>é‡‡ç”¨ç®—æ³•</th></tr></thead><tbody><tr><td>int[] long[] float[] double[]</td><td>size &lt; 47</td><td>æ··åˆæ’å…¥æ’åº (pair)</td></tr><tr><td></td><td>size &lt; 286</td><td>åŒåŸºå‡†ç‚¹å¿«æ’</td></tr><tr><td></td><td>æœ‰åºåº¦ä½</td><td>åŒåŸºå‡†ç‚¹å¿«æ’</td></tr><tr><td></td><td>æœ‰åºåº¦é«˜</td><td>å½’å¹¶æ’åº</td></tr><tr><td>byte[]</td><td>size &lt;&#x3D; 29</td><td>æ’å…¥æ’åº</td></tr><tr><td></td><td>size &gt; 29</td><td>è®¡æ•°æ’åº</td></tr><tr><td>char[] short[]</td><td>size &lt; 47</td><td>æ’å…¥æ’åº</td></tr><tr><td></td><td>size &lt; 286</td><td>åŒåŸºå‡†ç‚¹å¿«æ’</td></tr><tr><td></td><td>æœ‰åºåº¦ä½</td><td>åŒåŸºå‡†ç‚¹å¿«æ’</td></tr><tr><td></td><td>æœ‰åºåº¦é«˜</td><td>å½’å¹¶æ’åº</td></tr><tr><td></td><td>size &gt; 3200</td><td>è®¡æ•°æ’åº</td></tr><tr><td>Object[]</td><td>-Djava.util.Arrays.useLegacyMergeSort&#x3D;true</td><td>ä¼ ç»Ÿå½’å¹¶æ’åº</td></tr><tr><td></td><td></td><td>TimSort</td></tr></tbody></table><p>JDK 14~20 ä¸­çš„æ’åºå®ç°</p><table><thead><tr><th>æ’åºç›®æ ‡</th><th>æ¡ä»¶</th><th>é‡‡ç”¨ç®—æ³•</th></tr></thead><tbody><tr><td>int[] long[] float[] double[]</td><td>size &lt; 44 å¹¶ä½äºæœ€å·¦ä¾§</td><td>æ’å…¥æ’åº</td></tr><tr><td></td><td>size &lt; 65 å¹¶ä¸æ˜¯æœ€å·¦ä¾§</td><td>æ··åˆæ’å…¥æ’åº (pin)</td></tr><tr><td></td><td>æœ‰åºåº¦ä½</td><td>åŒåŸºå‡†ç‚¹å¿«æ’</td></tr><tr><td></td><td>é€’å½’æ¬¡æ•°è¶…è¿‡ 384</td><td>å †æ’åº</td></tr><tr><td></td><td>å¯¹äºæ•´ä¸ªæ•°ç»„æˆ–éæœ€å·¦ä¾§ size &gt; 4096ï¼Œæœ‰åºåº¦é«˜</td><td>å½’å¹¶æ’åº</td></tr><tr><td>byte[]</td><td>size &lt;&#x3D; 64</td><td>æ’å…¥æ’åº</td></tr><tr><td></td><td>size &gt; 64</td><td>è®¡æ•°æ’åº</td></tr><tr><td>char[] short[]</td><td>size &lt; 44</td><td>æ’å…¥æ’åº</td></tr><tr><td></td><td>å†å¤§</td><td>åŒåŸºå‡†ç‚¹å¿«æ’</td></tr><tr><td></td><td>é€’å½’æ¬¡æ•°è¶…è¿‡ 384</td><td>è®¡æ•°æ’åº</td></tr><tr><td></td><td>size &gt; 1750</td><td>è®¡æ•°æ’åº</td></tr><tr><td>Object[]</td><td>-Djava.util.Arrays.useLegacyMergeSort&#x3D;true</td><td>ä¼ ç»Ÿå½’å¹¶æ’åº</td></tr><tr><td></td><td></td><td>TimSort</td></tr></tbody></table><ul><li>å…¶ä¸­ TimSort æ˜¯ç”¨å½’å¹¶+äºŒåˆ†æ’å…¥æ’åºçš„æ··åˆæ’åºç®—æ³•</li><li>å€¼å¾—æ³¨æ„çš„æ˜¯ä» JDK 8 å¼€å§‹æ”¯æŒ Arrays.parallelSort å¹¶è¡Œæ’åº</li><li>æ ¹æ®æœ€æ–°çš„æäº¤è®°å½•æ¥çœ‹ JDK 21 å¯èƒ½ä¼šå¼•å…¥åŸºæ•°æ’åºç­‰ä¼˜åŒ–</li></ul><h4 id="å¤–éƒ¨æ’åº"><a href="#å¤–éƒ¨æ’åº" class="headerlink" title="å¤–éƒ¨æ’åº"></a>å¤–éƒ¨æ’åº</h4><h3 id="1-å†’æ³¡æ’åº"><a href="#1-å†’æ³¡æ’åº" class="headerlink" title="1) å†’æ³¡æ’åº"></a>1) å†’æ³¡æ’åº</h3><p>è¦ç‚¹</p><ul><li>æ¯è½®å†’æ³¡ä¸æ–­åœ°æ¯”è¾ƒ<strong>ç›¸é‚»</strong>çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœå®ƒä»¬æ˜¯é€†åºçš„ï¼Œåˆ™äº¤æ¢å®ƒä»¬çš„ä½ç½®</li><li>ä¸‹ä¸€è½®å†’æ³¡ï¼Œå¯ä»¥è°ƒæ•´æœªæ’åºçš„å³è¾¹ç•Œï¼Œå‡å°‘ä¸å¿…è¦æ¯”è¾ƒ</li></ul><p>ä»¥æ•°ç»„ 3ã€2ã€1 çš„å†’æ³¡æ’åºä¸ºä¾‹ï¼Œç¬¬ä¸€è½®å†’æ³¡</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230504153631958-20240713121119-fob9pad.png" alt="image-20230504153631958">â€‹</p><p>ç¬¬äºŒè½®å†’æ³¡</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230504154044402-20240713121119-fchsjdf.png" alt="image-20230504154044402">â€‹</p><p>æœªæ’åºåŒºåŸŸå†…å°±å‰©ä¸€ä¸ªå…ƒç´ ï¼Œç»“æŸ</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230504154213239-20240713121119-iyzz7zc.png" alt="image-20230504154213239">â€‹</p><p>ä¼˜åŒ–æ‰‹æ®µï¼šæ¯æ¬¡å¾ªç¯æ—¶ï¼Œè‹¥èƒ½ç¡®å®š<strong>æ›´åˆé€‚çš„</strong>å³è¾¹ç•Œï¼Œåˆ™å¯ä»¥å‡å°‘å†’æ³¡è½®æ•°</p><p>ä»¥æ•°ç»„ 3ã€2ã€1ã€4ã€5 ä¸ºä¾‹ï¼Œç¬¬ä¸€è½®ç»“æŸåè®°å½•çš„ xï¼Œå³ä¸ºå³è¾¹ç•Œ</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230504161136854-20240713121119-njrl0dr.png" alt="image-20230504161136854">â€‹</p><p>éé€’å½’ç‰ˆä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BubbleSort</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bubble</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> a.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; j; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] &gt; a[i + <span class="number">1</span>]) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">                    a[i] = a[i + <span class="number">1</span>];</span><br><span class="line">                    a[i + <span class="number">1</span>] = t;</span><br><span class="line">                    x = i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            j = x;</span><br><span class="line">            <span class="keyword">if</span> (j == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        bubble(a);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-é€‰æ‹©æ’åº"><a href="#2-é€‰æ‹©æ’åº" class="headerlink" title="2) é€‰æ‹©æ’åº"></a>2) é€‰æ‹©æ’åº</h3><p>è¦ç‚¹</p><ul><li>æ¯ä¸€è½®é€‰æ‹©ï¼Œæ‰¾å‡ºæœ€å¤§ï¼ˆæœ€å°ï¼‰çš„å…ƒç´ ï¼Œå¹¶æŠŠå®ƒäº¤æ¢åˆ°åˆé€‚çš„ä½ç½®</li></ul><p>ä»¥ä¸‹é¢çš„æ•°ç»„é€‰æ‹©æœ€å¤§å€¼ä¸ºä¾‹</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230507112728513-20240713121119-f0dixwj.png" alt="image-20230507112728513">â€‹</p><p>éé€’å½’å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SelectionSort</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. é€‰æ‹©è½®æ•° a.length - 1</span></span><br><span class="line">        <span class="comment">// 2. äº¤æ¢çš„ç´¢å¼•ä½ç½®(right) åˆå§‹ a.length - 1, æ¯æ¬¡é€’å‡</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> a.length - <span class="number">1</span>; right &gt; <span class="number">0</span> ; right--) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> right;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; right; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i] &gt; a[max]) &#123;</span><br><span class="line">                    max = i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(max != right) &#123;</span><br><span class="line">                swap(a, max, right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        sort(a);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å †æ’åº"><a href="#3-å †æ’åº" class="headerlink" title="3) å †æ’åº"></a>3) å †æ’åº</h3><p>è¦ç‚¹ï¼š</p><ul><li>å»ºç«‹å¤§é¡¶å †</li><li>æ¯æ¬¡å°†å †é¡¶å…ƒç´ ï¼ˆæœ€å¤§å€¼ï¼‰äº¤æ¢åˆ°æœ«å°¾ï¼Œè°ƒæ•´å †é¡¶å…ƒç´ ï¼Œè®©å®ƒé‡æ–°ç¬¦åˆå¤§é¡¶å †ç‰¹æ€§</li></ul><p>å»ºå †</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230508080820117-20240713121119-90jn0j9.png" alt="image-20230508080820117">â€‹</p><p>äº¤æ¢ï¼Œä¸‹æ½œè°ƒæ•´</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230508080912944-20240713121119-5rm45x2.png" alt="image-20230508080912944">â€‹</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230508080959301-20240713121119-9kk2nkv.png" alt="image-20230508080959301">â€‹</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230508081052055-20240713121119-4vnfb8f.png" alt="image-20230508081052055">â€‹</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230508081220301-20240713121119-j6tzayd.png" alt="image-20230508081220301">â€‹</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230508081315265-20240713121119-hrkapnh.png" alt="image-20230508081315265">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HeapSort</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        heapify(a, a.length);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> a.length - <span class="number">1</span>; right &gt; <span class="number">0</span>; right--) &#123;</span><br><span class="line">            swap(a, <span class="number">0</span>, right);</span><br><span class="line">            down(a, <span class="number">0</span>, right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºå † O(n)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">heapify</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            down(array, i, size);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹æ½œ</span></span><br><span class="line">    <span class="comment">// leetcode ä¸Šæ•°ç»„æ’åºé¢˜ç›®ç”¨å †æ’åºæ±‚è§£ï¼Œéé€’å½’å®ç°æ¯”é€’å½’å®ç°å¤§çº¦å¿« 6ms</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">down</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> parent, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> left + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> parent;</span><br><span class="line">            <span class="keyword">if</span> (left &lt; size &amp;&amp; array[left] &gt; array[max]) &#123;</span><br><span class="line">                max = left;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (right &lt; size &amp;&amp; array[right] &gt; array[max]) &#123;</span><br><span class="line">                max = right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (max == parent) &#123; <span class="comment">// æ²¡æ‰¾åˆ°æ›´å¤§çš„å­©å­</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(array, max, parent);</span><br><span class="line">            parent = max;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// äº¤æ¢</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        sort(a);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-æ’å…¥æ’åº"><a href="#4-æ’å…¥æ’åº" class="headerlink" title="4) æ’å…¥æ’åº"></a>4) æ’å…¥æ’åº</h3><p>è¦ç‚¹</p><ul><li><p><em>å°†æ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†</em>  <em>[0 .. low-1]  [low .. a.length-1]</em></p><ul><li><em>å·¦è¾¹</em>  <em>[0 .. low-1]</em>  <em>æ˜¯å·²æ’åºéƒ¨åˆ†</em></li><li><em>å³è¾¹</em>  <em>[low .. a.length-1]</em>  <em>æ˜¯æœªæ’åºéƒ¨åˆ†</em></li></ul></li><li><p><em>æ¯æ¬¡ä»æœªæ’åºåŒºåŸŸå–å‡º</em> <em>low</em> <em>ä½ç½®çš„å…ƒç´ </em>, <em>æ’å…¥åˆ°å·²æ’åºåŒºåŸŸ</em></p></li></ul><p>ä¾‹</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513150750673-20240713121119-n1pl7hx.png" alt="image-20230513150750673">â€‹</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513150907333-20240713121119-hseodna.png" alt="image-20230513150907333">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InsertionSort</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> <span class="number">1</span>; low &lt; a.length; low++) &#123;</span><br><span class="line">            <span class="comment">// å°† low ä½ç½®çš„å…ƒç´ æ’å…¥è‡³ [0..low-1] çš„å·²æ’åºåŒºåŸŸ</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[low];</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> low - <span class="number">1</span>; <span class="comment">// å·²æ’åºåŒºåŸŸæŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; t &lt; a[i]) &#123; <span class="comment">// æ²¡æœ‰æ‰¾åˆ°æ’å…¥ä½ç½®</span></span><br><span class="line">                a[i + <span class="number">1</span>] = a[i]; <span class="comment">// ç©ºå‡ºæ’å…¥ä½ç½®</span></span><br><span class="line">                i--;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰¾åˆ°æ’å…¥ä½ç½®</span></span><br><span class="line">            <span class="keyword">if</span> (i != low - <span class="number">1</span>) &#123;</span><br><span class="line">                a[i + <span class="number">1</span>] = t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">9</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        sort(a);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-å¸Œå°”æ’åº"><a href="#5-å¸Œå°”æ’åº" class="headerlink" title="5) å¸Œå°”æ’åº"></a>5) å¸Œå°”æ’åº</h3><p>è¦ç‚¹</p><ul><li>ç®€å•çš„è¯´ï¼Œå°±æ˜¯åˆ†ç»„å®ç°æ’å…¥ï¼Œæ¯ç»„å…ƒç´ é—´éš™ç§°ä¸º gap</li><li>æ¯è½®æ’åºå gap é€æ¸å˜å°ï¼Œç›´è‡³ gap ä¸º 1 å®Œæˆæ’åº</li><li>å¯¹æ’å…¥æ’åºçš„ä¼˜åŒ–ï¼Œè®©å…ƒç´ æ›´å¿«é€Ÿåœ°äº¤æ¢åˆ°æœ€ç»ˆä½ç½®</li></ul><p>ä¸‹å›¾æ¼”ç¤ºäº† gap &#x3D; 4ï¼Œgap &#x3D; 2ï¼Œgap &#x3D; 1 çš„ä¸‰è½®æ’åºå‰åæ¯”è¾ƒ</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230508182439075-20240713121119-qbw7erk.png" alt="image-20230508182439075">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShellSort</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">gap</span> <span class="operator">=</span> a.length&gt;&gt;<span class="number">1</span>; gap &gt;<span class="number">0</span> ; gap=gap&gt;&gt;<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> gap; low &lt; a.length; low ++) &#123;</span><br><span class="line">                <span class="comment">// å°† low ä½ç½®çš„å…ƒç´ æ’å…¥è‡³ [0..low-1] çš„å·²æ’åºåŒºåŸŸ</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[low];</span><br><span class="line">                <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> low - gap; <span class="comment">// å·²æ’åºåŒºåŸŸæŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; t &lt; a[i]) &#123; <span class="comment">// æ²¡æœ‰æ‰¾åˆ°æ’å…¥ä½ç½®</span></span><br><span class="line">                    a[i + gap] = a[i]; <span class="comment">// ç©ºå‡ºæ’å…¥ä½ç½®</span></span><br><span class="line">                    i -= gap;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ‰¾åˆ°æ’å…¥ä½ç½®</span></span><br><span class="line">                <span class="keyword">if</span> (i != low - gap) &#123;</span><br><span class="line">                    a[i + gap] = t;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;        </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">9</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        sort(a);</span><br><span class="line">System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-å½’å¹¶æ’åº"><a href="#6-å½’å¹¶æ’åº" class="headerlink" title="6) å½’å¹¶æ’åº"></a>6) å½’å¹¶æ’åº</h3><h4 id="é€’å½’å®ç°"><a href="#é€’å½’å®ç°" class="headerlink" title="é€’å½’å®ç°"></a>é€’å½’å®ç°</h4><p>è¦ç‚¹</p><ul><li>åˆ† - æ¯æ¬¡ä»ä¸­é—´åˆ‡ä¸€åˆ€ï¼Œå¤„ç†çš„æ•°æ®å°‘ä¸€åŠ</li><li>æ²» - å½“æ•°æ®ä»…å‰©ä¸€ä¸ªæ—¶å¯ä»¥è®¤ä¸ºæœ‰åº</li><li>åˆ - ä¸¤ä¸ªæœ‰åºçš„ç»“æœï¼Œå¯ä»¥è¿›è¡Œåˆå¹¶æ’åºï¼ˆå‚è§æ•°ç»„ç»ƒä¹  E01. åˆå¹¶æœ‰åºæ•°ç»„ï¼‰</li></ul><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513143854887-20240713121119-88wnq78.png" alt="image-20230513143854887">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MergeSortTopDown</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        a1 åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="comment">        i~iEnd ç¬¬ä¸€ä¸ªæœ‰åºèŒƒå›´</span></span><br><span class="line"><span class="comment">        j~jEnd ç¬¬äºŒä¸ªæœ‰åºèŒƒå›´</span></span><br><span class="line"><span class="comment">        a2 ä¸´æ—¶æ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] a1, <span class="type">int</span> i, <span class="type">int</span> iEnd, <span class="type">int</span> j, <span class="type">int</span> jEnd, <span class="type">int</span>[] a2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i;</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= iEnd &amp;&amp; j &lt;= jEnd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a1[i] &lt; a1[j]) &#123;</span><br><span class="line">                a2[k] = a1[i];</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                a2[k] = a1[j];</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; iEnd) &#123;</span><br><span class="line">            System.arraycopy(a1, j, a2, k, jEnd - j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j &gt; jEnd) &#123;</span><br><span class="line">            System.arraycopy(a1, i, a2, k, iEnd - i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a1)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a2 = <span class="keyword">new</span> <span class="title class_">int</span>[a1.length];</span><br><span class="line">        split(a1, <span class="number">0</span>, a1.length - <span class="number">1</span>, a2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">split</span><span class="params">(<span class="type">int</span>[] a1, <span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span>[] a2)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] array = Arrays.copyOfRange(a1, left, right + <span class="number">1</span>);</span><br><span class="line"><span class="comment">//        System.out.println(Arrays.toString(array));</span></span><br><span class="line">        <span class="comment">// 2. æ²»</span></span><br><span class="line">        <span class="keyword">if</span> (left == right) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 1. åˆ†</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (left + right) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        split(a1, left, m, a2);                 <span class="comment">// left = 0 m = 0  9</span></span><br><span class="line">        split(a1, m + <span class="number">1</span>, right, a2);       <span class="comment">// m+1 = 1 right = 1  3</span></span><br><span class="line">        <span class="comment">// 3. åˆ</span></span><br><span class="line">        merge(a1, left, m, m + <span class="number">1</span>, right, a2);</span><br><span class="line">        System.arraycopy(a2, left, a1, left, right - left + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">9</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        sort(a);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h4><ul><li><p>ä¸¤ä¸ªé•¿åº¦ä¸º m å’Œ n çš„é“¾è¡¨åˆå¹¶ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ m + n</p></li><li><p>å½’å¹¶ï¼Œæ—¶é—´å¤æ‚åº¦ï¼š$f(n) &#x3D; 2f(n&#x2F;2) + n, f(1)&#x3D;c$ï¼Œç­‰ä»·è§£ $f(n) &#x3D; nlog_2{n} + cn$</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">             8</span><br><span class="line">          /     \</span><br><span class="line">         4       4</span><br><span class="line">        / \     / \</span><br><span class="line">       2   2   2   2</span><br><span class="line">      ||   ||  ||  ||</span><br><span class="line">      11   11  11  11  </span><br><span class="line"></span><br><span class="line">f(8) = 2f(4) + 8</span><br><span class="line">f(4) = 2f(2) + 4</span><br><span class="line">f(2) = 2f(1) + 2</span><br><span class="line">f(1) = 1</span><br><span class="line"></span><br><span class="line">f(8) = 8 + 24</span><br><span class="line">f(4) = 4 + 8</span><br><span class="line">f(2) = 2 + 2</span><br><span class="line">f(1) = 1</span><br></pre></td></tr></table></figure><ul><li>å½“ n &#x3D; 16 æ—¶ï¼Œç»“æœ 80</li><li>å½“ n &#x3D; 64 æ—¶ï¼Œç»“æœ 448</li></ul></li><li><p>è‹¥é€ä¸€åˆå¹¶ï¼Œæ—¶é—´å¤æ‚åº¦ï¼š$f(n)&#x3D;\sum\limits_{n&#x3D;0}^{n-1}n+1$ï¼Œç­‰ä»·è§£ $f(n)&#x3D;\frac{1}{2}(n^2+n)$</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1|0 =&gt; 1</span><br><span class="line">1|1 =&gt; 2</span><br><span class="line">1|2 =&gt; 3</span><br><span class="line">1|3 =&gt; 4</span><br><span class="line">1|4 =&gt; 5</span><br><span class="line">1|5 =&gt; 6</span><br><span class="line">1|6 =&gt; 7</span><br><span class="line">1|7 =&gt; 8</span><br><span class="line"></span><br><span class="line">36</span><br></pre></td></tr></table></figure><ul><li>å½“ n &#x3D; 16 æ—¶ï¼Œç»“æœ 136</li><li>å½“ n &#x3D; 64 æ—¶ï¼Œç»“æœ 2080</li></ul></li></ul><h4 id="éé€’å½’å®ç°"><a href="#éé€’å½’å®ç°" class="headerlink" title="éé€’å½’å®ç°"></a>éé€’å½’å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MergeSortBottomUp</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        a1 åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="comment">        i~iEnd ç¬¬ä¸€ä¸ªæœ‰åºèŒƒå›´</span></span><br><span class="line"><span class="comment">        j~jEnd ç¬¬äºŒä¸ªæœ‰åºèŒƒå›´</span></span><br><span class="line"><span class="comment">        a2 ä¸´æ—¶æ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] a1, <span class="type">int</span> i, <span class="type">int</span> iEnd, <span class="type">int</span> j, <span class="type">int</span> jEnd, <span class="type">int</span>[] a2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i;</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= iEnd &amp;&amp; j &lt;= jEnd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a1[i] &lt; a1[j]) &#123;</span><br><span class="line">                a2[k] = a1[i];</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                a2[k] = a1[j];</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; iEnd) &#123;</span><br><span class="line">            System.arraycopy(a1, j, a2, k, jEnd - j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j &gt; jEnd) &#123;</span><br><span class="line">            System.arraycopy(a1, i, a2, k, iEnd - i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a1)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> a1.length;</span><br><span class="line">        <span class="type">int</span>[] a2 = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> <span class="number">1</span>; width &lt; n; width *= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i += <span class="number">2</span> * width) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> Integer.min(i + width - <span class="number">1</span>, n - <span class="number">1</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> Integer.min(i + <span class="number">2</span> * width - <span class="number">1</span>, n - <span class="number">1</span>);</span><br><span class="line">                System.out.println(i + <span class="string">&quot; &quot;</span> + m + <span class="string">&quot; &quot;</span> + j);</span><br><span class="line">                merge(a1, i, m, m + <span class="number">1</span>, j, a2);</span><br><span class="line">            &#125;</span><br><span class="line">            System.arraycopy(a2, <span class="number">0</span>, a1, <span class="number">0</span>, n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">9</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        sort(a);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-å½’å¹¶-æ’å…¥"><a href="#7-å½’å¹¶-æ’å…¥" class="headerlink" title="7) å½’å¹¶+æ’å…¥"></a>7) å½’å¹¶+æ’å…¥</h3><ul><li>å°æ•°æ®é‡ä¸”æœ‰åºåº¦é«˜æ—¶ï¼Œæ’å…¥æ’åºæ•ˆæœé«˜</li><li>å¤§æ•°æ®é‡ç”¨å½’å¹¶æ•ˆæœå¥½</li><li>å¯ä»¥ç»“åˆäºŒè€…</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MergeInsertionSort</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">insertion</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> left + <span class="number">1</span>; low &lt;= right; low++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[low];</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> low - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (i &gt;= left &amp;&amp; t &lt; a[i]) &#123;</span><br><span class="line">                a[i + <span class="number">1</span>] = a[i];</span><br><span class="line">                i--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i != low - <span class="number">1</span>) &#123;</span><br><span class="line">                a[i + <span class="number">1</span>] = t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        a1 åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="comment">        i~iEnd ç¬¬ä¸€ä¸ªæœ‰åºèŒƒå›´</span></span><br><span class="line"><span class="comment">        j~jEnd ç¬¬äºŒä¸ªæœ‰åºèŒƒå›´</span></span><br><span class="line"><span class="comment">        a2 ä¸´æ—¶æ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] a1, <span class="type">int</span> i, <span class="type">int</span> iEnd, <span class="type">int</span> j, <span class="type">int</span> jEnd, <span class="type">int</span>[] a2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i;</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= iEnd &amp;&amp; j &lt;= jEnd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a1[i] &lt; a1[j]) &#123;</span><br><span class="line">                a2[k] = a1[i];</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                a2[k] = a1[j];</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; iEnd) &#123;</span><br><span class="line">            System.arraycopy(a1, j, a2, k, jEnd - j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j &gt; jEnd) &#123;</span><br><span class="line">            System.arraycopy(a1, i, a2, k, iEnd - i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a1)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a2 = <span class="keyword">new</span> <span class="title class_">int</span>[a1.length];</span><br><span class="line">        split(a1, <span class="number">0</span>, a1.length - <span class="number">1</span>, a2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">split</span><span class="params">(<span class="type">int</span>[] a1, <span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span>[] a2)</span> &#123;</span><br><span class="line"><span class="comment">//        int[] array = Arrays.copyOfRange(a1, left, right + 1);</span></span><br><span class="line"><span class="comment">//        System.out.println(Arrays.toString(array));</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. æ²»</span></span><br><span class="line">        <span class="keyword">if</span> (right == left) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (right - left &lt;= <span class="number">32</span>) &#123;</span><br><span class="line">            insertion(a1, left, right);</span><br><span class="line">            System.out.println(<span class="string">&quot;insert...&quot;</span> + left + <span class="string">&quot; &quot;</span> + right +<span class="string">&quot; &quot;</span>+Arrays.toString(a1));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 1. åˆ†</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (left + right) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        split(a1, left, m, a2);                 <span class="comment">// left = 0 m = 0  9</span></span><br><span class="line">        split(a1, m + <span class="number">1</span>, right, a2);       <span class="comment">// m+1 = 1 right = 1  3</span></span><br><span class="line">        System.out.println(left + <span class="string">&quot; &quot;</span> + right + <span class="string">&quot; &quot;</span>+Arrays.toString(a1));</span><br><span class="line">        <span class="comment">// 3. åˆ</span></span><br><span class="line">        merge(a1, left, m, m + <span class="number">1</span>, right, a2);</span><br><span class="line">        System.arraycopy(a2, left, a1, left, right - left + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">9</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        sort(a);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-å¿«é€Ÿæ’åº"><a href="#8-å¿«é€Ÿæ’åº" class="headerlink" title="8) å¿«é€Ÿæ’åº"></a>8) å¿«é€Ÿæ’åº</h3><p>å•è¾¹å¾ªç¯ï¼ˆlomutoåˆ†åŒºï¼‰è¦ç‚¹</p><ul><li><p>é€‰æ‹©æœ€å³ä¾§å…ƒç´ ä½œä¸ºåŸºå‡†ç‚¹</p></li><li><p>j æ‰¾æ¯”åŸºå‡†ç‚¹å°çš„ï¼Œi æ‰¾æ¯”åŸºå‡†ç‚¹å¤§çš„ï¼Œä¸€æ—¦æ‰¾åˆ°ï¼ŒäºŒè€…è¿›è¡Œäº¤æ¢</p><ul><li>äº¤æ¢æ—¶æœºï¼šj æ‰¾åˆ°å°çš„ï¼Œä¸”ä¸ i ä¸ç›¸ç­‰</li><li>i æ‰¾åˆ° &gt;&#x3D; åŸºå‡†ç‚¹å…ƒç´ åï¼Œä¸åº”è‡ªå¢</li></ul></li><li><p>æœ€ååŸºå‡†ç‚¹ä¸ i äº¤æ¢ï¼Œi å³ä¸ºåŸºå‡†ç‚¹æœ€ç»ˆç´¢å¼•</p></li></ul><p>ä¾‹ï¼š</p><p>i å’Œ j éƒ½ä»å·¦è¾¹å‡ºå‘å‘å³æŸ¥æ‰¾ï¼Œi æ‰¾åˆ°æ¯”åŸºå‡†ç‚¹4å¤§çš„5ï¼Œjæ‰¾åˆ°æ¯”åŸºå‡†ç‚¹å°çš„2ï¼Œåœä¸‹æ¥äº¤æ¢</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513145045085-20240713121119-j8xphm5.png" alt="image-20230513145045085">â€‹</p><p>i æ‰¾åˆ°äº†æ¯”åŸºå‡†ç‚¹å¤§çš„5ï¼Œj æ‰¾åˆ°æ¯”åŸºå‡†ç‚¹å°çš„3ï¼Œåœä¸‹æ¥äº¤æ¢</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513145259217-20240713121119-6fs7a9a.png" alt="image-20230513145259217">â€‹</p><p>j åˆ°è¾¾right å¤„ç»“æŸï¼Œright ä¸ i äº¤æ¢ï¼Œä¸€è½®åˆ†åŒºç»“æŸ</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513145454772-20240713121119-t63x7qr.png" alt="image-20230513145454772">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickSortLomuto</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        quick(a, <span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quick</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (left &gt;= right) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> partition(a, left, right); <span class="comment">// pä»£è¡¨åŸºå‡†ç‚¹å…ƒç´ ç´¢å¼•</span></span><br><span class="line">        quick(a, left, p - <span class="number">1</span>);</span><br><span class="line">        quick(a, p + <span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pv</span> <span class="operator">=</span> a[right]; <span class="comment">// åŸºå‡†ç‚¹å…ƒç´ å€¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> left;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> left;</span><br><span class="line">        <span class="keyword">while</span> (j &lt; right) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[j] &lt; pv) &#123; <span class="comment">// j æ‰¾åˆ°æ¯”åŸºå‡†ç‚¹å°çš„äº†, æ²¡æ‰¾åˆ°å¤§çš„</span></span><br><span class="line">                <span class="keyword">if</span> (i != j) &#123;</span><br><span class="line">                    swap(a, i, j);</span><br><span class="line">                &#125;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(a, i, right);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">5</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        sort(a);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒè¾¹å¾ªç¯è¦ç‚¹</p><ul><li><p>é€‰æ‹©æœ€å·¦ä¾§å…ƒç´ ä½œä¸ºåŸºå‡†ç‚¹</p></li><li><p>j æ‰¾æ¯”åŸºå‡†ç‚¹å°çš„ï¼Œi æ‰¾æ¯”åŸºå‡†ç‚¹å¤§çš„ï¼Œä¸€æ—¦æ‰¾åˆ°ï¼ŒäºŒè€…è¿›è¡Œäº¤æ¢</p><ul><li>i ä»å·¦å‘å³</li><li>j ä»å³å‘å·¦</li></ul></li><li><p>æœ€ååŸºå‡†ç‚¹ä¸ i äº¤æ¢ï¼Œi å³ä¸ºåŸºå‡†ç‚¹æœ€ç»ˆç´¢å¼•</p></li></ul><p>ä¾‹ï¼š</p><p>i æ‰¾åˆ°æ¯”åŸºå‡†ç‚¹å¤§çš„5åœä¸‹æ¥ï¼Œj æ‰¾åˆ°æ¯”åŸºå‡†ç‚¹å°çš„1åœä¸‹æ¥ï¼ˆåŒ…å«ç­‰äºï¼‰ï¼ŒäºŒè€…äº¤æ¢</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513145918612-20240713121119-662mwsn.png" alt="image-20230513145918612">â€‹</p><p>i æ‰¾åˆ°8ï¼Œj æ‰¾åˆ°3ï¼ŒäºŒè€…äº¤æ¢ï¼Œi æ‰¾åˆ°7ï¼Œj æ‰¾åˆ°2ï¼ŒäºŒè€…äº¤æ¢</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513150158220-20240713121119-2beuu08.png" alt="image-20230513150158220">â€‹</p><p>i &#x3D;&#x3D; jï¼Œé€€å‡ºå¾ªç¯ï¼ŒåŸºå‡†ç‚¹ä¸ i äº¤æ¢</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513150351115-20240713121119-rq35k4o.png" alt="image-20230513150351115">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickSortHoare</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        quick(a, <span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quick</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (left &gt;= right) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> partition(a, left, right);</span><br><span class="line">        quick(a, left, p - <span class="number">1</span>);</span><br><span class="line">        quick(a, p + <span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> left;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> right;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pv</span> <span class="operator">=</span> a[left];</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; j &amp;&amp; a[j] &gt; pv) &#123;</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; j &amp;&amp; pv &gt;= a[i]) &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(a, i, j);</span><br><span class="line">        &#125;</span><br><span class="line">        swap(a, left, j);</span><br><span class="line">        <span class="keyword">return</span> j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">9</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        sort(a);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éšæœºåŸºå‡†ç‚¹"><a href="#éšæœºåŸºå‡†ç‚¹" class="headerlink" title="éšæœºåŸºå‡†ç‚¹"></a>éšæœºåŸºå‡†ç‚¹</h4><p>ä½¿ç”¨éšæœºæ•°ä½œä¸ºåŸºå‡†ç‚¹ï¼Œé¿å…ä¸‡ä¸€æœ€å¤§å€¼æˆ–æœ€å°å€¼ä½œä¸ºåŸºå‡†ç‚¹å¯¼è‡´çš„åˆ†åŒºä¸å‡è¡¡</p><p>ä¾‹</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513152038090-20240713121119-b1hfvuv.png" alt="image-20230513152038090">â€‹</p><p>æ”¹è¿›ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> ThreadLocalRandom.current().nextInt(right - left + <span class="number">1</span>) + left;</span><br><span class="line">swap(a, idx, left);</span><br></pre></td></tr></table></figure><h4 id="å¤„ç†é‡å¤å€¼"><a href="#å¤„ç†é‡å¤å€¼" class="headerlink" title="å¤„ç†é‡å¤å€¼"></a>å¤„ç†é‡å¤å€¼</h4><p>å¦‚æœé‡å¤å€¼è¾ƒå¤šï¼Œåˆ™åŸæ¥ç®—æ³•ä¸­çš„åˆ†åŒºæ•ˆæœä¹Ÿä¸å¥½ï¼Œå¦‚ä¸‹å›¾ä¸­å·¦ä¾§æ‰€ç¤ºï¼Œéœ€è¦æƒ³åŠæ³•æ”¹ä¸ºå³ä¾§çš„åˆ†åŒºæ•ˆæœ</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/image-20230513151851103-20240713121119-yaxmll6.png" alt="image-20230513151851103">â€‹</p><p>æ”¹è¿›ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickSortHandleDuplicate</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        quick(a, <span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quick</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (left &gt;= right) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> partition(a, left, right);</span><br><span class="line">        quick(a, left, p - <span class="number">1</span>);</span><br><span class="line">        quick(a, p + <span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¾ªç¯å†…</span></span><br><span class="line"><span class="comment">            i ä» left + 1 å¼€å§‹ï¼Œä»å·¦å‘å³æ‰¾å¤§çš„æˆ–ç›¸ç­‰çš„</span></span><br><span class="line"><span class="comment">            j ä» right å¼€å§‹ï¼Œä»å³å‘å·¦æ‰¾å°çš„æˆ–ç›¸ç­‰çš„</span></span><br><span class="line"><span class="comment">            äº¤æ¢ï¼Œi++ j--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        å¾ªç¯å¤– j å’Œ åŸºå‡†ç‚¹äº¤æ¢ï¼Œj å³ä¸ºåˆ†åŒºä½ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> ThreadLocalRandom.current().nextInt(right - left + <span class="number">1</span>) + left;</span><br><span class="line">        swap(a, left, idx);</span><br><span class="line">        <span class="type">int</span> <span class="variable">pv</span> <span class="operator">=</span> a[left];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> left + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> right;</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">            <span class="comment">// i ä»å·¦å‘å³æ‰¾å¤§çš„æˆ–è€…ç›¸ç­‰çš„</span></span><br><span class="line">            <span class="keyword">while</span> (i &lt;= j &amp;&amp; a[i] &lt; pv) &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// j ä»å³å‘å·¦æ‰¾å°çš„æˆ–è€…ç›¸ç­‰çš„</span></span><br><span class="line">            <span class="keyword">while</span> (i &lt;= j &amp;&amp; a[j] &gt; pv) &#123;</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i &lt;= j) &#123;</span><br><span class="line">                swap(a, i, j);</span><br><span class="line">                i++;</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(a, j, left);</span><br><span class="line">        <span class="keyword">return</span> j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        int[] a = &#123;4, 2, 1, 3, 2, 4&#125;; // æœ€å¤–å±‚å¾ªç¯ = è¦åŠ </span></span><br><span class="line"><span class="comment">//        int[] a = &#123;2, 1, 3, 2&#125;; // å†…å±‚å¾ªç¯ = è¦åŠ </span></span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>&#125;; <span class="comment">// å†…å±‚ifè¦åŠ </span></span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">        sort(a);</span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>æ ¸å¿ƒæ€æƒ³æ˜¯</p><ul><li>æ”¹è¿›å‰ï¼Œi åªæ‰¾å¤§äºçš„ï¼Œj ä¼šæ‰¾å°äºç­‰äºçš„ã€‚ä¸€ä¸ªä¸æ‰¾ç­‰äºã€ä¸€ä¸ªæ‰¾ç­‰äºï¼ŒåŠ¿å¿…å¯¼è‡´ç­‰äºçš„å€¼åˆ†å¸ƒä¸å¹³è¡¡</li><li>æ”¹è¿›åï¼ŒäºŒè€…éƒ½ä¼šæ‰¾ç­‰äºçš„äº¤æ¢ï¼Œç­‰äºçš„å€¼ä¼šå¹³è¡¡åˆ†å¸ƒåœ¨åŸºå‡†ç‚¹ä¸¤è¾¹</li></ul></li><li><p>ç»†èŠ‚ï¼š</p><ul><li>å› ä¸ºä¸€å¼€å§‹ i å°±å¯èƒ½ç­‰äº jï¼Œå› æ­¤å¤–å±‚å¾ªç¯éœ€è¦åŠ ç­‰äºæ¡ä»¶ä¿è¯è‡³å°‘è¿›å…¥ä¸€æ¬¡ï¼Œè®© j èƒ½å‡åˆ°æ­£ç¡®ä½ç½®</li><li>å†…å±‚ while å¾ªç¯ä¸­ i &lt;&#x3D; j çš„ &#x3D; ä¹Ÿä¸èƒ½å»æ‰ï¼Œå› ä¸º i &#x3D;&#x3D; j æ—¶ä¹Ÿè¦åšä¸€æ¬¡ä¸åŸºå‡†ç‚¹çš„åˆ¤æ–­ï¼Œå¥½è®© i åŠ j æ­£ç¡®</li><li>i &#x3D;&#x3D; j æ—¶ï¼Œä¹Ÿè¦åšä¸€æ¬¡ i++ å’Œ jâ€“ ä½¿ä¸‹æ¬¡å¾ªç¯äºŒè€…ä¸ç­‰æ‰èƒ½é€€å‡º</li><li>å› ä¸ºæœ€åé€€å‡ºå¾ªç¯æ—¶ i ä¼šå¤§äº jï¼Œå› æ­¤æœ€ç»ˆä¸åŸºå‡†ç‚¹äº¤æ¢çš„æ˜¯ j</li></ul></li><li><p>å†…å±‚ä¸¤ä¸ª while å¾ªç¯çš„å…ˆåé¡ºåºä¸å†é‡è¦</p></li></ul><h3 id="9-è®¡æ•°æ’åº"><a href="#9-è®¡æ•°æ’åº" class="headerlink" title="9) è®¡æ•°æ’åº"></a>9) è®¡æ•°æ’åº</h3><p>æ–¹æ³•1ï¼ˆç®€åŒ–åçš„è®¡æ•°æ’åºï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i : a) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; max) &#123;</span><br><span class="line">            max = i;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i &lt; min) &#123;</span><br><span class="line">            min = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] counting = <span class="keyword">new</span> <span class="title class_">int</span>[max - min + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i : a) &#123;</span><br><span class="line">        counting[i - min]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; counting.length; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (counting[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            a[k] = i + min;</span><br><span class="line">            counting[i]--;</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é’ˆå¯¹ byte []ï¼Œå› ä¸ºæ•°æ®èŒƒå›´å·²çŸ¥ï¼Œçœå»äº†æ±‚æœ€å¤§ã€æœ€å°å€¼çš„è¿‡ç¨‹ï¼Œjava ä¸­å¯¹ char[]ã€short[]ã€byte[] çš„æ’åºéƒ½å¯èƒ½é‡‡ç”¨ counting æ’åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">byte</span>[] a)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] counting = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">256</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i : a) &#123;</span><br><span class="line">        counting[i &amp; <span class="number">0xFF</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> a.length-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">128</span> + <span class="number">256</span>; k &gt;= <span class="number">0</span>; ) &#123;        </span><br><span class="line">        <span class="keyword">while</span> (counting[--i &amp; <span class="number">0xFF</span>] ==<span class="number">0</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">v</span> <span class="operator">=</span> i &amp; <span class="number">0xFF</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> counting[i &amp; <span class="number">0xFF</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; c; j++) &#123;</span><br><span class="line">            a[k] = (<span class="type">byte</span>) v;</span><br><span class="line">            k--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¨³å®šè®¡æ•°æ’åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort2</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i : a) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; max) &#123;</span><br><span class="line">            max = i;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i &lt; min) &#123;</span><br><span class="line">            min = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] counting = <span class="keyword">new</span> <span class="title class_">int</span>[max - min + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i : a) &#123;</span><br><span class="line">        counting[i - min]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; counting.length; i++) &#123;</span><br><span class="line">        counting[i] = counting[i] + counting[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] b = <span class="keyword">new</span> <span class="title class_">int</span>[a.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> a.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> a[i] - min;</span><br><span class="line">        counting[j]--;</span><br><span class="line">        b[counting[j]] = a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    System.arraycopy(b, <span class="number">0</span>, a, <span class="number">0</span>, a.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-æ¡¶æ’åº"><a href="#10-æ¡¶æ’åº" class="headerlink" title="10) æ¡¶æ’åº"></a>10) æ¡¶æ’åº</h3><p>åˆæ­¥å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BucketSort</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] ages = &#123;<span class="number">20</span>, <span class="number">18</span>, <span class="number">66</span>, <span class="number">25</span>, <span class="number">67</span>, <span class="number">30</span>&#125;; <span class="comment">// å‡è®¾äººç±»å¹´é¾„ 1~99 é‚£ä¹ˆåˆ†ä¸º10ä¸ªæ¡¶</span></span><br><span class="line">        System.out.println(Arrays.toString(ages));</span><br><span class="line">        sort(ages);</span><br><span class="line">        System.out.println(Arrays.toString(ages));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        DynamicArray[] buckets = <span class="keyword">new</span> <span class="title class_">DynamicArray</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; buckets.length; i++) &#123;</span><br><span class="line">            buckets[i] = <span class="keyword">new</span> <span class="title class_">DynamicArray</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> v : a) &#123;</span><br><span class="line">            <span class="type">DynamicArray</span> <span class="variable">bucket</span> <span class="operator">=</span> buckets[v / <span class="number">10</span>];</span><br><span class="line">            bucket.addLast(v);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (DynamicArray bucket : buckets) &#123;</span><br><span class="line">            System.out.println(Arrays.toString(bucket.array()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (DynamicArray bucket : buckets) &#123;</span><br><span class="line">            <span class="type">int</span>[] array = bucket.array();</span><br><span class="line">            InsertionSort.sort(array);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> v : array) &#123;</span><br><span class="line">                a[k++] = v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BucketSortGeneric</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] ages = &#123;<span class="number">20</span>, <span class="number">10</span>, <span class="number">28</span>, <span class="number">66</span>, <span class="number">25</span>, <span class="number">31</span>, <span class="number">67</span>, <span class="number">30</span>, <span class="number">70</span>&#125;; <span class="comment">// å‡è®¾äººç±»å¹´é¾„ 1~99</span></span><br><span class="line">        System.out.println(Arrays.toString(ages));</span><br><span class="line">        sort(ages, <span class="number">20</span>);</span><br><span class="line">        System.out.println(Arrays.toString(ages));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> range)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] &gt; max) &#123;</span><br><span class="line">                max = a[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (a[i] &lt; min) &#123;</span><br><span class="line">                min = a[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 1. å‡†å¤‡æ¡¶</span></span><br><span class="line">        DynamicArray[] buckets = <span class="keyword">new</span> <span class="title class_">DynamicArray</span>[(max - min) / range + <span class="number">1</span>];</span><br><span class="line">        System.out.println(buckets.length);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; buckets.length; i++) &#123;</span><br><span class="line">            buckets[i] = <span class="keyword">new</span> <span class="title class_">DynamicArray</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2. æ”¾å…¥å¹´é¾„æ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> age : a) &#123;</span><br><span class="line">            buckets[(age - min) / range].addLast(age);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (DynamicArray bucket : buckets) &#123;</span><br><span class="line">            <span class="comment">// 3. æ’åºæ¡¶å†…å…ƒç´ </span></span><br><span class="line">            <span class="type">int</span>[] array = bucket.array();</span><br><span class="line">            InsertionSort.sort(array);</span><br><span class="line">            System.out.println(Arrays.toString(array));</span><br><span class="line">            <span class="comment">// 4. æŠŠæ¯ä¸ªæ¡¶æ’åºå¥½çš„å†…å®¹ï¼Œä¾æ¬¡æ”¾å…¥åŸå§‹æ•°ç»„</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> v : array) &#123;</span><br><span class="line">                a[k++] = v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="11-åŸºæ•°æ’åº"><a href="#11-åŸºæ•°æ’åº" class="headerlink" title="11) åŸºæ•°æ’åº"></a>11) åŸºæ•°æ’åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RadixSort</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">radixSort</span><span class="params">(String[] a, <span class="type">int</span> length)</span> &#123;</span><br><span class="line">        ArrayList&lt;String&gt;[] buckets = <span class="keyword">new</span> <span class="title class_">ArrayList</span>[<span class="number">128</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; buckets.length; i++) &#123;</span><br><span class="line">            buckets[i] = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> length - <span class="number">1</span>; i &gt;= <span class="number">0</span> ; i--) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String s : a) &#123;</span><br><span class="line">                buckets[s.charAt(i)].add(s);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (ArrayList&lt;String&gt; bucket : buckets) &#123;</span><br><span class="line">                <span class="keyword">for</span> (String s : bucket) &#123;</span><br><span class="line">                    a[k++] = s;</span><br><span class="line">                &#125;</span><br><span class="line">                bucket.clear();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*String[] phoneNumbers = new String[10];</span></span><br><span class="line"><span class="comment">        phoneNumbers[0] = &quot;13812345678&quot;;</span></span><br><span class="line"><span class="comment">        phoneNumbers[1] = &quot;13912345678&quot;;</span></span><br><span class="line"><span class="comment">        phoneNumbers[2] = &quot;13612345678&quot;;</span></span><br><span class="line"><span class="comment">        phoneNumbers[3] = &quot;13712345678&quot;;</span></span><br><span class="line"><span class="comment">        phoneNumbers[4] = &quot;13512345678&quot;;</span></span><br><span class="line"><span class="comment">        phoneNumbers[5] = &quot;13412345678&quot;;</span></span><br><span class="line"><span class="comment">        phoneNumbers[6] = &quot;15012345678&quot;;</span></span><br><span class="line"><span class="comment">        phoneNumbers[7] = &quot;15112345678&quot;;</span></span><br><span class="line"><span class="comment">        phoneNumbers[8] = &quot;15212345678&quot;;</span></span><br><span class="line"><span class="comment">        phoneNumbers[9] = &quot;15712345678&quot;;*/</span></span><br><span class="line"></span><br><span class="line">        String[] phoneNumbers = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">10</span>];</span><br><span class="line">        phoneNumbers[<span class="number">0</span>] = <span class="string">&quot;138&quot;</span>;</span><br><span class="line">        phoneNumbers[<span class="number">1</span>] = <span class="string">&quot;139&quot;</span>;</span><br><span class="line">        phoneNumbers[<span class="number">2</span>] = <span class="string">&quot;136&quot;</span>;</span><br><span class="line">        phoneNumbers[<span class="number">3</span>] = <span class="string">&quot;137&quot;</span>;</span><br><span class="line">        phoneNumbers[<span class="number">4</span>] = <span class="string">&quot;135&quot;</span>;</span><br><span class="line">        phoneNumbers[<span class="number">5</span>] = <span class="string">&quot;134&quot;</span>;</span><br><span class="line">        phoneNumbers[<span class="number">6</span>] = <span class="string">&quot;150&quot;</span>;</span><br><span class="line">        phoneNumbers[<span class="number">7</span>] = <span class="string">&quot;151&quot;</span>;</span><br><span class="line">        phoneNumbers[<span class="number">8</span>] = <span class="string">&quot;152&quot;</span>;</span><br><span class="line">        phoneNumbers[<span class="number">9</span>] = <span class="string">&quot;157&quot;</span>;</span><br><span class="line">        RadixSort.radixSort(phoneNumbers, <span class="number">3</span>);</span><br><span class="line">        <span class="keyword">for</span> (String phoneNumber : phoneNumbers) &#123;</span><br><span class="line">            System.out.println(phoneNumber);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸºæ•°æ’åºæ˜¯ç¨³å®šæ’åºï¼Œå› æ­¤å…ˆæ’ä¸ªä½ã€å†æ’åä½ï¼Œåä½çš„æ’åºä¸ä¼šæ‰“ä¹±ä¸ªä½å–å€¼ç›¸ç­‰çš„å…ƒç´ é¡ºåº</p><h3 id="ä¹ é¢˜-2"><a href="#ä¹ é¢˜-2" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-æ ¹æ®å¦ä¸€ä¸ªæ•°ç»„æ¬¡åºæ’åº-Leetcode-1122"><a href="#E01-æ ¹æ®å¦ä¸€ä¸ªæ•°ç»„æ¬¡åºæ’åº-Leetcode-1122" class="headerlink" title="E01. æ ¹æ®å¦ä¸€ä¸ªæ•°ç»„æ¬¡åºæ’åº-Leetcode 1122"></a>E01. æ ¹æ®å¦ä¸€ä¸ªæ•°ç»„æ¬¡åºæ’åº-Leetcode 1122</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    å‰æ</span></span><br><span class="line"><span class="comment">    1. å…ƒç´ å€¼å‡ &gt;= 0</span></span><br><span class="line"><span class="comment">    2. arr2 å†…å…ƒç´ å”¯ä¸€ï¼Œä¸”é•¿åº¦ &lt;= 1000</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E01Leetcode1122</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] relativeSortArray(<span class="type">int</span>[] arr1, <span class="type">int</span>[] arr2) &#123;</span><br><span class="line">        <span class="type">int</span>[] count = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">1001</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : arr1) &#123;</span><br><span class="line">            count[i]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[arr1.length];</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : arr2) &#123;</span><br><span class="line">            <span class="keyword">while</span> (count[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                result[k++] = i;</span><br><span class="line">                count[i]--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count.length; i++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (count[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                result[k++] = i;</span><br><span class="line">                count[i]--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E02-æŒ‰å‡ºç°é¢‘ç‡æ’åº-Leetcode-1636"><a href="#E02-æŒ‰å‡ºç°é¢‘ç‡æ’åº-Leetcode-1636" class="headerlink" title="E02. æŒ‰å‡ºç°é¢‘ç‡æ’åº-Leetcode 1636"></a>E02. æŒ‰å‡ºç°é¢‘ç‡æ’åº-Leetcode 1636</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E02Leetcode1636</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] frequencySort(<span class="type">int</span>[] nums) &#123;</span><br><span class="line">        <span class="type">int</span>[] count = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">201</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : nums) &#123;</span><br><span class="line">            count[i + <span class="number">100</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Arrays.stream(nums).boxed().sorted((a, b) -&gt; &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">fa</span> <span class="operator">=</span> count[a + <span class="number">100</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">fb</span> <span class="operator">=</span> count[b + <span class="number">100</span>];</span><br><span class="line">            <span class="keyword">if</span> (fa == fb) &#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.compare(b, a);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> fa - fb;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).mapToInt(Integer::intValue).toArray();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E03-æœ€å¤§é—´è·-Leetcode-164"><a href="#E03-æœ€å¤§é—´è·-Leetcode-164" class="headerlink" title="E03. æœ€å¤§é—´è·-Leetcode 164"></a>E03. æœ€å¤§é—´è·-Leetcode 164</h4><p>è§£æ³•1ï¼šæ¡¶æ’åº - è¶…è¿‡<strong>å†…å­˜</strong>é™åˆ¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E03Leetcode164_1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximumGap</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sort(nums, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">ret</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            ret = Math.max(ret, nums[i] - nums[i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> range)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] &gt; max) &#123;</span><br><span class="line">                max = a[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (a[i] &lt; min) &#123;</span><br><span class="line">                min = a[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 1. å‡†å¤‡æ¡¶</span></span><br><span class="line">        DynamicArray[] buckets = <span class="keyword">new</span> <span class="title class_">DynamicArray</span>[(max - min) / range + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; buckets.length; i++) &#123;</span><br><span class="line">            buckets[i] = <span class="keyword">new</span> <span class="title class_">DynamicArray</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2. æ”¾å…¥æ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> age : a) &#123;</span><br><span class="line">            buckets[(age - min) / range].addLast(age);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (DynamicArray bucket : buckets) &#123;</span><br><span class="line">            <span class="comment">// 3. æ’åºæ¡¶å†…å…ƒç´ </span></span><br><span class="line">            <span class="type">int</span>[] array = bucket.array();</span><br><span class="line">            InsertionSort.sort(array);</span><br><span class="line">            <span class="comment">// 4. æŠŠæ¯ä¸ªæ¡¶æ’åºå¥½çš„å†…å®¹ï¼Œä¾æ¬¡æ”¾å…¥åŸå§‹æ•°ç»„</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> v : array) &#123;</span><br><span class="line">                a[k++] = v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] nums = &#123;<span class="number">13</span>, <span class="number">26</span>, <span class="number">16</span>, <span class="number">11</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">E03Leetcode164_1</span>().maximumGap(nums);</span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£æ³•2ï¼šåŸºæ•°æ’åº</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E03Leetcode164</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximumGap</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (a.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        <span class="comment">// è®¡ç®—æœ€å¤§å€¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">            max = Math.max(a[i], max);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‡†å¤‡10ä¸ªæ¡¶</span></span><br><span class="line">        ArrayList&lt;Integer&gt;[] buckets = <span class="keyword">new</span> <span class="title class_">ArrayList</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; buckets.length; i++) &#123;</span><br><span class="line">            buckets[i] = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ²¡è¶…è¿‡æœ€å¤§å€¼</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">exp</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (max &gt;= exp) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j : a) &#123;</span><br><span class="line">                buckets[(j / (<span class="type">int</span>) exp) % <span class="number">10</span>].add(j);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (ArrayList&lt;Integer&gt; bucket : buckets) &#123;</span><br><span class="line">                <span class="keyword">for</span> (Integer i : bucket) &#123;</span><br><span class="line">                    a[k++] = i;</span><br><span class="line">                &#125;</span><br><span class="line">                bucket.clear();</span><br><span class="line">            &#125;</span><br><span class="line">            exp *= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ±‚æœ€å¤§é—´è·</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">            r = Math.max(r, a[i] - a[i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] nums = &#123;<span class="number">3</span>, <span class="number">6</span>, <span class="number">16</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">E03Leetcode164</span>().maximumGap(nums);</span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£æ³•3ï¼šæ¡¶æ’åº - åˆç†åŒ–æ¡¶ä¸ªæ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E03Leetcode164_3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximumGap</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. å¤„ç†ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (nums.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2. æ¡¶æ’åº</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">1</span>; i1 &lt; nums.length; i1++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i1] &gt; max) &#123;</span><br><span class="line">                max = nums[i1];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (nums[i1] &lt; min) &#123;</span><br><span class="line">                min = nums[i1];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.1 å‡†å¤‡æ¡¶</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            è®¡ç®—æ¡¶ä¸ªæ•°                   æœŸæœ›æ¡¶ä¸ªæ•°</span></span><br><span class="line"><span class="comment">            (max - min) / range + 1 = nums.length</span></span><br><span class="line"><span class="comment">            (max - min) / (nums.length - 1) = range</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">range</span> <span class="operator">=</span> Math.max((max - min) / (nums.length - <span class="number">1</span>), <span class="number">1</span>);</span><br><span class="line">        DynamicArray[] buckets = <span class="keyword">new</span> <span class="title class_">DynamicArray</span>[(max - min) / range + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">0</span>; i1 &lt; buckets.length; i1++) &#123;</span><br><span class="line">            buckets[i1] = <span class="keyword">new</span> <span class="title class_">DynamicArray</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.2 æ”¾å…¥æ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> age : nums) &#123;</span><br><span class="line">            buckets[(age - min) / range].addLast(age);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (DynamicArray bucket : buckets) &#123;</span><br><span class="line">            <span class="comment">// 2.3 æ’åºæ¡¶å†…å…ƒç´ </span></span><br><span class="line">            <span class="type">int</span>[] array = bucket.array();</span><br><span class="line">            InsertionSort.sort(array);</span><br><span class="line">            System.out.println(Arrays.toString(array));</span><br><span class="line">            <span class="comment">// 2.4 æŠŠæ¯ä¸ªæ¡¶æ’åºå¥½çš„å†…å®¹ï¼Œä¾æ¬¡æ”¾å…¥åŸå§‹æ•°ç»„</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> v : array) &#123;</span><br><span class="line">                nums[k++] = v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3. å¯»æ‰¾æœ€å¤§å·®å€¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            r = Math.max(r, nums[i] - nums[i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        int[] nums = &#123;1, 10000000&#125;;</span></span><br><span class="line"><span class="comment">//        int[] nums = &#123;9, 1, 3, 5&#125;;</span></span><br><span class="line"><span class="comment">//        int[] nums = &#123;1, 1, 1, 1&#125;;</span></span><br><span class="line"><span class="comment">//        int[] nums = &#123;1, 1, 1, 1, 1, 5, 5, 5, 5, 5&#125;;</span></span><br><span class="line">        <span class="type">int</span>[] nums = &#123;<span class="number">15252</span>, <span class="number">16764</span>, <span class="number">27963</span>, <span class="number">7817</span>, <span class="number">26155</span>, <span class="number">20757</span>, <span class="number">3478</span>, <span class="number">22602</span>, <span class="number">20404</span>, <span class="number">6739</span>, <span class="number">16790</span>, <span class="number">10588</span>, <span class="number">16521</span>, <span class="number">6644</span>, <span class="number">20880</span>, <span class="number">15632</span>, <span class="number">27078</span>, <span class="number">25463</span>, <span class="number">20124</span>, <span class="number">15728</span>, <span class="number">30042</span>, <span class="number">16604</span>, <span class="number">17223</span>, <span class="number">4388</span>, <span class="number">23646</span>, <span class="number">32683</span>, <span class="number">23688</span>, <span class="number">12439</span>, <span class="number">30630</span>, <span class="number">3895</span>, <span class="number">7926</span>, <span class="number">22101</span>, <span class="number">32406</span>, <span class="number">21540</span>, <span class="number">31799</span>, <span class="number">3768</span>, <span class="number">26679</span>, <span class="number">21799</span>, <span class="number">23740</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">E03Leetcode164_3</span>().maximumGap(nums);</span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£æ³•4ï¼šåœ¨è§£æ³•3çš„åŸºç¡€ä¸Šï¼Œåªä¿ç•™æ¡¶å†…æœ€å¤§æœ€å°å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E03Leetcode164_4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximumGap</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. å¤„ç†ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (nums.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2. æ¡¶æ’åº</span></span><br><span class="line">        <span class="comment">// æ¡¶ä¸ªæ•° (max - min) / range + 1  æœŸæœ›æ¡¶ä¸ªæ•° nums.length + 1</span></span><br><span class="line">        <span class="comment">// range = (max - min) / nums.length</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &gt; max) &#123;</span><br><span class="line">                max = nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &lt; min) &#123;</span><br><span class="line">                min = nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (max == min) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">range</span> <span class="operator">=</span> Math.max(<span class="number">1</span>, (max - min) / nums.length);</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> (max - min) / range + <span class="number">1</span>;</span><br><span class="line">        Pair[] buckets = <span class="keyword">new</span> <span class="title class_">Pair</span>[size];</span><br><span class="line">        <span class="comment">// 2. æ”¾å…¥æ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : nums) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> (i - min) / range;</span><br><span class="line">            <span class="keyword">if</span> (buckets[idx] == <span class="literal">null</span>) &#123;</span><br><span class="line">                buckets[idx] = <span class="keyword">new</span> <span class="title class_">Pair</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            buckets[idx].add(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(buckets));</span><br><span class="line">        <span class="comment">// 3. å¯»æ‰¾æœ€å¤§å·®å€¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">lastMax</span> <span class="operator">=</span> buckets[<span class="number">0</span>].max;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; buckets.length; i++) &#123;</span><br><span class="line">            <span class="type">Pair</span> <span class="variable">pair</span> <span class="operator">=</span> buckets[i];</span><br><span class="line">            <span class="keyword">if</span> (pair != <span class="literal">null</span>) &#123;</span><br><span class="line">                r = Math.max(r, pair.min - lastMax);</span><br><span class="line">                lastMax = pair.max;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Pair</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> <span class="number">1000_000_000</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> v)</span> &#123;</span><br><span class="line">            max = Math.max(max, v);</span><br><span class="line">            min = Math.min(min, v);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;[&quot;</span> + min + <span class="string">&quot;,&quot;</span> + max + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] nums = &#123;<span class="number">9</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">//        int[] nums = &#123;1, 10000000&#125;;</span></span><br><span class="line"><span class="comment">//        int[] nums = &#123;1, 1, 1, 1&#125;;</span></span><br><span class="line"><span class="comment">//        int[] nums = &#123;1, 1, 1, 1, 1, 5, 5, 5, 5, 5&#125;;</span></span><br><span class="line"><span class="comment">//        int[] nums = &#123;15252, 16764, 27963, 7817, 26155, 20757, 3478, 22602, 20404, 6739, 16790, 10588, 16521, 6644, 20880, 15632, 27078, 25463, 20124, 15728, 30042, 16604, 17223, 4388, 23646, 32683, 23688, 12439, 30630, 3895, 7926, 22101, 32406, 21540, 31799, 3768, 26679, 21799, 23740&#125;;</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">E03Leetcode164_4</span>().maximumGap(nums);</span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ’åºæ•°ç»„-Leetcode-912"><a href="#æ’åºæ•°ç»„-Leetcode-912" class="headerlink" title="æ’åºæ•°ç»„-Leetcode 912"></a>æ’åºæ•°ç»„-Leetcode 912</h4><h4 id="æ’åºé“¾è¡¨-Leetcode-148"><a href="#æ’åºé“¾è¡¨-Leetcode-148" class="headerlink" title="æ’åºé“¾è¡¨-Leetcode 148"></a>æ’åºé“¾è¡¨-Leetcode 148</h4><h4 id="å…¶å®ƒé¢˜ç›®-1"><a href="#å…¶å®ƒé¢˜ç›®-1" class="headerlink" title="å…¶å®ƒé¢˜ç›®"></a>å…¶å®ƒé¢˜ç›®</h4><table><thead><tr><th>é¢˜ç›®ç¼–å·</th><th>é¢˜ç›®æ ‡é¢˜</th><th>æ’åºç®—æ³•ç±»å‹</th></tr></thead><tbody><tr><td>1122</td><td>æ•°ç»„çš„ç›¸å¯¹æ’åº</td><td>è®¡æ•°æ’åº</td></tr><tr><td>1636</td><td>æŒ‰ç…§é¢‘ç‡å°†æ•°ç»„å‡åºæ’åº</td><td>è®¡æ•°æ’åº</td></tr><tr><td>164</td><td>æœ€å¤§é—´è·</td><td>åŸºæ•°æ’åºã€æ¡¶æ’åº</td></tr><tr><td>315</td><td>è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°</td><td>åŸºæ•°æ’åº</td></tr><tr><td>347</td><td>å‰ K ä¸ªé«˜é¢‘å…ƒç´ </td><td>æ¡¶æ’åº</td></tr></tbody></table><table><thead><tr><th>é¢˜ç›®ç¼–å·</th><th>é¢˜ç›®æ ‡é¢˜</th><th>æ’åºç®—æ³•ç±»å‹</th></tr></thead><tbody><tr><td>75</td><td>é¢œè‰²åˆ†ç±»</td><td>ä¸‰å‘åˆ‡åˆ†å¿«é€Ÿæ’åº</td></tr><tr><td>215</td><td>æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ </td><td>å †æ’åº</td></tr><tr><td>493</td><td>ç¿»è½¬å¯¹</td><td>å½’å¹¶æ’åº</td></tr><tr><td>493</td><td>ç¿»è½¬å¯¹</td><td>æ ‘çŠ¶æ•°ç»„</td></tr><tr><td>524</td><td>é€šè¿‡åˆ é™¤å­—æ¯åŒ¹é…åˆ°å­—å…¸é‡Œæœ€é•¿å•è¯</td><td>å¾ªç¯æ’åº</td></tr><tr><td>977</td><td>æœ‰åºæ•°ç»„çš„å¹³æ–¹</td><td>åŒæŒ‡é’ˆæ³•</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ä¸ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2. åŸºç¡€æ•°æ®ç»“æ„</title>
      <link href="/posts/34388.html"/>
      <url>/posts/34388.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h2 id="2-1-æ•°ç»„"><a href="#2-1-æ•°ç»„" class="headerlink" title="2.1 æ•°ç»„"></a>2.1 æ•°ç»„</h2><h3 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1) æ¦‚è¿°"></a>1) æ¦‚è¿°</h3><p><strong>å®šä¹‰</strong></p><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ•°ç»„æ˜¯ç”±ä¸€ç»„å…ƒç´ ï¼ˆå€¼æˆ–å˜é‡ï¼‰ç»„æˆçš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªå…ƒç´ æœ‰è‡³å°‘ä¸€ä¸ªç´¢å¼•æˆ–é”®æ¥æ ‡è¯†</p><blockquote><p>In computer science, an <strong>array</strong> is a data structure consisting of a collection of <em>elements</em> (values or variables), each identified by at least one <em>array index</em> or <em>key</em></p></blockquote><p>å› ä¸ºæ•°ç»„å†…çš„å…ƒç´ æ˜¯<strong>è¿ç»­å­˜å‚¨</strong>çš„ï¼Œæ‰€ä»¥æ•°ç»„ä¸­å…ƒç´ çš„åœ°å€ï¼Œå¯ä»¥é€šè¿‡å…¶ç´¢å¼•è®¡ç®—å‡ºæ¥ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] array = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure><p>çŸ¥é“äº†æ•°ç»„çš„<strong>æ•°æ®</strong>èµ·å§‹åœ°å€ $BaseAddress$ï¼Œå°±å¯ä»¥ç”±å…¬å¼ $BaseAddress + i * size$ è®¡ç®—å‡ºç´¢å¼• $i$ å…ƒç´ çš„åœ°å€</p><ul><li>$i$ å³ç´¢å¼•ï¼Œåœ¨ Javaã€C ç­‰è¯­è¨€éƒ½æ˜¯ä» 0 å¼€å§‹</li><li>$size$ æ˜¯æ¯ä¸ªå…ƒç´ å ç”¨å­—èŠ‚ï¼Œä¾‹å¦‚ $int$ å  $4$ï¼Œ$double$ å  $8$</li></ul><p><strong>å°æµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">byte</span>[] array = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure><p>å·²çŸ¥ array çš„<strong>æ•°æ®</strong>çš„èµ·å§‹åœ°å€æ˜¯ 0x7138f94c8ï¼Œé‚£ä¹ˆå…ƒç´  3 çš„åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ</p><blockquote><p>ç­”ï¼š0x7138f94c8 + 2 * 1 &#x3D; 0x7138f94ca</p></blockquote><p><strong>ç©ºé—´å ç”¨</strong></p><p>Java ä¸­æ•°ç»„ç»“æ„ä¸º</p><ul><li>8 å­—èŠ‚ markword</li><li>4 å­—èŠ‚ class æŒ‡é’ˆï¼ˆå‹ç¼© class æŒ‡é’ˆçš„æƒ…å†µï¼‰</li><li>4 å­—èŠ‚ æ•°ç»„å¤§å°ï¼ˆå†³å®šäº†æ•°ç»„æœ€å¤§å®¹é‡æ˜¯ $2^{32}$ï¼‰</li><li>æ•°ç»„å…ƒç´  + å¯¹é½å­—èŠ‚ï¼ˆjava ä¸­æ‰€æœ‰å¯¹è±¡å¤§å°éƒ½æ˜¯ 8 å­—èŠ‚çš„æ•´æ•°å€[^12]ï¼Œä¸è¶³çš„è¦ç”¨å¯¹é½å­—èŠ‚è¡¥è¶³ï¼‰</li></ul><p>ä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] array = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br></pre></td></tr></table></figure><p>çš„å¤§å°ä¸º 40 ä¸ªå­—èŠ‚ï¼Œç»„æˆå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8 + 4 + 4 + 5*4 + 4(alignment)</span><br></pre></td></tr></table></figure><p><strong>éšæœºè®¿é—®æ€§èƒ½</strong></p><p>å³æ ¹æ®ç´¢å¼•æŸ¥æ‰¾å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$</p><h3 id="2-åŠ¨æ€æ•°ç»„"><a href="#2-åŠ¨æ€æ•°ç»„" class="headerlink" title="2) åŠ¨æ€æ•°ç»„"></a>2) åŠ¨æ€æ•°ç»„</h3><p><strong>java ç‰ˆæœ¬</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicArray</span> <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;Integer&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// é€»è¾‘å¤§å°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">capacity</span> <span class="operator">=</span> <span class="number">8</span>; <span class="comment">// å®¹é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] array = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘æœ€åä½ç½® [size] æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> element å¾…æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> element)</span> &#123;</span><br><span class="line">        add(size, element);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘ [0 .. size] ä½ç½®æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index   ç´¢å¼•ä½ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> element å¾…æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> element)</span> &#123;</span><br><span class="line">        checkAndGrow();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ·»åŠ é€»è¾‘</span></span><br><span class="line">        <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt; size) &#123;</span><br><span class="line">            <span class="comment">// å‘åæŒªåŠ¨, ç©ºå‡ºå¾…æ’å…¥ä½ç½®</span></span><br><span class="line">            System.arraycopy(array, index,</span><br><span class="line">                    array, index + <span class="number">1</span>, size - index);</span><br><span class="line">        &#125;</span><br><span class="line">        array[index] = element;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkAndGrow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å®¹é‡æ£€æŸ¥</span></span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            array = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size == capacity) &#123;</span><br><span class="line">            <span class="comment">// è¿›è¡Œæ‰©å®¹, 1.5 1.618 2</span></span><br><span class="line">            capacity += capacity &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span>[] newArray = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line">            System.arraycopy(array, <span class="number">0</span>,</span><br><span class="line">                    newArray, <span class="number">0</span>, size);</span><br><span class="line">            array = newArray;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä» [0 .. size) èŒƒå›´åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index ç´¢å¼•ä½ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¢«åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123; <span class="comment">// [0..size)</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">removed</span> <span class="operator">=</span> array[index];</span><br><span class="line">        <span class="keyword">if</span> (index &lt; size - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// å‘å‰æŒªåŠ¨</span></span><br><span class="line">            System.arraycopy(array, index + <span class="number">1</span>,</span><br><span class="line">                    array, index, size - index - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> removed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index ç´¢å¼•ä½ç½®, åœ¨ [0..size) åŒºé—´å†…</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¯¥ç´¢å¼•ä½ç½®çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> array[index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éå†æ–¹æ³•1</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> consumer éå†è¦æ‰§è¡Œçš„æ“ä½œ, å…¥å‚: æ¯ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foreach</span><span class="params">(Consumer&lt;Integer&gt; consumer)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="comment">// æä¾› array[i]</span></span><br><span class="line">            <span class="comment">// è¿”å› void</span></span><br><span class="line">            consumer.accept(array[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éå†æ–¹æ³•2 - è¿­ä»£å™¨éå†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;Integer&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123; <span class="comment">// æœ‰æ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">                <span class="keyword">return</span> i &lt; size;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Integer <span class="title function_">next</span><span class="params">()</span> &#123; <span class="comment">// è¿”å›å½“å‰å…ƒç´ ,å¹¶ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">                <span class="keyword">return</span> array[i++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éå†æ–¹æ³•3 - stream éå†</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> stream æµ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> IntStream <span class="title function_">stream</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> IntStream.of(Arrays.copyOfRange(array, <span class="number">0</span>, size));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿™äº›æ–¹æ³•å®ç°ï¼Œéƒ½ç®€åŒ–äº† index çš„æœ‰æ•ˆæ€§åˆ¤æ–­ï¼Œå‡è®¾è¾“å…¥çš„ index éƒ½æ˜¯åˆæ³•çš„</li></ul><p><strong>æ’å…¥æˆ–åˆ é™¤æ€§èƒ½</strong></p><p>å¤´éƒ¨ä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$</p><p>ä¸­é—´ä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$</p><p>å°¾éƒ¨ä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼ˆå‡æ‘Šæ¥è¯´ï¼‰</p><h3 id="3-äºŒç»´æ•°ç»„"><a href="#3-äºŒç»´æ•°ç»„" class="headerlink" title="3) äºŒç»´æ•°ç»„"></a>3) äºŒç»´æ•°ç»„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[][] array = &#123;</span><br><span class="line">    &#123;<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>&#125;,</span><br><span class="line">    &#123;<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>&#125;,</span><br><span class="line">    &#123;<span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å†…å­˜å›¾å¦‚ä¸‹</p><p><img src="https://i0.hdslb.com/bfs/article/b2449359be5a33acfc066fa9104f234a645325325.png" alt="image-20240903135742907"></p><ul><li>äºŒç»´æ•°ç»„å  32 ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­ array[0]ï¼Œarray[1]ï¼Œarray[2] ä¸‰ä¸ªå…ƒç´ åˆ†åˆ«ä¿å­˜äº†æŒ‡å‘ä¸‰ä¸ªä¸€ç»´æ•°ç»„çš„å¼•ç”¨</li><li>ä¸‰ä¸ªä¸€ç»´æ•°ç»„å„å  40 ä¸ªå­—èŠ‚</li><li>å®ƒä»¬åœ¨å†…å±‚å¸ƒå±€ä¸Šæ˜¯<strong>è¿ç»­</strong>çš„</li></ul><p>æ›´ä¸€èˆ¬çš„ï¼Œå¯¹ä¸€ä¸ªäºŒç»´æ•°ç»„ $Array[m][n]$</p><ul><li><p>$m$ æ˜¯å¤–å±‚æ•°ç»„çš„é•¿åº¦ï¼Œå¯ä»¥çœ‹ä½œ row è¡Œ</p></li><li><p>$n$ æ˜¯å†…å±‚æ•°ç»„çš„é•¿åº¦ï¼Œå¯ä»¥çœ‹ä½œ column åˆ—</p></li><li><p>å½“è®¿é—® $Array[i][j]$ï¼Œ$0\leq i \lt m, 0\leq j \lt n$æ—¶ï¼Œå°±ç›¸å½“äº</p><ul><li>å…ˆæ‰¾åˆ°ç¬¬ $i$ ä¸ªå†…å±‚æ•°ç»„ï¼ˆè¡Œï¼‰</li><li>å†æ‰¾åˆ°æ­¤å†…å±‚æ•°ç»„ä¸­ç¬¬ $j$ ä¸ªå…ƒç´ ï¼ˆåˆ—ï¼‰</li></ul></li></ul><p><strong>å°æµ‹è¯•</strong></p><p>Java ç¯å¢ƒä¸‹ï¼ˆä¸è€ƒè™‘ç±»æŒ‡é’ˆå’Œå¼•ç”¨å‹ç¼©ï¼Œæ­¤ä¸ºé»˜è®¤æƒ…å†µï¼‰ï¼Œæœ‰ä¸‹é¢çš„äºŒç»´æ•°ç»„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">byte</span>[][] array = &#123;</span><br><span class="line">    &#123;<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>&#125;,</span><br><span class="line">    &#123;<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>&#125;,</span><br><span class="line">    &#123;<span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å·²çŸ¥ array <strong>å¯¹è±¡</strong>èµ·å§‹åœ°å€æ˜¯ 0x1000ï¼Œé‚£ä¹ˆ 23 è¿™ä¸ªå…ƒç´ çš„åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ</p><blockquote><p>ç­”ï¼š</p><ul><li>èµ·å§‹åœ°å€ 0x1000</li><li>å¤–å±‚æ•°ç»„å¤§å°ï¼š16å­—èŠ‚å¯¹è±¡å¤´ + 3å…ƒç´  * æ¯ä¸ªå¼•ç”¨4å­—èŠ‚ + 4 å¯¹é½å­—èŠ‚ &#x3D; 32 &#x3D; 0x20</li><li>ç¬¬ä¸€ä¸ªå†…å±‚æ•°ç»„å¤§å°ï¼š16å­—èŠ‚å¯¹è±¡å¤´ + 5å…ƒç´  * æ¯ä¸ªbyte1å­—èŠ‚ + 3 å¯¹é½å­—èŠ‚ &#x3D; 24 &#x3D; 0x18</li><li>ç¬¬äºŒä¸ªå†…å±‚æ•°ç»„ï¼Œ16å­—èŠ‚å¯¹è±¡å¤´ &#x3D; 0x10ï¼Œå¾…æŸ¥æ‰¾å…ƒç´ ç´¢å¼•ä¸º 2</li><li>æœ€åç»“æœ &#x3D; 0x1000 + 0x20 + 0x18 + 0x10 + 2*1 &#x3D; 0x104a</li></ul></blockquote><h3 id="4-å±€éƒ¨æ€§åŸç†"><a href="#4-å±€éƒ¨æ€§åŸç†" class="headerlink" title="4) å±€éƒ¨æ€§åŸç†"></a>4) å±€éƒ¨æ€§åŸç†</h3><p>è¿™é‡Œåªè®¨è®ºç©ºé—´å±€éƒ¨æ€§</p><ul><li>cpu è¯»å–å†…å­˜ï¼ˆé€Ÿåº¦æ…¢ï¼‰æ•°æ®åï¼Œä¼šå°†å…¶æ”¾å…¥é«˜é€Ÿç¼“å­˜ï¼ˆé€Ÿåº¦å¿«ï¼‰å½“ä¸­ï¼Œå¦‚æœåæ¥çš„è®¡ç®—å†ç”¨åˆ°æ­¤æ•°æ®ï¼Œåœ¨ç¼“å­˜ä¸­èƒ½è¯»åˆ°çš„è¯ï¼Œå°±ä¸å¿…è¯»å†…å­˜äº†</li><li>ç¼“å­˜çš„æœ€å°å­˜å‚¨å•ä½æ˜¯ç¼“å­˜è¡Œï¼ˆcache lineï¼‰ï¼Œä¸€èˆ¬æ˜¯ 64 bytesï¼Œä¸€æ¬¡è¯»çš„æ•°æ®å°‘äº†ä¸åˆ’ç®—å•Šï¼Œå› æ­¤æœ€å°‘è¯» 64 bytes å¡«æ»¡ä¸€ä¸ªç¼“å­˜è¡Œï¼Œå› æ­¤è¯»å…¥æŸä¸ªæ•°æ®æ—¶ä¹Ÿä¼šè¯»å–å…¶<strong>ä¸´è¿‘çš„æ•°æ®</strong>ï¼Œè¿™å°±æ˜¯æ‰€è°“<strong>ç©ºé—´å±€éƒ¨æ€§</strong></li></ul><p><strong>å¯¹æ•ˆç‡çš„å½±å“</strong></p><p>æ¯”è¾ƒä¸‹é¢ ij å’Œ ji ä¸¤ä¸ªæ–¹æ³•çš„æ‰§è¡Œæ•ˆç‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> <span class="number">1000000</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">columns</span> <span class="operator">=</span> <span class="number">14</span>;</span><br><span class="line"><span class="type">int</span>[][] a = <span class="keyword">new</span> <span class="title class_">int</span>[rows][columns];</span><br><span class="line"></span><br><span class="line"><span class="type">StopWatch</span> <span class="variable">sw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StopWatch</span>();</span><br><span class="line">sw.start(<span class="string">&quot;ij&quot;</span>);</span><br><span class="line">ij(a, rows, columns);</span><br><span class="line">sw.stop();</span><br><span class="line">sw.start(<span class="string">&quot;ji&quot;</span>);</span><br><span class="line">ji(a, rows, columns);</span><br><span class="line">sw.stop();</span><br><span class="line">System.out.println(sw.prettyPrint());</span><br></pre></td></tr></table></figure><p>ij æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">ij</span><span class="params">(<span class="type">int</span>[][] a, <span class="type">int</span> rows, <span class="type">int</span> columns)</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; columns; j++) &#123;</span><br><span class="line">            sum += a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ji æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">ji</span><span class="params">(<span class="type">int</span>[][] a, <span class="type">int</span> rows, <span class="type">int</span> columns)</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; columns; j++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">            sum += a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">0</span><br><span class="line">StopWatch &#x27;&#x27;: running time = 96283300 ns</span><br><span class="line">---------------------------------------------</span><br><span class="line">ns         %     Task name</span><br><span class="line">---------------------------------------------</span><br><span class="line">016196200  017%  ij</span><br><span class="line">080087100  083%  ji</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° ij çš„æ•ˆç‡æ¯” ji å¿«å¾ˆå¤šï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li>ç¼“å­˜æ˜¯æœ‰é™çš„ï¼Œå½“æ–°æ•°æ®æ¥äº†åï¼Œä¸€äº›æ—§çš„ç¼“å­˜è¡Œæ•°æ®å°±ä¼šè¢«è¦†ç›–</li><li>å¦‚æœä¸èƒ½å……åˆ†åˆ©ç”¨ç¼“å­˜çš„æ•°æ®ï¼Œå°±ä¼šé€ æˆæ•ˆç‡ä½ä¸‹</li></ul><p>ä»¥ ji æ‰§è¡Œä¸ºä¾‹ï¼Œç¬¬ä¸€æ¬¡å†…å¾ªç¯è¦è¯»å…¥ $[0,0]$ è¿™æ¡æ•°æ®ï¼Œç”±äºå±€éƒ¨æ€§åŸç†ï¼Œè¯»å…¥ $[0,0]$ çš„åŒæ—¶ä¹Ÿè¯»å…¥äº† $[0,1] â€¦ [0,13]$ï¼Œå¦‚å›¾æ‰€ç¤º</p><p><img src="https://i0.hdslb.com/bfs/article/be8e47261128bef92e457cd4000062c9645325325.png" alt="image-20221104164329026">â€‹</p><p>ä½†å¾ˆé—æ†¾ï¼Œç¬¬äºŒæ¬¡å†…å¾ªç¯è¦çš„æ˜¯ $[1,0]$ è¿™æ¡æ•°æ®ï¼Œç¼“å­˜ä¸­æ²¡æœ‰ï¼Œäºæ˜¯å†è¯»å…¥äº†ä¸‹å›¾çš„æ•°æ®</p><p><img src="https://i0.hdslb.com/bfs/article/45485666f396c9adff0cb3504c94eaae645325325.png" alt="image-20221104164716282">â€‹</p><p>è¿™æ˜¾ç„¶æ˜¯ä¸€ç§æµªè´¹ï¼Œå› ä¸º $[0,1] â€¦ [0,13]$ åŒ…æ‹¬ $[1,1] â€¦ [1,13]$ è¿™äº›æ•°æ®è™½ç„¶è¯»å…¥äº†ç¼“å­˜ï¼Œå´æ²¡æœ‰åŠæ—¶ç”¨ä¸Šï¼Œè€Œç¼“å­˜çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œç­‰æ‰§è¡Œåˆ°ç¬¬ä¹æ¬¡å†…å¾ªç¯æ—¶</p><p><img src="https://i0.hdslb.com/bfs/article/4392ccf9a34fbfe281015b2a8dd43ad5645325325.png" alt="image-20221104164947154">â€‹</p><p>ç¼“å­˜çš„ç¬¬ä¸€è¡Œæ•°æ®å·²ç»è¢«æ–°çš„æ•°æ® $[8,0] â€¦ [8,13]$ è¦†ç›–æ‰äº†ï¼Œä»¥åå¦‚æœå†æƒ³è¯»ï¼Œæ¯”å¦‚ $[0,1]$ï¼Œåˆå¾—åˆ°å†…å­˜å»è¯»äº†</p><p>åŒç†å¯ä»¥åˆ†æ ij å‡½æ•°åˆ™èƒ½å……åˆ†åˆ©ç”¨å±€éƒ¨æ€§åŸç†åŠ è½½åˆ°çš„ç¼“å­˜æ•°æ®</p><p><strong>ä¸¾ä¸€åä¸‰</strong></p><ol><li><p>I&#x2F;O è¯»å†™æ—¶åŒæ ·å¯ä»¥ä½“ç°å±€éƒ¨æ€§åŸç†</p></li><li><p>æ•°ç»„å¯ä»¥å……åˆ†åˆ©ç”¨å±€éƒ¨æ€§åŸç†ï¼Œé‚£ä¹ˆé“¾è¡¨å‘¢ï¼Ÿ</p><blockquote><p>ç­”ï¼šé“¾è¡¨ä¸è¡Œï¼Œå› ä¸ºé“¾è¡¨çš„å…ƒç´ å¹¶éç›¸é‚»å­˜å‚¨</p></blockquote></li></ol><h3 id="5-è¶Šç•Œæ£€æŸ¥"><a href="#5-è¶Šç•Œæ£€æŸ¥" class="headerlink" title="5) è¶Šç•Œæ£€æŸ¥"></a>5) è¶Šç•Œæ£€æŸ¥</h3><p>java ä¸­å¯¹æ•°ç»„å…ƒç´ çš„è¯»å†™éƒ½æœ‰è¶Šç•Œæ£€æŸ¥ï¼Œç±»ä¼¼äºä¸‹é¢çš„ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_within_bounds</span><span class="params">(<span class="type">int</span> index)</span> <span class="type">const</span>    </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> &lt;= index &amp;&amp; index &lt; <span class="built_in">length</span>(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»£ç ä½ç½®ï¼š<code>openjdk\src\hotspot\share\oops\arrayOop.hpp</code>â€‹</li></ul><p>åªä¸è¿‡æ­¤æ£€æŸ¥ä»£ç ï¼Œä¸éœ€è¦ç”±ç¨‹åºå‘˜è‡ªå·±æ¥è°ƒç”¨ï¼ŒJVM ä¼šå¸®æˆ‘ä»¬è°ƒç”¨</p><h3 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-åˆå¹¶æœ‰åºæ•°ç»„-å¯¹åº”-Leetcode-88"><a href="#E01-åˆå¹¶æœ‰åºæ•°ç»„-å¯¹åº”-Leetcode-88" class="headerlink" title="E01. åˆå¹¶æœ‰åºæ•°ç»„ - å¯¹åº” Leetcode 88"></a>E01. åˆå¹¶æœ‰åºæ•°ç»„ - å¯¹åº” Leetcode 88</h4><p>å°†æ•°ç»„å†…ä¸¤ä¸ªåŒºé—´å†…çš„æœ‰åºå…ƒç´ åˆå¹¶</p><p>ä¾‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 5, 6, 2, 4, 10, 11]</span><br></pre></td></tr></table></figure><p>å¯ä»¥è§†ä½œä¸¤ä¸ªæœ‰åºåŒºé—´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 5, 6] å’Œ [2, 4, 10, 11]</span><br></pre></td></tr></table></figure><p>åˆå¹¶åï¼Œç»“æœä»å­˜å‚¨äºåŸæœ‰ç©ºé—´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 4, 5, 6, 10, 11]</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•1</strong></p><p>é€’å½’</p><ul><li>æ¯æ¬¡é€’å½’æŠŠæ›´å°çš„å…ƒç´ å¤åˆ¶åˆ°ç»“æœæ•°ç»„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">merge(left=[<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>],right=[<span class="number">2</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">11</span>],a2=[])&#123;</span><br><span class="line">    merge(left=[<span class="number">5</span>,<span class="number">6</span>],right=[<span class="number">2</span>,<span class="number">4</span>,<span class="number">10</span>,<span class="number">11</span>],a2=[<span class="number">1</span>])&#123;</span><br><span class="line">        merge(left=[<span class="number">5</span>,<span class="number">6</span>],right=[<span class="number">4</span>,<span class="number">10</span>,<span class="number">11</span>],a2=[<span class="number">1</span>,<span class="number">2</span>])&#123;</span><br><span class="line">            merge(left=[<span class="number">5</span>,<span class="number">6</span>],right=[<span class="number">10</span>,<span class="number">11</span>],a2=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>])&#123;</span><br><span class="line">                merge(left=[<span class="number">6</span>],right=[<span class="number">10</span>,<span class="number">11</span>],a2=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>])&#123;</span><br><span class="line">                    merge(left=[],right=[<span class="number">10</span>,<span class="number">11</span>],a2=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])&#123;</span><br><span class="line"><span class="comment">// æ‹·è´10ï¼Œ11</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] a1, <span class="type">int</span> i, <span class="type">int</span> iEnd, <span class="type">int</span> j, <span class="type">int</span> jEnd,</span></span><br><span class="line"><span class="params">                              <span class="type">int</span>[] a2, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; iEnd) &#123;</span><br><span class="line">        System.arraycopy(a1, j, a2, k, jEnd - j + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (j &gt; jEnd) &#123;</span><br><span class="line">        System.arraycopy(a1, i, a2, k, iEnd - i + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a1[i] &lt; a1[j]) &#123;</span><br><span class="line">        a2[k] = a1[i];</span><br><span class="line">        merge(a1, i + <span class="number">1</span>, iEnd, j, jEnd, a2, k + <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        a2[k] = a1[j];</span><br><span class="line">        merge(a1, i, iEnd, j + <span class="number">1</span>, jEnd, a2, k + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] a1 = &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">11</span>&#125;;</span><br><span class="line"><span class="type">int</span>[] a2 = <span class="keyword">new</span> <span class="title class_">int</span>[a1.length];</span><br><span class="line">merge(a1, <span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>, a2, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•2</strong></p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] a1, <span class="type">int</span> i, <span class="type">int</span> iEnd,</span></span><br><span class="line"><span class="params">                             <span class="type">int</span> j, <span class="type">int</span> jEnd,</span></span><br><span class="line"><span class="params">                             <span class="type">int</span>[] a2)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= iEnd &amp;&amp; j &lt;= jEnd) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a1[i] &lt; a1[j]) &#123;</span><br><span class="line">            a2[k] = a1[i];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            a2[k] = a1[j];</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; iEnd) &#123;</span><br><span class="line">        System.arraycopy(a1, j, a2, k, jEnd - j + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (j &gt; jEnd) &#123;</span><br><span class="line">        System.arraycopy(a1, i, a2, k, iEnd - i + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] a1 = &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">11</span>&#125;;</span><br><span class="line"><span class="type">int</span>[] a2 = <span class="keyword">new</span> <span class="title class_">int</span>[a3.length];</span><br><span class="line">merge(a1, <span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>, a2);</span><br></pre></td></tr></table></figure><h2 id="2-2-é“¾è¡¨"><a href="#2-2-é“¾è¡¨" class="headerlink" title="2.2 é“¾è¡¨"></a>2.2 é“¾è¡¨</h2><h3 id="1-æ¦‚è¿°-1"><a href="#1-æ¦‚è¿°-1" class="headerlink" title="1) æ¦‚è¿°"></a>1) æ¦‚è¿°</h3><p><strong>å®šä¹‰</strong></p><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé“¾è¡¨æ˜¯æ•°æ®å…ƒç´ çš„çº¿æ€§é›†åˆï¼Œå…¶æ¯ä¸ªå…ƒç´ éƒ½æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ å­˜å‚¨ä¸Šå¹¶ä¸è¿ç»­</p><blockquote><p>In computer science, a <strong>linked list</strong> is a linear collection of data elements whose order is not given by their physical placement in memory. Instead, each element points to the next.</p></blockquote><p>å¯ä»¥åˆ†ç±»ä¸º[^5]</p><ul><li>å•å‘é“¾è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åªçŸ¥é“å…¶ä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯è°</li></ul><p><img src="https://i0.hdslb.com/bfs/article/8d1013ecb972c0d9a8573f154c0430fe645325325.png" alt="image-20221110083407176">â€‹</p><ul><li>åŒå‘é“¾è¡¨ï¼Œæ¯ä¸ªå…ƒç´ çŸ¥é“å…¶ä¸Šä¸€ä¸ªå…ƒç´ å’Œä¸‹ä¸€ä¸ªå…ƒç´ </li></ul><p><img src="https://i0.hdslb.com/bfs/article/88bba76af94ada098a636f5d86644ed8645325325.png" alt="image-20221110083427372">â€‹</p><ul><li>å¾ªç¯é“¾è¡¨ï¼Œé€šå¸¸çš„é“¾è¡¨å°¾èŠ‚ç‚¹ tail æŒ‡å‘çš„éƒ½æ˜¯ nullï¼Œè€Œå¾ªç¯é“¾è¡¨çš„ tail æŒ‡å‘çš„æ˜¯å¤´èŠ‚ç‚¹ head</li></ul><p><img src="https://i0.hdslb.com/bfs/article/292ce6607571f7a2b266820fd5f453ca645325325.png" alt="image-20221110083538273">â€‹</p><p>é“¾è¡¨å†…è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„èŠ‚ç‚¹ç§°ä¸ºå“¨å…µï¼ˆSentinelï¼‰èŠ‚ç‚¹ï¼Œä¹Ÿå«åšå“‘å…ƒï¼ˆ Dummyï¼‰èŠ‚ç‚¹ï¼Œå®ƒä¸å­˜å‚¨æ•°æ®ï¼Œé€šå¸¸ç”¨ä½œå¤´å°¾ï¼Œç”¨æ¥ç®€åŒ–è¾¹ç•Œåˆ¤æ–­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://i0.hdslb.com/bfs/article/4ccfee5da5ab4775848a050908c21234645325325.png" alt="image-20221110084611550">â€‹</p><p><strong>éšæœºè®¿é—®æ€§èƒ½</strong></p><p>æ ¹æ® index æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n)$</p><p><strong>æ’å…¥æˆ–åˆ é™¤æ€§èƒ½</strong></p><ul><li>èµ·å§‹ä½ç½®ï¼š$O(1)$</li><li>ç»“æŸä½ç½®ï¼šå¦‚æœå·²çŸ¥ tail å°¾èŠ‚ç‚¹æ˜¯ $O(1)$ï¼Œä¸çŸ¥é“ tail å°¾èŠ‚ç‚¹æ˜¯ $O(n)$</li><li>ä¸­é—´ä½ç½®ï¼šæ ¹æ® index æŸ¥æ‰¾æ—¶é—´ + $O(1)$</li></ul><h3 id="2-å•å‘é“¾è¡¨"><a href="#2-å•å‘é“¾è¡¨" class="headerlink" title="2) å•å‘é“¾è¡¨"></a>2) å•å‘é“¾è¡¨</h3><p>æ ¹æ®å•å‘é“¾è¡¨çš„å®šä¹‰ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªå­˜å‚¨ value å’Œ next æŒ‡é’ˆçš„ç±» Nodeï¼Œå’Œä¸€ä¸ªæè¿°å¤´éƒ¨èŠ‚ç‚¹çš„å¼•ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> &#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> Node head; <span class="comment">// å¤´éƒ¨èŠ‚ç‚¹</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123; <span class="comment">// èŠ‚ç‚¹ç±»</span></span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        Node next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> value, Node next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Node å®šä¹‰ä¸ºå†…éƒ¨ç±»ï¼Œæ˜¯ä¸ºäº†å¯¹å¤–<strong>éšè—</strong>å®ç°ç»†èŠ‚ï¼Œæ²¡å¿…è¦è®©ç±»çš„ä½¿ç”¨è€…å…³å¿ƒ Node ç»“æ„</li><li>å®šä¹‰ä¸º static å†…éƒ¨ç±»ï¼Œæ˜¯å› ä¸º Node <strong>ä¸éœ€è¦</strong>ä¸ SinglyLinkedList å®ä¾‹ç›¸å…³ï¼Œå¤šä¸ª SinglyLinkedListå®ä¾‹èƒ½å…±ç”¨ Node ç±»å®šä¹‰</li></ul><p><strong>å¤´éƒ¨æ·»åŠ </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.head = <span class="keyword">new</span> <span class="title class_">Node</span>(value, <span class="built_in">this</span>.head);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å¦‚æœ this.head &#x3D;&#x3D; nullï¼Œæ–°å¢èŠ‚ç‚¹æŒ‡å‘ nullï¼Œå¹¶ä½œä¸ºæ–°çš„ this.head</p></li><li><p>å¦‚æœ this.head !&#x3D; nullï¼Œæ–°å¢èŠ‚ç‚¹æŒ‡å‘åŸæ¥çš„ this.headï¼Œå¹¶ä½œä¸ºæ–°çš„ this.head</p><ul><li>æ³¨æ„èµ‹å€¼æ“ä½œæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</li></ul></li></ul><p><strong>while éå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">curr</span> <span class="operator">=</span> <span class="built_in">this</span>.head;</span><br><span class="line">        <span class="keyword">while</span> (curr != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// åšä¸€äº›äº‹</span></span><br><span class="line">            curr = curr.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>for éå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">Node</span> <span class="variable">curr</span> <span class="operator">=</span> <span class="built_in">this</span>.head; curr != <span class="literal">null</span>; curr = curr.next) &#123;</span><br><span class="line">            <span class="comment">// åšä¸€äº›äº‹</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ä»¥ä¸Šä¸¤ç§éå†éƒ½å¯ä»¥æŠŠ<strong>è¦åšçš„äº‹</strong>ä»¥ Consumer å‡½æ•°çš„æ–¹å¼ä¼ é€’è¿›æ¥</p><ul><li>Consumer çš„è§„åˆ™æ˜¯<strong>ä¸€ä¸ªå‚æ•°</strong>ï¼Œ<strong>æ— è¿”å›å€¼</strong>ï¼Œå› æ­¤åƒ System.out::println æ–¹æ³•ç­‰éƒ½æ˜¯ Consumer</li><li>è°ƒç”¨ Consumer æ—¶ï¼Œå°†å½“å‰èŠ‚ç‚¹ curr.value ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒ</li></ul></li></ul><p><strong>è¿­ä»£å™¨éå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;Integer&gt; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">NodeIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;Integer&gt; &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">curr</span> <span class="operator">=</span> head;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> curr != <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> curr.value;</span><br><span class="line">            curr = curr.next;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;Integer&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">NodeIterator</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>hasNext ç”¨æ¥åˆ¤æ–­æ˜¯å¦è¿˜æœ‰å¿…è¦è°ƒç”¨ next</p></li><li><p>next åšä¸¤ä»¶äº‹</p><ul><li>è¿”å›å½“å‰èŠ‚ç‚¹çš„ value</li><li>æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</li></ul></li><li><p>NodeIterator è¦å®šä¹‰ä¸º<strong>é static å†…éƒ¨ç±»</strong>ï¼Œæ˜¯å› ä¸ºå®ƒä¸ SinglyLinkedList å®ä¾‹ç›¸å…³ï¼Œæ˜¯å¯¹æŸä¸ª SinglyLinkedList å®ä¾‹çš„è¿­ä»£</p></li></ul><p><strong>é€’å½’éå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;Integer&gt; &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">        recursion(<span class="built_in">this</span>.head);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(Node curr)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (curr == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å‰é¢åšäº›äº‹</span></span><br><span class="line">        recursion(curr.next);</span><br><span class="line">        <span class="comment">// åé¢åšäº›äº‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å°¾éƒ¨æ·»åŠ </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">findLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.head == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node curr;</span><br><span class="line">        <span class="keyword">for</span> (curr = <span class="built_in">this</span>.head; curr.next != <span class="literal">null</span>; ) &#123;</span><br><span class="line">            curr = curr.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> curr;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">last</span> <span class="operator">=</span> findLast();</span><br><span class="line">        <span class="keyword">if</span> (last == <span class="literal">null</span>) &#123;</span><br><span class="line">            addFirst(value);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        last.next = <span class="keyword">new</span> <span class="title class_">Node</span>(value, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼Œæ‰¾æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œç»ˆæ­¢æ¡ä»¶æ˜¯ curr.next &#x3D;&#x3D; null</li><li>åˆ†æˆä¸¤ä¸ªæ–¹æ³•æ˜¯ä¸ºäº†ä»£ç æ¸…æ™°ï¼Œè€Œä¸” findLast() ä¹‹åè¿˜èƒ½å¤ç”¨</li></ul><p><strong>å°¾éƒ¨æ·»åŠ å¤šä¸ª</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> first, <span class="type">int</span>... rest)</span> &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="type">Node</span> <span class="variable">sublist</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(first, <span class="literal">null</span>);</span><br><span class="line">        <span class="type">Node</span> <span class="variable">curr</span> <span class="operator">=</span> sublist;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> value : rest) &#123;</span><br><span class="line">            curr.next = <span class="keyword">new</span> <span class="title class_">Node</span>(value, <span class="literal">null</span>);</span><br><span class="line">            curr = curr.next;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="type">Node</span> <span class="variable">last</span> <span class="operator">=</span> findLast();</span><br><span class="line">        <span class="keyword">if</span> (last == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.head = sublist;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        last.next = sublist;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å…ˆä¸²æˆä¸€ä¸² sublist</li><li>å†ä½œä¸ºä¸€ä¸ªæ•´ä½“æ·»åŠ </li></ul><p><strong>æ ¹æ®ç´¢å¼•è·å–</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">private</span> Node <span class="title function_">findNode</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">Node</span> <span class="variable">curr</span> <span class="operator">=</span> <span class="built_in">this</span>.head; curr != <span class="literal">null</span>; curr = curr.next, i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (index == i) &#123;</span><br><span class="line">                <span class="keyword">return</span> curr;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> IllegalArgumentException <span class="title function_">illegalIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(String.format(<span class="string">&quot;index [%d] ä¸åˆæ³•%n&quot;</span>, index));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> findNode(index);</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> node.value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åŒæ ·ï¼Œåˆ†æ–¹æ³•å¯ä»¥å®ç°å¤ç”¨</li></ul><p><strong>æ’å…¥</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">            addFirst(value);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> findNode(index - <span class="number">1</span>); <span class="comment">// æ‰¾åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123; <span class="comment">// æ‰¾ä¸åˆ°</span></span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">        &#125;</span><br><span class="line">        prev.next = <span class="keyword">new</span> <span class="title class_">Node</span>(value, prev.next);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ’å…¥åŒ…æ‹¬ä¸‹é¢çš„åˆ é™¤ï¼Œéƒ½å¿…é¡»æ‰¾åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹</li></ul><p><strong>åˆ é™¤</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedList</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.head != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.head = <span class="built_in">this</span>.head.next;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> findNode(index - <span class="number">1</span>);</span><br><span class="line">        Node curr;</span><br><span class="line">        <span class="keyword">if</span> (prev != <span class="literal">null</span> &amp;&amp; (curr = prev.next) != <span class="literal">null</span>) &#123;</span><br><span class="line">            prev.next = curr.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ç¬¬ä¸€ä¸ª if å—å¯¹åº”ç€ removeFirst æƒ…å†µ</p></li><li><p>æœ€åä¸€ä¸ª if å—å¯¹åº”ç€è‡³å°‘å¾—ä¸¤ä¸ªèŠ‚ç‚¹çš„æƒ…å†µ</p><ul><li>ä¸ä»…ä»…åˆ¤æ–­ä¸Šä¸€ä¸ªèŠ‚ç‚¹éç©ºï¼Œè¿˜è¦ä¿è¯å½“å‰èŠ‚ç‚¹éç©º</li></ul></li></ul><h3 id="3-å•å‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"><a href="#3-å•å‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰" class="headerlink" title="3) å•å‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"></a>3) å•å‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰</h3><p>è§‚å¯Ÿä¹‹å‰å•å‘é“¾è¡¨çš„å®ç°ï¼Œå‘ç°æ¯ä¸ªæ–¹æ³•å†…å‡ ä¹éƒ½æœ‰åˆ¤æ–­æ˜¯ä¸æ˜¯ head è¿™æ ·çš„ä»£ç ï¼Œèƒ½ä¸èƒ½ç®€åŒ–å‘¢ï¼Ÿ</p><p>ç”¨ä¸€ä¸ªä¸å‚ä¸æ•°æ®å­˜å‚¨çš„ç‰¹æ®Š Node ä½œä¸ºå“¨å…µï¼Œå®ƒä¸€èˆ¬è¢«ç§°ä¸ºå“¨å…µæˆ–å“‘å…ƒï¼Œæ‹¥æœ‰å“¨å…µèŠ‚ç‚¹çš„é“¾è¡¨ç§°ä¸ºå¸¦å¤´é“¾è¡¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedListSentinel</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Node</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(Integer.MIN_VALUE, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å…·ä½“å­˜ä»€ä¹ˆå€¼æ— æ‰€è°“ï¼Œå› ä¸ºä¸ä¼šç”¨åˆ°å®ƒçš„å€¼</li></ul><p>åŠ å…¥å“¨å…µèŠ‚ç‚¹åï¼Œä»£ç ä¼šå˜å¾—æ¯”è¾ƒç®€å•ï¼Œå…ˆçœ‹å‡ ä¸ªå·¥å…·æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedListSentinel</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">// æ ¹æ®ç´¢å¼•è·å–èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">findNode</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">Node</span> <span class="variable">curr</span> <span class="operator">=</span> <span class="built_in">this</span>.head; curr != <span class="literal">null</span>; curr = curr.next, i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == index) &#123;</span><br><span class="line">                <span class="keyword">return</span> curr;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// è·å–æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">findLast</span><span class="params">()</span> &#123;</span><br><span class="line">        Node curr;</span><br><span class="line">        <span class="keyword">for</span> (curr = <span class="built_in">this</span>.head; curr.next != <span class="literal">null</span>; ) &#123;</span><br><span class="line">            curr = curr.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> curr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>findNode ä¸ä¹‹å‰ç±»ä¼¼ï¼Œåªæ˜¯ i åˆå§‹å€¼è®¾ç½®ä¸º -1 å¯¹åº”å“¨å…µï¼Œå®é™…ä¼ å…¥çš„ index ä¹Ÿæ˜¯ $[-1, \infty)$</li><li>findLast ç»ä¸ä¼šè¿”å› null äº†ï¼Œå°±ç®—æ²¡æœ‰å…¶å®ƒèŠ‚ç‚¹ï¼Œä¹Ÿä¼šè¿”å›å“¨å…µä½œä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹</li></ul><p>è¿™æ ·ï¼Œä»£ç ç®€åŒ–ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SinglyLinkedListSentinel</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">last</span> <span class="operator">=</span> findLast();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ”¹åŠ¨å‰</span></span><br><span class="line"><span class="comment">        if (last == null) &#123;</span></span><br><span class="line"><span class="comment">            this.head = new Node(value, null);</span></span><br><span class="line"><span class="comment">            return;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        last.next = <span class="keyword">new</span> <span class="title class_">Node</span>(value, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ”¹åŠ¨å‰</span></span><br><span class="line"><span class="comment">        if (index == 0) &#123;</span></span><br><span class="line"><span class="comment">            this.head = new Node(value, this.head);</span></span><br><span class="line"><span class="comment">            return;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">// index ä¼ å…¥ 0 æ—¶ï¼Œè¿”å›çš„æ˜¯å“¨å…µ</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> findNode(index - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (prev != <span class="literal">null</span>) &#123;</span><br><span class="line">            prev.next = <span class="keyword">new</span> <span class="title class_">Node</span>(value, prev.next);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ”¹åŠ¨å‰</span></span><br><span class="line"><span class="comment">        if (index == 0) &#123;</span></span><br><span class="line"><span class="comment">            if (this.head != null) &#123;</span></span><br><span class="line"><span class="comment">                this.head = this.head.next;</span></span><br><span class="line"><span class="comment">                return;</span></span><br><span class="line"><span class="comment">            &#125; else &#123;</span></span><br><span class="line"><span class="comment">                throw illegalIndex(index);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">// index ä¼ å…¥ 0 æ—¶ï¼Œè¿”å›çš„æ˜¯å“¨å…µ</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> findNode(index - <span class="number">1</span>);</span><br><span class="line">        Node curr;</span><br><span class="line">        <span class="keyword">if</span> (prev != <span class="literal">null</span> &amp;&amp; (curr = prev.next) != <span class="literal">null</span>) &#123;</span><br><span class="line">            prev.next = curr.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ”¹åŠ¨å‰</span></span><br><span class="line"><span class="comment">        this.head = new Node(value, this.head);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"><span class="built_in">this</span>.head.next = <span class="keyword">new</span> <span class="title class_">Node</span>(value, <span class="built_in">this</span>.head.next);</span><br><span class="line">        <span class="comment">// ä¹Ÿå¯ä»¥è§†ä¸º insert çš„ç‰¹ä¾‹, å³ insert(0, value);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯¹äºåˆ é™¤ï¼Œå‰é¢è¯´äº†ã€æœ€åä¸€ä¸ª if å—å¯¹åº”ç€è‡³å°‘å¾—ä¸¤ä¸ªèŠ‚ç‚¹çš„æƒ…å†µã€‘ï¼Œç°åœ¨æœ‰äº†å“¨å…µï¼Œå°±å‡‘è¶³äº†ä¸¤ä¸ªèŠ‚ç‚¹</li></ul><h3 id="4-åŒå‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"><a href="#4-åŒå‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰" class="headerlink" title="4) åŒå‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"></a>4) åŒå‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoublyLinkedListSentinel</span> <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;Integer&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Node head;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Node tail;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DoublyLinkedListSentinel</span><span class="params">()</span> &#123;</span><br><span class="line">        head = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="literal">null</span>, <span class="number">666</span>, <span class="literal">null</span>);</span><br><span class="line">        tail = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="literal">null</span>, <span class="number">888</span>, <span class="literal">null</span>);</span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.prev = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">findNode</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> head; p != tail; p = p.next, i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == index) &#123;</span><br><span class="line">                <span class="keyword">return</span> p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        insert(<span class="number">0</span>, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        remove(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> tail.prev;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">added</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(prev, value, tail);</span><br><span class="line">        prev.next = added;</span><br><span class="line">        tail.prev = added;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> tail.prev;</span><br><span class="line">        <span class="keyword">if</span> (removed == head) &#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> removed.prev;</span><br><span class="line">        prev.next = tail;</span><br><span class="line">        tail.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> findNode(index - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">next</span> <span class="operator">=</span> prev.next;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">inserted</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(prev, value, next);</span><br><span class="line">        prev.next = inserted;</span><br><span class="line">        next.prev = inserted;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> findNode(index - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> prev.next;</span><br><span class="line">        <span class="keyword">if</span> (removed == tail) &#123;</span><br><span class="line">            <span class="keyword">throw</span> illegalIndex(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">next</span> <span class="operator">=</span> removed.next;</span><br><span class="line">        prev.next = next;</span><br><span class="line">        next.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IllegalArgumentException <span class="title function_">illegalIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(</span><br><span class="line">                String.format(<span class="string">&quot;index [%d] ä¸åˆæ³•%n&quot;</span>, index));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;Integer&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> head.next;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Integer <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> p.value;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        Node prev;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        Node next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Node prev, <span class="type">int</span> value, Node next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.prev = prev;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-ç¯å½¢é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"><a href="#5-ç¯å½¢é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰" class="headerlink" title="5) ç¯å½¢é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"></a>5) ç¯å½¢é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰</h3><p>åŒå‘ç¯å½¢é“¾è¡¨å¸¦å“¨å…µï¼Œè¿™æ—¶å“¨å…µ<strong>æ—¢ä½œä¸ºå¤´ï¼Œä¹Ÿä½œä¸ºå°¾</strong></p><p><img src="https://i0.hdslb.com/bfs/article/cb533953080a42ebcf7cd96d3d9bd449645325325.png" alt="image-20221229144232651">â€‹</p><p><img src="https://i0.hdslb.com/bfs/article/cd82f2eafbe14b625de77d461d3e3f92645325325.png" alt="image-20221229143756065">â€‹</p><p><img src="https://i0.hdslb.com/bfs/article/4e5b47993e3b85e0075fd97b9db1ea55645325325.png" alt="image-20221229153338425">â€‹</p><p><img src="https://i0.hdslb.com/bfs/article/658ce451815c808c2f042180796eb421645325325.png" alt="image-20221229154248800">â€‹</p><p>å‚è€ƒå®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoublyLinkedListSentinel</span> <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;Integer&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;Integer&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;&gt;() &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> sentinel.next;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != sentinel;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Integer <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> p.value;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        Node prev;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        Node next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Node prev, <span class="type">int</span> value, Node next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.prev = prev;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Node</span> <span class="variable">sentinel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="literal">null</span>, -<span class="number">1</span>, <span class="literal">null</span>); <span class="comment">// å“¨å…µ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DoublyLinkedListSentinel</span><span class="params">()</span> &#123;</span><br><span class="line">        sentinel.next = sentinel;</span><br><span class="line">        sentinel.prev = sentinel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ åˆ°ç¬¬ä¸€ä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å¾…æ·»åŠ å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">next</span> <span class="operator">=</span> sentinel.next;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> sentinel;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">added</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(prev, value, next);</span><br><span class="line">        prev.next = added;</span><br><span class="line">        next.prev = added;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ åˆ°æœ€åä¸€ä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å¾…æ·»åŠ å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> sentinel.prev;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">next</span> <span class="operator">=</span> sentinel;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">added</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(prev, value, next);</span><br><span class="line">        prev.next = added;</span><br><span class="line">        next.prev = added;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ç¬¬ä¸€ä¸ª</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> sentinel.next;</span><br><span class="line">        <span class="keyword">if</span> (removed == sentinel) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;éæ³•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">a</span> <span class="operator">=</span> sentinel;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">b</span> <span class="operator">=</span> removed.next;</span><br><span class="line">        a.next = b;</span><br><span class="line">        b.prev = a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤æœ€åä¸€ä¸ª</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> sentinel.prev;</span><br><span class="line">        <span class="keyword">if</span> (removed == sentinel) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;éæ³•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">a</span> <span class="operator">=</span> removed.prev;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">b</span> <span class="operator">=</span> sentinel;</span><br><span class="line">        a.next = b;</span><br><span class="line">        b.prev = a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å€¼åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;å‡å®š value åœ¨é“¾è¡¨ä¸­ä½œä¸º key, æœ‰å”¯ä¸€æ€§&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å¾…åˆ é™¤å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeByValue</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">removed</span> <span class="operator">=</span> findNodeByValue(value);</span><br><span class="line">        <span class="keyword">if</span> (removed != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">prev</span> <span class="operator">=</span> removed.prev;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">next</span> <span class="operator">=</span> removed.next;</span><br><span class="line">            prev.next = next;</span><br><span class="line">            next.prev = prev;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">findNodeByValue</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> sentinel.next;</span><br><span class="line">        <span class="keyword">while</span> (p != sentinel) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p.value == value) &#123;</span><br><span class="line">                <span class="keyword">return</span> p;</span><br><span class="line">            &#125;</span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¹ é¢˜-1"><a href="#ä¹ é¢˜-1" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-åè½¬å•å‘é“¾è¡¨-Leetcode-206"><a href="#E01-åè½¬å•å‘é“¾è¡¨-Leetcode-206" class="headerlink" title="E01. åè½¬å•å‘é“¾è¡¨-Leetcode 206"></a>E01. åè½¬å•å‘é“¾è¡¨-Leetcode 206</h4><p>å¯¹åº”åŠ›æ‰£é¢˜ç›® <a href="https://leetcode.cn/problems/reverse-linked-list/">206. åè½¬é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,2,3,4,5]</span><br><span class="line">è¾“å‡ºï¼š[5,4,3,2,1]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼š[1,2]</span><br><span class="line">è¾“å‡ºï¼š[2,1]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼š[]</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•1</strong></p><p>æ„é€ ä¸€ä¸ªæ–°é“¾è¡¨ï¼Œä»<strong>æ—§é“¾è¡¨</strong>ä¾æ¬¡æ‹¿åˆ°æ¯ä¸ªèŠ‚ç‚¹ï¼Œåˆ›å»ºæ–°èŠ‚ç‚¹æ·»åŠ è‡³<strong>æ–°é“¾è¡¨</strong>å¤´éƒ¨ï¼Œå®Œæˆåæ–°é“¾è¡¨å³æ˜¯å€’åºçš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode o1)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> o1;</span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">        n1 = <span class="keyword">new</span> <span class="title class_">ListNode</span>(p.val, n1);</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯„ä»·ï¼šç®€å•ç›´ç™½ï¼Œå°±æ˜¯å¾—æ–°åˆ›å»ºèŠ‚ç‚¹å¯¹è±¡</p><p><strong>æ–¹æ³•2</strong></p><p>ä¸æ–¹æ³•1 ç±»ä¼¼ï¼Œæ„é€ ä¸€ä¸ªæ–°é“¾è¡¨ï¼Œä»<strong>æ—§é“¾è¡¨å¤´éƒ¨</strong>ç§»é™¤èŠ‚ç‚¹ï¼Œæ·»åŠ åˆ°<strong>æ–°é“¾è¡¨å¤´éƒ¨</strong>ï¼Œå®Œæˆåæ–°é“¾è¡¨å³æ˜¯å€’åºçš„ï¼ŒåŒºåˆ«åœ¨äºåŸé¢˜ç›®æœªæä¾›èŠ‚ç‚¹å¤–å±‚çš„å®¹å™¨ç±»ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªï¼Œå¦å¤–ä¸€ä¸ªåŒºåˆ«æ˜¯å¹¶ä¸å»æ„é€ æ–°èŠ‚ç‚¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">List</span> &#123;</span><br><span class="line">    ListNode head;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">List</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.head = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">removeFirst</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">first</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">if</span> (first != <span class="literal">null</span>) &#123;</span><br><span class="line">            head = first.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(ListNode first)</span> &#123;</span><br><span class="line">        first.next = head;</span><br><span class="line">        head = first;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">List</span> <span class="variable">list1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">List</span>(head);</span><br><span class="line">    <span class="type">List</span> <span class="variable">list2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">List</span>(<span class="literal">null</span>);</span><br><span class="line">    ListNode first;</span><br><span class="line">    <span class="keyword">while</span> ((first = list1.removeFirst()) != <span class="literal">null</span>) &#123;</span><br><span class="line">        list2.addFirst(first);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> list2.head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯„ä»·ï¼šæ›´åŠ é¢å‘å¯¹è±¡ï¼Œå¦‚æœå®é™…å†™ä»£ç è€Œéåˆ·é¢˜ï¼Œæ›´å¤šä¼šè¿™ä¹ˆåš</p><p><strong>æ–¹æ³•3</strong></p><p>é€’å½’ï¼Œåœ¨<strong>å½’</strong>æ—¶è®© $5 \rightarrow 4$ï¼Œ$4 \rightarrow 3$ â€¦</p><p>é¦–å…ˆï¼Œå†™ä¸€ä¸ªé€’å½’æ–¹æ³•ï¼Œè¿”å›å€¼ç”¨æ¥æ‹¿åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode p)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span> || p.next == <span class="literal">null</span>) &#123; <span class="comment">// ä¸è¶³ä¸¤ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> p; <span class="comment">// æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">last</span> <span class="operator">=</span> reverseList(p.next);</span><br><span class="line">    <span class="keyword">return</span> last;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„1ï¼šé€’å½’ç»ˆæ­¢æ¡ä»¶æ˜¯ curr.next &#x3D;&#x3D; nullï¼Œç›®çš„æ˜¯åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹å°±ç»“æŸé€’å½’ï¼Œä¸ä¹‹å‰é€’å½’éå†ä¸ä¸€æ ·</li><li>æ³¨æ„2ï¼šéœ€è¦è€ƒè™‘ç©ºé“¾è¡¨å³ p &#x3D;&#x3D; null çš„æƒ…å†µ</li></ul><p>å¯ä»¥å…ˆæµ‹è¯•ä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ListNode</span> <span class="variable">o5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">5</span>, <span class="literal">null</span>);</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">o4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">4</span>, o5);</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">o3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">3</span>, o4);</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">o2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">2</span>, o3);</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">o1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">1</span>, o2);</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">E01Leetcode206</span>().reverseList(o1);</span><br><span class="line">System.out.println(n1);</span><br></pre></td></tr></table></figure><p>ä¼šæ‰“å°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[5]</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä¸º<strong>ä¼ªç </strong>è°ƒç”¨è¿‡ç¨‹ï¼Œå‡è®¾èŠ‚ç‚¹åˆ†åˆ«æ˜¯ $1 \rightarrow 2 \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$ï¼Œå…ˆå¿½ç•¥è¿”å›å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">reverseList(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">1</span>) &#123;</span><br><span class="line">    reverseList(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">2</span>) &#123;</span><br><span class="line">    reverseList(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">3</span>) &#123;</span><br><span class="line">    reverseList(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">4</span>) &#123;</span><br><span class="line">    reverseList(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span> || p.next == <span class="literal">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> p; <span class="comment">// è¿”å›5</span></span><br><span class="line">                    &#125;</span><br><span class="line">&#125;</span><br><span class="line">                <span class="comment">// æ­¤æ—¶pæ˜¯4, p.nextæ˜¯5</span></span><br><span class="line">&#125;</span><br><span class="line">            <span class="comment">// æ­¤æ—¶pæ˜¯3, p.nextæ˜¯4</span></span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">// æ­¤æ—¶pæ˜¯2, p.nextæ˜¯3</span></span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// æ­¤æ—¶pæ˜¯1, p.nextæ˜¯2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œä» p &#x3D; 4 å¼€å§‹ï¼Œè¦è®© $5 \rightarrow 4$ï¼Œ$4 \rightarrow 3$ â€¦</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">reverseList(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">1</span>) &#123;</span><br><span class="line">    reverseList(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">2</span>) &#123;</span><br><span class="line">    reverseList(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">3</span>) &#123;</span><br><span class="line">    reverseList(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">4</span>) &#123;</span><br><span class="line">    reverseList(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span> || p.next == <span class="literal">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> p; <span class="comment">// è¿”å›5</span></span><br><span class="line">                    &#125;</span><br><span class="line">&#125;</span><br><span class="line">                <span class="comment">// æ­¤æ—¶pæ˜¯4, p.nextæ˜¯5, è¦è®©5æŒ‡å‘4,ä»£ç å†™æˆ p.next.next=p</span></span><br><span class="line">                <span class="comment">// è¿˜è¦æ³¨æ„4è¦æŒ‡å‘ null, å¦åˆ™å°±æ­»é“¾äº†</span></span><br><span class="line">&#125;</span><br><span class="line">            <span class="comment">// æ­¤æ—¶pæ˜¯3, p.nextæ˜¯4</span></span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">// æ­¤æ—¶pæ˜¯2, p.nextæ˜¯3</span></span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// æ­¤æ—¶pæ˜¯1, p.nextæ˜¯2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆä»£ç ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode p)</span> &#123;  </span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span> || p.next == <span class="literal">null</span>) &#123; <span class="comment">// ä¸è¶³ä¸¤ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> p; <span class="comment">// æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">last</span> <span class="operator">=</span> reverseList(p.next);</span><br><span class="line">    p.next.next = p;</span><br><span class="line">    p.next = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> last;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Qï¼šä¸ºå•¥ä¸èƒ½åœ¨<strong>é€’</strong>çš„è¿‡ç¨‹ä¸­å€’åºï¼Ÿ</p><p>Aï¼šæ¯”å¦‚</p><ul><li>$1 \rightarrow 2 \rightarrow 3$ å¦‚æœé€’çš„è¿‡ç¨‹ä¸­è®© $2 \rightarrow 1$ é‚£ä¹ˆæ­¤æ—¶ $2 \rightarrow 3$ å°±è¢«è¦†ç›–ï¼Œä¸çŸ¥é“æ¥ä¸‹æ¥é€’ç»™è°</li><li>è€Œå½’çš„æ—¶å€™è®© $3 \rightarrow 2$ ä¸ä¼šå½±å“ä¸Šä¸€å±‚çš„ $1 \rightarrow 2$</li></ul><p>è¯„ä»·ï¼šå•å‘é“¾è¡¨æ²¡æœ‰ prev æŒ‡é’ˆï¼Œä½†åˆ©ç”¨é€’å½’çš„ç‰¹æ€§ã€è®°ä½äº†ã€‘é“¾è¡¨æ¯æ¬¡è°ƒç”¨æ—¶ç›¸é‚»ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯è°</p><p><strong>æ–¹æ³•4</strong></p><p>ä»é“¾è¡¨æ¯æ¬¡æ‹¿åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œå°†å…¶ä»é“¾è¡¨æ–­å¼€ï¼Œæ’å…¥å¤´éƒ¨ï¼Œç›´è‡³å®ƒä¸º null ç»“æŸ</p><ol><li>è®¾ç½®æŒ‡é’ˆ o1(æ—§å¤´)ã€n1(æ–°å¤´)ã€o2(æ—§è€äºŒ)ï¼Œåˆ†åˆ«æŒ‡å‘ç¬¬ä¸€ï¼Œç¬¬ä¸€ï¼Œç¬¬äºŒèŠ‚ç‚¹</li></ol><p>$\frac{n1 \ o1}{1} \rightarrow \frac{o2}{2} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p><ol start="2"><li>å°† o2 èŠ‚ç‚¹ä»é“¾è¡¨æ–­å¼€ï¼Œå³ o1 èŠ‚ç‚¹æŒ‡å‘ç¬¬ä¸‰èŠ‚ç‚¹</li></ol><p>$\frac{n1 \ o1}{1} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$ ï¼Œ$\frac{o2}{2}$</p><ol start="3"><li>o2 èŠ‚ç‚¹é“¾å…¥é“¾è¡¨å¤´éƒ¨ï¼Œå³</li></ol><p>$\frac{o2}{2} \rightarrow \frac{n1 \ o1}{1} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p><ol start="4"><li>n1 æŒ‡å‘ o2</li></ol><p>$\frac{n1 \ o2}{2} \rightarrow \frac{o1}{1} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p><ol start="5"><li>o2 æŒ‡å‘ o1 çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå³</li></ol><p>$\frac{n1}{2} \rightarrow \frac{o1}{1} \rightarrow \frac{o2}{3} \rightarrow 4 \rightarrow 5 \rightarrow null$</p><ol start="6"><li>é‡å¤ä»¥ä¸Š $2\sim5$ æ­¥ï¼Œç›´åˆ° o2 æŒ‡å‘ null</li><li>è¿˜åº”å½“è€ƒè™‘è¾¹ç•Œæ¡ä»¶ï¼Œå³é“¾è¡¨ä¸­ä¸æ»¡ä¸¤ä¸ªå…ƒç´ æ—¶ï¼Œæ— éœ€èµ°ä»¥ä¸Šé€»è¾‘</li></ol><p>å‚è€ƒç­”æ¡ˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode o1)</span> &#123;  </span><br><span class="line">    <span class="keyword">if</span> (o1 == <span class="literal">null</span> || o1.next == <span class="literal">null</span>) &#123; <span class="comment">// ä¸è¶³ä¸¤ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> o1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">o2</span> <span class="operator">=</span> o1.next;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> o1;</span><br><span class="line">    <span class="keyword">while</span> (o2 != <span class="literal">null</span>) &#123;</span><br><span class="line">        o1.next = o2.next; </span><br><span class="line">        o2.next = n1;</span><br><span class="line">        n1 = o2;</span><br><span class="line">        o2 = o1.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•5</strong></p><p>è¦ç‚¹ï¼šæŠŠé“¾è¡¨åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œæ€è·¯å°±æ˜¯ä¸æ–­ä»é“¾è¡¨2çš„å¤´ï¼Œå¾€é“¾è¡¨1çš„å¤´æ¬ç§»</p><ol><li>n1 æŒ‡å‘ nullï¼Œä»£è¡¨<strong>æ–°é“¾è¡¨</strong>ä¸€å¼€å§‹æ²¡æœ‰å…ƒç´ ï¼Œo1 æŒ‡å‘<strong>åŸé“¾è¡¨</strong>çš„é¦–èŠ‚ç‚¹</li></ol><p>$\frac{n1}{null}$ï¼Œ$\frac{o1}{1} \rightarrow 2 \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p><ol start="2"><li>å¼€å§‹å¾ªç¯ï¼Œo2 æŒ‡å‘<strong>åŸé“¾è¡¨</strong>æ¬¡èŠ‚ç‚¹</li></ol><p>$\frac{n1}{null}$ï¼Œ$\frac{o1}{1} \rightarrow \frac{o2}{2} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p><ol start="3"><li>æ¬ç§»</li></ol><p>$\frac{o1}{1} \rightarrow \frac{n1}{null}$  ï¼Œ $\frac{o2}{2} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p><ol start="4"><li>æŒ‡é’ˆå¤ä½</li></ol><p>$\frac{n1}{1} \rightarrow null$ ï¼Œ $\frac{o1 \ o2}{2} \rightarrow 3 \rightarrow 4 \rightarrow 5 \rightarrow null$</p><ol start="5"><li>é‡å¤ $2\sim4$ æ­¥</li><li>å½“ o1 &#x3D; null æ—¶é€€å‡ºå¾ªç¯</li></ol><p><strong>å‚è€ƒç­”æ¡ˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode o1)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o1 == <span class="literal">null</span> || o1.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> o1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (o1 != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">o2</span> <span class="operator">=</span> o1.next;</span><br><span class="line">        o1.next = n1;</span><br><span class="line">        n1 = o1;</span><br><span class="line">        o1 = o2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯„ä»·ï¼šæœ¬è´¨ä¸Šä¸æ–¹æ³•2 ç›¸åŒï¼Œåªæ˜¯æ–¹æ³•2æ›´ä¸ºé¢å‘å¯¹è±¡</p><h4 id="E02-æ ¹æ®å€¼åˆ é™¤èŠ‚ç‚¹-Leetcode-203"><a href="#E02-æ ¹æ®å€¼åˆ é™¤èŠ‚ç‚¹-Leetcode-203" class="headerlink" title="E02. æ ¹æ®å€¼åˆ é™¤èŠ‚ç‚¹-Leetcode 203"></a>E02. æ ¹æ®å€¼åˆ é™¤èŠ‚ç‚¹-Leetcode 203</h4><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,2,6,3,6], val = 6</span><br><span class="line">è¾“å‡ºï¼š[1,2,3]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šhead = [], val = 1</span><br><span class="line">è¾“å‡ºï¼š[]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šhead = [7,7,7,7], val = 7</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•1</strong></p><p>å›¾ä¸­ s ä»£è¡¨ sentinel å“¨å…µï¼ˆå¦‚æœä¸åŠ å“¨å…µï¼Œåˆ™åˆ é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è¦ç‰¹æ®Šå¤„ç†ï¼‰ï¼Œä¾‹å¦‚è¦åˆ é™¤ 6</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p1   p2</span><br><span class="line">s -&gt; 1 -&gt; 2 -&gt; 6 -&gt; 3 -&gt; 6 -&gt; null</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ p2 ä¸ç­‰äºç›®æ ‡ï¼Œåˆ™ p1ï¼Œp2 ä¸æ–­åç§»</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> p1   p2</span><br><span class="line">s -&gt; 1 -&gt; 2 -&gt; 6 -&gt; 3 -&gt; 6 -&gt; null</span><br><span class="line"></span><br><span class="line">   p1   p2</span><br><span class="line">s -&gt; 1 -&gt; 2 -&gt; 6 -&gt; 3 -&gt; 6 -&gt; null</span><br></pre></td></tr></table></figure><ul><li>p2 &#x3D;&#x3D; 6ï¼Œåˆ é™¤å®ƒï¼Œæ³¨æ„ p1 æ­¤æ—¶ä¿æŒä¸å˜ï¼Œp2 åç§»</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   p1   p2</span><br><span class="line">s -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 6 -&gt; null</span><br></pre></td></tr></table></figure><ul><li>p2 ä¸ç­‰äºç›®æ ‡ï¼Œåˆ™ p1ï¼Œp2 ä¸æ–­åç§»</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">      p1   p2</span><br><span class="line">s -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 6 -&gt; null</span><br></pre></td></tr></table></figure><ul><li>p2 &#x3D;&#x3D; 6ï¼Œåˆ é™¤å®ƒï¼Œæ³¨æ„ p1 æ­¤æ—¶ä¿æŒä¸å˜ï¼Œp2 åç§»</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">      p1   p2</span><br><span class="line">s -&gt; 1 -&gt; 2 -&gt; 3 -&gt; null</span><br></pre></td></tr></table></figure><ul><li>p2 &#x3D;&#x3D; null é€€å‡ºå¾ªç¯</li></ul><p>æœ€åä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeElements</span><span class="params">(ListNode head, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">sentinel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, head);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> sentinel;</span><br><span class="line">    ListNode p2;</span><br><span class="line">    <span class="keyword">while</span> ((p2 = p1.next) != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p2.val == val) &#123;</span><br><span class="line">            p1.next = p2.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            p1 = p1.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sentinel.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•2</strong></p><p>æ€è·¯ï¼Œé€’å½’å‡½æ•°è´Ÿè´£è¿”å›ï¼šä»å½“å‰èŠ‚ç‚¹ï¼ˆæˆ‘ï¼‰å¼€å§‹ï¼Œå®Œæˆåˆ é™¤çš„å­é“¾è¡¨</p><ol><li>è‹¥æˆ‘ä¸ v ç›¸ç­‰ï¼Œåº”è¯¥è¿”å›ä¸‹ä¸€ä¸ªèŠ‚ç‚¹é€’å½’ç»“æœ</li><li>è‹¥æˆ‘ä¸ v ä¸ç­‰ï¼Œåº”è¯¥è¿”å›æˆ‘ï¼Œä½†æˆ‘çš„ next åº”è¯¥æ›´æ–°ï¼ˆè®©æˆ‘èƒ½å¸¦ä¸Šåç»­åˆ è¿‡çš„å­é“¾è¡¨ï¼‰</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">removeElements(ListNode p=<span class="number">1</span>, <span class="type">int</span> v=<span class="number">6</span>)&#123;</span><br><span class="line">    <span class="number">1.</span>next=removeElements(ListNode p=<span class="number">2</span>, <span class="type">int</span> v=<span class="number">6</span>)&#123;</span><br><span class="line">    <span class="number">2.</span>next=removeElements(ListNode p=<span class="number">6</span>, <span class="type">int</span> v=<span class="number">6</span>)&#123;</span><br><span class="line">    removeElements(ListNode p=<span class="number">3</span>, <span class="type">int</span> v=<span class="number">6</span>)&#123;</span><br><span class="line">    <span class="number">3.</span>next=removeElements(ListNode p=<span class="number">6</span>, <span class="type">int</span> v=<span class="number">6</span>)&#123;</span><br><span class="line">    removeElements(ListNode p=<span class="literal">null</span>, <span class="type">int</span> v=<span class="number">6</span>)&#123;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰èŠ‚ç‚¹,è¿”å›</span></span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeElements</span><span class="params">(ListNode head, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (head.val == val) &#123;</span><br><span class="line">        <span class="keyword">return</span> removeElements(head.next, val);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        head.next = removeElements(head.next, val);</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E03-åˆ é™¤å€’æ•°èŠ‚ç‚¹-Leetcode-19"><a href="#E03-åˆ é™¤å€’æ•°èŠ‚ç‚¹-Leetcode-19" class="headerlink" title="E03.  åˆ é™¤å€’æ•°èŠ‚ç‚¹-Leetcode 19"></a>E03.  åˆ é™¤å€’æ•°èŠ‚ç‚¹-Leetcode 19</h4><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,2,3,4,5], n = 2</span><br><span class="line">è¾“å‡ºï¼š[1,2,3,5]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šhead = [1], n = 1</span><br><span class="line">è¾“å‡ºï¼š[]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šhead = [1,2], n = 1</span><br><span class="line">è¾“å‡ºï¼š[1]</span><br></pre></td></tr></table></figure><p>å¦å¤–é¢˜ç›®æç¤º</p><ul><li>é“¾è¡¨è‡³å°‘ä¸€ä¸ªèŠ‚ç‚¹</li><li>n åªä¼šåœ¨åˆç†èŒƒå›´</li></ul><p><strong>æ–¹æ³•1</strong></p><p>æ€è·¯ï¼Œå†™ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œç”¨æ¥è¿”å›ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€’æ•°åºå·</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">recursion(ListNode p=<span class="number">1</span>, <span class="type">int</span> n=<span class="number">2</span>) &#123;</span><br><span class="line">    recursion(ListNode p=<span class="number">2</span>, <span class="type">int</span> n=<span class="number">2</span>) &#123;</span><br><span class="line">    recursion(ListNode p=<span class="number">3</span>, <span class="type">int</span> n=<span class="number">2</span>) &#123;</span><br><span class="line">    recursion(ListNode p=<span class="number">4</span>, <span class="type">int</span> n=<span class="number">2</span>) &#123;</span><br><span class="line">    recursion(ListNode p=<span class="number">5</span>, <span class="type">int</span> n=<span class="number">2</span>) &#123;</span><br><span class="line">    recursion(ListNode p=<span class="literal">null</span>, <span class="type">int</span> n=<span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// æœ€å†…å±‚åºå·0</span></span><br><span class="line">&#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">// ä¸Šä¸€æ¬¡è¿”å›å€¼+1</span></span><br><span class="line">&#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">            <span class="keyword">if</span>(è¿”å›å€¼ == n == <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="comment">// åˆ é™¤ next</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†ä¸Šè¿°ä»£ç æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è‹¥åˆ é™¤çš„æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®ƒæ²¡æœ‰ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤å¯ä»¥åŠ ä¸€ä¸ªå“¨å…µæ¥è§£å†³</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeNthFromEnd</span><span class="params">(ListNode head, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">sentinel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, head);</span><br><span class="line">    recursion(sentinel, n);</span><br><span class="line">    <span class="keyword">return</span> sentinel.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">recursion</span><span class="params">(ListNode p, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">nth</span> <span class="operator">=</span> recursion(p.next, n);</span><br><span class="line">    <span class="keyword">if</span> (nth == n) &#123;</span><br><span class="line">        p.next = p.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nth + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Qï¼šp.next.next ä¸æ€•ç©ºæŒ‡é’ˆå—ï¼Ÿ</p><p>Aï¼š</p><ul><li>p æ˜¯å¾…åˆ é™¤èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœèƒ½é€’å½’å›åˆ° pï¼Œé‚£ä¹ˆ p.next è‚¯å®šæœ‰å€¼ï¼Œä¸ä¼šæ˜¯ null</li><li>ä¸”é¢˜ç›®è¯´æ˜äº† n &gt;&#x3D;1ï¼Œä¸ä¼šå› ä¸º nth &#x3D;&#x3D; 0 è€Œè®© p.next æŒ‡å‘æœ€åçš„ null</li></ul><p><strong>æ–¹æ³•2</strong></p><p>å¿«æ…¢æŒ‡é’ˆï¼Œp1 æŒ‡å‘å¾…åˆ èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªï¼Œp2 å…ˆèµ° n + 1 æ­¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">i=<span class="number">0</span></span><br><span class="line">p2</span><br><span class="line">s -&gt; <span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">5</span> -&gt; <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">     i=<span class="number">1</span></span><br><span class="line">     p2</span><br><span class="line">s -&gt; <span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">5</span> -&gt; <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">          i=<span class="number">2</span></span><br><span class="line">          p2</span><br><span class="line">s -&gt; <span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">5</span> -&gt; <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">               i=<span class="number">3</span> ä»æ­¤å¼€å§‹ p1 p2 ä¾æ¬¡å‘å³å¹³ç§», ç›´åˆ° p2 ç§»åŠ¨åˆ°æœ«å°¾</span><br><span class="line">p1             p2</span><br><span class="line">s -&gt; <span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">5</span> -&gt; <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">               p1             p2</span><br><span class="line">s -&gt; <span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">4</span> -&gt; <span class="number">5</span> -&gt; <span class="literal">null</span></span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeNthFromEnd</span><span class="params">(ListNode head, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, head);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> s;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> s;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n + <span class="number">1</span>; i++) &#123;</span><br><span class="line">        p2 = p2.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (p2 != <span class="literal">null</span>) &#123;</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        p2 = p2.next;</span><br><span class="line">    &#125;</span><br><span class="line">    p1.next = p1.next.next;</span><br><span class="line">    <span class="keyword">return</span> s.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•3</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">removeNthFromEnd</span><span class="params">(ListNode head, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">Composite</span> <span class="variable">c</span> <span class="operator">=</span> recursion(head, n);</span><br><span class="line">    <span class="keyword">return</span> c.node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Composite</span> &#123;</span><br><span class="line">    ListNode node;</span><br><span class="line">    <span class="type">int</span> nth;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Composite</span><span class="params">(ListNode node, <span class="type">int</span> nth)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.node = node;</span><br><span class="line">        <span class="built_in">this</span>.nth = nth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Composite <span class="title function_">recursion</span><span class="params">(ListNode p, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Composite</span>(<span class="literal">null</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Composite</span> <span class="variable">c</span> <span class="operator">=</span> recursion(p.next, n);</span><br><span class="line">    <span class="keyword">if</span> (c.nth != n) &#123;</span><br><span class="line">        p.next = c.node;</span><br><span class="line">        c.node = p;</span><br><span class="line">    &#125;</span><br><span class="line">    c.nth +=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E04-æœ‰åºé“¾è¡¨å»é‡-Leetcode-83"><a href="#E04-æœ‰åºé“¾è¡¨å»é‡-Leetcode-83" class="headerlink" title="E04. æœ‰åºé“¾è¡¨å»é‡-Leetcode 83"></a>E04. æœ‰åºé“¾è¡¨å»é‡-Leetcode 83</h4><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,1,2]</span><br><span class="line">è¾“å‡ºï¼š[1,2]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šhead = [1,1,2,3,3]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3]</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š<strong>é‡å¤å…ƒç´ ä¿ç•™ä¸€ä¸ª</strong></p><p><strong>æ–¹æ³•1</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p1   p2</span><br><span class="line">1 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 3 -&gt; null</span><br></pre></td></tr></table></figure><ul><li>p1.val &#x3D;&#x3D; p2.val é‚£ä¹ˆåˆ é™¤ p2ï¼Œæ³¨æ„ p1 æ­¤æ—¶ä¿æŒä¸å˜</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p1   p2</span><br><span class="line">1 -&gt; 2 -&gt; 3 -&gt; 3 -&gt; null</span><br></pre></td></tr></table></figure><ul><li>p1.val !&#x3D; p2.val é‚£ä¹ˆ p1ï¼Œp2 å‘åç§»åŠ¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">     p1   p2</span><br><span class="line"><span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">3</span> -&gt; <span class="literal">null</span></span><br><span class="line">     </span><br><span class="line">          p1   p2</span><br><span class="line"><span class="number">1</span> -&gt; <span class="number">2</span> -&gt; <span class="number">3</span> -&gt; <span class="number">3</span> -&gt; <span class="literal">null</span>   </span><br></pre></td></tr></table></figure><ul><li>p1.val &#x3D;&#x3D; p2.val é‚£ä¹ˆåˆ é™¤ p2</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">          p1   p2</span><br><span class="line">1 -&gt; 2 -&gt; 3 -&gt; null   </span><br></pre></td></tr></table></figure><ul><li>å½“ p2 &#x3D;&#x3D; null é€€å‡ºå¾ªç¯</li></ul><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="comment">// é“¾è¡¨èŠ‚ç‚¹ &lt; 2</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é“¾è¡¨èŠ‚ç‚¹ &gt;= 2</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> head;</span><br><span class="line">    ListNode p2;</span><br><span class="line">    <span class="keyword">while</span> ((p2 = p1.next) != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p1.val == p2.val) &#123;</span><br><span class="line">            p1.next = p2.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            p1 = p1.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•2</strong></p><p>é€’å½’å‡½æ•°è´Ÿè´£è¿”å›ï¼šä»å½“å‰èŠ‚ç‚¹ï¼ˆæˆ‘ï¼‰å¼€å§‹ï¼Œå®Œæˆå»é‡çš„é“¾è¡¨</p><ol><li>è‹¥æˆ‘ä¸ next é‡å¤ï¼Œè¿”å› next</li><li>è‹¥æˆ‘ä¸ next ä¸é‡å¤ï¼Œè¿”å›æˆ‘ï¼Œä½† next åº”å½“æ›´æ–°</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">deleteDuplicates(ListNode p=<span class="number">1</span>) &#123;</span><br><span class="line">    deleteDuplicates(ListNode p=<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="number">1.</span>next=deleteDuplicates(ListNode p=<span class="number">2</span>) &#123;</span><br><span class="line">            <span class="number">2.</span>next=deleteDuplicates(ListNode p=<span class="number">3</span>) &#123;</span><br><span class="line">                deleteDuplicates(ListNode p=<span class="number">3</span>) &#123;</span><br><span class="line"><span class="comment">// åªå‰©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">                &#125;            </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode p)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span> || p.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(p.val == p.next.val) &#123;</span><br><span class="line">        <span class="keyword">return</span> deleteDuplicates(p.next);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        p.next = deleteDuplicates(p.next);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E05-æœ‰åºé“¾è¡¨å»é‡-Leetcode-82"><a href="#E05-æœ‰åºé“¾è¡¨å»é‡-Leetcode-82" class="headerlink" title="E05. æœ‰åºé“¾è¡¨å»é‡-Leetcode 82"></a>E05. æœ‰åºé“¾è¡¨å»é‡-Leetcode 82</h4><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,2,3,3,4,4,5]</span><br><span class="line">è¾“å‡ºï¼š[1,2,5]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šhead = [1,1,1,2,3]</span><br><span class="line">è¾“å‡ºï¼š[2,3]</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š<strong>é‡å¤å…ƒç´ ä¸€ä¸ªä¸ç•™</strong></p><p><strong>æ–¹æ³•1</strong></p><p>é€’å½’å‡½æ•°è´Ÿè´£è¿”å›ï¼šä»å½“å‰èŠ‚ç‚¹ï¼ˆæˆ‘ï¼‰å¼€å§‹ï¼Œå®Œæˆå»é‡çš„é“¾è¡¨</p><ol><li>è‹¥æˆ‘ä¸ next é‡å¤ï¼Œä¸€ç›´æ‰¾åˆ°ä¸‹ä¸€ä¸ªä¸é‡å¤çš„èŠ‚ç‚¹ï¼Œä»¥å®ƒçš„è¿”å›ç»“æœä¸ºå‡†</li><li>è‹¥æˆ‘ä¸ next ä¸é‡å¤ï¼Œè¿”å›æˆ‘ï¼ŒåŒæ—¶æ›´æ–° next</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">deleteDuplicates(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// æ‰¾ä¸‹ä¸ªä¸é‡å¤çš„</span></span><br><span class="line">deleteDuplicates(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">1</span>) &#123;</span><br><span class="line">        deleteDuplicates(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">1</span>) &#123;</span><br><span class="line">deleteDuplicates(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="number">2.</span>next=deleteDuplicates(<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> <span class="number">3</span>) &#123;</span><br><span class="line"><span class="comment">// åªå‰©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode p)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">null</span> || p.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p.val == p.next.val) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">x</span> <span class="operator">=</span> p.next.next;</span><br><span class="line">        <span class="keyword">while</span> (x != <span class="literal">null</span> &amp;&amp; x.val == p.val) &#123;</span><br><span class="line">            x = x.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> deleteDuplicates(x);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        p.next = deleteDuplicates(p.next);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•2</strong></p><p>p1 æ˜¯å¾…åˆ é™¤çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯æ¬¡å¾ªç¯å¯¹æ¯” p2ã€p3 çš„å€¼</p><ul><li><p>å¦‚æœ p2 ä¸ p3 çš„å€¼é‡å¤ï¼Œé‚£ä¹ˆ p3 ç»§ç»­åç§»ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ p2 ä¸é‡å¤çš„èŠ‚ç‚¹ï¼Œp1 æŒ‡å‘ p3 å®Œæˆåˆ é™¤</p></li><li><p>å¦‚æœ p2 ä¸ p3 çš„å€¼ä¸é‡å¤ï¼Œp1ï¼Œp2ï¼Œp3 å‘åå¹³ç§»ä¸€ä½ï¼Œç»§ç»­ä¸Šé¢çš„æ“ä½œ</p></li><li><p>p2 æˆ– p3 ä¸º null é€€å‡ºå¾ªç¯</p><ul><li>p2 ä¸º null çš„æƒ…å†µï¼Œæ¯”å¦‚é“¾è¡¨ä¸º 1 1 1 null</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">p1 p2 p3</span><br><span class="line">s, 1, 1, 1, 2, 3, null</span><br><span class="line"></span><br><span class="line">p1 p2    p3</span><br><span class="line">s, 1, 1, 1, 2, 3, null</span><br><span class="line"></span><br><span class="line">p1 p2       p3</span><br><span class="line">s, 1, 1, 1, 2, 3, null</span><br><span class="line"></span><br><span class="line">p1 p3</span><br><span class="line">s, 2, 3, null</span><br><span class="line"></span><br><span class="line">p1 p2 p3</span><br><span class="line">s, 2, 3, null</span><br><span class="line"></span><br><span class="line">   p1 p2 p3</span><br><span class="line">s, 2, 3, null</span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">deleteDuplicates</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, head);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> s;</span><br><span class="line">    ListNode p2;</span><br><span class="line">    ListNode p3;</span><br><span class="line">    <span class="keyword">while</span> ((p2 = p1.next) != <span class="literal">null</span> &amp;&amp; (p3 = p2.next) != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p2.val == p3.val) &#123;</span><br><span class="line">            <span class="keyword">while</span> ((p3 = p3.next) != <span class="literal">null</span> </span><br><span class="line">                   &amp;&amp; p3.val == p2.val) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">            p1.next = p3;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            p1 = p1.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E06-åˆå¹¶æœ‰åºé“¾è¡¨-Leetcode-21"><a href="#E06-åˆå¹¶æœ‰åºé“¾è¡¨-Leetcode-21" class="headerlink" title="E06. åˆå¹¶æœ‰åºé“¾è¡¨-Leetcode 21"></a>E06. åˆå¹¶æœ‰åºé“¾è¡¨-Leetcode 21</h4><p>ä¾‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šl1 = [1,2,4], l2 = [1,3,4]</span><br><span class="line">è¾“å‡ºï¼š[1,1,2,3,4,4]</span><br><span class="line">  </span><br><span class="line">è¾“å…¥ï¼šl1 = [], l2 = []</span><br><span class="line">è¾“å‡ºï¼š[]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šl1 = [], l2 = [0]</span><br><span class="line">è¾“å‡ºï¼š[0]</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•1</strong></p><ul><li>è°å°ï¼ŒæŠŠè°é“¾ç»™ pï¼Œp å’Œå°çš„éƒ½å‘åå¹³ç§»ä¸€ä½</li><li>å½“ p1ã€p2 æœ‰ä¸€ä¸ªä¸º nullï¼Œé€€å‡ºå¾ªç¯ï¼ŒæŠŠä¸ä¸º null çš„é“¾ç»™ p</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">p1</span><br><span class="line">1389null</span><br><span class="line"></span><br><span class="line">p2</span><br><span class="line">24null</span><br><span class="line"></span><br><span class="line">p</span><br><span class="line">snull</span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeTwoLists</span><span class="params">(ListNode p1, ListNode p2)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> s;</span><br><span class="line">    <span class="keyword">while</span> (p1 != <span class="literal">null</span> &amp;&amp; p2 != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p1.val &lt; p2.val) &#123;</span><br><span class="line">            p.next = p1;</span><br><span class="line">            p1 = p1.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            p.next = p2;</span><br><span class="line">            p2 = p2.next;</span><br><span class="line">        &#125;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p1 != <span class="literal">null</span>) &#123;</span><br><span class="line">        p.next = p1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p2 != <span class="literal">null</span>) &#123;</span><br><span class="line">        p.next = p2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥è‡ªè¡ŒéªŒè¯<strong>ä¾‹</strong>ä¸­åä¸¤ç§æƒ…å†µ</li></ul><p><strong>æ–¹æ³•2</strong></p><p>é€’å½’å‡½æ•°åº”è¯¥è¿”å›</p><ul><li>æ›´å°çš„é‚£ä¸ªé“¾è¡¨èŠ‚ç‚¹ï¼Œå¹¶æŠŠå®ƒå‰©ä½™èŠ‚ç‚¹ä¸å¦ä¸€ä¸ªé“¾è¡¨å†æ¬¡é€’å½’</li><li>è¿”å›ä¹‹å‰ï¼Œæ›´æ–°æ­¤èŠ‚ç‚¹çš„ next</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mergeTwoLists(p1=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">9</span>], p2=[<span class="number">2</span>,<span class="number">4</span>]) &#123;</span><br><span class="line">    <span class="number">1.</span>next=mergeTwoLists(p1=[<span class="number">3</span>,<span class="number">8</span>,<span class="number">9</span>], p2=[<span class="number">2</span>,<span class="number">4</span>]) &#123;</span><br><span class="line">        <span class="number">2.</span>next=mergeTwoLists(p1=[<span class="number">3</span>,<span class="number">8</span>,<span class="number">9</span>], p2=[<span class="number">4</span>]) &#123;        </span><br><span class="line">            <span class="number">3.</span>next=mergeTwoLists(p1=[<span class="number">8</span>,<span class="number">9</span>], p2=[<span class="number">4</span>]) &#123;</span><br><span class="line">                <span class="number">4.</span>next=mergeTwoLists(p1=[<span class="number">8</span>,<span class="number">9</span>], p2=<span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> [<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E07-åˆå¹¶å¤šä¸ªæœ‰åºé“¾è¡¨-Leetcode-23"><a href="#E07-åˆå¹¶å¤šä¸ªæœ‰åºé“¾è¡¨-Leetcode-23" class="headerlink" title="E07. åˆå¹¶å¤šä¸ªæœ‰åºé“¾è¡¨-Leetcode 23"></a>E07. åˆå¹¶å¤šä¸ªæœ‰åºé“¾è¡¨-Leetcode 23</h4><p>ä¾‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šlists = [[1,4,5],[1,3,4],[2,6]]</span><br><span class="line">è¾“å‡ºï¼š[1,1,2,3,4,4,5,6]</span><br><span class="line">è§£é‡Šï¼šé“¾è¡¨æ•°ç»„å¦‚ä¸‹ï¼š</span><br><span class="line">[</span><br><span class="line">  1-&gt;4-&gt;5,</span><br><span class="line">  1-&gt;3-&gt;4,</span><br><span class="line">  2-&gt;6</span><br><span class="line">]</span><br><span class="line">å°†å®ƒä»¬åˆå¹¶åˆ°ä¸€ä¸ªæœ‰åºé“¾è¡¨ä¸­å¾—åˆ°ã€‚</span><br><span class="line">1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•1</strong></p><p>é€’å½’</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeKLists</span><span class="params">(ListNode[] lists)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (lists.length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> split(lists, <span class="number">0</span>, lists.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">split</span><span class="params">(ListNode[] lists, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    System.out.println(i + <span class="string">&quot; &quot;</span> + j);</span><br><span class="line">    <span class="keyword">if</span> (j == i) &#123;</span><br><span class="line">        <span class="keyword">return</span> lists[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> mergeTwoLists(</span><br><span class="line">        split(lists, i, m),</span><br><span class="line">        split(lists, m + <span class="number">1</span>, j)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—æ±‚è§£ï¼Œè¿™ä¸ªæ”¾åœ¨åé¢è®²</p><h4 id="E08-æŸ¥æ‰¾é“¾è¡¨ä¸­é—´èŠ‚ç‚¹-Leetcode-876"><a href="#E08-æŸ¥æ‰¾é“¾è¡¨ä¸­é—´èŠ‚ç‚¹-Leetcode-876" class="headerlink" title="E08. æŸ¥æ‰¾é“¾è¡¨ä¸­é—´èŠ‚ç‚¹-Leetcode 876"></a>E08. æŸ¥æ‰¾é“¾è¡¨ä¸­é—´èŠ‚ç‚¹-Leetcode 876</h4><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š[1,2,3,4,5]</span><br><span class="line">è¾“å‡ºï¼šæ­¤åˆ—è¡¨ä¸­çš„ç»“ç‚¹ 3 (åºåˆ—åŒ–å½¢å¼ï¼š[3,4,5])</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼š[1,2,3,4,5,6]</span><br><span class="line">è¾“å‡ºï¼šæ­¤åˆ—è¡¨ä¸­çš„ç»“ç‚¹ 4 (åºåˆ—åŒ–å½¢å¼ï¼š[4,5,6])</span><br></pre></td></tr></table></figure><ul><li><strong>å¶æ•°</strong>èŠ‚ç‚¹æ—¶ï¼Œä¸­é—´ç‚¹æ˜¯é å³çš„é‚£ä¸ª</li></ul><p>è§£æ³•ï¼šå¿«æ…¢æŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆä¸€æ¬¡èµ°ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œå½“å¿«æŒ‡é’ˆåˆ°é“¾è¡¨ç»“å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆæ°å¥½èµ°åˆ°é“¾è¡¨çš„ä¸€åŠ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">middleNode</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> head;<span class="comment">// æ…¢æŒ‡é’ˆï¼Œä¸­é—´ç‚¹</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> head;<span class="comment">// å¿«æŒ‡é’ˆ</span></span><br><span class="line">    <span class="keyword">while</span> (p2 != <span class="literal">null</span> &amp;&amp; p2.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        p2 = p2.next;</span><br><span class="line">        p2 = p2.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E09-å›æ–‡é“¾è¡¨-Leetcode-234"><a href="#E09-å›æ–‡é“¾è¡¨-Leetcode-234" class="headerlink" title="E09. å›æ–‡é“¾è¡¨-Leetcode 234"></a>E09. å›æ–‡é“¾è¡¨-Leetcode 234</h4><p>æ‰€è°“å›æ–‡æŒ‡æ­£ç€è¯»ã€åç€è¯»ï¼Œç»“æœä¸€æ ·ï¼Œä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[1,2,2,1]</span><br><span class="line">[1,2,3,2,1]</span><br></pre></td></tr></table></figure><p>å®ƒä»¬éƒ½æ˜¯å›æ–‡é“¾è¡¨ï¼Œä¸æ˜¯å›æ–‡çš„ä¾‹å­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1,2,3,1]  --åè¿‡æ¥--&gt;  [1,3,2,1]</span><br></pre></td></tr></table></figure><p>è§£æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    æ­¥éª¤1. æ‰¾ä¸­é—´ç‚¹</span></span><br><span class="line"><span class="comment">    æ­¥éª¤2. ä¸­é—´ç‚¹ååŠä¸ªé“¾è¡¨åè½¬</span></span><br><span class="line"><span class="comment">    æ­¥éª¤3. åè½¬åé“¾è¡¨ä¸åŸé“¾è¡¨é€ä¸€æ¯”è¾ƒ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPalindrome</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">middle</span> <span class="operator">=</span> middle(head);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">newHead</span> <span class="operator">=</span> reverse(middle);</span><br><span class="line">    <span class="keyword">while</span> (newHead != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (newHead.val != head.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        newHead = newHead.next;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> ListNode <span class="title function_">reverse</span><span class="params">(ListNode o1)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (o1 != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">o2</span> <span class="operator">=</span> o1.next;</span><br><span class="line">        o1.next = n1;</span><br><span class="line">        n1 = o1;</span><br><span class="line">        o1 = o2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> ListNode <span class="title function_">middle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> head; <span class="comment">// æ…¢</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> head; <span class="comment">// å¿«</span></span><br><span class="line">    <span class="keyword">while</span> (p2 != <span class="literal">null</span> &amp;&amp; p2.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        p2 = p2.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–åè§£æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPalindrome</span><span class="params">(ListNode h1)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (h1 == <span class="literal">null</span> || h1.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> h1; <span class="comment">// æ…¢æŒ‡é’ˆï¼Œä¸­é—´ç‚¹</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> h1; <span class="comment">// å¿«æŒ‡é’ˆ</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">// æ–°å¤´</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">o1</span> <span class="operator">=</span> h1;<span class="comment">// æ—§å¤´</span></span><br><span class="line">    <span class="comment">// å¿«æ…¢æŒ‡é’ˆæ‰¾ä¸­é—´ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (p2 != <span class="literal">null</span> &amp;&amp; p2.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        p2 = p2.next.next;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åè½¬å‰åŠéƒ¨åˆ†</span></span><br><span class="line">        o1.next = n1;</span><br><span class="line">        n1 = o1;</span><br><span class="line">        o1 = p1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p2 != <span class="literal">null</span>) &#123; <span class="comment">// èŠ‚ç‚¹æ•°ä¸ºå¥‡æ•°</span></span><br><span class="line">        p1 = p1.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŒæ­¥æ¯”è¾ƒæ–°å¤´å’ŒååŠéƒ¨åˆ†</span></span><br><span class="line">    <span class="keyword">while</span> (n1 != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n1.val != p1.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">        n1 = n1.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E10-ç¯å½¢é“¾è¡¨-Leetcode-141"><a href="#E10-ç¯å½¢é“¾è¡¨-Leetcode-141" class="headerlink" title="E10. ç¯å½¢é“¾è¡¨-Leetcode 141"></a>E10. ç¯å½¢é“¾è¡¨-Leetcode 141</h4><p>æœ¬é¢˜ä»¥åŠä¸‹é¢˜ï¼Œå®é™…æ˜¯ Floydâ€™s Tortoise and Hare Algorithm ï¼ˆFloyd é¾Ÿå…”èµ›è·‘ç®—æ³•ï¼‰[^15]</p><blockquote><p>é™¤äº† Floyd åˆ¤ç¯ç®—æ³•å¤–ï¼Œè¿˜æœ‰å…¶å®ƒçš„åˆ¤ç¯ç®—æ³•ï¼Œè¯¦è§ <a href="https://en.wikipedia.org/wiki/Cycle_detection">https://en.wikipedia.org/wiki/Cycle_detection</a></p></blockquote><p><img src="https://i0.hdslb.com/bfs/article/5a52bdc20d2df3964453d74a8d2a5a29645325325.png" alt="image-20240903140115464"></p><p>å¦‚æœé“¾è¡¨ä¸Šå­˜åœ¨ç¯ï¼Œé‚£ä¹ˆåœ¨ç¯ä¸Šä»¥ä¸åŒé€Ÿåº¦å‰è¿›çš„ä¸¤ä¸ªæŒ‡é’ˆå¿…å®šä¼šåœ¨æŸä¸ªæ—¶åˆ»ç›¸é‡ã€‚ç®—æ³•åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ</p><p>é˜¶æ®µ1</p><ul><li>é¾Ÿä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œå…”å­ä¸€æ¬¡èµ°ä¸¤æ­¥</li><li>å½“å…”å­èƒ½èµ°åˆ°ç»ˆç‚¹æ—¶ï¼Œä¸å­˜åœ¨ç¯</li><li>å½“å…”å­èƒ½è¿½ä¸Šé¾Ÿæ—¶ï¼Œå¯ä»¥åˆ¤æ–­å­˜åœ¨ç¯</li></ul><p>é˜¶æ®µ2</p><ul><li>ä»å®ƒä»¬ç¬¬ä¸€æ¬¡ç›¸é‡å¼€å§‹ï¼Œé¾Ÿå›åˆ°èµ·ç‚¹ï¼Œå…”å­ä¿æŒåŸä½ä¸å˜</li><li>é¾Ÿå’Œå…”å­ä¸€æ¬¡éƒ½èµ°ä¸€æ­¥</li><li>å½“å†æ¬¡ç›¸é‡æ—¶ï¼Œåœ°ç‚¹å°±æ˜¯ç¯çš„å…¥å£</li></ul><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li><p>è®¾èµ·ç‚¹åˆ°å…¥å£èµ° a æ­¥ï¼ˆæœ¬ä¾‹æ˜¯ 7ï¼‰ï¼Œç»•ç¯ä¸€åœˆé•¿åº¦ä¸º bï¼ˆæœ¬ä¾‹æ˜¯ 5ï¼‰ï¼Œ</p></li><li><p>é‚£ä¹ˆ<strong>ä»èµ·ç‚¹å¼€å§‹ï¼Œèµ° a + ç»•ç¯ n åœˆï¼Œéƒ½èƒ½æ‰¾åˆ°ç¯å…¥å£</strong></p></li><li><p>ç¬¬ä¸€æ¬¡ç›¸é‡æ—¶</p><ul><li>å…”èµ°äº† a + ç»•ç¯ n åœˆï¼ˆæœ¬ä¾‹ 2 åœˆï¼‰ + kï¼Œk æ˜¯å®ƒä»¬ç›¸é‡è·ç¯å…¥å£ä½ç½®ï¼ˆæœ¬ä¾‹ 3ï¼Œä¸é‡è¦ï¼‰</li><li>é¾Ÿèµ°äº† a + ç»•ç¯ n åœˆï¼ˆæœ¬ä¾‹ 0 åœˆï¼‰ + kï¼Œå½“ç„¶å®ƒç»•çš„åœˆæ•°æ¯”å…”å°‘</li><li>å…”èµ°çš„è·ç¦»æ˜¯é¾Ÿçš„ä¸¤å€ï¼Œæ‰€ä»¥<strong>é¾Ÿèµ°çš„</strong> &#x3D; å…”èµ°çš„ - é¾Ÿèµ°çš„ &#x3D; <strong>ç»•ç¯ n åœˆ</strong></li></ul></li><li><p>è€Œå‰é¢åˆ†æè¿‡ï¼Œå¦‚æœèµ° a + ç»•ç¯ n åœˆï¼Œéƒ½èƒ½æ‰¾åˆ°ç¯å…¥å£ï¼Œå› æ­¤ä»ç›¸é‡ç‚¹å¼€å§‹ï¼Œå†èµ° a æ­¥ï¼Œå°±æ˜¯ç¯å…¥å£</p></li></ul><p>é˜¶æ®µ1 å‚è€ƒä»£ç ï¼ˆåˆ¤æ–­æ˜¯å¦æœ‰ç¯ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">h</span> <span class="operator">=</span> head; <span class="comment">// å…”</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">t</span> <span class="operator">=</span> head; <span class="comment">// é¾Ÿ</span></span><br><span class="line">    <span class="keyword">while</span> (h != <span class="literal">null</span> &amp;&amp; h.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        t = t.next;</span><br><span class="line">        h = h.next.next;</span><br><span class="line">        <span class="keyword">if</span>(h == t)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E11-ç¯å½¢é“¾è¡¨-Leetcode-142"><a href="#E11-ç¯å½¢é“¾è¡¨-Leetcode-142" class="headerlink" title="E11. ç¯å½¢é“¾è¡¨-Leetcode 142"></a>E11. ç¯å½¢é“¾è¡¨-Leetcode 142</h4><p>é˜¶æ®µ2 å‚è€ƒä»£ç ï¼ˆæ‰¾åˆ°ç¯å…¥å£ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">detectCycle</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">t</span> <span class="operator">=</span> head; <span class="comment">// é¾Ÿ</span></span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">h</span> <span class="operator">=</span> head; <span class="comment">// å…”</span></span><br><span class="line">    <span class="keyword">while</span> (h != <span class="literal">null</span> &amp;&amp; h.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        t = t.next;</span><br><span class="line">        h = h.next.next;</span><br><span class="line">        <span class="keyword">if</span> (h == t) &#123;</span><br><span class="line">            t = head;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (h == t) &#123;</span><br><span class="line">                    <span class="keyword">return</span> h;</span><br><span class="line">                &#125;</span><br><span class="line">                h = h.next;</span><br><span class="line">                t = t.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿˜æœ‰ä¸€é“æ‰©å±•é¢˜ç›®ï¼Œä¹Ÿå¯ä»¥ç”¨åˆ¤ç¯ç®—æ³•æ€æƒ³æ¥è§£ï¼šå°±æ˜¯ 287 é¢˜ï¼Œå¯»æ‰¾é‡å¤æ•°</li></ul><h4 id="Ex1-åˆ é™¤èŠ‚ç‚¹-Leetcode-237"><a href="#Ex1-åˆ é™¤èŠ‚ç‚¹-Leetcode-237" class="headerlink" title="Ex1. åˆ é™¤èŠ‚ç‚¹-Leetcode 237"></a>Ex1. åˆ é™¤èŠ‚ç‚¹-Leetcode 237</h4><p>è¿™é“é¢˜ç›®æ¯”è¾ƒç®€å•ï¼Œç•™ç»™å¤§å®¶è‡ªå·±ç»ƒä¹ </p><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [4,5,1,9], node = 5</span><br><span class="line">è¾“å‡ºï¼š[4,1,9]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šhead = [4,5,1,9], node = 1</span><br><span class="line">è¾“å‡ºï¼š[4,5,9]</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¢«åˆ é™¤çš„èŠ‚ç‚¹<strong>ä¸æ˜¯</strong>æœ«å°¾èŠ‚ç‚¹</p><p><strong>å‚è€ƒç­”æ¡ˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Ex1Leetcode237</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> node å¾…åˆ é™¤èŠ‚ç‚¹, é¢˜ç›®å·²è¯´æ˜è‚¯å®šä¸æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteNode</span><span class="params">(ListNode node)</span> &#123;</span><br><span class="line">        node.val = node.next.val;<span class="comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å€¼èµ‹å€¼ç»™å¾…&quot;åˆ é™¤&quot;èŠ‚ç‚¹</span></span><br><span class="line">        node.next = node.next.next;<span class="comment">// æŠŠä¸‹ä¸€ä¸ªèŠ‚ç‚¹åˆ é™¤</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">o5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">5</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">o4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">4</span>, o5);</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">o3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">3</span>, o4);</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">o2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">2</span>, o3);</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">o1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">1</span>, o2);</span><br><span class="line">        System.out.println(o1);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">E0xLeetcode237</span>().deleteNode(o3);</span><br><span class="line">        System.out.println(o1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[1,2,3,4,5]</span><br><span class="line">[1,2,4,5]</span><br></pre></td></tr></table></figure><h4 id="Ex2-å…±å°¾é“¾è¡¨-Leetcode-160"><a href="#Ex2-å…±å°¾é“¾è¡¨-Leetcode-160" class="headerlink" title="Ex2. å…±å°¾é“¾è¡¨-Leetcode 160"></a>Ex2. å…±å°¾é“¾è¡¨-Leetcode 160</h4><p>åŸé¢˜å«åš<strong>ç›¸äº¤</strong>é“¾è¡¨ï¼Œä¸ªäººè§‰å¾—ç”¨<strong>å…±å°¾</strong>é“¾è¡¨æ›´å½¢è±¡äº›ï¼Œæ­¤é¢˜æ›´åƒæ˜¯ä¸€é“è„‘ç­‹æ€¥è½¬å¼¯ï¼Œç•™ç»™å¤§å®¶ç»ƒä¹ </p><p>ä¾‹å¦‚ï¼Œä¸‹å›¾çš„ä¸¤ä¸ªé“¾è¡¨ [1, 2, 4, 5] ä¸ [3, 4, 5] å®ƒä»¬ä¸­ [4, 5] æ˜¯ç›¸åŒçš„ï¼Œæ­¤æ—¶åº”è¿”å›èŠ‚ç‚¹ 4</p><p><img src="https://i0.hdslb.com/bfs/article/e24decceee75a4dcb84ede034e543df4645325325.png" alt="image-20221228081715799">â€‹</p><p>éå…±å°¾çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ­¤æ—¶è¿”å› null</p><p><img src="https://i0.hdslb.com/bfs/article/c9b1dab93bfe1fef03a369e683cb42fc645325325.png" alt="image-20221228082002730">â€‹</p><p>æ€è·¯ï¼Œç§°ä¸¤ä¸ªé“¾è¡¨ä¸º a&#x3D;[1, 2, 4, 5]ï¼Œb&#x3D;[3, 4, 5]ï¼Œå›¾ä¸­ç”¨ N ä»£è¡¨ null</p><ol><li>éå† aï¼Œé‡åˆ° null æ—¶æ”¹é“éå† b</li><li>ä¸æ­¤åŒæ—¶ï¼Œéå† bï¼Œé‡åˆ° null æ—¶æ”¹é“éå† a</li><li>åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå¦‚æœ<strong>é‡åˆ°ç›¸åŒ</strong>çš„èŠ‚ç‚¹ï¼Œå³ä¸ºæ‰¾å¯»ç›®æ ‡ï¼Œè¿”å›å³å¯ï¼Œå¦‚ä¸‹å›¾ä¸­çš„ç¬¬äºŒæ¬¡å‡ºç°çš„ 4</li><li>ç›¸åŒèŠ‚ç‚¹åº”è¯¥æ¯”è¾ƒå…¶<strong>å¼•ç”¨å€¼</strong>ï¼Œå›¾ä¸­æ•°å­—åªæ˜¯ä¸ºäº†ä¾¿äºåŒºåˆ†</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1245N345N</span><br><span class="line">345N1245N</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸¤ä¸ªé“¾è¡¨é•¿åº¦ç›¸åŒï¼Œåˆ™å¯ä»¥æ›´æ—©æ‰¾åˆ°ç›®æ ‡ï¼Œä¾‹å¦‚ a&#x3D;[1, 4, 5]ï¼Œb&#x3D;[3, 4, 5]ï¼Œç¬¬ä¸€æ¬¡å‡ºç° 4 æ—¶ï¼Œå³å¯è¿”å›</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">145N345N</span><br><span class="line">345N145N</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯éå…±å°¾çš„æƒ…å†µï¼Œå¦‚ a&#x3D;[1, 2, 4]ï¼Œb&#x3D;[3, 5]ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå”¯ä¸€ç›¸ç­‰çš„æƒ…å†µï¼Œæ˜¯éå†åˆ°æœ€åé‚£ä¸ª N æ­¤æ—¶é€€å‡ºå¾ªç¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">124N35N</span><br><span class="line">35N124N</span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">getIntersectionNode</span><span class="params">(ListNode a, ListNode b)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p1</span> <span class="operator">=</span> a;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p2</span> <span class="operator">=</span> b;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p1 == p2) &#123;</span><br><span class="line">            <span class="keyword">return</span> p1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p1 == <span class="literal">null</span>) &#123;</span><br><span class="line">            p1 = b;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            p1 = p1.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p2 == <span class="literal">null</span>) &#123;</span><br><span class="line">            p2 = a;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            p2 = p2.next;</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-3-é€’å½’"><a href="#2-3-é€’å½’" class="headerlink" title="2.3 é€’å½’"></a>2.3 é€’å½’</h2><h3 id="1-æ¦‚è¿°-2"><a href="#1-æ¦‚è¿°-2" class="headerlink" title="1) æ¦‚è¿°"></a>1) æ¦‚è¿°</h3><p><strong>å®šä¹‰</strong></p><p>è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé€’å½’æ˜¯ä¸€ç§è§£å†³è®¡ç®—é—®é¢˜çš„æ–¹æ³•ï¼Œå…¶ä¸­è§£å†³æ–¹æ¡ˆå–å†³äºåŒä¸€ç±»é—®é¢˜çš„æ›´å°å­é›†</p><blockquote><p>In computer science, <strong>recursion</strong> is a method of solving a computational problem where the solution depends on solutions to smaller instances of the same problem.</p></blockquote><p>æ¯”å¦‚å•é“¾è¡¨é€’å½’éå†çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">f</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">&quot;before:&quot;</span> + node.value)</span><br><span class="line">    f(node.next);</span><br><span class="line">    println(<span class="string">&quot;after:&quot;</span> + node.value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ol><li>è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œå¦‚æœè¯´æ¯ä¸ªå‡½æ•°å¯¹åº”ç€ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œè‡ªå·±è°ƒç”¨è‡ªå·±æ„å‘³ç€è§£å†³æ–¹æ¡ˆæ˜¯ä¸€æ ·çš„ï¼ˆæœ‰è§„å¾‹çš„ï¼‰</li><li>æ¯æ¬¡è°ƒç”¨ï¼Œå‡½æ•°å¤„ç†çš„æ•°æ®ä¼šè¾ƒä¸Šæ¬¡ç¼©å‡ï¼ˆå­é›†ï¼‰ï¼Œè€Œä¸”æœ€åä¼šç¼©å‡è‡³æ— éœ€ç»§ç»­é€’å½’</li><li>å†…å±‚å‡½æ•°è°ƒç”¨ï¼ˆå­é›†å¤„ç†ï¼‰å®Œæˆï¼Œå¤–å±‚å‡½æ•°æ‰èƒ½ç®—è°ƒç”¨å®Œæˆ</li></ol><p><strong>åŸç†</strong></p><p>å‡è®¾é“¾è¡¨ä¸­æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼Œvalue åˆ†åˆ«ä¸º 1ï¼Œ2ï¼Œ3ï¼Œä»¥ä¸Šä»£ç çš„æ‰§è¡Œæµç¨‹å°±ç±»ä¼¼äºä¸‹é¢çš„<strong>ä¼ªç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 -&gt; 2 -&gt; 3 -&gt; null  f(1)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">f</span><span class="params">(Node node = <span class="number">1</span>)</span> &#123;</span><br><span class="line">    println(<span class="string">&quot;before:&quot;</span> + node.value) <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">f</span><span class="params">(Node node = <span class="number">2</span>)</span> &#123;</span><br><span class="line">        println(<span class="string">&quot;before:&quot;</span> + node.value) <span class="comment">// 2</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">f</span><span class="params">(Node node = <span class="number">3</span>)</span> &#123;</span><br><span class="line">            println(<span class="string">&quot;before:&quot;</span> + node.value) <span class="comment">// 3</span></span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">f</span><span class="params">(Node node = <span class="literal">null</span>)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(node == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            println(<span class="string">&quot;after:&quot;</span> + node.value) <span class="comment">// 3</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(<span class="string">&quot;after:&quot;</span> + node.value) <span class="comment">// 2</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">&quot;after:&quot;</span> + node.value) <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€è·¯</strong></p><ol><li>ç¡®å®šèƒ½å¦ä½¿ç”¨é€’å½’æ±‚è§£</li><li>æ¨å¯¼å‡ºé€’æ¨å…³ç³»ï¼Œå³çˆ¶é—®é¢˜ä¸å­é—®é¢˜çš„å…³ç³»ï¼Œä»¥åŠé€’å½’çš„ç»“æŸæ¡ä»¶</li></ol><p>ä¾‹å¦‚ä¹‹å‰éå†é“¾è¡¨çš„é€’æ¨å…³ç³»ä¸º</p><p>$$<br>f(n) &#x3D;<br>\begin{cases}<br>åœæ­¢&amp; n &#x3D; null \<br>f(n.next) &amp; n \neq null<br>\end{cases}<br>$$</p><ul><li>æ·±å…¥åˆ°æœ€é‡Œå±‚å«åš<strong>é€’</strong></li><li>ä»æœ€é‡Œå±‚å‡ºæ¥å«åš<strong>å½’</strong></li><li>åœ¨<strong>é€’</strong>çš„è¿‡ç¨‹ä¸­ï¼Œå¤–å±‚å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ï¼ˆä»¥åŠæ–¹æ³•å‚æ•°ï¼‰å¹¶æœªæ¶ˆå¤±ï¼Œ<strong>å½’</strong>çš„æ—¶å€™è¿˜å¯ä»¥ç”¨åˆ°</li></ul><h3 id="2-å•è·¯é€’å½’-Single-Recursion"><a href="#2-å•è·¯é€’å½’-Single-Recursion" class="headerlink" title="2) å•è·¯é€’å½’ Single Recursion"></a>2) å•è·¯é€’å½’ Single Recursion</h3><h4 id="E01-é˜¶ä¹˜"><a href="#E01-é˜¶ä¹˜" class="headerlink" title="E01. é˜¶ä¹˜"></a>E01. é˜¶ä¹˜</h4><p>ç”¨é€’å½’æ–¹æ³•æ±‚é˜¶ä¹˜</p><ul><li>é˜¶ä¹˜çš„å®šä¹‰ $n!&#x3D; 1â‹…2â‹…3â‹¯(n-2)â‹…(n-1)â‹…n$ï¼Œå…¶ä¸­ $n$ ä¸ºè‡ªç„¶æ•°ï¼Œå½“ç„¶ $0! &#x3D; 1$</li><li>é€’æ¨å…³ç³»</li></ul><p>$$<br>f(n) &#x3D;<br>\begin{cases}<br>1 &amp; n &#x3D; 1\<br>n * f(n-1) &amp; n &gt; 1<br>\end{cases}<br>$$</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n * f(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‹†è§£<strong>ä¼ªç </strong>å¦‚ä¸‹ï¼Œå‡è®¾ n åˆå§‹å€¼ä¸º 3</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f(<span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">3</span>) &#123; <span class="comment">// è§£å†³ä¸äº†,é€’</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span> * f(<span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">2</span>) &#123; <span class="comment">// è§£å†³ä¸äº†,ç»§ç»­é€’</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * f(<span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (n == <span class="number">1</span>) &#123; <span class="comment">// å¯ä»¥è§£å†³, å¼€å§‹å½’</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E02-åå‘æ‰“å°å­—ç¬¦ä¸²"><a href="#E02-åå‘æ‰“å°å­—ç¬¦ä¸²" class="headerlink" title="E02. åå‘æ‰“å°å­—ç¬¦ä¸²"></a>E02. åå‘æ‰“å°å­—ç¬¦ä¸²</h4><p>ç”¨é€’å½’åå‘æ‰“å°å­—ç¬¦ä¸²ï¼Œn ä¸ºå­—ç¬¦åœ¨æ•´ä¸ªå­—ç¬¦ä¸² str ä¸­çš„ç´¢å¼•ä½ç½®</p><ul><li><strong>é€’</strong>ï¼šn ä» 0 å¼€å§‹ï¼Œæ¯æ¬¡ n + 1ï¼Œä¸€ç›´é€’åˆ° n &#x3D;&#x3D; str.length() - 1</li><li><strong>å½’</strong>ï¼šä» n &#x3D;&#x3D; str.length() å¼€å§‹å½’ï¼Œä»å½’æ‰“å°ï¼Œè‡ªç„¶æ˜¯é€†åºçš„</li></ul><p>é€’æ¨å…³ç³»</p><p>$$<br>f(n) &#x3D;<br>\begin{cases}<br>åœæ­¢ &amp; n &#x3D; str.length() \<br>f(n+1) &amp; 0 \leq n \leq str.length() - 1<br>\end{cases}<br>$$</p><p>ä»£ç ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reversePrint</span><span class="params">(String str, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index == str.length()) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    reversePrint(str, index + <span class="number">1</span>);</span><br><span class="line">    System.out.println(str.charAt(index));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‹†è§£<strong>ä¼ªç </strong>å¦‚ä¸‹ï¼Œå‡è®¾å­—ç¬¦ä¸²ä¸º â€œabcâ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">reversePrint</span><span class="params">(String str, <span class="type">int</span> index = <span class="number">0</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">reversePrint</span><span class="params">(String str, <span class="type">int</span> index = <span class="number">1</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">reversePrint</span><span class="params">(String str, <span class="type">int</span> index = <span class="number">2</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">reversePrint</span><span class="params">(String str, <span class="type">int</span> index = <span class="number">3</span>)</span> &#123; </span><br><span class="line">                <span class="keyword">if</span> (index == str.length()) &#123;</span><br><span class="line">                    <span class="keyword">return</span>; <span class="comment">// å¼€å§‹å½’</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(str.charAt(index)); <span class="comment">// æ‰“å° c</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(str.charAt(index)); <span class="comment">// æ‰“å° b</span></span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(str.charAt(index)); <span class="comment">// æ‰“å° a</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E03-äºŒåˆ†æŸ¥æ‰¾ï¼ˆå•è·¯é€’å½’ï¼‰"><a href="#E03-äºŒåˆ†æŸ¥æ‰¾ï¼ˆå•è·¯é€’å½’ï¼‰" class="headerlink" title="E03. äºŒåˆ†æŸ¥æ‰¾ï¼ˆå•è·¯é€’å½’ï¼‰"></a>E03. äºŒåˆ†æŸ¥æ‰¾ï¼ˆå•è·¯é€’å½’ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> recursion(a, target, <span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">recursion</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; j) &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (target &lt; a[m]) &#123;</span><br><span class="line">        <span class="keyword">return</span> recursion(a, target, i, m - <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123;</span><br><span class="line">        <span class="keyword">return</span> recursion(a, target, m + <span class="number">1</span>, j);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> m;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E04-å†’æ³¡æ’åºï¼ˆå•è·¯é€’å½’ï¼‰"><a href="#E04-å†’æ³¡æ’åºï¼ˆå•è·¯é€’å½’ï¼‰" class="headerlink" title="E04. å†’æ³¡æ’åºï¼ˆå•è·¯é€’å½’ï¼‰"></a>E04. å†’æ³¡æ’åºï¼ˆå•è·¯é€’å½’ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] a = &#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">7</span>&#125;;</span><br><span class="line">    bubble(a, <span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">    System.out.println(Arrays.toString(a));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bubble</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(low == high) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> low;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> low; i &lt; high; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] &gt; a[i + <span class="number">1</span>]) &#123;</span><br><span class="line">            swap(a, i, i + <span class="number">1</span>);</span><br><span class="line">            j = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    bubble(a, low, j);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[i];</span><br><span class="line">    a[i] = a[j];</span><br><span class="line">    a[j] = t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>low ä¸ high ä¸ºæœªæ’åºèŒƒå›´</p></li><li><p>j è¡¨ç¤ºçš„æ˜¯æœªæ’åºçš„è¾¹ç•Œï¼Œä¸‹ä¸€æ¬¡é€’å½’æ—¶çš„ high</p><ul><li>å‘ç”Ÿäº¤æ¢ï¼Œæ„å‘³ç€æœ‰æ— åºæƒ…å†µ</li><li>æœ€åä¸€æ¬¡äº¤æ¢ï¼ˆä»¥åæ²¡æœ‰æ— åºï¼‰æ—¶ï¼Œå·¦ä¾§ i ä»æ˜¯æ— åºï¼Œå³ä¾§ i+1 å·²ç„¶æœ‰åº</li></ul></li><li><p>è§†é¢‘ä¸­è®²è§£çš„æ˜¯åªè€ƒè™‘ high è¾¹ç•Œçš„æƒ…å†µï¼Œå‚è€ƒä»¥ä¸Šä»£ç ï¼Œç†è§£åœ¨ low .. high èŒƒå›´å†…çš„å¤„ç†æ–¹æ³•</p></li></ul><h4 id="E05-æ’å…¥æ’åºï¼ˆå•è·¯é€’å½’ï¼‰"><a href="#E05-æ’å…¥æ’åºï¼ˆå•è·¯é€’å½’ï¼‰" class="headerlink" title="E05. æ’å…¥æ’åºï¼ˆå•è·¯é€’å½’ï¼‰"></a>E05. æ’å…¥æ’åºï¼ˆå•è·¯é€’å½’ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] a = &#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>&#125;;</span><br><span class="line">    insertion(a, <span class="number">1</span>, a.length - <span class="number">1</span>);</span><br><span class="line">    System.out.println(Arrays.toString(a));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">insertion</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (low &gt; high) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> low - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> a[low];</span><br><span class="line">    <span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; a[i] &gt; i) &#123;</span><br><span class="line">        a[i + <span class="number">1</span>] = a[i];</span><br><span class="line">        i--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(i + <span class="number">1</span> != low) &#123;</span><br><span class="line">        a[i + <span class="number">1</span>] = t;</span><br><span class="line">    &#125;  </span><br><span class="line">    insertion(a, low + <span class="number">1</span>, high);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å·²æ’åºåŒºåŸŸï¼š[0 .. i .. low-1]</li><li>æœªæ’åºåŒºåŸŸï¼š[low .. high]</li><li>è§†é¢‘ä¸­è®²è§£çš„æ˜¯åªè€ƒè™‘ low è¾¹ç•Œçš„æƒ…å†µï¼Œå‚è€ƒä»¥ä¸Šä»£ç ï¼Œç†è§£ low-1 ..  high èŒƒå›´å†…çš„å¤„ç†æ–¹æ³•</li><li>æ‰©å±•ï¼šåˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾ leftmost ç‰ˆæœ¬ï¼Œæ”¹è¿›å¯»æ‰¾æ’å…¥ä½ç½®çš„ä»£ç </li></ul><h4 id="E06-çº¦ç‘Ÿå¤«é—®é¢˜-16-ï¼ˆå•è·¯é€’å½’ï¼‰"><a href="#E06-çº¦ç‘Ÿå¤«é—®é¢˜-16-ï¼ˆå•è·¯é€’å½’ï¼‰" class="headerlink" title="E06. çº¦ç‘Ÿå¤«é—®é¢˜[^16]ï¼ˆå•è·¯é€’å½’ï¼‰"></a>E06. çº¦ç‘Ÿå¤«é—®é¢˜[^16]ï¼ˆå•è·¯é€’å½’ï¼‰</h4><p>$n$ ä¸ªäººæ’æˆåœ†åœˆï¼Œä»å¤´å¼€å§‹æŠ¥æ•°ï¼Œæ¯æ¬¡æ•°åˆ°ç¬¬ $m$ ä¸ªäººï¼ˆ$m$ ä» $1$ å¼€å§‹ï¼‰æ€ä¹‹ï¼Œç»§ç»­ä»ä¸‹ä¸€ä¸ªäººé‡å¤ä»¥ä¸Šè¿‡ç¨‹ï¼Œæ±‚æœ€åæ´»ä¸‹æ¥çš„äººæ˜¯è°ï¼Ÿ</p><p><strong>æ–¹æ³•1</strong></p><p>æ ¹æ®æœ€åçš„å­˜æ´»è€… a å€’æ¨å‡ºå®ƒåœ¨ä¸Šä¸€è½®çš„ç´¢å¼•å·</p><table><thead><tr><th>f(n,m)</th><th>æœ¬è½®ç´¢å¼•</th><th>ä¸ºäº†è®© a æ˜¯è¿™ä¸ªç´¢å¼•ï¼Œä¸Šä¸€è½®åº”å½“è¿™æ ·æ’</th><th>è§„å¾‹</th></tr></thead><tbody><tr><td>f(1,3)</td><td>0</td><td>x x x a</td><td>(0 + 3) % 2</td></tr><tr><td>f(2,3)</td><td>1</td><td>x x x 0 a</td><td>(1 + 3) % 3</td></tr><tr><td>f(3,3)</td><td>1</td><td>x x x 0 a</td><td>(1 + 3) % 4</td></tr><tr><td>f(4,3)</td><td>0</td><td>x x x a</td><td>(0 + 3) % 5</td></tr><tr><td>f(5,3)</td><td>3</td><td>x x x 0 1 2 a</td><td>(3 + 3) % 6</td></tr><tr><td>f(6,3)</td><td>0</td><td>x x x a</td><td></td></tr></tbody></table><p><strong>æ–¹æ³•2</strong></p><p>è®¾ n ä¸ºæ€»äººæ•°ï¼Œm ä¸ºæŠ¥æ•°æ¬¡æ•°ï¼Œè§£è¿”å›çš„æ˜¯è¿™äº›äººçš„ç´¢å¼•ï¼Œä»0å¼€å§‹</p><table><thead><tr><th>f(n, m)</th><th>è§£</th><th>è§„å¾‹</th></tr></thead><tbody><tr><td>f(1, 3)</td><td>0</td><td></td></tr><tr><td>f(2, 3)</td><td>0 1 &#x3D;&gt; 1</td><td>3%2&#x3D;1</td></tr><tr><td>f(3, 3)</td><td>0 1 2 &#x3D;&gt; 0 1</td><td>3%3&#x3D;0</td></tr><tr><td>f(4, 3)</td><td>0 1 2 3 &#x3D;&gt; 3 0 1</td><td>3%4&#x3D;3</td></tr><tr><td>f(5, 3)</td><td>0 1 2 3 4  &#x3D;&gt; 3 4 0 1</td><td>3%5&#x3D;3</td></tr><tr><td>f(6, 3)</td><td>0 1 2 3 4 5 &#x3D;&gt; 3 4 5 0 1</td><td>3%6&#x3D;3</td></tr></tbody></table><p><strong>ä¸€. æ‰¾å‡ºç­‰ä»·å‡½æ•°</strong></p><p>è§„å¾‹ï¼šä¸‹æ¬¡æŠ¥æ•°çš„èµ·ç‚¹ä¸º $k &#x3D; m % n$</p><ul><li><p>é¦–æ¬¡å‡ºåˆ—äººçš„åºå·æ˜¯ $k-1$ï¼Œå‰©ä¸‹çš„çš„ $n-1$ ä¸ªäººé‡æ–°ç»„æˆçº¦ç‘Ÿå¤«ç¯</p></li><li><p>ä¸‹æ¬¡ä» $k$ å¼€å§‹æ•°ï¼Œåºå·å¦‚ä¸‹</p><ul><li>$k,\ k+1, \ â€¦\ ,\ 0,\ 1,\ k-2$ï¼Œå¦‚ä¸Šä¾‹ä¸­ $3\ 4\ 5\ 0\ 1$</li></ul></li></ul><p>è¿™ä¸ªå‡½æ•°ç§°ä¹‹ä¸º $g(n-1,m)$ï¼Œå®ƒçš„æœ€ç»ˆç»“æœä¸ $f(n,m)$ æ˜¯ç›¸åŒçš„ã€‚</p><p><strong>äºŒ. æ‰¾åˆ°æ˜ å°„å‡½æ•°</strong></p><p>ç°åœ¨æƒ³åŠæ³•æ‰¾åˆ° $g(n-1,m)$ ä¸ $f(n-1, m)$ çš„å¯¹åº”å…³ç³»ï¼Œå³</p><p>$$<br>3 \rightarrow 0 \<br>4 \rightarrow 1 \<br>5 \rightarrow 2 \<br>0 \rightarrow 3 \<br>1 \rightarrow 4 \<br>$$</p><p>æ˜ å°„å‡½æ•°ä¸º</p><p>$$<br>mapping(x) &#x3D;<br>\begin{cases}<br>x-k &amp; x&#x3D;[k..n-1] \<br>x+n-k &amp; x&#x3D;[0..k-2]<br>\end{cases}<br>$$</p><p>ç­‰ä»·äºä¸‹é¢å‡½æ•°</p><p>$$<br>mapping(x) &#x3D; (x + n - k)%{n}<br>$$</p><p>ä»£å…¥æµ‹è¯•ä¸€ä¸‹</p><p>$$<br>3 \rightarrow (3+6-3)%6 \rightarrow 0 \<br>4 \rightarrow (4+6-3)%6 \rightarrow 1 \<br>5 \rightarrow (5+6-3)%6 \rightarrow 2 \<br>0 \rightarrow (0+6-3)%6 \rightarrow 3 \<br>1 \rightarrow (1+6-3)%6 \rightarrow 4 \<br>$$</p><p>ç»¼ä¸Šæœ‰</p><p>$$<br>f(n-1,m) &#x3D; mapping(g(n-1,m))<br>$$</p><p><strong>ä¸‰. æ±‚é€†æ˜ å°„å‡½æ•°</strong></p><p>æ˜ å°„å‡½æ•°æ˜¯æ ¹æ® x è®¡ç®— yï¼Œé€†æ˜ å°„å‡½æ•°å³æ ¹æ® y å¾—åˆ° x</p><p>$$<br>mapping^{-1}(x) &#x3D; (x + k)%n<br>$$</p><p>ä»£å…¥æµ‹è¯•ä¸€ä¸‹</p><p>$$<br>0 \rightarrow (0+3)%6 \rightarrow 3 \<br>1 \rightarrow (1+3)%6 \rightarrow 4 \<br>2 \rightarrow (2+3)%6 \rightarrow 5 \<br>3 \rightarrow (3+3)%6 \rightarrow 0 \<br>4 \rightarrow (4+3)%6 \rightarrow 1 \<br>$$</p><p>å› æ­¤å¯ä»¥æ±‚å¾—</p><p>$$<br>g(n-1,m) &#x3D; mapping^{-1}(f(n-1,m))<br>$$</p><p><strong>å››. é€’æ¨å¼</strong></p><p>ä»£å…¥æ¨å¯¼</p><p>$$<br>\begin{aligned}<br>f(n,m) &#x3D; \ &amp; g(n-1,m) \<br>&#x3D; \ &amp; mapping^{-1}(f(n-1,m)) \<br>&#x3D; \ &amp; (f(n-1,m) + k) % n \<br>&#x3D; \ &amp; (f(n-1,m) + m%n) % n \<br>&#x3D; \ &amp; (f(n-1,m) + m) % n \<br>\end{aligned}<br>$$</p><p>æœ€åä¸€æ­¥åŒ–ç®€æ˜¯åˆ©ç”¨äº†æ¨¡è¿ç®—æ³•åˆ™</p><p>$(a+b)%n &#x3D; (a%n + b%n) %n$  ä¾‹å¦‚</p><ul><li>$(6+6)%5 &#x3D; 2 &#x3D; (6+6%5)%5$</li><li>$(6+5)%5 &#x3D; 1 &#x3D; (6+5%5)%5$</li><li>$(6+4)%5 &#x3D; 0 &#x3D; (6+4%5)%5$</li></ul><p>æœ€ç»ˆé€’æ¨å¼</p><p>$$<br>f(n,m) &#x3D;<br>\begin{cases}<br>(f(n-1,m) + m) % n &amp; n&gt;1\<br>0 &amp; n &#x3D; 1<br>\end{cases}<br>$$</p><h3 id="3-å¤šè·¯é€’å½’-Multi-Recursion"><a href="#3-å¤šè·¯é€’å½’-Multi-Recursion" class="headerlink" title="3) å¤šè·¯é€’å½’ Multi Recursion"></a>3) å¤šè·¯é€’å½’ Multi Recursion</h3><h4 id="E01-æ–æ³¢é‚£å¥‘æ•°åˆ—-Leetcode-70"><a href="#E01-æ–æ³¢é‚£å¥‘æ•°åˆ—-Leetcode-70" class="headerlink" title="E01. æ–æ³¢é‚£å¥‘æ•°åˆ—-Leetcode 70"></a>E01. æ–æ³¢é‚£å¥‘æ•°åˆ—-Leetcode 70</h4><ul><li>ä¹‹å‰çš„ä¾‹å­æ˜¯æ¯ä¸ªé€’å½’å‡½æ•°åªåŒ…å«ä¸€ä¸ªè‡ªèº«çš„è°ƒç”¨ï¼Œè¿™ç§°ä¹‹ä¸º single recursion</li><li>å¦‚æœæ¯ä¸ªé€’å½’å‡½æ•°ä¾‹åŒ…å«å¤šä¸ªè‡ªèº«è°ƒç”¨ï¼Œç§°ä¹‹ä¸º multi recursion</li></ul><p><strong>é€’æ¨å…³ç³»</strong></p><p>$$<br>f(n) &#x3D;<br>\begin{cases}<br>0 &amp; n&#x3D;0 \<br>1 &amp; n&#x3D;1 \<br>f(n-1) + f(n-2) &amp; n&gt;1<br>\end{cases}<br>$$</p><p>ä¸‹é¢çš„è¡¨æ ¼åˆ—å‡ºäº†æ•°åˆ—çš„å‰å‡ é¡¹</p><table><thead><tr><th><em>F</em>0</th><th><em>F</em>1</th><th><em>F</em>2</th><th><em>F</em>3</th><th><em>F</em>4</th><th><em>F</em>5</th><th><em>F</em>6</th><th><em>F</em>7</th><th><em>F</em>8</th><th><em>F</em>9</th><th><em>F</em>10</th><th><em>F</em>11</th><th><em>F</em>12</th><th><em>F</em>13</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>1</td><td>2</td><td>3</td><td>5</td><td>8</td><td>13</td><td>21</td><td>34</td><td>55</td><td>89</td><td>144</td><td>233</td></tr></tbody></table><p><strong>å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f(n - <span class="number">1</span>) + f(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œæµç¨‹</strong></p><p><img src="https://i0.hdslb.com/bfs/article/6f995cc0ff9352bf571dba4b8d7a74c2645325325.gif">â€‹</p><ul><li>ç»¿è‰²ä»£è¡¨æ­£åœ¨æ‰§è¡Œï¼ˆå¯¹åº”é€’ï¼‰ï¼Œç°è‰²ä»£è¡¨æ‰§è¡Œç»“æŸï¼ˆå¯¹åº”å½’ï¼‰</li><li>é€’ä¸åˆ°å¤´ï¼Œä¸èƒ½å½’ï¼Œå¯¹åº”ç€æ·±åº¦ä¼˜å…ˆæœç´¢</li></ul><p><strong>æ—¶é—´å¤æ‚åº¦</strong></p><ul><li><p>é€’å½’çš„æ¬¡æ•°ä¹Ÿç¬¦åˆæ–æ³¢é‚£å¥‘è§„å¾‹ï¼Œ$2 * f(n+1)-1$</p></li><li><p>æ—¶é—´å¤æ‚åº¦æ¨å¯¼è¿‡ç¨‹</p><ul><li>æ–æ³¢é‚£å¥‘é€šé¡¹å…¬å¼ $f(n) &#x3D; \frac{1}{\sqrt{5}}*({\frac{1+\sqrt{5}}{2}}^n - {\frac{1-\sqrt{5}}{2}}^n)$</li><li>ç®€åŒ–ä¸ºï¼š$f(n) &#x3D; \frac{1}{2.236}*({1.618}^n - {(-0.618)}^n)$</li><li>å¸¦å…¥é€’å½’æ¬¡æ•°å…¬å¼ $2<em>\frac{1}{2.236}</em>({1.618}^{n+1} - {(-0.618)}^{n+1})-1$</li><li>æ—¶é—´å¤æ‚åº¦ä¸º $\Theta(1.618^n)$</li></ul></li></ul><blockquote><ol><li>æ›´å¤š Fibonacci å‚è€ƒ[<sup>8][</sup>9][^10]</li><li>ä»¥ä¸Šæ—¶é—´å¤æ‚åº¦åˆ†æï¼Œæœªè€ƒè™‘å¤§æ•°ç›¸åŠ çš„å› ç´ </li></ol></blockquote><p><strong>å˜ä½“1 - å…”å­é—®é¢˜[^8]</strong></p><p><img src="https://i0.hdslb.com/bfs/article/001fa084b711cc095484e7c2e3c7fba5645325325.png" alt="image-20221110155655827">â€‹</p><ul><li>ç¬¬ä¸€ä¸ªæœˆï¼Œæœ‰ä¸€å¯¹æœªæˆç†Ÿçš„å…”å­ï¼ˆé»‘è‰²ï¼Œæ³¨æ„å›¾ä¸­ä¸ªå¤´è¾ƒå°ï¼‰</li><li>ç¬¬äºŒä¸ªæœˆï¼Œå®ƒä»¬æˆç†Ÿ</li><li>ç¬¬ä¸‰ä¸ªæœˆï¼Œå®ƒä»¬èƒ½äº§ä¸‹ä¸€å¯¹æ–°çš„å°å…”å­ï¼ˆè“è‰²ï¼‰</li><li>æ‰€æœ‰å…”å­éµå¾ªç›¸åŒè§„å¾‹ï¼Œæ±‚ç¬¬ $n$ ä¸ªæœˆçš„å…”å­æ•°</li></ul><p><strong>åˆ†æ</strong></p><p>å…”å­é—®é¢˜å¦‚ä½•ä¸æ–æ³¢é‚£å¥‘è”ç³»èµ·æ¥å‘¢ï¼Ÿè®¾ç¬¬ n ä¸ªæœˆå…”å­æ•°ä¸º $f(n)$</p><ul><li>$f(n)$ &#x3D; ä¸Šä¸ªæœˆå…”å­æ•° + æ–°ç”Ÿçš„å°å…”å­æ•°</li><li>è€Œã€æ–°ç”Ÿçš„å°å…”å­æ•°ã€‘å®é™…å°±æ˜¯ã€ä¸Šä¸ªæœˆæˆç†Ÿçš„å…”å­æ•°ã€‘</li><li>å› ä¸ºéœ€è¦ä¸€ä¸ªæœˆå…”å­å°±æˆç†Ÿï¼Œæ‰€ä»¥ã€ä¸Šä¸ªæœˆæˆç†Ÿçš„å…”å­æ•°ã€‘ä¹Ÿå°±æ˜¯ã€ä¸Šä¸Šä¸ªæœˆçš„å…”å­æ•°ã€‘</li><li>ä¸Šä¸ªæœˆå…”å­æ•°ï¼Œå³ $f(n-1)$</li><li>ä¸Šä¸Šä¸ªæœˆçš„å…”å­æ•°ï¼Œå³ $f(n-2)$</li></ul><p>å› æ­¤æœ¬è´¨è¿˜æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œåªæ˜¯ä»å…¶ç¬¬ä¸€é¡¹å¼€å§‹</p><p><strong>å˜ä½“2 - é’è›™çˆ¬æ¥¼æ¢¯</strong></p><ul><li>æ¥¼æ¢¯æœ‰ $n$ é˜¶</li><li>é’è›™è¦çˆ¬åˆ°æ¥¼é¡¶ï¼Œå¯ä»¥ä¸€æ¬¡è·³ä¸€é˜¶ï¼Œä¹Ÿå¯ä»¥ä¸€æ¬¡è·³ä¸¤é˜¶</li><li>åªèƒ½å‘ä¸Šè·³ï¼Œé—®æœ‰å¤šå°‘ç§è·³æ³•</li></ul><p><strong>åˆ†æ</strong></p><table><thead><tr><th>n</th><th>è·³æ³•</th><th>è§„å¾‹</th></tr></thead><tbody><tr><td>1</td><td>(1)</td><td>æš‚æ—¶çœ‹ä¸å‡º</td></tr><tr><td>2</td><td>(1,1)  (2)</td><td>æš‚æ—¶çœ‹ä¸å‡º</td></tr><tr><td>3</td><td>(1,1,1)  (1,2)  (2,1)</td><td>æš‚æ—¶çœ‹ä¸å‡º</td></tr><tr><td>4</td><td>(1,1,1,1)    (1,2,1)    (2,1,1)<br />(1,1,2)  (2,2)</td><td>æœ€åä¸€è·³ï¼Œè·³ä¸€ä¸ªå°é˜¶çš„ï¼ŒåŸºäºf(3)<br />æœ€åä¸€è·³ï¼Œè·³ä¸¤ä¸ªå°é˜¶çš„ï¼ŒåŸºäºf(2)</td></tr><tr><td>5</td><td>â€¦</td><td>â€¦</td></tr></tbody></table><ul><li>å› æ­¤æœ¬è´¨ä¸Šè¿˜æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œåªæ˜¯ä»å…¶ç¬¬äºŒé¡¹å¼€å§‹</li><li>å¯¹åº” leetcode é¢˜ç›® <a href="https://leetcode.cn/problems/climbing-stairs/">70. çˆ¬æ¥¼æ¢¯ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li></ul><h4 id="E02-æ±‰è¯ºå¡”-13-ï¼ˆå¤šè·¯é€’å½’ï¼‰"><a href="#E02-æ±‰è¯ºå¡”-13-ï¼ˆå¤šè·¯é€’å½’ï¼‰" class="headerlink" title="E02. æ±‰è¯ºå¡”[^13]ï¼ˆå¤šè·¯é€’å½’ï¼‰"></a>E02. æ±‰è¯ºå¡”[^13]ï¼ˆå¤šè·¯é€’å½’ï¼‰</h4><p>Tower of Hanoiï¼Œæ˜¯ä¸€ä¸ªæºäºå°åº¦å¤è€ä¼ è¯´ï¼šå¤§æ¢µå¤©åˆ›å»ºä¸–ç•Œæ—¶åšäº†ä¸‰æ ¹é‡‘åˆšçŸ³æŸ±ï¼Œåœ¨ä¸€æ ¹æŸ±å­ä»ä¸‹å¾€ä¸ŠæŒ‰å¤§å°é¡ºåºæ‘ç€ 64 ç‰‡é»„é‡‘åœ†ç›˜ï¼Œå¤§æ¢µå¤©å‘½ä»¤å©†ç½—é—¨æŠŠåœ†ç›˜é‡æ–°æ‘†æ”¾åœ¨å¦ä¸€æ ¹æŸ±å­ä¸Šï¼Œå¹¶ä¸”è§„å®š</p><ul><li>ä¸€æ¬¡åªèƒ½ç§»åŠ¨ä¸€ä¸ªåœ†ç›˜</li><li>å°åœ†ç›˜ä¸Šä¸èƒ½æ”¾å¤§åœ†ç›˜</li></ul><p>ä¸‹é¢çš„åŠ¨å›¾æ¼”ç¤ºäº†4ç‰‡åœ†ç›˜çš„ç§»åŠ¨æ–¹æ³•</p><p><img src="https://i0.hdslb.com/bfs/article/4cdad0b3b67d773cc32ec20415e4b12f645325325.gif">â€‹</p><p>ä½¿ç”¨ç¨‹åºä»£ç æ¨¡æ‹Ÿåœ†ç›˜çš„ç§»åŠ¨è¿‡ç¨‹ï¼Œå¹¶ä¼°ç®—å‡ºæ—¶é—´å¤æ‚åº¦</p><p><strong>æ€è·¯</strong></p><ul><li><p>å‡è®¾æ¯æ ¹æŸ±å­æ ‡å· aï¼Œbï¼Œcï¼Œæ¯ä¸ªåœ†ç›˜ç”¨ 1ï¼Œ2ï¼Œ3 â€¦ è¡¨ç¤ºå…¶å¤§å°ï¼Œåœ†ç›˜åˆå§‹åœ¨ aï¼Œè¦ç§»åŠ¨åˆ°çš„ç›®æ ‡æ˜¯ c</p></li><li><p>å¦‚æœåªæœ‰ä¸€ä¸ªåœ†ç›˜ï¼Œæ­¤æ—¶æ˜¯æœ€å°é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥æ±‚è§£</p><ul><li>ç§»åŠ¨åœ†ç›˜1 $a \mapsto c$</li></ul><img src="https://i0.hdslb.com/bfs/article/e9678245f97cb37781fc053b6311ee6a645325325.png" alt="image-20221219090741078" style="zoom:50%;" /></li><li><p>å¦‚æœæœ‰ä¸¤ä¸ªåœ†ç›˜ï¼Œé‚£ä¹ˆ</p><ul><li>åœ†ç›˜1 $a \mapsto b$</li><li>åœ†ç›˜2 $a \mapsto c$</li><li>åœ†ç›˜1 $b \mapsto c$</li></ul><img src="https://i0.hdslb.com/bfs/article/58ed5d84acb4bd23edc0944d5f91cd6b645325325.png" alt="image-20221219091316225" style="zoom:50%;" /></li><li><p>å¦‚æœæœ‰ä¸‰ä¸ªåœ†ç›˜ï¼Œé‚£ä¹ˆ</p><ul><li>åœ†ç›˜12 $a \mapsto b$</li><li>åœ†ç›˜3 $a \mapsto c$</li><li>åœ†ç›˜12 $b \mapsto c$</li></ul><img src="https://i0.hdslb.com/bfs/article/80955817102a28f7bf6fd674f6e5e152645325325.png" alt="image-20221219091930614" style="zoom:50%;" /></li><li><p>å¦‚æœæœ‰å››ä¸ªåœ†ç›˜ï¼Œé‚£ä¹ˆ</p><ul><li>åœ†ç›˜ 123 $a \mapsto b$</li><li>åœ†ç›˜4 $a \mapsto c$</li><li>åœ†ç›˜ 123 $b \mapsto c$</li></ul></li></ul><img src="https://i0.hdslb.com/bfs/article/2d9b0a4f25ca103ad8a6c0c167e74901645325325.png" alt="image-20221219092537323" style="zoom:50%;" /><p><strong>é¢˜è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E02HanoiTower</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">             æº å€Ÿ ç›®</span></span><br><span class="line"><span class="comment">        h(4, a, b, c) -&gt; h(3, a, c, b)</span></span><br><span class="line"><span class="comment">                         a -&gt; c</span></span><br><span class="line"><span class="comment">                         h(3, b, a, c)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> LinkedList&lt;Integer&gt; a = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> LinkedList&lt;Integer&gt; b = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> LinkedList&lt;Integer&gt; c = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">            a.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">h</span><span class="params">(<span class="type">int</span> n, LinkedList&lt;Integer&gt; a, </span></span><br><span class="line"><span class="params">                  LinkedList&lt;Integer&gt; b, </span></span><br><span class="line"><span class="params">                  LinkedList&lt;Integer&gt; c)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        h(n - <span class="number">1</span>, a, c, b);</span><br><span class="line">        c.addLast(a.removeLast());</span><br><span class="line">        print();</span><br><span class="line">        h(n - <span class="number">1</span>, b, a, c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------------&quot;</span>);</span><br><span class="line">        System.out.println(a);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        init(<span class="number">3</span>);</span><br><span class="line">        print();</span><br><span class="line">        h(<span class="number">3</span>, a, b, c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E03-æ¨è¾‰ä¸‰è§’-6"><a href="#E03-æ¨è¾‰ä¸‰è§’-6" class="headerlink" title="E03. æ¨è¾‰ä¸‰è§’[^6]"></a>E03. æ¨è¾‰ä¸‰è§’[^6]</h4><p><img src="https://i0.hdslb.com/bfs/article/c3688771f3fa03a8790e8ded08dc7ebc645325325.png" alt="image-20221219172514410">â€‹</p><p><strong>åˆ†æ</strong></p><p>æŠŠå®ƒæ–œç€çœ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">        1</span><br><span class="line">      1   1</span><br><span class="line">    1   2   1</span><br><span class="line">  1   3   3   1</span><br><span class="line">1   4   6   4   1</span><br></pre></td></tr></table></figure><ul><li>è¡Œ $i$ï¼Œåˆ— $j$ï¼Œé‚£ä¹ˆ $[i][j]$ çš„å–å€¼åº”ä¸º $[i-1][j-1] + [i-1][j]$</li><li>å½“ $j&#x3D;0$ æˆ– $i&#x3D;j$ æ—¶ï¼Œ$[i][j]$ å–å€¼ä¸º $1$</li></ul><p><strong>é¢˜è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; n - <span class="number">1</span>) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;%&quot;</span> + <span class="number">2</span> * (n - <span class="number">1</span> - i) + <span class="string">&quot;s&quot;</span>, <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; i + <span class="number">1</span>; j++) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;%-4d&quot;</span>, element(i, j));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">element</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (j == <span class="number">0</span> || i == j) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> element(i - <span class="number">1</span>, j - <span class="number">1</span>) + element(i - <span class="number">1</span>, j);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–1</strong></p><p>æ˜¯ multiple recursionï¼Œå› æ­¤å¾ˆå¤šé€’å½’è°ƒç”¨æ˜¯é‡å¤çš„ï¼Œä¾‹å¦‚</p><ul><li><p>recursion(3, 1) åˆ†è§£ä¸º</p><ul><li>recursion(2, 0) + recursion(2, 1)</li></ul></li><li><p>è€Œ recursion(3, 2) åˆ†è§£ä¸º</p><ul><li>recursion(2, 1) + recursion(2, 2)</li></ul></li></ul><p>è¿™é‡Œ recursion(2, 1) å°±é‡å¤è°ƒç”¨äº†ï¼Œäº‹å®ä¸Šå®ƒä¼šé‡å¤å¾ˆå¤šæ¬¡ï¼Œå¯ä»¥ç”¨ static AtomicInteger counter &#x3D; new AtomicInteger(0) æ¥æŸ¥çœ‹é€’å½’å‡½æ•°çš„è°ƒç”¨æ€»æ¬¡æ•°</p><p>äº‹å®ä¸Šï¼Œå¯ä»¥ç”¨ <strong>memoization</strong> æ¥è¿›è¡Œä¼˜åŒ–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print1</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[][] triangle = <span class="keyword">new</span> <span class="title class_">int</span>[n][];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="comment">// æ‰“å°ç©ºæ ¼</span></span><br><span class="line">        triangle[i] = <span class="keyword">new</span> <span class="title class_">int</span>[i + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= i; j++) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;%-4d&quot;</span>, element1(triangle, i, j));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">element1</span><span class="params">(<span class="type">int</span>[][] triangle, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (triangle[i][j] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> triangle[i][j];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (j == <span class="number">0</span> || i == j) &#123;</span><br><span class="line">        triangle[i][j] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> triangle[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">    triangle[i][j] = element1(triangle, i - <span class="number">1</span>, j - <span class="number">1</span>) + element1(triangle, i - <span class="number">1</span>, j);</span><br><span class="line">    <span class="keyword">return</span> triangle[i][j];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å°†æ•°ç»„ä½œä¸ºé€’å½’å‡½æ•°å†…å¯ä»¥è®¿é—®çš„éå†ï¼Œå¦‚æœ $triangle[i][j]$ å·²ç»æœ‰å€¼ï¼Œè¯´æ˜è¯¥å…ƒç´ å·²ç»è¢«ä¹‹å‰çš„é€’å½’å‡½æ•°è®¡ç®—è¿‡ï¼Œå°±ä¸å¿…é‡å¤è®¡ç®—äº†</li></ul><p><strong>ä¼˜åŒ–2</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print2</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] row = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="comment">// æ‰“å°ç©ºæ ¼</span></span><br><span class="line">        createRow(row, i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= i; j++) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;%-4d&quot;</span>, row[j]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">createRow</span><span class="params">(<span class="type">int</span>[] row, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">        row[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &gt; <span class="number">0</span>; j--) &#123;</span><br><span class="line">        row[j] = row[j - <span class="number">1</span>] + row[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šè¿˜å¯ä»¥é€šè¿‡æ¯ä¸€è¡Œçš„å‰ä¸€é¡¹è®¡ç®—å‡ºä¸‹ä¸€é¡¹ï¼Œä¸å¿…å€ŸåŠ©ä¸Šä¸€è¡Œï¼Œè¿™ä¸æ¨è¾‰ä¸‰è§’çš„å¦ä¸€ä¸ªç‰¹æ€§æœ‰å…³ï¼Œæš‚ä¸å±•å¼€äº†</p></blockquote><h4 id="å…¶å®ƒé¢˜ç›®"><a href="#å…¶å®ƒé¢˜ç›®" class="headerlink" title="å…¶å®ƒé¢˜ç›®"></a>å…¶å®ƒé¢˜ç›®</h4><p>åŠ›æ‰£å¯¹åº”é¢˜ç›®ï¼Œä½†é€’å½’ä¸é€‚åˆåœ¨åŠ›æ‰£åˆ·é«˜åˆ†ï¼Œå› æ­¤åªåˆ—å‡ºç›¸å…³é¢˜ç›®ï¼Œä¸åšåˆ·é¢˜è®²è§£äº†</p><table><thead><tr><th>é¢˜å·</th><th>åç§°</th></tr></thead><tbody><tr><td>Leetcode118</td><td>æ¨è¾‰ä¸‰è§’</td></tr><tr><td>Leetcode119</td><td>æ¨è¾‰ä¸‰è§’II</td></tr><tr><td></td><td></td></tr></tbody></table><h3 id="4-é€’å½’ä¼˜åŒ–-è®°å¿†æ³•"><a href="#4-é€’å½’ä¼˜åŒ–-è®°å¿†æ³•" class="headerlink" title="4) é€’å½’ä¼˜åŒ–-è®°å¿†æ³•"></a>4) é€’å½’ä¼˜åŒ–-è®°å¿†æ³•</h3><p>ä¸Šè¿°ä»£ç å­˜åœ¨å¾ˆå¤šé‡å¤çš„è®¡ç®—ï¼Œä¾‹å¦‚æ±‚ $f(5)$ é€’å½’åˆ†è§£è¿‡ç¨‹</p><p><img src="https://i0.hdslb.com/bfs/article/b3411ef3feee85fd36baa11ecfef0f51645325325.png" alt="image-20221207092417933">â€‹</p><p>å¯ä»¥çœ‹åˆ°ï¼ˆé¢œè‰²ç›¸åŒçš„æ˜¯é‡å¤çš„ï¼‰ï¼š</p><ul><li>$f(3)$ é‡å¤äº† 2 æ¬¡</li><li>$f(2)$ é‡å¤äº† 3 æ¬¡</li><li>$f(1)$ é‡å¤äº† 5 æ¬¡</li><li>$f(0)$ é‡å¤äº† 3 æ¬¡</li></ul><p>éšç€  $n$ çš„å¢å¤§ï¼Œé‡å¤æ¬¡æ•°éå¸¸å¯è§‚ï¼Œå¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ</p><p><strong>Memoization</strong> è®°å¿†æ³•ï¼ˆä¹Ÿç§°å¤‡å¿˜å½•ï¼‰æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œé€šè¿‡å­˜å‚¨å‡½æ•°è°ƒç”¨ç»“æœï¼ˆé€šå¸¸æ¯”è¾ƒæ˜‚è´µï¼‰ï¼Œå½“å†æ¬¡å‡ºç°ç›¸åŒçš„è¾“å…¥ï¼ˆå­é—®é¢˜ï¼‰æ—¶ï¼Œå°±èƒ½å®ç°åŠ é€Ÿæ•ˆæœï¼Œæ”¹è¿›åçš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">13</span>;</span><br><span class="line">    <span class="type">int</span>[] cache = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>];</span><br><span class="line">    Arrays.fill(cache, -<span class="number">1</span>);</span><br><span class="line">    cache[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    cache[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    System.out.println(f(cache, n));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span>[] cache, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (cache[n] != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cache[n];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cache[n] = f(cache, n - <span class="number">1</span>) + f(cache, n - <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> cache[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–åçš„å›¾ç¤ºï¼Œåªè¦ç»“æœè¢«ç¼“å­˜ï¼Œå°±<strong>ä¸ä¼šæ‰§è¡Œå…¶å­é—®é¢˜</strong></p><p><img src="https://i0.hdslb.com/bfs/article/06babb796f23c5e6eba8fdafaf7d2aa0645325325.png" alt="image-20221213173225807">â€‹</p><ul><li>æ”¹è¿›åçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$</li><li>è¯·è‡ªè¡ŒéªŒè¯æ”¹è¿›åçš„æ•ˆæœ</li><li>è¯·è‡ªè¡Œåˆ†ææ”¹è¿›åçš„ç©ºé—´å¤æ‚åº¦</li></ul><blockquote><p><strong>æ³¨æ„</strong></p><ol><li>è®°å¿†æ³•æ˜¯åŠ¨æ€è§„åˆ’çš„ä¸€ç§æƒ…å†µï¼Œå¼ºè°ƒçš„æ˜¯è‡ªé¡¶å‘ä¸‹çš„è§£å†³</li><li>è®°å¿†æ³•çš„æœ¬è´¨æ˜¯ç©ºé—´æ¢æ—¶é—´</li></ol></blockquote><h3 id="5-é€’å½’ä¼˜åŒ–-å°¾é€’å½’"><a href="#5-é€’å½’ä¼˜åŒ–-å°¾é€’å½’" class="headerlink" title="5) é€’å½’ä¼˜åŒ–-å°¾é€’å½’"></a>5) é€’å½’ä¼˜åŒ–-å°¾é€’å½’</h3><p><strong>çˆ†æ ˆ</strong></p><p>ç”¨é€’å½’åš $n + (n-1) + (n-2) â€¦ + 1$</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">sum</span><span class="params">(<span class="type">long</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n + sum(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æˆ‘çš„æœºå™¨ä¸Š  $n &#x3D; 12000$ æ—¶ï¼Œçˆ†æ ˆäº†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.StackOverflowError</span><br><span class="line">at Test.sum(Test.java:10)</span><br><span class="line">at Test.sum(Test.java:10)</span><br><span class="line">at Test.sum(Test.java:10)</span><br><span class="line">at Test.sum(Test.java:10)</span><br><span class="line">at Test.sum(Test.java:10)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li><p>æ¯æ¬¡æ–¹æ³•è°ƒç”¨æ˜¯éœ€è¦æ¶ˆè€—ä¸€å®šçš„æ ˆå†…å­˜çš„ï¼Œè¿™äº›å†…å­˜ç”¨æ¥å­˜å‚¨æ–¹æ³•å‚æ•°ã€æ–¹æ³•å†…å±€éƒ¨å˜é‡ã€è¿”å›åœ°å€ç­‰ç­‰</p></li><li><p>æ–¹æ³•è°ƒç”¨å ç”¨çš„å†…å­˜éœ€è¦ç­‰åˆ°<strong>æ–¹æ³•ç»“æŸæ—¶</strong>æ‰ä¼šé‡Šæ”¾</p></li><li><p>è€Œé€’å½’è°ƒç”¨æˆ‘ä»¬ä¹‹å‰è®²è¿‡ï¼Œä¸åˆ°æœ€æ·±ä¸ä¼šå›å¤´ï¼Œæœ€å†…å±‚æ–¹æ³•æ²¡å®Œæˆä¹‹å‰ï¼Œå¤–å±‚æ–¹æ³•éƒ½ç»“æŸä¸äº†</p><ul><li>ä¾‹å¦‚ï¼Œ$sum(3)$ è¿™ä¸ªæ–¹æ³•å†…æœ‰ä¸ªéœ€è¦æ‰§è¡Œ $3 + sum(2)$ï¼Œ$sum(2)$ æ²¡è¿”å›å‰ï¼ŒåŠ å·å‰é¢çš„ $3$ ä¸èƒ½é‡Šæ”¾</li><li>çœ‹ä¸‹é¢ä¼ªç </li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> <span class="title function_">sum</span><span class="params">(<span class="type">long</span> n = <span class="number">3</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span> + <span class="type">long</span> <span class="title function_">sum</span><span class="params">(<span class="type">long</span> n = <span class="number">2</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> + <span class="type">long</span> <span class="title function_">sum</span><span class="params">(<span class="type">long</span> n = <span class="number">1</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å°¾è°ƒç”¨</strong></p><p>å¦‚æœå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆç§°ä¸ºå°¾è°ƒç”¨ï¼Œä¾‹å¦‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">b</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ä¸‰æ®µä»£ç <strong>ä¸èƒ½</strong>å«åšå°¾è°ƒç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> c = <span class="title function_">b</span>()</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å› ä¸ºæœ€åä¸€æ­¥å¹¶éè°ƒç”¨å‡½æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">b</span>() + <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æœ€åä¸€æ­¥æ‰§è¡Œçš„æ˜¯åŠ æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">b</span>() + x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æœ€åä¸€æ­¥æ‰§è¡Œçš„æ˜¯åŠ æ³•</li></ul><p><strong>ä¸€äº›è¯­è¨€</strong>[^11]çš„ç¼–è¯‘å™¨èƒ½å¤Ÿå¯¹å°¾è°ƒç”¨åšä¼˜åŒ–ï¼Œä¾‹å¦‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// åšå‰é¢çš„äº‹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">b</span>() </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// åšå‰é¢çš„äº‹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">c</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">a</span>()</span><br></pre></td></tr></table></figure><p>æ²¡ä¼˜åŒ–ä¹‹å‰çš„<strong>ä¼ªç </strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1000</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–å<strong>ä¼ªç </strong>å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">a</span>()</span><br><span class="line"><span class="title function_">b</span>()</span><br><span class="line"><span class="title function_">c</span>()</span><br></pre></td></tr></table></figure><p>ä¸ºä½•å°¾é€’å½’æ‰èƒ½ä¼˜åŒ–ï¼Ÿ</p><p>è°ƒç”¨ a æ—¶</p><ul><li>a è¿”å›æ—¶å‘ç°ï¼šæ²¡ä»€ä¹ˆå¯ç•™ç»™ b çš„ï¼Œå°†æ¥è¿”å›çš„ç»“æœ b æä¾›å°±å¯ä»¥äº†ï¼Œç”¨ä¸ç€æˆ‘ a äº†ï¼Œæˆ‘çš„å†…å­˜å°±å¯ä»¥é‡Šæ”¾</li></ul><p>è°ƒç”¨ b æ—¶</p><ul><li>b è¿”å›æ—¶å‘ç°ï¼šæ²¡ä»€ä¹ˆå¯ç•™ç»™ c çš„ï¼Œå°†æ¥è¿”å›çš„ç»“æœ c æä¾›å°±å¯ä»¥äº†ï¼Œç”¨ä¸ç€æˆ‘ b äº†ï¼Œæˆ‘çš„å†…å­˜å°±å¯ä»¥é‡Šæ”¾</li></ul><p>å¦‚æœè°ƒç”¨ a æ—¶</p><ul><li>ä¸æ˜¯å°¾è°ƒç”¨ï¼Œä¾‹å¦‚ return b() + 1ï¼Œé‚£ä¹ˆ a å°±ä¸èƒ½æå‰ç»“æŸï¼Œå› ä¸ºå®ƒè¿˜å¾—åˆ©ç”¨ b çš„ç»“æœåšåŠ æ³•</li></ul><p><strong>å°¾é€’å½’</strong></p><p>å°¾é€’å½’æ˜¯å°¾è°ƒç”¨çš„ä¸€ç§ç‰¹ä¾‹ï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€æ­¥æ‰§è¡Œçš„æ˜¯åŒä¸€ä¸ªå‡½æ•°</p><p><strong>å°¾é€’å½’é¿å…çˆ†æ ˆ</strong></p><p>å®‰è£… Scala</p><p><img src="https://i0.hdslb.com/bfs/article/3f3575f34ed236d7e35ad4f873787249645325325.png" alt="image-20221111122709227">â€‹</p><p>Scala å…¥é—¨</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">&quot;Hello Scala&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Scala æ˜¯ java çš„è¿‘äº²ï¼Œjava ä¸­çš„ç±»éƒ½å¯ä»¥æ‹¿æ¥é‡ç”¨</li><li>ç±»å‹æ˜¯æ”¾åœ¨å˜é‡åé¢çš„</li><li>Unit è¡¨ç¤ºæ— è¿”å›å€¼ï¼Œç±»ä¼¼äº void</li><li>ä¸éœ€è¦ä»¥åˆ†å·ä½œä¸ºç»“å°¾ï¼Œå½“ç„¶åŠ ä¸Šä¹Ÿå¯¹</li></ul><p>è¿˜æ˜¯å…ˆå†™ä¸€ä¸ªä¼šçˆ†æ ˆçš„å‡½æ•°</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(n: <span class="type">Long</span>): <span class="type">Long</span> = &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n + sum(n - <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Scala æœ€åä¸€è¡Œä»£ç è‹¥ä½œä¸ºè¿”å›å€¼ï¼Œå¯ä»¥çœç•¥ return</li></ul><p>ä¸å‡ºæ‰€æ–™ï¼Œåœ¨ $n &#x3D; 11000$ æ—¶ï¼Œè¿˜æ˜¯å‡ºäº†å¼‚å¸¸</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">println(sum(<span class="number">11000</span>))</span><br><span class="line"></span><br><span class="line"><span class="type">Exception</span> in thread <span class="string">&quot;main&quot;</span> java.lang.<span class="type">StackOverflowError</span></span><br><span class="line">at <span class="type">Main</span>$.sum(<span class="type">Main</span>.scala:<span class="number">25</span>)</span><br><span class="line">at <span class="type">Main</span>$.sum(<span class="type">Main</span>.scala:<span class="number">25</span>)</span><br><span class="line">at <span class="type">Main</span>$.sum(<span class="type">Main</span>.scala:<span class="number">25</span>)</span><br><span class="line">at <span class="type">Main</span>$.sum(<span class="type">Main</span>.scala:<span class="number">25</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºä»¥ä¸Šä»£ç ï¼Œè¿˜ä¸æ˜¯å°¾è°ƒç”¨ï¼Œè¦æƒ³æˆä¸ºå°¾è°ƒç”¨ï¼Œé‚£ä¹ˆï¼š</p><ol><li>æœ€åä¸€è¡Œä»£ç ï¼Œå¿…é¡»æ˜¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨</li><li>å†…å±‚å‡½æ•°å¿…é¡»<strong>æ‘†è„±</strong>ä¸å¤–å±‚å‡½æ•°çš„å…³ç³»ï¼Œå†…å±‚å‡½æ•°<strong>æ‰§è¡Œå</strong>ä¸ä¾èµ–äºå¤–å±‚çš„å˜é‡æˆ–å¸¸é‡</li></ol><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(n: <span class="type">Long</span>): <span class="type">Long</span> = &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n + sum(n - <span class="number">1</span>)  <span class="comment">// ä¾èµ–äºå¤–å±‚å‡½æ•°çš„ n å˜é‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä½•è®©å®ƒæ‰§è¡Œåå°±æ‘†è„±å¯¹ n çš„ä¾èµ–å‘¢ï¼Ÿ</p><ul><li>ä¸èƒ½ç­‰é€’å½’å›æ¥å†åšåŠ æ³•ï¼Œé‚£æ ·å°±å¿…é¡»ä¿ç•™å¤–å±‚çš„ n</li><li>æŠŠ n å½“åšå†…å±‚å‡½æ•°çš„ä¸€ä¸ªå‚æ•°ä¼ è¿›å»ï¼Œè¿™æ—¶ n å°±å±äºå†…å±‚å‡½æ•°äº†</li><li>ä¼ å‚æ—¶å°±å®Œæˆç´¯åŠ , ä¸å¿…ç­‰å›æ¥æ—¶ç´¯åŠ </li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sum(n - 1, n + ç´¯åŠ å™¨)</span><br></pre></td></tr></table></figure><p>æ”¹å†™åä»£ç å¦‚ä¸‹</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@tailrec</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(n: <span class="type">Long</span>, accumulator: <span class="type">Long</span>): <span class="type">Long</span> = &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + accumulator</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> sum(n - <span class="number">1</span>, n + accumulator)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>accumulator ä½œä¸ºç´¯åŠ å™¨</li><li>@tailrec æ³¨è§£æ˜¯ scala æä¾›çš„ï¼Œç”¨æ¥æ£€æŸ¥æ–¹æ³•æ˜¯å¦ç¬¦åˆå°¾é€’å½’</li><li>è¿™å› sum(10000000, 0) ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œæ‰“å° 50000005000000</li></ul><p>æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼Œä»¥<strong>ä¼ªç </strong>è¡¨ç¤º $sum(4, 0)$</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¦–æ¬¡è°ƒç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(n = <span class="number">4</span>, accumulator = <span class="number">0</span>): <span class="type">Long</span> = &#123;</span><br><span class="line">    <span class="keyword">return</span> sum(<span class="number">4</span> - <span class="number">1</span>, <span class="number">4</span> + accumulator)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥ä¸‹æ¥è°ƒç”¨å†…å±‚ sum, ä¼ å‚æ—¶å°±å®Œæˆäº†ç´¯åŠ , ä¸å¿…ç­‰å›æ¥æ—¶ç´¯åŠ ï¼Œå½“å†…å±‚ sum è°ƒç”¨åï¼Œå¤–å±‚ sum ç©ºé—´æ²¡å¿…è¦ä¿ç•™</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(n = <span class="number">3</span>, accumulator = <span class="number">4</span>): <span class="type">Long</span> = &#123;</span><br><span class="line">    <span class="keyword">return</span> sum(<span class="number">3</span> - <span class="number">1</span>, <span class="number">3</span> + accumulator)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§ç»­è°ƒç”¨å†…å±‚ sum</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(n = <span class="number">2</span>, accumulator = <span class="number">7</span>): <span class="type">Long</span> = &#123;</span><br><span class="line">    <span class="keyword">return</span> sum(<span class="number">2</span> - <span class="number">1</span>, <span class="number">2</span> + accumulator)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§ç»­è°ƒç”¨å†…å±‚ sum, è¿™æ˜¯æœ€åçš„ sum è°ƒç”¨å®Œå°±è¿”å›æœ€åç»“æœ 10, å‰é¢æ‰€æœ‰å…¶å®ƒ sum çš„ç©ºé—´æ—©å·²é‡Šæ”¾</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(n = <span class="number">1</span>, accumulator = <span class="number">9</span>): <span class="type">Long</span> = &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">1</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + accumulator</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ¬è´¨ä¸Šï¼Œå°¾é€’å½’ä¼˜åŒ–æ˜¯å°†å‡½æ•°çš„<strong>é€’å½’</strong>è°ƒç”¨ï¼Œå˜æˆäº†å‡½æ•°çš„<strong>å¾ªç¯</strong>è°ƒç”¨</p><p><strong>æ”¹å¾ªç¯é¿å…çˆ†æ ˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">100000000</span>;</span><br><span class="line">    <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">long</span> <span class="variable">i</span> <span class="operator">=</span> n; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        sum += i;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-é€’å½’æ—¶é—´å¤æ‚åº¦-Master-theorem-14"><a href="#6-é€’å½’æ—¶é—´å¤æ‚åº¦-Master-theorem-14" class="headerlink" title="6) é€’å½’æ—¶é—´å¤æ‚åº¦-Master theorem[^14]"></a>6) é€’å½’æ—¶é—´å¤æ‚åº¦-Master theorem[^14]</h3><p>è‹¥æœ‰é€’å½’å¼</p><p>$$<br>T(n) &#x3D; aT(\frac{n}{b}) + f(n)<br>$$</p><p>å…¶ä¸­</p><ul><li>$T(n)$ æ˜¯é—®é¢˜çš„è¿è¡Œæ—¶é—´ï¼Œ$n$ æ˜¯æ•°æ®è§„æ¨¡</li><li>$a$ æ˜¯å­é—®é¢˜ä¸ªæ•°</li><li>$T(\frac{n}{b})$ æ˜¯å­é—®é¢˜è¿è¡Œæ—¶é—´ï¼Œæ¯ä¸ªå­é—®é¢˜è¢«æ‹†æˆåŸé—®é¢˜æ•°æ®è§„æ¨¡çš„ $\frac{n}{b}$</li><li>$f(n)$ æ˜¯é™¤é€’å½’å¤–æ‰§è¡Œçš„è®¡ç®—</li></ul><p>ä»¤ $x &#x3D; \log_{b}{a}$ï¼Œå³ $x &#x3D; \log_{å­é—®é¢˜ç¼©å°å€æ•°}{å­é—®é¢˜ä¸ªæ•°}$</p><p>é‚£ä¹ˆ</p><p>$$<br>T(n) &#x3D;<br>\begin{cases}<br>\Theta(n^x) &amp; f(n) &#x3D; O(n^c) å¹¶ä¸” c \lt x\<br>\Theta(n^x\log{n}) &amp; f(n) &#x3D; \Theta(n^x)\<br>\Theta(n^c) &amp; f(n) &#x3D; \Omega(n^c) å¹¶ä¸” c \gt x<br>\end{cases}<br>$$</p><p><strong>ä¾‹1</strong></p><p>$T(n) &#x3D; 2T(\frac{n}{2}) + n^4$</p><ul><li>æ­¤æ—¶ $x &#x3D; 1 &lt; 4$ï¼Œç”±åè€…å†³å®šæ•´ä¸ªæ—¶é—´å¤æ‚åº¦ $\Theta(n^4)$</li><li>å¦‚æœè§‰å¾—å¯¹æ•°ä¸å¥½ç®—ï¼Œå¯ä»¥æ¢ä¸ºæ±‚ã€$b$ çš„å‡ æ¬¡æ–¹èƒ½ç­‰äº $a$ã€‘</li></ul><p><strong>ä¾‹2</strong></p><p>$T(n) &#x3D; T(\frac{7n}{10}) + n$</p><ul><li>$a&#x3D;1, b&#x3D;\frac{10}{7}, x&#x3D;0, c&#x3D;1$</li><li>æ­¤æ—¶ $x &#x3D; 0 &lt; 1$ï¼Œç”±åè€…å†³å®šæ•´ä¸ªæ—¶é—´å¤æ‚åº¦ $\Theta(n)$</li></ul><p><strong>ä¾‹3</strong></p><p>$T(n) &#x3D; 16T(\frac{n}{4}) + n^2$</p><ul><li>$a&#x3D;16, b&#x3D;4, x&#x3D;2, c&#x3D;2$</li><li>æ­¤æ—¶ $x&#x3D;2 &#x3D; c$ï¼Œæ—¶é—´å¤æ‚åº¦ $\Theta(n^2 \log{n})$</li></ul><p><strong>ä¾‹4</strong></p><p>$T(n)&#x3D;7T(\frac{n}{3}) + n^2$</p><ul><li>$a&#x3D;7, b&#x3D;3, x&#x3D;1.?, c&#x3D;2$</li><li>æ­¤æ—¶ $x &#x3D; \log_{3}{7} &lt; 2$ï¼Œç”±åè€…å†³å®šæ•´ä¸ªæ—¶é—´å¤æ‚åº¦ $\Theta(n^2)$</li></ul><p><strong>ä¾‹5</strong></p><p>$T(n) &#x3D; 7T(\frac{n}{2}) + n^2$</p><ul><li>$a&#x3D;7, b&#x3D;2, x&#x3D;2.?, c&#x3D;2$</li><li>æ­¤æ—¶ $x &#x3D; log_2{7} &gt; 2$ï¼Œç”±å‰è€…å†³å®šæ•´ä¸ªæ—¶é—´å¤æ‚åº¦ $\Theta(n^{\log_2{7}})$</li></ul><p><strong>ä¾‹6</strong></p><p>$T(n) &#x3D; 2T(\frac{n}{4}) + \sqrt{n}$</p><ul><li>$a&#x3D;2, b&#x3D;4, x &#x3D; 0.5, c&#x3D;0.5$</li><li>æ­¤æ—¶ $x &#x3D; 0.5 &#x3D; c$ï¼Œæ—¶é—´å¤æ‚åº¦ $\Theta(\sqrt{n}\ \log{n})$</li></ul><p><strong>ä¾‹7. äºŒåˆ†æŸ¥æ‰¾é€’å½’</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; j) &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (target &lt; a[m]) &#123;</span><br><span class="line">        <span class="keyword">return</span> f(a, target, i, m - <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123;</span><br><span class="line">        <span class="keyword">return</span> f(a, target, m + <span class="number">1</span>, j);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> m;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å­é—®é¢˜ä¸ªæ•° $a &#x3D; 1$</li><li>å­é—®é¢˜æ•°æ®è§„æ¨¡ç¼©å°å€æ•° $b &#x3D; 2$</li><li>é™¤é€’å½’å¤–æ‰§è¡Œçš„è®¡ç®—æ˜¯å¸¸æ•°çº§ $c&#x3D;0$</li></ul><p>$T(n) &#x3D; T(\frac{n}{2}) + n^0$</p><ul><li>æ­¤æ—¶ $x&#x3D;0 &#x3D; c$ï¼Œæ—¶é—´å¤æ‚åº¦ $\Theta(\log{n})$</li></ul><p><strong>ä¾‹8. å½’å¹¶æ’åºé€’å½’</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">void split(B[], i, j, A[])</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (j - i &lt;= <span class="number">1</span>)                </span><br><span class="line">        <span class="keyword">return</span>;                            </span><br><span class="line">    m = (i + j) / <span class="number">2</span>;         </span><br><span class="line">  </span><br><span class="line">    // é€’å½’</span><br><span class="line">    split(A, i, m, B);  </span><br><span class="line">    split(A, m, j, B); </span><br><span class="line">  </span><br><span class="line">    // åˆå¹¶</span><br><span class="line">    merge(B, i, m, j, A);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å­é—®é¢˜ä¸ªæ•° $a&#x3D;2$</li><li>å­é—®é¢˜æ•°æ®è§„æ¨¡ç¼©å°å€æ•° $b&#x3D;2$</li><li>é™¤é€’å½’å¤–ï¼Œä¸»è¦æ—¶é—´èŠ±åœ¨åˆå¹¶ä¸Šï¼Œå®ƒå¯ä»¥ç”¨ $f(n) &#x3D; n$ è¡¨ç¤º</li></ul><p>$T(n) &#x3D; 2T(\frac{n}{2}) + n$</p><ul><li>æ­¤æ—¶ $x&#x3D;1&#x3D;c$ï¼Œæ—¶é—´å¤æ‚åº¦ $\Theta(n\log{n})$</li></ul><p><strong>ä¾‹9. å¿«é€Ÿæ’åºé€’å½’</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">algorithm quicksort(A, lo, hi) <span class="keyword">is</span> </span><br><span class="line">  <span class="keyword">if</span> lo &gt;= hi || lo &lt; <span class="number">0</span> then </span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  </span><br><span class="line">  // åˆ†åŒº</span><br><span class="line">  p := partition(A, lo, hi) </span><br><span class="line">  </span><br><span class="line">  // é€’å½’</span><br><span class="line">  quicksort(A, lo, p - <span class="number">1</span>) </span><br><span class="line">  quicksort(A, p + <span class="number">1</span>, hi) </span><br></pre></td></tr></table></figure><ul><li><p>å­é—®é¢˜ä¸ªæ•° $a&#x3D;2$</p></li><li><p>å­é—®é¢˜æ•°æ®è§„æ¨¡ç¼©å°å€æ•°</p><ul><li>å¦‚æœåˆ†åŒºåˆ†çš„å¥½ï¼Œ$b&#x3D;2$</li><li>å¦‚æœåˆ†åŒºæ²¡åˆ†å¥½ï¼Œä¾‹å¦‚åˆ†åŒº1 çš„æ•°æ®æ˜¯ 0ï¼Œåˆ†åŒº 2 çš„æ•°æ®æ˜¯ $n-1$</li></ul></li><li><p>é™¤é€’å½’å¤–ï¼Œä¸»è¦æ—¶é—´èŠ±åœ¨åˆ†åŒºä¸Šï¼Œå®ƒå¯ä»¥ç”¨ $f(n) &#x3D; n$ è¡¨ç¤º</p></li></ul><p>æƒ…å†µ1 - åˆ†åŒºåˆ†çš„å¥½</p><p>$T(n) &#x3D; 2T(\frac{n}{2}) + n$</p><ul><li>æ­¤æ—¶ $x&#x3D;1&#x3D;c$ï¼Œæ—¶é—´å¤æ‚åº¦ $\Theta(n\log{n})$</li></ul><p>æƒ…å†µ2 - åˆ†åŒºæ²¡åˆ†å¥½</p><p>$T(n) &#x3D; T(n-1) + T(1) + n$</p><ul><li>æ­¤æ—¶ä¸èƒ½ç”¨ä¸»å®šç†æ±‚è§£</li></ul><h3 id="7-é€’å½’æ—¶é—´å¤æ‚åº¦-å±•å¼€æ±‚è§£"><a href="#7-é€’å½’æ—¶é—´å¤æ‚åº¦-å±•å¼€æ±‚è§£" class="headerlink" title="7) é€’å½’æ—¶é—´å¤æ‚åº¦-å±•å¼€æ±‚è§£"></a>7) é€’å½’æ—¶é—´å¤æ‚åº¦-å±•å¼€æ±‚è§£</h3><p>åƒä¸‹é¢çš„é€’å½’å¼ï¼Œéƒ½ä¸èƒ½ç”¨ä¸»å®šç†æ±‚è§£</p><p><strong>ä¾‹1 - é€’å½’æ±‚å’Œ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> <span class="title function_">sum</span><span class="params">(<span class="type">long</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n + sum(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>$T(n) &#x3D; T(n-1) + c$ï¼Œ$T(1) &#x3D; c$</p><p>ä¸‹é¢ä¸ºå±•å¼€è¿‡ç¨‹</p><p>$T(n) &#x3D; T(n-2) + c + c$</p><p>$T(n) &#x3D; T(n-3) + c + c + c$</p><p>â€¦</p><p>$T(n) &#x3D; T(n-(n-1)) + (n-1)c$</p><ul><li>å…¶ä¸­ $T(n-(n-1))$ å³ $T(1)$</li><li>å¸¦å…¥æ±‚å¾— $T(n) &#x3D; c + (n-1)c &#x3D; nc$</li></ul><p>æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$</p><p><strong>ä¾‹2 - é€’å½’å†’æ³¡æ’åº</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">bubble</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="number">0</span> == high) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; high; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] &gt; a[i + <span class="number">1</span>]) &#123;</span><br><span class="line">            swap(a, i, i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    bubble(a, high - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>$T(n) &#x3D; T(n-1) + n$ï¼Œ$T(1) &#x3D; c$</p><p>ä¸‹é¢ä¸ºå±•å¼€è¿‡ç¨‹</p><p>$T(n) &#x3D; T(n-2) + (n-1) + n$</p><p>$T(n) &#x3D; T(n-3) + (n-2) + (n-1) + n$</p><p>â€¦</p><p>$T(n) &#x3D; T(1) + 2 + â€¦ + n &#x3D; T(1) + (n-1)\frac{2+n}{2} &#x3D; c + \frac{n^2}{2} + \frac{n}{2} -1$</p><p>æ—¶é—´å¤æ‚åº¦ $O(n^2)$</p><blockquote><p>æ³¨ï¼š</p><ul><li>ç­‰å·®æ•°åˆ—æ±‚å’Œä¸º $ä¸ªæ•°*\frac{\verté¦–é¡¹-æœ«é¡¹\vert}{2}$</li></ul></blockquote><p><strong>ä¾‹3 - é€’å½’å¿«æ’</strong></p><p>å¿«é€Ÿæ’åºåˆ†åŒºæ²¡åˆ†å¥½çš„æç«¯æƒ…å†µ</p><p>$T(n) &#x3D; T(n-1) + T(1) + n$ï¼Œ$T(1) &#x3D; c$</p><p>$T(n) &#x3D; T(n-1) + c + n$</p><p>ä¸‹é¢ä¸ºå±•å¼€è¿‡ç¨‹</p><p>$T(n) &#x3D; T(n-2) + c + (n-1) + c + n$</p><p>$T(n) &#x3D; T(n-3) + c + (n-2) + c + (n-1) + c + n$</p><p>â€¦</p><p>$T(n) &#x3D; T(n-(n-1)) + (n-1)c + 2+â€¦+n &#x3D; \frac{n^2}{2} + \frac{2cn+n}{2} -1$</p><p>æ—¶é—´å¤æ‚åº¦ $O(n^2)$</p><p>ä¸ä¼šæ¨å¯¼çš„åŒå­¦å¯ä»¥è¿›å…¥ <a href="https://www.wolframalpha.com/">https://www.wolframalpha.com/</a></p><ul><li>ä¾‹1 è¾“å…¥ f(n) &#x3D; f(n - 1) + c, f(1) &#x3D; c</li><li>ä¾‹2 è¾“å…¥ f(n) &#x3D; f(n - 1) + n, f(1) &#x3D; c</li><li>ä¾‹3 è¾“å…¥ f(n) &#x3D; f(n - 1) + n + c, f(1) &#x3D; c</li></ul><h2 id="2-4-é˜Ÿåˆ—"><a href="#2-4-é˜Ÿåˆ—" class="headerlink" title="2.4 é˜Ÿåˆ—"></a>2.4 é˜Ÿåˆ—</h2><h3 id="1-æ¦‚è¿°-3"><a href="#1-æ¦‚è¿°-3" class="headerlink" title="1) æ¦‚è¿°"></a>1) æ¦‚è¿°</h3><p>è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œqueue æ˜¯ä»¥é¡ºåºçš„æ–¹å¼ç»´æŠ¤çš„ä¸€ç»„æ•°æ®é›†åˆï¼Œåœ¨ä¸€ç«¯æ·»åŠ æ•°æ®ï¼Œä»å¦ä¸€ç«¯ç§»é™¤æ•°æ®ã€‚ä¹ æƒ¯æ¥è¯´ï¼Œæ·»åŠ çš„ä¸€ç«¯ç§°ä¸º<strong>å°¾</strong>ï¼Œç§»é™¤çš„ä¸€ç«¯ç§°ä¸º<strong>å¤´</strong>ï¼Œå°±å¦‚åŒç”Ÿæ´»ä¸­çš„æ’é˜Ÿä¹°å•†å“</p><blockquote><p>In computer science, a <strong>queue</strong> is a collection of entities that are maintained in a sequence and can be modified by  the addition of entities at one end of the sequence and the removal of  entities from the other end of the sequence</p></blockquote><p>å…ˆå®šä¹‰ä¸€ä¸ªç®€åŒ–çš„é˜Ÿåˆ—æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Queue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é˜Ÿåˆ—å°¾æ’å…¥å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å¾…æ’å…¥å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ’å…¥æˆåŠŸè¿”å› true, æ’å…¥å¤±è´¥è¿”å› false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»å¯¹åˆ—å¤´è·å–å€¼, å¹¶ç§»é™¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœé˜Ÿåˆ—éç©ºè¿”å›å¯¹å¤´å€¼, å¦åˆ™è¿”å› null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    E <span class="title function_">poll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»å¯¹åˆ—å¤´è·å–å€¼, ä¸ç§»é™¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœé˜Ÿåˆ—éç©ºè¿”å›å¯¹å¤´å€¼, å¦åˆ™è¿”å› null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    E <span class="title function_">peek</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç©ºè¿”å› true, å¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦å·²æ»¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ»¡è¿”å› true, å¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-é“¾è¡¨å®ç°"><a href="#2-é“¾è¡¨å®ç°" class="headerlink" title="2) é“¾è¡¨å®ç°"></a>2) é“¾è¡¨å®ç°</h3><p>ä¸‹é¢ä»¥<strong>å•å‘ç¯å½¢å¸¦å“¨å…µ</strong>é“¾è¡¨æ–¹å¼æ¥å®ç°é˜Ÿåˆ—</p><p><img src="https://i0.hdslb.com/bfs/article/d59e71bf2a61a28720036401dc53f84b645325325.png" alt="image-20221230150105089">â€‹</p><p><img src="https://i0.hdslb.com/bfs/article/e4afc2a3135e3de3fee7a6897ef41f7f645325325.png" alt="image-20221230150141318">â€‹</p><p><img src="https://i0.hdslb.com/bfs/article/09b359ab8e77c21eaf5f5f7c86811ad5645325325.png" alt="image-20221230150153271">â€‹</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListQueue</span>&lt;E&gt;</span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">        E value;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(E value, Node&lt;E&gt; next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node&lt;E&gt; head = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">private</span> Node&lt;E&gt; tail = head;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">capacity</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        tail.next = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedListQueue</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedListQueue</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;E&gt; added = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(value, head);</span><br><span class="line">        tail.next = added;</span><br><span class="line">        tail = added;</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;E&gt; first = head.next;</span><br><span class="line">        head.next = first.next;</span><br><span class="line">        <span class="keyword">if</span> (first == tail) &#123;</span><br><span class="line">            tail = head;</span><br><span class="line">        &#125;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> first.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head.next.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> head == tail;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            Node&lt;E&gt; p = head.next;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != head;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> p.value;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-ç¯å½¢æ•°ç»„å®ç°"><a href="#3-ç¯å½¢æ•°ç»„å®ç°" class="headerlink" title="3) ç¯å½¢æ•°ç»„å®ç°"></a>3) ç¯å½¢æ•°ç»„å®ç°</h3><p><strong>å¥½å¤„</strong></p><ol><li>å¯¹æ¯”æ™®é€šæ•°ç»„ï¼Œèµ·ç‚¹å’Œç»ˆç‚¹æ›´ä¸ºè‡ªç”±ï¼Œä¸ç”¨è€ƒè™‘æ•°æ®ç§»åŠ¨</li><li>â€œç¯â€æ„å‘³ç€ä¸ä¼šå­˜åœ¨ã€è¶Šç•Œã€‘é—®é¢˜</li><li>æ•°ç»„æ€§èƒ½æ›´ä½³</li><li>ç¯å½¢æ•°ç»„æ¯”è¾ƒé€‚åˆå®ç°æœ‰ç•Œé˜Ÿåˆ—ã€RingBuffer ç­‰</li></ol><p><img src="https://i0.hdslb.com/bfs/article/6812f585a3f71b3641c15831f057989a645325325.png" alt="image-20221228175413998">â€‹</p><p><strong>ä¸‹æ ‡è®¡ç®—</strong></p><p>ä¾‹å¦‚ï¼Œæ•°ç»„é•¿åº¦æ˜¯ 5ï¼Œå½“å‰ä½ç½®æ˜¯ 3 ï¼Œå‘å‰èµ° 2 æ­¥ï¼Œæ­¤æ—¶ä¸‹æ ‡ä¸º $(3 + 2)%5 &#x3D; 0$</p><p><img src="https://i0.hdslb.com/bfs/article/7a47ddcdff2cbbb903af07dcc900de12645325325.png" alt="image-20221228180357257">â€‹</p><p>$$<br>(cur + step) % length<br>$$</p><ul><li>cur å½“å‰æŒ‡é’ˆä½ç½®</li><li>step å‰è¿›æ­¥æ•°</li><li>length æ•°ç»„é•¿åº¦</li></ul><blockquote><p>æ³¨æ„ï¼š</p><ul><li>å¦‚æœ step &#x3D; 1ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œå¯ä»¥åœ¨ &gt;&#x3D; length æ—¶é‡ç½®ä¸º 0 å³å¯</li></ul></blockquote><p><strong>åˆ¤æ–­ç©º</strong></p><p><img src="https://i0.hdslb.com/bfs/article/d13b00fe9aa4759a6f85476485dae63b645325325.png" alt="image-20221231081009018">â€‹</p><p><strong>åˆ¤æ–­æ»¡</strong></p><p><img src="https://i0.hdslb.com/bfs/article/247e74b382c376d666ba3ae22724e899645325325.png" alt="image-20221231080909475">â€‹</p><p>æ»¡ä¹‹åçš„ç­–ç•¥å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚å†³å®š</p><ul><li>ä¾‹å¦‚æˆ‘ä»¬è¦å®ç°çš„ç¯å½¢é˜Ÿåˆ—ï¼Œæ»¡ä¹‹åå°±æ‹’ç»å…¥é˜Ÿ</li></ul><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayQueue</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt;, Iterable&lt;E&gt;&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">head</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> length;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayQueue</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        length = capacity + <span class="number">1</span>;</span><br><span class="line">        array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[length];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        array[tail] = value;</span><br><span class="line">        tail = (tail + <span class="number">1</span>) % length;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[head];</span><br><span class="line">        head = (head + <span class="number">1</span>) % length;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[head];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> tail == head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (tail + <span class="number">1</span>) % length == head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[p];</span><br><span class="line">                p = (p + <span class="number">1</span>) % array.length;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆ¤æ–­ç©ºã€æ»¡æ–¹æ³•2</strong></p><p>å¼•å…¥ size</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayQueue2</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">head</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> capacity;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayQueue2</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">        array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        array[tail] = value;</span><br><span class="line">        tail = (tail + <span class="number">1</span>) % capacity;</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[head];</span><br><span class="line">        head = (head + <span class="number">1</span>) % capacity;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[head];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[p];</span><br><span class="line">                p = (p + <span class="number">1</span>) % capacity;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆ¤æ–­ç©ºã€æ»¡æ–¹æ³•3</strong></p><ul><li><p>head å’Œ tail ä¸æ–­é€’å¢ï¼Œç”¨åˆ°ç´¢å¼•æ—¶ï¼Œå†ç”¨å®ƒä»¬è¿›è¡Œè®¡ç®—ï¼Œä¸¤ä¸ªé—®é¢˜</p><ul><li>å¦‚ä½•ä¿è¯ head å’Œ tail è‡ªå¢è¶…è¿‡æ­£æ•´æ•°æœ€å¤§å€¼çš„æ­£ç¡®æ€§</li><li>å¦‚ä½•è®©å–æ¨¡è¿ç®—æ€§èƒ½æ›´é«˜</li></ul></li><li><p>ç­”æ¡ˆï¼šè®© capacity ä¸º 2 çš„å¹‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayQueue3</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">head</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> capacity;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayQueue3</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ((capacity &amp; capacity - <span class="number">1</span>) != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;capacity å¿…é¡»ä¸º 2 çš„å¹‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">        array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="built_in">this</span>.capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        array[tail &amp; capacity - <span class="number">1</span>] = value;</span><br><span class="line">        tail++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[head &amp; capacity - <span class="number">1</span>];</span><br><span class="line">        head++;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[head &amp; capacity - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> tail - head == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> tail - head == capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[p &amp; capacity - <span class="number">1</span>];</span><br><span class="line">                p++;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¹ é¢˜-2"><a href="#ä¹ é¢˜-2" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-äºŒå‰æ ‘å±‚åºéå†-Leetcode-102"><a href="#E01-äºŒå‰æ ‘å±‚åºéå†-Leetcode-102" class="headerlink" title="E01. äºŒå‰æ ‘å±‚åºéå†-Leetcode 102"></a>E01. äºŒå‰æ ‘å±‚åºéå†-Leetcode 102</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        LinkedListQueue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedListQueue</span>&lt;&gt;();</span><br><span class="line">        queue.offer(root);</span><br><span class="line">        <span class="type">int</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="number">1</span>;<span class="comment">// æœ¬å±‚èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// ä¸‹å±‚èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line">            List&lt;Integer&gt; level = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; c1; i++) &#123;</span><br><span class="line">                <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">                level.add(node.val);</span><br><span class="line">                <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                    queue.offer(node.left);</span><br><span class="line">                    c2++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                    queue.offer(node.right);</span><br><span class="line">                    c2++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            c1 = c2;</span><br><span class="line">            result.add(level);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">LinkedListQueue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">            E value;</span><br><span class="line">            Node&lt;E&gt; next;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(E value, Node&lt;E&gt; next)</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.value = value;</span><br><span class="line">                <span class="built_in">this</span>.next = next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> Node&lt;E&gt; head = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">private</span> Node&lt;E&gt; tail = head;</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> <span class="variable">capacity</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line">            tail.next = head;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">LinkedListQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">LinkedListQueue</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            Node&lt;E&gt; added = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(value, head);</span><br><span class="line">            tail.next = added;</span><br><span class="line">            tail = added;</span><br><span class="line">            size++;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            Node&lt;E&gt; first = head.next;</span><br><span class="line">            head.next = first.next;</span><br><span class="line">            <span class="keyword">if</span> (first == tail) &#123;</span><br><span class="line">                tail = head;</span><br><span class="line">            &#125;</span><br><span class="line">            size--;</span><br><span class="line">            <span class="keyword">return</span> first.value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> head.next.value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> head == tail;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> size == capacity;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Ex1-è®¾è®¡é˜Ÿåˆ—-Leetcode-622"><a href="#Ex1-è®¾è®¡é˜Ÿåˆ—-Leetcode-622" class="headerlink" title="Ex1. è®¾è®¡é˜Ÿåˆ—-Leetcode 622"></a>Ex1. è®¾è®¡é˜Ÿåˆ—-Leetcode 622</h4><p>ç”±äºä¸è¯¾å ‚ä¾‹é¢˜å·®åˆ«ä¸å¤§ï¼Œè¿™é‡Œåªç»™å‡ºå‚è€ƒè§£ç­”</p><p>åŸºäºé“¾è¡¨çš„å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Ex1Leetcode622</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        Node next;</span><br><span class="line">        Node(<span class="type">int</span> value, Node next) &#123;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Node</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(-<span class="number">1</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Node</span> <span class="variable">tail</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">capacity</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        tail.next = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Ex1Leetcode622</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">enQueue</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">added</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(value, head);</span><br><span class="line">        tail.next = added;</span><br><span class="line">        tail = added;</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">deQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">first</span> <span class="operator">=</span> head.next;</span><br><span class="line">        head.next = first.next;</span><br><span class="line">        <span class="keyword">if</span> (first == tail) &#123;</span><br><span class="line">            tail = head;</span><br><span class="line">        &#125;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">Front</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head.next.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">Rear</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> tail.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> head == tail;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == capacity;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>Leetcode çš„å®ç°é‡Œ deQueueï¼ˆå‡ºé˜Ÿï¼‰è¿”å›å€¼æ˜¯å¸ƒå°”å€¼ï¼Œå¹¶ä¸ä¼šè¿”å›é˜Ÿå¤´å…ƒç´ </li><li>å®ƒæœŸæœ›ç”¨æ³•æ˜¯å…ˆç”¨ Front è¿”å›å¯¹å¤´å…ƒç´ ï¼Œå† deQueue å‡ºé˜Ÿ</li></ul><h2 id="2-5-æ ˆ"><a href="#2-5-æ ˆ" class="headerlink" title="2.5 æ ˆ"></a>2.5 æ ˆ</h2><h3 id="1-æ¦‚è¿°-4"><a href="#1-æ¦‚è¿°-4" class="headerlink" title="1) æ¦‚è¿°"></a>1) æ¦‚è¿°</h3><p>è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œ<strong>stack</strong> æ˜¯ä¸€ç§çº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œåªèƒ½åœ¨å…¶ä¸€ç«¯æ·»åŠ æ•°æ®å’Œç§»é™¤æ•°æ®ã€‚ä¹ æƒ¯æ¥è¯´ï¼Œè¿™ä¸€ç«¯ç§°ä¹‹ä¸º<strong>æ ˆé¡¶</strong>ï¼Œå¦ä¸€ç«¯ä¸èƒ½æ“ä½œæ•°æ®çš„ç§°ä¹‹ä¸º<strong>æ ˆåº•</strong>ï¼Œå°±å¦‚åŒç”Ÿæ´»ä¸­çš„ä¸€æ‘ä¹¦</p><p>å…ˆæä¾›ä¸€ä¸ªæ ˆæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Stack</span>&lt;E&gt; &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘æ ˆé¡¶å‹å…¥å…ƒç´ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å¾…å‹å…¥å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å‹å…¥æˆåŠŸè¿”å› true, å¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">push</span><span class="params">(E value)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»æ ˆé¡¶å¼¹å‡ºå…ƒç´ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ ˆéç©ºè¿”å›æ ˆé¡¶å…ƒç´ , æ ˆä¸ºç©ºè¿”å› null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    E <span class="title function_">pop</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æ ˆé¡¶å…ƒç´ , ä¸å¼¹å‡º</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ ˆéç©ºè¿”å›æ ˆé¡¶å…ƒç´ , æ ˆä¸ºç©ºè¿”å› null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    E <span class="title function_">peek</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç©ºè¿”å› true, å¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­æ ˆæ˜¯å¦å·²æ»¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ»¡è¿”å› true, å¦åˆ™è¿”å› false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-é“¾è¡¨å®ç°-1"><a href="#2-é“¾è¡¨å®ç°-1" class="headerlink" title="2) é“¾è¡¨å®ç°"></a>2) é“¾è¡¨å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListStack</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Stack</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> capacity;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Node&lt;E&gt; head = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedListStack</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">push</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        head.next = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(value, head.next);</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;E&gt; first = head.next;</span><br><span class="line">        head.next = first.next;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> first.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head.next.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> head.next == <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            Node&lt;E&gt; p = head.next;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> p.value;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">        E value;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(E value, Node&lt;E&gt; next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-æ•°ç»„å®ç°"><a href="#3-æ•°ç»„å®ç°" class="headerlink" title="3) æ•°ç»„å®ç°"></a>3) æ•°ç»„å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayStack</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Stack</span>&lt;E&gt;, Iterable&lt;E&gt;&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayStack</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">push</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        array[top++] = value;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[--top];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[top-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> top == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> top == array.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> top;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p &gt; <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> array[--p];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-åº”ç”¨"><a href="#4-åº”ç”¨" class="headerlink" title="4) åº”ç”¨"></a>4) åº”ç”¨</h3><p>æ¨¡æ‹Ÿå¦‚ä¸‹æ–¹æ³•è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;main1&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;main2&quot;</span>);</span><br><span class="line">    method1();</span><br><span class="line">    method2();</span><br><span class="line">    System.out.println(<span class="string">&quot;main3&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;method1&quot;</span>);</span><br><span class="line">    method3();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;method2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;method3&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨¡æ‹Ÿä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CPU</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Frame</span> &#123;</span><br><span class="line">        <span class="type">int</span> exit;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Frame</span><span class="params">(<span class="type">int</span> exit)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.exit = exit;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">pc</span> <span class="operator">=</span> <span class="number">1</span>; <span class="comment">// æ¨¡æ‹Ÿç¨‹åºè®¡æ•°å™¨ Program counter</span></span><br><span class="line">    <span class="keyword">static</span> ArrayStack&lt;Frame&gt; stack = <span class="keyword">new</span> <span class="title class_">ArrayStack</span>&lt;&gt;(<span class="number">100</span>); <span class="comment">// æ¨¡æ‹Ÿæ–¹æ³•è°ƒç”¨æ ˆ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        stack.push(<span class="keyword">new</span> <span class="title class_">Frame</span>(-<span class="number">1</span>));</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (pc) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span> -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;main1&quot;</span>);</span><br><span class="line">                    pc++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span> -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;main2&quot;</span>);</span><br><span class="line">                    pc++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span> -&gt; &#123;</span><br><span class="line">                    stack.push(<span class="keyword">new</span> <span class="title class_">Frame</span>(pc + <span class="number">1</span>));</span><br><span class="line">                    pc = <span class="number">100</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span> -&gt; &#123;</span><br><span class="line">                    stack.push(<span class="keyword">new</span> <span class="title class_">Frame</span>(pc + <span class="number">1</span>));</span><br><span class="line">                    pc = <span class="number">200</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">5</span> -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;main3&quot;</span>);</span><br><span class="line">                    pc = stack.pop().exit;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">100</span> -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;method1&quot;</span>);</span><br><span class="line">                    stack.push(<span class="keyword">new</span> <span class="title class_">Frame</span>(pc + <span class="number">1</span>));</span><br><span class="line">                    pc = <span class="number">300</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">101</span> -&gt; &#123;</span><br><span class="line">                    pc = stack.pop().exit;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">200</span> -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;method2&quot;</span>);</span><br><span class="line">                    pc = stack.pop().exit;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">300</span> -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;method3&quot;</span>);</span><br><span class="line">                    pc = stack.pop().exit;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¹ é¢˜-3"><a href="#ä¹ é¢˜-3" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-æœ‰æ•ˆçš„æ‹¬å·-Leetcode-20"><a href="#E01-æœ‰æ•ˆçš„æ‹¬å·-Leetcode-20" class="headerlink" title="E01. æœ‰æ•ˆçš„æ‹¬å·-Leetcode 20"></a>E01. æœ‰æ•ˆçš„æ‹¬å·-Leetcode 20</h4><p>ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å¯èƒ½å‡ºç° <code>[]</code>â€‹ <code>()</code>â€‹ å’Œ <code>&#123;&#125;</code>â€‹ ä¸‰ç§æ‹¬å·ï¼Œåˆ¤æ–­è¯¥æ‹¬å·æ˜¯å¦æœ‰æ•ˆ</p><p>æœ‰æ•ˆçš„ä¾‹å­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">()[]&#123;&#125;</span><br><span class="line"></span><br><span class="line">([&#123;&#125;])</span><br><span class="line"></span><br><span class="line">()</span><br></pre></td></tr></table></figure><p>æ— æ•ˆçš„ä¾‹å­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[)</span><br><span class="line"></span><br><span class="line">([)]</span><br><span class="line"></span><br><span class="line">([]</span><br></pre></td></tr></table></figure><p>æ€è·¯</p><ul><li><p>é‡åˆ°å·¦æ‹¬å·, æŠŠè¦é…å¯¹çš„å³æ‹¬å·æ”¾å…¥æ ˆé¡¶</p></li><li><p>é‡åˆ°å³æ‹¬å·, è‹¥æ­¤æ—¶æ ˆä¸ºç©º, è¿”å› falseï¼Œå¦åˆ™æŠŠå®ƒä¸æ ˆé¡¶å…ƒç´ å¯¹æ¯”</p><ul><li>è‹¥ç›¸ç­‰, æ ˆé¡¶å…ƒç´ å¼¹å‡º, ç»§ç»­å¯¹æ¯”ä¸‹ä¸€ç»„</li><li>è‹¥ä¸ç­‰, æ— æ•ˆæ‹¬å·ç›´æ¥è¿”å› false</li></ul></li><li><p>å¾ªç¯ç»“æŸ</p><ul><li>è‹¥æ ˆä¸ºç©º, è¡¨ç¤ºæ‰€æœ‰æ‹¬å·éƒ½é…ä¸Šå¯¹, è¿”å› true</li><li>è‹¥æ ˆä¸ä¸ºç©º, è¡¨ç¤ºå³æ²¡é…å¯¹çš„æ‹¬å·, åº”è¿”å› false</li></ul></li></ul><p>ç­”æ¡ˆï¼ˆç”¨åˆ°äº†è¯¾å ‚æ¡ˆä¾‹ä¸­çš„ ArrayStack ç±»ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    ArrayStack&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">ArrayStack</span>&lt;&gt;(s.length() / <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> s.charAt(i);</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">            stack.push(<span class="string">&#x27;)&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;[&#x27;</span>) &#123;</span><br><span class="line">            stack.push(<span class="string">&#x27;]&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">&#x27;&#123;&#x27;</span>) &#123;</span><br><span class="line">            stack.push(<span class="string">&#x27;&#125;&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!stack.isEmpty() &amp;&amp; stack.peek() == c) &#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E02-åç¼€è¡¨è¾¾å¼æ±‚å€¼-Leetcode-120"><a href="#E02-åç¼€è¡¨è¾¾å¼æ±‚å€¼-Leetcode-120" class="headerlink" title="E02. åç¼€è¡¨è¾¾å¼æ±‚å€¼-Leetcode 120"></a>E02. åç¼€è¡¨è¾¾å¼æ±‚å€¼-Leetcode 120</h4><p>åç¼€è¡¨è¾¾å¼ä¹Ÿç§°ä¸ºé€†æ³¢å…°è¡¨è¾¾å¼ï¼Œå³è¿ç®—ç¬¦å†™åœ¨åé¢</p><ul><li>ä»å·¦å‘å³è¿›è¡Œè®¡ç®—</li><li>ä¸å¿…è€ƒè™‘è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼Œå³ä¸ç”¨åŒ…å«æ‹¬å·</li></ul><p>ç¤ºä¾‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼štokens = [&quot;2&quot;,&quot;1&quot;,&quot;+&quot;,&quot;3&quot;,&quot;*&quot;]</span><br><span class="line">è¾“å‡ºï¼š9</span><br><span class="line">å³ï¼š(2 + 1) * 3</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼štokens = [&quot;4&quot;,&quot;13&quot;,&quot;5&quot;,&quot;/&quot;,&quot;+&quot;]</span><br><span class="line">è¾“å‡ºï¼š6</span><br><span class="line">å³ï¼š4 + (13 / 5)</span><br></pre></td></tr></table></figure><p>é¢˜ç›®å‡è®¾</p><ul><li>æ•°å­—éƒ½è§†ä¸ºæ•´æ•°</li><li>æ•°å­—å’Œè¿ç®—ç¬¦ä¸ªæ•°ç»™å®šæ­£ç¡®ï¼Œä¸ä¼šæœ‰é™¤é›¶å‘ç”Ÿ</li></ul><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evalRPN</span><span class="params">(String[] tokens)</span> &#123;</span><br><span class="line">    LinkedList&lt;Integer&gt; numbers = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String t : tokens) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (t) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;+&quot;</span> -&gt; &#123;</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> numbers.pop();</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> numbers.pop();</span><br><span class="line">                numbers.push(a + b);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;-&quot;</span> -&gt; &#123;</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> numbers.pop();</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> numbers.pop();</span><br><span class="line">                numbers.push(a - b);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;*&quot;</span> -&gt; &#123;</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> numbers.pop();</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> numbers.pop();</span><br><span class="line">                numbers.push(a * b);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;/&quot;</span> -&gt; &#123;</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> numbers.pop();</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> numbers.pop();</span><br><span class="line">                numbers.push(a / b);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">default</span> -&gt; numbers.push(Integer.parseInt(t));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> numbers.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E03-ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€"><a href="#E03-ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€" class="headerlink" title="E03. ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€"></a>E03. ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E03InfixToSuffix</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æ€è·¯</span></span><br><span class="line"><span class="comment">        1. é‡åˆ°æ•°å­—, æ‹¼ä¸²</span></span><br><span class="line"><span class="comment">        2. é‡åˆ° + - * /</span></span><br><span class="line"><span class="comment">            - ä¼˜å…ˆçº§é«˜äºæ ˆé¡¶è¿ç®—ç¬¦ å…¥æ ˆ</span></span><br><span class="line"><span class="comment">            - å¦åˆ™å°†æ ˆä¸­é«˜çº§æˆ–å¹³çº§è¿ç®—ç¬¦å‡ºæ ˆæ‹¼ä¸², æœ¬è¿ç®—ç¬¦å…¥æ ˆ</span></span><br><span class="line"><span class="comment">        3. éå†å®Œæˆ, æ ˆä¸­å‰©ä½™è¿ç®—ç¬¦å‡ºæ ˆæ‹¼ä¸²</span></span><br><span class="line"><span class="comment">            - å…ˆå‡ºæ ˆ,æ„å‘³ç€ä¼˜å…ˆè¿ç®—</span></span><br><span class="line"><span class="comment">        4. å¸¦ ()</span></span><br><span class="line"><span class="comment">            - å·¦æ‹¬å·ç›´æ¥å…¥æ ˆ</span></span><br><span class="line"><span class="comment">            - å³æ‹¬å·è¦å°†æ ˆä¸­ç›´è‡³å·¦æ‹¬å·ä¸ºæ­¢çš„è¿ç®—ç¬¦å‡ºæ ˆæ‹¼ä¸²</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        |   |</span></span><br><span class="line"><span class="comment">        |   |</span></span><br><span class="line"><span class="comment">        |   |</span></span><br><span class="line"><span class="comment">        _____</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        a+b</span></span><br><span class="line"><span class="comment">        a+b-c</span></span><br><span class="line"><span class="comment">        a+b*c</span></span><br><span class="line"><span class="comment">        a*b+c</span></span><br><span class="line"><span class="comment">        (a+b)*c</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(infixToSuffix(<span class="string">&quot;a+b&quot;</span>));</span><br><span class="line">        System.out.println(infixToSuffix(<span class="string">&quot;a+b-c&quot;</span>));</span><br><span class="line">        System.out.println(infixToSuffix(<span class="string">&quot;a+b*c&quot;</span>));</span><br><span class="line">        System.out.println(infixToSuffix(<span class="string">&quot;a*b-c&quot;</span>));</span><br><span class="line">        System.out.println(infixToSuffix(<span class="string">&quot;(a+b)*c&quot;</span>));</span><br><span class="line">        System.out.println(infixToSuffix(<span class="string">&quot;a+b*c+(d*e+f)*g&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> String <span class="title function_">infixToSuffix</span><span class="params">(String exp)</span> &#123;</span><br><span class="line">        LinkedList&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(exp.length());</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; exp.length(); i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> exp.charAt(i);</span><br><span class="line">            <span class="keyword">switch</span> (c) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;/&#x27;</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">                        stack.push(c);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (priority(c) &gt; priority(stack.peek())) &#123;</span><br><span class="line">                            stack.push(c);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">while</span> (!stack.isEmpty() </span><br><span class="line">                                   &amp;&amp; priority(stack.peek()) &gt;= priority(c)) &#123;</span><br><span class="line">                                sb.append(stack.pop());</span><br><span class="line">                            &#125;</span><br><span class="line">                            stack.push(c);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;(&#x27;</span> -&gt; &#123;</span><br><span class="line">                    stack.push(c);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;)&#x27;</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; stack.peek() != <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">                        sb.append(stack.pop());</span><br><span class="line">                    &#125;</span><br><span class="line">                    stack.pop();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">default</span> -&gt; &#123;</span><br><span class="line">                    sb.append(c);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            sb.append(stack.pop());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">priority</span><span class="params">(<span class="type">char</span> c)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">switch</span> (c) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;(&#x27;</span> -&gt; <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;/&#x27;</span> -&gt; <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>, <span class="string">&#x27;-&#x27;</span> -&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">default</span> -&gt; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;ä¸åˆæ³•å­—ç¬¦:&quot;</span> + c);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E04-åŒæ ˆæ¨¡æ‹Ÿé˜Ÿåˆ—-Leetcode-232"><a href="#E04-åŒæ ˆæ¨¡æ‹Ÿé˜Ÿåˆ—-Leetcode-232" class="headerlink" title="E04. åŒæ ˆæ¨¡æ‹Ÿé˜Ÿåˆ—-Leetcode 232"></a>E04. åŒæ ˆæ¨¡æ‹Ÿé˜Ÿåˆ—-Leetcode 232</h4><p>ç»™åŠ›æ‰£é¢˜ç›®ç”¨çš„<strong>è‡ªå®ç°</strong>æ ˆï¼Œå¯ä»¥å®šä¹‰ä¸ºé™æ€å†…éƒ¨ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayStack</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> top; <span class="comment">// æ ˆé¡¶æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayStack</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">push</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        array[top++] = value;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[--top];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[top - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> top == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> top == array.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒè§£ç­”ï¼Œæ³¨æ„ï¼šé¢˜ç›®å·²è¯´æ˜</p><ul><li>è°ƒç”¨ pushã€pop ç­‰æ–¹æ³•çš„æ¬¡æ•°æœ€å¤š 100</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E04Leetcode232</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        é˜Ÿåˆ—å¤´      é˜Ÿåˆ—å°¾</span></span><br><span class="line"><span class="comment">        s1       s2</span></span><br><span class="line"><span class="comment">        é¡¶   åº•   åº•   é¡¶</span></span><br><span class="line"><span class="comment">                 abc</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        push(a)</span></span><br><span class="line"><span class="comment">        push(b)</span></span><br><span class="line"><span class="comment">        push(c)</span></span><br><span class="line"><span class="comment">        pop()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ArrayStack&lt;Integer&gt; s1 = <span class="keyword">new</span> <span class="title class_">ArrayStack</span>&lt;&gt;(<span class="number">100</span>);</span><br><span class="line">    ArrayStack&lt;Integer&gt; s2 = <span class="keyword">new</span> <span class="title class_">ArrayStack</span>&lt;&gt;(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        s2.push(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s1.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!s2.isEmpty()) &#123;</span><br><span class="line">                s1.push(s2.pop());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s1.pop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s1.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!s2.isEmpty()) &#123;</span><br><span class="line">                s1.push(s2.pop());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s1.peek();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> s1.isEmpty() &amp;&amp; s2.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E05-å•é˜Ÿåˆ—æ¨¡æ‹Ÿæ ˆ-Leetcode-225"><a href="#E05-å•é˜Ÿåˆ—æ¨¡æ‹Ÿæ ˆ-Leetcode-225" class="headerlink" title="E05. å•é˜Ÿåˆ—æ¨¡æ‹Ÿæ ˆ-Leetcode 225"></a>E05. å•é˜Ÿåˆ—æ¨¡æ‹Ÿæ ˆ-Leetcode 225</h4><p>ç»™åŠ›æ‰£é¢˜ç›®ç”¨çš„<strong>è‡ªå®ç°</strong>é˜Ÿåˆ—ï¼Œå¯ä»¥å®šä¹‰ä¸ºé™æ€å†…éƒ¨ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayQueue3</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="type">int</span> <span class="variable">head</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayQueue3</span><span class="params">(<span class="type">int</span> c)</span> &#123;</span><br><span class="line">        c -= <span class="number">1</span>;</span><br><span class="line">        c |= c &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        c |= c &gt;&gt; <span class="number">2</span>;</span><br><span class="line">        c |= c &gt;&gt; <span class="number">4</span>;</span><br><span class="line">        c |= c &gt;&gt; <span class="number">8</span>;</span><br><span class="line">        c |= c &gt;&gt; <span class="number">16</span>;</span><br><span class="line">        c += <span class="number">1</span>;</span><br><span class="line">        array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[c];</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;    </span><br><span class="line">        array[tail &amp; (array.length - <span class="number">1</span>)] = value;</span><br><span class="line">        tail++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> array[head &amp; (array.length - <span class="number">1</span>)];</span><br><span class="line">        head++;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[head &amp; (array.length - <span class="number">1</span>)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> head == tail;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> tail - head == array.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒè§£ç­”ï¼Œæ³¨æ„ï¼šé¢˜ç›®å·²è¯´æ˜</p><ul><li>è°ƒç”¨ pushã€pop ç­‰æ–¹æ³•çš„æ¬¡æ•°æœ€å¤š 100</li><li>æ¯æ¬¡è°ƒç”¨ pop å’Œ top éƒ½èƒ½ä¿è¯æ ˆä¸ä¸ºç©º</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E05Leetcode225</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        é˜Ÿåˆ—å¤´     é˜Ÿåˆ—å°¾</span></span><br><span class="line"><span class="comment">        cba</span></span><br><span class="line"><span class="comment">        é¡¶           åº•</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        queue.offer(a)</span></span><br><span class="line"><span class="comment">        queue.offer(b)</span></span><br><span class="line"><span class="comment">        queue.offer(c)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ArrayQueue3&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">ArrayQueue3</span>&lt;&gt;(<span class="number">100</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        queue.offer(x);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            queue.offer(queue.poll());</span><br><span class="line">        &#125;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> queue.poll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">top</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> queue.peek();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> queue.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-6-åŒç«¯é˜Ÿåˆ—"><a href="#2-6-åŒç«¯é˜Ÿåˆ—" class="headerlink" title="2.6 åŒç«¯é˜Ÿåˆ—"></a>2.6 åŒç«¯é˜Ÿåˆ—</h2><h3 id="1-æ¦‚è¿°-5"><a href="#1-æ¦‚è¿°-5" class="headerlink" title="1) æ¦‚è¿°"></a>1) æ¦‚è¿°</h3><p>åŒç«¯é˜Ÿåˆ—ã€é˜Ÿåˆ—ã€æ ˆå¯¹æ¯”</p><table><thead><tr><th></th><th>å®šä¹‰</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>é˜Ÿåˆ—</td><td>ä¸€ç«¯åˆ é™¤ï¼ˆå¤´ï¼‰å¦ä¸€ç«¯æ·»åŠ ï¼ˆå°¾ï¼‰</td><td>First In First Out</td></tr><tr><td>æ ˆ</td><td>ä¸€ç«¯åˆ é™¤å’Œæ·»åŠ ï¼ˆé¡¶ï¼‰</td><td>Last In First Out</td></tr><tr><td>åŒç«¯é˜Ÿåˆ—</td><td>ä¸¤ç«¯éƒ½å¯ä»¥åˆ é™¤ã€æ·»åŠ </td><td></td></tr><tr><td>ä¼˜å…ˆçº§é˜Ÿåˆ—</td><td></td><td>ä¼˜å…ˆçº§é«˜è€…å…ˆå‡ºé˜Ÿ</td></tr><tr><td>å»¶æ—¶é˜Ÿåˆ—</td><td></td><td>æ ¹æ®å»¶æ—¶æ—¶é—´ç¡®å®šä¼˜å…ˆçº§</td></tr><tr><td>å¹¶å‘éé˜»å¡é˜Ÿåˆ—</td><td>é˜Ÿåˆ—ç©ºæˆ–æ»¡æ—¶ä¸é˜»å¡</td><td></td></tr><tr><td>å¹¶å‘é˜»å¡é˜Ÿåˆ—</td><td>é˜Ÿåˆ—ç©ºæ—¶åˆ é™¤é˜»å¡ã€é˜Ÿåˆ—æ»¡æ—¶æ·»åŠ é˜»å¡</td><td></td></tr></tbody></table><blockquote><p>æ³¨1ï¼š</p><ul><li>Java ä¸­ LinkedList å³ä¸ºå…¸å‹åŒç«¯é˜Ÿåˆ—å®ç°ï¼Œä¸è¿‡å®ƒåŒæ—¶å®ç°äº† Queue æ¥å£ï¼Œä¹Ÿæä¾›äº†æ ˆçš„ push pop ç­‰æ–¹æ³•</li></ul><p>æ³¨2ï¼š</p><ul><li><p>ä¸åŒè¯­è¨€ï¼Œæ“ä½œåŒç«¯é˜Ÿåˆ—çš„æ–¹æ³•å‘½åæœ‰æ‰€ä¸åŒï¼Œå‚è§ä¸‹è¡¨</p><table><thead><tr><th>æ“ä½œ</th><th>Java</th><th>JavaScript</th><th>C++</th><th>leetCode 641</th></tr></thead><tbody><tr><td>å°¾éƒ¨æ’å…¥</td><td>offerLast</td><td>push</td><td>push_back</td><td>insertLast</td></tr><tr><td>å¤´éƒ¨æ’å…¥</td><td>offerFirst</td><td>unshift</td><td>push_front</td><td>insertFront</td></tr><tr><td>å°¾éƒ¨ç§»é™¤</td><td>pollLast</td><td>pop</td><td>pop_back</td><td>deleteLast</td></tr><tr><td>å¤´éƒ¨ç§»é™¤</td><td>pollFirst</td><td>shift</td><td>pop_front</td><td>deleteFront</td></tr><tr><td>å°¾éƒ¨è·å–</td><td>peekLast</td><td>at(-1)</td><td>back</td><td>getRear</td></tr><tr><td>å¤´éƒ¨è·å–</td><td>peekFirst</td><td>at(0)</td><td>front</td><td>getFront</td></tr></tbody></table></li><li><p>åæ§½ä¸€ä¸‹ leetCode å‘½åæ¯”è¾ƒ low</p></li><li><p>å¸¸è§çš„å•è¯è¿˜æœ‰ enqueue å…¥é˜Ÿã€dequeue å‡ºé˜Ÿ</p></li></ul></blockquote><p><strong>æ¥å£å®šä¹‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Deque</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">offerFirst</span><span class="params">(E e)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">offerLast</span><span class="params">(E e)</span>;</span><br><span class="line"></span><br><span class="line">    E <span class="title function_">pollFirst</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    E <span class="title function_">pollLast</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    E <span class="title function_">peekFirst</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    E <span class="title function_">peekLast</span><span class="params">()</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-é“¾è¡¨å®ç°-2"><a href="#2-é“¾è¡¨å®ç°-2" class="headerlink" title="2) é“¾è¡¨å®ç°"></a>2) é“¾è¡¨å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŸºäºç¯å½¢é“¾è¡¨çš„åŒç«¯é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;E&gt; å…ƒç´ ç±»å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListDeque</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Deque</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offerFirst</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        size++;</span><br><span class="line">        Node&lt;E&gt; a = sentinel;</span><br><span class="line">        Node&lt;E&gt; b = sentinel.next;</span><br><span class="line">        Node&lt;E&gt; offered = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(a, e, b);</span><br><span class="line">        a.next = offered;</span><br><span class="line">        b.prev = offered;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offerLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        size++;</span><br><span class="line">        Node&lt;E&gt; a = sentinel.prev;</span><br><span class="line">        Node&lt;E&gt; b = sentinel;</span><br><span class="line">        Node&lt;E&gt; offered = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(a, e, b);</span><br><span class="line">        a.next = offered;</span><br><span class="line">        b.prev = offered;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pollFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;E&gt; a = sentinel;</span><br><span class="line">        Node&lt;E&gt; polled = sentinel.next;</span><br><span class="line">        Node&lt;E&gt; b = polled.next;</span><br><span class="line">        a.next = b;</span><br><span class="line">        b.prev = a;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> polled.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pollLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Node&lt;E&gt; polled = sentinel.prev;</span><br><span class="line">        Node&lt;E&gt; a = polled.prev;</span><br><span class="line">        Node&lt;E&gt; b = sentinel;</span><br><span class="line">        a.next = b;</span><br><span class="line">        b.prev = a;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> polled.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peekFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sentinel.next.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peekLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sentinel.prev.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            Node&lt;E&gt; p = sentinel.next;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != sentinel;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">value</span> <span class="operator">=</span> p.value;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">        Node&lt;E&gt; prev;</span><br><span class="line">        E value;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Node&lt;E&gt; prev, E value, Node&lt;E&gt; next)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.prev = prev;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Node&lt;E&gt; sentinel = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="type">int</span> capacity;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedListDeque</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        sentinel.next = sentinel;</span><br><span class="line">        sentinel.prev = sentinel;</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-æ•°ç»„å®ç°-1"><a href="#3-æ•°ç»„å®ç°-1" class="headerlink" title="3) æ•°ç»„å®ç°"></a>3) æ•°ç»„å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŸºäºå¾ªç¯æ•°ç»„å®ç°, ç‰¹ç‚¹</span></span><br><span class="line"><span class="comment"> * &lt;ul&gt;</span></span><br><span class="line"><span class="comment"> *     &lt;li&gt;tail åœä¸‹æ¥çš„ä½ç½®ä¸å­˜å‚¨, ä¼šæµªè´¹ä¸€ä¸ªä½ç½®&lt;/li&gt;</span></span><br><span class="line"><span class="comment"> * &lt;/ul&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;E&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDeque1</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Deque</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                    h</span></span><br><span class="line"><span class="comment">            t</span></span><br><span class="line"><span class="comment">        0   1   2   3</span></span><br><span class="line"><span class="comment">        b           a</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offerFirst</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        head = dec(head, array.length);</span><br><span class="line">        array[head] = e;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offerLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        array[tail] = e;</span><br><span class="line">        tail = inc(tail, array.length);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pollFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> array[head];</span><br><span class="line">        array[head] = <span class="literal">null</span>;</span><br><span class="line">        head = inc(head, array.length);</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">pollLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        tail = dec(tail, array.length);</span><br><span class="line">        <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> array[tail];</span><br><span class="line">        array[tail] = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peekFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[head];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peekLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[dec(tail, array.length)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> head == tail;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (tail &gt; head) &#123;</span><br><span class="line">            <span class="keyword">return</span> tail - head == array.length - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tail &lt; head) &#123;</span><br><span class="line">            <span class="keyword">return</span> head - tail == <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Iterator</span>&lt;E&gt;() &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> p != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> array[p];</span><br><span class="line">                p = inc(p, array.length);</span><br><span class="line">                <span class="keyword">return</span> e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    E[] array;</span><br><span class="line">    <span class="type">int</span> head;</span><br><span class="line">    <span class="type">int</span> tail;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayDeque1</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">inc</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> length)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i + <span class="number">1</span> &gt;= length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">dec</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> length)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i - <span class="number">1</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> length - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•°ç»„å®ç°ä¸­ï¼Œå¦‚æœå­˜å‚¨çš„æ˜¯åŸºæœ¬ç±»å‹ï¼Œé‚£ä¹ˆæ— éœ€è€ƒè™‘å†…å­˜é‡Šæ”¾ï¼Œä¾‹å¦‚</p><p><img src="https://i0.hdslb.com/bfs/article/017b3ee73b058e6c832d016bcd60b53b645325325.png" alt="image-20230110084245095">â€‹</p><p>ä½†å¦‚æœå­˜å‚¨çš„æ˜¯å¼•ç”¨ç±»å‹ï¼Œåº”å½“è®¾ç½®è¯¥ä½ç½®çš„å¼•ç”¨ä¸º nullï¼Œä»¥ä¾¿å†…å­˜åŠæ—¶é‡Šæ”¾</p><p><img src="https://i0.hdslb.com/bfs/article/28a9e93f33e15ac1ab17c61d9d2589b7645325325.png" alt="image-20230110084632543">â€‹</p><h3 id="ä¹ é¢˜-4"><a href="#ä¹ é¢˜-4" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-äºŒå‰æ ‘-Z-å­—å±‚åºéå†-Leetcode-103"><a href="#E01-äºŒå‰æ ‘-Z-å­—å±‚åºéå†-Leetcode-103" class="headerlink" title="E01. äºŒå‰æ ‘ Z å­—å±‚åºéå†-Leetcode 103"></a>E01. äºŒå‰æ ‘ Z å­—å±‚åºéå†-Leetcode 103</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E01Leetcode103</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">zigzagLevelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        queue.offer(root);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">leftToRight</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            LinkedList&lt;Integer&gt; deque = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; c1; i++) &#123;</span><br><span class="line">                <span class="type">TreeNode</span> <span class="variable">n</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">                <span class="keyword">if</span> (leftToRight) &#123;</span><br><span class="line">                    deque.offerLast(n.val);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    deque.offerFirst(n.val);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (n.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                    queue.offer(n.left);</span><br><span class="line">                    c2++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (n.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                    queue.offer(n.right);</span><br><span class="line">                    c2++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            c1 = c2;</span><br><span class="line">            leftToRight = !leftToRight;</span><br><span class="line">            result.add(deque);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">TreeNode</span>(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">4</span>),</span><br><span class="line">                        <span class="number">2</span>,</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">5</span>)</span><br><span class="line">                ),</span><br><span class="line">                <span class="number">1</span>,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">TreeNode</span>(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">6</span>),</span><br><span class="line">                        <span class="number">3</span>,</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">7</span>)</span><br><span class="line">                )</span><br><span class="line">        );</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; lists = <span class="keyword">new</span> <span class="title class_">E01Leetcode103</span>().zigzagLevelOrder(root);</span><br><span class="line">        <span class="keyword">for</span> (List&lt;Integer&gt; list : lists) &#123;</span><br><span class="line">            System.out.println(list);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Ex1-è®¾è®¡åŒç«¯é˜Ÿåˆ—-Leetcode-641"><a href="#Ex1-è®¾è®¡åŒç«¯é˜Ÿåˆ—-Leetcode-641" class="headerlink" title="Ex1. è®¾è®¡åŒç«¯é˜Ÿåˆ—-Leetcode 641"></a>Ex1. è®¾è®¡åŒç«¯é˜Ÿåˆ—-Leetcode 641</h4><p>ä¸è¯¾å ‚ä¾‹é¢˜ä¹Ÿæ˜¯å·®åˆ«ä¸å¤§ï¼Œç•¥</p><h2 id="2-7-ä¼˜å…ˆçº§é˜Ÿåˆ—"><a href="#2-7-ä¼˜å…ˆçº§é˜Ÿåˆ—" class="headerlink" title="2.7 ä¼˜å…ˆçº§é˜Ÿåˆ—"></a>2.7 ä¼˜å…ˆçº§é˜Ÿåˆ—</h2><h3 id="1-æ— åºæ•°ç»„å®ç°"><a href="#1-æ— åºæ•°ç»„å®ç°" class="headerlink" title="1) æ— åºæ•°ç»„å®ç°"></a>1) æ— åºæ•°ç»„å®ç°</h3><p><strong>è¦ç‚¹</strong></p><ol><li>å…¥é˜Ÿä¿æŒé¡ºåº</li><li>å‡ºé˜Ÿå‰æ‰¾åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„å‡ºé˜Ÿï¼Œç›¸å½“äºä¸€æ¬¡é€‰æ‹©æ’åº</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PriorityQueue1</span>&lt;E <span class="keyword">extends</span> <span class="title class_">Priority</span>&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    Priority[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PriorityQueue1</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = <span class="keyword">new</span> <span class="title class_">Priority</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">// O(1)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        array[size++] = e;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä¼˜å…ˆçº§æœ€é«˜çš„ç´¢å¼•å€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">selectMax</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (array[i].priority() &gt; array[max].priority()) &#123;</span><br><span class="line">                max = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">// O(n)</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> selectMax();</span><br><span class="line">        <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> (E) array[max];</span><br><span class="line">        remove(max);</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; size - <span class="number">1</span>) &#123;</span><br><span class="line">            System.arraycopy(array, index + <span class="number">1</span>,</span><br><span class="line">                    array, index, size - <span class="number">1</span> - index);</span><br><span class="line">        &#125;</span><br><span class="line">        array[--size] = <span class="literal">null</span>; <span class="comment">// help GC</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> selectMax();</span><br><span class="line">        <span class="keyword">return</span> (E) array[max];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == array.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è§†é¢‘ä¸­å¿˜è®°äº† help GCï¼Œæ³¨æ„ä¸€ä¸‹</li></ul><h3 id="2-æœ‰åºæ•°ç»„å®ç°"><a href="#2-æœ‰åºæ•°ç»„å®ç°" class="headerlink" title="2) æœ‰åºæ•°ç»„å®ç°"></a>2) æœ‰åºæ•°ç»„å®ç°</h3><p><strong>è¦ç‚¹</strong></p><ol><li>å…¥é˜Ÿåæ’å¥½åºï¼Œä¼˜å…ˆçº§æœ€é«˜çš„æ’åˆ—åœ¨å°¾éƒ¨</li><li>å‡ºé˜Ÿåªéœ€åˆ é™¤å°¾éƒ¨å…ƒç´ å³å¯</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PriorityQueue2</span>&lt;E <span class="keyword">extends</span> <span class="title class_">Priority</span>&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    Priority[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PriorityQueue2</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = <span class="keyword">new</span> <span class="title class_">Priority</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// O(n)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        insert(e);</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸€è½®æ’å…¥æ’åº</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; array[i].priority() &gt; e.priority()) &#123;</span><br><span class="line">            array[i + <span class="number">1</span>] = array[i];</span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line">        array[i + <span class="number">1</span>] = e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// O(1)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> (E) array[size - <span class="number">1</span>];</span><br><span class="line">        array[--size] = <span class="literal">null</span>; <span class="comment">// help GC</span></span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (E) array[size - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == array.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å †å®ç°"><a href="#3-å †å®ç°" class="headerlink" title="3) å †å®ç°"></a>3) å †å®ç°</h3><p>è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œå †æ˜¯ä¸€ç§åŸºäºæ ‘çš„æ•°æ®ç»“æ„ï¼Œé€šå¸¸ç”¨<strong>å®Œå…¨äºŒå‰æ ‘</strong>å®ç°ã€‚å †çš„ç‰¹æ€§å¦‚ä¸‹</p><ul><li>åœ¨å¤§é¡¶å †ä¸­ï¼Œä»»æ„èŠ‚ç‚¹ C ä¸å®ƒçš„çˆ¶èŠ‚ç‚¹ P ç¬¦åˆ $P.value \geq C.value$</li><li>è€Œå°é¡¶å †ä¸­ï¼Œä»»æ„èŠ‚ç‚¹ C ä¸å®ƒçš„çˆ¶èŠ‚ç‚¹ P ç¬¦åˆ $P.value \leq C.value$</li><li>æœ€é¡¶å±‚çš„èŠ‚ç‚¹ï¼ˆæ²¡æœ‰çˆ¶äº²ï¼‰ç§°ä¹‹ä¸º root æ ¹èŠ‚ç‚¹</li></ul><blockquote><p>In computer science, a <strong>heap</strong> is a specialized tree-based data structure which is essentially an almost complete tree that satisfies the <strong>heap property</strong>: in a <em>max heap</em>, for any given node C, if P is a parent node of C, then the <em>key</em> (the <em>value</em>) of P is greater than or equal to the key of C. In a <em>min heap</em>, the key of P is less than or equal to the key of C. The node at the â€œtopâ€ of the heap (with no parents) is called the <strong>root</strong> node</p></blockquote><p>ä¾‹1 - æ»¡äºŒå‰æ ‘ï¼ˆFull Binary Treeï¼‰ç‰¹ç‚¹ï¼šæ¯ä¸€å±‚éƒ½æ˜¯å¡«æ»¡çš„</p><p><img src="https://i0.hdslb.com/bfs/article/b78e04e569b25046e865599689f288a6645325325.png" alt="image-20230112171444699">â€‹</p><p>ä¾‹2 - å®Œå…¨äºŒå‰æ ‘ï¼ˆComplete Binary Treeï¼‰ç‰¹ç‚¹ï¼šæœ€åä¸€å±‚å¯èƒ½æœªå¡«æ»¡ï¼Œé å·¦å¯¹é½</p><p><img src="https://i0.hdslb.com/bfs/article/1d5a92578d281d52b850ff6670a12083645325325.png" alt="image-20230112171917135">â€‹</p><p>ä¾‹3 - å¤§é¡¶å †</p><p><img src="https://i0.hdslb.com/bfs/article/ca3977d57abf29207f8cbc278650885a645325325.png" alt="image-20230112170242265">â€‹</p><p>ä¾‹4 - å°é¡¶å †</p><p><img src="https://i0.hdslb.com/bfs/article/55a9fc94f86ff464d85e1dac9da88f38645325325.png" alt="image-20230112171236067">â€‹</p><p>å®Œå…¨äºŒå‰æ ‘å¯ä»¥ä½¿ç”¨æ•°ç»„æ¥è¡¨ç¤º</p><p><img src="https://i0.hdslb.com/bfs/article/743a232f7b8d63574ad65198a5e26af2645325325.png" alt="image-20230112174351649">â€‹</p><p>ç‰¹å¾</p><ul><li><p>å¦‚æœä»ç´¢å¼• 0 å¼€å§‹å­˜å‚¨èŠ‚ç‚¹æ•°æ®</p><ul><li>èŠ‚ç‚¹ $i$ çš„çˆ¶èŠ‚ç‚¹ä¸º $floor((i-1)&#x2F;2)$ï¼Œå½“ $i&gt;0$ æ—¶</li><li>èŠ‚ç‚¹ $i$ çš„å·¦å­èŠ‚ç‚¹ä¸º $2i+1$ï¼Œå³å­èŠ‚ç‚¹ä¸º $2i+2$ï¼Œå½“ç„¶å®ƒä»¬å¾— $&lt; size$</li></ul></li><li><p>å¦‚æœä»ç´¢å¼• 1 å¼€å§‹å­˜å‚¨èŠ‚ç‚¹æ•°æ®</p><ul><li>èŠ‚ç‚¹ $i$ çš„çˆ¶èŠ‚ç‚¹ä¸º $floor(i&#x2F;2)$ï¼Œå½“ $i &gt; 1$ æ—¶</li><li>èŠ‚ç‚¹ $i$ çš„å·¦å­èŠ‚ç‚¹ä¸º $2i$ï¼Œå³å­èŠ‚ç‚¹ä¸º $2i+1$ï¼ŒåŒæ ·å¾— $&lt; size$</li></ul></li></ul><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PriorityQueue4</span>&lt;E <span class="keyword">extends</span> <span class="title class_">Priority</span>&gt; <span class="keyword">implements</span> <span class="title class_">Queue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    Priority[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PriorityQueue4</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = <span class="keyword">new</span> <span class="title class_">Priority</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E offered)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">child</span> <span class="operator">=</span> size++;</span><br><span class="line">        <span class="type">int</span> <span class="variable">parent</span> <span class="operator">=</span> (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span> (child &gt; <span class="number">0</span> &amp;&amp; offered.priority() &gt; array[parent].priority()) &#123;</span><br><span class="line">            array[child] = array[parent];</span><br><span class="line">            child = parent;</span><br><span class="line">            parent = (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        array[child] = offered;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">Priority</span> <span class="variable">t</span> <span class="operator">=</span> array[i];</span><br><span class="line">        array[i] = array[j];</span><br><span class="line">        array[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(<span class="number">0</span>, size - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">        <span class="type">Priority</span> <span class="variable">e</span> <span class="operator">=</span> array[size];</span><br><span class="line">        array[size] = <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">        shiftDown(<span class="number">0</span>);    </span><br><span class="line">        <span class="keyword">return</span> (E) e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">shiftDown</span><span class="params">(<span class="type">int</span> parent)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">2</span> * parent + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> left + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> parent;</span><br><span class="line">        <span class="keyword">if</span> (left &lt; size &amp;&amp; array[left].priority() &gt; array[max].priority()) &#123;</span><br><span class="line">            max = left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (right &lt; size &amp;&amp; array[right].priority() &gt; array[max].priority()) &#123;</span><br><span class="line">            max = right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (max != parent) &#123;</span><br><span class="line">            swap(max, parent);</span><br><span class="line">            shiftDown(max);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (E) array[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == array.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¹ é¢˜-5"><a href="#ä¹ é¢˜-5" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-åˆå¹¶å¤šä¸ªæœ‰åºé“¾è¡¨-Leetcode-23"><a href="#E01-åˆå¹¶å¤šä¸ªæœ‰åºé“¾è¡¨-Leetcode-23" class="headerlink" title="E01. åˆå¹¶å¤šä¸ªæœ‰åºé“¾è¡¨-Leetcode 23"></a>E01. åˆå¹¶å¤šä¸ªæœ‰åºé“¾è¡¨-Leetcode 23</h4><p>è¿™é“é¢˜ç›®ä¹‹å‰è§£ç­”è¿‡ï¼Œç°åœ¨ç”¨åˆšå­¦çš„ä¼˜å…ˆçº§é˜Ÿåˆ—æ¥å®ç°ä¸€ä¸‹</p><p>é¢˜ç›®ä¸­è¦ä»å°åˆ°å¤§æ’åˆ—ï¼Œå› æ­¤é€‰æ‹©ç”¨å°é¡¶å †æ¥å®ç°ï¼Œè‡ªå®šä¹‰å°é¡¶å †å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinHeap</span> &#123;</span><br><span class="line"></span><br><span class="line">    ListNode[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MinHeap</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = <span class="keyword">new</span> <span class="title class_">ListNode</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(ListNode offered)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">child</span> <span class="operator">=</span> size++;</span><br><span class="line">        <span class="type">int</span> <span class="variable">parent</span> <span class="operator">=</span> (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span> (child &gt; <span class="number">0</span> &amp;&amp; offered.val &lt; array[parent].val) &#123;</span><br><span class="line">            array[child] = array[parent];</span><br><span class="line">            child = parent;</span><br><span class="line">            parent = (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        array[child] = offered;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(<span class="number">0</span>, size - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">e</span> <span class="operator">=</span> array[size];</span><br><span class="line">        array[size] = <span class="literal">null</span>; <span class="comment">// help GC</span></span><br><span class="line"></span><br><span class="line">        down(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">down</span><span class="params">(<span class="type">int</span> parent)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">2</span> * parent + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> left + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> parent;</span><br><span class="line">        <span class="keyword">if</span> (left &lt; size &amp;&amp; array[left].val &lt; array[min].val) &#123;</span><br><span class="line">            min = left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (right &lt; size &amp;&amp; array[right].val &lt; array[min].val) &#123;</span><br><span class="line">            min = right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (min != parent) &#123;</span><br><span class="line">            swap(min, parent);</span><br><span class="line">            down(min);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">t</span> <span class="operator">=</span> array[i];</span><br><span class="line">        array[i] = array[j];</span><br><span class="line">        array[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E01Leetcode23</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">mergeKLists</span><span class="params">(ListNode[] lists)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. ä½¿ç”¨ jdk çš„ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°</span></span><br><span class="line"><span class="comment">//        PriorityQueue&lt;ListNode&gt; queue = new PriorityQueue&lt;&gt;(Comparator.comparingInt(a -&gt; a.val));</span></span><br><span class="line">        <span class="comment">// 2. ä½¿ç”¨è‡ªå®šä¹‰å°é¡¶å †å®ç°</span></span><br><span class="line">        <span class="type">MinHeap</span> <span class="variable">queue</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MinHeap</span>(lists.length);</span><br><span class="line">        <span class="keyword">for</span> (ListNode head : lists) &#123;</span><br><span class="line">            <span class="keyword">if</span> (head != <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.offer(head);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(-<span class="number">1</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> s;</span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            <span class="type">ListNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            p.next = node;</span><br><span class="line">            p = node;</span><br><span class="line">            <span class="keyword">if</span> (node.next != <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.offer(node.next);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æé—®ï¼š</p><ul><li>èƒ½å¦å°†æ¯ä¸ªé“¾è¡¨çš„æ‰€æœ‰å…ƒç´ å…¨éƒ¨åŠ å…¥å †ï¼Œå†ä¸€ä¸ªä¸ªä»å †é¡¶ç§»é™¤ï¼Ÿ</li></ul><p>å›ç­”ï¼š</p><ul><li>å¯ä»¥æ˜¯å¯ä»¥ï¼Œä½†å¯¹ç©ºé—´å ç”¨å°±é«˜äº†ï¼Œå †çš„ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯ç”¨æœ‰é™çš„ç©ºé—´åšäº‹æƒ…</li></ul><h2 id="2-8-é˜»å¡é˜Ÿåˆ—"><a href="#2-8-é˜»å¡é˜Ÿåˆ—" class="headerlink" title="2.8 é˜»å¡é˜Ÿåˆ—"></a>2.8 é˜»å¡é˜Ÿåˆ—</h2><p>ä¹‹å‰çš„é˜Ÿåˆ—åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½ä¸èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼Œä¾‹å¦‚</p><ol><li>å¤§éƒ¨åˆ†åœºæ™¯è¦æ±‚åˆ†ç¦»å‘é˜Ÿåˆ—æ”¾å…¥ï¼ˆç”Ÿäº§è€…ï¼‰ã€ä»é˜Ÿåˆ—æ‹¿å‡ºï¼ˆæ¶ˆè´¹è€…ï¼‰ä¸¤ä¸ªè§’è‰²ã€å®ƒä»¬å¾—ç”±ä¸åŒçš„çº¿ç¨‹æ¥æ‹…å½“ï¼Œè€Œä¹‹å‰çš„å®ç°æ ¹æœ¬æ²¡æœ‰è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜</li><li>é˜Ÿåˆ—ä¸ºç©ºï¼Œé‚£ä¹ˆåœ¨ä¹‹å‰çš„å®ç°é‡Œä¼šè¿”å› nullï¼Œå¦‚æœå°±æ˜¯ç¡¬è¦æ‹¿åˆ°ä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿåªèƒ½ä¸æ–­å¾ªç¯å°è¯•</li><li>é˜Ÿåˆ—ä¸ºæ»¡ï¼Œé‚£ä¹ˆå†ä¹‹å‰çš„å®ç°é‡Œä¼šè¿”å› falseï¼Œå¦‚æœå°±æ˜¯ç¡¬è¦å¡å…¥ä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿåªèƒ½ä¸æ–­å¾ªç¯å°è¯•</li></ol><p>å› æ­¤æˆ‘ä»¬éœ€è¦è§£å†³çš„é—®é¢˜æœ‰</p><ol><li>ç”¨é”ä¿è¯çº¿ç¨‹å®‰å…¨</li><li>ç”¨æ¡ä»¶å˜é‡è®©<strong>ç­‰å¾…éç©ºçº¿ç¨‹</strong>ä¸<strong>ç­‰å¾…ä¸æ»¡çº¿ç¨‹</strong>è¿›å…¥<strong>ç­‰å¾…</strong>çŠ¶æ€ï¼Œè€Œä¸æ˜¯ä¸æ–­å¾ªç¯å°è¯•ï¼Œè®© CPU ç©ºè½¬</li></ol><p>æœ‰åŒå­¦å¯¹çº¿ç¨‹å®‰å…¨è¿˜æ²¡æœ‰è¶³å¤Ÿçš„è®¤è¯†ï¼Œä¸‹é¢ä¸¾ä¸€ä¸ªåä¾‹ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½è¦æ‰§è¡Œå…¥é˜Ÿæ“ä½œï¼ˆå‡ ä¹åœ¨åŒä¸€æ—¶åˆ»ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestThreadUnsafe</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String[] array = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(String e)</span> &#123;</span><br><span class="line">        array[tail] = e;</span><br><span class="line">        tail++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.toString(array);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestThreadUnsafe</span> <span class="variable">queue</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestThreadUnsafe</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt; queue.offer(<span class="string">&quot;e1&quot;</span>), <span class="string">&quot;t1&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt; queue.offer(<span class="string">&quot;e2&quot;</span>), <span class="string">&quot;t2&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œçš„æ—¶é—´åºåˆ—å¦‚ä¸‹ï¼Œå‡è®¾åˆå§‹çŠ¶æ€ tail &#x3D; 0ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç”±äº CPU åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´åˆ‡æ¢ï¼Œé€ æˆäº†æŒ‡ä»¤äº¤é”™</p><table><thead><tr><th>çº¿ç¨‹1</th><th>çº¿ç¨‹2</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>array[tail]&#x3D;e1</td><td></td><td>çº¿ç¨‹1 å‘ tail ä½ç½®åŠ å…¥ e1 è¿™ä¸ªå…ƒç´ ï¼Œä½†è¿˜æ²¡æ¥å¾—åŠæ‰§è¡Œ  tail++</td></tr><tr><td></td><td>array[tail]&#x3D;e2</td><td>çº¿ç¨‹2 å‘ tail ä½ç½®åŠ å…¥ e2 è¿™ä¸ªå…ƒç´ ï¼Œè¦†ç›–æ‰äº† e1</td></tr><tr><td></td><td>tail++</td><td>tail è‡ªå¢ä¸º1</td></tr><tr><td>tail++</td><td></td><td>tail è‡ªå¢ä¸º2</td></tr><tr><td></td><td></td><td>æœ€åçŠ¶æ€ tail ä¸º 2ï¼Œæ•°ç»„ä¸º [e2, null, null â€¦]</td></tr></tbody></table><p>ç³Ÿç³•çš„æ˜¯ï¼Œç”±äºæŒ‡ä»¤äº¤é”™çš„é¡ºåºä¸åŒï¼Œå¾—åˆ°çš„ç»“æœä¸æ­¢ä»¥ä¸Šä¸€ç§ï¼Œå®è§‚ä¸Šé€ æˆæ··ä¹±çš„æ•ˆæœ</p><h3 id="1-å•é”å®ç°"><a href="#1-å•é”å®ç°" class="headerlink" title="1) å•é”å®ç°"></a>1) å•é”å®ç°</h3><p>Java ä¸­è¦é˜²æ­¢ä»£ç æ®µäº¤é”™æ‰§è¡Œï¼Œéœ€è¦ä½¿ç”¨é”ï¼Œæœ‰ä¸¤ç§é€‰æ‹©</p><ul><li>synchronized ä»£ç å—ï¼Œå±äºå…³é”®å­—çº§åˆ«æä¾›é”ä¿æŠ¤ï¼ŒåŠŸèƒ½å°‘</li><li>ReentrantLock ç±»ï¼ŒåŠŸèƒ½ä¸°å¯Œ</li></ul><p>ä»¥ ReentrantLock ä¸ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(String e)</span> &#123;</span><br><span class="line">    lock.lockInterruptibly();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        array[tail] = e;</span><br><span class="line">        tail++;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªè¦ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œä¸Šæ®µä»£ç æ—¶ï¼Œé”å¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼Œå°±èƒ½ä¿è¯ try å—å†…çš„ä»£ç çš„æ‰§è¡Œä¸ä¼šå‡ºç°æŒ‡ä»¤äº¤é”™ç°è±¡ï¼Œå³æ‰§è¡Œé¡ºåºåªå¯èƒ½æ˜¯ä¸‹é¢ä¸¤ç§æƒ…å†µä¹‹ä¸€</p><table><thead><tr><th>çº¿ç¨‹1</th><th>çº¿ç¨‹2</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>lock.lockInterruptibly()</td><td></td><td>t1å¯¹é”å¯¹è±¡ä¸Šé”</td></tr><tr><td>array[tail]&#x3D;e1</td><td></td><td></td></tr><tr><td></td><td>lock.lockInterruptibly()</td><td>å³ä½¿ CPU åˆ‡æ¢åˆ°çº¿ç¨‹2ï¼Œä½†ç”±äºt1å·²ç»å¯¹è¯¥å¯¹è±¡ä¸Šé”ï¼Œå› æ­¤çº¿ç¨‹2å¡åœ¨è¿™å„¿è¿›ä¸å»</td></tr><tr><td>tail++</td><td></td><td>åˆ‡æ¢å›çº¿ç¨‹1 æ‰§è¡Œåç»­ä»£ç </td></tr><tr><td>lock.unlock()</td><td></td><td>çº¿ç¨‹1 è§£é”</td></tr><tr><td></td><td>array[tail]&#x3D;e2</td><td>çº¿ç¨‹2 æ­¤æ—¶æ‰èƒ½è·å¾—é”ï¼Œæ‰§è¡Œå®ƒçš„ä»£ç </td></tr><tr><td></td><td>tail++</td><td></td></tr></tbody></table><ul><li>å¦ä¸€ç§æƒ…å†µæ˜¯çº¿ç¨‹2 å…ˆè·å¾—é”ï¼Œçº¿ç¨‹1 è¢«æŒ¡åœ¨å¤–é¢</li><li>è¦æ˜ç™½<strong>ä¿æŠ¤çš„æœ¬è´¨</strong>ï¼Œæœ¬ä¾‹ä¸­æ˜¯ä¿æŠ¤çš„æ˜¯ tail ä½ç½®è¯»å†™çš„å®‰å…¨</li></ul><p>äº‹æƒ…è¿˜æ²¡æœ‰å®Œï¼Œä¸Šé¢çš„ä¾‹å­æ˜¯é˜Ÿåˆ—è¿˜æ²¡æœ‰æ”¾æ»¡çš„æƒ…å†µï¼Œè€ƒè™‘ä¸‹é¢çš„ä»£ç ï¼ˆè¿™å›é”åŒæ—¶ä¿æŠ¤äº† tail å’Œ size çš„è¯»å†™å®‰å…¨ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"><span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(String e)</span> &#123;</span><br><span class="line">    lock.lockInterruptibly();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull()) &#123;</span><br><span class="line">            <span class="comment">// æ»¡äº†æ€ä¹ˆåŠ?</span></span><br><span class="line">        &#125;</span><br><span class="line">        array[tail] = e;</span><br><span class="line">        tail++;</span><br><span class="line">    </span><br><span class="line">        size++;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> size == array.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹å‰æ˜¯è¿”å› false è¡¨ç¤ºæ·»åŠ å¤±è´¥ï¼Œå‰é¢åˆ†æè¿‡æƒ³è¾¾åˆ°è¿™ä¹ˆä¸€ç§æ•ˆæœï¼š</p><ul><li>åœ¨é˜Ÿåˆ—æ»¡æ—¶ï¼Œä¸æ˜¯ç«‹åˆ»è¿”å›ï¼Œè€Œæ˜¯å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…</li><li>ä»€ä¹ˆæ—¶å€™é˜Ÿåˆ—ä¸æ»¡äº†ï¼Œå†å”¤é†’è¿™ä¸ªç­‰å¾…çš„çº¿ç¨‹ï¼Œä»ä¸Šæ¬¡çš„ä»£ç å¤„ç»§ç»­å‘ä¸‹è¿è¡Œ</li></ul><p>ReentrantLock å¯ä»¥é…åˆæ¡ä»¶å˜é‡æ¥å®ç°ï¼Œä»£ç è¿›åŒ–ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"><span class="type">Condition</span> <span class="variable">tailWaits</span> <span class="operator">=</span> lock.newCondition(); <span class="comment">// æ¡ä»¶å˜é‡</span></span><br><span class="line"><span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(String e)</span> &#123;</span><br><span class="line">    lock.lockInterruptibly();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (isFull()) &#123;</span><br><span class="line">            tailWaits.await();<span class="comment">// å½“é˜Ÿåˆ—æ»¡æ—¶, å½“å‰çº¿ç¨‹è¿›å…¥ tailWaits ç­‰å¾…</span></span><br><span class="line">        &#125;</span><br><span class="line">        array[tail] = e;</span><br><span class="line">        tail++;</span><br><span class="line">    </span><br><span class="line">        size++;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> size == array.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ¡ä»¶å˜é‡åº•å±‚ä¹Ÿæ˜¯ä¸ªé˜Ÿåˆ—ï¼Œç”¨æ¥å­˜å‚¨è¿™äº›éœ€è¦ç­‰å¾…çš„çº¿ç¨‹ï¼Œå½“é˜Ÿåˆ—æ»¡äº†ï¼Œå°±ä¼šå°† offer çº¿ç¨‹åŠ å…¥æ¡ä»¶é˜Ÿåˆ—ï¼Œå¹¶æš‚æ—¶é‡Šæ”¾é”</li><li>å°†æ¥æˆ‘ä»¬çš„é˜Ÿåˆ—å¦‚æœä¸æ»¡äº†ï¼ˆç”± poll çº¿ç¨‹é‚£è¾¹å¾—çŸ¥ï¼‰å¯ä»¥è°ƒç”¨ tailWaits.signal() æ¥å”¤é†’ tailWaits ä¸­é¦–ä¸ªç­‰å¾…çš„çº¿ç¨‹ï¼Œè¢«å”¤é†’çš„çº¿ç¨‹ä¼šå†æ¬¡æŠ¢åˆ°é”ï¼Œä»ä¸Šæ¬¡ await å¤„ç»§ç»­å‘ä¸‹è¿è¡Œ</li></ul><p>æ€è€ƒä¸ºä½•è¦ç”¨ while è€Œä¸æ˜¯ ifï¼Œè®¾é˜Ÿåˆ—å®¹é‡æ˜¯ 3</p><table><thead><tr><th>æ“ä½œå‰</th><th>offer(4)</th><th>offer(5)</th><th>poll()</th><th>æ“ä½œå</th></tr></thead><tbody><tr><td>[1 2 3]</td><td>é˜Ÿåˆ—æ»¡ï¼Œè¿›å…¥tailWaits ç­‰å¾…</td><td></td><td></td><td>[1 2 3]</td></tr><tr><td>[1 2 3]</td><td></td><td></td><td>å–èµ° 1ï¼Œé˜Ÿåˆ—ä¸æ»¡ï¼Œå”¤é†’çº¿ç¨‹</td><td>[2 3]</td></tr><tr><td>[2 3]</td><td></td><td>æŠ¢å…ˆè·å¾—é”ï¼Œå‘ç°ä¸æ»¡ï¼Œæ”¾å…¥ 5</td><td></td><td>[2 3 5]</td></tr><tr><td>[2 3 5]</td><td>ä»ä¸Šæ¬¡ç­‰å¾…å¤„ç›´æ¥å‘ä¸‹æ‰§è¡Œ</td><td></td><td></td><td>[2 3 5 ?]</td></tr></tbody></table><p>å…³é”®ç‚¹ï¼š</p><ul><li>ä» tailWaits ä¸­å”¤é†’çš„çº¿ç¨‹ï¼Œä¼šä¸æ–°æ¥çš„ offer çš„çº¿ç¨‹äº‰æŠ¢é”ï¼Œè°èƒ½æŠ¢åˆ°æ˜¯ä¸ä¸€å®šçš„ï¼Œå¦‚æœåè€…å…ˆæŠ¢åˆ°ï¼Œå°±ä¼šå¯¼è‡´æ¡ä»¶åˆå‘ç”Ÿå˜åŒ–</li><li>è¿™ç§æƒ…å†µç§°ä¹‹ä¸º<strong>è™šå‡å”¤é†’</strong>ï¼Œå”¤é†’ååº”è¯¥é‡æ–°æ£€æŸ¥æ¡ä»¶ï¼Œçœ‹æ˜¯ä¸æ˜¯å¾—é‡æ–°è¿›å…¥ç­‰å¾…</li></ul><p>æœ€åçš„å®ç°ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å•é”å®ç°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;E&gt; å…ƒç´ ç±»å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlockingQueue1</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">BlockingQueue</span>&lt;E&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">head</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BlockingQueue1</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="type">Condition</span> <span class="variable">tailWaits</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line">    <span class="type">Condition</span> <span class="variable">headWaits</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(E e)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        lock.lockInterruptibly();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (isFull()) &#123;</span><br><span class="line">                tailWaits.await();</span><br><span class="line">            &#125;</span><br><span class="line">            array[tail] = e;</span><br><span class="line">            <span class="keyword">if</span> (++tail == array.length) &#123;</span><br><span class="line">                tail = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            size++;</span><br><span class="line">            headWaits.signal();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(E e, <span class="type">long</span> timeout)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        lock.lockInterruptibly();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">t</span> <span class="operator">=</span> TimeUnit.MILLISECONDS.toNanos(timeout);</span><br><span class="line">            <span class="keyword">while</span> (isFull()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (t &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                t = tailWaits.awaitNanos(t);</span><br><span class="line">            &#125;</span><br><span class="line">            array[tail] = e;</span><br><span class="line">            <span class="keyword">if</span> (++tail == array.length) &#123;</span><br><span class="line">                tail = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            size++;</span><br><span class="line">            headWaits.signal();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        lock.lockInterruptibly();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (isEmpty()) &#123;</span><br><span class="line">                headWaits.await();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> array[head];</span><br><span class="line">            array[head] = <span class="literal">null</span>; <span class="comment">// help GC</span></span><br><span class="line">            <span class="keyword">if</span> (++head == array.length) &#123;</span><br><span class="line">                head = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            size--;</span><br><span class="line">            tailWaits.signal();</span><br><span class="line">            <span class="keyword">return</span> e;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == array.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>public void offer(E e, long timeout) throws InterruptedException æ˜¯å¸¦è¶…æ—¶çš„ç‰ˆæœ¬ï¼Œå¯ä»¥åªç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè€Œä¸æ˜¯æ°¸ä¹…ç­‰ä¸‹å»ï¼Œç±»ä¼¼çš„ poll ä¹Ÿå¯ä»¥åšå¸¦è¶…æ—¶çš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªç•™ç»™å¤§å®¶äº†</li></ul><blockquote><p><strong>æ³¨æ„</strong></p><ul><li><p>JDK ä¸­ BlockingQueue æ¥å£çš„æ–¹æ³•å‘½åä¸æˆ‘çš„ç¤ºä¾‹æœ‰äº›å·®å¼‚</p><ul><li>æ–¹æ³• offer(E e) æ˜¯éé˜»å¡çš„å®ç°ï¼Œé˜»å¡å®ç°æ–¹æ³•ä¸º put(E e)</li><li>æ–¹æ³• poll() æ˜¯éé˜»å¡çš„å®ç°ï¼Œé˜»å¡å®ç°æ–¹æ³•ä¸º take()</li></ul></li></ul></blockquote><h3 id="2-åŒé”å®ç°"><a href="#2-åŒé”å®ç°" class="headerlink" title="2) åŒé”å®ç°"></a>2) åŒé”å®ç°</h3><p>å•é”çš„ç¼ºç‚¹åœ¨äºï¼š</p><ul><li>ç”Ÿäº§å’Œæ¶ˆè´¹å‡ ä¹æ˜¯ä¸å†²çªçš„ï¼Œå”¯ä¸€å†²çªçš„æ˜¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å®ƒä»¬æœ‰å¯èƒ½åŒæ—¶ä¿®æ”¹ size</li><li>å†²çªçš„ä¸»è¦æ˜¯ç”Ÿäº§è€…ä¹‹é—´ï¼šå¤šä¸ª offer çº¿ç¨‹ä¿®æ”¹ tail</li><li>å†²çªçš„è¿˜æœ‰æ¶ˆè´¹è€…ä¹‹é—´ï¼šå¤šä¸ª poll çº¿ç¨‹ä¿®æ”¹ head</li></ul><p>å¦‚æœå¸Œæœ›è¿›ä¸€æ­¥æé«˜æ€§èƒ½ï¼Œå¯ä»¥ç”¨ä¸¤æŠŠé”</p><ul><li>ä¸€æŠŠé”ä¿æŠ¤ tail</li><li>å¦ä¸€æŠŠé”ä¿æŠ¤ head</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ReentrantLock</span> <span class="variable">headLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();  <span class="comment">// ä¿æŠ¤ head çš„é”</span></span><br><span class="line"><span class="type">Condition</span> <span class="variable">headWaits</span> <span class="operator">=</span> headLock.newCondition(); <span class="comment">// é˜Ÿåˆ—ç©ºæ—¶ï¼Œéœ€è¦ç­‰å¾…çš„çº¿ç¨‹é›†åˆ</span></span><br><span class="line"></span><br><span class="line"><span class="type">ReentrantLock</span> <span class="variable">tailLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();  <span class="comment">// ä¿æŠ¤ tail çš„é”</span></span><br><span class="line"><span class="type">Condition</span> <span class="variable">tailWaits</span> <span class="operator">=</span> tailLock.newCondition(); <span class="comment">// é˜Ÿåˆ—æ»¡æ—¶ï¼Œéœ€è¦ç­‰å¾…çš„çº¿ç¨‹é›†åˆ</span></span><br></pre></td></tr></table></figure><p>å…ˆçœ‹çœ‹ offer æ–¹æ³•çš„åˆæ­¥å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(E e)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    tailLock.lockInterruptibly();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// é˜Ÿåˆ—æ»¡ç­‰å¾…</span></span><br><span class="line">        <span class="keyword">while</span> (isFull()) &#123;</span><br><span class="line">            tailWaits.await();</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// ä¸æ»¡åˆ™å…¥é˜Ÿ</span></span><br><span class="line">        array[tail] = e;</span><br><span class="line">        <span class="keyword">if</span> (++tail == array.length) &#123;</span><br><span class="line">            tail = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// ä¿®æ”¹ size ï¼ˆæœ‰é—®é¢˜ï¼‰</span></span><br><span class="line">        size++;</span><br><span class="line">    </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        tailLock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„ç¼ºç‚¹æ˜¯ size å¹¶ä¸å— tailLock ä¿æŠ¤ï¼ŒtailLock ä¸ headLock æ˜¯ä¸¤æŠŠä¸åŒçš„é”ï¼Œå¹¶ä¸èƒ½å®ç°äº’æ–¥çš„æ•ˆæœã€‚å› æ­¤ï¼Œsize éœ€è¦ç”¨ä¸‹é¢çš„ä»£ç ä¿è¯åŸå­æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">AtomicInteger</span> <span class="variable">size</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);   <span class="comment">// ä¿æŠ¤ size çš„åŸå­å˜é‡</span></span><br><span class="line"></span><br><span class="line">size.getAndIncrement(); <span class="comment">// è‡ªå¢</span></span><br><span class="line">size.getAndDecrement(); <span class="comment">// è‡ªå‡</span></span><br></pre></td></tr></table></figure><p>ä»£ç ä¿®æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(E e)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    tailLock.lockInterruptibly();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// é˜Ÿåˆ—æ»¡ç­‰å¾…</span></span><br><span class="line">        <span class="keyword">while</span> (isFull()) &#123;</span><br><span class="line">            tailWaits.await();</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// ä¸æ»¡åˆ™å…¥é˜Ÿ</span></span><br><span class="line">        array[tail] = e;</span><br><span class="line">        <span class="keyword">if</span> (++tail == array.length) &#123;</span><br><span class="line">            tail = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// ä¿®æ”¹ size</span></span><br><span class="line">        size.getAndIncrement();</span><br><span class="line">    </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        tailLock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹ç§°åœ°ï¼Œå¯ä»¥å†™å‡º poll æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    E e;</span><br><span class="line">    headLock.lockInterruptibly();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// é˜Ÿåˆ—ç©ºç­‰å¾…</span></span><br><span class="line">        <span class="keyword">while</span> (isEmpty()) &#123;</span><br><span class="line">            headWaits.await();</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// ä¸ç©ºåˆ™å‡ºé˜Ÿ</span></span><br><span class="line">        e = array[head];</span><br><span class="line">        <span class="keyword">if</span> (++head == array.length) &#123;</span><br><span class="line">            head = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// ä¿®æ”¹ size</span></span><br><span class="line">        size.getAndDecrement();</span><br><span class="line">    </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        headLock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªéš¾é¢˜ï¼Œå°±æ˜¯å¦‚ä½•é€šçŸ¥ headWaits å’Œ tailWaits ä¸­ç­‰å¾…çš„çº¿ç¨‹ï¼Œæ¯”å¦‚ poll æ–¹æ³•æ‹¿èµ°ä¸€ä¸ªå…ƒç´ ï¼Œé€šçŸ¥ tailWaitsï¼šæˆ‘æ‹¿èµ°ä¸€ä¸ªï¼Œä¸æ»¡äº†å™¢ï¼Œä½ ä»¬å¯ä»¥æ”¾äº†ï¼Œå› æ­¤ä»£ç æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    E e;</span><br><span class="line">    headLock.lockInterruptibly();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// é˜Ÿåˆ—ç©ºç­‰å¾…</span></span><br><span class="line">        <span class="keyword">while</span> (isEmpty()) &#123;</span><br><span class="line">            headWaits.await();</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// ä¸ç©ºåˆ™å‡ºé˜Ÿ</span></span><br><span class="line">        e = array[head];</span><br><span class="line">        <span class="keyword">if</span> (++head == array.length) &#123;</span><br><span class="line">            head = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// ä¿®æ”¹ size</span></span><br><span class="line">        size.getAndDecrement();</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// é€šçŸ¥ tailWaits ä¸æ»¡ï¼ˆæœ‰é—®é¢˜ï¼‰</span></span><br><span class="line">        tailWaits.signal();</span><br><span class="line">    </span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        headLock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é—®é¢˜åœ¨äºè¦ä½¿ç”¨è¿™äº›æ¡ä»¶å˜é‡çš„ await()ï¼Œ signal() ç­‰æ–¹æ³•éœ€è¦å…ˆè·å¾—ä¸ä¹‹å…³è”çš„é”ï¼Œä¸Šé¢çš„ä»£ç è‹¥ç›´æ¥è¿è¡Œä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.IllegalMonitorStateException</span><br></pre></td></tr></table></figure><p>é‚£æœ‰åŒå­¦è¯´ï¼ŒåŠ ä¸Šé”ä¸å°±è¡Œäº†å—ï¼Œäºæ˜¯å†™å‡ºäº†ä¸‹é¢çš„ä»£ç </p><p><img src="https://i0.hdslb.com/bfs/article/27f77be87dd61e3cea9be78acccb702e645325325.png" alt="image-20230208160343493">â€‹</p><p>å‘ç°ä»€ä¹ˆé—®é¢˜äº†ï¼Ÿä¸¤æŠŠé”è¿™ä¹ˆåµŒå¥—ä½¿ç”¨ï¼Œéå¸¸å®¹æ˜“å‡ºç°æ­»é”ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><p><img src="https://i0.hdslb.com/bfs/article/803abf860e51ed9afe1c0674b165e749645325325.png" alt="image-20230208160143386">â€‹</p><p>å› æ­¤å¾—é¿å…åµŒå¥—ï¼Œä¸¤æ®µåŠ é”çš„ä»£ç å˜æˆäº†ä¸‹é¢å¹³çº§çš„æ ·å­</p><p><img src="https://i0.hdslb.com/bfs/article/162fdcc770c8a49d3e577f1d3e1107a4645325325.png" alt="image-20230208162857435">â€‹</p><p>æ€§èƒ½è¿˜å¯ä»¥è¿›ä¸€æ­¥æå‡</p><ol><li><p>ä»£ç è°ƒæ•´å offer å¹¶æ²¡æœ‰åŒæ—¶è·å– tailLock å’Œ headLock ä¸¤æŠŠé”ï¼Œå› æ­¤ä¸¤æ¬¡åŠ é”ä¹‹é—´ä¼šæœ‰<strong>ç©ºéš™</strong>ï¼Œè¿™ä¸ªç©ºéš™å†…å¯èƒ½æœ‰å…¶å®ƒçš„ offer çº¿ç¨‹æ·»åŠ äº†æ›´å¤šçš„å…ƒç´ ï¼Œé‚£ä¹ˆè¿™äº›çº¿ç¨‹éƒ½è¦æ‰§è¡Œ signal()ï¼Œé€šçŸ¥ poll çº¿ç¨‹é˜Ÿåˆ—éç©ºå—ï¼Ÿ</p><ul><li>æ¯æ¬¡è°ƒç”¨ signal() éƒ½éœ€è¦è¿™äº› offer çº¿ç¨‹å…ˆè·å¾— headLock é”ï¼Œæˆæœ¬è¾ƒé«˜ï¼Œè¦æƒ³æ³•å‡å°‘ offer çº¿ç¨‹è·å¾— headLock é”çš„æ¬¡æ•°</li><li>å¯ä»¥åŠ ä¸€ä¸ªæ¡ä»¶ï¼šå½“ offer å¢åŠ å‰é˜Ÿåˆ—ä¸ºç©ºï¼Œå³ä» 0 å˜åŒ–åˆ°ä¸ç©ºï¼Œæ‰ç”±æ­¤ offer çº¿ç¨‹æ¥é€šçŸ¥ headWaitsï¼Œå…¶å®ƒæƒ…å†µä¸å½’å®ƒç®¡</li></ul></li><li><p>é˜Ÿåˆ—ä» 0 å˜åŒ–åˆ°ä¸ç©ºï¼Œä¼šå”¤é†’ä¸€ä¸ªç­‰å¾…çš„ poll çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹è¢«å”¤é†’åï¼Œè‚¯å®šèƒ½æ‹¿åˆ° headLock é”ï¼Œå› æ­¤å®ƒå…·å¤‡äº†å”¤é†’ headWaits ä¸Šå…¶å®ƒ poll çº¿ç¨‹çš„å…ˆå†³æ¡ä»¶ã€‚å¦‚æœæ£€æŸ¥å‡ºæ­¤æ—¶æœ‰å…¶å®ƒ offer çº¿ç¨‹æ–°å¢äº†å…ƒç´ ï¼ˆä¸ç©ºï¼Œä½†ä¸æ˜¯ä»0å˜åŒ–è€Œæ¥ï¼‰ï¼Œé‚£ä¹ˆä¸å¦¨ç”±æ­¤ poll çº¿ç¨‹æ¥å”¤é†’å…¶å®ƒ poll çº¿ç¨‹</p></li></ol><p>è¿™ä¸ªæŠ€å·§è¢«ç§°ä¹‹ä¸ºçº§è”é€šçŸ¥ï¼ˆcascading notifiesï¼‰ï¼Œç±»ä¼¼çš„åŸå› </p><ol start="3"><li>åœ¨ poll æ—¶é˜Ÿåˆ—ä»æ»¡å˜åŒ–åˆ°ä¸æ»¡ï¼Œæ‰ç”±æ­¤ poll çº¿ç¨‹æ¥å”¤é†’ä¸€ä¸ªç­‰å¾…çš„ offer çº¿ç¨‹ï¼Œç›®çš„ä¹Ÿæ˜¯ä¸ºäº†å‡å°‘ poll çº¿ç¨‹å¯¹ tailLock ä¸Šé”æ¬¡æ•°ï¼Œå‰©ä¸‹ç­‰å¾…çš„ offer çº¿ç¨‹ç”±è¿™ä¸ª offer çº¿ç¨‹é—´æ¥å”¤é†’</li></ol><p>æœ€ç»ˆçš„ä»£ç ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlockingQueue2</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">BlockingQueue</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> E[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">head</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tail</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">AtomicInteger</span> <span class="variable">size</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">ReentrantLock</span> <span class="variable">headLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="type">Condition</span> <span class="variable">headWaits</span> <span class="operator">=</span> headLock.newCondition();</span><br><span class="line">    <span class="type">ReentrantLock</span> <span class="variable">tailLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="type">Condition</span> <span class="variable">tailWaits</span> <span class="operator">=</span> tailLock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BlockingQueue2</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = (E[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(E e)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> c;</span><br><span class="line">        tailLock.lockInterruptibly();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (isFull()) &#123;</span><br><span class="line">                tailWaits.await();</span><br><span class="line">            &#125;</span><br><span class="line">            array[tail] = e;</span><br><span class="line">            <span class="keyword">if</span> (++tail == array.length) &#123;</span><br><span class="line">                tail = <span class="number">0</span>;</span><br><span class="line">            &#125;        </span><br><span class="line">            c = size.getAndIncrement();</span><br><span class="line">            <span class="comment">// a. é˜Ÿåˆ—ä¸æ»¡, ä½†ä¸æ˜¯ä»æ»¡-&gt;ä¸æ»¡, ç”±æ­¤offerçº¿ç¨‹å”¤é†’å…¶å®ƒofferçº¿ç¨‹</span></span><br><span class="line">            <span class="keyword">if</span> (c + <span class="number">1</span> &lt; array.length) &#123;</span><br><span class="line">                tailWaits.signal();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            tailLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// b. ä»0-&gt;ä¸ç©º, ç”±æ­¤offerçº¿ç¨‹å”¤é†’ç­‰å¾…çš„pollçº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">if</span> (c == <span class="number">0</span>) &#123;</span><br><span class="line">            headLock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                headWaits.signal();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                headLock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">poll</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        E e;</span><br><span class="line">        <span class="type">int</span> c;</span><br><span class="line">        headLock.lockInterruptibly();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (isEmpty()) &#123;</span><br><span class="line">                headWaits.await(); </span><br><span class="line">            &#125;</span><br><span class="line">            e = array[head]; </span><br><span class="line">            <span class="keyword">if</span> (++head == array.length) &#123;</span><br><span class="line">                head = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            c = size.getAndDecrement();</span><br><span class="line">            <span class="comment">// b. é˜Ÿåˆ—ä¸ç©º, ä½†ä¸æ˜¯ä»0å˜åŒ–åˆ°ä¸ç©ºï¼Œç”±æ­¤pollçº¿ç¨‹é€šçŸ¥å…¶å®ƒpollçº¿ç¨‹</span></span><br><span class="line">            <span class="keyword">if</span> (c &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                headWaits.signal();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            headLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// a. ä»æ»¡-&gt;ä¸æ»¡, ç”±æ­¤pollçº¿ç¨‹å”¤é†’ç­‰å¾…çš„offerçº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">if</span> (c == array.length) &#123;</span><br><span class="line">            tailLock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                tailWaits.signal();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                tailLock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size.get() == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size.get() == array.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒé”å®ç°çš„éå¸¸ç²¾å·§ï¼Œæ®è¯´ä½œè€… Doug Lea èŠ±äº†ä¸€å¹´çš„æ—¶é—´æ‰å®Œå–„äº†æ­¤æ®µä»£ç </p><h2 id="2-9-å †"><a href="#2-9-å †" class="headerlink" title="2.9 å †"></a>2.9 å †</h2><p>ä»¥å¤§é¡¶å †ä¸ºä¾‹ï¼Œç›¸å¯¹äºä¹‹å‰çš„ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå¢åŠ äº†å †åŒ–ç­‰æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MaxHeap</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MaxHeap</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> array[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> array[<span class="number">0</span>];</span><br><span class="line">        swap(<span class="number">0</span>, size - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">        down(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> top;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤æŒ‡å®šç´¢å¼•å¤„å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index ç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¢«åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">deleted</span> <span class="operator">=</span> array[index];</span><br><span class="line">        up(Integer.MAX_VALUE, index);</span><br><span class="line">        poll();</span><br><span class="line">        <span class="keyword">return</span> deleted;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›¿æ¢å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> replaced æ–°å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">replace</span><span class="params">(<span class="type">int</span> replaced)</span> &#123;</span><br><span class="line">        array[<span class="number">0</span>] = replaced;</span><br><span class="line">        down(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å †çš„å°¾éƒ¨æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> offered æ–°å…ƒç´ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦æ·»åŠ æˆåŠŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(<span class="type">int</span> offered)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size == array.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        up(offered, size);</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† offered å…ƒç´ ä¸Šæµ®: ç›´è‡³ offered å°äºçˆ¶å…ƒç´ æˆ–åˆ°å †é¡¶</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">up</span><span class="params">(<span class="type">int</span> offered, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">child</span> <span class="operator">=</span> index;</span><br><span class="line">        <span class="keyword">while</span> (child &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">parent</span> <span class="operator">=</span> (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (offered &gt; array[parent]) &#123;</span><br><span class="line">                array[child] = array[parent];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            child = parent;</span><br><span class="line">        &#125;</span><br><span class="line">        array[child] = offered;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MaxHeap</span><span class="params">(<span class="type">int</span>[] array)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = array;</span><br><span class="line">        <span class="built_in">this</span>.size = array.length;</span><br><span class="line">        heapify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºå †</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapify</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚ä½•æ‰¾åˆ°æœ€åè¿™ä¸ªéå¶å­èŠ‚ç‚¹  size / 2 - 1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            down(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† parent ç´¢å¼•å¤„çš„å…ƒç´ ä¸‹æ½œ: ä¸ä¸¤ä¸ªå­©å­è¾ƒå¤§è€…äº¤æ¢, ç›´è‡³æ²¡å­©å­æˆ–å­©å­æ²¡å®ƒå¤§</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">down</span><span class="params">(<span class="type">int</span> parent)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> left + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> parent;</span><br><span class="line">        <span class="keyword">if</span> (left &lt; size &amp;&amp; array[left] &gt; array[max]) &#123;</span><br><span class="line">            max = left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (right &lt; size &amp;&amp; array[right] &gt; array[max]) &#123;</span><br><span class="line">            max = right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (max != parent) &#123; <span class="comment">// æ‰¾åˆ°äº†æ›´å¤§çš„å­©å­</span></span><br><span class="line">            swap(max, parent);</span><br><span class="line">            down(max);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// äº¤æ¢ä¸¤ä¸ªç´¢å¼•å¤„çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> array[i];</span><br><span class="line">        array[i] = array[j];</span><br><span class="line">        array[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] array = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">        <span class="type">MaxHeap</span> <span class="variable">heap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MaxHeap</span>(array);</span><br><span class="line">        System.out.println(Arrays.toString(heap.array));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (heap.size &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            heap.swap(<span class="number">0</span>, heap.size - <span class="number">1</span>);</span><br><span class="line">            heap.size--;</span><br><span class="line">            heap.down(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(heap.array));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å»ºå †"><a href="#å»ºå †" class="headerlink" title="å»ºå †"></a>å»ºå †</h3><p>Floyd å»ºå †ç®—æ³•ä½œè€…ï¼ˆä¹Ÿæ˜¯ä¹‹å‰é¾Ÿå…”èµ›è·‘åˆ¤ç¯ä½œè€…ï¼‰ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/24398d38228e44f30808b067b53098f8645325325.png" alt="image-20230213095110902">â€‹</p><ol><li>æ‰¾åˆ°æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹</li><li>ä»åå‘å‰ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œä¸‹æ½œ</li></ol><p>ä¸€äº›è§„å¾‹</p><ul><li>ä¸€æ£µæ»¡äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°ä¸º $2^h-1$ï¼Œå¦‚ä¸‹ä¾‹ä¸­é«˜åº¦ $h&#x3D;3$ èŠ‚ç‚¹æ•°æ˜¯ $2^3-1&#x3D;7$</li><li>éå¶å­èŠ‚ç‚¹èŒƒå›´ä¸º $[0, size&#x2F;2-1]$</li></ul><p>ç®—æ³•æ—¶é—´å¤æ‚åº¦åˆ†æ</p><p><img src="https://i0.hdslb.com/bfs/article/50d276201dfc4c22c6bd30acfaa66a2b645325325.png" alt="image-20230213114024607">â€‹</p><p>ä¸‹é¢çœ‹äº¤æ¢æ¬¡æ•°çš„æ¨å¯¼ï¼šè®¾èŠ‚ç‚¹é«˜åº¦ä¸º 3</p><table><thead><tr><th></th><th>æœ¬å±‚èŠ‚ç‚¹æ•°</th><th>é«˜åº¦</th><th>ä¸‹æ½œæœ€å¤šäº¤æ¢æ¬¡æ•°ï¼ˆé«˜åº¦-1ï¼‰</th></tr></thead><tbody><tr><td>4567 è¿™å±‚</td><td>4</td><td>1</td><td>0</td></tr><tr><td>23è¿™å±‚</td><td>2</td><td>2</td><td>1</td></tr><tr><td>1è¿™å±‚</td><td>1</td><td>3</td><td>2</td></tr></tbody></table><p>æ¯ä¸€å±‚çš„äº¤æ¢æ¬¡æ•°ä¸ºï¼š$èŠ‚ç‚¹ä¸ªæ•°*æ­¤èŠ‚ç‚¹äº¤æ¢æ¬¡æ•°$ï¼Œæ€»çš„äº¤æ¢æ¬¡æ•°ä¸º</p><p>$$<br>\begin{aligned}<br>&amp; 4 * 0 + 2 * 1 + 1 * 2 \</p><p>&amp; \frac{8}{2}*0 + \frac{8}{4}*1 + \frac{8}{8}*2 \</p><p>&amp; \frac{8}{2^1}*0 + \frac{8}{2^2}*1 + \frac{8}{2^3}*2\</p><p>\end{aligned}<br>$$</p><p>å³</p><p>$$<br>\sum_{i&#x3D;1}^{h}(\frac{2^h}{2^i}*(i-1))<br>$$</p><p>åœ¨ <a href="https://www.wolframalpha.com/">https://www.wolframalpha.com/</a> è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sum[\(40)Divide[Power[2,x],Power[2,i]]*\(40)i-1\(41)\(41),&#123;i,1,x&#125;]</span><br></pre></td></tr></table></figure><p>æ¨å¯¼å‡º</p><p>$$<br>2^h -h -1<br>$$</p><p>å…¶ä¸­ $2^h \approx n$ï¼Œ$h \approx \log_2{n}$ï¼Œå› æ­¤æœ‰æ—¶é—´å¤æ‚åº¦ $O(n)$</p><h3 id="ä¹ é¢˜-6"><a href="#ä¹ é¢˜-6" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-å †æ’åº"><a href="#E01-å †æ’åº" class="headerlink" title="E01. å †æ’åº"></a>E01. å †æ’åº</h4><p>ç®—æ³•æè¿°</p><ol><li>heapify å»ºç«‹å¤§é¡¶å †</li><li>å°†å †é¡¶ä¸å †åº•äº¤æ¢ï¼ˆæœ€å¤§å…ƒç´ è¢«äº¤æ¢åˆ°å †åº•ï¼‰ï¼Œç¼©å°å¹¶ä¸‹æ½œè°ƒæ•´å †</li><li>é‡å¤ç¬¬äºŒæ­¥ç›´è‡³å †é‡Œå‰©ä¸€ä¸ªå…ƒç´ </li></ol><p>å¯ä»¥ä½¿ç”¨ä¹‹å‰è¯¾å ‚ä¾‹é¢˜çš„å¤§é¡¶å †æ¥å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] array = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;;</span><br><span class="line"><span class="type">MaxHeap</span> <span class="variable">maxHeap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MaxHeap</span>(array);</span><br><span class="line">System.out.println(Arrays.toString(maxHeap.array));</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (maxHeap.size &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    maxHeap.swap(<span class="number">0</span>, maxHeap.size - <span class="number">1</span>);</span><br><span class="line">    maxHeap.size--;</span><br><span class="line">    maxHeap.down(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(Arrays.toString(maxHeap.array));</span><br></pre></td></tr></table></figure><h4 id="E02-æ•°ç»„ä¸­ç¬¬Kå¤§å…ƒç´ -Leetcode-215"><a href="#E02-æ•°ç»„ä¸­ç¬¬Kå¤§å…ƒç´ -Leetcode-215" class="headerlink" title="E02. æ•°ç»„ä¸­ç¬¬Kå¤§å…ƒç´ -Leetcode 215"></a>E02. æ•°ç»„ä¸­ç¬¬Kå¤§å…ƒç´ -Leetcode 215</h4><p>å°é¡¶å †ï¼ˆå¯åˆ å»ç”¨ä¸åˆ°ä»£ç ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MinHeap</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MinHeap</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        array = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapify</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> (size &gt;&gt; <span class="number">1</span>) - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            down(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        swap(<span class="number">0</span>, size - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">        down(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> array[size];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        swap(index, size - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">        down(index);</span><br><span class="line">        <span class="keyword">return</span> array[size];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> array[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(<span class="type">int</span> offered)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size == array.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        up(offered);</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">replace</span><span class="params">(<span class="type">int</span> replaced)</span> &#123;</span><br><span class="line">        array[<span class="number">0</span>] = replaced;</span><br><span class="line">        down(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">up</span><span class="params">(<span class="type">int</span> offered)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">child</span> <span class="operator">=</span> size;</span><br><span class="line">        <span class="keyword">while</span> (child &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">parent</span> <span class="operator">=</span> (child - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (offered &lt; array[parent]) &#123;</span><br><span class="line">                array[child] = array[parent];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            child = parent;</span><br><span class="line">        &#125;</span><br><span class="line">        array[child] = offered;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">down</span><span class="params">(<span class="type">int</span> parent)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> (parent &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> left + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> parent;</span><br><span class="line">        <span class="keyword">if</span> (left &lt; size &amp;&amp; array[left] &lt; array[min]) &#123;</span><br><span class="line">            min = left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (right &lt; size &amp;&amp; array[right] &lt; array[min]) &#123;</span><br><span class="line">            min = right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (min != parent) &#123;</span><br><span class="line">            swap(min, parent);</span><br><span class="line">            down(min);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// äº¤æ¢ä¸¤ä¸ªç´¢å¼•å¤„çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> array[i];</span><br><span class="line">        array[i] = array[j];</span><br><span class="line">        array[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¢˜è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findKthLargest</span><span class="params">(<span class="type">int</span>[] numbers, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">MinHeap</span> <span class="variable">heap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MinHeap</span>(k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">        heap.offer(numbers[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> k; i &lt; numbers.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(numbers[i] &gt; heap.peek())&#123;</span><br><span class="line">            heap.replace(numbers[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> heap.peek();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ±‚æ•°ç»„ä¸­çš„ç¬¬ K å¤§å…ƒç´ ï¼Œä½¿ç”¨å †å¹¶ä¸æ˜¯æœ€ä½³é€‰æ‹©ï¼Œå¯ä»¥é‡‡ç”¨å¿«é€Ÿé€‰æ‹©ç®—æ³•</p></blockquote><h4 id="E03-æ•°æ®æµä¸­ç¬¬Kå¤§å…ƒç´ -Leetcode-703"><a href="#E03-æ•°æ®æµä¸­ç¬¬Kå¤§å…ƒç´ -Leetcode-703" class="headerlink" title="E03. æ•°æ®æµä¸­ç¬¬Kå¤§å…ƒç´ -Leetcode 703"></a>E03. æ•°æ®æµä¸­ç¬¬Kå¤§å…ƒç´ -Leetcode 703</h4><p>ä¸Šé¢˜çš„å°é¡¶å †åŠ ä¸€ä¸ªæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MinHeap</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size == array.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¢˜è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">KthLargest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MinHeap heap;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">KthLargest</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        heap = <span class="keyword">new</span> <span class="title class_">MinHeap</span>(k);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            add(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(!heap.isFull())&#123;</span><br><span class="line">            heap.offer(val);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(val &gt; heap.peek())&#123;</span><br><span class="line">            heap.replace(val);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> heap.peek();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ±‚æ•°æ®æµä¸­çš„ç¬¬ K å¤§å…ƒç´ ï¼Œä½¿ç”¨å †æœ€åˆé€‚ä¸è¿‡</p></blockquote><h4 id="E04-æ•°æ®æµçš„ä¸­ä½æ•°-Leetcode-295"><a href="#E04-æ•°æ®æµçš„ä¸­ä½æ•°-Leetcode-295" class="headerlink" title="E04. æ•°æ®æµçš„ä¸­ä½æ•°-Leetcode 295"></a>E04. æ•°æ®æµçš„ä¸­ä½æ•°-Leetcode 295</h4><p>å¯ä»¥æ‰©å®¹çš„ heap, max ç”¨äºæŒ‡å®šæ˜¯å¤§é¡¶å †è¿˜æ˜¯å°é¡¶å †</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Heap</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] array;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    <span class="type">boolean</span> max;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Heap</span><span class="params">(<span class="type">int</span> capacity, <span class="type">boolean</span> max)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line">        <span class="built_in">this</span>.max = max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> array[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> array[<span class="number">0</span>];</span><br><span class="line">        swap(<span class="number">0</span>, size - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">        down(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> top;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤æŒ‡å®šç´¢å¼•å¤„å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index ç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¢«åˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poll</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">deleted</span> <span class="operator">=</span> array[index];</span><br><span class="line">        swap(index, size - <span class="number">1</span>);</span><br><span class="line">        size--;</span><br><span class="line">        down(index);</span><br><span class="line">        <span class="keyword">return</span> deleted;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›¿æ¢å †é¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> replaced æ–°å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">replace</span><span class="params">(<span class="type">int</span> replaced)</span> &#123;</span><br><span class="line">        array[<span class="number">0</span>] = replaced;</span><br><span class="line">        down(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å †çš„å°¾éƒ¨æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> offered æ–°å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">offer</span><span class="params">(<span class="type">int</span> offered)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size == array.length) &#123;</span><br><span class="line">            grow();</span><br><span class="line">        &#125;</span><br><span class="line">        up(offered);</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">capacity</span> <span class="operator">=</span> size + (size &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span>[] newArray = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line">        System.arraycopy(array, <span class="number">0</span>,</span><br><span class="line">                newArray, <span class="number">0</span>, size);</span><br><span class="line">        array = newArray;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† offered å…ƒç´ ä¸Šæµ®: ç›´è‡³ offered å°äºçˆ¶å…ƒç´ æˆ–åˆ°å †é¡¶</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">up</span><span class="params">(<span class="type">int</span> offered)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">child</span> <span class="operator">=</span> size;</span><br><span class="line">        <span class="keyword">while</span> (child &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">parent</span> <span class="operator">=</span> (child - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">cmp</span> <span class="operator">=</span> max ? offered &gt; array[parent] : offered &lt; array[parent];</span><br><span class="line">            <span class="keyword">if</span> (cmp) &#123;</span><br><span class="line">                array[child] = array[parent];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            child = parent;</span><br><span class="line">        &#125;</span><br><span class="line">        array[child] = offered;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Heap</span><span class="params">(<span class="type">int</span>[] array, <span class="type">boolean</span> max)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = array;</span><br><span class="line">        <span class="built_in">this</span>.size = array.length;</span><br><span class="line">        <span class="built_in">this</span>.max = max;</span><br><span class="line">        heapify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºå †</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapify</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚ä½•æ‰¾åˆ°æœ€åè¿™ä¸ªéå¶å­èŠ‚ç‚¹  size / 2 - 1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            down(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† parent ç´¢å¼•å¤„çš„å…ƒç´ ä¸‹æ½œ: ä¸ä¸¤ä¸ªå­©å­è¾ƒå¤§è€…äº¤æ¢, ç›´è‡³æ²¡å­©å­æˆ–å­©å­æ²¡å®ƒå¤§</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">down</span><span class="params">(<span class="type">int</span> parent)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> parent * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> left + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> parent;</span><br><span class="line">        <span class="keyword">if</span> (left &lt; size &amp;&amp; (max ? array[left] &gt; array[min] : array[left] &lt; array[min])) &#123;</span><br><span class="line">            min = left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (right &lt; size &amp;&amp; (max ? array[right] &gt; array[min] : array[right] &lt; array[min])) &#123;</span><br><span class="line">            min = right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (min != parent) &#123; <span class="comment">// æ‰¾åˆ°äº†æ›´å¤§çš„å­©å­</span></span><br><span class="line">            swap(min, parent);</span><br><span class="line">            down(min);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// äº¤æ¢ä¸¤ä¸ªç´¢å¼•å¤„çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> array[i];</span><br><span class="line">        array[i] = array[j];</span><br><span class="line">        array[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¢˜è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">Heap</span> <span class="variable">left</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Heap</span>(<span class="number">10</span>, <span class="literal">false</span>);</span><br><span class="line"><span class="keyword">private</span> <span class="type">Heap</span> <span class="variable">right</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Heap</span>(<span class="number">10</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> ä¸ºäº†ä¿è¯ä¸¤è¾¹æ•°æ®é‡çš„å¹³è¡¡</span></span><br><span class="line"><span class="comment"> &lt;ul&gt;</span></span><br><span class="line"><span class="comment">  &lt;li&gt;ä¸¤è¾¹æ•°æ®ä¸€æ ·æ—¶,åŠ å…¥å·¦è¾¹&lt;/li&gt;</span></span><br><span class="line"><span class="comment">  &lt;li&gt;ä¸¤è¾¹æ•°æ®ä¸ä¸€æ ·æ—¶,åŠ å…¥å³è¾¹&lt;/li&gt;</span></span><br><span class="line"><span class="comment"> &lt;/ul&gt;</span></span><br><span class="line"><span class="comment"> ä½†æ˜¯, éšä¾¿ä¸€ä¸ªæ•°èƒ½ç›´æ¥åŠ å…¥å—?</span></span><br><span class="line"><span class="comment"> &lt;ul&gt;</span></span><br><span class="line"><span class="comment">  &lt;li&gt;åŠ å…¥å·¦è¾¹å‰, åº”è¯¥æŒ‘å³è¾¹æœ€å°çš„åŠ å…¥&lt;/li&gt;</span></span><br><span class="line"><span class="comment">  &lt;li&gt;åŠ å…¥å³è¾¹å‰, åº”è¯¥æŒ‘å·¦è¾¹æœ€å¤§çš„åŠ å…¥&lt;/li&gt;</span></span><br><span class="line"><span class="comment"> &lt;/ul&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addNum</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (left.size() == right.size()) &#123;</span><br><span class="line">        right.offer(num);</span><br><span class="line">        left.offer(right.poll());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        left.offer(num);</span><br><span class="line">        right.offer(left.poll());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;ul&gt;</span></span><br><span class="line"><span class="comment"> *     &lt;li&gt;ä¸¤è¾¹æ•°æ®ä¸€è‡´, å·¦å³å„å–å †é¡¶å…ƒç´ æ±‚å¹³å‡&lt;/li&gt;</span></span><br><span class="line"><span class="comment"> *     &lt;li&gt;å·¦è¾¹å¤šä¸€ä¸ª, å–å·¦è¾¹å…ƒç´ &lt;/li&gt;</span></span><br><span class="line"><span class="comment"> * &lt;/ul&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">findMedian</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (left.size() == right.size()) &#123;</span><br><span class="line">        <span class="keyword">return</span> (left.peek() + right.peek()) / <span class="number">2.0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> left.peek();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æœ¬é¢˜è¿˜å¯ä»¥ä½¿ç”¨å¹³è¡¡äºŒå‰æœç´¢æ ‘æ±‚è§£ï¼Œä¸è¿‡ä»£ç æ¯”ä¸¤ä¸ªå †å¤æ‚</p></blockquote><h2 id="2-10-äºŒå‰æ ‘"><a href="#2-10-äºŒå‰æ ‘" class="headerlink" title="2.10 äºŒå‰æ ‘"></a>2.10 äºŒå‰æ ‘</h2><p>äºŒå‰æ ‘æ˜¯è¿™ä¹ˆä¸€ç§æ ‘çŠ¶ç»“æ„ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­©å­ï¼Œå·¦å­©å­å’Œå³å­©å­</p><p>é‡è¦çš„äºŒå‰æ ‘ç»“æ„</p><ul><li>å®Œå…¨äºŒå‰æ ‘ï¼ˆcomplete binary treeï¼‰æ˜¯ä¸€ç§äºŒå‰æ ‘ç»“æ„ï¼Œé™¤æœ€åä¸€å±‚ä»¥å¤–ï¼Œæ¯ä¸€å±‚éƒ½å¿…é¡»å¡«æ»¡ï¼Œå¡«å……æ—¶è¦éµä»å…ˆå·¦åå³</li><li>å¹³è¡¡äºŒå‰æ ‘ï¼ˆbalance binary treeï¼‰æ˜¯ä¸€ç§äºŒå‰æ ‘ç»“æ„ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ç›¸å·®ä¸è¶…è¿‡ 1</li></ul><h3 id="1-å­˜å‚¨"><a href="#1-å­˜å‚¨" class="headerlink" title="1) å­˜å‚¨"></a>1) å­˜å‚¨</h3><p>å­˜å‚¨æ–¹å¼åˆ†ä¸ºä¸¤ç§</p><ol><li><p>å®šä¹‰æ ‘èŠ‚ç‚¹ä¸å·¦ã€å³å­©å­å¼•ç”¨ï¼ˆTreeNodeï¼‰</p></li><li><p>ä½¿ç”¨æ•°ç»„ï¼Œå‰é¢è®²å †æ—¶ç”¨è¿‡ï¼Œè‹¥ä»¥ 0 ä½œä¸ºæ ‘çš„æ ¹ï¼Œç´¢å¼•å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è®¡ç®—</p><ul><li>çˆ¶ &#x3D; floor((å­ - 1) &#x2F; 2)</li><li>å·¦å­©å­ &#x3D; çˆ¶ * 2 + 1</li><li>å³å­©å­ &#x3D; çˆ¶ * 2 + 2</li></ul></li></ol><h3 id="2-éå†"><a href="#2-éå†" class="headerlink" title="2) éå†"></a>2) éå†</h3><p>éå†ä¹Ÿåˆ†ä¸ºä¸¤ç§</p><ol><li><p>å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBreadth-first orderï¼‰ï¼šå°½å¯èƒ½å…ˆè®¿é—®è·ç¦»æ ¹æœ€è¿‘çš„èŠ‚ç‚¹ï¼Œä¹Ÿç§°ä¸ºå±‚åºéå†</p></li><li><p>æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDepth-first orderï¼‰ï¼šå¯¹äºäºŒå‰æ ‘ï¼Œå¯ä»¥è¿›ä¸€æ­¥åˆ†æˆä¸‰ç§ï¼ˆè¦æ·±å…¥åˆ°å¶å­èŠ‚ç‚¹ï¼‰</p><ol><li>pre-order å‰åºéå†ï¼Œå¯¹äºæ¯ä¸€æ£µå­æ ‘ï¼Œå…ˆè®¿é—®è¯¥èŠ‚ç‚¹ï¼Œç„¶åæ˜¯å·¦å­æ ‘ï¼Œæœ€åæ˜¯å³å­æ ‘</li><li>in-order ä¸­åºéå†ï¼Œå¯¹äºæ¯ä¸€æ£µå­æ ‘ï¼Œå…ˆè®¿é—®å·¦å­æ ‘ï¼Œç„¶åæ˜¯è¯¥èŠ‚ç‚¹ï¼Œæœ€åæ˜¯å³å­æ ‘</li><li>post-order ååºéå†ï¼Œå¯¹äºæ¯ä¸€æ£µå­æ ‘ï¼Œå…ˆè®¿é—®å·¦å­æ ‘ï¼Œç„¶åæ˜¯å³å­æ ‘ï¼Œæœ€åæ˜¯è¯¥èŠ‚ç‚¹</li></ol></li></ol><h4 id="å¹¿åº¦ä¼˜å…ˆ"><a href="#å¹¿åº¦ä¼˜å…ˆ" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆ"></a>å¹¿åº¦ä¼˜å…ˆ</h4><p><img src="https://i0.hdslb.com/bfs/article/5d569c65d4572e5e258c3032114e850d645325325.png" alt="image-20230216153607396">â€‹</p><table><thead><tr><th>æœ¬è½®å¼€å§‹æ—¶é˜Ÿåˆ—</th><th>æœ¬è½®è®¿é—®èŠ‚ç‚¹</th></tr></thead><tbody><tr><td>[1]</td><td>1</td></tr><tr><td>[2, 3]</td><td>2</td></tr><tr><td>[3, 4]</td><td>3</td></tr><tr><td>[4, 5, 6]</td><td>4</td></tr><tr><td>[5, 6]</td><td>5</td></tr><tr><td>[6, 7, 8]</td><td>6</td></tr><tr><td>[7, 8]</td><td>7</td></tr><tr><td>[8]</td><td>8</td></tr><tr><td>[]</td><td></td></tr></tbody></table><ol><li>åˆå§‹åŒ–ï¼Œå°†æ ¹èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</li><li>å¾ªç¯å¤„ç†é˜Ÿåˆ—ä¸­æ¯ä¸ªèŠ‚ç‚¹ï¼Œç›´è‡³é˜Ÿåˆ—ä¸ºç©º</li><li>æ¯æ¬¡å¾ªç¯å†…å¤„ç†èŠ‚ç‚¹åï¼Œå°†å®ƒçš„å­©å­èŠ‚ç‚¹ï¼ˆå³ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ï¼‰åŠ å…¥é˜Ÿåˆ—</li></ol><blockquote><p>æ³¨æ„</p><ul><li>ä»¥ä¸Šç”¨é˜Ÿåˆ—æ¥å±‚åºéå†æ˜¯é’ˆå¯¹  TreeNode è¿™ç§æ–¹å¼è¡¨ç¤ºçš„äºŒå‰æ ‘</li><li>å¯¹äºæ•°ç»„è¡¨ç°çš„äºŒå‰æ ‘ï¼Œåˆ™ç›´æ¥éå†æ•°ç»„å³å¯ï¼Œè‡ªç„¶ä¸ºå±‚åºéå†çš„é¡ºåº</li></ul></blockquote><h4 id="æ·±åº¦ä¼˜å…ˆ"><a href="#æ·±åº¦ä¼˜å…ˆ" class="headerlink" title="æ·±åº¦ä¼˜å…ˆ"></a>æ·±åº¦ä¼˜å…ˆ</h4><p><img src="https://i0.hdslb.com/bfs/article/d937ac953b5f9ad46a0eae9b948153e0645325325.png" alt="image-20230221110443230">â€‹</p><table><thead><tr><th>æ ˆæš‚å­˜</th><th>å·²å¤„ç†</th><th>å‰åºéå†</th><th>ä¸­åºéå†</th></tr></thead><tbody><tr><td>[1]</td><td>1 âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤</td><td>1</td><td></td></tr><tr><td>[1, 2]</td><td>2âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤<br />1âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤</td><td>2</td><td></td></tr><tr><td>[1, 2, 4]</td><td>4âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸<br />2âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤<br />1âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤</td><td>4</td><td>4</td></tr><tr><td>[1, 2]</td><td>2âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸<br />1âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤</td><td></td><td>2</td></tr><tr><td>[1]</td><td>1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td></td><td>1</td></tr><tr><td>[1, 3]</td><td>3âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤<br />1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td>3</td><td></td></tr><tr><td>[1, 3, 5]</td><td>5âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸<br />3âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤<br />1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td>5</td><td>5</td></tr><tr><td>[1, 3]</td><td>3âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤<br />1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td></td><td>3</td></tr><tr><td>[1, 3, 6]</td><td>6âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸<br />3âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤<br />1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td>6</td><td>6</td></tr><tr><td>[1, 3]</td><td>3âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸<br />1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td></td><td></td></tr><tr><td>[1]</td><td>1âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸</td><td></td><td></td></tr><tr><td>[]</td><td></td><td></td><td></td></tr></tbody></table><h4 id="é€’å½’å®ç°"><a href="#é€’å½’å®ç°" class="headerlink" title="é€’å½’å®ç°"></a>é€’å½’å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;h3&gt;å‰åºéå†&lt;/h3&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">preOrder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.print(node.val + <span class="string">&quot;\t&quot;</span>); <span class="comment">// å€¼</span></span><br><span class="line">    preOrder(node.left); <span class="comment">// å·¦</span></span><br><span class="line">    preOrder(node.right); <span class="comment">// å³</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;h3&gt;ä¸­åºéå†&lt;/h3&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">inOrder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    inOrder(node.left); <span class="comment">// å·¦</span></span><br><span class="line">    System.out.print(node.val + <span class="string">&quot;\t&quot;</span>); <span class="comment">// å€¼</span></span><br><span class="line">    inOrder(node.right); <span class="comment">// å³</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;h3&gt;ååºéå†&lt;/h3&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">postOrder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    postOrder(node.left); <span class="comment">// å·¦</span></span><br><span class="line">    postOrder(node.right); <span class="comment">// å³</span></span><br><span class="line">    System.out.print(node.val + <span class="string">&quot;\t&quot;</span>); <span class="comment">// å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éé€’å½’å®ç°"><a href="#éé€’å½’å®ç°" class="headerlink" title="éé€’å½’å®ç°"></a>éé€’å½’å®ç°</h4><p><strong>å‰åºéå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">LinkedListStack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedListStack</span>&lt;&gt;();</span><br><span class="line"><span class="type">TreeNode</span> <span class="variable">curr</span> <span class="operator">=</span> root;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!stack.isEmpty() || curr != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (curr != <span class="literal">null</span>) &#123;</span><br><span class="line">        stack.push(curr);</span><br><span class="line">        System.out.println(curr);</span><br><span class="line">        curr = curr.left;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">        curr = pop.right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸­åºéå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">LinkedListStack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedListStack</span>&lt;&gt;();</span><br><span class="line"><span class="type">TreeNode</span> <span class="variable">curr</span> <span class="operator">=</span> root;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!stack.isEmpty() || curr != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (curr != <span class="literal">null</span>) &#123;</span><br><span class="line">        stack.push(curr);</span><br><span class="line">        curr = curr.left;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">        System.out.println(pop);</span><br><span class="line">        curr = pop.right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ååºéå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">LinkedListStack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedListStack</span>&lt;&gt;();</span><br><span class="line"><span class="type">TreeNode</span> <span class="variable">curr</span> <span class="operator">=</span> root;</span><br><span class="line"><span class="type">TreeNode</span> <span class="variable">pop</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!stack.isEmpty() || curr != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (curr != <span class="literal">null</span>) &#123;</span><br><span class="line">        stack.push(curr);</span><br><span class="line">        curr = curr.left;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">peek</span> <span class="operator">=</span> stack.peek();</span><br><span class="line">        <span class="keyword">if</span> (peek.right == <span class="literal">null</span> || peek.right == pop) &#123;</span><br><span class="line">            pop = stack.pop();</span><br><span class="line">            System.out.println(pop);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            curr = peek.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºååºéå†ï¼Œå‘å›èµ°æ—¶ï¼Œéœ€è¦å¤„ç†å®Œå³å­æ ‘æ‰èƒ½ pop å‡ºæ ˆã€‚å¦‚ä½•çŸ¥é“å³å­æ ‘å¤„ç†å®Œæˆå‘¢ï¼Ÿ</p><ul><li><p>å¦‚æœæ ˆé¡¶å…ƒç´ çš„ $right \equiv null$ è¡¨ç¤ºæ²¡å•¥å¯å¤„ç†çš„ï¼Œå¯ä»¥å‡ºæ ˆ</p></li><li><p>å¦‚æœæ ˆé¡¶å…ƒç´ çš„ $right \neq null$ï¼Œ</p><ul><li>é‚£ä¹ˆä½¿ç”¨ lastPop è®°å½•æœ€è¿‘å‡ºæ ˆçš„èŠ‚ç‚¹ï¼Œå³è¡¨ç¤ºä»è¿™ä¸ªèŠ‚ç‚¹å‘å›èµ°</li><li>å¦‚æœæ ˆé¡¶å…ƒç´ çš„ $right&#x3D;&#x3D;lastPop$ æ­¤æ—¶åº”å½“å‡ºæ ˆ</li></ul></li></ul><p>å¯¹äºå‰ã€ä¸­ä¸¤ç§éå†ï¼Œå®é™…ä»¥ä¸Šä»£ç ä»å³å­æ ‘å‘å›èµ°æ—¶ï¼Œå¹¶æœªèµ°å®Œå…¨ç¨‹ï¼ˆstack æå‰å‡ºæ ˆäº†ï¼‰ååºéå†ä»¥ä¸Šä»£ç æ˜¯èµ°å®Œå…¨ç¨‹äº†</p><p><strong>ç»Ÿä¸€å†™æ³•</strong></p><p>ä¸‹é¢æ˜¯ä¸€ç§ç»Ÿä¸€çš„å†™æ³•ï¼Œä¾æ®ååºéå†ä¿®æ”¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="type">TreeNode</span> <span class="variable">curr</span> <span class="operator">=</span> root; <span class="comment">// ä»£è¡¨å½“å‰èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">TreeNode</span> <span class="variable">pop</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// æœ€è¿‘ä¸€æ¬¡å¼¹æ ˆçš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">while</span> (curr != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (curr != <span class="literal">null</span>) &#123;</span><br><span class="line">        colorPrintln(<span class="string">&quot;å‰: &quot;</span> + curr.val, <span class="number">31</span>);</span><br><span class="line">        stack.push(curr); <span class="comment">// å‹å…¥æ ˆï¼Œä¸ºäº†è®°ä½å›æ¥çš„è·¯</span></span><br><span class="line">        curr = curr.left;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">peek</span> <span class="operator">=</span> stack.peek();</span><br><span class="line">        <span class="comment">// å³å­æ ‘å¯ä»¥ä¸å¤„ç†, å¯¹ä¸­åºæ¥è¯´, è¦åœ¨å³å­æ ‘å¤„ç†ä¹‹å‰æ‰“å°</span></span><br><span class="line">        <span class="keyword">if</span> (peek.right == <span class="literal">null</span>) &#123;</span><br><span class="line">            colorPrintln(<span class="string">&quot;ä¸­: &quot;</span> + peek.val, <span class="number">36</span>);</span><br><span class="line">            pop = stack.pop();</span><br><span class="line">            colorPrintln(<span class="string">&quot;å: &quot;</span> + pop.val, <span class="number">34</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å³å­æ ‘å¤„ç†å®Œæˆ, å¯¹ä¸­åºæ¥è¯´, æ— éœ€æ‰“å°</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (peek.right == pop) &#123;</span><br><span class="line">            pop = stack.pop();</span><br><span class="line">            colorPrintln(<span class="string">&quot;å: &quot;</span> + pop.val, <span class="number">34</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å³å­æ ‘å¾…å¤„ç†, å¯¹ä¸­åºæ¥è¯´, è¦åœ¨å³å­æ ‘å¤„ç†ä¹‹å‰æ‰“å°</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            colorPrintln(<span class="string">&quot;ä¸­: &quot;</span> + peek.val, <span class="number">36</span>);</span><br><span class="line">            curr = peek.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">colorPrintln</span><span class="params">(String origin, <span class="type">int</span> color)</span> &#123;</span><br><span class="line">    System.out.printf(<span class="string">&quot;\033[%dm%s\033[0m%n&quot;</span>, color, origin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å¼ å›¾æ¼”ç¤ºä¸‰ç§éå†</p><p><img src="https://i0.hdslb.com/bfs/article/e274b48b8fc7ead29f6510a3ae101b2a645325325.png" alt="Sorted_binary_tree_ALL_RGB.svg">â€‹</p><ul><li>çº¢è‰²ï¼šå‰åºéå†é¡ºåº</li><li>ç»¿è‰²ï¼šä¸­åºéå†é¡ºåº</li><li>è“è‰²ï¼šåç»­éå†é¡ºåº</li></ul><h3 id="ä¹ é¢˜-7"><a href="#ä¹ é¢˜-7" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h3><h4 id="E01-å‰åºéå†äºŒå‰æ ‘-Leetcode-144"><a href="#E01-å‰åºéå†äºŒå‰æ ‘-Leetcode-144" class="headerlink" title="E01. å‰åºéå†äºŒå‰æ ‘-Leetcode 144"></a>E01. å‰åºéå†äºŒå‰æ ‘-Leetcode 144</h4><h4 id="E02-ä¸­åºéå†äºŒå‰æ ‘-Leetcode-94"><a href="#E02-ä¸­åºéå†äºŒå‰æ ‘-Leetcode-94" class="headerlink" title="E02. ä¸­åºéå†äºŒå‰æ ‘-Leetcode 94"></a>E02. ä¸­åºéå†äºŒå‰æ ‘-Leetcode 94</h4><h4 id="E03-ååºéå†äºŒå‰æ ‘-Leetcode-145"><a href="#E03-ååºéå†äºŒå‰æ ‘-Leetcode-145" class="headerlink" title="E03. ååºéå†äºŒå‰æ ‘-Leetcode 145"></a>E03. ååºéå†äºŒå‰æ ‘-Leetcode 145</h4><h4 id="E04-å¯¹ç§°äºŒå‰æ ‘-Leetcode-101"><a href="#E04-å¯¹ç§°äºŒå‰æ ‘-Leetcode-101" class="headerlink" title="E04. å¯¹ç§°äºŒå‰æ ‘-Leetcode 101"></a>E04. å¯¹ç§°äºŒå‰æ ‘-Leetcode 101</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSymmetric</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> check(root.left, root.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">check</span><span class="params">(TreeNode left, TreeNode right)</span> &#123;</span><br><span class="line">    <span class="comment">// è‹¥åŒæ—¶ä¸º null</span></span><br><span class="line">    <span class="keyword">if</span> (left == <span class="literal">null</span> &amp;&amp; right == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è‹¥æœ‰ä¸€ä¸ªä¸º null (æœ‰ä¸Šä¸€è½®ç­›é€‰ï¼Œå¦ä¸€ä¸ªè‚¯å®šä¸ä¸º null)</span></span><br><span class="line">    <span class="keyword">if</span> (left == <span class="literal">null</span> || right == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (left.val != right.val) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> check(left.left, right.right) &amp;&amp; check(left.right, right.left);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼é¢˜ç›®ï¼šLeetcode 100 é¢˜ - ç›¸åŒçš„æ ‘</p><h4 id="E05-äºŒå‰æ ‘æœ€å¤§æ·±åº¦-Leetcode-104"><a href="#E05-äºŒå‰æ ‘æœ€å¤§æ·±åº¦-Leetcode-104" class="headerlink" title="E05. äºŒå‰æ ‘æœ€å¤§æ·±åº¦-Leetcode 104"></a>E05. äºŒå‰æ ‘æœ€å¤§æ·±åº¦-Leetcode 104</h4><p><strong>ååºéå†æ±‚è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">    1. å¾—åˆ°å·¦å­æ ‘æ·±åº¦, å¾—åˆ°å³å­æ ‘æ·±åº¦, äºŒè€…æœ€å¤§è€…åŠ ä¸€, å°±æ˜¯æœ¬èŠ‚ç‚¹æ·±åº¦</span></span><br><span class="line"><span class="comment">    2. å› ä¸ºéœ€è¦å…ˆå¾—åˆ°å·¦å³å­æ ‘æ·±åº¦, å¾ˆæ˜¾ç„¶æ˜¯ååºéå†å…¸å‹åº”ç”¨</span></span><br><span class="line"><span class="comment">    3. å…³äºæ·±åº¦çš„å®šä¹‰ï¼šä»æ ¹å‡ºå‘, ç¦»æ ¹æœ€è¿œçš„èŠ‚ç‚¹æ€»è¾¹æ•°,</span></span><br><span class="line"><span class="comment">        æ³¨æ„: åŠ›æ‰£é‡Œçš„æ·±åº¦å®šä¹‰è¦å¤šä¸€</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        æ·±åº¦2         æ·±åº¦3         æ·±åº¦1</span></span><br><span class="line"><span class="comment">        1            1            1</span></span><br><span class="line"><span class="comment">       / \          / \</span></span><br><span class="line"><span class="comment">      2   3        2   3</span></span><br><span class="line"><span class="comment">                        \</span></span><br><span class="line"><span class="comment">                         4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// éåŠ›æ‰£é¢˜ç›®æ”¹ä¸ºè¿”å› -1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">d1</span> <span class="operator">=</span> maxDepth(node.left);</span><br><span class="line">    <span class="type">int</span> <span class="variable">d2</span> <span class="operator">=</span> maxDepth(node.right);</span><br><span class="line">    <span class="keyword">return</span> Integer.max(d1, d2) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ååºéå†æ±‚è§£-éé€’å½’</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">    1. ä½¿ç”¨éé€’å½’ååºéå†, æ ˆçš„æœ€å¤§é«˜åº¦å³ä¸ºæœ€å¤§æ·±åº¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">curr</span> <span class="operator">=</span> root;</span><br><span class="line">    LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">pop</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (curr != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (curr != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(curr);</span><br><span class="line">            <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> stack.size();</span><br><span class="line">            <span class="keyword">if</span> (size &gt; max) &#123;</span><br><span class="line">                max = size;</span><br><span class="line">            &#125;</span><br><span class="line">            curr = curr.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">peek</span> <span class="operator">=</span> stack.peek();</span><br><span class="line">            <span class="keyword">if</span>(peek.right == <span class="literal">null</span> || peek.right == pop) &#123;</span><br><span class="line">                pop = stack.pop();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                curr = peek.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å±‚åºéå†æ±‚è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    æ€è·¯ï¼š</span></span><br><span class="line"><span class="comment">    1. ä½¿ç”¨å±‚åºéå†, å±‚æ•°å³æœ€å¤§æ·±åº¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.offer(root);</span><br><span class="line">    <span class="type">int</span> <span class="variable">level</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        level++;</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> queue.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.offer(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.offer(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> level;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E06-äºŒå‰æ ‘æœ€å°æ·±åº¦-Leetcode-111"><a href="#E06-äºŒå‰æ ‘æœ€å°æ·±åº¦-Leetcode-111" class="headerlink" title="E06. äºŒå‰æ ‘æœ€å°æ·±åº¦-Leetcode 111"></a>E06. äºŒå‰æ ‘æœ€å°æ·±åº¦-Leetcode 111</h4><p><strong>ååºéå†æ±‚è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDepth</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">d1</span> <span class="operator">=</span> minDepth(node.left);</span><br><span class="line">    <span class="type">int</span> <span class="variable">d2</span> <span class="operator">=</span> minDepth(node.right);</span><br><span class="line">    <span class="keyword">if</span> (d1 == <span class="number">0</span> || d2 == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> d1 + d2 + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Integer.min(d1, d2) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›¸è¾ƒäºæ±‚æœ€å¤§æ·±åº¦ï¼Œåº”å½“è€ƒè™‘ï¼š</p><ul><li>å½“å³å­æ ‘ä¸º nullï¼Œåº”å½“è¿”å›å·¦å­æ ‘æ·±åº¦åŠ ä¸€</li><li>å½“å·¦å­æ ‘ä¸º nullï¼Œåº”å½“è¿”å›å³å­æ ‘æ·±åº¦åŠ ä¸€</li></ul><p>ä¸Šé¢ä¸¤ç§æƒ…å†µæ»¡è¶³æ—¶ï¼Œä¸åº”è¯¥å†æŠŠä¸º null å­æ ‘çš„æ·±åº¦ 0 å‚ä¸æœ€å°å€¼æ¯”è¾ƒï¼Œä¾‹å¦‚è¿™æ ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  1</span><br><span class="line"> /</span><br><span class="line">2</span><br></pre></td></tr></table></figure><ul><li>æ­£ç¡®æ·±åº¦ä¸º 2ï¼Œè‹¥æŠŠä¸º null çš„å³å­æ ‘çš„æ·±åº¦ 0 è€ƒè™‘è¿›æ¥ï¼Œä¼šå¾—åˆ°é”™è¯¯ç»“æœ 1</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line"> \</span><br><span class="line">  3</span><br><span class="line">   \</span><br><span class="line">    4</span><br></pre></td></tr></table></figure><ul><li>æ­£ç¡®æ·±åº¦ä¸º 3ï¼Œè‹¥æŠŠä¸º null çš„å·¦å­æ ‘çš„æ·±åº¦ 0 è€ƒè™‘è¿›æ¥ï¼Œä¼šå¾—åˆ°é”™è¯¯ç»“æœ 1</li></ul><p><strong>å±‚åºéå†æ±‚è§£</strong></p><p>é‡åˆ°çš„ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹æ‰€åœ¨å±‚å°±æ˜¯æœ€å°æ·±åº¦</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„æ ‘é‡åˆ°çš„ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹ 3 æ‰€åœ¨çš„å±‚å°±æ˜¯æœ€å°æ·±åº¦ï¼Œå…¶ä»– 4ï¼Œ7 ç­‰å¶å­èŠ‚ç‚¹æ·±åº¦æ›´æ·±ï¼Œä¹Ÿæ›´æ™šé‡åˆ°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    1</span><br><span class="line">   / \   </span><br><span class="line">  2   3</span><br><span class="line"> / \</span><br><span class="line">4   5 </span><br><span class="line">   /</span><br><span class="line">  7 </span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.offer(root);</span><br><span class="line">    <span class="type">int</span> <span class="variable">level</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        level++;</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> queue.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            <span class="keyword">if</span> (node.left == <span class="literal">null</span> &amp;&amp; node.right == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> level;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.offer(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.offer(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> level;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆç‡ä¼šé«˜äºä¹‹å‰ååºéå†è§£æ³•ï¼Œå› ä¸ºæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹åï¼Œå°±æ— éœ€åç»­çš„å±‚åºéå†äº†</p><h4 id="E07-ç¿»è½¬äºŒå‰æ ‘-Leetcode-226"><a href="#E07-ç¿»è½¬äºŒå‰æ ‘-Leetcode-226" class="headerlink" title="E07. ç¿»è½¬äºŒå‰æ ‘-Leetcode 226"></a>E07. ç¿»è½¬äºŒå‰æ ‘-Leetcode 226</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">invertTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    fn(root);</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fn</span><span class="params">(TreeNode node)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">t</span> <span class="operator">=</span> node.left;</span><br><span class="line">    node.left = node.right;</span><br><span class="line">    node.right = t;</span><br><span class="line">    fn(node.left);</span><br><span class="line">    fn(node.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ˆäº¤æ¢ã€å†é€’å½’æˆ–æ˜¯å…ˆé€’å½’ã€å†äº¤æ¢éƒ½å¯ä»¥</p><h4 id="E08-åç¼€è¡¨è¾¾å¼è½¬äºŒå‰æ ‘"><a href="#E08-åç¼€è¡¨è¾¾å¼è½¬äºŒå‰æ ‘" class="headerlink" title="E08. åç¼€è¡¨è¾¾å¼è½¬äºŒå‰æ ‘"></a>E08. åç¼€è¡¨è¾¾å¼è½¬äºŒå‰æ ‘</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String val;</span><br><span class="line">    <span class="keyword">public</span> TreeNode left;</span><br><span class="line">    <span class="keyword">public</span> TreeNode right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeNode</span><span class="params">(String val)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeNode</span><span class="params">(TreeNode left, String val, TreeNode right)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.left = left;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">        <span class="built_in">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    ä¸­ç¼€è¡¨è¾¾å¼           (2-1)*3</span></span><br><span class="line"><span class="comment">    åç¼€ï¼ˆé€†æ³¢å…°ï¼‰è¡¨è¾¾å¼   21-3*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    1.é‡åˆ°æ•°å­—å…¥æ ˆ</span></span><br><span class="line"><span class="comment">    2.é‡åˆ°è¿ç®—ç¬¦, å‡ºæ ˆä¸¤æ¬¡, ä¸å½“å‰èŠ‚ç‚¹å»ºç«‹çˆ¶å­å…³ç³», å½“å‰èŠ‚ç‚¹å…¥æ ˆ</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    æ ˆ</span></span><br><span class="line"><span class="comment">    |   |</span></span><br><span class="line"><span class="comment">    |   |</span></span><br><span class="line"><span class="comment">    |   |</span></span><br><span class="line"><span class="comment">    _____</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    è¡¨è¾¾å¼æ ‘</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">       / \</span></span><br><span class="line"><span class="comment">      -   3</span></span><br><span class="line"><span class="comment">     / \</span></span><br><span class="line"><span class="comment">    2   1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    21-3*</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">constructExpressionTree</span><span class="params">(String[] tokens)</span> &#123;</span><br><span class="line">    LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String t : tokens) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (t) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>, <span class="string">&quot;-&quot;</span>, <span class="string">&quot;*&quot;</span>, <span class="string">&quot;/&quot;</span> -&gt; &#123; <span class="comment">// è¿ç®—ç¬¦</span></span><br><span class="line">                <span class="type">TreeNode</span> <span class="variable">right</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                <span class="type">TreeNode</span> <span class="variable">left</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                <span class="type">TreeNode</span> <span class="variable">parent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(t);</span><br><span class="line">                parent.left = left;</span><br><span class="line">                parent.right = right;</span><br><span class="line">                stack.push(parent);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">default</span> -&gt; &#123; <span class="comment">// æ•°å­—</span></span><br><span class="line">                stack.push(<span class="keyword">new</span> <span class="title class_">TreeNode</span>(t));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stack.peek();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="E09-æ ¹æ®å‰åºä¸ä¸­åºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode-105"><a href="#E09-æ ¹æ®å‰åºä¸ä¸­åºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode-105" class="headerlink" title="E09. æ ¹æ®å‰åºä¸ä¸­åºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode 105"></a>E09. æ ¹æ®å‰åºä¸ä¸­åºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode 105</h4><ul><li>å…ˆé€šè¿‡å‰åºéå†ç»“æœå®šä½æ ¹èŠ‚ç‚¹</li><li>å†ç»“åˆä¸­åºéå†ç»“æœåˆ‡åˆ†å·¦å³å­æ ‘</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E09Leetcode105</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        preOrder = &#123;1,2,4,3,6,7&#125;</span></span><br><span class="line"><span class="comment">        inOrder = &#123;4,2,1,6,3,7&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        æ ¹ 1</span></span><br><span class="line"><span class="comment">            pre         in</span></span><br><span class="line"><span class="comment">        å·¦  2,4         4,2</span></span><br><span class="line"><span class="comment">        å³  3,6,7       6,3,7</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        æ ¹ 2</span></span><br><span class="line"><span class="comment">        å·¦ 4</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        æ ¹ 3</span></span><br><span class="line"><span class="comment">        å·¦ 6</span></span><br><span class="line"><span class="comment">        å³ 7</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] preOrder, <span class="type">int</span>[] inOrder)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (preOrder.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ›å»ºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">rootValue</span> <span class="operator">=</span> preOrder[<span class="number">0</span>];</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(rootValue);</span><br><span class="line">        <span class="comment">// åŒºåˆ†å·¦å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; inOrder.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (inOrder[i] == rootValue) &#123;</span><br><span class="line">                <span class="comment">// 0 ~ i-1 å·¦å­æ ‘</span></span><br><span class="line">                <span class="comment">// i+1 ~ inOrder.length -1 å³å­æ ‘</span></span><br><span class="line">                <span class="type">int</span>[] inLeft = Arrays.copyOfRange(inOrder, <span class="number">0</span>, i); <span class="comment">// [4,2]</span></span><br><span class="line">                <span class="type">int</span>[] inRight = Arrays.copyOfRange(inOrder, i + <span class="number">1</span>, inOrder.length); <span class="comment">// [6,3,7]</span></span><br><span class="line"></span><br><span class="line">                <span class="type">int</span>[] preLeft = Arrays.copyOfRange(preOrder, <span class="number">1</span>, i + <span class="number">1</span>); <span class="comment">// [2,4]</span></span><br><span class="line">                <span class="type">int</span>[] preRight = Arrays.copyOfRange(preOrder, i + <span class="number">1</span>, inOrder.length); <span class="comment">// [3,6,7]</span></span><br><span class="line"></span><br><span class="line">                root.left = buildTree(preLeft, inLeft); <span class="comment">// 2</span></span><br><span class="line">                root.right = buildTree(preRight, inRight); <span class="comment">// 3</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»£ç å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæ¶‰åŠæ–°æ•°æ®ç»“æ„ï¼Œä»¥åå®ç°</li></ul><h4 id="E10-æ ¹æ®ä¸­åºä¸ååºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode-106"><a href="#E10-æ ¹æ®ä¸­åºä¸ååºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode-106" class="headerlink" title="E10. æ ¹æ®ä¸­åºä¸ååºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode 106"></a>E10. æ ¹æ®ä¸­åºä¸ååºéå†ç»“æœæ„é€ äºŒå‰æ ‘-Leetcode 106</h4><ul><li>å…ˆé€šè¿‡ååºéå†ç»“æœå®šä½æ ¹èŠ‚ç‚¹</li><li>å†ç»“åˆä¸­åºéå†ç»“æœåˆ‡åˆ†å·¦å³å­æ ‘</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] inOrder, <span class="type">int</span>[] postOrder)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (inOrder.length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ ¹</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">rootValue</span> <span class="operator">=</span> postOrder[postOrder.length - <span class="number">1</span>];</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(rootValue);</span><br><span class="line">    <span class="comment">// åˆ‡åˆ†å·¦å³å­æ ‘</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; inOrder.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (inOrder[i] == rootValue) &#123;</span><br><span class="line">            <span class="type">int</span>[] inLeft = Arrays.copyOfRange(inOrder, <span class="number">0</span>, i);</span><br><span class="line">            <span class="type">int</span>[] inRight = Arrays.copyOfRange(inOrder, i + <span class="number">1</span>, inOrder.length);</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span>[] postLeft = Arrays.copyOfRange(postOrder, <span class="number">0</span>, i);</span><br><span class="line">            <span class="type">int</span>[] postRight = Arrays.copyOfRange(postOrder, i, postOrder.length - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            root.left = buildTree(inLeft, postLeft);</span><br><span class="line">            root.right = buildTree(inRight, postRight);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»£ç å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæ¶‰åŠæ–°æ•°æ®ç»“æ„ï¼Œä»¥åå®ç°</li></ul><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ¬åœ°æ— æ³•è¿æ¥Mysqlçš„åŸå› </title>
      <link href="/posts/17760.html"/>
      <url>/posts/17760.html</url>
      
        <content type="html"><![CDATA[<ol><li>é‡å¯ docker : <wavy>systemctl restart docker</wavy></li><li>æŸ¥çœ‹dockerä¸­çš„å®¹å™¨ ï¼š<wavy>docker ps</wavy></li><li>å¯åŠ¨æŒ‡å®šå®¹å™¨ <wavy>docker start mysql</wavy> å†æ¬¡æŸ¥çœ‹å…¶ä¸­çš„å®¹å™¨</li><li>è¿›è¡Œè¿æ¥</li></ol>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1. åˆè¯†ç®—æ³•</title>
      <link href="/posts/43711.html"/>
      <url>/posts/43711.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h2 id="1-ä»€ä¹ˆæ˜¯ç®—æ³•"><a href="#1-ä»€ä¹ˆæ˜¯ç®—æ³•" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ç®—æ³•"></a>1. ä»€ä¹ˆæ˜¯ç®—æ³•</h2><p><strong>å®šä¹‰ :</strong>  åœ¨æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œ<span data-type="text" style="color: var(--b3-font-color12);">ç®—æ³•æ˜¯ä¸€ç³»åˆ—æœ‰é™çš„ä¸¥è°¨æŒ‡ä»¤ï¼Œé€šå¸¸ç”¨äºè§£å†³ä¸€ç±»ç‰¹å®šé—®é¢˜æˆ–æ‰§è¡Œè®¡ç®—</span></p><div class="tip info"><p>In mathematics and computer science, an <strong>algorithm</strong> (&#x2F;ËˆÃ¦lÉ¡É™rÉªÃ°É™m&#x2F;) is a finite sequence of rigorous instructions, typically used to solve a class of specific problems or to perform a computation.<sup>1</sup></p></div><p><strong>Introduction to Algorithm</strong>â€‹<sup>2</sup></p><p>ä¸æ­£å¼çš„è¯´ï¼Œ<span data-type="text" style="color: var(--b3-font-color3);">ç®—æ³•å°±æ˜¯ä»»ä½•å®šä¹‰ä¼˜è‰¯çš„è®¡ç®—è¿‡ç¨‹</span>ï¼šæ¥æ”¶ä¸€äº›å€¼ä½œä¸ºè¾“å…¥ï¼Œåœ¨æœ‰é™çš„æ—¶é—´å†…ï¼Œäº§ç”Ÿä¸€äº›å€¼ä½œä¸ºè¾“å‡ºã€‚</p><div class="tip info"><p>Informally, an algorithm is any well-defined computational procedure that takes some value, or set of values, as input and produces some value, or set of values, as output in a finite amount of time.</p></div><h2 id="2-ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„"><a href="#2-ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„" class="headerlink" title="2. ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„"></a>2. ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„</h2><p><strong>å®šä¹‰ :</strong>  åœ¨è®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œæ•°æ®ç»“æ„æ˜¯ä¸€ç§æ•°æ®ç»„ç»‡ã€ç®¡ç†å’Œå­˜å‚¨æ ¼å¼ï¼Œé€šå¸¸è¢«é€‰æ‹©ç”¨æ¥é«˜æ•ˆè®¿é—®æ•°æ®</p><div class="tip info"><p>In computer science, a <strong>data structure</strong> is a data organization, management, and storage format that is usually chosen for efficient access to data</p></div><p><strong>Introduction to Algorithmâ€‹<sup>2</sup></strong></p><p>æ•°æ®ç»“æ„æ˜¯ä¸€ç§å­˜å‚¨å’Œç»„ç»‡æ•°æ®çš„æ–¹å¼ï¼Œæ—¨åœ¨ä¾¿äºè®¿é—®å’Œä¿®æ”¹</p><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>A data structure is a way to store and organize data in order to facilitate access and modifications</p></div><p>å¯ä»¥è¯´ï¼Œ<strong>ç¨‹åº</strong>  <strong>&#x3D;</strong>  <strong>æ•°æ®ç»“æ„ + ç®—æ³•</strong>ï¼Œå®ƒä»¬æ˜¯æ¯ä¸€ä½ç¨‹åºå‘˜çš„åŸºæœ¬åŠŸï¼Œä¸‹æ¥æˆ‘ä»¬é€šè¿‡å¯¹ä¸€ä¸ªéå¸¸è‘—åçš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„è®²è§£æ¥è®¤è¯†ä¸€ä¸‹ç®—æ³•</p><h2 id="3-äºŒåˆ†æŸ¥æ‰¾"><a href="#3-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="3. äºŒåˆ†æŸ¥æ‰¾"></a>3. äºŒåˆ†æŸ¥æ‰¾</h2><p>äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ä¹Ÿç§°æŠ˜åŠæŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„å·¥ä½œäºæœ‰åºæ•°ç»„çš„æŸ¥æ‰¾ç®—æ³•ã€‚åç»­çš„è¯¾ç¨‹ä¸­è¿˜ä¼šå­¦ä¹ æ›´å¤šçš„æŸ¥æ‰¾ç®—æ³•ï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œä¸å¦¨ç”¨å®ƒä½œä¸ºå…¥é—¨ã€‚</p><h3 id="3-1-åŸºç¡€ç‰ˆ"><a href="#3-1-åŸºç¡€ç‰ˆ" class="headerlink" title="3.1 åŸºç¡€ç‰ˆ"></a>3.1 åŸºç¡€ç‰ˆ</h3><p>éœ€æ±‚ï¼šåœ¨<strong>æœ‰åº</strong>æ•°ç»„ A å†…ï¼ŒæŸ¥æ‰¾å€¼ target</p><ul><li>å¦‚æœæ‰¾åˆ°è¿”å›ç´¢å¼•</li><li>å¦‚æœæ‰¾ä¸åˆ°è¿”å› -1</li></ul><p>ç®—æ³•æè¿°:</p><table><thead><tr><th>å‰æ</th><th>ç»™å®šä¸€ä¸ªå†…å« $n$ ä¸ªå…ƒç´ çš„æœ‰åºæ•°ç»„ $A$ï¼Œæ»¡è¶³ $A_{0}\leq A_{1}\leq A_{2}\leq \cdots \leq A_{n-1}$ï¼Œä¸€ä¸ªå¾…æŸ¥å€¼ $target$â€‹</th></tr></thead><tbody><tr><td>1</td><td>è®¾ç½® $i&#x3D;0$ï¼Œ$j&#x3D;n-1$â€‹</td></tr><tr><td>2</td><td>å¦‚æœ $i \gt j$ï¼Œç»“æŸæŸ¥æ‰¾ï¼Œæ²¡æ‰¾åˆ°</td></tr><tr><td>3</td><td>è®¾ç½® $m &#x3D; floor(\frac {i+j}{2})$<span data-type="text" style="color: var(--b3-font-color7);"> </span>ï¼Œ$m$ ä¸ºä¸­é—´ç´¢å¼•ï¼Œ$floor$ æ˜¯å‘ä¸‹å–æ•´ï¼ˆ$\leq \frac {i+j}{2}$ çš„æœ€å°æ•´æ•°ï¼‰</td></tr><tr><td>4</td><td>å¦‚æœ $target &lt; A_{m}$ è®¾ç½® $j &#x3D; m - 1$ï¼Œè·³åˆ°ç¬¬2æ­¥</td></tr><tr><td>5</td><td>å¦‚æœ $A_{m} &lt; target$ è®¾ç½® $i &#x3D; m + 1$ï¼Œè·³åˆ°ç¬¬2æ­¥</td></tr><tr><td>6</td><td>å¦‚æœ $A_{m} &#x3D; target$ï¼Œç»“æŸæŸ¥æ‰¾ï¼Œæ‰¾åˆ°äº†</td></tr></tbody></table><p>â€</p><blockquote><p><em><strong>P.S.</strong></em></p><ul><li>å¯¹äºä¸€ä¸ªç®—æ³•æ¥è®²ï¼Œéƒ½æœ‰è¾ƒä¸ºä¸¥è°¨çš„æè¿°ï¼Œä¸Šé¢æ˜¯ä¸€ä¸ªä¾‹å­</li><li>åç»­è®²è§£æ—¶ï¼Œä»¥ç®€æ˜ç›´ç™½ä¸ºç›®æ ‡ï¼Œä¸ä¼šæ€»ä»¥ä¸Šé¢çš„æ–¹å¼æ¥æè¿°ç®—æ³•</li></ul></blockquote><p>java å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;            <span class="comment">// åœ¨å·¦è¾¹</span></span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123;     <span class="comment">// åœ¨å³è¾¹</span></span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>i,j å¯¹åº”ç€æœç´¢åŒºé—´ [0,a.length-1]ï¼ˆæ³¨æ„æ˜¯é—­åˆçš„åŒºé—´ï¼‰ï¼Œi&lt;=j æ„å‘³ç€æœç´¢åŒºé—´å†…è¿˜æœ‰æœªæ¯”è¾ƒçš„å…ƒç´ ï¼Œi,j æŒ‡å‘çš„å…ƒç´ ä¹Ÿå¯èƒ½æ˜¯æ¯”è¾ƒçš„ç›®æ ‡</p><ul><li>æ€è€ƒï¼šå¦‚æœä¸åŠ  i==j è¡Œä¸è¡Œï¼Ÿ</li><li>å›ç­”ï¼šä¸è¡Œï¼Œå› ä¸ºè¿™æ„å‘³ç€ i,j æŒ‡å‘çš„å…ƒç´ ä¼šæ¼è¿‡æ¯”è¾ƒ</li></ul></li><li><p>m å¯¹åº”ç€ä¸­é—´ä½ç½®ï¼Œä¸­é—´ä½ç½®å·¦è¾¹å’Œå³è¾¹çš„å…ƒç´ å¯èƒ½ä¸ç›¸ç­‰ï¼ˆå·®ä¸€ä¸ªï¼‰ï¼Œä¸ä¼šå½±å“ç»“æœ</p></li><li><p>å¦‚æœæŸæ¬¡æœªæ‰¾åˆ°ï¼Œé‚£ä¹ˆç¼©å°åçš„åŒºé—´å†…ä¸åŒ…å« m</p></li></ul><h3 id="3-2-æ”¹å˜ç‰ˆ"><a href="#3-2-æ”¹å˜ç‰ˆ" class="headerlink" title="3.2 æ”¹å˜ç‰ˆ"></a>3.2 æ”¹å˜ç‰ˆ</h3><p>å¦ä¸€ç§å†™æ³•</p><p><code>int m = (i + j) / 2;</code>â€‹ äºŒè¿›åˆ¶æº¢å‡ºå°±å˜æˆè´Ÿæ•°äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;            <span class="comment">// åœ¨å·¦è¾¹</span></span><br><span class="line">            j = m;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123;     <span class="comment">// åœ¨å³è¾¹</span></span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>i , j å¯¹åº”ç€æœç´¢åŒºé—´ [0,a.length)ï¼ˆæ³¨æ„æ˜¯å·¦é—­å³å¼€çš„åŒºé—´ï¼‰ï¼Œi &lt; j æ„å‘³ç€æœç´¢åŒºé—´å†…è¿˜æœ‰æœªæ¯”è¾ƒçš„å…ƒç´ ï¼Œj æŒ‡å‘çš„<strong>ä¸€å®šä¸æ˜¯</strong>æŸ¥æ‰¾ç›®æ ‡</p><ul><li>æ€è€ƒï¼šä¸ºå•¥è¿™æ¬¡ä¸åŠ  i==j çš„æ¡ä»¶äº†ï¼Ÿ</li><li>å›ç­”ï¼šè¿™å› j æŒ‡å‘çš„ä¸æ˜¯æŸ¥æ‰¾ç›®æ ‡ï¼Œå¦‚æœè¿˜åŠ  i==j æ¡ä»¶ï¼Œå°±æ„å‘³ç€ j æŒ‡å‘çš„è¿˜ä¼šå†æ¬¡æ¯”è¾ƒï¼Œæ‰¾ä¸åˆ°æ—¶ï¼Œä¼šæ­»å¾ªç¯</li></ul></li><li><p>å¦‚æœæŸæ¬¡è¦ç¼©å°å³è¾¹ç•Œï¼Œé‚£ä¹ˆ j=mï¼Œå› ä¸ºæ­¤æ—¶çš„ m å·²ç»<strong>ä¸æ˜¯</strong>æŸ¥æ‰¾ç›®æ ‡äº†</p></li></ul><h2 id="4-è¡¡é‡ç®—æ³•å¥½å"><a href="#4-è¡¡é‡ç®—æ³•å¥½å" class="headerlink" title="4. è¡¡é‡ç®—æ³•å¥½å"></a>4. è¡¡é‡ç®—æ³•å¥½å</h2><p><strong>æ—¶é—´å¤æ‚åº¦</strong></p><p>ä¸‹é¢çš„æŸ¥æ‰¾ç®—æ³•ä¹Ÿèƒ½å¾—å‡ºä¸ä¹‹å‰äºŒåˆ†æŸ¥æ‰¾ä¸€æ ·çš„ç»“æœï¼Œé‚£ä½ èƒ½è¯´å‡ºå®ƒå·®åœ¨å“ªé‡Œå—ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        i &lt; a.length;</span><br><span class="line">        i++</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == k) &#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€ƒè™‘æœ€åæƒ…å†µä¸‹ï¼ˆæ²¡æ‰¾åˆ°ï¼‰ä¾‹å¦‚ <code>[1,2,3,4]</code>â€‹ æŸ¥æ‰¾ 5</p><ul><li><code>int i = 0</code>â€‹ åªæ‰§è¡Œä¸€æ¬¡</li><li><code>i &lt; a.length</code>â€‹ å—æ•°ç»„å…ƒç´ ä¸ªæ•° $n$ çš„å½±å“ï¼Œæ¯”è¾ƒ $n+1$ æ¬¡</li><li><code>i++</code>â€‹ å—æ•°ç»„å…ƒç´ ä¸ªæ•° $n$ çš„å½±å“ï¼Œè‡ªå¢ $n$ æ¬¡</li><li><code>a[i] == k</code>â€‹ å—å…ƒç´ ä¸ªæ•° $n$ çš„å½±å“ï¼Œæ¯”è¾ƒ $n$ æ¬¡</li><li><code>return -1</code>â€‹ï¼Œæ‰§è¡Œä¸€æ¬¡</li></ul><p>ç²—ç•¥è®¤ä¸ºæ¯è¡Œä»£ç æ‰§è¡Œæ—¶é—´æ˜¯ $t$ï¼Œå‡è®¾ $n&#x3D;4$ é‚£ä¹ˆ</p><ul><li>æ€»æ‰§è¡Œæ—¶é—´æ˜¯ $(1+4+1+4+4+1)*t &#x3D; 15t$</li><li>å¯ä»¥æ¨å¯¼å‡ºæ›´ä¸€èˆ¬åœ°å…¬å¼ä¸ºï¼Œ$T &#x3D; (3*n+3)t$</li></ul><p>å¦‚æœå¥—ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œè¿˜æ˜¯ <code>[1,2,3,4]</code>â€‹ æŸ¥æ‰¾ 5</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;<span class="comment">// åœ¨å·¦è¾¹</span></span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123;<span class="comment">// åœ¨å³è¾¹</span></span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><code>int i = 0, j = a.length - 1</code>â€‹ å„æ‰§è¡Œ 1 æ¬¡</p></li><li><p><code>i &lt;= j</code>â€‹ æ¯”è¾ƒ $floor(\log_{2}(n)+1)$ å†åŠ  1 æ¬¡</p></li><li><p><code>(i + j) &gt;&gt;&gt; 1</code>â€‹ è®¡ç®— $floor(\log_{2}(n)+1)$ æ¬¡</p></li><li><p>æ¥ä¸‹æ¥ <code>if() else if() else</code>â€‹ ä¼šæ‰§è¡Œ $3* floor(\log_{2}(n)+1)$ æ¬¡ï¼Œåˆ†åˆ«ä¸º</p><ul><li>if æ¯”è¾ƒ</li><li>else if æ¯”è¾ƒ</li><li>else if æ¯”è¾ƒæˆç«‹åçš„èµ‹å€¼è¯­å¥</li></ul></li><li><p><code>return -1</code>â€‹ï¼Œæ‰§è¡Œä¸€æ¬¡</p></li></ul><p>ç»“æœï¼š</p><ul><li>æ€»æ‰§è¡Œæ—¶é—´ä¸º $(2 + (1+3) + 3 + 3 * 3 +1)*t &#x3D; 19t$</li><li>æ›´ä¸€èˆ¬åœ°å…¬å¼ä¸º $(4 + 5 * floor(\log_{2}(n)+1))*t$</li></ul><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><p>å·¦ä¾§æœªæ‰¾åˆ°å’Œå³ä¾§æœªæ‰¾åˆ°ç»“æœä¸ä¸€æ ·ï¼Œè¿™é‡Œä¸åšåˆ†æ</p></blockquote><p>ä¸¤ä¸ªç®—æ³•æ¯”è¾ƒï¼Œå¯ä»¥çœ‹åˆ° $n$ åœ¨è¾ƒå°çš„æ—¶å€™ï¼ŒäºŒè€…èŠ±è´¹çš„æ¬¡æ•°å·®ä¸å¤š</p><p><img src="https://i0.hdslb.com/bfs/article/ee4d257b10ad51b5546eba0d238198e6645325325.png" alt="image-20240830084339880"></p><p>ä½†éšç€ $n$ è¶Šæ¥è¶Šå¤§ï¼Œæ¯”å¦‚è¯´ $n&#x3D;1000$ æ—¶ï¼Œç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼ˆçº¢è‰²ï¼‰ä¹Ÿå°±æ˜¯ $54t$ï¼Œè€Œè“è‰²ç®—æ³•åˆ™éœ€è¦ $3003t$</p><p><img src="https://i0.hdslb.com/bfs/article/1f18a0c0b1bf6d2e7bb139f813f3ceab645325325.png" alt="image-20240830084317090"></p><blockquote><p>ç”»å›¾é‡‡ç”¨çš„æ˜¯ <a href="https://www.desmos.com/calculator?lang=zh-CN">Desmos | å›¾å½¢è®¡ç®—å™¨</a></p></blockquote><p>è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œ<strong>æ—¶é—´å¤æ‚åº¦</strong>æ˜¯ç”¨æ¥è¡¡é‡ï¼šä¸€ä¸ªç®—æ³•çš„æ‰§è¡Œï¼Œéšæ•°æ®è§„æ¨¡å¢å¤§ï¼Œè€Œå¢é•¿çš„æ—¶é—´æˆæœ¬</p><ul><li>ä¸ä¾èµ–äºç¯å¢ƒå› ç´ </li></ul><p>å¦‚ä½•è¡¨ç¤ºæ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿ</p><ul><li><p>å‡è®¾ç®—æ³•è¦å¤„ç†çš„æ•°æ®è§„æ¨¡æ˜¯ $n$ï¼Œä»£ç æ€»çš„æ‰§è¡Œè¡Œæ•°ç”¨å‡½æ•° $f(n)$ æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š</p><ul><li>çº¿æ€§æŸ¥æ‰¾ç®—æ³•çš„å‡½æ•° $f(n) &#x3D; 3*n + 3$</li><li>äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„å‡½æ•° $f(n) &#x3D; (floor(log_2(n)) + 1) * 5 + 4$</li></ul></li><li><p>ä¸ºäº†å¯¹ $f(n)$ è¿›è¡ŒåŒ–ç®€ï¼Œåº”å½“æŠ“ä½ä¸»è¦çŸ›ç›¾ï¼Œæ‰¾åˆ°ä¸€ä¸ªå˜åŒ–è¶‹åŠ¿ä¸ä¹‹ç›¸è¿‘çš„è¡¨ç¤ºæ³•</p></li></ul><p><strong>å¤§</strong> <strong>$O$</strong> <strong>è¡¨ç¤ºæ³•[^4]</strong></p><p><img src="https://i0.hdslb.com/bfs/article/16c7c71e78616b884c2708bcdd8c0d11645325325.png" alt="image-20221108103846566">â€‹</p><p>å…¶ä¸­</p><ul><li>$c, c_1, c_2$ éƒ½ä¸ºä¸€ä¸ªå¸¸æ•°</li><li>$f(n)$ æ˜¯å®é™…æ‰§è¡Œä»£ç è¡Œæ•°ä¸ n çš„å‡½æ•°</li><li>$g(n)$ æ˜¯ç»è¿‡åŒ–ç®€ï¼Œå˜åŒ–è¶‹åŠ¿ä¸ $f(n)$ ä¸€è‡´çš„ n çš„å‡½æ•°</li></ul><p><strong>æ¸è¿›ä¸Šç•Œ</strong></p><p>æ¸è¿›ä¸Šç•Œï¼ˆasymptotic upper boundï¼‰ï¼šä»æŸä¸ªå¸¸æ•° $n_0$å¼€å§‹ï¼Œ$c*g(n)$ æ€»æ˜¯ä½äº $f(n)$ ä¸Šæ–¹ï¼Œé‚£ä¹ˆè®°ä½œ $O(g(n))$</p><ul><li>ä»£è¡¨ç®—æ³•æ‰§è¡Œçš„æœ€å·®æƒ…å†µ</li></ul><p>ä¾‹1</p><ul><li>$f(n) &#x3D; 3*n+3$</li><li>$g(n) &#x3D; n$</li><li>å– $c&#x3D;4$ï¼Œåœ¨$n_0&#x3D;3$ ä¹‹åï¼Œ$g(n)$ å¯ä»¥ä½œä¸º $f(n)$ çš„æ¸è¿›ä¸Šç•Œï¼Œå› æ­¤è¡¨ç¤ºæ³•å†™ä½œ $O(n)$</li></ul><p>ä¾‹2</p><ul><li>$f(n) &#x3D; 5*floor(log_2(n)) + 9$</li><li>$g(n) &#x3D; log_2(n)$</li><li>$O(log_2(n))$</li></ul><p>å·²çŸ¥ $f(n)$ æ¥è¯´ï¼Œæ±‚ $g(n)$</p><ul><li><p>è¡¨è¾¾å¼ä¸­ç›¸ä¹˜çš„å¸¸é‡ï¼Œå¯ä»¥çœç•¥ï¼Œå¦‚</p><ul><li>$f(n) &#x3D; 100*n^2$ ä¸­çš„ $100$</li></ul></li><li><p>å¤šé¡¹å¼ä¸­æ•°é‡è§„æ¨¡æ›´å°ï¼ˆä½æ¬¡é¡¹ï¼‰çš„è¡¨è¾¾å¼ï¼Œå¦‚</p><ul><li>$f(n)&#x3D;n^2+n$ ä¸­çš„ $n$</li><li>$f(n) &#x3D; n^3 + n^2$ ä¸­çš„ $n^2$</li></ul></li><li><p>ä¸åŒåº•æ•°çš„å¯¹æ•°ï¼Œæ¸è¿›ä¸Šç•Œå¯ä»¥ç”¨ä¸€ä¸ªå¯¹æ•°å‡½æ•° $\log n$ è¡¨ç¤º</p><ul><li>ä¾‹å¦‚ï¼š$log_2(n)$ å¯ä»¥æ›¿æ¢ä¸º $log_{10}(n)$ï¼Œå› ä¸º $log_2(n) &#x3D; \frac{log_{10}(n)}{log_{10}(2)}$ï¼Œç›¸ä¹˜çš„å¸¸é‡ $\frac{1}{log_{10}(2)}$ å¯ä»¥çœç•¥</li></ul></li><li><p>ç±»ä¼¼çš„ï¼Œå¯¹æ•°çš„å¸¸æ•°æ¬¡å¹‚å¯çœç•¥</p><ul><li>å¦‚ï¼š$log(n^c) &#x3D; c * log(n)$</li></ul></li></ul><p><strong>å¸¸è§å¤§</strong> <strong>$O$</strong> <strong>è¡¨ç¤ºæ³•</strong></p><p><img src="https://i0.hdslb.com/bfs/article/5a6b9cf547d0aa5b19f485f3ac35cc83645325325.png" alt="image-20221108114915524">â€‹</p><p>æŒ‰æ—¶é—´å¤æ‚åº¦ä»ä½åˆ°é«˜</p><ul><li>é»‘è‰²æ¨ªçº¿ $O(1)$ï¼Œå¸¸é‡æ—¶é—´ï¼Œæ„å‘³ç€ç®—æ³•æ—¶é—´å¹¶ä¸éšæ•°æ®è§„æ¨¡è€Œå˜åŒ–</li><li>ç»¿è‰² $O(log(n))$ï¼Œå¯¹æ•°æ—¶é—´</li><li>è“è‰² $O(n)$ï¼Œçº¿æ€§æ—¶é—´ï¼Œç®—æ³•æ—¶é—´ä¸æ•°æ®è§„æ¨¡æˆæ­£æ¯”</li><li>æ©™è‰² $O(n*log(n))$ï¼Œæ‹Ÿçº¿æ€§æ—¶é—´</li><li>çº¢è‰² $O(n^2)$ å¹³æ–¹æ—¶é—´</li><li>é»‘è‰²æœä¸Š $O(2^n)$ æŒ‡æ•°æ—¶é—´</li><li>æ²¡ç”»å‡ºæ¥çš„ $O(n!)$</li></ul><p><strong>æ¸è¿›ä¸‹ç•Œ</strong></p><p>æ¸è¿›ä¸‹ç•Œï¼ˆasymptotic lower boundï¼‰ï¼šä»æŸä¸ªå¸¸æ•° $n_0$å¼€å§‹ï¼Œ$c*g(n)$ æ€»æ˜¯ä½äº $f(n)$ ä¸‹æ–¹ï¼Œé‚£ä¹ˆè®°ä½œ $\Omega(g(n))$</p><p><strong>æ¸è¿›ç´§ç•Œ</strong></p><p>æ¸è¿›ç´§ç•Œï¼ˆasymptotic tight boundsï¼‰ï¼šä»æŸä¸ªå¸¸æ•° $n_0$å¼€å§‹ï¼Œ$f(n)$ æ€»æ˜¯åœ¨ $c_1<em>g(n)$ å’Œ $c_2</em>g(n)$ ä¹‹é—´ï¼Œé‚£ä¹ˆè®°ä½œ $\Theta(g(n))$</p><p><strong>ç©ºé—´å¤æ‚åº¦</strong></p><p>ä¸æ—¶é—´å¤æ‚åº¦ç±»ä¼¼ï¼Œä¸€èˆ¬ä¹Ÿä½¿ç”¨å¤§ $O$ è¡¨ç¤ºæ³•æ¥è¡¡é‡ï¼šä¸€ä¸ªç®—æ³•æ‰§è¡Œéšæ•°æ®è§„æ¨¡å¢å¤§ï¼Œè€Œå¢é•¿çš„<strong>é¢å¤–</strong>ç©ºé—´æˆæœ¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearchBasic</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;    <span class="comment">// è®¾ç½®æŒ‡é’ˆå’Œåˆå€¼</span></span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;                <span class="comment">// i~j èŒƒå›´å†…æœ‰ä¸œè¥¿</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(target &lt; a[m]) &#123;         <span class="comment">// ç›®æ ‡åœ¨å·¦è¾¹</span></span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123; <span class="comment">// ç›®æ ‡åœ¨å³è¾¹</span></span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;                    <span class="comment">// æ‰¾åˆ°äº†</span></span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>äºŒåˆ†æŸ¥æ‰¾æ€§èƒ½</strong></p><p>ä¸‹é¢åˆ†æäºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„æ€§èƒ½</p><p>æ—¶é—´å¤æ‚åº¦</p><ul><li>æœ€åæƒ…å†µï¼š$O(\log n)$</li><li>æœ€å¥½æƒ…å†µï¼šå¦‚æœå¾…æŸ¥æ‰¾å…ƒç´ æ°å¥½åœ¨æ•°ç»„ä¸­å¤®ï¼Œåªéœ€è¦å¾ªç¯ä¸€æ¬¡ $O(1)$</li></ul><p>ç©ºé—´å¤æ‚åº¦</p><ul><li>éœ€è¦å¸¸æ•°ä¸ªæŒ‡é’ˆ $i,j,m$ï¼Œå› æ­¤é¢å¤–å ç”¨çš„ç©ºé—´æ˜¯ $O(1)$</li></ul><h2 id="5-å†çœ‹äºŒåˆ†æŸ¥æ‰¾"><a href="#5-å†çœ‹äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="5. å†çœ‹äºŒåˆ†æŸ¥æ‰¾"></a>5. å†çœ‹äºŒåˆ†æŸ¥æ‰¾</h2><h3 id="5-1-å¹³è¡¡ç‰ˆ"><a href="#5-1-å¹³è¡¡ç‰ˆ" class="headerlink" title="5.1 å¹³è¡¡ç‰ˆ"></a>5.1 å¹³è¡¡ç‰ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearchBalance</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span> &lt; j - i) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;</span><br><span class="line">            j = m;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            i = m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (a[i] == target) ? i : -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€æƒ³ï¼š</p><ol><li><p>å·¦é—­å³å¼€çš„åŒºé—´ï¼Œ$i$ æŒ‡å‘çš„å¯èƒ½æ˜¯ç›®æ ‡ï¼Œè€Œ $j$ æŒ‡å‘çš„ä¸æ˜¯ç›®æ ‡</p></li><li><p>ä¸å¥¢æœ›å¾ªç¯å†…é€šè¿‡ $m$ æ‰¾å‡ºç›®æ ‡, ç¼©å°åŒºé—´ç›´è‡³å‰© 1 ä¸ª, å‰©ä¸‹çš„è¿™ä¸ªå¯èƒ½å°±æ˜¯è¦æ‰¾çš„ï¼ˆé€šè¿‡ $i$ï¼‰</p><ul><li>$j - i &gt; 1$ çš„å«ä¹‰æ˜¯ï¼Œåœ¨èŒƒå›´å†…å¾…æ¯”è¾ƒçš„å…ƒç´ ä¸ªæ•° &gt; 1</li></ul></li><li><p>æ”¹å˜ $i$ è¾¹ç•Œæ—¶ï¼Œå®ƒæŒ‡å‘çš„å¯èƒ½æ˜¯ç›®æ ‡ï¼Œå› æ­¤ä¸èƒ½ $m+1$</p></li><li><p>å¾ªç¯å†…çš„å¹³å‡æ¯”è¾ƒæ¬¡æ•°å‡å°‘äº†</p></li><li><p>æ—¶é—´å¤æ‚åº¦ $\Theta(log(n))$</p></li></ol><h3 id="5-2-Java-ç‰ˆ"><a href="#5-2-Java-ç‰ˆ" class="headerlink" title="5.2 Java ç‰ˆ"></a>5.2 Java ç‰ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch0</span><span class="params">(<span class="type">long</span>[] a, <span class="type">int</span> fromIndex, <span class="type">int</span> toIndex,</span></span><br><span class="line"><span class="params">                                     <span class="type">long</span> key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> fromIndex;</span><br><span class="line">    <span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> toIndex - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (low + high) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">midVal</span> <span class="operator">=</span> a[mid];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (midVal &lt; key)</span><br><span class="line">            low = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (midVal &gt; key)</span><br><span class="line">            high = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> mid; <span class="comment">// key found</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -(low + <span class="number">1</span>);  <span class="comment">// key not found.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ä¾‹å¦‚ $[1,3,5,6]$ è¦æ’å…¥ $2$ é‚£ä¹ˆå°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªä½ç½®ï¼Œè¿™ä¸ªä½ç½®å·¦ä¾§å…ƒç´ éƒ½æ¯”å®ƒå°</p><ul><li>ç­‰å¾ªç¯ç»“æŸï¼Œè‹¥æ²¡æ‰¾åˆ°ï¼Œlow å·¦ä¾§å…ƒç´ è‚¯å®šéƒ½æ¯” target å°ï¼Œå› æ­¤ low å³æ’å…¥ç‚¹</li></ul></li><li><p>æ’å…¥ç‚¹å–è´Ÿæ˜¯ä¸ºäº†ä¸æ‰¾åˆ°æƒ…å†µåŒºåˆ†</p></li><li><p>-1 æ˜¯ä¸ºäº†æŠŠç´¢å¼• 0 ä½ç½®çš„æ’å…¥ç‚¹ä¸æ‰¾åˆ°çš„æƒ…å†µè¿›è¡ŒåŒºåˆ†</p></li></ul><h3 id="3-Leftmost-ä¸-Rightmost"><a href="#3-Leftmost-ä¸-Rightmost" class="headerlink" title="3) Leftmost ä¸ Rightmost"></a>3) Leftmost ä¸ Rightmost</h3><p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›è¿”å›çš„æ˜¯æœ€å·¦ä¾§çš„é‡å¤å…ƒç´ ï¼Œå¦‚æœç”¨ Basic äºŒåˆ†æŸ¥æ‰¾</p><ul><li>å¯¹äºæ•°ç»„ $[1, 2, 3, 4, 4, 5, 6, 7]$ï¼ŒæŸ¥æ‰¾å…ƒç´ 4ï¼Œç»“æœæ˜¯ç´¢å¼•3</li><li>å¯¹äºæ•°ç»„ $[1, 2, 4, 4, 4, 5, 6, 7]$ï¼ŒæŸ¥æ‰¾å…ƒç´ 4ï¼Œç»“æœä¹Ÿæ˜¯ç´¢å¼•3ï¼Œå¹¶ä¸æ˜¯æœ€å·¦ä¾§çš„å…ƒç´ </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearchLeftmost1</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">candidate</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;</span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123;</span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            candidate = m; <span class="comment">// è®°å½•å€™é€‰ä½ç½®</span></span><br><span class="line">            j = m - <span class="number">1</span>;     <span class="comment">// ç»§ç»­å‘å·¦</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> candidate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå¸Œæœ›è¿”å›çš„æ˜¯æœ€å³ä¾§å…ƒç´ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearchRightmost1</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">candidate</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;</span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123;</span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            candidate = m; <span class="comment">// è®°å½•å€™é€‰ä½ç½®</span></span><br><span class="line">            i = m + <span class="number">1</span>;   <span class="comment">// ç»§ç»­å‘å³</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> candidate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åº”ç”¨</strong></p><p>å¯¹äº Leftmost ä¸ Rightmostï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªæ¯” -1 æ›´æœ‰ç”¨çš„å€¼</p><p>Leftmost æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearchLeftmost</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt;= a[m]) &#123;</span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>leftmost è¿”å›å€¼çš„å¦ä¸€å±‚å«ä¹‰ï¼š$\lt target$ çš„å…ƒç´ ä¸ªæ•°</li><li>å°äºç­‰äºä¸­é—´å€¼ï¼Œéƒ½è¦å‘å·¦æ‰¾</li></ul><p>Rightmost æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearchRightmost</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;</span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¤§äºç­‰äºä¸­é—´å€¼ï¼Œéƒ½è¦å‘å³æ‰¾</li></ul><p>å‡ ä¸ªåè¯</p><p><img src="https://i0.hdslb.com/bfs/article/86e2476ecb96a9acbd85007507ad864a645325325.png" alt="image-20221125174155058">â€‹</p><p><strong>èŒƒå›´æŸ¥è¯¢</strong>ï¼š</p><ul><li>æŸ¥è¯¢ $x \lt 4$ï¼Œ$0 .. leftmost(4) - 1$</li><li>æŸ¥è¯¢ $x \leq 4$ï¼Œ$0 .. rightmost(4)$</li><li>æŸ¥è¯¢ $4 \lt x$ï¼Œ$rightmost(4) + 1 .. \infty$</li><li>æŸ¥è¯¢ $4 \leq x$ï¼Œ $leftmost(4) .. \infty$</li><li>æŸ¥è¯¢ $4 \leq x \leq 7$ï¼Œ$leftmost(4) .. rightmost(7)$</li><li>æŸ¥è¯¢ $4 \lt x \lt 7$ï¼Œ$rightmost(4)+1 .. leftmost(7)-1$</li></ul><p><strong>æ±‚æ’å</strong>ï¼š$leftmost(target) + 1$</p><ul><li>$target$ å¯ä»¥ä¸å­˜åœ¨ï¼Œå¦‚ï¼š$leftmost(5)+1 &#x3D; 6$</li><li>$target$ ä¹Ÿå¯ä»¥å­˜åœ¨ï¼Œå¦‚ï¼š$leftmost(4)+1 &#x3D; 3$</li></ul><p><strong>æ±‚å‰ä»»ï¼ˆpredecessorï¼‰</strong> ï¼š$leftmost(target) - 1$</p><ul><li>$leftmost(3) - 1 &#x3D; 1$ï¼Œå‰ä»» $a_1 &#x3D; 2$</li><li>$leftmost(4) - 1 &#x3D; 1$ï¼Œå‰ä»» $a_1 &#x3D; 2$</li></ul><p><strong>æ±‚åä»»ï¼ˆsuccessorï¼‰</strong> ï¼š$rightmost(target)+1$</p><ul><li>$rightmost(5) + 1 &#x3D; 5$ï¼Œåä»» $a_5 &#x3D; 7$</li><li>$rightmost(4) + 1 &#x3D; 5$ï¼Œåä»» $a_5 &#x3D; 7$</li></ul><p><strong>æ±‚æœ€è¿‘é‚»å±…</strong>ï¼š</p><ul><li>å‰ä»»å’Œåä»»è·ç¦»æ›´è¿‘è€…</li></ul><h2 id="6-ä¹ é¢˜"><a href="#6-ä¹ é¢˜" class="headerlink" title="6. ä¹ é¢˜"></a>6. ä¹ é¢˜</h2><h3 id="1-æ—¶é—´å¤æ‚åº¦ä¼°ç®—"><a href="#1-æ—¶é—´å¤æ‚åº¦ä¼°ç®—" class="headerlink" title="1) æ—¶é—´å¤æ‚åº¦ä¼°ç®—"></a>1) æ—¶é—´å¤æ‚åº¦ä¼°ç®—</h3><p>ç”¨å‡½æ•° $f(n)$ è¡¨ç¤ºç®—æ³•æ•ˆç‡ä¸æ•°æ®è§„æ¨¡çš„å…³ç³»ï¼Œå‡è®¾æ¯æ¬¡è§£å†³é—®é¢˜éœ€è¦ 1 å¾®ç§’ï¼ˆ$10^{-6}$ ç§’ï¼‰ï¼Œè¿›è¡Œä¼°ç®—ï¼š</p><ol><li>å¦‚æœ $f(n) &#x3D; n^2$ é‚£ä¹ˆ 1 ç§’èƒ½è§£å†³å¤šå°‘æ¬¡é—®é¢˜ï¼Ÿ1 å¤©å‘¢ï¼Ÿ</li><li>å¦‚æœ $f(n) &#x3D; log_2(n)$  é‚£ä¹ˆ 1 ç§’èƒ½è§£å†³å¤šå°‘æ¬¡é—®é¢˜ï¼Ÿ1 å¤©å‘¢ï¼Ÿ</li><li>å¦‚æœ $f(n) &#x3D; n!$ é‚£ä¹ˆ 1 ç§’èƒ½è§£å†³å¤šå°‘æ¬¡é—®é¢˜ï¼Ÿ1 å¤©å‘¢ï¼Ÿ</li></ol><p><strong>å‚è€ƒè§£ç­”</strong></p><ol><li><p>1ç§’ $\sqrt{10^6} &#x3D; 1000$ æ¬¡ï¼Œ1 å¤© $\sqrt{10^6 * 3600 * 24} \approx 293938$ æ¬¡</p></li><li><p>1ç§’ $2^{1,000,000}$ æ¬¡ï¼Œä¸€å¤© $2^{86,400,000,000}$</p></li><li><p>æ¨ç®—å¦‚ä¸‹</p><ul><li>$10! &#x3D; 3,628,800$ 1ç§’èƒ½è§£å†³ $1,000,000$ æ¬¡ï¼Œå› æ­¤æ¬¡æ•°ä¸º 9 æ¬¡</li><li>$14!&#x3D;87,178,291,200$ï¼Œä¸€å¤©èƒ½è§£å†³ $86,400,000,000$ æ¬¡ï¼Œå› æ­¤æ¬¡æ•°ä¸º 13 æ¬¡</li></ul></li></ol><h3 id="2-è€—æ—¶ä¼°ç®—"><a href="#2-è€—æ—¶ä¼°ç®—" class="headerlink" title="2) è€—æ—¶ä¼°ç®—"></a>2) è€—æ—¶ä¼°ç®—</h3><p>ä¸€å°æœºå™¨å¯¹200ä¸ªå•è¯è¿›è¡Œæ’åºèŠ±äº†200ç§’(ä½¿ç”¨å†’æ³¡æ’åº)ï¼Œé‚£ä¹ˆèŠ±è´¹800ç§’ï¼Œå¤§æ¦‚å¯ä»¥å¯¹å¤šå°‘ä¸ªå•è¯è¿›è¡Œæ’åº</p><p>a. 400</p><p>b. 600</p><p>c. 800</p><p>d. 1600</p><p><strong>ç­”æ¡ˆ</strong></p><ul><li>a</li></ul><p><strong>è§£é‡Š</strong></p><ul><li>å†’æ³¡æ’åºæ—¶é—´å¤æ‚åº¦æ˜¯ $O(N^2)$</li><li>æ—¶é—´å¢é•¿ 4 å€ï¼Œè€Œå› æ­¤èƒ½å¤„ç†çš„æ•°æ®é‡æ˜¯åŸæ¥çš„ $\sqrt{4} &#x3D; 2$ å€</li></ul><h3 id="3-E01-äºŒåˆ†æŸ¥æ‰¾-Leetcode-704"><a href="#3-E01-äºŒåˆ†æŸ¥æ‰¾-Leetcode-704" class="headerlink" title="3) E01. äºŒåˆ†æŸ¥æ‰¾-Leetcode 704"></a>3) E01. äºŒåˆ†æŸ¥æ‰¾-Leetcode 704</h3><p><strong>è¦ç‚¹</strong>ï¼šå‡è€Œæ²»ä¹‹ï¼Œå¯ä»¥ç”¨é€’å½’æˆ–éé€’å½’å®ç°</p><p>ç»™å®šä¸€ä¸ª n ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ target  ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ nums ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1</p><p>ä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: nums = [-<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">12</span>], target = <span class="number">9</span></span><br><span class="line">è¾“å‡º: <span class="number">4</span></span><br><span class="line">è§£é‡Š: <span class="number">9</span> å‡ºç°åœ¨ nums ä¸­å¹¶ä¸”ä¸‹æ ‡ä¸º <span class="number">4</span></span><br><span class="line">  </span><br><span class="line">è¾“å…¥: nums = [-<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">12</span>], target = <span class="number">2</span></span><br><span class="line">è¾“å‡º: -<span class="number">1</span></span><br><span class="line">è§£é‡Š: <span class="number">2</span> ä¸å­˜åœ¨ nums ä¸­å› æ­¤è¿”å› -<span class="number">1</span>  </span><br></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼šç•¥ï¼Œå¯ä»¥ç”¨è®²è¿‡çš„ä»»æ„ä¸€ç§äºŒåˆ†æ±‚è§£</p><h3 id="4-E02-æœç´¢æ’å…¥ä½ç½®-Leetcode-35"><a href="#4-E02-æœç´¢æ’å…¥ä½ç½®-Leetcode-35" class="headerlink" title="4) E02. æœç´¢æ’å…¥ä½ç½®-Leetcode 35"></a>4) E02. æœç´¢æ’å…¥ä½ç½®-Leetcode 35</h3><p><strong>è¦ç‚¹</strong>ï¼šç†è§£è°ä»£è¡¨æ’å…¥ä½ç½®</p><p>ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼</p><ul><li>åœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•</li><li>å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®</li></ul><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: nums = [1,3,5,6], target = 5</span><br><span class="line">è¾“å‡º: 2</span><br><span class="line"></span><br><span class="line">è¾“å…¥: nums = [1,3,5,6], target = 2</span><br><span class="line">è¾“å‡º: 1</span><br><span class="line"></span><br><span class="line">è¾“å…¥: nums = [1,3,5,6], target = 7</span><br><span class="line">è¾“å‡º: 4</span><br></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆ1</strong>ï¼šç”¨äºŒåˆ†æŸ¥æ‰¾åŸºç¡€ç‰ˆä»£ç æ”¹å†™ï¼ŒåŸºç¡€ç‰ˆä¸­ï¼Œæ‰¾åˆ°è¿”å› mï¼Œæ²¡æ‰¾åˆ° i ä»£è¡¨æ’å…¥ç‚¹ï¼Œå› æ­¤æœ‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">searchInsert</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;</span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123;</span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i; <span class="comment">// åŸå§‹ return -1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆ2</strong>ï¼šç”¨äºŒåˆ†æŸ¥æ‰¾å¹³è¡¡ç‰ˆæ”¹å†™ï¼Œå¹³è¡¡ç‰ˆä¸­</p><ul><li>å¦‚æœ target &#x3D;&#x3D; a[i] è¿”å› i è¡¨ç¤ºæ‰¾åˆ°</li><li>å¦‚æœ target &lt; a[i]ï¼Œä¾‹å¦‚ target &#x3D; 2ï¼Œa[i] &#x3D; 3ï¼Œè¿™æ—¶å°±åº”è¯¥åœ¨ i ä½ç½®æ’å…¥ 2</li><li>å¦‚æœ a[i] &lt; targetï¼Œä¾‹å¦‚ a[i] &#x3D; 3ï¼Œtarget &#x3D; 4ï¼Œè¿™æ—¶å°±åº”è¯¥åœ¨ i+1 ä½ç½®æ’å…¥ 4</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">searchInsert</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span> &lt; j - i) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;</span><br><span class="line">            j = m;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            i = m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (target &lt;= a[i]) ? i : i + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// åŸå§‹ (target == a[i]) ? i : -1;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆ3</strong>ï¼šç”¨ leftmost ç‰ˆæœ¬è§£ï¼Œè¿”å›å€¼å³ä¸ºæ’å…¥ä½ç½®ï¼ˆå¹¶èƒ½å¤„ç†å…ƒç´ é‡å¤çš„æƒ…å†µï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">searchInsert</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(target &lt;= a[m]) &#123;</span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-E03-æœç´¢å¼€å§‹ç»“æŸä½ç½®-Leetcode-34"><a href="#5-E03-æœç´¢å¼€å§‹ç»“æŸä½ç½®-Leetcode-34" class="headerlink" title="5) E03. æœç´¢å¼€å§‹ç»“æŸä½ç½®-Leetcode 34"></a>5) E03. æœç´¢å¼€å§‹ç»“æŸä½ç½®-Leetcode 34</h3><p>ç»™ä½ ä¸€ä¸ªæŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚è¯·ä½ æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚</p><p>å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ targetï¼Œè¿”å› [-1, -1]ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜</p><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8</span><br><span class="line">è¾“å‡ºï¼š[3,4]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 6</span><br><span class="line">è¾“å‡ºï¼š[-1,-1]</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šnums = [], target = 0</span><br><span class="line">è¾“å‡ºï¼š[-1,-1]</span><br></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">left</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">candidate</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;</span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123;</span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            candidate = m;</span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> candidate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">right</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">candidate</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (target &lt; a[m]) &#123;</span><br><span class="line">            j = m - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123;</span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            candidate = m;</span><br><span class="line">            i = m + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> candidate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] searchRange(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> left(nums, target);</span><br><span class="line">    <span class="keyword">if</span>(x == -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[] &#123;-<span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[] &#123;x, right(nums, target)&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ä¸ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloud ç¯‡</title>
      <link href="/posts/28286.html"/>
      <url>/posts/28286.html</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€ä»€ä¹ˆæ˜¯"><a href="#1ã€ä»€ä¹ˆæ˜¯" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯"></a>1ã€ä»€ä¹ˆæ˜¯</h2><p>Spring cloud æµåº”ç”¨ç¨‹åºå¯åŠ¨å™¨æ˜¯åŸºäº Spring Boot çš„ Spring é›†æˆåº”ç”¨ç¨‹åºï¼Œæä¾›ä¸å¤–éƒ¨ç³»ç»Ÿçš„é›†æˆã€‚Spring cloud Taskï¼Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçŸ­æš‚çš„å¾®æœåŠ¡æ¡†æ¶ï¼Œç”¨äºå¿«é€Ÿæ„å»ºæ‰§è¡Œæœ‰é™æ•°æ®å¤„ç†çš„åº”ç”¨ç¨‹åºã€‚</p><h2 id="2ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡"><a href="#2ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡" class="headerlink" title="2ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡"></a>2ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡</h2><p>å¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼æˆ–è€…è¯´æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œå®ƒæå€¡å°†å•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†ä¸ºä¸€ç»„å°çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¹‹é—´ç›¸äº’åè°ƒã€äº’ç›¸é…åˆï¼Œä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼ã€‚æœåŠ¡ä¹‹é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶äº’ç›¸æ²Ÿé€šï¼ˆé€šå¸¸æ˜¯åŸºäº HTTP çš„ RESTful APIï¼‰,æ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“çš„ä¸šåŠ¡è¿›è¡Œæ„å»ºï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç‹¬ç«‹çš„æ„å»ºåœ¨ç”Ÿäº§ç¯å¢ƒã€ç±»ç”Ÿäº§ç¯å¢ƒç­‰ã€‚å¦å¤–ï¼Œåº”é¿å…ç»Ÿä¸€çš„ã€é›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„ä¸€ä¸ªæœåŠ¡è€Œè¨€ï¼Œåº”æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œé€‰æ‹©åˆé€‚çš„è¯­è¨€ã€å·¥å…·å¯¹å…¶è¿›è¡Œæ„å»ºï¼Œå¯ä»¥æœ‰ä¸€ä¸ªéå¸¸è½»é‡çº§çš„é›†ä¸­å¼ç®¡ç†æ¥åè°ƒè¿™äº›æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€æ¥ç¼–å†™æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®å­˜å‚¨ã€‚</p><h2 id="3ã€SpringCloud-æœ‰ä»€ä¹ˆä¼˜åŠ¿"><a href="#3ã€SpringCloud-æœ‰ä»€ä¹ˆä¼˜åŠ¿" class="headerlink" title="3ã€SpringCloud æœ‰ä»€ä¹ˆä¼˜åŠ¿"></a>3ã€SpringCloud æœ‰ä»€ä¹ˆä¼˜åŠ¿</h2><p>ä½¿ç”¨ Spring Boot å¼€å‘åˆ†å¸ƒå¼å¾®æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä»¥ä¸‹é—®é¢˜</p><p>ï¼ˆ1ï¼‰ä¸åˆ†å¸ƒå¼ç³»ç»Ÿç›¸å…³çš„å¤æ‚æ€§-è¿™ç§å¼€é”€åŒ…æ‹¬ç½‘ç»œé—®é¢˜ï¼Œå»¶è¿Ÿå¼€é”€ï¼Œå¸¦å®½é—®é¢˜ï¼Œå®‰å…¨é—®é¢˜ã€‚</p><p>ï¼ˆ2ï¼‰æœåŠ¡å‘ç°-æœåŠ¡å‘ç°å·¥å…·ç®¡ç†ç¾¤é›†ä¸­çš„æµç¨‹å’ŒæœåŠ¡å¦‚ä½•æŸ¥æ‰¾å’Œäº’ç›¸äº¤è°ˆã€‚å®ƒæ¶‰åŠä¸€ä¸ªæœåŠ¡ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸­æ³¨å†ŒæœåŠ¡ï¼Œç„¶åèƒ½å¤ŸæŸ¥æ‰¾å¹¶è¿æ¥åˆ°è¯¥ç›®å½•ä¸­çš„æœåŠ¡ã€‚</p><p>ï¼ˆ3ï¼‰å†—ä½™-åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å†—ä½™é—®é¢˜ã€‚</p><p>ï¼ˆ4ï¼‰è´Ÿè½½å¹³è¡¡ â€“è´Ÿè½½å¹³è¡¡æ”¹å–„è·¨å¤šä¸ªè®¡ç®—èµ„æºçš„å·¥ä½œè´Ÿè·ï¼Œè¯¸å¦‚è®¡ç®—æœºï¼Œè®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾è·¯ï¼Œä¸­å¤®å¤„ç†å•å…ƒï¼Œæˆ–ç£ç›˜é©±åŠ¨å™¨çš„åˆ†å¸ƒã€‚</p><p>ï¼ˆ5ï¼‰æ€§èƒ½-é—®é¢˜ ç”±äºå„ç§è¿è¥å¼€é”€å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>ï¼ˆ6ï¼‰éƒ¨ç½²å¤æ‚æ€§-Devops æŠ€èƒ½çš„è¦æ±‚ã€‚</p><h2 id="4ã€-ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­ï¼Ÿä»€ä¹ˆæ˜¯æœåŠ¡é™çº§ï¼Ÿ"><a href="#4ã€-ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­ï¼Ÿä»€ä¹ˆæ˜¯æœåŠ¡é™çº§ï¼Ÿ" class="headerlink" title="4ã€ ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­ï¼Ÿä»€ä¹ˆæ˜¯æœåŠ¡é™çº§ï¼Ÿ"></a>4ã€ ä»€ä¹ˆæ˜¯æœåŠ¡ç†”æ–­ï¼Ÿä»€ä¹ˆæ˜¯æœåŠ¡é™çº§ï¼Ÿ</h2><p><strong>ç†”æ–­æœºåˆ¶æ˜¯åº”å¯¹é›ªå´©æ•ˆåº”çš„ä¸€ç§å¾®æœåŠ¡é“¾è·¯ä¿æŠ¤æœºåˆ¶</strong>ã€‚å½“æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨æˆ–è€…å“åº”æ—¶é—´å¤ªé•¿æ—¶ï¼Œä¼šè¿›è¡ŒæœåŠ¡é™çº§ï¼Œè¿›è€Œç†”æ–­è¯¥èŠ‚ç‚¹å¾®æœåŠ¡çš„è°ƒç”¨ï¼Œå¿«é€Ÿè¿”å›â€œé”™è¯¯â€çš„å“åº”ä¿¡æ¯ã€‚å½“æ£€æµ‹åˆ°è¯¥èŠ‚ç‚¹å¾®æœåŠ¡è°ƒç”¨å“åº”æ­£å¸¸åæ¢å¤è°ƒç”¨é“¾è·¯ã€‚åœ¨ SpringCloud æ¡†æ¶é‡Œç†”æ–­æœºåˆ¶é€šè¿‡Hystrix å®ç°ï¼ŒHystrix ä¼šç›‘æ§å¾®æœåŠ¡é—´è°ƒç”¨çš„çŠ¶å†µï¼Œå½“å¤±è´¥çš„è°ƒç”¨åˆ°ä¸€å®šé˜ˆå€¼ï¼Œç¼ºçœæ˜¯ 5 ç§’å†…è°ƒç”¨ 20 æ¬¡ï¼Œå¦‚æœå¤±è´¥ï¼Œå°±ä¼šå¯åŠ¨ç†”æ–­æœºåˆ¶ã€‚æœåŠ¡é™çº§ï¼Œä¸€èˆ¬æ˜¯ä»æ•´ä½“è´Ÿè·è€ƒè™‘ã€‚å°±æ˜¯å½“æŸä¸ªæœåŠ¡ç†”æ–­ä¹‹åï¼ŒæœåŠ¡å™¨å°†ä¸å†è¢«è°ƒç”¨ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¯ä»¥è‡ªå·±å‡†å¤‡ä¸€ä¸ªæœ¬åœ°çš„ fallbackå›è°ƒï¼Œè¿”å›ä¸€ä¸ªç¼ºçœå€¼ã€‚è¿™æ ·åšï¼Œè™½ç„¶æ°´å¹³ä¸‹é™ï¼Œä½†å¥½æ­¹å¯ç”¨ï¼Œæ¯”ç›´æ¥æŒ‚æ‰å¼ºã€‚</p><p><strong>Hystrix ç›¸å…³æ³¨è§£</strong> @EnableHystrixï¼šå¼€å¯ç†”æ–­ @HystrixCommand(fallbackMethod&#x3D;â€XXXâ€)ï¼šå£°æ˜ä¸€ä¸ªå¤±è´¥å›æ»šå¤„ç†å‡½æ•° XXXï¼Œå½“è¢«æ³¨è§£çš„æ–¹æ³•æ‰§è¡Œè¶…æ—¶ï¼ˆé»˜è®¤æ˜¯ 1000 æ¯«ç§’ï¼‰ï¼Œå°±ä¼šæ‰§è¡Œ fallback å‡½æ•°ï¼Œè¿”å›é”™è¯¯æç¤ºã€‚</p><h2 id="5ã€Eureka-å’Œ-zookeeper-éƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½ï¼Œè¯·è¯´è¯´ä¸¤ä¸ªçš„åŒºåˆ«ï¼Ÿ"><a href="#5ã€Eureka-å’Œ-zookeeper-éƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½ï¼Œè¯·è¯´è¯´ä¸¤ä¸ªçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="5ã€Eureka å’Œ zookeeper éƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½ï¼Œè¯·è¯´è¯´ä¸¤ä¸ªçš„åŒºåˆ«ï¼Ÿ"></a>5ã€Eureka å’Œ zookeeper éƒ½å¯ä»¥æä¾›æœåŠ¡æ³¨å†Œä¸å‘ç°çš„åŠŸèƒ½ï¼Œè¯·è¯´è¯´ä¸¤ä¸ªçš„åŒºåˆ«ï¼Ÿ</h2><p>Zookeeper ä¿è¯äº†CPï¼ˆCï¼šä¸€è‡´æ€§ï¼ŒPï¼šåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼ŒEureka ä¿è¯äº†APï¼ˆAï¼šé«˜å¯ç”¨ï¼ŒPï¼šåˆ†åŒºå®¹é”™æ€§ï¼‰</p><p>1.å½“å‘æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢æœåŠ¡åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®¹å¿æ³¨å†Œä¸­å¿ƒè¿”å›çš„æ˜¯å‡ åˆ†é’Ÿä»¥å‰çš„ä¿¡æ¯ï¼Œä½†ä¸èƒ½å®¹å¿ç›´æ¥ down æ‰ä¸å¯ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡æ³¨å†ŒåŠŸèƒ½å¯¹é«˜å¯ç”¨æ€§è¦æ±‚æ¯”è¾ƒé«˜ï¼Œä½† zk ä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“ master èŠ‚ç‚¹å› ä¸ºç½‘ç»œæ•…éšœä¸å…¶ä»–èŠ‚ç‚¹å¤±å»è”ç³»æ—¶ï¼Œå‰©ä½™èŠ‚ç‚¹ä¼šé‡æ–°é€‰ leaderã€‚é—®é¢˜åœ¨äºï¼Œé€‰å– leader æ—¶é—´è¿‡é•¿ï¼Œ30 ~ 120 sï¼Œä¸”é€‰å–æœŸé—´ zk é›†ç¾¤éƒ½ä¸å¯ç”¨ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é€‰å–æœŸé—´æ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚åœ¨äº‘éƒ¨ç½²çš„ç¯å¢ƒä¸‹ï¼Œå› ç½‘ç»œé—®é¢˜ä½¿å¾—zké›†ç¾¤å¤±å»masterèŠ‚ç‚¹æ˜¯è¾ƒå¤§æ¦‚ç‡ä¼šå‘ç”Ÿçš„äº‹ï¼Œè™½ç„¶æœåŠ¡èƒ½å¤Ÿæ¢å¤ï¼Œä½†æ˜¯æ¼«é•¿çš„é€‰å–æ—¶é—´å¯¼è‡´çš„æ³¨å†Œé•¿æœŸä¸å¯ç”¨æ˜¯ä¸èƒ½å®¹å¿çš„ã€‚</p><p>2.Eureka ä¿è¯äº†å¯ç”¨æ€§ï¼ŒEureka å„ä¸ªèŠ‚ç‚¹æ˜¯å¹³ç­‰çš„ï¼Œå‡ ä¸ªèŠ‚ç‚¹æŒ‚æ‰ä¸ä¼šå½±å“æ­£å¸¸èŠ‚ç‚¹çš„å·¥ä½œï¼Œå‰©ä½™çš„èŠ‚ç‚¹ä»ç„¶å¯ä»¥æä¾›æ³¨å†Œå’ŒæŸ¥è¯¢æœåŠ¡ã€‚è€Œ Eureka çš„å®¢æˆ·ç«¯å‘æŸä¸ª Eureka æ³¨å†Œæˆ–å‘ç°æ—¶å‘ç”Ÿè¿æ¥å¤±è´¥ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œåªè¦æœ‰ä¸€å° Eureka è¿˜åœ¨ï¼Œå°±èƒ½ä¿è¯æ³¨å†ŒæœåŠ¡å¯ç”¨ï¼Œåªæ˜¯æŸ¥åˆ°çš„ä¿¡æ¯å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒEureka è¿˜æœ‰è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¦‚æœåœ¨ 15 åˆ†é’Ÿå†…è¶…è¿‡ 85% çš„èŠ‚ç‚¹æ²¡æœ‰æ­£å¸¸çš„å¿ƒè·³ï¼Œé‚£ä¹ˆ Eureka å°±è®¤ä¸ºå®¢æˆ·ç«¯ä¸æ³¨å†Œä¸­å¿ƒå‘ç”Ÿäº†ç½‘ç»œæ•…éšœï¼Œæ­¤æ—¶ä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><p>â‘ ã€Eureka ä¸åœ¨ä»æ³¨å†Œåˆ—è¡¨ä¸­ç§»é™¤å› ä¸ºé•¿æ—¶é—´æ²¡æœ‰æ”¶åˆ°å¿ƒè·³è€Œåº”è¯¥è¿‡æœŸçš„æœåŠ¡ã€‚</p><p>â‘¡ã€Eureka ä»ç„¶èƒ½å¤Ÿæ¥å—æ–°æœåŠ¡çš„æ³¨å†Œå’ŒæŸ¥è¯¢è¯·æ±‚ï¼Œä½†æ˜¯ä¸ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šï¼ˆå³ä¿è¯å½“å‰èŠ‚ç‚¹ä»ç„¶å¯ç”¨ï¼‰</p><p>â‘¢ã€å½“ç½‘ç»œç¨³å®šæ—¶ï¼Œå½“å‰å®ä¾‹æ–°çš„æ³¨å†Œä¿¡æ¯ä¼šè¢«åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ã€‚</p><p>å› æ­¤ï¼ŒEureka å¯ä»¥å¾ˆå¥½çš„åº”å¯¹å› ç½‘ç»œæ•…éšœå¯¼è‡´éƒ¨åˆ†èŠ‚ç‚¹å¤±å»è”ç³»çš„æƒ…å†µï¼Œè€Œä¸ä¼šåƒ Zookeeper é‚£æ ·ä½¿æ•´ä¸ªå¾®æœåŠ¡ç˜«ç—ª</p><h2 id="6ã€SpringBoot-å’Œ-SpringCloud-çš„åŒºåˆ«ï¼Ÿ"><a href="#6ã€SpringBoot-å’Œ-SpringCloud-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="6ã€SpringBoot å’Œ SpringCloud çš„åŒºåˆ«ï¼Ÿ"></a>6ã€SpringBoot å’Œ SpringCloud çš„åŒºåˆ«ï¼Ÿ</h2><p>SpringBoot ä¸“æ³¨äºå¿«é€Ÿæ–¹ä¾¿çš„å¼€å‘å•ä¸ªä¸ªä½“å¾®æœåŠ¡ã€‚</p><p>SpringCloud æ˜¯å…³æ³¨å…¨å±€çš„å¾®æœåŠ¡åè°ƒæ•´ç†æ²»ç†æ¡†æ¶ï¼Œå®ƒå°† SpringBoot å¼€å‘çš„ä¸€ä¸ªä¸ªå•ä½“å¾®æœåŠ¡æ•´åˆå¹¶ç®¡ç†èµ·æ¥ï¼Œä¸ºå„ä¸ªå¾®æœåŠ¡ä¹‹é—´æä¾›ï¼Œé…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€æ–­è·¯å™¨ã€è·¯ç”±ã€å¾®ä»£ç†ã€äº‹ä»¶æ€»çº¿ã€å…¨å±€é”ã€å†³ç­–ç«é€‰ã€åˆ†å¸ƒå¼ä¼šè¯ç­‰ç­‰é›†æˆæœåŠ¡</p><p>SpringBoot å¯ä»¥ç¦»å¼€ SpringCloud ç‹¬ç«‹ä½¿ç”¨å¼€å‘é¡¹ç›®ï¼Œ ä½†æ˜¯ SpringCloud ç¦»ä¸å¼€ SpringBoot ï¼Œå±äºä¾èµ–çš„å…³ç³»ã€‚SpringBoot ä¸“æ³¨äºå¿«é€Ÿã€æ–¹ä¾¿çš„å¼€å‘å•ä¸ªå¾®æœåŠ¡ä¸ªä½“ï¼ŒSpringCloud å…³æ³¨å…¨å±€çš„æœåŠ¡æ²»ç†æ¡†æ¶ã€‚</p><h2 id="7ã€è´Ÿè½½å¹³è¡¡çš„æ„ä¹‰ä»€ä¹ˆï¼Ÿ"><a href="#7ã€è´Ÿè½½å¹³è¡¡çš„æ„ä¹‰ä»€ä¹ˆï¼Ÿ" class="headerlink" title="7ã€è´Ÿè½½å¹³è¡¡çš„æ„ä¹‰ä»€ä¹ˆï¼Ÿ"></a>7ã€è´Ÿè½½å¹³è¡¡çš„æ„ä¹‰ä»€ä¹ˆï¼Ÿ</h2><p>åœ¨è®¡ç®—ä¸­ï¼Œè´Ÿè½½å¹³è¡¡å¯ä»¥æ”¹å–„è·¨è®¡ç®—æœºï¼Œè®¡ç®—æœºé›†ç¾¤ï¼Œç½‘ç»œé“¾æ¥ï¼Œä¸­å¤®å¤„ç†å•å…ƒæˆ–ç£ç›˜é©±åŠ¨å™¨ç­‰å¤šç§è®¡ç®—èµ„æºçš„å·¥ä½œè´Ÿè½½åˆ†å¸ƒã€‚è´Ÿè½½å¹³è¡¡æ—¨åœ¨ä¼˜åŒ–èµ„æºä½¿ç”¨ï¼Œæœ€å¤§åŒ–ååé‡ï¼Œæœ€å°åŒ–å“åº”æ—¶é—´å¹¶é¿å…ä»»ä½•å•ä¸€èµ„æºçš„è¿‡è½½ã€‚ä½¿ç”¨å¤šä¸ªç»„ä»¶è¿›è¡Œè´Ÿè½½å¹³è¡¡è€Œä¸æ˜¯å•ä¸ªç»„ä»¶å¯èƒ½ä¼šé€šè¿‡å†—ä½™æ¥æé«˜å¯é æ€§å’Œå¯ç”¨æ€§ã€‚è´Ÿè½½å¹³è¡¡é€šå¸¸æ¶‰åŠä¸“ç”¨è½¯ä»¶æˆ–ç¡¬ä»¶ï¼Œä¾‹å¦‚å¤šå±‚äº¤æ¢æœºæˆ–åŸŸåç³»ç»ŸæœåŠ¡å™¨è¿›ç¨‹ã€‚</p><h2 id="8ã€ä»€ä¹ˆæ˜¯-Hystrix-ï¼Ÿå®ƒå¦‚ä½•å®ç°å®¹é”™ï¼Ÿ"><a href="#8ã€ä»€ä¹ˆæ˜¯-Hystrix-ï¼Ÿå®ƒå¦‚ä½•å®ç°å®¹é”™ï¼Ÿ" class="headerlink" title="8ã€ä»€ä¹ˆæ˜¯ Hystrix ï¼Ÿå®ƒå¦‚ä½•å®ç°å®¹é”™ï¼Ÿ"></a>8ã€ä»€ä¹ˆæ˜¯ Hystrix ï¼Ÿå®ƒå¦‚ä½•å®ç°å®¹é”™ï¼Ÿ</h2><p>Hystrix æ˜¯ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œæ—¨åœ¨éš”ç¦»è¿œç¨‹ç³»ç»Ÿï¼ŒæœåŠ¡å’Œç¬¬ä¸‰æ–¹åº“çš„è®¿é—®ç‚¹ï¼Œå½“å‡ºç°ä¸å¯é¿å…çš„æ•…éšœæ—¶ï¼Œåœæ­¢çº§è”æ•…éšœå¹¶åœ¨å¤æ‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°å¼¹æ€§ã€‚</p><p>é€šå¸¸å¯¹äºä½¿ç”¨å¾®æœåŠ¡æ¶æ„å¼€å‘çš„ç³»ç»Ÿï¼Œæ¶‰åŠåˆ°è®¸å¤šå¾®æœåŠ¡ã€‚è¿™äº›å¾®æœåŠ¡å½¼æ­¤åä½œã€‚æ€è€ƒä»¥ä¸‹å¾®æœåŠ¡</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-1-20240823074502-yvz8mov.png">â€‹</p><p>å‡è®¾å¦‚æœä¸Šå›¾ä¸­çš„å¾®æœåŠ¡ 9 å¤±è´¥äº†ï¼Œé‚£ä¹ˆä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•æˆ‘ä»¬å°†ä¼ æ’­ä¸€ä¸ªå¼‚å¸¸ã€‚ä½†è¿™ä»ç„¶ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚</p><p>éšç€å¾®æœåŠ¡æ•°é‡çš„å¢åŠ ï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—æ›´åŠ å¤æ‚ã€‚å¾®æœåŠ¡çš„æ•°é‡å¯ä»¥é«˜è¾¾ 1000ã€‚è¿™æ˜¯ hystrix å‡ºç°çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Hystrix åœ¨è¿™ç§æƒ…å†µä¸‹çš„ Fallback æ–¹æ³•åŠŸèƒ½ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªæœåŠ¡ employee-consumer ä½¿ç”¨ç”± employee-consumer å…¬å¼€çš„æœåŠ¡ã€‚</p><p>ç®€åŒ–å›¾å¦‚ä¸‹æ‰€ç¤º</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-2-20240823074502-gshbqnk.png">â€‹</p><p>ç°åœ¨å‡è®¾ç”±äºæŸç§åŸå› ï¼Œemployee-producer å…¬å¼€çš„æœåŠ¡ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚æˆ‘ä»¬åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ Hystrix å®šä¹‰äº†ä¸€ä¸ªå›é€€æ–¹æ³•ã€‚è¿™ç§åå¤‡æ–¹æ³•åº”è¯¥å…·æœ‰ä¸å…¬å¼€æœåŠ¡ç›¸åŒçš„è¿”å›ç±»å‹ã€‚å¦‚æœæš´éœ²æœåŠ¡ä¸­å‡ºç°å¼‚å¸¸ï¼Œåˆ™å›é€€æ–¹æ³•å°†è¿”å›ä¸€äº›å€¼ã€‚</p><h2 id="9ã€ä»€ä¹ˆæ˜¯-Hystrix-æ–­è·¯å™¨ï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ"><a href="#9ã€ä»€ä¹ˆæ˜¯-Hystrix-æ–­è·¯å™¨ï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ" class="headerlink" title="9ã€ä»€ä¹ˆæ˜¯ Hystrix æ–­è·¯å™¨ï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ"></a>9ã€ä»€ä¹ˆæ˜¯ Hystrix æ–­è·¯å™¨ï¼Ÿæˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿ</h2><p>ç”±äºæŸäº›åŸå› ï¼Œemployee-consumer å…¬å¼€æœåŠ¡ä¼šå¼•å‘å¼‚å¸¸ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ Hystrix æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå›é€€æ–¹æ³•ã€‚å¦‚æœåœ¨å…¬å¼€æœåŠ¡ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™å›é€€æ–¹æ³•è¿”å›ä¸€äº›é»˜è®¤å€¼</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-3-20240823074503-lmdlkuu.png">â€‹</p><p>å¦‚æœ firstPage method() ä¸­çš„å¼‚å¸¸ç»§ç»­å‘ç”Ÿï¼Œåˆ™ Hystrix ç”µè·¯å°†ä¸­æ–­ï¼Œå¹¶ä¸”å‘˜å·¥ä½¿ç”¨è€…å°†ä¸€èµ·è·³è¿‡ firtsPage æ–¹æ³•ï¼Œå¹¶ç›´æ¥è°ƒç”¨å›é€€æ–¹æ³•ã€‚ æ–­è·¯å™¨çš„ç›®çš„æ˜¯ç»™ç¬¬ä¸€é¡µæ–¹æ³•æˆ–ç¬¬ä¸€é¡µæ–¹æ³•å¯èƒ½è°ƒç”¨çš„å…¶ä»–æ–¹æ³•ç•™å‡ºæ—¶é—´ï¼Œå¹¶å¯¼è‡´å¼‚å¸¸æ¢å¤ã€‚å¯èƒ½å‘ç”Ÿçš„æƒ…å†µæ˜¯ï¼Œåœ¨è´Ÿè½½è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œå¯¼è‡´å¼‚å¸¸çš„é—®é¢˜æœ‰æ›´å¥½çš„æ¢å¤æœºä¼š ã€‚</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-4-20240823074503-b8b1gec.png">â€‹</p><h2 id="10ã€è¯´è¯´-RPC-çš„å®ç°åŸç†"><a href="#10ã€è¯´è¯´-RPC-çš„å®ç°åŸç†" class="headerlink" title="10ã€è¯´è¯´ RPC çš„å®ç°åŸç†"></a>10ã€è¯´è¯´ RPC çš„å®ç°åŸç†</h2><p>é¦–å…ˆéœ€è¦æœ‰å¤„ç†ç½‘ç»œè¿æ¥é€šè®¯çš„æ¨¡å—ï¼Œè´Ÿè´£è¿æ¥å»ºç«‹ã€ç®¡ç†å’Œæ¶ˆæ¯çš„ä¼ è¾“ã€‚å…¶æ¬¡éœ€è¦æœ‰ç¼–è§£ç çš„æ¨¡å—ï¼Œå› ä¸ºç½‘ç»œé€šè®¯éƒ½æ˜¯ä¼ è¾“çš„å­—èŠ‚ç ï¼Œéœ€è¦å°†æˆ‘ä»¬ä½¿ç”¨çš„å¯¹è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å‰©ä¸‹çš„å°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„éƒ¨åˆ†ï¼ŒæœåŠ¡å™¨ç«¯æš´éœ²è¦å¼€æ”¾çš„æœåŠ¡æ¥å£ï¼Œå®¢æˆ·è°ƒç”¨æœåŠ¡æ¥å£çš„ä¸€ä¸ªä»£ç†å®ç°ï¼Œè¿™ä¸ªä»£ç†å®ç°è´Ÿè´£æ”¶é›†æ•°æ®ã€ç¼–ç å¹¶ä¼ è¾“ç»™æœåŠ¡å™¨ç„¶åç­‰å¾…ç»“æœè¿”å›ã€‚</p><h2 id="11ã€Eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯ä»€ä¹ˆ"><a href="#11ã€Eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯ä»€ä¹ˆ" class="headerlink" title="11ã€Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯ä»€ä¹ˆ?"></a>11ã€Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ˜¯ä»€ä¹ˆ?</h2><p>å½“ Eureka Server èŠ‚ç‚¹åœ¨çŸ­æ—¶é—´å†…ä¸¢å¤±äº†è¿‡å¤šå®ä¾‹çš„è¿æ¥æ—¶ï¼ˆæ¯”å¦‚ç½‘ç»œæ•…éšœæˆ–é¢‘ç¹å¯åŠ¨å…³é—­å®¢æˆ·ç«¯ï¼‰èŠ‚ç‚¹ä¼šè¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œä¿æŠ¤æ³¨å†Œä¿¡æ¯ï¼Œä¸å†åˆ é™¤æ³¨å†Œæ•°æ®ï¼Œæ•…éšœæ¢å¤æ—¶ï¼Œè‡ªåŠ¨é€€å‡ºè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚</p><h2 id="12ã€ä»€ä¹ˆæ˜¯-Ribbon-ï¼Ÿ"><a href="#12ã€ä»€ä¹ˆæ˜¯-Ribbon-ï¼Ÿ" class="headerlink" title="12ã€ä»€ä¹ˆæ˜¯ Ribbon ï¼Ÿ"></a>12ã€ä»€ä¹ˆæ˜¯ Ribbon ï¼Ÿ</h2><p>ribbon æ˜¯ä¸€ä¸ªè´Ÿè½½å‡è¡¡å®¢æˆ·ç«¯ï¼Œå¯ä»¥å¾ˆå¥½çš„æ§åˆ¶ http å’Œ tcp çš„ä¸€äº›è¡Œä¸ºã€‚feign é»˜è®¤é›†æˆäº† ribbonã€‚</p><h2 id="13ã€ä»€ä¹ˆæ˜¯-feigin-ï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#13ã€ä»€ä¹ˆæ˜¯-feigin-ï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="13ã€ä»€ä¹ˆæ˜¯ feigin ï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>13ã€ä»€ä¹ˆæ˜¯ feigin ï¼Ÿå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>1.feign é‡‡ç”¨çš„æ˜¯åŸºäºæ¥å£çš„æ³¨è§£</p><p>2.feign æ•´åˆäº† ribbonï¼Œå…·æœ‰è´Ÿè½½å‡è¡¡çš„èƒ½åŠ›</p><p>3.æ•´åˆäº† Hystrixï¼Œå…·æœ‰ç†”æ–­çš„èƒ½åŠ›</p><p>ä½¿ç”¨: 1.æ·»åŠ  pom ä¾èµ–ã€‚ 2.å¯åŠ¨ç±»æ·»åŠ  @EnableFeignClients 3.å®šä¹‰ä¸€ä¸ªæ¥å£ @FeignClient(name&#x3D;â€œxxxâ€) æŒ‡å®šè°ƒç”¨å“ªä¸ªæœåŠ¡</p><h2 id="14ã€Ribbon-å’Œ-Feign-çš„åŒºåˆ«ï¼Ÿ"><a href="#14ã€Ribbon-å’Œ-Feign-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="14ã€Ribbon å’Œ Feign çš„åŒºåˆ«ï¼Ÿ"></a>14ã€Ribbon å’Œ Feign çš„åŒºåˆ«ï¼Ÿ</h2><p>1.Ribbon éƒ½æ˜¯è°ƒç”¨å…¶ä»–æœåŠ¡çš„ï¼Œä½†æ–¹å¼ä¸åŒã€‚</p><p>2.å¯åŠ¨ç±»æ³¨è§£ä¸åŒï¼ŒRibbon æ˜¯ @RibbonClientï¼›feign çš„æ˜¯ @EnableFeignClients</p><p>3.æœåŠ¡æŒ‡å®šçš„ä½ç½®ä¸åŒï¼ŒRibbon æ˜¯åœ¨ @RibbonClient æ³¨è§£ä¸Šå£°æ˜ï¼ŒFeignåˆ™æ˜¯åœ¨å®šä¹‰æŠ½è±¡æ–¹æ³•çš„æ¥å£ä¸­ä½¿ç”¨ @FeignClient å£°æ˜ã€‚</p><p>4.è°ƒç”¨æ–¹å¼ä¸åŒï¼ŒRibbon éœ€è¦è‡ªå·±æ„å»º http è¯·æ±‚ï¼Œæ¨¡æ‹Ÿ http è¯·æ±‚</p><h2 id="15ã€å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒï¼Ÿ"><a href="#15ã€å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒï¼Ÿ" class="headerlink" title="15ã€å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒï¼Ÿ"></a>15ã€å¦‚ä½•è®¾è®¡ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒï¼Ÿ</h2><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-5-20240823074504-fh1aur5.png">â€‹</p><ul><li>æœåŠ¡æ³¨å†Œ</li><li>æ³¨å†Œè¡¨ç»“æ„è®¾è®¡æœåŠ¡å‘ç°</li><li>æœåŠ¡è®¢é˜…</li><li>æœåŠ¡æ¨é€</li><li>å¥åº·æ£€æŸ¥</li><li>é›†ç¾¤åŒæ­¥ï¼šè®¾è®¡åˆ°æ•°æ®åŒæ­¥ï¼Œæ•°æ®åŒæ­¥æˆ‘ä»¬æœ‰å“ªäº›åè®® raft ã€distroã€ZAB</li></ul><h2 id="16ã€Nacos1-x-ä½œä¸ºæ³¨å†Œä¸­å¿ƒçš„åŸç†ï¼Ÿ"><a href="#16ã€Nacos1-x-ä½œä¸ºæ³¨å†Œä¸­å¿ƒçš„åŸç†ï¼Ÿ" class="headerlink" title="16ã€Nacos1.x ä½œä¸ºæ³¨å†Œä¸­å¿ƒçš„åŸç†ï¼Ÿ"></a>16ã€Nacos1.x ä½œä¸ºæ³¨å†Œä¸­å¿ƒçš„åŸç†ï¼Ÿ</h2><p>1ã€ä½¿ç”¨ HTTP å‘é€æ³¨å†Œ</p><p>2ã€æŸ¥è¯¢æœåŠ¡æä¾›æ–¹åˆ—è¡¨</p><p>3ã€å®šæ—¶æ‹‰å–ï¼ˆæ¯ 10 ç§’ï¼‰</p><p>4ã€æ£€æµ‹åˆ°æœåŠ¡æä¾›è€…å¼‚å¸¸ï¼ŒåŸºäº UDP åè®®æ¨é€æ›´æ–°</p><p>5ã€å®šæ—¶å¿ƒè·³ï¼ˆ5 ç§’ï¼‰ï¼Œæ£€æµ‹æœåŠ¡çŠ¶æ€</p><p>6ã€å®šæ—¶å¿ƒè·³ä»»åŠ¡æ£€æŸ¥</p><p>7ã€é›†ç¾¤æ•°æ®åŒæ­¥ä»»åŠ¡ä½¿ç”¨ Distro</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-6-20240823074504-jygoz5n.png">â€‹</p><h2 id="17ã€Nacos-æœåŠ¡é¢†åŸŸæ¨¡å‹æœ‰å“ªäº›ï¼Ÿ"><a href="#17ã€Nacos-æœåŠ¡é¢†åŸŸæ¨¡å‹æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="17ã€Nacos æœåŠ¡é¢†åŸŸæ¨¡å‹æœ‰å“ªäº›ï¼Ÿ"></a>17ã€Nacos æœåŠ¡é¢†åŸŸæ¨¡å‹æœ‰å“ªäº›ï¼Ÿ</h2><table><thead><tr><th><strong>æ¨¡å‹åç§°</strong></th><th><strong>è§£é‡Š</strong></th></tr></thead><tbody><tr><td>NameSpace</td><td>å®ç°ç¯å¢ƒéš”ç¦»ï¼Œé»˜è®¤å€¼ public</td></tr><tr><td>Group</td><td>ä¸åŒçš„ service å¯ä»¥ç»„æˆä¸€ä¸ª Groupï¼Œé»˜è®¤å€¼ Default-Group</td></tr><tr><td>Service</td><td>æœåŠ¡åç§°</td></tr><tr><td>Cluster</td><td>å¯¹æŒ‡å®šçš„å¾®æœåŠ¡è™šæ‹Ÿåˆ’åˆ†ï¼Œé»˜è®¤å€¼Default</td></tr><tr><td>Instance</td><td>æŸä¸ªæœåŠ¡çš„å…·ä½“å®ä¾‹</td></tr></tbody></table><p>Nacos æœåŠ¡æ³¨å†Œä¸­å¿ƒäºå‘ç°çš„é¢†åŸŸæ¨¡å‹çš„æœ€ä½³å®è·µã€‚</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-7-20240823074505-dk64nha.png">â€‹</p><h2 id="18ã€Nacosä¸­çš„Distroåè®®"><a href="#18ã€Nacosä¸­çš„Distroåè®®" class="headerlink" title="18ã€Nacosä¸­çš„Distroåè®®"></a>18ã€Nacosä¸­çš„Distroåè®®</h2><ul><li>Nacos æ¯ä¸ªèŠ‚ç‚¹è‡ªå·±è´Ÿè´£éƒ¨åˆ†çš„å†™è¯·æ±‚ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹ä¼šæŠŠè‡ªå·±è´Ÿè´£çš„æ–°å¢æ•°æ®åŒæ­¥ç»™å…¶ä»–èŠ‚ç‚¹ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹å®šæ—¶å‘é€è‡ªå·±è´Ÿè´£æ•°æ®çš„æ ¡éªŒå€¼åˆ°å…¶ä»–èŠ‚ç‚¹æ¥ä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹ç‹¬ç«‹å¤„ç†è¯»è¯·æ±‚ï¼ŒåŠæ—¶ä»æœ¬åœ°å‘å‡ºå“åº”ã€‚</li><li>æ–°åŠ å…¥çš„ Distro èŠ‚ç‚¹ä¼šè¿›è¡Œå…¨é‡æ•°æ®æ‹‰å–ã€‚ï¼ˆå…·ä½“æ“ä½œæ˜¯è½®è¯¢æ‰€æœ‰çš„ DistroèŠ‚ç‚¹ï¼Œé€šè¿‡å‘å…¶ä»–çš„æœºå™¨å‘é€è¯·æ±‚æ‹‰å–å…¨é‡æ•°æ®ã€‚ï¼‰</li><li><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-8-20240823074505-h47vrk3.png">â€‹</li></ul><h2 id="19ã€é…ç½®ä¸­å¿ƒçš„æŠ€æœ¯é€‰å‹"><a href="#19ã€é…ç½®ä¸­å¿ƒçš„æŠ€æœ¯é€‰å‹" class="headerlink" title="19ã€é…ç½®ä¸­å¿ƒçš„æŠ€æœ¯é€‰å‹"></a>19ã€é…ç½®ä¸­å¿ƒçš„æŠ€æœ¯é€‰å‹</h2><table><thead><tr><th>åŠŸèƒ½ç‚¹</th><th><strong>Spring Cloud Config</strong></th><th><strong>Apollo</strong></th><th><strong>Nacos</strong></th></tr></thead><tbody><tr><td><strong>ç‰ˆæœ¬ç®¡ç†</strong></td><td>æ”¯æŒï¼ˆGitï¼‰</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>é…ç½®å®æ—¶æ¨é€</strong></td><td>æ”¯æŒï¼ˆSpring Cloud Busï¼‰</td><td>æ”¯æŒï¼ˆHTTP é•¿è½®è¯¢ 1 s å†…ï¼‰</td><td>æ”¯æŒï¼ˆHTTP é•¿è½®è¯¢ 1 s å†… æˆ–è€… grpcï¼‰</td></tr><tr><td><strong>é…ç½®å›æ»š</strong></td><td>æ”¯æŒï¼ˆGitï¼‰</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>ç°åº¦å‘å¸ƒ</strong></td><td>æ”¯æŒï¼ˆè°ƒç”¨æœºå™¨æ¥å£ï¼‰</td><td>æ”¯æŒ</td><td><strong>ä¸æ”¯æŒ</strong></td></tr><tr><td><strong>æƒé™ç®¡ç†</strong></td><td>æ”¯æŒï¼ˆä¾èµ– Gitï¼‰</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>é…ç½®ç”Ÿæ•ˆæ—¶é—´</strong></td><td><strong>é‡å¯</strong></td><td>å®æ—¶</td><td>å®æ—¶</td></tr><tr><td>å®¡è®¡</td><td>æ”¯æŒï¼ˆä¾èµ– Gitï¼‰</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td><strong>å¤šé›†ç¾¤</strong></td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>å¤šç¯å¢ƒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>client æœ¬åœ°ç¼“å­˜</strong></td><td><strong>ä¸æ”¯æŒ</strong></td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>ç›‘å¬æŸ¥è¯¢</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>è¿ç»´æˆæœ¬</td><td>é«˜</td><td>ä¸­ç­‰</td><td>è¾ƒä½</td></tr><tr><td><strong>å¤šè¯­è¨€</strong></td><td>ä»… Java</td><td>ä¸»æµè¯­è¨€ï¼Œæä¾›äº† Open API</td><td>ä¸»æµè¯­è¨€ï¼Œæä¾›äº† Open API</td></tr><tr><td><strong>é…ç½®é¡¹ç»´æŠ¤</strong></td><td>åŸºäº Git</td><td>ç»Ÿä¸€ç•Œé¢</td><td>ç»Ÿä¸€ç•Œé¢</td></tr></tbody></table><h2 id="20ã€Nacos1-x-é…ç½®ä¸­å¿ƒé•¿è½®è¯¢æœºåˆ¶ï¼Ÿ"><a href="#20ã€Nacos1-x-é…ç½®ä¸­å¿ƒé•¿è½®è¯¢æœºåˆ¶ï¼Ÿ" class="headerlink" title="20ã€Nacos1.x é…ç½®ä¸­å¿ƒé•¿è½®è¯¢æœºåˆ¶ï¼Ÿ"></a>20ã€Nacos1.x é…ç½®ä¸­å¿ƒé•¿è½®è¯¢æœºåˆ¶ï¼Ÿ</h2><p>å®¢æˆ·ç«¯ä¼šè½®è¯¢å‘æœåŠ¡ç«¯å‘å‡ºä¸€ä¸ªé•¿è¿æ¥è¯·æ±‚ï¼Œè¿™ä¸ªé•¿è¿æ¥æœ€å¤š 30 s å°±ä¼šè¶…æ—¶ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ä¼šå…ˆåˆ¤æ–­å½“å‰æ˜¯å¦æœ‰é…ç½®æ›´æ–°ï¼Œæœ‰åˆ™ç«‹å³è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æœåŠ¡ç«¯ä¼šå°†è¿™ä¸ªè¯·æ±‚æ‹¿ä½â€œholdâ€ 29.5 s åŠ å…¥é˜Ÿåˆ—ï¼Œæœ€å 0.5 s å†æ£€æµ‹é…ç½®æ–‡ä»¶æ— è®ºæœ‰æ²¡æœ‰æ›´æ–°éƒ½è¿›è¡Œæ­£å¸¸è¿”å›ï¼Œä½†ç­‰å¾…çš„ 29.5 s æœŸé—´æœ‰é…ç½®æ›´æ–°å¯ä»¥æå‰ç»“æŸå¹¶è¿”å›ã€‚</p><h2 id="21ã€Nacos-é…ç½®ä¸­å¿ƒé…ç½®ä¼˜å…ˆçº§ï¼Ÿ"><a href="#21ã€Nacos-é…ç½®ä¸­å¿ƒé…ç½®ä¼˜å…ˆçº§ï¼Ÿ" class="headerlink" title="21ã€Nacos é…ç½®ä¸­å¿ƒé…ç½®ä¼˜å…ˆçº§ï¼Ÿ"></a>21ã€Nacos é…ç½®ä¸­å¿ƒé…ç½®ä¼˜å…ˆçº§ï¼Ÿ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#ä½œç”¨ï¼šé¡ºåº</span><br><span class="line">#$&#123;application.name&#125;-$&#123;profile&#125;.$&#123;file- extension&#125; nacos-config-prod.yaml</span><br><span class="line">#$&#123;application.name&#125;.$&#123;file-extension&#125; nacos-config.yaml</span><br><span class="line">#$&#123;application.name&#125; nacos-config</span><br><span class="line">#extensionConfigs æ‰©å±•é…ç½®æ–‡ä»¶</span><br><span class="line">#sharedConfigs å¤šä¸ªå¾®æœåŠ¡å…¬å…±é…ç½® redis</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=nacos-config</span><br><span class="line">server.port=8081</span><br><span class="line">#nacosåœ°å€</span><br><span class="line">spring.cloud.nacos.config.server-addr=localhost:8848</span><br><span class="line">#1ã€åªæœ‰ä¸Šé¢çš„é…ç½®çš„æ—¶å€™ä»–é»˜è®¤åŠ è½½æ–‡ä»¶ä¸ºï¼š$&#123;application.name&#125; nacos-config</span><br><span class="line">#2ã€æŒ‡å®šæ–‡ä»¶åç¼€åç§°</span><br><span class="line">#åŠ è½½æ–‡ä»¶ä¸ºï¼š$&#123;application.name&#125;.$&#123;file-extension&#125;</span><br><span class="line">#nacos-config.yaml</span><br><span class="line">#spring.cloud.nacos.config.file-extension=yaml</span><br><span class="line">##3ã€profileï¼š æŒ‡å®šç¯å¢ƒ æ–‡ä»¶åï¼š$&#123;application.name&#125;-$&#123;profile&#125;.$&#123;file-extension&#125;</span><br><span class="line">##nacos-config-prod.yaml</span><br><span class="line">#spring.profiles.active=prod</span><br><span class="line">#4ã€nacosè‡ªå·±æä¾›çš„ç¯å¢ƒéš”ç¦» ï¼Œè¿™é‡Œæ˜¯å¼€å‘ç¯å¢ƒä¸‹çš„</span><br><span class="line">#spring.cloud.nacos.config.namespace=ff02931a-6fdb-4681-ac37-2f6d9a0596f8</span><br><span class="line">#5ã€ è‡ªå®šä¹‰ group é…ç½®ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºæ•°æ®åº“é…ç½®ç»„ï¼Œä¸­é—´ä»¶é…ç½®ç»„ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ç”¨ï¼Œ</span><br><span class="line"># é…ç½®ä¸­å¿ƒæ·¡åŒ–äº†ç»„çš„æ¦‚å¿µï¼Œä½¿ç”¨é»˜è®¤å€¼DEFAULT_GROUP</span><br><span class="line">#spring.cloud.nacos.config.group=DEFAULT_GROUP</span><br><span class="line">#</span><br><span class="line">#6ã€è‡ªå®šä¹‰Data Idçš„é…ç½® å…±äº«é…ç½®ï¼ˆsharedConfigsï¼‰</span><br><span class="line">#spring.cloud.nacos.config.shared-configs[0].data-id= common.yaml</span><br><span class="line">##å¯ä»¥ä¸é…ç½®ï¼Œä½¿ç”¨é»˜è®¤</span><br><span class="line">#spring.cloud.nacos.config.shared-configs[0].group=DEFAULT_GROUP</span><br><span class="line">## è¿™é‡Œéœ€è¦è®¾ç½®ä¸ºtrueï¼ŒåŠ¨æ€å¯ä»¥åˆ·æ–°ï¼Œé»˜è®¤ä¸ºfalse</span><br><span class="line">#spring.cloud.nacos.config.shared-configs[0].refresh=true</span><br><span class="line"># 7ã€æ‰©å±•é…ç½®(extensionConfigs)</span><br><span class="line"># æ”¯æŒä¸€ä¸ªåº”ç”¨æœ‰å¤šä¸ªDataIdé…ç½®ï¼Œmybatis.yaml datasource.yaml</span><br><span class="line">#spring.cloud.nacos.config.extension-configs[0].data-id=datasource.yaml</span><br><span class="line">#spring.cloud.nacos.config.extension-configs[0].group=DEFAULT_GROUP</span><br><span class="line">#spring.cloud.nacos.config.extension-configs[0].refresh=true</span><br><span class="line"></span><br><span class="line">#ä½œç”¨ï¼šé¡ºåº</span><br><span class="line">#$&#123;application.name&#125;-$&#123;profile&#125;.$&#123;file- extension&#125; msb-edu-prod.yaml</span><br><span class="line">#$&#123;application.name&#125;.$&#123;file-extension&#125; nacos-config.yaml</span><br><span class="line">#$&#123;application.name&#125; nacos-config</span><br><span class="line">#extensionConfigs æ‰©å±•é…ç½®æ–‡ä»¶</span><br><span class="line">#sharedConfigs å¤šä¸ªå¾®æœåŠ¡å…¬å…±é…ç½® redis</span><br></pre></td></tr></table></figure><h2 id="22ã€Nacos-2-x-å®¢æˆ·ç«¯æ¢æ´»æœºåˆ¶ï¼Ÿ"><a href="#22ã€Nacos-2-x-å®¢æˆ·ç«¯æ¢æ´»æœºåˆ¶ï¼Ÿ" class="headerlink" title="22ã€Nacos 2.x å®¢æˆ·ç«¯æ¢æ´»æœºåˆ¶ï¼Ÿ"></a>22ã€Nacos 2.x å®¢æˆ·ç«¯æ¢æ´»æœºåˆ¶ï¼Ÿ</h2><p>Nacos 2.x å¼•å…¥äº†å®¢æˆ·ç«¯æ¢æ´»æœºåˆ¶ï¼Œè¯¥æœºåˆ¶ä¸»è¦ç”¨äºæ£€æµ‹æœåŠ¡å®ä¾‹çš„å¥åº·çŠ¶æ€ã€‚å…·ä½“æ¥è¯´ï¼ŒNacos 2.x å®¢æˆ·ç«¯æ¢æ´»æœºåˆ¶åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li>æ³¨å†ŒæœåŠ¡å®ä¾‹ï¼šæœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶å°†è‡ªå·±çš„å®ä¾‹ä¿¡æ¯æ³¨å†Œåˆ° Nacos Server ä¸­ï¼ŒåŒ…æ‹¬ IP åœ°å€ã€ç«¯å£å·å’Œå¥åº·çŠ¶æ€ç­‰ã€‚</li><li>å¿ƒè·³æ£€æµ‹ï¼šNacos Server ä¼šå‘¨æœŸæ€§åœ°å‘æœåŠ¡å®ä¾‹å‘é€å¿ƒè·³è¯·æ±‚ï¼Œä»¥æ£€æµ‹å®ä¾‹æ˜¯å¦å­˜æ´»ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¿ƒè·³æ£€æµ‹é—´éš”ä¸º 5 ç§’ã€‚</li><li>å¥åº·æ£€æµ‹ï¼šæœåŠ¡å®ä¾‹åœ¨æ¥æ”¶åˆ° Nacos Server çš„å¿ƒè·³è¯·æ±‚åï¼Œä¼šè¿”å›ä¸€ä¸ªå¥åº·çŠ¶æ€ç»™ Nacos Serverã€‚å¦‚æœæœåŠ¡å®ä¾‹é•¿æ—¶é—´æœªè¿”å›å¥åº·çŠ¶æ€æˆ–è¿”å›çš„çŠ¶æ€ä¸ºä¸å¥åº·ï¼ŒNacos Server ä¼šè®¤ä¸ºè¯¥å®ä¾‹ä¸å¯ç”¨ã€‚</li><li>å¥åº·çŠ¶æ€æ›´æ–°ï¼šæœåŠ¡å®ä¾‹çš„å¥åº·çŠ¶æ€å¯èƒ½ä¼šå› ä¸ºå„ç§åŸå› å‘ç”Ÿå˜åŒ–ï¼Œä¾‹å¦‚ç½‘ç»œæ•…éšœæˆ–æœåŠ¡å¼‚å¸¸ã€‚å½“æœåŠ¡å®ä¾‹çš„å¥åº·çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒNacos Server ä¼šåŠæ—¶æ›´æ–°å®ä¾‹çš„å¥åº·çŠ¶æ€ã€‚</li></ol><p>é€šè¿‡å®¢æˆ·ç«¯æ¢æ´»æœºåˆ¶ï¼ŒNacos å¯ä»¥åŠ¨æ€åœ°ç›‘æµ‹å’Œç®¡ç†æœåŠ¡å®ä¾‹çš„å¥åº·çŠ¶æ€ï¼Œä»¥ç¡®ä¿æœåŠ¡çš„å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚</p><h2 id="23ã€Ribbon-åº•å±‚æ€æ ·å®ç°ä¸åŒæœåŠ¡çš„ä¸åŒé…ç½®"><a href="#23ã€Ribbon-åº•å±‚æ€æ ·å®ç°ä¸åŒæœåŠ¡çš„ä¸åŒé…ç½®" class="headerlink" title="23ã€Ribbon åº•å±‚æ€æ ·å®ç°ä¸åŒæœåŠ¡çš„ä¸åŒé…ç½®"></a>23ã€Ribbon åº•å±‚æ€æ ·å®ç°ä¸åŒæœåŠ¡çš„ä¸åŒé…ç½®</h2><p>Ribbon æ˜¯ä¸€ä¸ªè´Ÿè½½å‡è¡¡å®¢æˆ·ç«¯ï¼Œå®ƒçš„åº•å±‚å®ç°ä¸»è¦ä¾èµ–äºä»¥ä¸‹å‡ ä¸ªç»„ä»¶ï¼š</p><ol><li>æœåŠ¡å‘ç°ï¼šRibbon é€šè¿‡ä¸æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆå¦‚ Eurekaã€Consul æˆ– Nacosï¼‰è¿›è¡Œé›†æˆï¼Œè·å–å¯ç”¨çš„æœåŠ¡å®ä¾‹åˆ—è¡¨ã€‚é€šè¿‡æœåŠ¡å‘ç°ï¼ŒRibbon å¯ä»¥åŠ¨æ€åœ°è·å–ä¸åŒæœåŠ¡çš„å®ä¾‹ä¿¡æ¯ã€‚</li><li>è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼šRibbon æ”¯æŒå¤šç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œä¾‹å¦‚è½®è¯¢ã€éšæœºã€åŠ æƒéšæœºã€åŠ æƒè½®è¯¢ç­‰ã€‚æ ¹æ®ä¸åŒçš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ŒRibbon å¯ä»¥åœ¨ä¸åŒçš„æœåŠ¡å®ä¾‹ä¹‹é—´è¿›è¡Œè¯·æ±‚çš„åˆ†å‘ã€‚</li><li>é…ç½®ç®¡ç†ï¼šRibbon å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æˆ–é…ç½®ä¸­å¿ƒï¼ˆå¦‚ Spring Cloud Config æˆ– Nacosï¼‰è·å–æœåŠ¡çš„ç›¸å…³é…ç½®ä¿¡æ¯ã€‚è¿™äº›é…ç½®ä¿¡æ¯å¯ä»¥åŒ…æ‹¬è¿æ¥è¶…æ—¶æ—¶é—´ã€é‡è¯•æ¬¡æ•°ã€è¿æ¥æ± å¤§å°ç­‰ã€‚é€šè¿‡é…ç½®ç®¡ç†ï¼ŒRibbon å¯ä»¥æ ¹æ®ä¸åŒçš„æœåŠ¡è®¾ç½®ä¸åŒçš„é…ç½®ã€‚</li></ol><p>é€šè¿‡ä»¥ä¸Šç»„ä»¶çš„åä½œï¼ŒRibbon å¯ä»¥æ ¹æ®æœåŠ¡çš„ä¸åŒé…ç½®æ¥è¿›è¡Œè¯·æ±‚çš„è´Ÿè½½å‡è¡¡ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é’ˆå¯¹ä¸åŒçš„æœåŠ¡è®¾ç½®ä¸åŒçš„è´Ÿè½½å‡è¡¡ç­–ç•¥æˆ–è¶…æ—¶æ—¶é—´ï¼Œä»¥æ»¡è¶³ä¸åŒæœåŠ¡çš„éœ€æ±‚ã€‚</p><h2 id="24ã€ä¸ºä»€ä¹ˆ-Feign-ç¬¬ä¸€æ¬¡è°ƒç”¨è€—æ—¶å¾ˆé•¿ï¼Ÿ"><a href="#24ã€ä¸ºä»€ä¹ˆ-Feign-ç¬¬ä¸€æ¬¡è°ƒç”¨è€—æ—¶å¾ˆé•¿ï¼Ÿ" class="headerlink" title="24ã€ä¸ºä»€ä¹ˆ Feign ç¬¬ä¸€æ¬¡è°ƒç”¨è€—æ—¶å¾ˆé•¿ï¼Ÿ"></a>24ã€ä¸ºä»€ä¹ˆ Feign ç¬¬ä¸€æ¬¡è°ƒç”¨è€—æ—¶å¾ˆé•¿ï¼Ÿ</h2><p>åœ¨ä½¿ç”¨ Feign è¿›è¡Œç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°è¾ƒé•¿çš„è€—æ—¶ã€‚è¿™æ˜¯ç”±äºä»¥ä¸‹åŸå› ï¼š</p><ol><li>æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ï¼šFeign åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶éœ€è¦è¿›è¡ŒæœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡æ“ä½œï¼Œä»¥ç¡®å®šè¦è°ƒç”¨çš„æœåŠ¡å®ä¾‹ã€‚è¿™æ¶‰åŠåˆ°ä¸æœåŠ¡æ³¨å†Œä¸­å¿ƒé€šä¿¡ã€è·å–å¯ç”¨å®ä¾‹åˆ—è¡¨å¹¶é€‰æ‹©ä¸€ä¸ªå®ä¾‹ç­‰æ­¥éª¤ï¼Œè¿™äº›æ“ä½œå¯èƒ½ä¼šèŠ±è´¹ä¸€äº›æ—¶é—´ã€‚</li><li>è¿œç¨‹è°ƒç”¨åˆå§‹åŒ–ï¼šåœ¨è¿›è¡Œç¬¬ä¸€æ¬¡è¿œç¨‹è°ƒç”¨æ—¶ï¼ŒFeign éœ€è¦åˆå§‹åŒ–ç›¸å…³çš„ HTTP è¿æ¥å’Œè¿æ¥æ± ç­‰èµ„æºã€‚è¿™åŒ…æ‹¬å»ºç«‹ TCP è¿æ¥ã€è¿›è¡Œ TLS æ¡æ‰‹ï¼ˆå¦‚æœä½¿ç”¨ HTTPSï¼‰ä»¥åŠåˆ›å»º HTTP è¯·æ±‚ç­‰ã€‚è¿™äº›åˆå§‹åŒ–è¿‡ç¨‹å¯èƒ½ä¼šå¯¼è‡´ä¸€å®šçš„å»¶è¿Ÿã€‚</li><li>æœåŠ¡å®ä¾‹çš„å†·å¯åŠ¨ï¼šå¦‚æœæœåŠ¡å®ä¾‹å¤„äºç©ºé—²çŠ¶æ€ï¼Œå¯èƒ½ä¼šå› ä¸ºå†·å¯åŠ¨è€Œå¯¼è‡´ç¬¬ä¸€æ¬¡è°ƒç”¨çš„è€—æ—¶è¾ƒé•¿ã€‚å†·å¯åŠ¨æ—¶ï¼ŒæœåŠ¡å®ä¾‹éœ€è¦è¿›è¡Œåˆå§‹åŒ–å’ŒåŠ è½½ç›¸å…³èµ„æºï¼Œè¿™å¯èƒ½ä¼šèŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚</li></ol><p><strong>ä¸ºäº†å‡å°‘ Feign ç¬¬ä¸€æ¬¡è°ƒç”¨çš„è€—æ—¶ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹æªæ–½ï¼š</strong></p><ol><li>å¯ç”¨è¿æ¥æ± ï¼šå¯ä»¥é€šè¿‡é…ç½® Feign ä½¿ç”¨è¿æ¥æ± æ¥å¤ç”¨ TCP è¿æ¥ï¼Œå‡å°‘è¿æ¥çš„å»ºç«‹å’Œé‡Šæ”¾å¼€é”€ï¼Œæé«˜æ€§èƒ½ã€‚</li><li>é¢„çƒ­æœåŠ¡å®ä¾‹ï¼šå¯ä»¥é€šè¿‡å®šæ—¶ä»»åŠ¡æˆ–å®šæ—¶å¥åº·æ£€æŸ¥ç­‰æ–¹å¼ï¼Œå®šæœŸå‘é€å¿ƒè·³è¯·æ±‚æˆ–è°ƒç”¨æœåŠ¡å®ä¾‹ï¼Œä½¿å…¶ä¿æŒæ´»è·ƒçŠ¶æ€ï¼Œé¿å…å†·å¯åŠ¨å¸¦æ¥çš„å»¶è¿Ÿã€‚</li><li>è°ƒæ•´è¶…æ—¶æ—¶é—´ï¼šæ ¹æ®å®é™…æƒ…å†µï¼Œå¯ä»¥é€‚å½“è°ƒæ•´ Feign çš„è¶…æ—¶æ—¶é—´è®¾ç½®ï¼Œä»¥ç¡®ä¿åœ¨ç½‘ç»œçŠ¶å†µè¾ƒå·®æˆ–æœåŠ¡å“åº”è¾ƒæ…¢æ—¶ï¼Œä¸ä¼šå› è¶…æ—¶å¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚</li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒFeign çš„ç¬¬ä¸€æ¬¡è°ƒç”¨è€—æ—¶é—®é¢˜å¯èƒ½æ˜¯æ­£å¸¸ç°è±¡ï¼Œå› ä¸ºåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒæœåŠ¡ä¹‹é—´çš„é€šä¿¡å’Œè°ƒç”¨æ˜¯ä¸å¯é¿å…çš„ï¼Œè€Œè¿™äº›åˆå§‹åŒ–å’Œå‡†å¤‡è¿‡ç¨‹éƒ½éœ€è¦ä¸€å®šçš„æ—¶é—´ã€‚</p><h2 id="25ã€Ribbon-çš„å±æ€§é…ç½®å’Œç±»é…ç½®ä¼˜å…ˆçº§"><a href="#25ã€Ribbon-çš„å±æ€§é…ç½®å’Œç±»é…ç½®ä¼˜å…ˆçº§" class="headerlink" title="25ã€Ribbon çš„å±æ€§é…ç½®å’Œç±»é…ç½®ä¼˜å…ˆçº§"></a>25ã€Ribbon çš„å±æ€§é…ç½®å’Œç±»é…ç½®ä¼˜å…ˆçº§</h2><p>åœ¨ Ribbon ä¸­ï¼Œå±æ€§é…ç½®å’Œç±»é…ç½®æœ‰ä¸åŒçš„ä¼˜å…ˆçº§ã€‚å…·ä½“æ¥è¯´ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½å¦‚ä¸‹ï¼š</p><ol><li>å±æ€§é…ç½®ä¼˜å…ˆçº§é«˜äºç±»é…ç½®ï¼šå¦‚æœåœ¨å±æ€§é…ç½®å’Œç±»é…ç½®ä¸­åŒæ—¶è®¾ç½®äº†ç›¸åŒçš„å±æ€§ï¼Œå±æ€§é…ç½®ä¼šè¦†ç›–ç±»é…ç½®ã€‚å±æ€§é…ç½®é€šå¸¸æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆå¦‚ <code>application.properties</code>â€‹ æˆ– <code>application.yml</code>â€‹ï¼‰ä¸­çš„å±æ€§æ¥è¿›è¡Œè®¾ç½®ã€‚</li><li>ç±»é…ç½®ï¼šç±»é…ç½®æ˜¯é€šè¿‡ç¼–ç¨‹æ–¹å¼è¿›è¡Œè®¾ç½®ï¼Œé€šå¸¸æ˜¯é€šè¿‡åˆ›å»º <code>RibbonClientConfiguration</code>â€‹ çš„å­ç±»å¹¶è¦†ç›–å…¶ä¸­çš„æ–¹æ³•æ¥è¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚ç±»é…ç½®ä¸­å¯ä»¥è®¾ç½®ä¸€äº›é»˜è®¤çš„å±æ€§å€¼ï¼Œè¿™äº›å±æ€§å€¼å°†è¢«åº”ç”¨äºæ‰€æœ‰çš„ Ribbon å®¢æˆ·ç«¯ã€‚</li><li>å…¨å±€é»˜è®¤é…ç½®ï¼šRibbon è¿˜æä¾›äº†ä¸€äº›å…¨å±€é»˜è®¤é…ç½®ï¼Œå¯¹æ‰€æœ‰çš„ Ribbon å®¢æˆ·ç«¯éƒ½ç”Ÿæ•ˆã€‚å¯ä»¥é€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä»¥â€ribbon.â€å¼€å¤´çš„å±æ€§æ¥è¿›è¡Œå…¨å±€é»˜è®¤é…ç½®ã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼Œå±æ€§é…ç½®å…·æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ï¼Œä¼šè¦†ç›–ç±»é…ç½®å’Œå…¨å±€é»˜è®¤é…ç½®ã€‚ç±»é…ç½®çš„ä¼˜å…ˆçº§æ¬¡ä¹‹ï¼Œè€Œå…¨å±€é»˜è®¤é…ç½®çš„ä¼˜å…ˆçº§æœ€ä½ã€‚é€šè¿‡è¿™ç§ä¼˜å…ˆçº§çš„è®¾ç½®ï¼Œå¯ä»¥åœ¨ä¸åŒçš„å±‚çº§ä¸Šå¯¹ Ribbon è¿›è¡Œçµæ´»çš„é…ç½®å’Œå®šåˆ¶ã€‚</p><h2 id="26ã€Feign-çš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ"><a href="#26ã€Feign-çš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="26ã€Feign çš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ"></a>26ã€Feign çš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ</h2><p>è¦ä¼˜åŒ– Feign çš„æ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li>å¯ç”¨è¿æ¥æ± ï¼šé€šè¿‡é…ç½® Feign ä½¿ç”¨è¿æ¥æ± æ¥å¤ç”¨ TCP è¿æ¥ï¼Œå‡å°‘è¿æ¥çš„å»ºç«‹å’Œé‡Šæ”¾å¼€é”€ï¼Œæé«˜æ€§èƒ½ã€‚å¯ä»¥é€šè¿‡é…ç½® <code>httpclient</code>â€‹çš„ç›¸å…³å±æ€§ï¼Œå¦‚ <code>maxTotalConnections</code>â€‹ å’Œ <code>maxConnectionsPerRoute</code>â€‹ æ¥æ§åˆ¶è¿æ¥æ± çš„å¤§å°ã€‚</li><li>è°ƒæ•´è¶…æ—¶æ—¶é—´ï¼šæ ¹æ®å®é™…æƒ…å†µï¼Œå¯ä»¥é€‚å½“è°ƒæ•´Feignçš„è¶…æ—¶æ—¶é—´è®¾ç½®ï¼Œä»¥ç¡®ä¿åœ¨ç½‘ç»œçŠ¶å†µè¾ƒå·®æˆ–æœåŠ¡å“åº”è¾ƒæ…¢æ—¶ï¼Œä¸ä¼šå› è¶…æ—¶å¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚å¯ä»¥é€šè¿‡é…ç½® <code>connectTimeout</code>â€‹ å’Œ <code>readTimeout</code>â€‹ æ¥è®¾ç½®è¿æ¥è¶…æ—¶å’Œè¯»å–è¶…æ—¶æ—¶é—´ã€‚</li><li>æ‰¹é‡è¯·æ±‚ï¼šå¦‚æœæœ‰å¤šä¸ªç‹¬ç«‹çš„è¯·æ±‚éœ€è¦å‘é€ç»™åŒä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Feign çš„æ‰¹é‡è¯·æ±‚åŠŸèƒ½ï¼Œå°†å¤šä¸ªè¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªæ‰¹é‡è¯·æ±‚å‘é€ï¼Œå‡å°‘ç½‘ç»œå¼€é”€å’Œè¿æ¥å»ºç«‹çš„æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚</li><li>å¯ç”¨ GZIP å‹ç¼©ï¼šå¯ä»¥é€šè¿‡é…ç½® Feign å¯ç”¨ GZIP å‹ç¼©æ¥å‡å°‘ç½‘ç»œä¼ è¾“çš„æ•°æ®é‡ï¼Œæé«˜æ€§èƒ½ã€‚å¯ä»¥é€šè¿‡è®¾ç½® <code>Content-Encoding</code>â€‹ ä¸º<code>gzip</code>â€‹æ¥å¯ç”¨ GZIP å‹ç¼©ã€‚</li><li>å¯ç”¨ HTTP &#x2F; 2ï¼šå¦‚æœæœåŠ¡ç«¯æ”¯æŒ HTTP &#x2F; 2 åè®®ï¼Œå¯ä»¥é€šè¿‡é…ç½® Feign ä½¿ç”¨ HTTP &#x2F; 2 æ¥æé«˜æ€§èƒ½ã€‚å¯ä»¥é€šè¿‡é…ç½® <code>httpclient</code>â€‹ çš„ç›¸å…³å±æ€§ï¼Œå¦‚ <code>sslContextBuilder</code>â€‹ å’Œ <code>alpnProtocols</code>â€‹ æ¥å¯ç”¨ HTTP &#x2F; 2ã€‚</li><li>ç¼“å­˜ï¼šå¯¹äºä¸€äº›ä¸ç»å¸¸å˜åŠ¨çš„æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ç¼“å­˜ï¼Œå‡å°‘å¯¹æœåŠ¡ç«¯çš„è¯·æ±‚ï¼Œæé«˜æ€§èƒ½ã€‚å¯ä»¥ä½¿ç”¨ Spring Cache ç­‰ç¼“å­˜æ¡†æ¶æ¥å®ç°ã€‚</li><li>å¹¶å‘è¯·æ±‚ï¼šå¦‚æœæœ‰å¤šä¸ªç‹¬ç«‹çš„è¯·æ±‚éœ€è¦å‘é€ç»™ä¸åŒçš„æœåŠ¡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¹¶å‘è¯·æ±‚çš„æ–¹å¼ï¼ŒåŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œå‡å°‘è¯·æ±‚çš„ç­‰å¾…æ—¶é—´ï¼Œæé«˜æ€§èƒ½ã€‚å¯ä»¥ä½¿ç”¨å¼‚æ­¥æ–¹å¼å‘é€è¯·æ±‚ï¼Œæˆ–ä½¿ç”¨å¹¶å‘å·¥å…·ç±»å¦‚ CompletableFuture æ¥å®ç°ã€‚</li></ol><p>æ³¨æ„ï¼Œä¼˜åŒ– Feign çš„æ€§èƒ½éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯å’Œéœ€æ±‚è¿›è¡Œè°ƒæ•´å’Œæµ‹è¯•ã€‚ä¸åŒçš„åº”ç”¨åœºæ™¯å¯èƒ½éœ€è¦ä¸åŒçš„ä¼˜åŒ–ç­–ç•¥ï¼Œå› æ­¤éœ€è¦æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©åˆé€‚çš„ä¼˜åŒ–æ–¹æ³•ã€‚</p><p>Feign åº•å±‚é»˜è®¤æ˜¯ JDK è‡ªå¸¦çš„ HttpURLConnectionï¼Œå®ƒæ˜¯å•çº¿ç¨‹å‘é€ HTTP è¯·æ±‚çš„ï¼Œä¸èƒ½é…ç½®çº¿ç¨‹æ± ï¼Œæˆ‘ä»¬ä½¿ç”¨ OKHttp æˆ–è€… HttpClient æ¥å‘é€ HTTP è¯·æ±‚ï¼Œå¹¶ä¸”å®ƒä»¬ä¸¤ä¸ªéƒ½æ”¯æŒçº¿ç¨‹æ± ã€‚</p><p>å¸¸è§HTTPå®¢æˆ·ç«¯</p><p><strong>HttpClient</strong></p><p>HttpClient æ˜¯ Apache Jakarta Common ä¸‹çš„å­é¡¹ç›®ï¼Œç”¨æ¥æä¾›é«˜æ•ˆçš„ã€æœ€æ–°çš„ã€åŠŸèƒ½ä¸°å¯Œçš„æ”¯æŒ HTTP å è®®çš„å®¢æˆ·ç«¯ç¼–ç¨‹å·¥å…·åŒ…ï¼Œå¹¶ä¸”å®ƒæ”¯æŒ HTTP åè®®æœ€æ–°ç‰ˆæœ¬å’Œå»ºè®®ã€‚HttpClient ç›¸æ¯”ä¼ ç»Ÿ  JDK è‡ªå¸¦çš„ URLConnectionï¼Œæå‡äº†æ˜“ç”¨æ€§å’Œçµæ´»æ€§ï¼Œä½¿å®¢æˆ·ç«¯å‘é€ HTTP è¯·æ±‚å˜å¾—å®¹æ˜“ï¼Œæé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><p><strong>Okhttp</strong></p><p>ä¸€ä¸ªå¤„ç†ç½‘ç»œè¯·æ±‚çš„å¼€æºé¡¹ç›®ï¼Œæ˜¯å®‰å“ç«¯æœ€ç«çš„è½»é‡çº§æ¡†æ¶ï¼Œç”± Square å…¬å¸è´¡çŒ®ï¼Œç”¨äºæ›¿ä»£ HttpUrlConnection å’Œ Apache HttpClientã€‚OKHttp æ‹¥æœ‰ç®€æ´çš„ APIã€é«˜æ•ˆçš„æ€§èƒ½ï¼Œå¹¶æ”¯æŒå¤šç§åè®® ï¼ˆHTTP&#x2F;2 å’Œ SPDYï¼‰ã€‚</p><p><strong>HttpURLConnection</strong></p><p>HttpURLConnection æ˜¯ Java çš„æ ‡å‡†ç±»ï¼Œå®ƒç»§æ‰¿è‡ª URLConnectionï¼Œå¯ç”¨äºå‘æŒ‡å®šç½‘ç«™å‘é€  GET è¯·æ±‚ã€ POST è¯·æ±‚ã€‚HttpURLConnection ä½¿ç”¨æ¯”è¾ƒå¤æ‚ï¼Œä¸åƒ HttpClient é‚£æ ·å®¹æ˜“ä½¿ç”¨ã€‚</p><p><strong>RestTemplate</strong></p><p>RestTemplate æ˜¯ Spring æä¾›çš„ç”¨äºè®¿é—® Rest æœåŠ¡çš„å®¢æˆ·ç«¯ï¼ŒRestTemplate æä¾›äº†å¤šç§ä¾¿æ·è®¿é—®è¿œç¨‹ HTTP æœåŠ¡çš„æ–¹æ³•ï¼Œèƒ½å¤Ÿå¤§å¤§æé«˜å®¢æˆ·ç«¯çš„ç¼–å†™æ•ˆç‡ã€‚</p><h2 id="27ã€Feign-æ€æ ·å®ç°è®¤è¯çš„ä¼ é€’ï¼Ÿ"><a href="#27ã€Feign-æ€æ ·å®ç°è®¤è¯çš„ä¼ é€’ï¼Ÿ" class="headerlink" title="27ã€Feign æ€æ ·å®ç°è®¤è¯çš„ä¼ é€’ï¼Ÿ"></a>27ã€Feign æ€æ ·å®ç°è®¤è¯çš„ä¼ é€’ï¼Ÿ</h2><p>åœ¨ Feign ä¸­å®ç°è®¤è¯çš„ä¼ é€’ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p><ol><li>ä½¿ç”¨è¯·æ±‚å¤´ä¼ é€’è®¤è¯ä¿¡æ¯ï¼šå¯ä»¥åœ¨ Feign çš„è¯·æ±‚æ–¹æ³•ä¸Šæ·»åŠ  <code>@RequestHeader</code>â€‹ æ³¨è§£ï¼Œå°†è®¤è¯ä¿¡æ¯ä½œä¸ºè¯·æ±‚å¤´çš„ä¸€éƒ¨åˆ†è¿›è¡Œä¼ é€’ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name = &quot;example-service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ExampleServiceClient</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/api/example&quot;)</span></span><br><span class="line">    String <span class="title function_">getExampleData</span><span class="params">(<span class="meta">@RequestHeader(&quot;Authorization&quot;)</span> String token)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è°ƒç”¨ <code>getExampleData</code>â€‹ æ–¹æ³•æ—¶ï¼Œå¯ä»¥å°†è®¤è¯ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ï¼ŒFeign ä¼šå°†å…¶æ”¾å…¥è¯·æ±‚å¤´ä¸­ã€‚</p><ol start="2"><li>ä½¿ç”¨è¯·æ±‚å‚æ•°ä¼ é€’è®¤è¯ä¿¡æ¯ï¼šå¯ä»¥åœ¨ Feign çš„è¯·æ±‚æ–¹æ³•ä¸Šæ·»åŠ <code>@RequestParam</code>â€‹æ³¨è§£ï¼Œå°†è®¤è¯ä¿¡æ¯ä½œä¸ºè¯·æ±‚å‚æ•°è¿›è¡Œä¼ é€’ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name = &quot;example-service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ExampleServiceClient</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/api/example&quot;)</span></span><br><span class="line">    String <span class="title function_">getExampleData</span><span class="params">(<span class="meta">@RequestParam(&quot;token&quot;)</span> String token)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è°ƒç”¨ <code>getExampleData</code>â€‹ æ–¹æ³•æ—¶ï¼Œå¯ä»¥å°†è®¤è¯ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ï¼ŒFeign ä¼šå°†å…¶ä½œä¸ºè¯·æ±‚å‚æ•°è¿›è¡Œä¼ é€’ã€‚</p><ol start="3"><li>ä½¿ç”¨è¯·æ±‚ä½“ä¼ é€’è®¤è¯ä¿¡æ¯ï¼šå¯ä»¥åœ¨Feignçš„è¯·æ±‚æ–¹æ³•ä¸Šæ·»åŠ  <code>@RequestBody</code>â€‹ æ³¨è§£ï¼Œå°†è®¤è¯ä¿¡æ¯ä½œä¸ºè¯·æ±‚ä½“çš„ä¸€éƒ¨åˆ†è¿›è¡Œä¼ é€’ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name = &quot;example-service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ExampleServiceClient</span> &#123;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;/api/example&quot;)</span></span><br><span class="line">    String <span class="title function_">postExampleData</span><span class="params">(<span class="meta">@RequestBody</span> AuthRequest request)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthRequest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String token;</span><br><span class="line">    <span class="comment">// getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è°ƒç”¨<code>postExampleData</code>â€‹æ–¹æ³•æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«è®¤è¯ä¿¡æ¯çš„è¯·æ±‚ä½“å¯¹è±¡ï¼Œå¹¶ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ä¸Šæ–¹æ³•ä»…é€‚ç”¨äºå°†è®¤è¯ä¿¡æ¯ä¼ é€’ç»™åç«¯æœåŠ¡ã€‚åœ¨åç«¯æœåŠ¡ä¸­ï¼Œéœ€è¦è¿›è¡Œç›¸åº”çš„è®¤è¯éªŒè¯å’Œå¤„ç†ã€‚å¦å¤–ï¼Œè®¤è¯ä¿¡æ¯çš„ä¼ é€’æ–¹å¼åº”æ ¹æ®å…·ä½“çš„è®¤è¯æœºåˆ¶å’Œå®‰å…¨è¦æ±‚è¿›è¡Œé€‰æ‹©å’Œé…ç½®ã€‚</p><h2 id="28ã€è°ˆè°ˆ-Sentienl-ä¸­ä½¿ç”¨çš„é™æµç®—æ³•"><a href="#28ã€è°ˆè°ˆ-Sentienl-ä¸­ä½¿ç”¨çš„é™æµç®—æ³•" class="headerlink" title="28ã€è°ˆè°ˆ Sentienl ä¸­ä½¿ç”¨çš„é™æµç®—æ³•"></a>28ã€è°ˆè°ˆ Sentienl ä¸­ä½¿ç”¨çš„é™æµç®—æ³•</h2><p>Sentinel æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç³»ç»Ÿçš„æµé‡é˜²æ§ç»„ä»¶ï¼Œå®ƒæä¾›äº†å®æ—¶çš„æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ç­‰åŠŸèƒ½ã€‚åœ¨ Sentienl ä¸­ä½¿ç”¨çš„é™æµç®—æ³•ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li>å›ºå®šçª—å£è®¡æ•°å™¨ï¼ˆFixed Window Counterï¼‰ï¼šè¯¥ç®—æ³•æ˜¯æœ€ç®€å•çš„é™æµç®—æ³•ä¹‹ä¸€ï¼Œå®ƒå°†è¯·æ±‚æŒ‰ç…§æ—¶é—´çª—å£è¿›è¡Œè®¡æ•°ï¼Œå½“çª—å£å†…çš„è¯·æ±‚æ•°è¶…è¿‡é˜ˆå€¼æ—¶è¿›è¡Œé™æµã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®¾ç½®æ¯ç§’é’Ÿæœ€å¤šå¤„ç† 100 ä¸ªè¯·æ±‚ï¼Œè¶…è¿‡è¯¥é˜ˆå€¼çš„è¯·æ±‚å°†è¢«é™æµã€‚</li><li>æ»‘åŠ¨çª—å£è®¡æ•°å™¨ï¼ˆSliding Window Counterï¼‰ï¼šè¯¥ç®—æ³•æ˜¯å›ºå®šçª—å£è®¡æ•°å™¨çš„æ”¹è¿›ç‰ˆï¼Œå®ƒä¸ä»…è€ƒè™‘äº†çª—å£å†…çš„è¯·æ±‚æ•°ï¼Œè¿˜è€ƒè™‘äº†çª—å£å†…çš„æ—¶é—´åˆ†å¸ƒã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†æ—¶é—´çª—å£åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå°çª—å£ï¼Œæ¯ä¸ªå°çª—å£å†…éƒ½æœ‰ä¸€ä¸ªè¯·æ±‚æ•°çš„é˜ˆå€¼ï¼Œå½“æ•´ä¸ªæ—¶é—´çª—å£å†…çš„è¯·æ±‚æ•°è¶…è¿‡é˜ˆå€¼æ—¶è¿›è¡Œé™æµã€‚</li><li>ä»¤ç‰Œæ¡¶ç®—æ³•ï¼ˆToken Bucketï¼‰ï¼šè¯¥ç®—æ³•æ˜¯ä¸€ç§åŸºäºä»¤ç‰Œçš„é™æµç®—æ³•ï¼Œå®ƒç»´æŠ¤ä¸€ä¸ªå›ºå®šå®¹é‡çš„ä»¤ç‰Œæ¡¶ï¼Œæ¯ä¸ªä»¤ç‰Œä»£è¡¨ä¸€ä¸ªè¯·æ±‚çš„æƒé™ã€‚å½“è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œéœ€è¦ä»ä»¤ç‰Œæ¡¶ä¸­è·å–ä¸€ä¸ªä»¤ç‰Œï¼Œå¦‚æœä»¤ç‰Œæ¡¶ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºæ— æ³•è·å–ä»¤ç‰Œï¼Œè¯·æ±‚å°†è¢«é™æµã€‚ä»¤ç‰Œæ¡¶ç®—æ³•å¯ä»¥å¹³æ»‘å¤„ç†è¯·æ±‚çš„æµé‡ã€‚</li><li>æ¼æ¡¶ç®—æ³•ï¼ˆLeaky Bucketï¼‰ï¼šè¯¥ç®—æ³•æ˜¯ä¸€ç§åŸºäºæ¼æ¡¶çš„é™æµç®—æ³•ï¼Œå®ƒå°†è¯·æ±‚çœ‹ä½œæ°´æ»´ï¼Œæ¼æ¡¶ä½œä¸ºä¸€ä¸ªå›ºå®šå®¹é‡çš„æ¡¶ï¼Œè¯·æ±‚ä»¥æ’å®šçš„é€Ÿç‡æµå…¥æ¡¶ä¸­ï¼Œå¦‚æœæ¡¶æ»¡äº†ï¼Œåˆ™è¡¨ç¤ºè¯·æ±‚æ— æ³•å¤„ç†ï¼Œè¢«é™æµã€‚æ¼æ¡¶ç®—æ³•å¯ä»¥å¹³æ»‘å¤„ç†çªå‘çš„è¯·æ±‚æµé‡ã€‚</li></ol><p>ä»¥ä¸Šæ˜¯ Sentienl ä¸­ä½¿ç”¨çš„å¸¸è§é™æµç®—æ³•ï¼Œæ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ï¼Œå¯ä»¥é€‰æ‹©åˆé€‚çš„ç®—æ³•è¿›è¡Œé™æµã€‚</p><h2 id="29ã€è°ˆè°ˆ-Sentienl-æœåŠ¡ç†”æ–­è¿‡ç¨‹"><a href="#29ã€è°ˆè°ˆ-Sentienl-æœåŠ¡ç†”æ–­è¿‡ç¨‹" class="headerlink" title="29ã€è°ˆè°ˆ Sentienl æœåŠ¡ç†”æ–­è¿‡ç¨‹"></a>29ã€è°ˆè°ˆ Sentienl æœåŠ¡ç†”æ–­è¿‡ç¨‹</h2><p>Sentinel æ˜¯ä¸€ä¸ªæµé‡æ§åˆ¶ç»„ä»¶ï¼Œé™¤äº†é™æµåŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†ç†”æ–­é™çº§çš„åŠŸèƒ½ã€‚åœ¨ Sentinel ä¸­ï¼ŒæœåŠ¡ç†”æ–­æ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œç”¨äºé˜²æ­¢æ•…éšœæœåŠ¡å¯¹æ•´ä¸ªç³»ç»Ÿçš„å½±å“ã€‚ä¸‹é¢æ˜¯ Sentinel æœåŠ¡ç†”æ–­çš„ä¸€èˆ¬è¿‡ç¨‹ï¼š</p><ol><li>ç›‘æ§æœåŠ¡è°ƒç”¨ï¼šSentinel ä¼šç›‘æ§æœåŠ¡çš„è°ƒç”¨æƒ…å†µï¼ŒåŒ…æ‹¬è¯·æ±‚çš„æˆåŠŸç‡ã€å“åº”æ—¶é—´ç­‰æŒ‡æ ‡ã€‚é€šè¿‡å®æ—¶æ”¶é›†å’Œç»Ÿè®¡è¿™äº›æŒ‡æ ‡ï¼ŒSentinel å¯ä»¥åˆ¤æ–­æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</li><li>ç†”æ–­æ¡ä»¶åˆ¤æ–­ï¼šå½“æœåŠ¡çš„æŸäº›æŒ‡æ ‡è¶…è¿‡é¢„è®¾çš„é˜ˆå€¼æ—¶ï¼ŒSentinel å°±ä¼šè§¦å‘ç†”æ–­æ¡ä»¶åˆ¤æ–­ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®¾ç½®å½“æœåŠ¡çš„è¯·æ±‚é”™è¯¯ç‡è¶…è¿‡ 50% æ—¶è§¦å‘ç†”æ–­ã€‚</li><li>è¿›å…¥ç†”æ–­çŠ¶æ€ï¼šä¸€æ—¦è§¦å‘ç†”æ–­æ¡ä»¶ï¼ŒSentinel ä¼šå°†æœåŠ¡åˆ‡æ¢åˆ°ç†”æ–­çŠ¶æ€ã€‚åœ¨ç†”æ–­çŠ¶æ€ä¸‹ï¼ŒSentinel ä¼šæ‹’ç»å¯¹è¯¥æœåŠ¡çš„è¯·æ±‚ï¼Œå¹¶è¿”å›é¢„è®¾çš„é”™è¯¯ä¿¡æ¯æˆ–è€…ç©ºå“åº”ã€‚è¿™æ ·å¯ä»¥é¿å…æ•…éšœæœåŠ¡å¯¹æ•´ä¸ªç³»ç»Ÿçš„å½±å“ã€‚</li><li>ç†”æ–­æ¢å¤ï¼šåœ¨ç†”æ–­çŠ¶æ€ä¸‹ï¼ŒSentinel ä¼šå®šæ—¶å°è¯•æ¢å¤æœåŠ¡ã€‚å®ƒä¼šå…è®¸ä¸€éƒ¨åˆ†è¯·æ±‚é€šè¿‡ï¼Œä»¥æµ‹è¯•æœåŠ¡çš„å¯ç”¨æ€§ã€‚å¦‚æœè¿™äº›è¯·æ±‚æˆåŠŸç‡è¾¾åˆ°ä¸€å®šçš„é˜ˆå€¼ï¼ŒSentinel å°±ä¼šè®¤ä¸ºæœåŠ¡å·²ç»æ¢å¤æ­£å¸¸ï¼Œå°†æœåŠ¡åˆ‡æ¢å›æ­£å¸¸çŠ¶æ€ã€‚</li><li>ç†”æ–­ä¿æŠ¤ï¼šä¸ºäº†é˜²æ­¢ç†”æ–­çŠ¶æ€é¢‘ç¹åˆ‡æ¢ï¼ŒSentinel è¿˜æä¾›äº†ç†”æ–­ä¿æŠ¤æœºåˆ¶ã€‚å½“æœåŠ¡åˆ‡æ¢å›æ­£å¸¸çŠ¶æ€åï¼ŒSentinel ä¼šæš‚æ—¶ç¦æ­¢å¯¹è¯¥æœåŠ¡çš„è¯·æ±‚ï¼Œä»¥é¿å…æœåŠ¡è¢«è¿‡å¤šçš„è¯·æ±‚å‹å®ã€‚</li></ol><p>é€šè¿‡ä»¥ä¸Šçš„ç†”æ–­è¿‡ç¨‹ï¼ŒSentinel å¯ä»¥æœ‰æ•ˆåœ°ä¿æŠ¤ç³»ç»Ÿå…å—æ•…éšœæœåŠ¡çš„å½±å“ï¼Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚</p><h2 id="30ã€åœ¨-Gateway-ä¸­æ€æ ·å®ç°æœåŠ¡å¹³æ»‘è¿ç§»ï¼Ÿ"><a href="#30ã€åœ¨-Gateway-ä¸­æ€æ ·å®ç°æœåŠ¡å¹³æ»‘è¿ç§»ï¼Ÿ" class="headerlink" title="30ã€åœ¨ Gateway ä¸­æ€æ ·å®ç°æœåŠ¡å¹³æ»‘è¿ç§»ï¼Ÿ"></a>30ã€åœ¨ Gateway ä¸­æ€æ ·å®ç°æœåŠ¡å¹³æ»‘è¿ç§»ï¼Ÿ</h2><p>åœ¨ Gateway ä¸­å®ç°æœåŠ¡å¹³æ»‘è¿ç§»å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>é…ç½®å¤šä¸ªåç«¯æœåŠ¡ï¼šåœ¨ Gateway çš„é…ç½®ä¸­ï¼ŒåŒæ—¶é…ç½®æ–°æ—§ä¸¤ä¸ªç‰ˆæœ¬çš„åç«¯æœåŠ¡ã€‚å¯ä»¥ä½¿ç”¨ä¸åŒçš„è·¯ç”±è§„åˆ™æˆ–è€…è´Ÿè½½å‡è¡¡ç­–ç•¥æ¥å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡ã€‚</li><li>åˆ†æµç­–ç•¥è®¾ç½®ï¼šåœ¨ Gateway ä¸­è®¾ç½®åˆ†æµç­–ç•¥ï¼Œé€æ¸å°†æµé‡ä»æ—§ç‰ˆæœ¬çš„åç«¯æœåŠ¡è¿ç§»åˆ°æ–°ç‰ˆæœ¬çš„åç«¯æœåŠ¡ä¸Šã€‚å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€æ­¥æé«˜æ–°ç‰ˆæœ¬æœåŠ¡çš„æµé‡å æ¯”ï¼Œä¾‹å¦‚æ¯å¤©å¢åŠ ä¸€å®šæ¯”ä¾‹çš„æµé‡ã€‚</li><li>ç›‘æ§å’Œè°ƒæ•´ï¼šç›‘æ§æ–°ç‰ˆæœ¬æœåŠ¡çš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œç¡®ä¿æ–°ç‰ˆæœ¬æœåŠ¡èƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚å¦‚æœå‘ç°é—®é¢˜ï¼Œå¯ä»¥åŠæ—¶è°ƒæ•´é…ç½®æˆ–è€…å›æ»šè¿ç§»æ“ä½œã€‚</li><li>é€æ­¥è¿ç§»ï¼šåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„ç›‘æ§å’Œè°ƒæ•´åï¼Œå½“æ–°ç‰ˆæœ¬æœåŠ¡è¢«å……åˆ†éªŒè¯å¹¶ä¸”ç¨³å®šè¿è¡Œæ—¶ï¼Œå¯ä»¥é€æ­¥å°†æµé‡ä»æ—§ç‰ˆæœ¬æœåŠ¡å…¨é¢åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬æœåŠ¡ä¸Šã€‚</li><li>æ¸…ç†æ—§ç‰ˆæœ¬ï¼šåœ¨æ‰€æœ‰æµé‡éƒ½å·²ç»è¿ç§»åˆ°æ–°ç‰ˆæœ¬æœåŠ¡åï¼Œå¯ä»¥å°†æ—§ç‰ˆæœ¬æœåŠ¡ä» Gateway çš„é…ç½®ä¸­ç§»é™¤ï¼Œå¹¶è¿›è¡Œæ¸…ç†æ“ä½œã€‚</li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æœåŠ¡å¹³æ»‘è¿ç§»è¿‡ç¨‹ä¸­ï¼Œè¦ç¡®ä¿æ–°ç‰ˆæœ¬æœåŠ¡å’Œæ—§ç‰ˆæœ¬æœåŠ¡çš„æ¥å£å’ŒåŠŸèƒ½å…¼å®¹ï¼Œä»¥é¿å…å¯¹å®¢æˆ·ç«¯çš„å½±å“ã€‚æ­¤å¤–ï¼Œè¿˜åº”è¯¥åšå¥½ç›‘æ§å’Œå›æ»šå‡†å¤‡ï¼Œä»¥åº”å¯¹å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚</p><h2 id="31ã€Seata-æ”¯æŒé‚£äº›äº‹åŠ¡æ¨¡å¼ï¼Ÿ"><a href="#31ã€Seata-æ”¯æŒé‚£äº›äº‹åŠ¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="31ã€Seata æ”¯æŒé‚£äº›äº‹åŠ¡æ¨¡å¼ï¼Ÿ"></a>31ã€Seata æ”¯æŒé‚£äº›äº‹åŠ¡æ¨¡å¼ï¼Ÿ</h2><p>æ¦‚å¿µï¼šSeata æ˜¯ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œè‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œç®€å•æ˜“ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æœåŠ¡ã€‚Seata å°†ä¸ºç”¨æˆ·æä¾›äº† ATã€TCCã€SAGA å’Œ XA äº‹åŠ¡æ¨¡å¼ï¼Œä¸ºç”¨æˆ·æ‰“é€ ä¸€ç«™å¼çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆã€‚</p><ol><li>ATï¼ˆAtomikosï¼‰æ¨¡å¼ï¼šAT æ¨¡å¼æ˜¯ Seata çš„é»˜è®¤äº‹åŠ¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡åœ¨ä¸šåŠ¡ä»£ç ä¸­åµŒå…¥äº‹åŠ¡ä¸Šä¸‹æ–‡ï¼Œå®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚åœ¨ AT æ¨¡å¼ä¸‹ï¼ŒSeata ä¼šå¯¹å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ•°æ®åº“è¿›è¡Œäº‹åŠ¡åè°ƒå’Œç®¡ç†ï¼Œä¿è¯æ‰€æœ‰æ•°æ®åº“çš„æ•°æ®ä¸€è‡´æ€§ã€‚æä¾›æ— ä¾µå…¥è‡ªåŠ¨è¡¥å¿çš„äº‹åŠ¡æ¨¡å¼ ã€è¿™é‡Œæ˜¯åŸºäºæœ¬åœ°èƒ½æ”¯æŒäº‹åŠ¡çš„å…³ç³»å‹æ•°æ®åº“ï¼Œç„¶å java ä»£ç å¯ä»¥é€šè¿‡ JDBC è®¿é—®æ•°æ®åº“ï¼Œ è¿™é‡Œçš„æ— ä¾µå…¥ï¼šæˆ‘ä»¬åªéœ€è¦åŠ ä¸Šå¯¹åº”çš„æ³¨è§£å°±å¯ä»¥å¼€å¯å…¨å±€äº‹åŠ¡ã€‘</li><li>TCCï¼ˆTry-Confirm-Cancelï¼‰æ¨¡å¼ï¼šTCC æ¨¡å¼æ˜¯ä¸€ç§è¡¥å¿æ€§äº‹åŠ¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡å®šä¹‰ä¸šåŠ¡çš„ Tryã€Confirm å’Œ Cancel ä¸‰ä¸ªé˜¶æ®µæ¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚åœ¨ TCC æ¨¡å¼ä¸‹ï¼ŒSeata ä¼šæ ¹æ®ä¸šåŠ¡ä»£ç ä¸­å®šä¹‰çš„ Tryã€Confirm å’Œ Cancel æ–¹æ³•æ¥æ‰§è¡Œäº‹åŠ¡æ“ä½œï¼Œä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</li><li>SAGAï¼ˆSagaï¼‰æ¨¡å¼ï¼šSAGA æ¨¡å¼æ˜¯ä¸€ç§é•¿äº‹åŠ¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡å®šä¹‰ä¸€ç³»åˆ—çš„äº‹åŠ¡æ­¥éª¤æ¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚åœ¨ SAGA æ¨¡å¼ä¸‹ï¼ŒSeata ä¼šæŒ‰ç…§ä¸šåŠ¡ä»£ç ä¸­å®šä¹‰çš„äº‹åŠ¡æ­¥éª¤é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªæ­¥éª¤éƒ½æœ‰å¯¹åº”çš„è¡¥å¿æ“ä½œï¼Œä»¥ä¿è¯æ•´ä¸ªäº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</li><li>XAï¼ˆX&#x2F;Open XAï¼‰æ¨¡å¼ï¼šXA æ¨¡å¼æ˜¯ä¸€ç§åŸºäºä¸¤é˜¶æ®µæäº¤ï¼ˆ2 PCï¼‰çš„äº‹åŠ¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡åè°ƒå‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„èµ„æºç®¡ç†å™¨ï¼ˆå¦‚æ•°æ®åº“ï¼‰æ¥å®ç°äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚åœ¨ XA æ¨¡å¼ä¸‹ï¼ŒSeata ä¼šä¸å„ä¸ªèµ„æºç®¡ç†å™¨è¿›è¡Œåè°ƒï¼Œç¡®ä¿æ‰€æœ‰èµ„æºçš„æäº¤æˆ–å›æ»šæ“ä½œéƒ½èƒ½æ­£ç¡®æ‰§è¡Œï¼Œä»¥ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</li></ol><h2 id="32ã€è¯·ç®€è¿°-2-PC-æµç¨‹ä»¥åŠä¼˜ç¼ºç‚¹"><a href="#32ã€è¯·ç®€è¿°-2-PC-æµç¨‹ä»¥åŠä¼˜ç¼ºç‚¹" class="headerlink" title="32ã€è¯·ç®€è¿° 2 PC æµç¨‹ä»¥åŠä¼˜ç¼ºç‚¹"></a>32ã€è¯·ç®€è¿° 2 PC æµç¨‹ä»¥åŠä¼˜ç¼ºç‚¹</h2><p>2 PCï¼ˆTwo-Phase Commitï¼‰æ˜¯ä¸€ç§ç»å…¸çš„åˆ†å¸ƒå¼äº‹åŠ¡åè®®ï¼Œå®ƒé€šè¿‡ä¸¤ä¸ªé˜¶æ®µçš„åè°ƒæ¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚ä»¥ä¸‹æ˜¯ 2 PC çš„åŸºæœ¬æµç¨‹ï¼š</p><ol><li><p>å‡†å¤‡é˜¶æ®µï¼ˆPrepare Phaseï¼‰ï¼š</p><ul><li>åè°ƒè€…ï¼ˆCoordinatorï¼‰å‘å‚ä¸è€…ï¼ˆParticipantï¼‰å‘é€äº‹åŠ¡å‡†å¤‡è¯·æ±‚ã€‚</li><li>å‚ä¸è€…æ‰§è¡Œäº‹åŠ¡æ“ä½œï¼Œå¹¶å°†äº‹åŠ¡æ—¥å¿—å’Œå‡†å¤‡å®Œæˆçš„æ¶ˆæ¯å‘é€ç»™åè°ƒè€…ã€‚</li><li>åè°ƒè€…æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…çš„å‡†å¤‡å®Œæˆæ¶ˆæ¯åï¼Œè¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚å¦‚æœæœ‰ä»»ä½•ä¸€ä¸ªå‚ä¸è€…å‘ç”Ÿé”™è¯¯æˆ–è€…è¶…æ—¶ï¼Œåè°ƒè€…å°†å‘é€å›æ»šè¯·æ±‚ç»™æ‰€æœ‰å‚ä¸è€…ã€‚</li></ul></li><li><p>æäº¤é˜¶æ®µï¼ˆCommit Phaseï¼‰ï¼š</p><ul><li>åè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€äº‹åŠ¡æäº¤è¯·æ±‚ã€‚</li><li>å‚ä¸è€…æ‰§è¡Œäº‹åŠ¡çš„æœ€ç»ˆæäº¤æ“ä½œï¼Œå¹¶å°†æäº¤å®Œæˆçš„æ¶ˆæ¯å‘é€ç»™åè°ƒè€…ã€‚</li><li>åè°ƒè€…æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…çš„æäº¤å®Œæˆæ¶ˆæ¯åï¼Œå‘æ‰€æœ‰å‚ä¸è€…å‘é€äº‹åŠ¡å®Œæˆçš„æ¶ˆæ¯ï¼Œäº‹åŠ¡å®Œæˆã€‚</li></ul></li></ol><p>2 PC çš„ä¼˜ç‚¹ï¼š</p><ul><li>æ•°æ®ä¸€è‡´æ€§ï¼š2 PC å¯ä»¥ä¿è¯æ‰€æœ‰å‚ä¸è€…çš„æ•°æ®åœ¨äº‹åŠ¡æäº¤æ—¶ä¿æŒä¸€è‡´ï¼Œå³è¦ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šã€‚</li><li>ç®€å•æ˜“ç”¨ï¼š2 PC æ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„åˆ†å¸ƒå¼äº‹åŠ¡åè®®ï¼Œæ˜“äºç†è§£å’Œå®ç°ã€‚</li></ul><p>2 PC çš„ç¼ºç‚¹ï¼š</p><ul><li>åŒæ­¥é˜»å¡ï¼šåœ¨ 2 PC çš„è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰å‚ä¸è€…éƒ½éœ€è¦ç­‰å¾…åè°ƒè€…çš„æŒ‡ä»¤ï¼Œè¿™ä¼šå¯¼è‡´æ•´ä¸ªäº‹åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹å­˜åœ¨é˜»å¡ï¼Œå½±å“æ€§èƒ½å’Œååé‡ã€‚</li><li>å•ç‚¹æ•…éšœï¼š2 PC ä¸­çš„åè°ƒè€…æ˜¯ä¸€ä¸ªå•ç‚¹ï¼Œå¦‚æœåè°ƒè€…å‘ç”Ÿæ•…éšœï¼Œæ•´ä¸ªäº‹åŠ¡çš„æ‰§è¡Œå°†å—åˆ°å½±å“ã€‚</li><li>é˜»å¡é£æš´ï¼šå¦‚æœåœ¨å‡†å¤‡é˜¶æ®µä¸­çš„ä»»ä½•ä¸€ä¸ªå‚ä¸è€…å‘ç”Ÿæ•…éšœæˆ–è€…è¶…æ—¶ï¼Œåè°ƒè€…å°†å‘é€å›æ»šè¯·æ±‚ç»™æ‰€æœ‰å‚ä¸è€…ï¼Œå¯¼è‡´å‚ä¸è€…ä¹‹é—´çš„é€šä¿¡äº§ç”Ÿå¤§é‡çš„å›æ»šè¯·æ±‚ï¼Œå¯èƒ½å¼•å‘é˜»å¡é£æš´ã€‚</li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ2 PC æ˜¯ä¸€ç§ç»å…¸çš„åˆ†å¸ƒå¼äº‹åŠ¡åè®®ï¼Œèƒ½å¤Ÿä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œä½†å­˜åœ¨åŒæ­¥é˜»å¡å’Œå•ç‚¹æ•…éšœç­‰é—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å’Œæ€§èƒ½è¦æ±‚é€‰æ‹©åˆé€‚çš„åˆ†å¸ƒå¼äº‹åŠ¡åè®®ã€‚</p><h2 id="33ã€Seataä¸­xidæ€æ ·é€šè¿‡-Feign-è¿›è¡Œå…¨å±€ä¼ é€’"><a href="#33ã€Seataä¸­xidæ€æ ·é€šè¿‡-Feign-è¿›è¡Œå…¨å±€ä¼ é€’" class="headerlink" title="33ã€Seataä¸­xidæ€æ ·é€šè¿‡ Feign è¿›è¡Œå…¨å±€ä¼ é€’"></a>33ã€Seataä¸­xidæ€æ ·é€šè¿‡ Feign è¿›è¡Œå…¨å±€ä¼ é€’</h2><p>åœ¨ Seata ä¸­ï¼ŒXIDï¼ˆå…¨å±€äº‹åŠ¡ IDï¼‰æ˜¯ç”¨æ¥æ ‡è¯†ä¸€ä¸ªå…¨å±€äº‹åŠ¡çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚åœ¨ä½¿ç”¨ Feign è¿›è¡ŒæœåŠ¡ä¹‹é—´çš„è¿œç¨‹è°ƒç”¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å°† XID ä¼ é€’ç»™ä¸‹æ¸¸æœåŠ¡ï¼š</p><ol><li>é€šè¿‡è¯·æ±‚å¤´ä¼ é€’ï¼šåœ¨å‘èµ· Feign è¯·æ±‚æ—¶ï¼Œå¯ä»¥å°† XID è®¾ç½®ä¸ºè¯·æ±‚å¤´çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶åœ¨ä¸‹æ¸¸æœåŠ¡ä¸­è§£æè¯¥è¯·æ±‚å¤´è·å– XIDã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ <code>@RequestHeader</code>â€‹ æ³¨è§£å°† XID ä¼ é€’ç»™ä¸‹æ¸¸æœåŠ¡ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name = &quot;serviceB&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ServiceBClient</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/api/serviceB&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    String <span class="title function_">getServiceB</span><span class="params">(<span class="meta">@RequestHeader(&quot;XID&quot;)</span> String xid)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>é€šè¿‡è¯·æ±‚å‚æ•°ä¼ é€’ï¼šå°† XID ä½œä¸ºè¯·æ±‚å‚æ•°ä¼ é€’ç»™ä¸‹æ¸¸æœåŠ¡ã€‚åœ¨å®šä¹‰ Feign æ¥å£æ–¹æ³•æ—¶ï¼Œå°† XID ä½œä¸ºæ–¹æ³•çš„å‚æ•°ï¼Œå¹¶åœ¨è¯·æ±‚ä¸­ä¼ é€’ç»™ä¸‹æ¸¸æœåŠ¡ã€‚ä¸‹æ¸¸æœåŠ¡é€šè¿‡è§£æè¯·æ±‚å‚æ•°è·å– XIDã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name = &quot;serviceB&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ServiceBClient</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/api/serviceB&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    String <span class="title function_">getServiceB</span><span class="params">(<span class="meta">@RequestParam(&quot;XID&quot;)</span> String xid)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šæ–¹å¼ï¼Œåœ¨ Feign è¿œç¨‹è°ƒç”¨ä¸­ä¼ é€’ XIDï¼Œå¯ä»¥ç¡®ä¿å…¨å±€äº‹åŠ¡ä¸Šä¸‹æ–‡åœ¨æœåŠ¡ä¹‹é—´çš„ä¼ é€’å’Œä¸€è‡´æ€§ã€‚åŒæ—¶ï¼Œä¸‹æ¸¸æœåŠ¡éœ€è¦æ­£ç¡®è§£æå’Œä½¿ç”¨ XIDï¼Œä»¥ä¿è¯å‚ä¸åˆ°å…¨å±€äº‹åŠ¡ä¸­ã€‚</p><h2 id="34ã€åˆ†å¸ƒå¼äº‹åŠ¡åº”ç”¨çš„å…¸å‹åœºæ™¯"><a href="#34ã€åˆ†å¸ƒå¼äº‹åŠ¡åº”ç”¨çš„å…¸å‹åœºæ™¯" class="headerlink" title="34ã€åˆ†å¸ƒå¼äº‹åŠ¡åº”ç”¨çš„å…¸å‹åœºæ™¯"></a>34ã€åˆ†å¸ƒå¼äº‹åŠ¡åº”ç”¨çš„å…¸å‹åœºæ™¯</h2><p><strong>1ã€å¤šæœåŠ¡</strong></p><p>éšç€äº’è”ç½‘å¿«é€Ÿå‘å±•ï¼Œå¾®æœåŠ¡ï¼ŒSOA ç­‰æœåŠ¡æ¶æ„æ¨¡å¼æ­£åœ¨è¢«å¤§è§„æ¨¡çš„ä½¿ç”¨ï¼Œä¼šå‡ºç°å¾ˆå¤šåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œé—®é¢˜å¦‚ä¸‹ï¼š</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-9-20240823074506-4yps7df.png">â€‹</p><p><strong>2ã€å¤šæ•°æ®æº</strong></p><p><strong>2.1 è·¨åº“</strong></p><p>è·¨åº“äº‹åŠ¡æŒ‡çš„æ˜¯ï¼Œä¸€ä¸ªåº”ç”¨æŸä¸ªåŠŸèƒ½éœ€è¦æ“ä½œå¤šä¸ªåº“ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-10-20240823074506-90bx7x0.png">â€‹</p><p><strong>2.2 åˆ†åº“åˆ†è¡¨</strong></p><p>é€šå¸¸ä¸€ä¸ªåº“æ•°æ®é‡æ¯”è¾ƒå¤§æˆ–è€…é¢„æœŸæœªæ¥çš„æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œéƒ½ä¼šè¿›è¡Œæ°´å¹³æ‹†åˆ†ï¼Œä¹Ÿå°±æ˜¯åˆ†åº“åˆ†è¡¨ã€‚å¦‚ä¸‹å›¾ï¼Œå°†è®¢å•æ•°æ®åº“æ‹†åˆ†æˆäº† 4 ä¸ªåº“ï¼š</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-11-20240823074507-2o9hqev.png">â€‹</p><h2 id="35ã€è¯·è¯´ä¸€ä¸‹-CAP-å’Œ-BASE-ç†è®º"><a href="#35ã€è¯·è¯´ä¸€ä¸‹-CAP-å’Œ-BASE-ç†è®º" class="headerlink" title="35ã€è¯·è¯´ä¸€ä¸‹ CAP å’Œ BASE ç†è®º"></a>35ã€è¯·è¯´ä¸€ä¸‹ CAP å’Œ BASE ç†è®º</h2><p>CAP å’Œ BASE æ˜¯åˆ†å¸ƒå¼å¿…å¤‡ç†è®ºåŸºç¡€</p><p><strong>1ã€CAPç†è®º</strong></p><p>è¿™ä¸ªå®šç†çš„å†…å®¹æ˜¯æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€Consistencyï¼ˆä¸€è‡´æ€§ï¼‰ã€ Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ã€Partition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼Œä¸‰è€…ä¸å¯å¾—å…¼ã€‚</p><ul><li>ä¸€è‡´æ€§ï¼ˆCï¼‰</li></ul><p>ä¸€è‡´æ€§æ„æ€å°±æ˜¯å†™æ“ä½œä¹‹åè¿›è¡Œè¯»æ“ä½œæ— è®ºåœ¨å“ªä¸ªèŠ‚ç‚¹éƒ½éœ€è¦è¿”å›å†™æ“ä½œçš„å€¼</p><ul><li>å¯ç”¨æ€§ï¼ˆAï¼‰</li></ul><p>éæ•…éšœçš„èŠ‚ç‚¹åœ¨åˆç†çš„æ—¶é—´å†…è¿”å›åˆç†çš„å“åº”</p><ul><li>åˆ†åŒºå®¹é”™æ€§ï¼ˆPï¼‰</li></ul><p>å½“å‡ºç°ç½‘ç»œåˆ†åŒºåï¼Œç³»ç»Ÿèƒ½å¤Ÿç»§ç»­å·¥ä½œã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œè¿™é‡Œä¸ªé›†ç¾¤æœ‰å¤šå°æœºå™¨ï¼Œæœ‰å°æœºå™¨ç½‘ç»œå‡ºç°äº†é—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ªé›†ç¾¤ä»ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç½‘ç»œæ— æ³• 100% å¯é ï¼Œåˆ†åŒºå…¶å®æ˜¯ä¸€ä¸ªå¿…ç„¶ç°è±¡ï¼Œå¦‚æœæˆ‘ä»¬é€‰æ‹©äº† CA è€Œæ”¾å¼ƒäº† Pï¼Œé‚£ä¹ˆå½“å‘ç”Ÿåˆ†åŒºç°è±¡æ—¶ï¼Œä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œè¿™ä¸ªæ—¶å€™å¿…é¡»æ‹’ç»è¯·æ±‚ï¼Œä½†æ˜¯ A åˆä¸å…è®¸ï¼Œæ‰€ä»¥åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºä¸Šä¸å¯èƒ½é€‰æ‹©CAæ¶æ„ï¼Œåªèƒ½é€‰æ‹© CP æˆ–è€… AP æ¶æ„ã€‚</p><p>å¯¹äºCPæ¥è¯´ï¼Œæ”¾å¼ƒå¯ç”¨æ€§ï¼Œè¿½æ±‚ä¸€è‡´æ€§å’Œåˆ†åŒºå®¹é”™æ€§ï¼Œæˆ‘ä»¬çš„ zookeeper å…¶å®å°±æ˜¯è¿½æ±‚çš„å¼ºä¸€è‡´ã€‚</p><p>å¯¹äº AP æ¥è¯´ï¼Œæ”¾å¼ƒä¸€è‡´æ€§ï¼ˆè¿™é‡Œè¯´çš„ä¸€è‡´æ€§æ˜¯å¼ºä¸€è‡´æ€§ï¼‰ï¼Œè¿½æ±‚åˆ†åŒºå®¹é”™æ€§å’Œå¯ç”¨æ€§ï¼ŒNacos å°±æ˜¯ AP æ¨¡å¼ï¼Œè¿™æ˜¯å¾ˆå¤šåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡æ—¶çš„é€‰æ‹©ï¼Œåé¢çš„ BASE ä¹Ÿæ˜¯æ ¹æ® AP æ¥æ‰©å±•ã€‚</p><p><strong>2ã€BASEç†è®º</strong></p><p>BASE æ˜¯ Basically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰ã€Soft stateï¼ˆè½¯çŠ¶æ€ï¼‰å’Œ Eventually consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ä¸‰ä¸ªçŸ­è¯­çš„ç¼©å†™ã€‚BASE ç†è®ºæ˜¯å¯¹ CAP ä¸­ä¸€è‡´æ€§å’Œå¯ç”¨æ€§æƒè¡¡çš„ç»“æœï¼Œå…¶æ¥æºäºå¯¹å¤§è§„æ¨¡äº’è”ç½‘ç³»ç»Ÿåˆ†å¸ƒå¼å®è·µçš„æ€»ç»“ï¼Œ æ˜¯åŸºäº CAP å®šç†é€æ­¥æ¼”åŒ–è€Œæ¥çš„ã€‚BASE ç†è®ºçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å³ä½¿æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼Œä½†æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥æ ¹æ®è‡ªèº«ä¸šåŠ¡ç‰¹ç‚¹ï¼Œé‡‡ç”¨é€‚å½“çš„æ–¹å¼æ¥ä½¿ç³»ç»Ÿè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ã€‚</strong></p><ul><li>åŸºæœ¬å¯ç”¨</li></ul><p>åŸºæœ¬å¯ç”¨æ˜¯æŒ‡åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°ä¸å¯é¢„çŸ¥æ•…éšœçš„æ—¶å€™ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§â€”-æ³¨æ„ï¼Œè¿™ç»ä¸ç­‰ä»·äºç³»ç»Ÿä¸å¯ç”¨ã€‚æ¯”å¦‚ï¼š</p><p>ï¼ˆ1ï¼‰<strong>å“åº”æ—¶é—´ä¸Šçš„æŸå¤±</strong>ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªåœ¨çº¿æœç´¢å¼•æ“éœ€è¦åœ¨0.5ç§’ä¹‹å†…è¿”å›ç»™ç”¨æˆ·ç›¸åº”çš„æŸ¥è¯¢ç»“æœï¼Œä½†ç”±äºå‡ºç°æ•…éšœï¼ŒæŸ¥è¯¢ç»“æœçš„å“åº”æ—¶é—´å¢åŠ äº† 1~2 ç§’</p><p>ï¼ˆ2ï¼‰<strong>ç³»ç»ŸåŠŸèƒ½ä¸Šçš„æŸå¤±</strong>ï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œåœ¨ä¸€ä¸ªç”µå­å•†åŠ¡ç½‘ç«™ä¸Šè¿›è¡Œè´­ç‰©çš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…å‡ ä¹èƒ½å¤Ÿé¡ºåˆ©å®Œæˆæ¯ä¸€ç¬”è®¢å•ï¼Œä½†æ˜¯åœ¨ä¸€äº›èŠ‚æ—¥å¤§ä¿ƒè´­ç‰©é«˜å³°çš„æ—¶å€™ï¼Œç”±äºæ¶ˆè´¹è€…çš„è´­ç‰©è¡Œä¸ºæ¿€å¢ï¼Œä¸ºäº†ä¿æŠ¤è´­ç‰©ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œéƒ¨åˆ†æ¶ˆè´¹è€…å¯èƒ½ä¼šè¢«å¼•å¯¼åˆ°ä¸€ä¸ªé™çº§é¡µé¢</p><ul><li>è½¯çŠ¶æ€</li></ul><p>è½¯çŠ¶æ€æŒ‡å…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œå¹¶è®¤ä¸ºè¯¥ä¸­é—´çŠ¶æ€çš„å­˜åœ¨ä¸ä¼šå½±å“ç³»ç»Ÿçš„æ•´ä½“å¯ç”¨æ€§ï¼Œå³å…è®¸ç³»ç»Ÿåœ¨ä¸åŒèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬ä¹‹é—´è¿›è¡Œæ•°æ®åŒæ­¥çš„è¿‡ç¨‹å­˜åœ¨å»¶æ—¶</p><ul><li>æœ€ç»ˆä¸€è‡´æ€§</li></ul><p>æœ€ç»ˆä¸€è‡´æ€§å¼ºè°ƒçš„æ˜¯æ‰€æœ‰çš„æ•°æ®å‰¯æœ¬ï¼Œåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„åŒæ­¥ä¹‹åï¼Œæœ€ç»ˆéƒ½èƒ½å¤Ÿè¾¾åˆ°ä¸€ä¸ªä¸€è‡´çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œæœ€ç»ˆä¸€è‡´æ€§çš„æœ¬è´¨æ˜¯éœ€è¦ç³»ç»Ÿä¿è¯æœ€ç»ˆæ•°æ®èƒ½å¤Ÿè¾¾åˆ°ä¸€è‡´ï¼Œè€Œä¸éœ€è¦å®æ—¶ä¿è¯ç³»ç»Ÿæ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚</p><h2 id="36ã€ç®€è¿°-Seata-çš„-AT-æ¨¡å¼ä¸¤é˜¶æ®µè¿‡ç¨‹"><a href="#36ã€ç®€è¿°-Seata-çš„-AT-æ¨¡å¼ä¸¤é˜¶æ®µè¿‡ç¨‹" class="headerlink" title="36ã€ç®€è¿° Seata çš„ AT æ¨¡å¼ä¸¤é˜¶æ®µè¿‡ç¨‹"></a>36ã€ç®€è¿° Seata çš„ AT æ¨¡å¼ä¸¤é˜¶æ®µè¿‡ç¨‹</h2><p>Seataçš„ATï¼ˆAtomikosï¼‰æ¨¡å¼æ˜¯ä¸€ç§åŸºäºåº”ç”¨ç¨‹åºä»£ç çš„åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†æ¨¡å¼ã€‚å®ƒé€šè¿‡ä¸¤é˜¶æ®µæäº¤ï¼ˆTwo-Phase Commitï¼Œ2PCï¼‰çš„æ–¹å¼æ¥å®ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</p><p>ä¸‹é¢æ˜¯Seata ATæ¨¡å¼çš„ä¸¤é˜¶æ®µè¿‡ç¨‹ï¼š</p><ol><li><p>é˜¶æ®µä¸€ï¼šå‡†å¤‡é˜¶æ®µï¼ˆPrepare Phaseï¼‰</p><ul><li>åº”ç”¨ç¨‹åºå‘èµ·ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå¹¶å‘Seataäº‹åŠ¡åè°ƒå™¨æ³¨å†Œè¯¥äº‹åŠ¡ã€‚</li><li>Seata äº‹åŠ¡åè°ƒå™¨å°†è¯¥äº‹åŠ¡æ³¨å†Œåˆ°å…¨å±€äº‹åŠ¡æ—¥å¿—ä¸­ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªå…¨å±€äº‹åŠ¡IDï¼ˆGlobal Transaction IDï¼‰ã€‚</li><li>åº”ç”¨ç¨‹åºåœ¨æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå‰ï¼Œä¼šå…ˆå‘Seataäº‹åŠ¡åè°ƒå™¨å‘é€åˆ†æ”¯äº‹åŠ¡çš„æ³¨å†Œè¯·æ±‚ã€‚</li><li>Seata äº‹åŠ¡åè°ƒå™¨ä¼šå°†åˆ†æ”¯äº‹åŠ¡æ³¨å†Œåˆ°å…¨å±€äº‹åŠ¡ä¸­ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡IDï¼ˆBranch Transaction IDï¼‰ã€‚</li><li>åº”ç”¨ç¨‹åºæ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼Œå¹¶å°†äº‹åŠ¡æ‰§è¡Œç»“æœï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰å‘é€ç»™ Seata äº‹åŠ¡åè°ƒå™¨ã€‚</li></ul></li><li><p>é˜¶æ®µäºŒï¼šæäº¤&#x2F;å›æ»šé˜¶æ®µï¼ˆCommit&#x2F;Rollback Phaseï¼‰</p><ul><li>å¦‚æœæ‰€æœ‰åˆ†æ”¯äº‹åŠ¡çš„æœ¬åœ°äº‹åŠ¡éƒ½æ‰§è¡ŒæˆåŠŸï¼ŒSeata äº‹åŠ¡åè°ƒå™¨ä¼šå‘é€ä¸€ä¸ªå…¨å±€æäº¤è¯·æ±‚ç»™å„ä¸ªåˆ†æ”¯äº‹åŠ¡å‚ä¸è€…ã€‚</li><li>åˆ†æ”¯äº‹åŠ¡å‚ä¸è€…æ¥æ”¶åˆ°å…¨å±€æäº¤è¯·æ±‚åï¼Œä¼šæ‰§è¡Œæœ¬åœ°äº‹åŠ¡çš„æäº¤æ“ä½œï¼Œå¹¶å°†æäº¤ç»“æœå‘é€ç»™ Seata äº‹åŠ¡åè°ƒå™¨ã€‚</li><li>å¦‚æœä»»ä½•ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡çš„æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼ŒSeata äº‹åŠ¡åè°ƒå™¨ä¼šå‘é€ä¸€ä¸ªå…¨å±€å›æ»šè¯·æ±‚ç»™å„ä¸ªåˆ†æ”¯äº‹åŠ¡å‚ä¸è€…ã€‚</li><li>åˆ†æ”¯äº‹åŠ¡å‚ä¸è€…æ¥æ”¶åˆ°å…¨å±€å›æ»šè¯·æ±‚åï¼Œä¼šæ‰§è¡Œæœ¬åœ°äº‹åŠ¡çš„å›æ»šæ“ä½œï¼Œå¹¶å°†å›æ»šç»“æœå‘é€ç»™ Seata äº‹åŠ¡åè°ƒå™¨ã€‚</li></ul></li></ol><p>é€šè¿‡è¿™ä¸ªä¸¤é˜¶æ®µçš„è¿‡ç¨‹ï¼ŒSeata AT æ¨¡å¼å¯ä»¥ç¡®ä¿åˆ†å¸ƒå¼äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚å¦‚æœæ‰€æœ‰åˆ†æ”¯äº‹åŠ¡çš„æœ¬åœ°äº‹åŠ¡æ‰§è¡ŒæˆåŠŸï¼Œé‚£ä¹ˆå…¨å±€æäº¤è¯·æ±‚å°†è¢«å‘é€ï¼Œæ‰€æœ‰åˆ†æ”¯äº‹åŠ¡éƒ½ä¼šæäº¤ã€‚å¦‚æœä»»ä½•ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡çš„æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œé‚£ä¹ˆå…¨å±€å›æ»šè¯·æ±‚å°†è¢«å‘é€ï¼Œæ‰€æœ‰åˆ†æ”¯äº‹åŠ¡éƒ½ä¼šå›æ»šã€‚</p><h2 id="37ã€ç®€è¿°-Eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶"><a href="#37ã€ç®€è¿°-Eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶" class="headerlink" title="37ã€ç®€è¿° Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶"></a>37ã€ç®€è¿° Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</h2><p>Eureka æœåŠ¡ç«¯ä¼šæ£€æŸ¥æœ€è¿‘ 15 åˆ†é’Ÿå†…æ‰€æœ‰ Eureka å®ä¾‹æ­£å¸¸å¿ƒè·³å æ¯”ï¼Œå¦‚æœä½äº 85% å°±ä¼šè§¦å‘è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‚è§¦å‘äº†ä¿æŠ¤æœºåˆ¶ï¼ŒEurekaå°†æš‚æ—¶æŠŠè¿™äº›å¤±æ•ˆçš„æœåŠ¡ä¿æŠ¤èµ·æ¥ï¼Œä¸è®©å…¶è¿‡æœŸï¼Œä½†è¿™äº›æœåŠ¡ä¹Ÿå¹¶ä¸æ˜¯æ°¸è¿œä¸ä¼šè¿‡æœŸã€‚Eureka åœ¨å¯åŠ¨å®Œæˆåï¼Œæ¯éš” 60 ç§’ä¼šæ£€æŸ¥ä¸€æ¬¡æœåŠ¡å¥åº·çŠ¶æ€ï¼Œå¦‚æœè¿™äº›è¢«ä¿æŠ¤èµ·æ¥å¤±æ•ˆçš„æœåŠ¡è¿‡ä¸€æ®µæ—¶é—´åï¼ˆé»˜è®¤ 90 ç§’ï¼‰è¿˜æ˜¯æ²¡æœ‰æ¢å¤ï¼Œå°±ä¼šæŠŠè¿™äº›æœåŠ¡å‰”é™¤ã€‚å¦‚æœåœ¨æ­¤æœŸé—´æœåŠ¡æ¢å¤äº†å¹¶ä¸”å®ä¾‹å¿ƒè·³å æ¯”é«˜äº 85% æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‚</p><p>é˜ˆå€¼çš„è®¡ç®—æ–¹å¼ï¼š</p><p>æ¯åˆ†é’Ÿ èƒ½æ¥å—æœ€å°‘çš„ç»­ç§Ÿæ¬¡æ•° &#x3D; å¾®æœåŠ¡å®ä¾‹æ€»æ•° * ï¼ˆ60 s &#x2F; å®ä¾‹çš„ç»­çº¦æ—¶é—´é—´éš”ï¼š30s ï¼‰ * æœ‰æ•ˆçš„å¿ƒè·³æ¯”ç‡ é»˜è®¤ 85%</p><p>100 ä¹˜ä»¥ï¼ˆ60 &#x2F;30ï¼‰ ä¹˜ä»¥ 85% &#x3D; 170</p><p>è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶æ›´æ”¹æ¡ä»¶ï¼š æ³¨å†Œã€æœåŠ¡ä¸‹æ¶ã€ æœåŠ¡åˆå§‹åŒ–ã€15 åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡</p><p>è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶çš„è§¦å‘ä½ç½®ï¼š æœåŠ¡å‰”é™¤</p><h2 id="38ã€ç®€è¿°-Eureka-é›†ç¾¤æ¶æ„"><a href="#38ã€ç®€è¿°-Eureka-é›†ç¾¤æ¶æ„" class="headerlink" title="38ã€ç®€è¿° Eureka é›†ç¾¤æ¶æ„"></a>38ã€ç®€è¿° Eureka é›†ç¾¤æ¶æ„</h2><p>å‚è€ƒå®˜ç½‘ï¼š<a href="https://github.com/Netflix/eureka/wiki/Eureka-at-a-glance">https://github.com/Netflix/eureka/wiki/Eureka-at-a-glance</a></p><ul><li>Registerï¼ˆæœåŠ¡æ³¨å†Œï¼‰ï¼šæŠŠè‡ªå·±çš„ IP å’Œç«¯å£æ³¨å†Œç»™ Eurekaã€‚</li><li>Renewï¼ˆæœåŠ¡ç»­çº¦ï¼‰ï¼šå‘é€å¿ƒè·³åŒ…ï¼Œæ¯ 30 ç§’å‘é€ä¸€æ¬¡ã€‚å‘Šè¯‰ Eureka è‡ªå·±è¿˜æ´»ç€ã€‚</li><li>Cancelï¼ˆæœåŠ¡ä¸‹çº¿ï¼‰ï¼šå½“ provider å…³é—­æ—¶ä¼šå‘ Eureka å‘é€æ¶ˆæ¯ï¼ŒæŠŠè‡ªå·±ä»æœåŠ¡åˆ—è¡¨ä¸­åˆ é™¤ã€‚é˜²æ­¢ consumer è°ƒç”¨åˆ°ä¸å­˜åœ¨çš„æœåŠ¡ã€‚</li><li>Get Registryï¼ˆè·å–æœåŠ¡æ³¨å†Œåˆ—è¡¨ï¼‰ï¼šè·å–å…¶ä»–æœåŠ¡åˆ—è¡¨ã€‚</li><li>Make Remote Callï¼ˆè¿œç¨‹è°ƒç”¨ï¼‰ï¼šå®ŒæˆæœåŠ¡çš„è¿œç¨‹è°ƒç”¨ã€‚</li><li>Replicateï¼ˆé›†ç¾¤ä¸­æ•°æ®åŒæ­¥ï¼‰ï¼šeureka é›†ç¾¤ä¸­çš„æ•°æ®å¤åˆ¶ä¸åŒæ­¥ã€‚</li></ul><h2 id="39ã€ä»-Eureka-è¿ç§»åˆ°-Nacos-çš„è§£å†³æ–¹æ¡ˆ"><a href="#39ã€ä»-Eureka-è¿ç§»åˆ°-Nacos-çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="39ã€ä» Eureka è¿ç§»åˆ° Nacos çš„è§£å†³æ–¹æ¡ˆ"></a>39ã€ä» Eureka è¿ç§»åˆ° Nacos çš„è§£å†³æ–¹æ¡ˆ</h2><p>ç‰ˆæœ¬ä¾èµ–å…³ç³»ï¼š</p><p><a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E">https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E</a></p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-12-20240823074507-0rf699x.png">â€‹</p><ul><li><p>æ¢ä¾èµ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> &lt;spring-cloud.alibaba.version&gt;2.2.9.RELEASE&lt;/spring-cloud.alibaba.version&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line"> &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line"> &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;</span><br><span class="line"> &lt;version&gt;$&#123;spring-cloud.alibaba.version&#125;&lt;/version&gt;</span><br><span class="line"> &lt;type&gt;pom&lt;/type&gt;</span><br><span class="line"> &lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line"> &lt;dependency&gt;</span><br><span class="line"> &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line"> &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span><br><span class="line"> &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®æ¢ä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line"> cloud:</span><br><span class="line"> nacos:</span><br><span class="line"> discovery:</span><br><span class="line"> server-addr: localhost:8848</span><br><span class="line"> service: msb-order</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>@EnableDiscoveryClient</code>â€‹ å¼€å¯æ³¨å†Œå‘ç°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@EnableDiscoveryClient // è¿™æ˜¯å®˜æ–¹æä¾›çš„ ,æˆ‘ä»¬ä»¥åå¯èƒ½åˆ‡æ¢å…¶ä»–çš„æ³¨å†Œä¸­å¿ƒæ¯”å¦‚è¯´ nacosï¼Œé‚£æˆ‘ä»¬å°±ç›´æ¥åˆ‡æ¢å°±è¡Œäº†</span><br><span class="line"></span><br><span class="line">//@EnableEurekaClient // æ˜¯ netflix æä¾›çš„ï¼Œå¦‚æœç”¨è¿™ä¸ªæ³¨è§£å°±åªèƒ½æœåŠ¡äº eureka</span><br></pre></td></tr></table></figure></li><li><p>æ¢³ç†é¡¹ç›®å…³ç³»</p><p>åªæä¾›è°ƒç”¨çš„åŸºç¡€æœåŠ¡å…ˆè¿›è¡Œæ›´æ”¹ï¼Œè¿›è¡Œè¿ç§»</p></li></ul><h2 id="40ã€Apolloçš„æ•´ä½“æ¶æ„"><a href="#40ã€Apolloçš„æ•´ä½“æ¶æ„" class="headerlink" title="40ã€Apolloçš„æ•´ä½“æ¶æ„"></a>40ã€Apolloçš„æ•´ä½“æ¶æ„</h2><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-13-20240823074508-6jo3206.png">â€‹</p><ul><li>Config Service æä¾›é…ç½®çš„è¯»å–ã€æ¨é€ç­‰åŠŸèƒ½ï¼ŒæœåŠ¡å¯¹è±¡æ˜¯ Apollo å®¢æˆ·ç«¯ã€‚</li><li>Admin Service æä¾›é…ç½®çš„ä¿®æ”¹ã€å‘å¸ƒç­‰åŠŸèƒ½ï¼ŒæœåŠ¡å¯¹è±¡æ˜¯ Apollo Portalï¼ˆç®¡ç†ç•Œé¢ï¼‰ã€‚</li><li>Config Service å’Œ Admin Service éƒ½æ˜¯å¤šå®ä¾‹ã€æ— çŠ¶æ€éƒ¨ç½²ï¼Œæ‰€ä»¥éœ€è¦å°†è‡ªå·±æ³¨å†Œåˆ° Eureka ä¸­å¹¶ä¿æŒå¿ƒè·³ã€‚</li><li>åœ¨ Eureka ä¹‹ä¸Šæˆ‘ä»¬æ¶äº†ä¸€å±‚ Meta Serve rç”¨äºå°è£… Eureka çš„æœåŠ¡å‘ç°æ¥å£ã€‚</li><li>Client é€šè¿‡åŸŸåè®¿é—® Meta Server è·å– Config Service æœåŠ¡åˆ—è¡¨ï¼ˆIP+Portï¼‰ï¼Œè€Œåç›´æ¥é€šè¿‡ IP+Port è®¿é—®æœåŠ¡ï¼ŒåŒæ—¶åœ¨ Client ä¾§ä¼šåš load balanceã€é”™è¯¯é‡è¯•ã€‚</li><li>Portal é€šè¿‡åŸŸåè®¿é—® Meta Server è·å– Admin Service æœåŠ¡åˆ—è¡¨ï¼ˆIP+Portï¼‰ï¼Œè€Œåç›´æ¥é€šè¿‡ IP+Port è®¿é—®æœåŠ¡ï¼ŒåŒæ—¶åœ¨ Portal ä¾§ä¼šåš load balanceã€é”™è¯¯é‡è¯•ã€‚</li></ul><p>ä¸ºäº†ç®€åŒ–éƒ¨ç½²ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¼šæŠŠ Config Serviceã€Eureka å’Œ Meta Server ä¸‰ä¸ªé€»è¾‘è§’è‰²éƒ¨ç½²åœ¨åŒä¸€ä¸ª JVM è¿›ç¨‹ä¸­ã€‚</p><h2 id="41ã€Apolloçš„æ•´ä½“æ¶æ„å¯é æ€§åˆ†æ"><a href="#41ã€Apolloçš„æ•´ä½“æ¶æ„å¯é æ€§åˆ†æ" class="headerlink" title="41ã€Apolloçš„æ•´ä½“æ¶æ„å¯é æ€§åˆ†æ"></a>41ã€Apolloçš„æ•´ä½“æ¶æ„å¯é æ€§åˆ†æ</h2><table><thead><tr><th>åœºæ™¯</th><th>å½±å“</th><th>é™çº§</th></tr></thead><tbody><tr><td>æŸå° Config Service ä¸‹çº¿</td><td>æ— å½±å“</td><td></td></tr><tr><td>æ‰€æœ‰ Config Service ä¸‹çº¿</td><td>å®¢æˆ·ç«¯æ— æ³•è¯»å–æœ€æ–°é…ç½®ï¼ŒPortal æ— å½±å“</td><td>å®¢æˆ·ç«¯é‡å¯æ—¶ï¼Œå¯ä»¥è¯»å–æœ¬åœ°ç¼“å­˜é…ç½®æ–‡ä»¶ã€‚å¦‚æœæ˜¯æ–°æ‰©å®¹çš„æœºå™¨ï¼Œå¯ä»¥ä»å…¶å®ƒæœºå™¨ä¸Šè·å–å·²ç¼“å­˜çš„é…ç½®æ–‡ä»¶ï¼Œå…·ä½“ä¿¡æ¯å¯ä»¥å‚è€ƒ Java å®¢æˆ·ç«¯ä½¿ç”¨æŒ‡å— - 1.2.3 æœ¬åœ°ç¼“å­˜è·¯å¾„</td></tr><tr><td>æŸå° Admin Serviceä¸‹çº¿</td><td>æ— å½±å“</td><td></td></tr><tr><td>æ‰€æœ‰ Admin Serviceä¸‹çº¿</td><td>å®¢æˆ·ç«¯æ— å½±å“ï¼ŒPortalæ— æ³•æ›´æ–°é…ç½®</td><td></td></tr><tr><td>æŸå° Portal ä¸‹çº¿</td><td>æ— å½±å“</td><td></td></tr><tr><td>å…¨éƒ¨ Portal ä¸‹çº¿</td><td>å®¢æˆ·ç«¯æ— å½±å“ï¼ŒPortalæ— æ³•æ›´æ–°é…ç½®</td><td></td></tr><tr><td>æŸä¸ªæ•°æ®ä¸­å¿ƒä¸‹çº¿</td><td>æ— å½±å“</td><td></td></tr><tr><td>æ•°æ®åº“å®•æœº</td><td>å®¢æˆ·ç«¯æ— å½±å“ï¼ŒPortalæ— æ³•æ›´æ–°é…ç½®</td><td>Config Service å¼€å¯é…ç½®ç¼“å­˜åï¼Œå¯¹é…ç½®çš„è¯»å–ä¸å—æ•°æ®åº“å®•æœºå½±å“</td></tr></tbody></table><h2 id="42ã€Apolloé…ç½®å‘å¸ƒåçš„å®æ—¶æ¨é€è®¾è®¡"><a href="#42ã€Apolloé…ç½®å‘å¸ƒåçš„å®æ—¶æ¨é€è®¾è®¡" class="headerlink" title="42ã€Apolloé…ç½®å‘å¸ƒåçš„å®æ—¶æ¨é€è®¾è®¡"></a>42ã€Apolloé…ç½®å‘å¸ƒåçš„å®æ—¶æ¨é€è®¾è®¡</h2><p>åœ¨é…ç½®ä¸­å¿ƒä¸­ï¼Œä¸€ä¸ªé‡è¦çš„åŠŸèƒ½å°±æ˜¯é…ç½®å‘å¸ƒåå®æ—¶æ¨é€åˆ°å®¢æˆ·ç«¯ã€‚ä¸‹é¢æˆ‘ä»¬ç®€è¦çœ‹ä¸€ä¸‹è¿™å—æ˜¯æ€ä¹ˆè®¾è®¡å®ç°çš„ã€‚</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-14-20240823074508-t5973v5.png">â€‹</p><p>ä¸Šå›¾ç®€è¦æè¿°äº†é…ç½®å‘å¸ƒçš„å¤§è‡´è¿‡ç¨‹ï¼š</p><ol><li><p>ç”¨æˆ·åœ¨ Portal æ“ä½œé…ç½®å‘å¸ƒ</p></li><li><p>Portal è°ƒç”¨ Admin Service çš„æ¥å£æ“ä½œå‘å¸ƒ</p></li><li><p>Admin Service å‘å¸ƒé…ç½®åï¼Œå‘é€ <code>ReleaseMessage</code>â€‹ ç»™å„ä¸ªConfig Service</p></li><li><p>Config Serviceæ”¶åˆ° <code>ReleaseMessage</code>â€‹ åï¼Œé€šçŸ¥å¯¹åº”çš„å®¢æˆ·ç«¯</p><p> <img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-15-20240823074509-m235mgv.png">â€‹</p></li></ol><h2 id="43ã€Apollo-å®¢æˆ·ç«¯è®¾è®¡"><a href="#43ã€Apollo-å®¢æˆ·ç«¯è®¾è®¡" class="headerlink" title="43ã€Apollo å®¢æˆ·ç«¯è®¾è®¡"></a>43ã€Apollo å®¢æˆ·ç«¯è®¾è®¡</h2><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-7-16-20240823074509-om6093t.png">â€‹</p><p>ä¸Šå›¾ç®€è¦æè¿°äº† Apollo å®¢æˆ·ç«¯çš„å®ç°åŸç†ï¼š</p><ol><li>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¿æŒäº†ä¸€ä¸ªé•¿è¿æ¥ï¼Œä»è€Œèƒ½ç¬¬ä¸€æ—¶é—´è·å¾—é…ç½®æ›´æ–°çš„æ¨é€ã€‚ï¼ˆé€šè¿‡Http Long Pollingå®ç°ï¼‰</li><li>å®¢æˆ·ç«¯è¿˜ä¼šå®šæ—¶ä»Apolloé…ç½®ä¸­å¿ƒæœåŠ¡ç«¯æ‹‰å–åº”ç”¨çš„æœ€æ–°é…ç½®ã€‚</li><li>å®¢æˆ·ç«¯ä»Apolloé…ç½®ä¸­å¿ƒæœåŠ¡ç«¯è·å–åˆ°åº”ç”¨çš„æœ€æ–°é…ç½®åï¼Œä¼šä¿å­˜åœ¨å†…å­˜ä¸­</li><li>å®¢æˆ·ç«¯ä¼šæŠŠä»æœåŠ¡ç«¯è·å–åˆ°çš„é…ç½®åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ä¸€ä»½ï¼Œåœ¨é‡åˆ°æœåŠ¡ä¸å¯ç”¨ï¼Œæˆ–ç½‘ç»œä¸é€šçš„æ—¶å€™ï¼Œä¾ç„¶èƒ½ä»æœ¬åœ°æ¢å¤é…ç½®</li><li>åº”ç”¨ç¨‹åºå¯ä»¥ä» Apollo å®¢æˆ·ç«¯è·å–æœ€æ–°çš„é…ç½®ã€è®¢é˜…é…ç½®æ›´æ–°é€šçŸ¥</li></ol><h2 id="44ã€Zuul-æœ‰å‡ ç§è¿‡æ»¤å™¨ç±»å‹ï¼Ÿåˆ†åˆ«æ˜¯ï¼Ÿ"><a href="#44ã€Zuul-æœ‰å‡ ç§è¿‡æ»¤å™¨ç±»å‹ï¼Ÿåˆ†åˆ«æ˜¯ï¼Ÿ" class="headerlink" title="44ã€Zuul æœ‰å‡ ç§è¿‡æ»¤å™¨ç±»å‹ï¼Ÿåˆ†åˆ«æ˜¯ï¼Ÿ"></a>44ã€Zuul æœ‰å‡ ç§è¿‡æ»¤å™¨ç±»å‹ï¼Ÿåˆ†åˆ«æ˜¯ï¼Ÿ</h2><p>Zuul æœ‰å››ç§è¿‡æ»¤å™¨ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol><li><p>å‰ç½®è¿‡æ»¤å™¨ï¼ˆPre Filterï¼‰ï¼šåœ¨è¯·æ±‚è¢«è·¯ç”±ä¹‹å‰æ‰§è¡Œã€‚å¯ä»¥ç”¨æ¥åšèº«ä»½éªŒè¯ã€è¯·æ±‚å‚æ•°æ ¡éªŒã€è®°å½•è°ƒè¯•ä¿¡æ¯ç­‰æ“ä½œã€‚</p></li><li><p>è·¯ç”±è¿‡æ»¤å™¨ï¼ˆRoute Filterï¼‰ï¼šç”¨äºå°†è¯·æ±‚è½¬å‘åˆ°ç›®æ ‡æœåŠ¡å®ä¾‹ã€‚å¯ä»¥ä¿®æ”¹è¯·æ±‚çš„è·¯ç”±è§„åˆ™ã€è¯·æ±‚å¤´ç­‰ä¿¡æ¯ã€‚</p></li><li><p>è¿™ç§è¿‡æ»¤å™¨ç”¨äºæ„å»ºå‘é€ç»™å¾®æœåŠ¡çš„è¯·æ±‚ï¼Œå¹¶ä½¿ç”¨ Apache HttpClient æˆ– Netfilx feign è¯·æ±‚</p></li><li><p>åç½®è¿‡æ»¤å™¨ï¼ˆPost Filterï¼‰ï¼šåœ¨ç›®æ ‡æœåŠ¡å®ä¾‹å¤„ç†å®Œè¯·æ±‚å¹¶è¿”å›å“åº”ä¹‹åæ‰§è¡Œã€‚å¯ç”¨æ¥ä¸ºå“åº”æ·»åŠ æ ‡å‡†çš„HTTP Headerã€æ”¶</p><p> é›†ç»Ÿè®¡ä¿¡æ¯å’ŒæŒ‡æ ‡ã€å°†å“åº”ä»å¾®æœåŠ¡å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå¯ä»¥å¯¹å“åº”è¿›è¡Œå¤„ç†ï¼Œå¦‚æ·»åŠ å“åº”å¤´ã€ä¿®æ”¹å“åº”å†…å®¹ç­‰ã€‚</p></li><li><p>é”™è¯¯è¿‡æ»¤å™¨ï¼ˆError Filterï¼‰ï¼šåœ¨æ•´ä¸ªè¯·æ±‚ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿé”™è¯¯æ—¶æ‰§è¡Œã€‚å¯ä»¥å¯¹é”™è¯¯è¿›è¡Œå¤„ç†ï¼Œå¦‚è®°å½•é”™è¯¯æ—¥å¿—ã€è¿”å›è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯ç­‰ã€‚</p></li></ol><p>é€šè¿‡ä½¿ç”¨è¿™å››ç§è¿‡æ»¤å™¨ç±»å‹ï¼Œå¯ä»¥åœ¨Zuulç½‘å…³ä¸­å®ç°å„ç§åŠŸèƒ½ï¼Œå¦‚å®‰å…¨è®¤è¯ã€è¯·æ±‚è½¬å‘ã€æ—¥å¿—è®°å½•ç­‰ã€‚å¼€å‘äººå‘˜å¯ä»¥è‡ªå®šä¹‰å„ç§è¿‡æ»¤å™¨ï¼Œå¹¶å°†å®ƒä»¬æŒ‰ç…§éœ€è¦é…ç½®åˆ°Zuulç½‘å…³ä¸­ï¼Œä»¥å®ç°ç‰¹å®šçš„åŠŸèƒ½å’Œéœ€æ±‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢æ—¥å¿—</title>
      <link href="/posts/37820.html"/>
      <url>/posts/37820.html</url>
      
        <content type="html"><![CDATA[<div class="timeline orange"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>æ—¶é—´è½´æ ·å¼</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-10 10:11</p></div></div><div class='timeline-item-content'><p>æ·»åŠ ç¢ç¢å¿µé¡µé¢ ï¼Œå¹¶ä¿®å¤å…¶ä¸å±•ç¤ºé—®é¢˜</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-03 14:06</p></div></div><div class='timeline-item-content'><p>å‰ä¸¤å¤©å¼•å…¥çš„LATEXæ•°å­¦å…¬å¼æ—¶çµæ—¶ä¸çµ ï¼Œå¼€å§‹ä½¿ç”¨ä¸»é¢˜è‡ªå¸¦çš„æ•°å­¦å…¬å¼ mathjax</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-01 17:27</p></div></div><div class='timeline-item-content'><p>å¼•å…¥LATEXæ•°å­¦å…¬å¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-27 07:33</p></div></div><div class='timeline-item-content'><p>ä¹°äº†ä¸ªåŸŸåç”¨æ¥è®¿é—®è‡ªå·±çš„åšå®¢ ï¼Œå¹¶ä¸”éƒ¨ç½²åœ¨äº†netlify è®¿é—®é€Ÿåº¦çš„è¯å¯¹äºæˆ‘æ¥è¯´è¶³å¤Ÿç”¨äº†</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-24 08:53</p></div></div><div class='timeline-item-content'><p>é‡æ–°æ›´æ”¹ä¸‹ç‰ˆæƒæ ·å¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-21 08:14</p></div></div><div class='timeline-item-content'><p>è·¯è¿‡å›¾åºŠè¿˜æ˜¯ä¸ç”¨çš„å¥½ ï¼Œè€æ˜¯åå›¾ç‰‡</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-13 10:24</p></div></div><div class='timeline-item-content'><p>é—²æ¥æ— äº‹ ï¼Œæ–°å¢è—å®é˜æ ·å¼é¡µé¢</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-09 21:07</p></div></div><div class='timeline-item-content'><p>é‡æ–°è°ƒæ•´äº†ä¸‹æ ‡ç­¾æ ·å¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-09 11:14</p></div></div><div class='timeline-item-content'><p>åˆšå¥½æ²¡ä»€ä¹ˆäº‹ ï¼Œé­”æ”¹äº†ä¸‹å‹é“¾æ ·å¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-05 20:36</p></div></div><div class='timeline-item-content'><p>çœ‹çœ‹æ˜å¤©æœ‰æ—¶é—´æ²¡ ï¼Œæœ‰æ—¶é—´çš„è¯å°±æŠŠæœ€åçš„å°¾å·´ä¹Ÿç»™é‡å†™ä¸€ä¸‹ï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-05 17:26</p></div></div><div class='timeline-item-content'><p>ä»Šå¤©æŠŠä¸»é¢˜ç»™é‡æ„äº†ä¸€ä¸‹ ï¼Œä¸»è¦æ˜¯ä»¥é˜…è¯»ä¸ºä¸» ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªç‰ˆå—éƒ½è¿›è¡Œçš„å°å°çš„é‡æ„ ï¼Œå…¶ä»–çš„ç­‰åç»­æœ‰æ—¶é—´äº†å†æ…¢æ…¢è¿›è¡Œæ›´æ”¹</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-28 20:52</p></div></div><div class='timeline-item-content'><p>ç»™åšå®¢åˆ†ç±»å’Œæ ‡ç­¾é¡µé¢æ¢ä¸ªæ ·å¼ ï¼Œåé¢å·®ä¸å¤šåº”è¯¥ä¸ä¼šè¿›è¡Œæ ·å¼ç¾åŒ–äº† ï¼Œä¸»è¦åŸå› å‚è€ƒï¼š<a href="https://northpoet.github.io/posts/undefined.html">Butterfly ä¸»é¢˜ç¾åŒ–ä¹‹æ—…ï¼šä»ç»šçƒ‚å›å½’è´¨æœ´</a></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-27 16:12</p></div></div><div class='timeline-item-content'><p>åŠ äº†ä¸ªå¡ç‰‡èƒŒæ™¯ ï¼Œçœ‹èµ·æ¥å¥½çœ‹å¤šäº†</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-27 15:27</p></div></div><div class='timeline-item-content'><p>èŠ±äº†ä¸€å°ç‚¹æ—¶é—´å°†åšå®¢è¿›è¡Œäº†ä¸‹ç®€å•çš„é‡æ„ï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-18 09:37</p></div></div><div class='timeline-item-content'><p>å…ˆè¿ç§»ä¸€éƒ¨åˆ†å­¦ä¹ ç¬”è®° ï¼Œæœ‰æ—¶é—´çš„è¯ ï¼Œå†æŠŠå¦å¤–çš„ç¬”è®°ä¹Ÿç»™è¿ç§»ä¸Šé¢å»</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-17 23:09</p></div></div><div class='timeline-item-content'><p>æ˜å¤©å‡†å¤‡åšä¸€ä¸‹ç¬”è®°çš„è¿ç§» ï¼ŒæŠŠå¤§éƒ¨åˆ†çš„å­¦ä¹ ç¬”è®°éƒ½è¿ç§»åˆ°è¯¥åšå®¢ä¸Šé¢å»ï¼</p></div></div></div>]]></content>
      
      
      <categories>
          
          <category> æœˆå½±å¢¨ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterflyä¸»é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootç¯‡</title>
      <link href="/posts/44924.html"/>
      <url>/posts/44924.html</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€ä¸ºä»€ä¹ˆè¦ç”¨-SpringBoot"><a href="#1ã€ä¸ºä»€ä¹ˆè¦ç”¨-SpringBoot" class="headerlink" title="1ã€ä¸ºä»€ä¹ˆè¦ç”¨ SpringBoot"></a>1ã€ä¸ºä»€ä¹ˆè¦ç”¨ SpringBoot</h2><p>Spring Boot ä¼˜ç‚¹éå¸¸å¤šï¼Œå¦‚ï¼š</p><p>ä¸€ã€ç‹¬ç«‹è¿è¡Œ</p><p>Spring Boot è€Œä¸”å†…åµŒäº†å„ç§ servlet å®¹å™¨ï¼ŒTomcatã€Jetty ç­‰ï¼Œç°åœ¨ä¸å†éœ€è¦æ‰“æˆ war åŒ…éƒ¨ç½²åˆ°å®¹å™¨ä¸­ï¼ŒSpring Boot åªè¦æ‰“æˆä¸€ä¸ªå¯æ‰§è¡Œçš„ jar åŒ…å°±èƒ½ç‹¬ç«‹è¿è¡Œï¼Œæ‰€æœ‰çš„ä¾èµ–åŒ…éƒ½åœ¨ä¸€ä¸ª jar åŒ…å†…ã€‚</p><p>äºŒã€ç®€åŒ–é…ç½®</p><p>spring - boot - starter - web å¯åŠ¨å™¨è‡ªåŠ¨ä¾èµ–å…¶ä»–ç»„ä»¶ï¼Œç®€å°‘äº† maven çš„é…ç½®ã€‚</p><p>ä¸‰ã€è‡ªåŠ¨é…ç½® Spring Boot èƒ½æ ¹æ®å½“å‰ç±»è·¯å¾„ä¸‹çš„ç±»ã€jar åŒ…æ¥è‡ªåŠ¨é…ç½® beanï¼Œå¦‚æ·»åŠ ä¸€ä¸ª <code>spring-boot-starter-web</code>â€‹ å¯åŠ¨å™¨å°±èƒ½æ‹¥æœ‰ web çš„åŠŸèƒ½ï¼Œæ— éœ€å…¶ä»–é…ç½®ã€‚</p><p>å››ã€æ— ä»£ç ç”Ÿæˆå’Œ XML é…ç½®</p><p>Spring Boo té…ç½®è¿‡ç¨‹ä¸­æ— ä»£ç ç”Ÿæˆï¼Œä¹Ÿæ— éœ€ XML é…ç½®æ–‡ä»¶å°±èƒ½å®Œæˆæ‰€æœ‰é…ç½®å·¥ä½œï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯å€ŸåŠ©äºæ¡ä»¶æ³¨è§£å®Œæˆçš„ï¼Œè¿™ä¹Ÿæ˜¯Spring4.x çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚</p><p>äº”ã€åº”ç”¨ç›‘æ§</p><p>Spring Boot æä¾›ä¸€ç³»åˆ—ç«¯ç‚¹å¯ä»¥ç›‘æ§æœåŠ¡åŠåº”ç”¨ï¼Œåšå¥åº·æ£€æµ‹ã€‚</p><h2 id="2ã€Spring-Boot-çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿå®ƒä¸»è¦ç”±å“ªå‡ ä¸ªæ³¨è§£ç»„æˆçš„ï¼Ÿ"><a href="#2ã€Spring-Boot-çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿå®ƒä¸»è¦ç”±å“ªå‡ ä¸ªæ³¨è§£ç»„æˆçš„ï¼Ÿ" class="headerlink" title="2ã€Spring Boot çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿå®ƒä¸»è¦ç”±å“ªå‡ ä¸ªæ³¨è§£ç»„æˆçš„ï¼Ÿ"></a>2ã€Spring Boot çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿå®ƒä¸»è¦ç”±å“ªå‡ ä¸ªæ³¨è§£ç»„æˆçš„ï¼Ÿ</h2><p>å¯åŠ¨ç±»ä¸Šé¢çš„æ³¨è§£æ˜¯  <strong>@SpringBootApplication</strong>ï¼Œå®ƒä¹Ÿæ˜¯ Spring Boot çš„æ ¸å¿ƒæ³¨è§£ï¼Œä¸»è¦ç»„åˆåŒ…å«äº†ä»¥ä¸‹ 3 ä¸ªæ³¨è§£ï¼š</p><p> <strong>@SpringBootConfiguration</strong>ï¼šç»„åˆäº† @Configuration æ³¨è§£ï¼Œå®ç°é…ç½®æ–‡ä»¶çš„åŠŸèƒ½ã€‚</p><p> <strong>@EnableAutoConfiguration</strong>ï¼šæ‰“å¼€è‡ªåŠ¨é…ç½®çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å…³é—­æŸä¸ªè‡ªåŠ¨é…ç½®çš„é€‰é¡¹ï¼Œå¦‚å…³é—­æ•°æ®æºè‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼š @SpringBootApplication(exclude &#x3D; { DataSourceAutoConfiguration.class})ã€‚</p><p> <strong>@ComponentScan</strong>ï¼šSpring ç»„ä»¶æ‰«æã€‚</p><h2 id="3ã€è¿è¡Œ-Spring-Boot-æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ"><a href="#3ã€è¿è¡Œ-Spring-Boot-æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="3ã€è¿è¡Œ Spring Boot æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ"></a>3ã€è¿è¡Œ Spring Boot æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</h2><p>1ï¼‰æ‰“åŒ…ç”¨å‘½ä»¤æˆ–è€…æ”¾åˆ°å®¹å™¨ä¸­è¿è¡Œ</p><p>2ï¼‰ç”¨ Maven &#x2F; Gradle æ’ä»¶è¿è¡Œ</p><p>3ï¼‰ç›´æ¥æ‰§è¡Œ main æ–¹æ³•è¿è¡Œ</p><h2 id="4ã€å¦‚ä½•ç†è§£-Spring-Boot-ä¸­çš„-Startersï¼Ÿ"><a href="#4ã€å¦‚ä½•ç†è§£-Spring-Boot-ä¸­çš„-Startersï¼Ÿ" class="headerlink" title="4ã€å¦‚ä½•ç†è§£ Spring Boot ä¸­çš„ Startersï¼Ÿ"></a>4ã€å¦‚ä½•ç†è§£ Spring Boot ä¸­çš„ Startersï¼Ÿ</h2><p>Starters æ˜¯ä»€ä¹ˆï¼š</p><p>Starters å¯ä»¥ç†è§£ä¸ºå¯åŠ¨å™¨ï¼Œå®ƒåŒ…å«äº†ä¸€ç³»åˆ—å¯ä»¥é›†æˆåˆ°åº”ç”¨é‡Œé¢çš„ä¾èµ–åŒ…ï¼Œä½ å¯ä»¥ä¸€ç«™å¼é›†æˆ Spring åŠå…¶ä»–æŠ€æœ¯ï¼Œè€Œä¸éœ€è¦åˆ°å¤„æ‰¾ç¤ºä¾‹ä»£ç å’Œä¾èµ–åŒ…ã€‚å¦‚ä½ æƒ³ä½¿ç”¨ Spring JPA è®¿é—®æ•°æ®åº“ï¼Œåªè¦åŠ å…¥ <code>spring-boot-starter-data-jpa</code>â€‹ å¯åŠ¨å™¨ä¾èµ–å°±èƒ½ä½¿ç”¨äº†ã€‚Starters åŒ…å«äº†è®¸å¤šé¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°çš„\ä¾èµ–ï¼Œå®ƒä»¬èƒ½å¿«é€ŸæŒç»­çš„è¿è¡Œï¼Œéƒ½æ˜¯ä¸€ç³»åˆ—å¾—åˆ°æ”¯æŒçš„ç®¡ç†ä¼ é€’æ€§ä¾èµ–ã€‚</p><p>Starters å‘½åï¼šSpring Boot å®˜æ–¹çš„å¯åŠ¨å™¨éƒ½æ˜¯ä»¥ <code>spring-boot-starter-</code>â€‹ å‘½åçš„ï¼Œä»£è¡¨äº†ä¸€ä¸ªç‰¹å®šçš„åº”ç”¨ç±»å‹ã€‚ç¬¬ä¸‰æ–¹çš„å¯åŠ¨å™¨ä¸èƒ½ä»¥ <code>spring-boot</code>â€‹ å¼€å¤´å‘½åï¼Œå®ƒä»¬éƒ½è¢« Spring Boot å®˜æ–¹ä¿ç•™ã€‚ä¸€èˆ¬ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åº”è¯¥è¿™æ ·å‘½åï¼Œåƒ mybatis çš„ <code>mybatis-spring-boot-starter</code>â€‹ã€‚</p><p>Starters åˆ†ç±»ï¼š</p><ol><li>Spring Boot åº”ç”¨ç±»å¯åŠ¨å™¨</li></ol><table><thead><tr><th>å¯åŠ¨å™¨åç§°</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td>spring-boot-stater</td><td>åŒ…å«è‡ªåŠ¨é…ç½®ã€æ—¥å¿—ã€YAML çš„æ”¯æŒ</td></tr><tr><td>spring-boot-stater-web</td><td>ä½¿ç”¨ Spring MVC æ„å»º web å·¥ç¨‹ï¼ŒåŒ…å« restfulï¼Œé»˜è®¤ä½¿ç”¨ Tomcat å®¹å™¨</td></tr></tbody></table><ol start="2"><li>Spring Boot ç”Ÿäº§å¯åŠ¨å™¨</li></ol><table><thead><tr><th>å¯åŠ¨å™¨åç§°</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td>spring-boot-stater-actuator</td><td>æä¾›ç”Ÿäº§ç¯å¢ƒç‰¹æ€§ï¼Œèƒ½ç›‘æ§ç®¡ç†åº”ç”¨</td></tr></tbody></table><ol start="3"><li>Spring Boot æŠ€æœ¯ç±»å¯åŠ¨å™¨</li></ol><table><thead><tr><th>å¯åŠ¨å™¨åç§°</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td>spring-boot-stater-json</td><td>æä¾›å¯¹ JSON çš„è¯»å†™æ”¯æŒ</td></tr><tr><td>spring-boot-stater-logging</td><td>é»˜è®¤çš„æ—¥å¿—å¯åŠ¨å™¨ï¼Œé»˜è®¤ä½¿ç”¨ Logback</td></tr></tbody></table><h2 id="5ã€-å¦‚ä½•åœ¨-Spring-Boot-å¯åŠ¨çš„æ—¶å€™è¿è¡Œä¸€äº›ç‰¹å®šçš„ä»£ç ï¼Ÿ"><a href="#5ã€-å¦‚ä½•åœ¨-Spring-Boot-å¯åŠ¨çš„æ—¶å€™è¿è¡Œä¸€äº›ç‰¹å®šçš„ä»£ç ï¼Ÿ" class="headerlink" title="5ã€ å¦‚ä½•åœ¨ Spring Boot å¯åŠ¨çš„æ—¶å€™è¿è¡Œä¸€äº›ç‰¹å®šçš„ä»£ç ï¼Ÿ"></a>5ã€ å¦‚ä½•åœ¨ Spring Boot å¯åŠ¨çš„æ—¶å€™è¿è¡Œä¸€äº›ç‰¹å®šçš„ä»£ç ï¼Ÿ</h2><p>å¦‚æœä½ æƒ³åœ¨ Spring Boot å¯åŠ¨çš„æ—¶å€™è¿è¡Œä¸€äº›ç‰¹å®šçš„ä»£ç ï¼Œä½ å¯ä»¥å®ç°æ¥å£ <strong>ApplicationRunner</strong> æˆ–è€… <strong>CommandLineRunner</strong>ï¼Œè¿™ä¸¤ä¸ªæ¥å£å®ç°æ–¹å¼ä¸€æ ·ï¼Œå®ƒä»¬éƒ½åªæä¾›äº†ä¸€ä¸ª run æ–¹æ³•ã€‚</p><p><strong>CommandLineRunner</strong>ï¼šå¯åŠ¨è·å–å‘½ä»¤è¡Œå‚æ•°</p><h2 id="6ã€Spring-Boot-éœ€è¦ç‹¬ç«‹çš„å®¹å™¨è¿è¡Œå—ï¼Ÿ"><a href="#6ã€Spring-Boot-éœ€è¦ç‹¬ç«‹çš„å®¹å™¨è¿è¡Œå—ï¼Ÿ" class="headerlink" title="6ã€Spring Boot éœ€è¦ç‹¬ç«‹çš„å®¹å™¨è¿è¡Œå—ï¼Ÿ"></a>6ã€Spring Boot éœ€è¦ç‹¬ç«‹çš„å®¹å™¨è¿è¡Œå—ï¼Ÿ</h2><p>å¯ä»¥ä¸éœ€è¦ï¼Œå†…ç½®äº† Tomcat &#x2F; Jetty ç­‰å®¹å™¨ã€‚</p><h2 id="7ã€Spring-Boot-ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#7ã€Spring-Boot-ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="7ã€Spring Boot ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>7ã€Spring Boot ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Spring boot actuator æ˜¯ spring å¯åŠ¨æ¡†æ¶ä¸­çš„é‡è¦åŠŸèƒ½ä¹‹ä¸€ã€‚Spring boot ç›‘è§†å™¨å¯å¸®åŠ©æ‚¨è®¿é—®ç”Ÿäº§ç¯å¢ƒä¸­æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„å½“å‰çŠ¶æ€ã€‚æœ‰å‡ ä¸ªæŒ‡æ ‡å¿…é¡»åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿›è¡Œæ£€æŸ¥å’Œç›‘æ§ã€‚å³ä½¿ä¸€äº›å¤–éƒ¨åº”ç”¨ç¨‹åºå¯èƒ½æ­£åœ¨ä½¿ç”¨è¿™äº›æœåŠ¡æ¥å‘ç›¸å…³äººå‘˜è§¦å‘è­¦æŠ¥æ¶ˆæ¯ã€‚ç›‘è§†å™¨æ¨¡å—å…¬å¼€äº†ä¸€ç»„å¯ç›´æ¥ä½œä¸º HTTP URL è®¿é—®çš„ REST ç«¯ç‚¹æ¥æ£€æŸ¥çŠ¶æ€ã€‚</p><h2 id="8ã€-å¦‚ä½•ä½¿ç”¨-Spring-Boot-å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ"><a href="#8ã€-å¦‚ä½•ä½¿ç”¨-Spring-Boot-å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ" class="headerlink" title="8ã€ å¦‚ä½•ä½¿ç”¨ Spring Boot å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ"></a>8ã€ å¦‚ä½•ä½¿ç”¨ Spring Boot å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ</h2><p>Spring æä¾›äº†ä¸€ç§ä½¿ç”¨ ControllerAdvice å¤„ç†å¼‚å¸¸çš„éå¸¸æœ‰ç”¨çš„æ–¹æ³•ã€‚ æˆ‘ä»¬é€šè¿‡å®ç°ä¸€ä¸ª ControlerAdvice ç±»ï¼Œæ¥å¤„ç†æ§åˆ¶å™¨ç±»æŠ›å‡ºçš„æ‰€æœ‰å¼‚å¸¸ã€‚</p><h2 id="9ã€-ä½ å¦‚ä½•ç†è§£-Spring-Boot-ä¸­çš„-Starters-ï¼Ÿ"><a href="#9ã€-ä½ å¦‚ä½•ç†è§£-Spring-Boot-ä¸­çš„-Starters-ï¼Ÿ" class="headerlink" title="9ã€ ä½ å¦‚ä½•ç†è§£ Spring Boot ä¸­çš„ Starters ï¼Ÿ"></a>9ã€ ä½ å¦‚ä½•ç†è§£ Spring Boot ä¸­çš„ Starters ï¼Ÿ</h2><p>Starters å¯ä»¥ç†è§£ä¸ºå¯åŠ¨å™¨ï¼Œå®ƒåŒ…å«äº†ä¸€ç³»åˆ—å¯ä»¥é›†æˆåˆ°åº”ç”¨é‡Œé¢çš„ä¾èµ–åŒ…ï¼Œä½ å¯ä»¥ä¸€ç«™å¼é›†æˆ Spring åŠå…¶ä»–æŠ€æœ¯ï¼Œè€Œä¸éœ€è¦åˆ°å¤„æ‰¾ç¤ºä¾‹ä»£ç å’Œä¾èµ–åŒ…ã€‚å¦‚ä½ æƒ³ä½¿ç”¨ Spring JPA è®¿é—®æ•°æ®åº“ï¼Œåªè¦åŠ å…¥ <code>spring-boot-starter-data-jpa</code>â€‹ å¯åŠ¨å™¨ä¾èµ–å°±èƒ½ä½¿ç”¨äº†ã€‚</p><h2 id="10ã€springboot-å¸¸ç”¨çš„-starter-æœ‰å“ªäº›"><a href="#10ã€springboot-å¸¸ç”¨çš„-starter-æœ‰å“ªäº›" class="headerlink" title="10ã€springboot å¸¸ç”¨çš„ starter æœ‰å“ªäº›"></a>10ã€springboot å¸¸ç”¨çš„ starter æœ‰å“ªäº›</h2><p><code>spring-boot-starter-web</code>â€‹ åµŒå…¥ tomcat å’Œ web å¼€å‘éœ€è¦ servlet ä¸ jsp æ”¯æŒ</p><p><code>spring-boot-starter-data-jpa</code>â€‹ æ•°æ®åº“æ”¯æŒ</p><p><code>spring-boot-starter-data-redis</code>â€‹ redis æ•°æ®åº“æ”¯æŒ</p><p><code>spring-boot-starter-data-solr</code>â€‹ solr æ”¯æŒ</p><p><code>mybatis-spring-boot-starter</code>â€‹ ç¬¬ä¸‰æ–¹çš„ mybatis é›†æˆ starter</p><h2 id="11ã€SpringBoot-å®ç°çƒ­éƒ¨ç½²æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ"><a href="#11ã€SpringBoot-å®ç°çƒ­éƒ¨ç½²æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="11ã€SpringBoot å®ç°çƒ­éƒ¨ç½²æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ"></a>11ã€SpringBoot å®ç°çƒ­éƒ¨ç½²æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</h2><p>ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><strong>Spring Loaded</strong></li><li><strong>Spring-boot-devtools</strong></li></ul><h2 id="12ã€-å¦‚ä½•ç†è§£-Spring-Boot-é…ç½®åŠ è½½é¡ºåºï¼Ÿ"><a href="#12ã€-å¦‚ä½•ç†è§£-Spring-Boot-é…ç½®åŠ è½½é¡ºåºï¼Ÿ" class="headerlink" title="12ã€ å¦‚ä½•ç†è§£ Spring Boot é…ç½®åŠ è½½é¡ºåºï¼Ÿ"></a>12ã€ å¦‚ä½•ç†è§£ Spring Boot é…ç½®åŠ è½½é¡ºåºï¼Ÿ</h2><p>åœ¨ Spring Boot é‡Œé¢ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥åŠ è½½é…ç½®ã€‚</p><p>1ï¼‰properties æ–‡ä»¶ï¼›</p><p>2ï¼‰YAML æ–‡ä»¶ï¼›</p><p>3ï¼‰ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼›</p><p>4ï¼‰å‘½ä»¤è¡Œå‚æ•°ï¼›</p><h2 id="13ã€Spring-Boot-çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æœ‰å“ªå‡ ä¸ªï¼Ÿå®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#13ã€Spring-Boot-çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æœ‰å“ªå‡ ä¸ªï¼Ÿå®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="13ã€Spring Boot çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æœ‰å“ªå‡ ä¸ªï¼Ÿå®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>13ã€Spring Boot çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æœ‰å“ªå‡ ä¸ªï¼Ÿå®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Spring Boot çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æ˜¯ application å’Œ bootstrap é…ç½®æ–‡ä»¶ã€‚</p><p>application é…ç½®æ–‡ä»¶è¿™ä¸ªå®¹æ˜“ç†è§£ï¼Œä¸»è¦ç”¨äº Spring Boot é¡¹ç›®çš„è‡ªåŠ¨åŒ–é…ç½®ã€‚</p><p>bootstrap é…ç½®æ–‡ä»¶æœ‰ä»¥ä¸‹å‡ ä¸ªåº”ç”¨åœºæ™¯ã€‚</p><ul><li>ä½¿ç”¨ Spring Cloud Config é…ç½®ä¸­å¿ƒæ—¶ï¼Œè¿™æ—¶éœ€è¦åœ¨ bootstrap é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è¿æ¥åˆ°é…ç½®ä¸­å¿ƒçš„é…ç½®å±æ€§æ¥åŠ è½½å¤–éƒ¨é…ç½®ä¸­å¿ƒçš„é…ç½®ä¿¡æ¯ï¼›</li><li>ä¸€äº›å›ºå®šçš„ä¸èƒ½è¢«è¦†ç›–çš„å±æ€§ï¼›</li><li>ä¸€äº›åŠ å¯† &#x2F; è§£å¯†çš„åœºæ™¯ï¼›</li></ul><h2 id="14ã€å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-ActiveMQ-ï¼Ÿ"><a href="#14ã€å¦‚ä½•é›†æˆ-Spring-Boot-å’Œ-ActiveMQ-ï¼Ÿ" class="headerlink" title="14ã€å¦‚ä½•é›†æˆ Spring Boot å’Œ ActiveMQ ï¼Ÿ"></a>14ã€å¦‚ä½•é›†æˆ Spring Boot å’Œ ActiveMQ ï¼Ÿ</h2><p>é›†æˆ Spring Boot å’Œ ActiveMQï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>spring-boot-starter-activemq</code>â€‹ ä¾èµ–å…³ç³»ã€‚ å®ƒåªéœ€è¦å¾ˆå°‘çš„é…ç½®ï¼Œå¹¶ä¸”ä¸éœ€è¦æ ·æ¿ä»£ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring ç¯‡</title>
      <link href="/posts/21586.html"/>
      <url>/posts/21586.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h2 id="1ã€ä»€ä¹ˆæ˜¯-spring"><a href="#1ã€ä»€ä¹ˆæ˜¯-spring" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯ spring?"></a>1ã€ä»€ä¹ˆæ˜¯ spring?</h2><p>Spring æ˜¯ä¸ª java ä¼ä¸šçº§åº”ç”¨çš„å¼€æºå¼€å‘æ¡†æ¶ã€‚Spring ä¸»è¦ç”¨æ¥å¼€å‘ Java åº”ç”¨ï¼Œä½†æ˜¯æœ‰äº›æ‰©å±•æ˜¯é’ˆå¯¹æ„å»º J2EE å¹³å°çš„ web åº”ç”¨ã€‚Spring æ¡†æ¶ç›®æ ‡æ˜¯ç®€åŒ– Java ä¼ä¸šçº§åº”ç”¨å¼€å‘ï¼Œå¹¶é€šè¿‡ POJO ä¸ºåŸºç¡€çš„ç¼–ç¨‹æ¨¡å‹ä¿ƒè¿›è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚</p><h2 id="2ã€ä½ ä»¬é¡¹ç›®ä¸­ä¸ºä»€ä¹ˆä½¿ç”¨-Spring-æ¡†æ¶ï¼Ÿ"><a href="#2ã€ä½ ä»¬é¡¹ç›®ä¸­ä¸ºä»€ä¹ˆä½¿ç”¨-Spring-æ¡†æ¶ï¼Ÿ" class="headerlink" title="2ã€ä½ ä»¬é¡¹ç›®ä¸­ä¸ºä»€ä¹ˆä½¿ç”¨ Spring æ¡†æ¶ï¼Ÿ"></a>2ã€ä½ ä»¬é¡¹ç›®ä¸­ä¸ºä»€ä¹ˆä½¿ç”¨ Spring æ¡†æ¶ï¼Ÿ</h2><p>è¿™ä¹ˆé—®çš„è¯ï¼Œå°±ç›´æ¥è¯´ Spring æ¡†æ¶çš„å¥½å¤„å°±å¯ä»¥äº†ã€‚æ¯”å¦‚è¯´ Spring æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li><strong>è½»é‡ï¼š</strong> Spring æ˜¯è½»é‡çš„ï¼ŒåŸºæœ¬çš„ç‰ˆæœ¬å¤§çº¦ 2 MBã€‚</li><li><strong>æ§åˆ¶åè½¬ï¼š</strong> Spring é€šè¿‡æ§åˆ¶åè½¬å®ç°äº†æ¾æ•£è€¦åˆï¼Œå¯¹è±¡ä»¬ç»™å‡ºå®ƒä»¬çš„ä¾èµ–ï¼Œè€Œä¸æ˜¯åˆ›å»ºæˆ–æŸ¥æ‰¾ä¾èµ–çš„å¯¹è±¡ä»¬ã€‚</li><li><strong>é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ (AOP) ï¼š</strong> Spring æ”¯æŒé¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œå¹¶ä¸”æŠŠåº”ç”¨ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡åˆ†å¼€ã€‚</li><li><strong>å®¹å™¨ï¼š</strong> Spring åŒ…å«å¹¶ç®¡ç†åº”ç”¨ä¸­å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œé…ç½®ã€‚</li><li><strong>MVC æ¡†æ¶</strong>ï¼šSpring çš„ WEB æ¡†æ¶æ˜¯ä¸ªç²¾å¿ƒè®¾è®¡çš„æ¡†æ¶ï¼Œæ˜¯ Web æ¡†æ¶çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£å“ã€‚</li><li><strong>äº‹åŠ¡ç®¡ç†ï¼š</strong> Spring æä¾›ä¸€ä¸ªæŒç»­çš„äº‹åŠ¡ç®¡ç†æ¥å£ï¼Œå¯ä»¥æ‰©å±•åˆ°ä¸Šè‡³æœ¬åœ°äº‹åŠ¡ä¸‹è‡³å…¨å±€äº‹åŠ¡ï¼ˆJTAï¼‰ã€‚</li><li><strong>å¼‚å¸¸å¤„ç†ï¼š</strong> Spring æä¾›æ–¹ä¾¿çš„ API æŠŠå…·ä½“æŠ€æœ¯ç›¸å…³çš„å¼‚å¸¸ï¼ˆæ¯”å¦‚ç”± JDBCï¼ŒHibernate or JDO æŠ›å‡ºçš„ï¼‰è½¬åŒ–ä¸ºä¸€è‡´çš„ unchecked å¼‚å¸¸ã€‚</li></ul><h2 id="3ã€Autowired-å’Œ-Resource-å…³é”®å­—çš„åŒºåˆ«ï¼Ÿ"><a href="#3ã€Autowired-å’Œ-Resource-å…³é”®å­—çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="3ã€Autowired å’Œ Resource å…³é”®å­—çš„åŒºåˆ«ï¼Ÿ"></a>3ã€Autowired å’Œ Resource å…³é”®å­—çš„åŒºåˆ«ï¼Ÿ</h2><p>@Resource å’Œ @Autowired éƒ½æ˜¯åš bean çš„æ³¨å…¥æ—¶ä½¿ç”¨ï¼Œå…¶å® @Resource å¹¶ä¸æ˜¯ Spring çš„æ³¨è§£ï¼Œå®ƒçš„åŒ…æ˜¯<code>javax.annotation.Resource</code>â€‹ï¼Œéœ€è¦å¯¼å…¥ï¼Œä½†æ˜¯ Spring æ”¯æŒè¯¥æ³¨è§£çš„æ³¨å…¥ã€‚</p><p>1ã€å…±åŒç‚¹</p><p>ä¸¤è€…éƒ½å¯ä»¥å†™åœ¨å­—æ®µå’Œ setter æ–¹æ³•ä¸Šã€‚ä¸¤è€…å¦‚æœéƒ½å†™åœ¨å­—æ®µä¸Šï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦å†å†™ setter æ–¹æ³•ã€‚</p><p>2ã€ä¸åŒç‚¹</p><p>ï¼ˆ1ï¼‰@Autowired</p><p>@Autowired ä¸º Spring æä¾›çš„æ³¨è§£ï¼Œéœ€è¦å¯¼å…¥åŒ… <code>org.springframework.beans.factory.annotation.Autowired</code>â€‹ï¼›åªæŒ‰ç…§ byType æ³¨å…¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestServiceImpl</span> &#123;</span><br><span class="line"> <span class="comment">// ä¸‹é¢ä¸¤ç§@Autowiredåªè¦ä½¿ç”¨ä¸€ç§å³å¯</span></span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="keyword">private</span> UserDao userDao; <span class="comment">// ç”¨äºå­—æ®µä¸Š</span></span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123; <span class="comment">// ç”¨äºå±æ€§çš„æ–¹æ³•ä¸Š</span></span><br><span class="line"> <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>@Autowired æ³¨è§£æ˜¯æŒ‰ç…§ç±»å‹ï¼ˆbyTypeï¼‰è£…é…ä¾èµ–å¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒè¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœå…è®¸ null å€¼ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„required å±æ€§ä¸º falseã€‚å¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨æŒ‰ç…§åç§°ï¼ˆbyNameï¼‰æ¥è£…é…ï¼Œå¯ä»¥ç»“åˆ @Qualifier æ³¨è§£ä¸€èµ·ä½¿ç”¨ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestServiceImpl</span> &#123;</span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="meta">@Qualifier(&quot;userDao&quot;)</span></span><br><span class="line"> <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰@Resource</p><p>@Resource é»˜è®¤æŒ‰ç…§ ByName è‡ªåŠ¨æ³¨å…¥ï¼Œç”± J2EE æä¾›ï¼Œéœ€è¦å¯¼å…¥åŒ… <code>javax.annotation.Resource</code>â€‹ã€‚</p><p>@Resource æœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼šname å’Œ typeï¼Œè€Œ Spring å°† @Resource æ³¨è§£çš„ name å±æ€§è§£æä¸º bean çš„åå­—ï¼Œè€Œ type å±æ€§åˆ™è§£æä¸º bean çš„ç±»å‹ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨ name å±æ€§ï¼Œåˆ™ä½¿ç”¨ byName çš„è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ï¼Œè€Œä½¿ç”¨ type å±æ€§æ—¶åˆ™ä½¿ç”¨ byType è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚å¦‚æœæ—¢ä¸åˆ¶å®š name ä¹Ÿä¸åˆ¶å®š type å±æ€§ï¼Œè¿™æ—¶å°†é€šè¿‡åå°„æœºåˆ¶ä½¿ç”¨ byName è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestServiceImpl</span> &#123;</span><br><span class="line"> <span class="comment">// ä¸‹é¢ä¸¤ç§@Resourceåªè¦ä½¿ç”¨ä¸€ç§å³å¯</span></span><br><span class="line"> <span class="meta">@Resource(name=&quot;userDao&quot;)</span></span><br><span class="line"> <span class="keyword">private</span> UserDao userDao; <span class="comment">// ç”¨äºå­—æ®µä¸Š</span></span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Resource(name=&quot;userDao&quot;)</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123; <span class="comment">// ç”¨äºå±æ€§çš„setteræ–¹æ³•ä¸Š</span></span><br><span class="line"> <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šæœ€å¥½æ˜¯å°† @Resource æ”¾åœ¨ setter æ–¹æ³•ä¸Šï¼Œå› ä¸ºè¿™æ ·æ›´ç¬¦åˆé¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œé€šè¿‡ setã€get å»æ“ä½œå±æ€§ï¼Œè€Œä¸æ˜¯ç›´æ¥å»æ“ä½œå±æ€§ã€‚</p><p> <strong>@Resource è£…é…é¡ºåºï¼š</strong></p><p>â‘ å¦‚æœåŒæ—¶æŒ‡å®šäº† name å’Œ typeï¼Œåˆ™ä» Spring ä¸Šä¸‹æ–‡ä¸­æ‰¾åˆ°å”¯ä¸€åŒ¹é…çš„ bean è¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>â‘¡å¦‚æœæŒ‡å®šäº† nameï¼Œåˆ™ä»ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾åç§°ï¼ˆidï¼‰åŒ¹é…çš„ bean è¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>â‘¢å¦‚æœæŒ‡å®šäº† typeï¼Œåˆ™ä»ä¸Šä¸‹æ–‡ä¸­æ‰¾åˆ°ç±»ä¼¼åŒ¹é…çš„å”¯ä¸€ bean è¿›è¡Œè£…é…ï¼Œæ‰¾ä¸åˆ°æˆ–æ˜¯æ‰¾åˆ°å¤šä¸ªï¼Œéƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>â‘£å¦‚æœæ—¢æ²¡æœ‰æŒ‡å®š nameï¼Œåˆæ²¡æœ‰æŒ‡å®š typeï¼Œåˆ™è‡ªåŠ¨æŒ‰ç…§ byName æ–¹å¼è¿›è¡Œè£…é…ï¼›å¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œåˆ™å›é€€ä¸ºä¸€ä¸ªåŸå§‹ç±»å‹è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ™è‡ªåŠ¨è£…é…ã€‚</p><p>@Resource çš„ä½œç”¨ç›¸å½“äº @Autowiredï¼Œåªä¸è¿‡ @Autowired æŒ‰ç…§ byType è‡ªåŠ¨æ³¨å…¥ã€‚</p><h2 id="4ã€ä¾èµ–æ³¨å…¥çš„æ–¹å¼æœ‰å‡ ç§ï¼Œå„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#4ã€ä¾èµ–æ³¨å…¥çš„æ–¹å¼æœ‰å‡ ç§ï¼Œå„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="4ã€ä¾èµ–æ³¨å…¥çš„æ–¹å¼æœ‰å‡ ç§ï¼Œå„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>4ã€ä¾èµ–æ³¨å…¥çš„æ–¹å¼æœ‰å‡ ç§ï¼Œå„æ˜¯ä»€ä¹ˆï¼Ÿ</h2><h3 id="1ã€æ„é€ å™¨æ³¨å…¥"><a href="#1ã€æ„é€ å™¨æ³¨å…¥" class="headerlink" title="1ã€æ„é€ å™¨æ³¨å…¥"></a><strong>1ã€æ„é€ å™¨æ³¨å…¥</strong></h3><p>å°†è¢«ä¾èµ–å¯¹è±¡é€šè¿‡æ„é€ å‡½æ•°çš„å‚æ•°æ³¨å…¥ç»™ä¾èµ–å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–å¯¹è±¡çš„æ—¶å€™æ³¨å…¥ã€‚</p><p><strong>ä¼˜ç‚¹ï¼š</strong> å¯¹è±¡åˆå§‹åŒ–å®Œæˆåä¾¿å¯è·å¾—å¯ä½¿ç”¨çš„å¯¹è±¡ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong> å½“éœ€è¦æ³¨å…¥çš„å¯¹è±¡å¾ˆå¤šæ—¶ï¼Œæ„é€ å™¨å‚æ•°åˆ—è¡¨å°†ä¼šå¾ˆé•¿ï¼› ä¸å¤Ÿçµæ´»ã€‚è‹¥æœ‰å¤šç§æ³¨å…¥æ–¹å¼ï¼Œæ¯ç§æ–¹å¼åªéœ€æ³¨å…¥æŒ‡å®šå‡ ä¸ªä¾èµ–ï¼Œé‚£ä¹ˆå°±éœ€è¦æä¾›å¤šä¸ªé‡è½½çš„æ„é€ å‡½æ•°ï¼Œéº»çƒ¦ã€‚</p><h3 id="2ã€setter-æ–¹æ³•æ³¨å…¥"><a href="#2ã€setter-æ–¹æ³•æ³¨å…¥" class="headerlink" title="2ã€setter æ–¹æ³•æ³¨å…¥"></a>2ã€setter æ–¹æ³•æ³¨å…¥</h3><p>IOC Service Provider é€šè¿‡è°ƒç”¨æˆå‘˜å˜é‡æä¾›çš„ setter å‡½æ•°å°†è¢«ä¾èµ–å¯¹è±¡æ³¨å…¥ç»™ä¾èµ–ç±»ã€‚</p><p><strong>ä¼˜ç‚¹ï¼š</strong> çµæ´»ã€‚å¯ä»¥é€‰æ‹©æ€§åœ°æ³¨å…¥éœ€è¦çš„å¯¹è±¡ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong> ä¾èµ–å¯¹è±¡åˆå§‹åŒ–å®Œæˆåç”±äºå°šæœªæ³¨å…¥è¢«ä¾èµ–å¯¹è±¡ï¼Œå› æ­¤è¿˜ä¸èƒ½ä½¿ç”¨ã€‚</p><h3 id="3ã€æ¥å£æ³¨å…¥"><a href="#3ã€æ¥å£æ³¨å…¥" class="headerlink" title="3ã€æ¥å£æ³¨å…¥"></a>3ã€æ¥å£æ³¨å…¥</h3><p>ä¾èµ–ç±»å¿…é¡»è¦å®ç°æŒ‡å®šçš„æ¥å£ï¼Œç„¶åå®ç°è¯¥æ¥å£ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°±æ˜¯ç”¨äºä¾èµ–æ³¨å…¥ã€‚è¯¥å‡½æ•°çš„å‚æ•°å°±æ˜¯è¦æ³¨å…¥çš„å¯¹è±¡ã€‚</p><p><strong>ä¼˜ç‚¹ï¼š</strong> æ¥å£æ³¨å…¥ä¸­ï¼Œæ¥å£çš„åå­—ã€å‡½æ•°çš„åå­—éƒ½ä¸é‡è¦ï¼Œåªè¦ä¿è¯å‡½æ•°çš„å‚æ•°æ˜¯è¦æ³¨å…¥çš„å¯¹è±¡ç±»å‹å³å¯ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong> ä¾µå…¥è¡Œå¤ªå¼ºï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚</p><p>PSï¼šä»€ä¹ˆæ˜¯ä¾µå…¥è¡Œï¼Ÿ å¦‚æœç±» A è¦ä½¿ç”¨åˆ«äººæä¾›çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œè‹¥ä¸ºäº†ä½¿ç”¨è¿™åŠŸèƒ½ï¼Œéœ€è¦åœ¨è‡ªå·±çš„ç±»ä¸­å¢åŠ é¢å¤–çš„ä»£ç ï¼Œè¿™å°±æ˜¯ä¾µå…¥æ€§ã€‚</p><h2 id="5ã€è®²ä¸€ä¸‹ä»€ä¹ˆæ˜¯-Spring"><a href="#5ã€è®²ä¸€ä¸‹ä»€ä¹ˆæ˜¯-Spring" class="headerlink" title="5ã€è®²ä¸€ä¸‹ä»€ä¹ˆæ˜¯ Spring"></a>5ã€è®²ä¸€ä¸‹ä»€ä¹ˆæ˜¯ Spring</h2><p>Spring æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ IOC å’Œ AO På®¹å™¨æ¡†æ¶ã€‚æ˜¯ä¸º Java åº”ç”¨ç¨‹åºæä¾›åŸºç¡€æ€§æœåŠ¡çš„ä¸€å¥—æ¡†æ¶ï¼Œç›®çš„æ˜¯ç”¨äºç®€åŒ–ä¼ä¸šåº”ç”¨ç¨‹åºçš„å¼€å‘ï¼Œå®ƒä½¿å¾—å¼€å‘è€…åªéœ€è¦å…³å¿ƒä¸šåŠ¡éœ€æ±‚ã€‚å¸¸è§çš„é…ç½®æ–¹å¼æœ‰ä¸‰ç§ï¼šåŸºäº XML çš„é…ç½®ã€åŸºäºæ³¨è§£çš„é…ç½®ã€åŸºäº Java çš„é…ç½®ã€‚</p><p>ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ç»„æˆï¼š</p><p>Spring Coreï¼šæ ¸å¿ƒç±»åº“ï¼Œæä¾› IOC æœåŠ¡ï¼›</p><p>Spring Contextï¼šæä¾›æ¡†æ¶å¼çš„ Bean è®¿é—®æ–¹å¼ï¼Œä»¥åŠä¼ä¸šçº§åŠŸèƒ½ï¼ˆ JNDIã€å®šæ—¶ä»»åŠ¡ç­‰ï¼‰ï¼›</p><p>Spring AOPï¼šAOP æœåŠ¡ï¼›</p><p>Spring DAOï¼šå¯¹ JDBC çš„æŠ½è±¡ï¼Œç®€åŒ–äº†æ•°æ®è®¿é—®å¼‚å¸¸çš„å¤„ç†ï¼›</p><p>Spring ORMï¼šå¯¹ç°æœ‰çš„ ORM æ¡†æ¶çš„æ”¯æŒï¼›</p><p>Spring Webï¼šæä¾›äº†åŸºæœ¬çš„é¢å‘ Web çš„ç»¼åˆç‰¹æ€§ï¼Œä¾‹å¦‚å¤šæ–¹æ–‡ä»¶ä¸Šä¼ ï¼›</p><p>Spring MVCï¼šæä¾›é¢å‘ Web åº”ç”¨çš„ Model - View - Controller å®ç°ã€‚</p><h2 id="6ã€è¯´è¯´ä½ å¯¹-Spring-MVC-çš„ç†è§£"><a href="#6ã€è¯´è¯´ä½ å¯¹-Spring-MVC-çš„ç†è§£" class="headerlink" title="6ã€è¯´è¯´ä½ å¯¹ Spring MVC çš„ç†è§£"></a>6ã€è¯´è¯´ä½ å¯¹ Spring MVC çš„ç†è§£</h2><p><strong>ä»€ä¹ˆæ˜¯ MVC æ¨¡å¼</strong></p><p>MVCï¼šMVC æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼</p><p>MVC çš„åŸç†å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/5a34c2eacbbb6553165c42957826947d645325325.png">â€‹</p><div><img src="C:\Users\FAN\AppData\Roaming\Typora\typora-user-images\image-20230824015211162.png" alt="image-20230824015211162" style="zoom: 67%;" /></div><p><strong>åˆ†æï¼š</strong></p><p>M - Model æ¨¡å‹ï¼ˆå®Œæˆä¸šåŠ¡é€»è¾‘ï¼šæœ‰ javaBean æ„æˆï¼Œservice + dao + entityï¼‰</p><p>V - View è§†å›¾ï¼ˆåšç•Œé¢çš„å±•ç¤º jspï¼Œhtmlâ€¦â€¦ï¼‰</p><p>C - Controller æ§åˆ¶å™¨ï¼ˆæ¥æ”¶è¯·æ±‚ â€”&gt; è°ƒç”¨æ¨¡å‹ â€”&gt; æ ¹æ®ç»“æœæ´¾å‘é¡µé¢ï¼‰</p><p>SpringMVC æ˜¯ä¸€ä¸ª MVC çš„å¼€æºæ¡†æ¶ï¼ŒSpringMVC &#x3D; struts2 + springï¼ŒSpringMVC å°±ç›¸å½“äºæ˜¯ Struts2 åŠ ä¸Š spring çš„æ•´åˆï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªç–‘æƒ‘å°±æ˜¯ï¼ŒSpringMVC å’Œ spring æ˜¯ä»€ä¹ˆæ ·çš„å…³ç³»å‘¢ï¼Ÿè¿™ä¸ªåœ¨ç™¾åº¦ç™¾ç§‘ä¸Šæœ‰ä¸€ä¸ªå¾ˆå¥½çš„è§£é‡Šï¼šæ„æ€æ˜¯è¯´ï¼ŒSpringMVC æ˜¯ spring çš„ä¸€ä¸ªåç»­äº§å“ï¼Œå…¶å®å°±æ˜¯ spring åœ¨åŸæœ‰åŸºç¡€ä¸Šï¼Œåˆæä¾›äº† web åº”ç”¨çš„ MVC æ¨¡å—ï¼Œå¯ä»¥ç®€å•çš„æŠŠ SpringMVC ç†è§£ä¸ºæ˜¯ spring çš„ä¸€ä¸ªæ¨¡å—</p><p>ï¼ˆç±»ä¼¼ AOPï¼ŒIOC è¿™æ ·çš„æ¨¡å—ï¼‰ï¼Œç½‘ç»œä¸Šç»å¸¸ä¼šè¯´ SpringMVC å’Œ spring æ— ç¼é›†æˆï¼Œå…¶å® SpringMVC å°±æ˜¯ spring çš„ä¸€ä¸ªå­æ¨¡å—ï¼Œæ‰€ä»¥æ ¹æœ¬ä¸éœ€è¦åŒ spring è¿›è¡Œæ•´åˆã€‚</p><p>å·¥ä½œåŸç†ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/046583091f7bbcf8d521349408c800dd645325325.jpg">â€‹</p><p>1ã€ ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨ DispatcherServletã€‚</p><p>2ã€ DispatcherServlet æ”¶åˆ°è¯·æ±‚è°ƒç”¨ HandlerMapping å¤„ç†å™¨æ˜ å°„å™¨ã€‚</p><p>3ã€ å¤„ç†å™¨æ˜ å°„å™¨æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼ˆå¯ä»¥æ ¹æ® xml é…ç½®ã€æ³¨è§£è¿›è¡ŒæŸ¥æ‰¾ï¼‰ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨ï¼ˆå¦‚æœæœ‰åˆ™ç”Ÿæˆï¼‰ä¸€å¹¶è¿”å›ç»™ DispatcherServletã€‚</p><p>4ã€ DispatcherServlet è°ƒç”¨ HandlerAdapter å¤„ç†å™¨é€‚é…å™¨ã€‚</p><p>5ã€ HandlerAdapter ç»è¿‡é€‚é…è°ƒç”¨å…·ä½“çš„å¤„ç†å™¨ï¼ˆControllerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨ï¼‰ã€‚</p><p>6ã€ Controller æ‰§è¡Œå®Œæˆè¿”å› ModelAndViewã€‚</p><p>7ã€ HandlerAdapter å°† controller æ‰§è¡Œç»“æœ ModelAndView è¿”å›ç»™ DispatcherServletã€‚</p><p>8ã€ DispatcherServlet å°† ModelAndView ä¼ ç»™ ViewReslover è§†å›¾è§£æå™¨ã€‚</p><p>9ã€ ViewReslover è§£æåè¿”å›å…·ä½“ Viewã€‚</p><p>10ã€DispatcherServlet æ ¹æ® View è¿›è¡Œæ¸²æŸ“è§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ï¼‰ã€‚</p><p>11ã€ DispatcherServlet å“åº”ç”¨æˆ·ã€‚</p><p><strong>ç»„ä»¶è¯´æ˜</strong> ä»¥ä¸‹ç»„ä»¶é€šå¸¸ä½¿ç”¨æ¡†æ¶æä¾›å®ç°ï¼š</p><p>DispatcherServletï¼šä½œä¸ºå‰ç«¯æ§åˆ¶å™¨ï¼Œæ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œæ§åˆ¶å…¶å®ƒç»„ä»¶æ‰§è¡Œï¼Œç»Ÿä¸€è°ƒåº¦ï¼Œé™ä½ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ï¼Œæé«˜æ¯ä¸ªç»„ä»¶çš„æ‰©å±•æ€§ã€‚</p><p>HandlerMappingï¼šé€šè¿‡æ‰©å±•å¤„ç†å™¨æ˜ å°„å™¨å®ç°ä¸åŒçš„æ˜ å°„æ–¹å¼ï¼Œä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚</p><p>HandlAdapterï¼šé€šè¿‡æ‰©å±•å¤„ç†å™¨é€‚é…å™¨ï¼Œæ”¯æŒæ›´å¤šç±»å‹çš„å¤„ç†å™¨ã€‚</p><p>ViewResolverï¼šé€šè¿‡æ‰©å±•è§†å›¾è§£æå™¨ï¼Œæ”¯æŒæ›´å¤šç±»å‹çš„è§†å›¾è§£æï¼Œä¾‹å¦‚ï¼šjspã€freemarkerã€pdfã€excel ç­‰ã€‚</p><p><strong>ç»„ä»¶ï¼š</strong>  <strong>1ã€å‰ç«¯æ§åˆ¶å™¨ DispatcherServletï¼ˆä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼‰ï¼Œç”±æ¡†æ¶æä¾›</strong> ä½œç”¨ï¼šæ¥æ”¶è¯·æ±‚ï¼Œå“åº”ç»“æœï¼Œç›¸å½“äºè½¬å‘å™¨ï¼Œä¸­å¤®å¤„ç†å™¨ã€‚æœ‰äº† DispatcherServlet å‡å°‘äº†å…¶å®ƒç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ã€‚ ç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ï¼Œå®ƒå°±ç›¸å½“äº mvc æ¨¡å¼ä¸­çš„ cï¼ŒDispatcherServlet æ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ŒDispatcherServlet çš„å­˜åœ¨é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ã€‚</p><p><strong>2ã€å¤„ç†å™¨æ˜ å°„å™¨ HandlerMappingï¼ˆä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼‰ï¼Œç”±æ¡†æ¶æä¾›</strong> ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„ url æŸ¥æ‰¾ Handlerï¼ŒHandlerMapping è´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚æ‰¾åˆ° Handler å³å¤„ç†å™¨ï¼Œspringmvc æä¾›äº†ä¸åŒçš„æ˜ å°„å™¨å®ç°ä¸åŒçš„æ˜ å°„æ–¹å¼ï¼Œä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚</p><p><strong>3ã€å¤„ç†å™¨é€‚é…å™¨ HandlerAdapter</strong> ä½œç”¨ï¼šæŒ‰ç…§ç‰¹å®šè§„åˆ™ï¼ˆHandlerAdapter è¦æ±‚çš„è§„åˆ™ï¼‰å»æ‰§è¡Œ Handlerï¼Œé€šè¿‡ HandlerAdapter å¯¹å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œé€šè¿‡æ‰©å±•é€‚é…å™¨å¯ä»¥å¯¹æ›´å¤šç±»å‹çš„å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œã€‚</p><p><strong>4ã€å¤„ç†å™¨ Handlerï¼ˆéœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼‰æ³¨æ„ï¼šç¼–å†™ Handler æ—¶æŒ‰ç…§ HandlerAdapter çš„è¦æ±‚å»åšï¼Œè¿™æ ·é€‚é…å™¨æ‰å¯ä»¥å»æ­£ç¡®æ‰§è¡ŒHandler</strong> Handler æ˜¯ç»§ DispatcherServlet å‰ç«¯æ§åˆ¶å™¨çš„åç«¯æ§åˆ¶å™¨ï¼Œåœ¨ DispatcherServlet çš„æ§åˆ¶ä¸‹ Handler å¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚ ç”±äº Handler æ¶‰åŠåˆ°å…·ä½“çš„ç”¨æˆ·ä¸šåŠ¡è¯·æ±‚ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µéœ€è¦å·¥ç¨‹å¸ˆæ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘ Handlerã€‚</p><p><strong>5ã€è§†å›¾è§£æå™¨ View resolverï¼ˆä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼‰ï¼Œç”±æ¡†æ¶æä¾›</strong> ä½œç”¨ï¼šè¿›è¡Œè§†å›¾è§£æï¼Œæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆçœŸæ­£çš„è§†å›¾ï¼ˆviewï¼‰ View Resolver è´Ÿè´£å°†å¤„ç†ç»“æœç”Ÿæˆ View è§†å›¾ï¼ŒView Resolver é¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰©ç†è§†å›¾åå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œå†ç”Ÿæˆ Viewè§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹ View è¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚ springmvc æ¡†æ¶æä¾›äº†å¾ˆå¤šçš„ View è§†å›¾ç±»å‹ï¼ŒåŒ…æ‹¬ï¼šjstlViewã€freemarkerViewã€pdfView ç­‰ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é€šè¿‡é¡µé¢æ ‡ç­¾æˆ–é¡µé¢æ¨¡ç‰ˆæŠ€æœ¯å°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ï¼Œéœ€è¦ç”±å·¥ç¨‹å¸ˆæ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘å…·ä½“çš„é¡µé¢ã€‚</p><p><strong>6ã€è§†å›¾ Viewï¼ˆéœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ jspâ€¦ï¼‰</strong>  View æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ç°ç±»æ”¯æŒä¸åŒçš„ View ç±»å‹ï¼ˆjspã€freemarkerã€pdfâ€¦ï¼‰</p><p><strong>æ ¸å¿ƒæ¶æ„çš„å…·ä½“æµç¨‹æ­¥éª¤å¦‚ä¸‹ï¼š</strong>  1ã€é¦–å…ˆç”¨æˆ·å‘é€è¯·æ±‚ â€”â€”&gt; DispatcherServletï¼Œå‰ç«¯æ§åˆ¶å™¨æ”¶åˆ°è¯·æ±‚åè‡ªå·±ä¸è¿›è¡Œå¤„ç†ï¼Œè€Œæ˜¯å§”æ‰˜ç»™å…¶ä»–çš„è§£æå™¨è¿›è¡Œå¤„ç†ï¼Œä½œä¸ºç»Ÿä¸€è®¿é—®ç‚¹ï¼Œè¿›è¡Œå…¨å±€çš„æµç¨‹æ§åˆ¶ï¼› 2ã€DispatcherServlet â€”â€”&gt; HandlerMappingï¼Œ HandlerMapping å°†ä¼šæŠŠè¯·æ±‚æ˜ å°„ä¸º HandlerExecutionChain å¯¹è±¡ï¼ˆåŒ…å«ä¸€ä¸ª Handler å¤„ç†å™¨ï¼ˆé¡µé¢æ§åˆ¶å™¨ï¼‰å¯¹è±¡ã€å¤šä¸ª HandlerInterceptor æ‹¦æˆªå™¨ï¼‰å¯¹è±¡ï¼Œé€šè¿‡è¿™ç§ç­–ç•¥æ¨¡å¼ï¼Œå¾ˆå®¹æ˜“æ·»åŠ æ–°çš„æ˜ å°„ç­–ç•¥ï¼› 3ã€DispatcherServlet â€”â€”&gt; HandlerAdapterï¼ŒHandlerAdapter å°†ä¼šæŠŠå¤„ç†å™¨åŒ…è£…ä¸ºé€‚é…å™¨ï¼Œä»è€Œæ”¯æŒå¤šç§ç±»å‹çš„å¤„ç†å™¨ï¼Œå³é€‚é…å™¨è®¾è®¡æ¨¡å¼çš„åº”ç”¨ï¼Œä»è€Œå¾ˆå®¹æ˜“æ”¯æŒå¾ˆå¤šç±»å‹çš„å¤„ç†å™¨ï¼› 4ã€HandlerAdapter â€”â€”&gt; å¤„ç†å™¨åŠŸèƒ½å¤„ç†æ–¹æ³•çš„è°ƒç”¨ï¼ŒHandlerAdapter å°†ä¼šæ ¹æ®é€‚é…çš„ç»“æœè°ƒç”¨çœŸæ­£çš„å¤„ç†å™¨çš„åŠŸèƒ½å¤„ç†æ–¹æ³•ï¼Œå®ŒæˆåŠŸèƒ½å¤„ç†ï¼›å¹¶è¿”å›ä¸€ä¸ªModelAndView å¯¹è±¡ï¼ˆåŒ…å«æ¨¡å‹æ•°æ®ã€é€»è¾‘è§†å›¾åï¼‰ï¼› 5ã€ModelAndView çš„é€»è¾‘è§†å›¾å â€”â€”&gt; ViewResolverï¼Œ ViewResolver å°†æŠŠé€»è¾‘è§†å›¾åè§£æä¸ºå…·ä½“çš„ Viewï¼Œé€šè¿‡è¿™ç§ç­–ç•¥æ¨¡å¼ï¼Œå¾ˆå®¹æ˜“æ›´æ¢å…¶ä»–è§†å›¾æŠ€æœ¯ï¼› 6ã€View â€”â€”&gt; æ¸²æŸ“ï¼ŒView ä¼šæ ¹æ®ä¼ è¿›æ¥çš„ Model æ¨¡å‹æ•°æ®è¿›è¡Œæ¸²æŸ“ï¼Œæ­¤å¤„çš„ Model å®é™…æ˜¯ä¸€ä¸ª Map æ•°æ®ç»“æ„ï¼Œå› æ­¤å¾ˆå®¹æ˜“æ”¯æŒå…¶ä»–è§†å›¾æŠ€æœ¯ï¼› 7ã€è¿”å›æ§åˆ¶æƒç»™ DispatcherServletï¼Œç”±DispatcherServlet è¿”å›å“åº”ç»™ç”¨æˆ·ï¼Œåˆ°æ­¤ä¸€ä¸ªæµç¨‹ç»“æŸã€‚</p><p>çœ‹åˆ°è¿™äº›æ­¥éª¤æˆ‘ç›¸ä¿¡å¤§å®¶å¾ˆæ„Ÿè§‰éå¸¸çš„ä¹±ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯è¿™é‡Œä¸»è¦æ˜¯è¦å¤§å®¶ç†è§£ springMVC ä¸­çš„å‡ ä¸ªç»„ä»¶ï¼š</p><p>å‰ç«¯æ§åˆ¶å™¨ï¼ˆDispatcherServletï¼‰ï¼šæ¥æ”¶è¯·æ±‚ï¼Œå“åº”ç»“æœï¼Œç›¸å½“äºç”µè„‘çš„ CPUã€‚</p><p>å¤„ç†å™¨æ˜ å°„å™¨ï¼ˆHandlerMappingï¼‰ï¼šæ ¹æ® URL å»æŸ¥æ‰¾å¤„ç†å™¨ã€‚</p><p>å¤„ç†å™¨ï¼ˆHandlerï¼‰ï¼šéœ€è¦ç¨‹åºå‘˜å»å†™ä»£ç å¤„ç†é€»è¾‘çš„ã€‚</p><p>å¤„ç†å™¨é€‚é…å™¨ï¼ˆHandlerAdapterï¼‰ï¼šä¼šæŠŠå¤„ç†å™¨åŒ…è£…æˆé€‚é…å™¨ï¼Œè¿™æ ·å°±å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„å¤„ç†å™¨ï¼Œç±»æ¯”ç¬”è®°æœ¬çš„é€‚é…å™¨ï¼ˆé€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼‰ã€‚</p><p>è§†å›¾è§£æå™¨ï¼ˆViewResovlerï¼‰ï¼šè¿›è¡Œè§†å›¾è§£æï¼Œå¤šè¿”å›çš„å­—ç¬¦ä¸²ï¼Œè¿›è¡Œå¤„ç†ï¼Œå¯ä»¥è§£ææˆå¯¹åº”çš„é¡µé¢</p><h2 id="7ã€SpringMV-å¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"><a href="#7ã€SpringMV-å¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="7ã€SpringMV å¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"></a>7ã€SpringMV å¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h2><p>@RequestMappingï¼šç”¨äºå¤„ç†è¯·æ±‚ url æ˜ å°„çš„æ³¨è§£ï¼Œå¯ç”¨äºç±»æˆ–æ–¹æ³•ä¸Šã€‚ç”¨äºç±»ä¸Šï¼Œåˆ™è¡¨ç¤ºç±»ä¸­çš„æ‰€æœ‰å“åº”è¯·æ±‚çš„æ–¹æ³•éƒ½æ˜¯ä»¥è¯¥åœ°å€ä½œä¸ºçˆ¶è·¯å¾„ã€‚</p><p>@RequestBodyï¼šæ³¨è§£å®ç°æ¥æ”¶ http è¯·æ±‚çš„ json æ•°æ®ï¼Œå°† json è½¬æ¢ä¸º java å¯¹è±¡ã€‚</p><p>@ResponseBodyï¼šæ³¨è§£å®ç°å°† conreoller æ–¹æ³•è¿”å›å¯¹è±¡è½¬åŒ–ä¸º json å¯¹è±¡å“åº”ç»™å®¢æˆ·ã€‚</p><h2 id="8ã€-è°ˆè°ˆä½ å¯¹-Spring-AOP-çš„ç†è§£"><a href="#8ã€-è°ˆè°ˆä½ å¯¹-Spring-AOP-çš„ç†è§£" class="headerlink" title="8ã€ è°ˆè°ˆä½ å¯¹ Spring AOP çš„ç†è§£"></a>8ã€ è°ˆè°ˆä½ å¯¹ Spring AOP çš„ç†è§£</h2><p>AOPï¼ˆAspect - Oriented Programmingï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰èƒ½å¤Ÿå°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»ï¼ˆä¾‹å¦‚äº‹åŠ¡å¤„ç†ã€æ—¥å¿—ç®¡ç†ã€æƒé™æ§åˆ¶ç­‰ï¼‰å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>Spring AOPæ˜¯åŸºäºåŠ¨æ€ä»£ç†çš„ï¼Œå¦‚æœè¦ä»£ç†çš„å¯¹è±¡å®ç°äº†æŸä¸ªæ¥å£ï¼Œé‚£ä¹ˆ Spring AOP å°±ä¼šä½¿ç”¨ JDK åŠ¨æ€ä»£ç†å»åˆ›å»ºä»£ç†å¯¹è±¡ï¼›è€Œå¯¹äºæ²¡æœ‰å®ç°æ¥å£çš„å¯¹è±¡ï¼Œå°±æ— æ³•ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œè½¬è€Œä½¿ç”¨ CGlib åŠ¨æ€ä»£ç†ç”Ÿæˆä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„å­ç±»æ¥ä½œä¸ºä»£ç†ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/c4f3da2efba5bc54ddf003db231364be645325325.png">â€‹</p><p>æ³¨æ„ï¼šå›¾ä¸­çš„ implements å’Œ extendã€‚å³ä¸€ä¸ªæ˜¯æ¥å£ï¼Œä¸€ä¸ªæ˜¯å®ç°ç±»ã€‚</p><p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ AspectJï¼ŒSpring AOP ä¸­å·²ç»é›†æˆäº† AspectJï¼ŒAspectJ åº”è¯¥ç®—å¾—ä¸Šæ˜¯ Java ç”Ÿæ€ç³»ç»Ÿä¸­æœ€å®Œæ•´çš„ AOP æ¡†æ¶äº†ã€‚ä½¿ç”¨ AOP ä¹‹åæˆ‘ä»¬å¯ä»¥æŠŠä¸€äº›é€šç”¨åŠŸèƒ½æŠ½è±¡å‡ºæ¥ï¼Œåœ¨éœ€è¦ç”¨åˆ°çš„åœ°æ–¹ç›´æ¥ä½¿ç”¨å³å¯ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§ç®€åŒ–ä»£ç é‡ã€‚æˆ‘ä»¬éœ€è¦å¢åŠ æ–°åŠŸèƒ½ä¹Ÿæ–¹ä¾¿ï¼Œæé«˜äº†ç³»ç»Ÿçš„æ‰©å±•æ€§ã€‚æ—¥å¿—åŠŸèƒ½ã€äº‹åŠ¡ç®¡ç†å’Œæƒé™ç®¡ç†ç­‰åœºæ™¯éƒ½ç”¨åˆ°äº† AOPã€‚</p><p>è¿™é‡Œåªè¦ä½ æåˆ°äº† AspectJï¼Œé‚£ä¹ˆé¢è¯•å®˜å¾ˆæœ‰å¯èƒ½ä¼šç»§ç»­é—®ï¼š</p><h2 id="9ã€Spring-AOP-å’Œ-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#9ã€Spring-AOP-å’Œ-AspectJ-AOP-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="9ã€Spring AOP å’Œ AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>9ã€Spring AOP å’Œ AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>Spring AOP æ˜¯å±äºè¿è¡Œæ—¶å¢å¼ºï¼Œè€Œ AspectJ æ˜¯ç¼–è¯‘æ—¶å¢å¼ºã€‚Spring AOP åŸºäºä»£ç†ï¼ˆProxyingï¼‰ï¼Œè€Œ AspectJ åŸºäºå­—èŠ‚ç æ“ä½œï¼ˆBytecode Manipulationï¼‰ã€‚</p><p>Spring AOP å·²ç»é›†æˆäº† AspectJï¼ŒAspectJ åº”è¯¥ç®—å¾—ä¸Šæ˜¯ Java ç”Ÿæ€ç³»ç»Ÿä¸­æœ€å®Œæ•´çš„ AOP æ¡†æ¶äº†ã€‚</p><p>AspectJ ç›¸æ¯”äº Spring AOP åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œä½†æ˜¯ Spring AOP ç›¸å¯¹æ¥è¯´æ›´ç®€å•ã€‚</p><p>å¦‚æœæˆ‘ä»¬çš„åˆ‡é¢æ¯”è¾ƒå°‘ï¼Œé‚£ä¹ˆä¸¤è€…æ€§èƒ½å·®å¼‚ä¸å¤§ã€‚ä½†æ˜¯ï¼Œå½“åˆ‡é¢å¤ªå¤šçš„è¯ï¼Œæœ€å¥½é€‰æ‹© AspectJï¼Œå®ƒæ¯” Spring AOP å¿«å¾ˆå¤šã€‚</p><p>å¯èƒ½è¿˜ä¼šç»§ç»­é—®ï¼š</p><h3 id="åœ¨-Spring-AOP-ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#åœ¨-Spring-AOP-ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="åœ¨ Spring AOP ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>åœ¨ Spring AOP ä¸­ï¼Œå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3><p>å…³æ³¨ç‚¹æ˜¯åº”ç”¨ä¸­ä¸€ä¸ªæ¨¡å—çš„è¡Œä¸ºï¼Œä¸€ä¸ªå…³æ³¨ç‚¹å¯èƒ½ä¼šè¢«å®šä¹‰æˆä¸€ä¸ªæˆ‘ä»¬æƒ³å®ç°çš„ä¸€ä¸ªåŠŸèƒ½ã€‚ æ¨ªåˆ‡å…³æ³¨ç‚¹æ˜¯ä¸€ä¸ªå…³æ³¨ç‚¹ï¼Œæ­¤å…³æ³¨ç‚¹æ˜¯æ•´ä¸ªåº”ç”¨éƒ½ä¼šä½¿ç”¨çš„åŠŸèƒ½ï¼Œå¹¶å½±å“æ•´ä¸ªåº”ç”¨ï¼Œæ¯”å¦‚æ—¥å¿—ï¼Œå®‰å…¨å’Œæ•°æ®ä¼ è¾“ï¼Œå‡ ä¹åº”ç”¨çš„æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦çš„åŠŸèƒ½ã€‚å› æ­¤è¿™äº›éƒ½å±äºæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚</p><p>é‚£ä»€ä¹ˆæ˜¯è¿æ¥ç‚¹å‘¢ï¼Ÿè¿æ¥ç‚¹ä»£è¡¨ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æŸä¸ªä½ç½®ï¼Œåœ¨è¿™ä¸ªä½ç½®æˆ‘ä»¬å¯ä»¥æ’å…¥ä¸€ä¸ª AOP åˆ‡é¢ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸ªåº”ç”¨ç¨‹åºæ‰§è¡Œ Spring AOP çš„ä½ç½®ã€‚åˆ‡å…¥ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿåˆ‡å…¥ç‚¹æ˜¯ä¸€ä¸ªæˆ–ä¸€ç»„è¿æ¥ç‚¹ï¼Œé€šçŸ¥å°†åœ¨è¿™äº›ä½ç½®æ‰§è¡Œã€‚å¯ä»¥é€šè¿‡è¡¨è¾¾å¼æˆ–åŒ¹é…çš„æ–¹å¼æŒ‡æ˜åˆ‡å…¥ç‚¹ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯é€šçŸ¥å‘¢ï¼Ÿæœ‰å“ªäº›ç±»å‹å‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é€šçŸ¥å‘¢ï¼Ÿæœ‰å“ªäº›ç±»å‹å‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é€šçŸ¥å‘¢ï¼Ÿæœ‰å“ªäº›ç±»å‹å‘¢ï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯é€šçŸ¥å‘¢ï¼Ÿæœ‰å“ªäº›ç±»å‹å‘¢ï¼Ÿ</strong></h3><p>é€šçŸ¥æ˜¯ä¸ªåœ¨æ–¹æ³•æ‰§è¡Œå‰æˆ–æ‰§è¡Œåè¦åšçš„åŠ¨ä½œï¼Œå®é™…ä¸Šæ˜¯ç¨‹åºæ‰§è¡Œæ—¶è¦é€šè¿‡ Spring AOP æ¡†æ¶è§¦å‘çš„ä»£ç æ®µã€‚</p><p>Spring åˆ‡é¢å¯ä»¥åº”ç”¨äº”ç§ç±»å‹çš„é€šçŸ¥ï¼š</p><ul><li><strong>beforeï¼š</strong> å‰ç½®é€šçŸ¥ï¼Œåœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå‰è¢«è°ƒç”¨ã€‚</li><li><strong>afterï¼š</strong> åœ¨æ–¹æ³•æ‰§è¡Œä¹‹åè°ƒç”¨çš„é€šçŸ¥ï¼Œæ— è®ºæ–¹æ³•æ‰§è¡Œæ˜¯å¦æˆåŠŸã€‚</li><li><strong>after-returningï¼š</strong> ä»…å½“æ–¹æ³•æˆåŠŸå®Œæˆåæ‰§è¡Œçš„é€šçŸ¥ã€‚</li><li><strong>after-throwingï¼š</strong> åœ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸é€€å‡ºæ—¶æ‰§è¡Œçš„é€šçŸ¥ã€‚</li><li><strong>aroundï¼š</strong> åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰å’Œä¹‹åè°ƒç”¨çš„é€šçŸ¥ã€‚</li></ul><h2 id="10ã€è¯´è¯´ä½ å¯¹-Spring-IOC-æ˜¯æ€ä¹ˆç†è§£çš„ï¼Ÿ"><a href="#10ã€è¯´è¯´ä½ å¯¹-Spring-IOC-æ˜¯æ€ä¹ˆç†è§£çš„ï¼Ÿ" class="headerlink" title="10ã€è¯´è¯´ä½ å¯¹ Spring IOC æ˜¯æ€ä¹ˆç†è§£çš„ï¼Ÿ"></a>10ã€è¯´è¯´ä½ å¯¹ Spring IOC æ˜¯æ€ä¹ˆç†è§£çš„ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰IOC å°±æ˜¯æ§åˆ¶åè½¬ï¼Œæ˜¯æŒ‡åˆ›å»ºå¯¹è±¡çš„æ§åˆ¶æƒçš„è½¬ç§»ã€‚ä»¥å‰åˆ›å»ºå¯¹è±¡çš„ä¸»åŠ¨æƒå’Œæ—¶æœºæ˜¯ç”±è‡ªå·±æŠŠæ§çš„ï¼Œè€Œç°åœ¨è¿™ç§æƒåŠ›è½¬ç§»åˆ° Springå®¹å™¨ä¸­ï¼Œå¹¶ç”±å®¹å™¨æ ¹æ®é…ç½®æ–‡ä»¶å»åˆ›å»ºå®ä¾‹å’Œç®¡ç†å„ä¸ªå®ä¾‹ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´æ¾æ•£è€¦åˆï¼Œä¹Ÿåˆ©äºåŠŸèƒ½çš„å¤ç”¨ã€‚DI ä¾èµ–æ³¨å…¥ï¼Œå’Œæ§åˆ¶åè½¬æ˜¯åŒä¸€ä¸ªæ¦‚å¿µçš„ä¸åŒè§’åº¦çš„æè¿°ï¼Œå³åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶ä¾èµ– IOC å®¹å™¨æ¥åŠ¨æ€æ³¨å…¥å¯¹è±¡éœ€è¦çš„å¤–éƒ¨èµ„æºã€‚</p><p>ï¼ˆ2ï¼‰æœ€ç›´è§‚çš„è¡¨è¾¾å°±æ˜¯ï¼ŒIOC è®©å¯¹è±¡çš„åˆ›å»ºä¸ç”¨å» new äº†ï¼Œå¯ä»¥ç”± spring è‡ªåŠ¨ç”Ÿäº§ï¼Œä½¿ç”¨ java çš„åå°„æœºåˆ¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„å»åˆ›å»ºå¯¹è±¡ä»¥åŠç®¡ç†å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„ã€‚</p><p>ï¼ˆ3ï¼‰Spring çš„ IOC æœ‰ä¸‰ç§æ³¨å…¥æ–¹å¼ ï¼šæ„é€ å™¨æ³¨å…¥ã€setteræ–¹æ³•æ³¨å…¥ã€æ ¹æ®æ³¨è§£æ³¨å…¥ã€‚</p><p>IOC è®©ç›¸äº’åä½œçš„ç»„ä»¶ä¿æŒæ¾æ•£çš„è€¦åˆï¼Œè€Œ AOP ç¼–ç¨‹å…è®¸ä½ æŠŠéå¸ƒäºåº”ç”¨å„å±‚çš„åŠŸèƒ½åˆ†ç¦»å‡ºæ¥å½¢æˆå¯é‡ç”¨çš„åŠŸèƒ½ç»„ä»¶ã€‚</p><h2 id="11ã€è§£é‡Šä¸€ä¸‹-spring-bean-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#11ã€è§£é‡Šä¸€ä¸‹-spring-bean-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="11ã€è§£é‡Šä¸€ä¸‹ spring bean çš„ç”Ÿå‘½å‘¨æœŸ"></a>11ã€è§£é‡Šä¸€ä¸‹ spring bean çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>é¦–å…ˆè¯´ä¸€ä¸‹ Servlet çš„ç”Ÿå‘½å‘¨æœŸï¼šå®ä¾‹åŒ–ï¼Œåˆå§‹ initï¼Œæ¥æ”¶è¯·æ±‚ serviceï¼Œé”€æ¯ destroyï¼›</p><p>Spring ä¸Šä¸‹æ–‡ä¸­çš„ Bean ç”Ÿå‘½å‘¨æœŸä¹Ÿç±»ä¼¼ï¼Œå¦‚ä¸‹ï¼š</p><h3 id="ï¼ˆ1ï¼‰å®ä¾‹åŒ–-Beanï¼š"><a href="#ï¼ˆ1ï¼‰å®ä¾‹åŒ–-Beanï¼š" class="headerlink" title="ï¼ˆ1ï¼‰å®ä¾‹åŒ– Beanï¼š"></a>ï¼ˆ1ï¼‰å®ä¾‹åŒ– Beanï¼š</h3><p>å¯¹äº BeanFactory å®¹å™¨ï¼Œå½“å®¢æˆ·å‘å®¹å™¨è¯·æ±‚ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ bean æ—¶ï¼Œæˆ–åˆå§‹åŒ– bean çš„æ—¶å€™éœ€è¦æ³¨å…¥å¦ä¸€ä¸ªå°šæœªåˆå§‹åŒ–çš„ä¾èµ–æ—¶ï¼Œå®¹å™¨å°±ä¼šè°ƒç”¨ createBean è¿›è¡Œå®ä¾‹åŒ–ã€‚å¯¹äº ApplicationContext å®¹å™¨ï¼Œå½“å®¹å™¨å¯åŠ¨ç»“æŸåï¼Œé€šè¿‡è·å– BeanDefinition å¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼Œå®ä¾‹åŒ–æ‰€æœ‰çš„ beanã€‚</p><h3 id="ï¼ˆ2ï¼‰è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ï¼š"><a href="#ï¼ˆ2ï¼‰è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ï¼š" class="headerlink" title="ï¼ˆ2ï¼‰è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ï¼š"></a>ï¼ˆ2ï¼‰è®¾ç½®å¯¹è±¡å±æ€§ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ï¼š</h3><p>å®ä¾‹åŒ–åçš„å¯¹è±¡è¢«å°è£…åœ¨ BeanWrapper å¯¹è±¡ä¸­ï¼Œç´§æ¥ç€ï¼ŒSpring æ ¹æ® BeanDefinition ä¸­çš„ä¿¡æ¯ä»¥åŠé€šè¿‡ BeanWrapper æä¾›çš„è®¾ç½®å±æ€§çš„æ¥å£å®Œæˆä¾èµ–æ³¨å…¥ã€‚</p><h3 id="ï¼ˆ3ï¼‰å¤„ç†-Aware-æ¥å£ï¼š"><a href="#ï¼ˆ3ï¼‰å¤„ç†-Aware-æ¥å£ï¼š" class="headerlink" title="ï¼ˆ3ï¼‰å¤„ç† Aware æ¥å£ï¼š"></a>ï¼ˆ3ï¼‰å¤„ç† Aware æ¥å£ï¼š</h3><p>æ¥ç€ï¼ŒSpring ä¼šæ£€æµ‹è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº† xxxAware æ¥å£ï¼Œå¹¶å°†ç›¸å…³çš„ xxxAware å®ä¾‹æ³¨å…¥ç»™ Beanï¼š</p><p>â‘ å¦‚æœè¿™ä¸ª Bean å·²ç»å®ç°äº† BeanNameAware æ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„ setBeanName(StringbeanId) æ–¹æ³•ï¼Œæ­¤å¤„ä¼ é€’çš„å°±æ˜¯ Spring é…ç½®æ–‡ä»¶ä¸­ Bean çš„ id å€¼ï¼›</p><p>â‘¡å¦‚æœè¿™ä¸ª Bean å·²ç»å®ç°äº† BeanFactoryAware æ¥å£ï¼Œä¼šè°ƒç”¨å®ƒå®ç°çš„ setBeanFactory() æ–¹æ³•ï¼Œä¼ é€’çš„æ˜¯ Spring å·¥å‚è‡ªèº«ã€‚</p><p>â‘¢å¦‚æœè¿™ä¸ª Bean å·²ç»å®ç°äº† ApplicationContextAware æ¥å£ï¼Œä¼šè°ƒç”¨ setApplicationContext(ApplicationContext) æ–¹æ³•ï¼Œä¼ å…¥ Spring ä¸Šä¸‹æ–‡ï¼›</p><h3 id="ï¼ˆ4ï¼‰BeanPostProcessorï¼š"><a href="#ï¼ˆ4ï¼‰BeanPostProcessorï¼š" class="headerlink" title="ï¼ˆ4ï¼‰BeanPostProcessorï¼š"></a>ï¼ˆ4ï¼‰BeanPostProcessorï¼š</h3><p>å¦‚æœæƒ³å¯¹ Bean è¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥è®© Bean å®ç°äº† BeanPostProcessor æ¥å£ï¼Œé‚£å°†ä¼šè°ƒç”¨postProcessBeforeInitialization(Object obj, String s) æ–¹æ³•ã€‚</p><h3 id="ï¼ˆ5ï¼‰InitializingBean-ä¸-init-methodï¼š"><a href="#ï¼ˆ5ï¼‰InitializingBean-ä¸-init-methodï¼š" class="headerlink" title="ï¼ˆ5ï¼‰InitializingBean ä¸ init - methodï¼š"></a>ï¼ˆ5ï¼‰InitializingBean ä¸ init - methodï¼š</h3><p>å¦‚æœ Bean åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­é…ç½®äº† init - method å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„åˆå§‹åŒ–æ–¹æ³•ã€‚</p><h3 id="ï¼ˆ6ï¼‰å¦‚æœè¿™ä¸ªBeanå®ç°äº†-BeanPostProcessor-æ¥å£ï¼š"><a href="#ï¼ˆ6ï¼‰å¦‚æœè¿™ä¸ªBeanå®ç°äº†-BeanPostProcessor-æ¥å£ï¼š" class="headerlink" title="ï¼ˆ6ï¼‰å¦‚æœè¿™ä¸ªBeanå®ç°äº† BeanPostProcessor æ¥å£ï¼š"></a>ï¼ˆ6ï¼‰å¦‚æœè¿™ä¸ªBeanå®ç°äº† BeanPostProcessor æ¥å£ï¼š</h3><p>å°†ä¼šè°ƒç”¨ postProcessAfterInitialization(Object obj, String s) æ–¹æ³•ï¼›ç”±äºè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨ Bean åˆå§‹åŒ–ç»“æŸæ—¶è°ƒç”¨çš„ï¼Œæ‰€ä»¥å¯ä»¥è¢«åº”ç”¨äºå†…å­˜æˆ–ç¼“å­˜æŠ€æœ¯ï¼›</p><p>ä»¥ä¸Šå‡ ä¸ªæ­¥éª¤å®Œæˆåï¼ŒBeanå°±å·²ç»è¢«æ­£ç¡®åˆ›å»ºäº†ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ª Bean äº†ã€‚</p><h3 id="ï¼ˆ7ï¼‰DisposableBeanï¼š"><a href="#ï¼ˆ7ï¼‰DisposableBeanï¼š" class="headerlink" title="ï¼ˆ7ï¼‰DisposableBeanï¼š"></a>ï¼ˆ7ï¼‰DisposableBeanï¼š</h3><p>å½“ Bean ä¸å†éœ€è¦æ—¶ï¼Œä¼šç»è¿‡æ¸…ç†é˜¶æ®µï¼Œå¦‚æœ Bean å®ç°äº† DisposableBean è¿™ä¸ªæ¥å£ï¼Œä¼šè°ƒç”¨å…¶å®ç°çš„ destroy() æ–¹æ³•ï¼›</p><h3 id="ï¼ˆ8ï¼‰destroy-methodï¼š"><a href="#ï¼ˆ8ï¼‰destroy-methodï¼š" class="headerlink" title="ï¼ˆ8ï¼‰destroy - methodï¼š"></a>ï¼ˆ8ï¼‰destroy - methodï¼š</h3><p>æœ€åï¼Œå¦‚æœè¿™ä¸ª Bean çš„ Spring é…ç½®ä¸­é…ç½®äº† destroy - method å±æ€§ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å…¶é…ç½®çš„é”€æ¯æ–¹æ³•ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/a02019f873870712a311db2521504882645325325.png">â€‹</p><h2 id="12ã€è§£é‡Š-Spring-æ”¯æŒçš„å‡ ç§-bean-çš„ä½œç”¨åŸŸï¼Ÿ"><a href="#12ã€è§£é‡Š-Spring-æ”¯æŒçš„å‡ ç§-bean-çš„ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="12ã€è§£é‡Š Spring æ”¯æŒçš„å‡ ç§ bean çš„ä½œç”¨åŸŸï¼Ÿ"></a>12ã€è§£é‡Š Spring æ”¯æŒçš„å‡ ç§ bean çš„ä½œç”¨åŸŸï¼Ÿ</h2><p>Spring å®¹å™¨ä¸­çš„ bean å¯ä»¥åˆ†ä¸º5ä¸ªèŒƒå›´ï¼š</p><p>ï¼ˆ1ï¼‰singletonï¼šé»˜è®¤ï¼Œæ¯ä¸ªå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªbean çš„å®ä¾‹ï¼Œå•ä¾‹çš„æ¨¡å¼ç”± BeanFactory è‡ªèº«æ¥ç»´æŠ¤ã€‚</p><p>ï¼ˆ2ï¼‰prototypeï¼šä¸ºæ¯ä¸€ä¸ª bean è¯·æ±‚æä¾›ä¸€ä¸ªå®ä¾‹ã€‚</p><p>ï¼ˆ3ï¼‰requestï¼šä¸ºæ¯ä¸€ä¸ªç½‘ç»œè¯·æ±‚åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œåœ¨è¯·æ±‚å®Œæˆä»¥åï¼Œbean ä¼šå¤±æ•ˆå¹¶è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚</p><p>ï¼ˆ4ï¼‰sessionï¼šä¸ request èŒƒå›´ç±»ä¼¼ï¼Œç¡®ä¿æ¯ä¸ª session ä¸­æœ‰ä¸€ä¸ª bean çš„å®ä¾‹ï¼Œåœ¨ session è¿‡æœŸåï¼Œbean ä¼šéšä¹‹å¤±æ•ˆã€‚</p><p>ï¼ˆ5ï¼‰global - sessionï¼šå…¨å±€ä½œç”¨åŸŸï¼Œglobal - session å’Œ Portlet åº”ç”¨ç›¸å…³ã€‚å½“ä½ çš„åº”ç”¨éƒ¨ç½²åœ¨ Portlet å®¹å™¨ä¸­å·¥ä½œæ—¶ï¼Œå®ƒåŒ…å«å¾ˆå¤športletã€‚å¦‚æœä½ æƒ³è¦å£°æ˜è®©æ‰€æœ‰çš„ portlet å…±ç”¨å…¨å±€çš„å­˜å‚¨å˜é‡çš„è¯ï¼Œé‚£ä¹ˆè¿™å…¨å±€å˜é‡éœ€è¦å­˜å‚¨åœ¨ global - session ä¸­ã€‚å…¨å±€ä½œç”¨åŸŸä¸Servlet ä¸­çš„ session ä½œç”¨åŸŸæ•ˆæœç›¸åŒã€‚</p><h2 id="13ã€Spring-åŸºäº-xml-æ³¨å…¥-bean-çš„å‡ ç§æ–¹å¼ï¼Ÿ"><a href="#13ã€Spring-åŸºäº-xml-æ³¨å…¥-bean-çš„å‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="13ã€Spring åŸºäº xml æ³¨å…¥ bean çš„å‡ ç§æ–¹å¼ï¼Ÿ"></a>13ã€Spring åŸºäº xml æ³¨å…¥ bean çš„å‡ ç§æ–¹å¼ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰Set æ–¹æ³•æ³¨å…¥ï¼›</p><p>ï¼ˆ2ï¼‰æ„é€ å™¨æ³¨å…¥ï¼šâ‘ é€šè¿‡ index è®¾ç½®å‚æ•°çš„ä½ç½®ï¼›â‘¡é€šè¿‡ type è®¾ç½®å‚æ•°ç±»å‹ï¼›</p><p>ï¼ˆ3ï¼‰é™æ€å·¥å‚æ³¨å…¥ï¼›</p><p>ï¼ˆ4ï¼‰å®ä¾‹å·¥å‚ï¼›</p><p>é€šå¸¸å›ç­”å‰é¢ä¸¤ç§å³å¯ï¼Œå› ä¸ºåé¢ä¸¤ç§å¾ˆå¤šäººéƒ½ä¸å¤ªä¼šï¼Œä¸ä¼šçš„å°±ä¸è¦è¯´å‡ºæ¥ï¼Œä¸ç„¶é—®åˆ°ä½ ä¸ä¼šå°±å°´å°¬äº†ã€‚</p><h2 id="14ã€Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#14ã€Spring-æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="14ã€Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>14ã€Spring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h2><p>è¿™æ˜¯ä¸€é“ç›¸å¯¹æœ‰éš¾åº¦çš„é¢˜ç›®ï¼Œä½ ä¸ä»…è¦å›è®¾è®¡æ¨¡å¼ï¼Œè¿˜è¦çŸ¥é“æ¯ä¸ªè®¾è®¡æ¨¡å¼åœ¨ Spring ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚</p><p><strong>ç®€å•å·¥å‚æ¨¡å¼</strong>ï¼šSpring ä¸­çš„ BeanFactory å°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„ä½“ç°ã€‚æ ¹æ®ä¼ å…¥ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†æ¥è·å¾— Bean å¯¹è±¡ï¼Œä½†æ˜¯åœ¨ä¼ å…¥å‚æ•°ååˆ›å»ºè¿˜æ˜¯ä¼ å…¥å‚æ•°å‰åˆ›å»ºï¼Œè¦æ ¹æ®å…·ä½“æƒ…å†µæ¥å®šã€‚</p><p><strong>å·¥å‚æ¨¡å¼</strong>ï¼šSpring ä¸­çš„ FactoryBean å°±æ˜¯å…¸å‹çš„å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œå®ç°äº† FactoryBean æ¥å£çš„ bean æ˜¯ä¸€ç±»å«åš factory çš„ beanã€‚å…¶ç‰¹ç‚¹æ˜¯ï¼Œspring åœ¨ä½¿ç”¨ getBean() è°ƒç”¨è·å¾—è¯¥ bean æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¯¥ bean çš„ getObject() æ–¹æ³•ï¼Œæ‰€ä»¥è¿”å›çš„ä¸æ˜¯ factory è¿™ä¸ª beanï¼Œè€Œæ˜¯è¿™ä¸ª bean.getOjbect() æ–¹æ³•çš„è¿”å›å€¼ã€‚</p><p><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šåœ¨ spring ä¸­ç”¨åˆ°çš„å•ä¾‹æ¨¡å¼æœ‰ï¼š scope&#x3D;â€singletonâ€ ï¼Œæ³¨å†Œå¼å•ä¾‹æ¨¡å¼ï¼Œbean å­˜æ”¾äº Map ä¸­ã€‚bean name å½“åš keyï¼Œbean å½“åš valueã€‚</p><p><strong>åŸå‹æ¨¡å¼</strong>ï¼šåœ¨ spring ä¸­ç”¨åˆ°çš„åŸå‹æ¨¡å¼æœ‰ï¼š scope&#x3D;â€prototypeâ€ ï¼Œæ¯æ¬¡è·å–çš„æ˜¯é€šè¿‡å…‹éš†ç”Ÿæˆçš„æ–°å®ä¾‹ï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹æ—¶å¯¹åŸæœ‰å®ä¾‹å¯¹è±¡ä¸é€ æˆä»»ä½•å½±å“ã€‚</p><p><strong>è¿­ä»£å™¨æ¨¡å¼</strong>ï¼šåœ¨ Spring ä¸­æœ‰ä¸ª CompositeIterator å®ç°äº† Iteratorï¼ŒIterable æ¥å£å’Œ Iterator æ¥å£ï¼Œè¿™ä¸¤ä¸ªéƒ½æ˜¯è¿­ä»£ç›¸å…³çš„æ¥å£ã€‚å¯ä»¥è¿™ä¹ˆè®¤ä¸ºï¼Œå®ç°äº† Iterable æ¥å£ï¼Œåˆ™è¡¨ç¤ºæŸä¸ªå¯¹è±¡æ˜¯å¯è¢«è¿­ä»£çš„ã€‚Iterator æ¥å£ç›¸å½“äºæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå®ç°äº† Iterator æ¥å£ï¼Œç­‰äºå…·ä½“å®šä¹‰äº†è¿™ä¸ªå¯è¢«è¿­ä»£çš„å¯¹è±¡æ—¶å¦‚ä½•è¿›è¡Œè¿­ä»£çš„ã€‚</p><p><strong>ä»£ç†æ¨¡å¼</strong>ï¼šSpring ä¸­ç»å…¸çš„ AOPï¼Œå°±æ˜¯ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç°çš„ï¼Œåˆ† JDK å’Œ CGlib åŠ¨æ€ä»£ç†ã€‚</p><p><strong>é€‚é…å™¨æ¨¡å¼</strong>ï¼šSpring ä¸­çš„ AOP ä¸­ <code>AdvisorAdapter</code>â€‹ ç±»ï¼Œå®ƒæœ‰ä¸‰ä¸ªå®ç°ï¼š</p><p><code>MethodBeforAdviceAdapter</code>â€‹ã€<code>AfterReturnningAdviceAdapter</code>â€‹ã€<code>ThrowsAdviceAdapter</code>â€‹ã€‚Spring ä¼šæ ¹æ®ä¸åŒçš„ AOP é…ç½®æ¥ä½¿ç”¨å¯¹åº”çš„ Adviceï¼Œä¸ç­–ç•¥æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œä¸€ä¸ªæ–¹æ³•å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ª Adviceã€‚Spring å­˜åœ¨å¾ˆå¤šä»¥ Adapter ç»“å°¾çš„ï¼Œå¤§å¤šæ•°éƒ½æ˜¯é€‚é…å™¨æ¨¡å¼ã€‚</p><p><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šSpring ä¸­çš„ Event å’Œ Listenerã€‚spring äº‹ä»¶ï¼šApplicationEventï¼Œè¯¥æŠ½è±¡ç±»ç»§æ‰¿äº† EventObject ç±»ï¼ŒJDK å»ºè®®æ‰€æœ‰çš„äº‹ä»¶éƒ½åº”è¯¥ç»§æ‰¿è‡ª EventObjectã€‚spring äº‹ä»¶ç›‘å¬å™¨ï¼šApplicationListenerï¼Œè¯¥æ¥å£ç»§æ‰¿äº† EventListener æ¥å£ï¼ŒJDK å»ºè®®æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨éƒ½åº”è¯¥ç»§æ‰¿ EventListenerã€‚</p><p><strong>æ¨¡æ¿æ¨¡å¼</strong>ï¼šSpring ä¸­çš„ org.springframework.jdbc.core.JdbcTemplate å°±æ˜¯éå¸¸ç»å…¸çš„æ¨¡æ¿æ¨¡å¼çš„åº”ç”¨ï¼Œé‡Œé¢çš„ execute æ–¹æ³•ï¼ŒæŠŠæ•´ä¸ªç®—æ³•æ­¥éª¤éƒ½å®šä¹‰å¥½äº†ã€‚</p><p><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šDispatcherServlet ä¸­çš„ doDispatch() æ–¹æ³•ä¸­è·å–ä¸è¯·æ±‚åŒ¹é…çš„å¤„ç†å™¨ HandlerExecutionChainï¼Œthis.getHandler() æ–¹æ³•çš„å¤„ç†ä½¿ç”¨åˆ°äº†è´£ä»»é“¾æ¨¡å¼ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œåªæ˜¯åˆ—ä¸¾äº†éƒ¨åˆ†è®¾è®¡æ¨¡å¼ï¼Œå…¶å®é‡Œé¢ç”¨åˆ°äº†è¿˜æœ‰äº«å…ƒæ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ç­‰ã€‚å¯é€‰æ‹©æ€§çš„å›ç­”ï¼Œä¸»è¦æ˜¯æ€•ä½ å›ç­”äº†è¿­ä»£å™¨æ¨¡å¼ï¼Œç„¶åç»§ç»­é—®ä½ ï¼Œç»“æœä½ ä¸€é—®ä¸‰ä¸çŸ¥ï¼Œé‚£å°±å°´äº†å°¬äº†ã€‚</p><h2 id="15ã€è¯´è¯´-Spring-ä¸­-ApplicationContext-å’Œ-BeanFactory-çš„åŒºåˆ«"><a href="#15ã€è¯´è¯´-Spring-ä¸­-ApplicationContext-å’Œ-BeanFactory-çš„åŒºåˆ«" class="headerlink" title="15ã€è¯´è¯´ Spring ä¸­ ApplicationContext å’Œ BeanFactory çš„åŒºåˆ«"></a>15ã€è¯´è¯´ Spring ä¸­ ApplicationContext å’Œ BeanFactory çš„åŒºåˆ«</h2><p><strong>ç±»å›¾</strong></p><p><img src="https://i0.hdslb.com/bfs/article/98525f1dc93d0d20ad6e6b70eee412c2645325325.png">â€‹</p><p><strong>åŒ…ç›®å½•ä¸åŒ</strong></p><p>spring-beans.jar ä¸­ org.springframework.beans.factory.BeanFactory</p><p>spring-context.jar ä¸­ org.springframework.context.ApplicationContext</p><p><strong>å›½é™…åŒ–</strong></p><p>BeanFactory æ˜¯ä¸æ”¯æŒå›½é™…åŒ–åŠŸèƒ½çš„ï¼Œå› ä¸º BeanFactory æ²¡æœ‰æ‰©å±• Spring ä¸­ MessageResource æ¥å£ã€‚ç›¸åï¼Œç”±äº ApplicationContext æ‰©å±•äº† MessageResource æ¥å£ï¼Œå› è€Œå…·æœ‰æ¶ˆæ¯å¤„ç†çš„èƒ½åŠ›ï¼ˆi18Nï¼‰ã€‚</p><p><strong>å¼ºå¤§çš„äº‹ä»¶æœºåˆ¶ï¼ˆEventï¼‰</strong></p><p>åŸºæœ¬ä¸Šç‰µæ¶‰åˆ°äº‹ä»¶ï¼ˆEventï¼‰æ–¹é¢çš„è®¾è®¡ï¼Œå°±ç¦»ä¸å¼€è§‚å¯Ÿè€…æ¨¡å¼ï¼ŒApplicationContext çš„äº‹ä»¶æœºåˆ¶ä¸»è¦é€šè¿‡ ApplicationEvent å’Œ ApplicationListener è¿™ä¸¤ä¸ªæ¥å£æ¥æä¾›çš„ï¼Œå’Œ Java swing ä¸­çš„äº‹ä»¶æœºåˆ¶ä¸€æ ·ã€‚å³å½“ ApplicationContext ä¸­å‘å¸ƒä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œæ‰€æœ‰æ‰©å±•äº† ApplicationListener çš„ Bean éƒ½å°†æ¥å—åˆ°è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚</p><p><strong>åº•å±‚èµ„æºçš„è®¿é—®</strong></p><p>ApplicationContext æ‰©å±•äº† ResourceLoaderï¼ˆèµ„æºåŠ è½½å™¨ï¼‰æ¥å£ï¼Œä»è€Œå¯ä»¥ç”¨æ¥åŠ è½½å¤šä¸ª Resourceï¼Œè€Œ BeanFactory æ˜¯æ²¡æœ‰æ‰©å±• ResourceLoaderã€‚</p><p><strong>å¯¹</strong> <strong>Web</strong> <strong>åº”ç”¨çš„æ”¯æŒ</strong></p><p>ä¸ BeanFactory é€šå¸¸ä»¥ç¼–ç¨‹çš„æ–¹å¼è¢«åˆ›å»ºï¼ŒApplicationContext èƒ½ä»¥å£°æ˜çš„æ–¹å¼åˆ›å»ºï¼Œå¦‚ä½¿ç”¨ ContextLoaderã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ ApplicationContext çš„å®ç°æ–¹å¼ä¹‹ä¸€ï¼Œä»¥ç¼–ç¨‹çš„æ–¹å¼åˆ›å»º ApplicationContext å®ä¾‹ã€‚</p><p><strong>å»¶è¿ŸåŠ è½½</strong></p><ol><li>BeanFactroy é‡‡ç”¨çš„æ˜¯å»¶è¿ŸåŠ è½½å½¢å¼æ¥æ³¨å…¥ Bean çš„ï¼Œå³åªæœ‰åœ¨ä½¿ç”¨åˆ°æŸä¸ª Bean æ—¶(è°ƒç”¨ getBean())ï¼Œæ‰å¯¹è¯¥ Bean è¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›å­˜åœ¨çš„ spring çš„é…ç½®é—®é¢˜ã€‚è€Œ ApplicationContext åˆ™ç›¸åï¼Œå®ƒæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€æ¬¡æ€§åˆ›å»ºäº†æ‰€æœ‰çš„ Beanã€‚è¿™æ ·ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç° Spring ä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯ã€‚</li><li>BeanFactory å’Œ ApplicationContext éƒ½æ”¯æŒ BeanPostProcessorã€BeanFactoryPostProcessor çš„ä½¿ç”¨ã€‚ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«æ˜¯ï¼šBeanFactory éœ€è¦æ‰‹åŠ¨æ³¨å†Œï¼Œè€Œ ApplicationContext åˆ™æ˜¯è‡ªåŠ¨æ³¨å†Œã€‚</li></ol><p>å¯ä»¥çœ‹åˆ°ï¼ŒApplicationContext ç»§æ‰¿äº† BeanFactoryï¼ŒBeanFactory æ˜¯ Spring ä¸­æ¯”è¾ƒåŸå§‹çš„ Factoryï¼Œå®ƒä¸æ”¯æŒ AOPã€Web ç­‰ Spring æ’ä»¶ã€‚è€Œ ApplicationContext ä¸ä»…åŒ…å«äº† BeanFactory çš„æ‰€æœ‰åŠŸèƒ½ï¼Œè¿˜æ”¯æŒ Spring çš„å„ç§æ’ä»¶ï¼Œè¿˜ä»¥ä¸€ç§é¢å‘æ¡†æ¶çš„æ–¹å¼å·¥ä½œä»¥åŠå¯¹ä¸Šä¸‹æ–‡è¿›è¡Œåˆ†å±‚å’Œå®ç°ç»§æ‰¿ã€‚</p><p>BeanFactory æ˜¯ Spring æ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œé¢å‘ Spring æœ¬èº«ï¼›è€Œ ApplicationContext é¢å‘ä½¿ç”¨ Spring çš„å¼€å‘è€…ï¼Œç›¸æ¯” BeanFactory æä¾›äº†æ›´å¤šé¢å‘å®é™…åº”ç”¨çš„åŠŸèƒ½ï¼Œå‡ ä¹æ‰€æœ‰åœºåˆéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ ApplicationContextï¼Œè€Œä¸æ˜¯åº•å±‚çš„ BeanFactoryã€‚</p><p><strong>å¸¸ç”¨å®¹å™¨</strong></p><p>BeanFactory ç±»å‹çš„æœ‰ XmlBeanFactoryï¼Œå®ƒå¯ä»¥æ ¹æ® XML æ–‡ä»¶ä¸­å®šä¹‰çš„å†…å®¹ï¼Œåˆ›å»ºç›¸åº”çš„ Beanã€‚</p><p>ApplicationContext ç±»å‹çš„å¸¸ç”¨å®¹å™¨æœ‰ï¼š</p><ol><li>ClassPathXmlApplicationContextï¼šä» ClassPath çš„ XML é…ç½®æ–‡ä»¶ä¸­è¯»å–ä¸Šä¸‹æ–‡ï¼Œå¹¶ç”Ÿæˆä¸Šä¸‹æ–‡å®šä¹‰ã€‚åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä»ç¨‹åºç¯å¢ƒå˜é‡ä¸­å–å¾—ã€‚</li><li>FileSystemXmlApplicationContextï¼šç”±æ–‡ä»¶ç³»ç»Ÿä¸­çš„ XML é…ç½®æ–‡ä»¶è¯»å–ä¸Šä¸‹æ–‡ã€‚</li><li>XmlWebApplicationContextï¼šç”± Web åº”ç”¨çš„ XML æ–‡ä»¶è¯»å–ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨ Spring MVC ä½¿ç”¨çš„æƒ…å†µã€‚</li></ol><h2 id="16ã€Spring-æ¡†æ¶ä¸­çš„å•ä¾‹-Bean-æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ"><a href="#16ã€Spring-æ¡†æ¶ä¸­çš„å•ä¾‹-Bean-æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ" class="headerlink" title="16ã€Spring æ¡†æ¶ä¸­çš„å•ä¾‹ Bean æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ"></a>16ã€Spring æ¡†æ¶ä¸­çš„å•ä¾‹ Bean æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ</h2><p>Spring æ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹ Bean è¿›è¡Œä»»ä½•å¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚</p><p>å…³äºå•ä¾‹ Bean çš„çº¿ç¨‹å®‰å…¨å’Œå¹¶å‘é—®é¢˜ï¼Œéœ€è¦å¼€å‘è€…è‡ªè¡Œå»æå®šã€‚</p><p>å•ä¾‹çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¹¶ä¸æ˜¯ Spring åº”è¯¥å»å…³å¿ƒçš„ã€‚Spring åº”è¯¥åšçš„æ˜¯ï¼Œæä¾›æ ¹æ®é…ç½®ï¼Œåˆ›å»ºå•ä¾‹ Bean æˆ–å¤šä¾‹ Bean çš„åŠŸèƒ½ã€‚å½“ç„¶ï¼Œä½†å®é™…ä¸Šï¼Œå¤§éƒ¨åˆ†çš„ Spring Bean å¹¶æ²¡æœ‰å¯å˜çš„çŠ¶æ€ï¼Œæ‰€ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šè¯´ Spring çš„å•ä¾‹ Bean æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœä½ çš„ Bean æœ‰å¤šç§çŠ¶æ€çš„è¯ï¼Œå°±éœ€è¦è‡ªè¡Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚æœ€æµ…æ˜¾çš„è§£å†³åŠæ³•ï¼Œå°±æ˜¯å°†å¤šæ€ Bean çš„ä½œç”¨åŸŸï¼ˆScopeï¼‰ç”± Singleton å˜æ›´ä¸º Prototypeã€‚</p><h2 id="17ã€Spring-æ˜¯æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„ï¼Ÿ"><a href="#17ã€Spring-æ˜¯æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„ï¼Ÿ" class="headerlink" title="17ã€Spring æ˜¯æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„ï¼Ÿ"></a>17ã€Spring æ˜¯æ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–çš„ï¼Ÿ</h2><p><strong>å¾ªç¯ä¾èµ–</strong></p><p><strong>å®šä¹‰ï¼š</strong> å¾ªç¯ä¾èµ–å…¶å®å°±æ˜¯å¾ªç¯å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ bean å¯¹è±¡äº’ç›¸æŒæœ‰å¯¹æ–¹ï¼Œæœ€ç»ˆå½¢æˆé—­ç¯ã€‚æ¯”å¦‚ A ä¾èµ– Bï¼ŒB ä¾èµ– Cï¼ŒC åˆä¾èµ– Aï¼Œå½¢æˆå¾ªç¯ä¾èµ–</p><p><strong>å‡ºç°åœºæ™¯ï¼š</strong> 1ã€æ„é€ å™¨çš„å¾ªç¯ä¾èµ– 2ã€Filed å±æ€§çš„å¾ªç¯ä¾èµ–</p><p><strong>å¦‚ä½•æ£€æµ‹ï¼š</strong> åœ¨åˆ›å»º Bean çš„æ—¶å€™å¯ä»¥ç»™è¯¥ Bean æ‰“æ ‡ç­¾ï¼Œå¦‚æœé€’å½’è°ƒç”¨å›æ¥å‘ç°æ­£åœ¨åˆ›å»ºä¸­çš„è¯ï¼Œå³è¯´æ˜å‘ç”Ÿäº†å¾ªç¯ä¾èµ–</p><p><strong>Spring å•ä¾‹å¯¹è±¡åˆå§‹åŒ–æ­¥éª¤ï¼š</strong></p><p>1ã€createBeanInstance å®ä¾‹åŒ–ï¼šè°ƒç”¨å¯¹è±¡çš„æ„é€ æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡</p><p>2ã€populateBean å±æ€§å¡«å……ï¼šè¿™ä¸€æ­¥ä¸»è¦æ˜¯å¯¹å¤š Bean çš„ä¾èµ–å±æ€§è¿›è¡Œå¡«å……</p><p>3ã€initializeBean åˆå§‹åŒ–ï¼šè°ƒç”¨applicationContext.xml ä¸­çš„åˆå§‹åŒ–æ–¹æ³•</p><p><strong>å¦‚ä½•è§£å†³ï¼š</strong></p><p>ä½¿ç”¨ä¸‰çº§ç¼“å­˜</p><p>singletonFactoriesï¼šå•ä¾‹å¯¹è±¡å·¥å‚çš„ cache ç¼“å­˜<br>earlySingletonObjectsï¼šæå‰æ›å…‰çš„å•ä¾‹å¯¹è±¡çš„ cache ç¼“å­˜<br>singletonObjectsï¼šå•ä¾‹å¯¹è±¡çš„ cache ç¼“å­˜</p><p>Spring é¦–å…ˆä»ä¸€çº§ç¼“å­˜ singletonObjects ä¸­è·å–å¯¹è±¡ï¼Œå¦‚æœè·å–ä¸åˆ°å¹¶ä¸”å¯¹è±¡æ­£åœ¨åˆ›å»ºä¸­ï¼Œå°±å†ä»äºŒçº§å­˜ earlySingletonObiects ä¸­è·å–ï¼Œå¦‚æœè¿˜æ˜¯è·å–ä¸åˆ°ä¸”å…è®¸ singletonFactories é€šè¿‡ getObiect() è·å–ï¼Œå°±ä»ä¸‰çº§ç¼“å­˜ singletonFactory ä¸­è·å–ï¼Œå¦‚æœè·å–åˆ°äº†å°±ä»singletonFactories ä¸‰çº§ç¼“å­˜ä¸­ç§»é™¤æ‰ï¼Œå¹¶æ”¾å…¥ earlySingletonObiects ä¸­ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä»ä¸‰çº§ç¼“å­˜ç§»åˆ°äº†äºŒçº§ç¼“å­˜ä¸­</p><p><strong>æ„é€ å™¨çš„å¾ªç¯ä¾èµ–é—®é¢˜æ— æ³•è§£å†³ï¼Œéœ€é€šè¿‡æ‡’åŠ è½½</strong></p><p>æ•´ä¸ªæµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><ol><li>é¦–å…ˆ A å®Œæˆåˆå§‹åŒ–ç¬¬ä¸€æ­¥å¹¶å°†è‡ªå·± <strong>æå‰æ›å…‰</strong> å‡ºæ¥ï¼ˆé€šè¿‡ ObjectFactory å°†è‡ªå·±æå‰æ›å…‰ï¼‰ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå‘ç°è‡ªå·±ä¾èµ–å¯¹è±¡ Bï¼Œæ­¤æ—¶å°±ä¼šå»å°è¯• get(B)ï¼Œè¿™ä¸ªæ—¶å€™å‘ç° B è¿˜æ²¡æœ‰è¢«åˆ›å»ºå‡ºæ¥ï¼›</li><li>ç„¶å B å°±èµ°åˆ›å»ºæµç¨‹ï¼Œåœ¨ B åˆå§‹åŒ–çš„æ—¶å€™ï¼ŒåŒæ ·å‘ç°è‡ªå·±ä¾èµ– Cï¼ŒC ä¹Ÿæ²¡æœ‰è¢«åˆ›å»ºå‡ºæ¥ï¼›</li><li>è¿™ä¸ªæ—¶å€™ C åˆå¼€å§‹åˆå§‹åŒ–è¿›ç¨‹ï¼Œä½†æ˜¯åœ¨åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­å‘ç°è‡ªå·±ä¾èµ– Aï¼Œäºæ˜¯å°è¯• get(A)ã€‚è¿™ä¸ªæ—¶å€™ç”±äº A å·²ç»æ·»åŠ è‡³ç¼“å­˜ä¸­ï¼ˆä¸€èˆ¬éƒ½æ˜¯æ·»åŠ è‡³ä¸‰çº§ç¼“å­˜ singletonFactoriesï¼‰ï¼Œé€šè¿‡ ObjectFactory æå‰æ›å…‰ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ ObjectFactory#getObject() æ–¹æ³•æ¥æ‹¿åˆ° A å¯¹è±¡ã€‚C æ‹¿åˆ° A å¯¹è±¡åé¡ºåˆ©å®Œæˆåˆå§‹åŒ–ï¼Œç„¶åå°†è‡ªå·±æ·»åŠ åˆ°ä¸€çº§ç¼“å­˜ä¸­ï¼›</li><li>å›åˆ° Bï¼ŒB ä¹Ÿå¯ä»¥æ‹¿åˆ° C å¯¹è±¡ï¼Œå®Œæˆåˆå§‹åŒ–ï¼ŒA å¯ä»¥é¡ºåˆ©æ‹¿åˆ° B å®Œæˆåˆå§‹åŒ–ã€‚åˆ°è¿™é‡Œæ•´ä¸ªé“¾è·¯å°±å·²ç»å®Œæˆäº†åˆå§‹åŒ–è¿‡ç¨‹äº†ã€‚</li></ol><p>å…³é”®å­—ï¼šä¸‰çº§ç¼“å­˜ï¼Œæå‰æ›å…‰ã€‚</p><h2 id="18ã€è¯´è¯´äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#18ã€è¯´è¯´äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="18ã€è¯´è¯´äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>18ã€è¯´è¯´äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h2><p>æœªæäº¤è¯»ï¼ˆRead Uncommittedï¼‰ï¼šå…è®¸è„è¯»ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½è¯»å–åˆ°å…¶ä»–ä¼šè¯ä¸­æœªæäº¤äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®</p><p>æäº¤è¯»ï¼ˆRead Committedï¼‰ï¼šåªèƒ½è¯»å–åˆ°å·²ç»æäº¤çš„æ•°æ®ã€‚Oracle ç­‰å¤šæ•°æ•°æ®åº“é»˜è®¤éƒ½æ˜¯è¯¥çº§åˆ« (ä¸é‡å¤è¯»)</p><p>å¯é‡å¤è¯»ï¼ˆRepeated Readï¼‰ï¼šåœ¨åŒä¸€ä¸ªäº‹åŠ¡å†…çš„æŸ¥è¯¢éƒ½æ˜¯äº‹åŠ¡å¼€å§‹æ—¶åˆ»ä¸€è‡´çš„ï¼ŒMySQL çš„ InnoDB é»˜è®¤çº§åˆ«ã€‚åœ¨ SQL æ ‡å‡†ä¸­ï¼Œè¯¥éš”ç¦»çº§åˆ«æ¶ˆé™¤äº†ä¸å¯é‡å¤è¯»ï¼Œä½†æ˜¯è¿˜å­˜åœ¨å¹»è¯»ï¼ˆå¤šä¸ªäº‹åŠ¡åŒæ—¶ä¿®æ”¹åŒä¸€æ¡è®°å½•ï¼Œäº‹åŠ¡ä¹‹é—´ä¸çŸ¥é“å½¼æ­¤å­˜åœ¨ï¼Œå½“äº‹åŠ¡æäº¤ä¹‹åï¼Œåé¢çš„äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®å°†ä¼šè¦†ç›–å‰äº‹åŠ¡ï¼Œå‰ä¸€ä¸ªäº‹åŠ¡å°±åƒå‘ç”Ÿå¹»è§‰ä¸€æ ·ï¼‰</p><p>å¯ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ï¼šå®Œå…¨ä¸²è¡ŒåŒ–çš„è¯»ï¼Œæ¯æ¬¡è¯»éƒ½éœ€è¦è·å¾—è¡¨çº§å…±äº«é”ï¼Œè¯»å†™ç›¸äº’éƒ½ä¼šé˜»å¡ã€‚</p><table><thead><tr><th>äº‹åŠ¡éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>è¯»æœªæäº¤</td><td>å…è®¸</td><td>å…è®¸</td><td>å…è®¸</td></tr><tr><td>è¯»å·²æäº¤</td><td>ç¦æ­¢</td><td>å…è®¸</td><td>å…è®¸</td></tr><tr><td>å¯é‡å¤è¯»</td><td>ç¦æ­¢</td><td>ç¦æ­¢</td><td>å…è®¸</td></tr><tr><td>é¡ºåºè¯»</td><td>ç¦æ­¢</td><td>ç¦æ­¢</td><td>ç¦æ­¢</td></tr></tbody></table><p>ä¸å¯é‡å¤è¯»å’Œå¹»è¯»çš„åŒºåˆ«ä¸»è¦æ˜¯ï¼šè§£å†³ä¸å¯é‡å¤è¯»éœ€è¦é”å®šå½“å‰æ»¡è¶³æ¡ä»¶çš„è®°å½•ï¼Œè€Œè§£å†³å¹»è¯»éœ€è¦é”å®šå½“å‰æ»¡è¶³æ¡ä»¶çš„è®°å½•åŠç›¸è¿‘çš„è®°å½•ã€‚æ¯”å¦‚æŸ¥è¯¢æŸä¸ªå•†å“çš„ä¿¡æ¯ï¼Œå¯é‡å¤è¯»äº‹åŠ¡éš”ç¦»çº§åˆ«å¯ä»¥ä¿è¯å½“å‰å•†å“ä¿¡æ¯è¢«é”å®šï¼Œè§£å†³ä¸å¯é‡å¤è¯»ï¼›ä½†æ˜¯å¦‚æœç»Ÿè®¡å•†å“ä¸ªæ•°ï¼Œä¸­é€”æœ‰è®°å½•æ’å…¥ï¼Œå¯é‡å¤è¯»äº‹åŠ¡éš”ç¦»çº§åˆ«å°±ä¸èƒ½ä¿è¯ä¸¤ä¸ªäº‹åŠ¡ç»Ÿè®¡çš„ä¸ªæ•°ç›¸åŒã€‚</p><h2 id="19ã€è¯´è¯´äº‹åŠ¡çš„ä¼ æ’­çº§åˆ«"><a href="#19ã€è¯´è¯´äº‹åŠ¡çš„ä¼ æ’­çº§åˆ«" class="headerlink" title="19ã€è¯´è¯´äº‹åŠ¡çš„ä¼ æ’­çº§åˆ«"></a>19ã€è¯´è¯´äº‹åŠ¡çš„ä¼ æ’­çº§åˆ«</h2><p>Spring äº‹åŠ¡å®šä¹‰äº† 7 ç§ä¼ æ’­æœºåˆ¶ï¼š</p><ol><li>PROPAGATION_REQUIREDï¼šé»˜è®¤çš„ Spring äº‹ç‰©ä¼ æ’­çº§åˆ«ï¼Œè‹¥å½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼Œè‹¥ä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æ–°å»ºä¸€ä¸ªäº‹åŠ¡ã€‚</li><li>PAOPAGATION_REQUIRE_NEWï¼šè‹¥å½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ–°å»ºä¸€ä¸ªäº‹åŠ¡ã€‚è‹¥å½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œæ–°è€äº‹åŠ¡ç›¸äº’ç‹¬ç«‹ã€‚å¤–éƒ¨äº‹åŠ¡æŠ›å‡ºå¼‚å¸¸å›æ»šä¸ä¼šå½±å“å†…éƒ¨äº‹åŠ¡çš„æ­£å¸¸æäº¤ã€‚</li><li>PROPAGATION_NESTEDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åµŒå¥—åœ¨å½“å‰äº‹åŠ¡ä¸­æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œç±»ä¼¼äºREQUIRE_NEWã€‚</li><li>PROPAGATION_SUPPORTSï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œè‹¥å½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œä»¥éäº‹åŠ¡çš„æ–¹å¼æ‰§è¡Œã€‚</li><li>PROPAGATION_NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡çš„æ–¹å¼æ‰§è¡Œï¼Œè‹¥å½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li><li>PROPAGATION_MANDATORYï¼šå¼ºåˆ¶äº‹åŠ¡æ‰§è¡Œï¼Œè‹¥å½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸.</li><li>PROPAGATION_NEVERï¼šä»¥éäº‹åŠ¡çš„æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li></ol><p>Spring äº‹åŠ¡ä¼ æ’­çº§åˆ«ä¸€èˆ¬ä¸éœ€è¦å®šä¹‰ï¼Œé»˜è®¤å°±æ˜¯ PROPAGATION_REQUIREDï¼Œé™¤éåœ¨åµŒå¥—äº‹åŠ¡çš„æƒ…å†µä¸‹éœ€è¦é‡ç‚¹äº†è§£ã€‚</p><h2 id="20ã€Spring-äº‹åŠ¡å®ç°æ–¹å¼"><a href="#20ã€Spring-äº‹åŠ¡å®ç°æ–¹å¼" class="headerlink" title="20ã€Spring äº‹åŠ¡å®ç°æ–¹å¼"></a>20ã€Spring äº‹åŠ¡å®ç°æ–¹å¼</h2><p>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼šè¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ç®¡ç†äº‹åŠ¡ï¼Œè¿™ç§æ–¹å¼å¸¦æ¥äº†å¾ˆå¤§çš„çµæ´»æ€§ï¼Œä½†å¾ˆéš¾ç»´æŠ¤ã€‚</p><p>å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼šè¿™ç§æ–¹å¼æ„å‘³ç€ä½ å¯ä»¥å°†äº‹åŠ¡ç®¡ç†å’Œä¸šåŠ¡ä»£ç åˆ†ç¦»ã€‚ä½ åªéœ€è¦é€šè¿‡æ³¨è§£æˆ–è€… XML é…ç½®ç®¡ç†äº‹åŠ¡ã€‚</p><h2 id="21ã€Spring-æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹"><a href="#21ã€Spring-æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹" class="headerlink" title="21ã€Spring æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹"></a>21ã€Spring æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†æœ‰å“ªäº›ä¼˜ç‚¹</h2><p>å®ƒä¸ºä¸åŒçš„äº‹åŠ¡ APIï¼ˆå¦‚ JTAã€ JDBCã€Hibernateã€ JPA å’Œ JDOï¼‰æä¾›äº†ç»Ÿä¸€çš„ç¼–ç¨‹æ¨¡å‹ã€‚å®ƒä¸ºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†æä¾›äº†ä¸€ä¸ªç®€å•çš„ API è€Œéä¸€ç³»åˆ—å¤æ‚çš„äº‹åŠ¡ APIï¼ˆå¦‚ JTAï¼‰ï¼Œå®ƒæ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚å®ƒå¯ä»¥å’Œ Spring çš„å¤šç§æ•°æ®è®¿é—®æŠ€æœ¯å¾ˆå¥½çš„èåˆã€‚</p><h2 id="22ã€äº‹åŠ¡ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#22ã€äº‹åŠ¡ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="22ã€äº‹åŠ¡ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿ"></a>22ã€äº‹åŠ¡ä¸‰è¦ç´ æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><strong>æ•°æ®æº</strong>ï¼šè¡¨ç¤ºå…·ä½“çš„äº‹åŠ¡æ€§èµ„æºï¼Œæ˜¯äº‹åŠ¡çš„çœŸæ­£å¤„ç†è€…ï¼Œå¦‚ MySQL ç­‰ã€‚</p><p><strong>äº‹åŠ¡ç®¡ç†å™¨</strong>ï¼šåƒä¸€ä¸ªå¤§ç®¡å®¶ï¼Œä»æ•´ä½“ä¸Šç®¡ç†äº‹åŠ¡çš„å¤„ç†è¿‡ç¨‹ï¼Œå¦‚æ‰“å¼€ã€æäº¤ã€å›æ»šç­‰ã€‚</p><p><strong>äº‹åŠ¡åº”ç”¨å’Œå±æ€§é…ç½®</strong>ï¼šåƒä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œè¡¨æ˜å“ªäº›æ–¹æ³•è¦å‚ä¸äº‹åŠ¡ï¼Œå¦‚ä½•å‚ä¸äº‹åŠ¡ï¼Œä»¥åŠä¸€äº›ç›¸å…³å±æ€§å¦‚éš”ç¦»çº§åˆ«ã€è¶…æ—¶æ—¶é—´ç­‰ã€‚</p><h2 id="23ã€-äº‹åŠ¡æ³¨è§£çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#23ã€-äº‹åŠ¡æ³¨è§£çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="23ã€ äº‹åŠ¡æ³¨è§£çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>23ã€ äº‹åŠ¡æ³¨è§£çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>@Transactional è¿™ä¸ªæ³¨è§£ä»…ä»…æ˜¯ä¸€äº›ï¼ˆå’Œäº‹åŠ¡ç›¸å…³çš„ï¼‰å…ƒæ•°æ®ï¼Œåœ¨è¿è¡Œæ—¶è¢«äº‹åŠ¡åŸºç¡€è®¾æ–½è¯»å–æ¶ˆè´¹ï¼Œå¹¶<strong>ä½¿ç”¨è¿™äº›å…ƒæ•°æ®æ¥é…ç½® bean çš„äº‹åŠ¡è¡Œä¸º</strong>ã€‚ å¤§è‡´æ¥è¯´å…·æœ‰ä¸¤æ–¹é¢åŠŸèƒ½ï¼Œ<strong>ä¸€æ˜¯è¡¨æ˜è¯¥æ–¹æ³•è¦å‚ä¸äº‹åŠ¡ï¼ŒäºŒæ˜¯é…ç½®ç›¸å…³å±æ€§æ¥å®šåˆ¶äº‹åŠ¡çš„å‚ä¸æ–¹å¼å’Œè¿è¡Œè¡Œä¸º</strong></p><p>å£°æ˜å¼äº‹åŠ¡ä¸»è¦æ˜¯å¾—ç›Šäº Spring AOPã€‚ä½¿ç”¨ä¸€ä¸ªäº‹åŠ¡æ‹¦æˆªå™¨ï¼Œåœ¨æ–¹æ³•è°ƒç”¨çš„å‰å &#x2F; å‘¨å›´è¿›è¡Œäº‹åŠ¡æ€§å¢å¼ºï¼ˆadviceï¼‰ï¼Œæ¥é©±åŠ¨äº‹åŠ¡å®Œæˆã€‚</p><p>@Transactional æ³¨è§£æ—¢å¯ä»¥æ ‡æ³¨åœ¨ç±»ä¸Šï¼Œä¹Ÿå¯ä»¥æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šã€‚å½“åœ¨ç±»ä¸Šæ—¶ï¼Œé»˜è®¤åº”ç”¨åˆ°ç±»é‡Œçš„æ‰€æœ‰æ–¹æ³•ã€‚å¦‚æœæ­¤æ—¶æ–¹æ³•ä¸Šä¹Ÿæ ‡æ³¨äº†ï¼Œåˆ™æ–¹æ³•ä¸Šçš„ä¼˜å…ˆçº§é«˜ã€‚ å¦å¤–æ³¨æ„æ–¹æ³•ä¸€å®šè¦æ˜¯ public çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisç¯‡</title>
      <link href="/posts/4008.html"/>
      <url>/posts/4008.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h2 id="1ã€ä»€ä¹ˆæ˜¯-MyBatis"><a href="#1ã€ä»€ä¹ˆæ˜¯-MyBatis" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯ MyBatis"></a>1ã€ä»€ä¹ˆæ˜¯ MyBatis</h2><p>ï¼ˆ1ï¼‰Mybatis æ˜¯ä¸€ä¸ªåŠ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ï¼Œå®ƒå†…éƒ¨å°è£…äº† JDBCï¼Œå¼€å‘æ—¶åªéœ€è¦å…³æ³¨ SQL è¯­å¥æœ¬èº«ï¼Œä¸éœ€è¦èŠ±è´¹ç²¾åŠ›å»å¤„ç†åŠ è½½é©±åŠ¨ã€åˆ›å»ºè¿æ¥ã€åˆ›å»º statement ç­‰ç¹æ‚çš„è¿‡ç¨‹ã€‚ç¨‹åºå‘˜ç›´æ¥ç¼–å†™åŸç”Ÿæ€ sqlï¼Œå¯ä»¥ä¸¥æ ¼æ§åˆ¶ sql æ‰§è¡Œæ€§èƒ½ï¼Œçµæ´»åº¦é«˜ã€‚</p><p>ï¼ˆ2ï¼‰MyBatis å¯ä»¥ä½¿ç”¨ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°† POJO æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ï¼Œé¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚</p><p>ï¼ˆ3ï¼‰é€šè¿‡ xml æ–‡ä»¶æˆ–æ³¨è§£çš„æ–¹å¼å°†è¦æ‰§è¡Œçš„å„ç§ statement é…ç½®èµ·æ¥ï¼Œå¹¶é€šè¿‡ java å¯¹è±¡å’Œ statement ä¸­ sql çš„åŠ¨æ€å‚æ•°è¿›è¡Œæ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„ sql è¯­å¥ï¼Œæœ€åç”± mybatis æ¡†æ¶æ‰§è¡Œ sql å¹¶å°†ç»“æœæ˜ å°„ä¸º java å¯¹è±¡å¹¶è¿”å›ã€‚ï¼ˆä»æ‰§è¡Œ sql åˆ°è¿”å› result çš„è¿‡ç¨‹ï¼‰ã€‚</p><h2 id="2ã€è¯´è¯´-MyBatis-çš„ä¼˜ç‚¹å’Œç¼ºç‚¹"><a href="#2ã€è¯´è¯´-MyBatis-çš„ä¼˜ç‚¹å’Œç¼ºç‚¹" class="headerlink" title="2ã€è¯´è¯´ MyBatis çš„ä¼˜ç‚¹å’Œç¼ºç‚¹"></a>2ã€è¯´è¯´ MyBatis çš„ä¼˜ç‚¹å’Œç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹ï¼š</strong></p><p>ï¼ˆ1ï¼‰åŸºäº SQL è¯­å¥ç¼–ç¨‹ï¼Œç›¸å½“çµæ´»ï¼Œä¸ä¼šå¯¹åº”ç”¨ç¨‹åºæˆ–è€…æ•°æ®åº“çš„ç°æœ‰è®¾è®¡é€ æˆä»»ä½•å½±å“ï¼ŒSQL å†™åœ¨ XML é‡Œï¼Œè§£é™¤ sql ä¸ç¨‹åºä»£ç çš„è€¦åˆï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†ï¼›æä¾› XML æ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€ SQL è¯­å¥ï¼Œå¹¶å¯é‡ç”¨ã€‚</p><p>ï¼ˆ2ï¼‰ä¸ JDBC ç›¸æ¯”ï¼Œå‡å°‘äº† 50 % ä»¥ä¸Šçš„ä»£ç é‡ï¼Œæ¶ˆé™¤äº† JDBC å¤§é‡å†—ä½™çš„ä»£ç ï¼Œä¸éœ€è¦æ‰‹åŠ¨å¼€å…³è¿æ¥ï¼›</p><p>ï¼ˆ3ï¼‰å¾ˆå¥½çš„ä¸å„ç§æ•°æ®åº“å…¼å®¹ï¼ˆå› ä¸º MyBatis ä½¿ç”¨ JDBC æ¥è¿æ¥æ•°æ®åº“ï¼Œæ‰€ä»¥åªè¦ JDBC æ”¯æŒçš„æ•°æ®åº“ MyBatis éƒ½æ”¯æŒï¼‰ã€‚</p><p>ï¼ˆ4ï¼‰èƒ½å¤Ÿä¸ Spring å¾ˆå¥½çš„é›†æˆï¼›</p><p>ï¼ˆ5ï¼‰æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡ä¸æ•°æ®åº“çš„ ORM å­—æ®µå…³ç³»æ˜ å°„ï¼›æä¾›å¯¹è±¡å…³ç³»æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„ä»¶ç»´æŠ¤ã€‚</p><p><strong>ç¼ºç‚¹</strong></p><p>ï¼ˆ1ï¼‰SQL è¯­å¥çš„ç¼–å†™å·¥ä½œé‡è¾ƒå¤§ï¼Œå°¤å…¶å½“å­—æ®µå¤šã€å…³è”è¡¨å¤šæ—¶ï¼Œå¯¹å¼€å‘äººå‘˜ç¼–å†™ SQL è¯­å¥çš„åŠŸåº•æœ‰ä¸€å®šè¦æ±‚ã€‚</p><p>ï¼ˆ2ï¼‰SQL è¯­å¥ä¾èµ–äºæ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“ç§»æ¤æ€§å·®ï¼Œä¸èƒ½éšæ„æ›´æ¢æ•°æ®åº“ã€‚</p><h2 id="3ã€-å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#3ã€-å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="3ã€#{} å’Œ ${} çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>3ã€#{} å’Œ ${} çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>#{} æ˜¯é¢„ç¼–è¯‘å¤„ç†ï¼Œ${} æ˜¯å­—ç¬¦ä¸²æ›¿æ¢ã€‚</p><p>Mybatis åœ¨å¤„ç† #{}#â€‹ æ—¶ï¼Œä¼šå°† sql ä¸­çš„ #{}#â€‹ æ›¿æ¢ä¸º ? å·ï¼Œè°ƒç”¨ PreparedStatement çš„ set æ–¹æ³•æ¥èµ‹å€¼ï¼›</p><p>Mybatis åœ¨å¤„ç† ${} æ—¶ï¼Œå°±æ˜¯æŠŠ${} æ›¿æ¢æˆå˜é‡çš„å€¼ã€‚</p><p>ä½¿ç”¨ #{}#â€‹ å¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢ SQL æ³¨å…¥ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚</p><h2 id="4ã€å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠ-ï¼Ÿ"><a href="#4ã€å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠ-ï¼Ÿ" class="headerlink" title="4ã€å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠ ï¼Ÿ"></a>4ã€å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠ ï¼Ÿ</h2><p>ç¬¬ 1 ç§ï¼šé€šè¿‡åœ¨æŸ¥è¯¢çš„ sql è¯­å¥ä¸­å®šä¹‰å­—æ®µåçš„åˆ«åï¼Œè®©å­—æ®µåçš„åˆ«åå’Œå®ä½“ç±»çš„å±æ€§åä¸€è‡´ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">â€selectorderâ€</span> <span class="attr">parametertype</span>=<span class="string">â€intâ€</span> <span class="attr">resultetype</span>=<span class="string">â€me.gacl.domain.orderâ€</span>&gt;</span></span><br><span class="line">  select order_id id, order_no orderno ,order_price price form orders where order_id=#&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬ 2 ç§ï¼šé€šè¿‡æ¥æ˜ å°„å­—æ®µåå’Œå®ä½“ç±»å±æ€§åçš„ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getOrder&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;orderresultmap&quot;</span>&gt;</span></span><br><span class="line">  select * from orders where order_id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">â€me.gacl.domain.orderâ€</span> <span class="attr">id</span>=<span class="string">â€orderresultmapâ€</span>&gt;</span></span><br><span class="line">&lt;!â€“ç”¨idå±æ€§æ¥æ˜ å°„ä¸»é”®å­—æ®µâ€“&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">â€idâ€</span> <span class="attr">column</span>=<span class="string">â€order_idâ€</span>&gt;</span></span><br><span class="line">&lt;!â€“ç”¨resultå±æ€§æ¥æ˜ å°„éä¸»é”®å­—æ®µï¼Œpropertyä¸ºå®ä½“ç±»å±æ€§åï¼Œcolumnä¸ºæ•°æ®è¡¨ä¸­çš„å±æ€§â€“&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span> = <span class="string">â€œordernoâ€</span> <span class="attr">column</span> =<span class="string">â€order_noâ€/</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">â€priceâ€</span> <span class="attr">column</span>=<span class="string">â€order_priceâ€</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">reslutMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5ã€Mybatis-æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#5ã€Mybatis-æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="5ã€Mybatis æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>5ã€Mybatis æ˜¯å¦‚ä½•è¿›è¡Œåˆ†é¡µçš„ï¼Ÿåˆ†é¡µæ’ä»¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Mybatis ä½¿ç”¨ RowBounds å¯¹è±¡è¿›è¡Œåˆ†é¡µï¼Œå®ƒæ˜¯é’ˆå¯¹ ResultSet ç»“æœé›†æ‰§è¡Œçš„å†…å­˜åˆ†é¡µï¼Œè€Œéç‰©ç†åˆ†é¡µã€‚å¯ä»¥åœ¨ sql å†…ç›´æ¥æ‹¼å†™å¸¦æœ‰ç‰©ç†åˆ†é¡µçš„å‚æ•°æ¥å®Œæˆç‰©ç†åˆ†é¡µåŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆ†é¡µæ’ä»¶æ¥å®Œæˆç‰©ç†åˆ†é¡µï¼Œæ¯”å¦‚ï¼šMySQL æ•°æ®çš„æ—¶å€™ï¼Œåœ¨åŸæœ‰ SQL åé¢æ‹¼å†™ limitã€‚</p><p>åˆ†é¡µæ’ä»¶çš„åŸºæœ¬åŸç†æ˜¯ä½¿ç”¨ Mybatis æä¾›çš„æ’ä»¶æ¥å£ï¼Œå®ç°è‡ªå®šä¹‰æ’ä»¶ï¼Œåœ¨æ’ä»¶çš„æ‹¦æˆªæ–¹æ³•å†…æ‹¦æˆªå¾…æ‰§è¡Œçš„ sqlï¼Œç„¶åé‡å†™ sqlï¼Œæ ¹æ®dialect æ–¹è¨€ï¼Œæ·»åŠ å¯¹åº”çš„ç‰©ç†åˆ†é¡µè¯­å¥å’Œç‰©ç†åˆ†é¡µå‚æ•°ã€‚</p><h2 id="6ã€Mybatis-æ˜¯å¦‚ä½•å°†-sql-æ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ"><a href="#6ã€Mybatis-æ˜¯å¦‚ä½•å°†-sql-æ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ" class="headerlink" title="6ã€Mybatis æ˜¯å¦‚ä½•å°† sql æ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ"></a>6ã€Mybatis æ˜¯å¦‚ä½•å°† sql æ‰§è¡Œç»“æœå°è£…ä¸ºç›®æ ‡å¯¹è±¡å¹¶è¿”å›çš„ï¼Ÿéƒ½æœ‰å“ªäº›æ˜ å°„å½¢å¼ï¼Ÿ</h2><p>ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨æ ‡ç­¾ï¼Œé€ä¸€å®šä¹‰æ•°æ®åº“åˆ—åå’Œå¯¹è±¡å±æ€§åä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</p><p>ç¬¬äºŒç§æ˜¯ä½¿ç”¨ sql åˆ—çš„åˆ«ååŠŸèƒ½ï¼Œå°†åˆ—çš„åˆ«åä¹¦å†™ä¸ºå¯¹è±¡å±æ€§åã€‚</p><p>æœ‰äº†åˆ—åä¸å±æ€§åçš„æ˜ å°„å…³ç³»åï¼ŒMybatis é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡ï¼ŒåŒæ—¶ä½¿ç”¨åå°„ç»™å¯¹è±¡çš„å±æ€§é€ä¸€èµ‹å€¼å¹¶è¿”å›ï¼Œé‚£äº›æ‰¾ä¸åˆ°æ˜ å°„å…³ç³»çš„å±æ€§ï¼Œæ˜¯æ— æ³•å®Œæˆèµ‹å€¼çš„ã€‚</p><h2 id="7ã€-å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Ÿ"><a href="#7ã€-å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Ÿ" class="headerlink" title="7ã€ å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Ÿ"></a>7ã€ å¦‚ä½•æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼Ÿ</h2><p>é¦–å…ˆ,åˆ›å»ºä¸€ä¸ªç®€å•çš„ insert è¯­å¥:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">â€insertnameâ€</span>&gt;</span></span><br><span class="line"> insert into names (name) values (#&#123;value&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ java ä»£ç ä¸­åƒä¸‹é¢è¿™æ ·æ‰§è¡Œæ‰¹å¤„ç†æ’å…¥:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">list&lt;string&gt; names = <span class="keyword">new</span> <span class="title class_">arraylist</span>();</span><br><span class="line"> names.add(â€œfredâ€);</span><br><span class="line"> names.add(â€œbarneyâ€);</span><br><span class="line"> names.add(â€œbettyâ€);</span><br><span class="line"> names.add(â€œwilmaâ€);</span><br><span class="line"> <span class="comment">// æ³¨æ„è¿™é‡Œ executortype.batch</span></span><br><span class="line"> <span class="type">sqlsession</span> <span class="variable">sqlsession</span> <span class="operator">=</span> sqlsessionfactory.opensession(executortype.batch);</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"> <span class="type">namemapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlsession.getmapper(namemapper.class);</span><br><span class="line"> <span class="keyword">for</span> (string name : names) &#123;</span><br><span class="line"> mapper.insertname(name);</span><br><span class="line"> &#125;</span><br><span class="line"> sqlsession.commit();</span><br><span class="line"> &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line"> e.printStackTrace();</span><br><span class="line">  sqlSession.rollback(); </span><br><span class="line"> <span class="keyword">throw</span> e; </span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">finally</span> &#123;</span><br><span class="line"> sqlsession.close();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="8ã€Xml-æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„-select-insert-updae-delete-æ ‡ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ"><a href="#8ã€Xml-æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„-select-insert-updae-delete-æ ‡ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ" class="headerlink" title="8ã€Xml æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„ select|insert|updae|delete æ ‡ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ"></a>8ã€Xml æ˜ å°„æ–‡ä»¶ä¸­ï¼Œé™¤äº†å¸¸è§çš„ select|insert|updae|delete æ ‡ç­¾ä¹‹å¤–ï¼Œè¿˜æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ</h2><p>åŠ ä¸ŠåŠ¨æ€ sql çš„ 9 ä¸ªæ ‡ç­¾ï¼Œå…¶ä¸­ä¸º sql ç‰‡æ®µæ ‡ç­¾ï¼Œé€šè¿‡æ ‡ç­¾å¼•å…¥ sql ç‰‡æ®µï¼Œä¸ºä¸æ”¯æŒè‡ªå¢çš„ä¸»é”®ç”Ÿæˆç­–ç•¥æ ‡ç­¾ã€‚</p><h2 id="9ã€MyBatis-å®ç°ä¸€å¯¹ä¸€æœ‰å‡ ç§æ–¹å¼ï¼Ÿå…·ä½“æ€ä¹ˆæ“ä½œçš„ï¼Ÿ"><a href="#9ã€MyBatis-å®ç°ä¸€å¯¹ä¸€æœ‰å‡ ç§æ–¹å¼ï¼Ÿå…·ä½“æ€ä¹ˆæ“ä½œçš„ï¼Ÿ" class="headerlink" title="9ã€MyBatis å®ç°ä¸€å¯¹ä¸€æœ‰å‡ ç§æ–¹å¼ï¼Ÿå…·ä½“æ€ä¹ˆæ“ä½œçš„ï¼Ÿ"></a>9ã€MyBatis å®ç°ä¸€å¯¹ä¸€æœ‰å‡ ç§æ–¹å¼ï¼Ÿå…·ä½“æ€ä¹ˆæ“ä½œçš„ï¼Ÿ</h2><p>æœ‰è”åˆæŸ¥è¯¢å’ŒåµŒå¥—æŸ¥è¯¢ï¼Œè”åˆæŸ¥è¯¢æ˜¯å‡ ä¸ªè¡¨è”åˆæŸ¥è¯¢ï¼ŒåªæŸ¥è¯¢ä¸€æ¬¡ï¼Œé€šè¿‡åœ¨ resultMap é‡Œé¢é…ç½® association èŠ‚ç‚¹é…ç½®ä¸€å¯¹ä¸€çš„ç±»å°±å¯ä»¥å®Œæˆï¼›</p><p>åµŒå¥—æŸ¥è¯¢æ˜¯å…ˆæŸ¥ä¸€ä¸ªè¡¨ï¼Œæ ¹æ®è¿™ä¸ªè¡¨é‡Œé¢çš„ç»“æœçš„å¤–é”® idï¼Œå»å†å¦å¤–ä¸€ä¸ªè¡¨é‡Œé¢æŸ¥è¯¢æ•°æ®,ä¹Ÿæ˜¯é€šè¿‡ association é…ç½®ï¼Œä½†å¦å¤–ä¸€ä¸ªè¡¨çš„æŸ¥è¯¢é€šè¿‡ select å±æ€§é…ç½®ã€‚</p><h2 id="10ã€Mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#10ã€Mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="10ã€Mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>10ã€Mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Mybatis ä»…æ”¯æŒ association å…³è”å¯¹è±¡å’Œ collection å…³è”é›†åˆå¯¹è±¡çš„å»¶è¿ŸåŠ è½½ï¼Œassociation æŒ‡çš„å°±æ˜¯ä¸€å¯¹ä¸€ï¼Œcollection æŒ‡çš„å°±æ˜¯ä¸€å¯¹å¤šæŸ¥è¯¢ã€‚åœ¨ Mybatis é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½®æ˜¯å¦å¯ç”¨å»¶è¿ŸåŠ è½½ lazyLoadingEnabled &#x3D; true|falseã€‚</p><p>å®ƒçš„åŸç†æ˜¯ï¼Œä½¿ç”¨ CGLIB åˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œå½“è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œè¿›å…¥æ‹¦æˆªå™¨æ–¹æ³•ï¼Œæ¯”å¦‚è°ƒç”¨ a.getB().getName()ï¼Œæ‹¦æˆªå™¨invoke() æ–¹æ³•å‘ç° a.getB() æ˜¯ null å€¼ï¼Œé‚£ä¹ˆå°±ä¼šå•ç‹¬å‘é€äº‹å…ˆä¿å­˜å¥½çš„æŸ¥è¯¢å…³è” B å¯¹è±¡çš„ sqlï¼ŒæŠŠ B æŸ¥è¯¢ä¸Šæ¥ï¼Œç„¶åè°ƒç”¨ a.setB(b)ï¼Œäºæ˜¯ a çš„å¯¹è±¡ b å±æ€§å°±æœ‰å€¼äº†ï¼Œæ¥ç€å®Œæˆ a.getB().getName() æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™å°±æ˜¯å»¶è¿ŸåŠ è½½çš„åŸºæœ¬åŸç†ã€‚</p><p>å½“ç„¶äº†ï¼Œä¸å…‰æ˜¯ Mybatisï¼Œå‡ ä¹æ‰€æœ‰çš„åŒ…æ‹¬ Hibernateï¼Œæ”¯æŒå»¶è¿ŸåŠ è½½çš„åŸç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><h2 id="11ã€è¯´è¯´-Mybatis-çš„ç¼“å­˜æœºåˆ¶"><a href="#11ã€è¯´è¯´-Mybatis-çš„ç¼“å­˜æœºåˆ¶" class="headerlink" title="11ã€è¯´è¯´ Mybatis çš„ç¼“å­˜æœºåˆ¶"></a>11ã€è¯´è¯´ Mybatis çš„ç¼“å­˜æœºåˆ¶</h2><p>Mybatis æ•´ä½“ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/2117f1f6db453729a9296cea7e261a71645325325.png">â€‹</p><p><strong>ä¸€çº§ç¼“å­˜ localCache</strong></p><p>åœ¨åº”ç”¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰å¯èƒ½åœ¨ä¸€æ¬¡æ•°æ®åº“ä¼šè¯ä¸­ï¼Œæ‰§è¡Œå¤šæ¬¡æŸ¥è¯¢æ¡ä»¶å®Œå…¨ç›¸åŒçš„ SQLï¼ŒMyBatis æä¾›äº†ä¸€çº§ç¼“å­˜çš„æ–¹æ¡ˆä¼˜åŒ–è¿™éƒ¨åˆ†åœºæ™¯ï¼Œå¦‚æœæ˜¯ç›¸åŒçš„ SQL è¯­å¥ï¼Œä¼šä¼˜å…ˆå‘½ä¸­ä¸€çº§ç¼“å­˜ï¼Œé¿å…ç›´æ¥å¯¹æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œæé«˜æ€§èƒ½ã€‚</p><p>æ¯ä¸ª SqlSession ä¸­æŒæœ‰äº† Executorï¼Œæ¯ä¸ª Executor ä¸­æœ‰ä¸€ä¸ª LocalCacheã€‚å½“ç”¨æˆ·å‘èµ·æŸ¥è¯¢æ—¶ï¼ŒMyBatis æ ¹æ®å½“å‰æ‰§è¡Œçš„è¯­å¥ç”Ÿæˆ MappedStatementï¼Œåœ¨ Local Cache è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœç¼“å­˜å‘½ä¸­çš„è¯ï¼Œç›´æ¥è¿”å›ç»“æœç»™ç”¨æˆ·ï¼Œå¦‚æœç¼“å­˜æ²¡æœ‰å‘½ä¸­çš„è¯ï¼ŒæŸ¥è¯¢æ•°æ®åº“ï¼Œç»“æœå†™å…¥ Local Cacheï¼Œæœ€åè¿”å›ç»“æœç»™ç”¨æˆ·ã€‚å…·ä½“å®ç°ç±»çš„ç±»å…³ç³»å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/969ddeb66127a6219d9c21ed65766b70645325325.png">â€‹</p><ol><li>MyBatis ä¸€çº§ç¼“å­˜çš„ç”Ÿå‘½å‘¨æœŸå’Œ SqlSession ä¸€è‡´ã€‚</li><li>MyBatis ä¸€çº§ç¼“å­˜å†…éƒ¨è®¾è®¡ç®€å•ï¼Œåªæ˜¯ä¸€ä¸ªæ²¡æœ‰å®¹é‡é™å®šçš„ HashMapï¼Œåœ¨ç¼“å­˜çš„åŠŸèƒ½æ€§ä¸Šæœ‰æ‰€æ¬ ç¼ºã€‚</li><li>MyBatis çš„ä¸€çº§ç¼“å­˜æœ€å¤§èŒƒå›´æ˜¯ SqlSession å†…éƒ¨ï¼Œæœ‰å¤šä¸ª SqlSession æˆ–è€…åˆ†å¸ƒå¼çš„ç¯å¢ƒä¸‹ï¼Œæ•°æ®åº“å†™æ“ä½œä¼šå¼•èµ·è„æ•°æ®ï¼Œå»ºè®®è®¾å®šç¼“å­˜çº§åˆ«ä¸º Statementã€‚</li></ol><p><strong>äºŒçº§ç¼“å­˜</strong></p><p>åœ¨ä¸Šæ–‡ä¸­æåˆ°çš„ä¸€çº§ç¼“å­˜ä¸­ï¼Œå…¶æœ€å¤§çš„å…±äº«èŒƒå›´å°±æ˜¯ä¸€ä¸ª SqlSession å†…éƒ¨ï¼Œå¦‚æœå¤šä¸ª SqlSessionä¹‹é—´éœ€è¦å…±äº«ç¼“å­˜ï¼Œåˆ™éœ€è¦ä½¿ç”¨åˆ°äºŒçº§ç¼“å­˜ã€‚å¼€å¯äºŒçº§ç¼“å­˜åï¼Œä¼šä½¿ç”¨ CachingExecutor è£…é¥° Executorï¼Œè¿›å…¥ä¸€çº§ç¼“å­˜çš„æŸ¥è¯¢æµç¨‹å‰ï¼Œå…ˆåœ¨ CachingExecutor è¿›è¡ŒäºŒçº§ç¼“å­˜çš„æŸ¥è¯¢ï¼Œå…·ä½“çš„å·¥ä½œæµç¨‹å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/8d2647c1bd3dd938855f6418bbbcb6e3645325325.png">â€‹</p><p>äºŒçº§ç¼“å­˜å¼€å¯åï¼ŒåŒä¸€ä¸ª namespace ä¸‹çš„æ‰€æœ‰æ“ä½œè¯­å¥ï¼Œéƒ½å½±å“ç€åŒä¸€ä¸ª Cacheï¼Œå³äºŒçº§ç¼“å­˜è¢«å¤šä¸ª SqlSession å…±äº«ï¼Œæ˜¯ä¸€ä¸ªå…¨å±€çš„å˜é‡ã€‚</p><p>å½“å¼€å¯ç¼“å­˜åï¼Œæ•°æ®çš„æŸ¥è¯¢æ‰§è¡Œçš„æµç¨‹ä¸ºï¼š</p><p>äºŒçº§ç¼“å­˜ -&gt; ä¸€çº§ç¼“å­˜ -&gt; æ•°æ®åº“</p><ol><li>MyBatis çš„äºŒçº§ç¼“å­˜ç›¸å¯¹äºä¸€çº§ç¼“å­˜æ¥è¯´ï¼Œå®ç°äº† SqlSession ä¹‹é—´ç¼“å­˜æ•°æ®çš„å…±äº«ï¼ŒåŒæ—¶ç²’åº¦æ›´åŠ ç»†ï¼Œèƒ½å¤Ÿåˆ° namespace çº§åˆ«ï¼Œé€šè¿‡ Cache æ¥å£å®ç°ç±»ä¸åŒçš„ç»„åˆï¼Œå¯¹ Cache çš„å¯æ§æ€§ä¹Ÿæ›´å¼ºã€‚</li><li>MyBatis åœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œæå¤§å¯èƒ½ä¼šå‡ºç°è„æ•°æ®ï¼Œæœ‰è®¾è®¡ä¸Šçš„ç¼ºé™·ï¼Œå®‰å…¨ä½¿ç”¨äºŒçº§ç¼“å­˜çš„æ¡ä»¶æ¯”è¾ƒè‹›åˆ»ã€‚</li><li>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œç”±äºé»˜è®¤çš„ MyBatis Cache å®ç°éƒ½æ˜¯åŸºäºæœ¬åœ°çš„ï¼Œåˆ†å¸ƒå¼ç¯å¢ƒä¸‹å¿…ç„¶ä¼šå‡ºç°è¯»å–åˆ°è„æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨é›†ä¸­å¼ç¼“å­˜å°† MyBatis çš„ Cache æ¥å£å®ç°ï¼Œæœ‰ä¸€å®šçš„å¼€å‘æˆæœ¬ï¼Œç›´æ¥ä½¿ç”¨ Redisã€Memcached ç­‰åˆ†å¸ƒå¼ç¼“å­˜å¯èƒ½æˆæœ¬æ›´ä½ï¼Œå®‰å…¨æ€§ä¹Ÿæ›´é«˜ã€‚</li></ol><h2 id="12ã€JDBC-ç¼–ç¨‹æœ‰å“ªäº›æ­¥éª¤ï¼Ÿ"><a href="#12ã€JDBC-ç¼–ç¨‹æœ‰å“ªäº›æ­¥éª¤ï¼Ÿ" class="headerlink" title="12ã€JDBC ç¼–ç¨‹æœ‰å“ªäº›æ­¥éª¤ï¼Ÿ"></a>12ã€JDBC ç¼–ç¨‹æœ‰å“ªäº›æ­¥éª¤ï¼Ÿ</h2><ol><li>è£…è½½ç›¸åº”çš„æ•°æ®åº“çš„ JDBC é©±åŠ¨å¹¶è¿›è¡Œåˆå§‹åŒ–ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="2"><li>å»ºç«‹ JDBC å’Œæ•°æ®åº“ä¹‹é—´çš„ Connection è¿æ¥ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Connection</span> <span class="variable">c</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://127.0.0.1:3306/test?</span></span><br><span class="line"><span class="string">characterEncoding=UTF-8&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»º Statement æˆ–è€… PreparedStatement æ¥å£ï¼Œæ‰§è¡Œ SQL è¯­å¥ã€‚</li><li>å¤„ç†å’Œæ˜¾ç¤ºç»“æœã€‚</li><li>é‡Šæ”¾èµ„æºã€‚</li></ol><h2 id="13ã€MyBatis-ä¸­è§è¿‡ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#13ã€MyBatis-ä¸­è§è¿‡ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="13ã€MyBatis ä¸­è§è¿‡ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ"></a>13ã€MyBatis ä¸­è§è¿‡ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ</h2><p><img src="https://i0.hdslb.com/bfs/article/faa968fa33cf84da7682182bca7de255645325325.png">â€‹</p><p><strong>å»ºé€ è€…æ¨¡å¼ï¼š</strong> ä¾‹å¦‚ SqlSessionFactoryBuilderã€XMLConfigBuilderã€XMLMapperBuilderã€XMLStatementBuilderã€ CacheBuilder ;</p><p><strong>å•ä¾‹æ¨¡å¼ï¼š</strong> ä¾‹å¦‚ ErrorContext å’Œ LogFactory ï¼›</p><p><strong>ä»£ç†æ¨¡å¼ï¼š</strong> Mybatis å®ç°çš„æ ¸å¿ƒï¼Œæ¯”å¦‚ Mapperroxyã€ConnectionLoggerï¼Œç”¨çš„ JDK çš„åŠ¨æ€ä»£ç†ï¼›è¿˜æœ‰ executor.loader åŒ…ä½¿ç”¨äº† CGlib æˆ–è€… javassist è¾¾åˆ°å»¶è¿ŸåŠ è½½çš„æ•ˆæœï¼›</p><p><strong>ç»„åˆæ¨¡å¼ï¼š</strong> ä¾‹å¦‚ SqlNode å’Œå„ä¸ªå­ç±» ChooseSqlNode ç­‰ ;</p><p><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼š</strong> ä¾‹å¦‚ BaseExecutor å’Œ SimpleExecutorï¼Œè¿˜æœ‰ BaseTypeHandler å’Œæ‰€æœ‰çš„å­ç±»ä¾‹ IntegerTypeHandler ;</p><p><strong>é€‚é…å™¨æ¨¡å¼ï¼š</strong> ä¾‹å¦‚ Log çš„ Mybatis æ¥å£å’Œå®ƒå¯¹ JDBCã€log4j ç­‰å„ç§æ—¥å¿—æ¡†æ¶çš„é€‚é…å®ç°ï¼›</p><p><strong>è£…é¥°è€…æ¨¡å¼ï¼š</strong> ä¾‹å¦‚ Cache åŒ…ä¸­çš„ cache,decorators å­åŒ…ä¸­ç­‰å„ä¸ªè£…é¥°è€…çš„å®ç°ï¼›</p><p><strong>è¿­ä»£å™¨æ¨¡å¼ï¼š</strong> ä¾‹å¦‚è¿­ä»£å™¨æ¨¡å¼ PropertyTokenizer ;</p><p><strong>å·¥å‚æ¨¡å¼ï¼š</strong> ä¾‹å¦‚ SqlSessionFactoryã€ObjectFactoryã€MapperProxyFactory ï¼›</p><h2 id="14ã€MyBatis-ä¸­æ¯”å¦‚-UserMapper-javaâ€‹-æ˜¯æ¥å£ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰å®ç°ç±»è¿˜èƒ½è°ƒç”¨ï¼Ÿ"><a href="#14ã€MyBatis-ä¸­æ¯”å¦‚-UserMapper-javaâ€‹-æ˜¯æ¥å£ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰å®ç°ç±»è¿˜èƒ½è°ƒç”¨ï¼Ÿ" class="headerlink" title="14ã€MyBatis ä¸­æ¯”å¦‚ UserMapper.javaâ€‹ æ˜¯æ¥å£ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰å®ç°ç±»è¿˜èƒ½è°ƒç”¨ï¼Ÿ"></a>14ã€MyBatis ä¸­æ¯”å¦‚ <code>UserMapper.java</code>â€‹ æ˜¯æ¥å£ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰å®ç°ç±»è¿˜èƒ½è°ƒç”¨ï¼Ÿ</h2><p>ä½¿ç”¨ JDK åŠ¨æ€ä»£ç† + MapperProxyã€‚æœ¬è´¨ä¸Šè°ƒç”¨çš„æ˜¯ MapperProxy çš„ invoke æ–¹æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œç¯‡</title>
      <link href="/posts/59893.html"/>
      <url>/posts/59893.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h2 id="1ã€HTTP-å“åº”ç æœ‰å“ªäº›ï¼Ÿåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Ÿ"><a href="#1ã€HTTP-å“åº”ç æœ‰å“ªäº›ï¼Ÿåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Ÿ" class="headerlink" title="1ã€HTTP å“åº”ç æœ‰å“ªäº›ï¼Ÿåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Ÿ"></a>1ã€HTTP å“åº”ç æœ‰å“ªäº›ï¼Ÿåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Ÿ</h2><ul><li>200ï¼šæˆåŠŸï¼ŒWeb æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li><li>301ï¼šæ°¸ä¹…é‡å®šå‘ï¼Œå½“å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªç½‘å€çš„æ—¶å€™ï¼ŒWeb æœåŠ¡å™¨ä¼šå°†å½“å‰è¯·æ±‚é‡å®šå‘åˆ°å¦ä¸€ä¸ªç½‘å€ï¼Œæœç´¢å¼•æ“ä¼šæŠ“å–é‡å®šå‘åç½‘é¡µçš„å†…å®¹å¹¶ä¸”å°†æ—§çš„ç½‘å€æ›¿æ¢ä¸ºé‡å®šå‘åçš„ç½‘å€ã€‚</li><li>302ï¼šä¸´æ—¶é‡å®šå‘ï¼Œæœç´¢å¼•æ“ä¼šæŠ“å–é‡å®šå‘åç½‘é¡µçš„å†…å®¹è€Œä¿ç•™æ—§çš„ç½‘å€ï¼Œå› ä¸ºæœç´¢å¼•æ“è®¤ä¸ºé‡å®šå‘åçš„ç½‘å€æ˜¯æš‚æ—¶çš„ã€‚</li><li>400ï¼šå®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯ï¼Œå¤šä¸ºå‚æ•°ä¸åˆæ³•å¯¼è‡´ Web æœåŠ¡å™¨éªŒå‚å¤±è´¥ã€‚</li><li>404ï¼šæœªæ‰¾åˆ°ï¼ŒWeb æœåŠ¡å™¨æ‰¾ä¸åˆ°èµ„æºã€‚</li><li>500ï¼šWeb æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚çš„æ—¶å€™å‘ç”Ÿé”™è¯¯ã€‚</li><li>503ï¼šæœåŠ¡ä¸å¯ç”¨ï¼ŒæœåŠ¡å™¨åœæœºã€‚</li><li>504ï¼šç½‘å…³è¶…æ—¶ã€‚</li></ul><h2 id="2ã€Forward-å’Œ-Redirect-çš„åŒºåˆ«ï¼Ÿ"><a href="#2ã€Forward-å’Œ-Redirect-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="2ã€Forward å’Œ Redirect çš„åŒºåˆ«ï¼Ÿ"></a>2ã€<strong>Forward</strong> å’Œ <strong>Redirect</strong> çš„åŒºåˆ«ï¼Ÿ</h2><p><strong>æµè§ˆå™¨ URL åœ°å€ï¼š</strong> Forward æ˜¯æœåŠ¡å™¨å†…éƒ¨çš„é‡å®šå‘ï¼ŒæœåŠ¡å™¨å†…éƒ¨è¯·æ±‚æŸä¸ª servletï¼Œç„¶åè·å–å“åº”çš„å†…å®¹ï¼Œæµè§ˆå™¨çš„ URL åœ°å€æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼›Redirect æ˜¯å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨ç»™å®¢æˆ·ç«¯è¿”å›äº†ä¸€ä¸ª 302 çŠ¶æ€ç å’Œæ–°çš„ locationï¼Œå®¢æˆ·ç«¯é‡æ–°å‘èµ· HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å“åº” location å¯¹åº”çš„ URL åœ°å€ï¼Œæµè§ˆå™¨çš„ URL åœ°å€å‘ç”Ÿäº†å˜åŒ–ã€‚</p><p><strong>æ•°æ®çš„å…±äº«ï¼š</strong> Forward æ˜¯æœåŠ¡å™¨å†…éƒ¨çš„é‡å®šå‘ï¼Œrequest åœ¨æ•´ä¸ªé‡å®šå‘è¿‡ç¨‹ä¸­æ˜¯ä¸å˜çš„ï¼Œrequest ä¸­çš„ä¿¡æ¯åœ¨ servlet é—´æ˜¯å…±äº«çš„ã€‚Redirect å‘èµ·äº†ä¸¤æ¬¡ HTTP è¯·æ±‚åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„ requestã€‚</p><p><strong>è¯·æ±‚çš„æ¬¡æ•°ï¼š</strong> Forward åªæœ‰ä¸€æ¬¡è¯·æ±‚ï¼›Redirect æœ‰ä¸¤æ¬¡è¯·æ±‚ã€‚</p><h2 id="3ã€-Get-å’Œ-Post-è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"><a href="#3ã€-Get-å’Œ-Post-è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ" class="headerlink" title="3ã€ Get å’Œ Post è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"></a>3ã€ Get å’Œ Post è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</h2><p>ç”¨é€”ï¼š</p><ul><li>get è¯·æ±‚ç”¨æ¥ä»æœåŠ¡å™¨è·å–èµ„æº</li><li>post è¯·æ±‚ç”¨æ¥å‘æœåŠ¡å™¨æäº¤æ•°æ®</li></ul><p>è¡¨å•çš„æäº¤æ–¹å¼ï¼š</p><ul><li>get è¯·æ±‚ç›´æ¥å°†è¡¨å•æ•°æ®ä»¥ name1&#x3D;value1&amp;name2&#x3D;value2 çš„å½¢å¼æ‹¼æ¥åˆ° URL ä¸Šï¼ˆ<a href="http://wwwbaidu.com/action?name1=value1&name2=value2%EF%BC%89%EF%BC%8C%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0%E5%8F%82%E6%95%B0%E5%80%BC%E9%9C%80%E8%A6%81%E7%94%A8">http://wwwbaidu.com/action?name1=value1&amp;name2=value2ï¼‰ï¼Œå¤šä¸ªå‚æ•°å‚æ•°å€¼éœ€è¦ç”¨</a> &amp; è¿æ¥èµ·æ¥å¹¶ä¸”ç”¨ ? æ‹¼æ¥åˆ° action åé¢ï¼›</li><li>post è¯·æ±‚å°†è¡¨å•æ•°æ®æ”¾åˆ°è¯·æ±‚å¤´æˆ–è€…è¯·æ±‚çš„æ¶ˆæ¯ä½“ä¸­ã€‚</li></ul><p>ä¼ è¾“æ•°æ®çš„å¤§å°é™åˆ¶ï¼š</p><ul><li>get è¯·æ±‚ä¼ è¾“çš„æ•°æ®å—åˆ° URL é•¿åº¦çš„é™åˆ¶ï¼Œè€Œ URL é•¿åº¦æ˜¯ç”±æµè§ˆå™¨å†³å®šçš„ï¼›</li><li>post è¯·æ±‚ä¼ è¾“æ•°æ®çš„å¤§å°ç†è®ºä¸Šæ¥è¯´æ˜¯æ²¡æœ‰é™åˆ¶çš„ã€‚</li></ul><p>å‚æ•°çš„ç¼–ç ï¼š</p><ul><li>get è¯·æ±‚çš„å‚æ•°ä¼šåœ¨åœ°å€æ æ˜æ–‡æ˜¾ç¤ºï¼Œä½¿ç”¨ URL ç¼–ç çš„æ–‡æœ¬æ ¼å¼ä¼ é€’å‚æ•°ï¼›</li><li>post è¯·æ±‚ä½¿ç”¨äºŒè¿›åˆ¶æ•°æ®å¤šé‡ç¼–ç ä¼ é€’å‚æ•°ã€‚</li></ul><p>ç¼“å­˜ï¼š</p><ul><li>get è¯·æ±‚å¯ä»¥è¢«æµè§ˆå™¨ç¼“å­˜è¢«æ”¶è—ä¸ºæ ‡ç­¾ï¼›</li><li>post è¯·æ±‚ä¸ä¼šè¢«ç¼“å­˜ä¹Ÿä¸èƒ½è¢«æ”¶è—ä¸ºæ ‡ç­¾ã€‚</li></ul><h2 id="4ã€è¯´è¯´-TCP-ä¸-UDP-çš„åŒºåˆ«ï¼Œä»¥åŠå„è‡ªçš„ä¼˜ç¼ºç‚¹"><a href="#4ã€è¯´è¯´-TCP-ä¸-UDP-çš„åŒºåˆ«ï¼Œä»¥åŠå„è‡ªçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="4ã€è¯´è¯´ TCP ä¸ UDP çš„åŒºåˆ«ï¼Œä»¥åŠå„è‡ªçš„ä¼˜ç¼ºç‚¹"></a>4ã€<strong>è¯´è¯´</strong> <strong>TCP</strong> <strong>ä¸</strong> <strong>UDP</strong> çš„åŒºåˆ«ï¼Œä»¥åŠå„è‡ªçš„ä¼˜ç¼ºç‚¹</h2><p>1ã€TCP é¢å‘è¿æ¥ï¼ˆå¦‚æ‰“ç”µè¯è¦å…ˆæ‹¨å·å»ºç«‹è¿æ¥ï¼‰ï¼šUDP æ˜¯æ— è¿æ¥çš„ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥ã€‚</p><p>2ã€TCP æä¾›å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡ TCP è¿æ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾ï¼›UDP å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ã€‚tcp é€šè¿‡æ ¡éªŒå’Œï¼Œé‡ä¼ æ§åˆ¶ï¼Œåºå·æ ‡è¯†ï¼Œæ»‘åŠ¨çª—å£ã€ç¡®è®¤åº”ç­”å®ç°å¯é ä¼ è¾“ã€‚å¦‚ä¸¢åŒ…æ—¶çš„é‡å‘æ§åˆ¶ï¼Œè¿˜å¯ä»¥å¯¹æ¬¡åºä¹±æ‰çš„åˆ†åŒ…è¿›è¡Œé¡ºåºæ§åˆ¶ã€‚</p><p>3ã€UDP å…·æœ‰è¾ƒå¥½çš„å®æ—¶æ€§ï¼Œå·¥ä½œæ•ˆç‡æ¯” TCP é«˜ï¼Œé€‚ç”¨äºå¯¹é«˜é€Ÿä¼ è¾“å’Œå®æ—¶æ€§æœ‰è¾ƒé«˜çš„é€šä¿¡æˆ–å¹¿æ’­é€šä¿¡ã€‚</p><p>4ã€æ¯ä¸€æ¡ TCP è¿æ¥åªèƒ½æ˜¯ç‚¹åˆ°ç‚¹çš„ï¼›UDP æ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡</p><p>5ã€TCP å¯¹ç³»ç»Ÿèµ„æºè¦æ±‚è¾ƒå¤šï¼ŒUDP å¯¹ç³»ç»Ÿèµ„æºè¦æ±‚è¾ƒå°‘ã€‚</p><h2 id="5ã€è¯´ä¸€ä¸‹-HTTP-å’Œ-HTTPS-çš„åŒºåˆ«"><a href="#5ã€è¯´ä¸€ä¸‹-HTTP-å’Œ-HTTPS-çš„åŒºåˆ«" class="headerlink" title="5ã€è¯´ä¸€ä¸‹ HTTP å’Œ HTTPS çš„åŒºåˆ«"></a>5ã€è¯´ä¸€ä¸‹ HTTP å’Œ HTTPS çš„åŒºåˆ«</h2><p>ç«¯å£ä¸åŒï¼šHTTP å’Œ HTTPS çš„è¿æ¥æ–¹å¼ä¸åŒæ²¡ç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼ŒHTTP æ˜¯ 80ï¼Œ HTTPS ç”¨çš„æ˜¯ 443</p><p>æ¶ˆè€—èµ„æºï¼šå’Œ HTTP ç›¸æ¯”ï¼ŒHTTPS é€šä¿¡ä¼šå› ä¸ºåŠ è§£å¯†çš„å¤„ç†æ¶ˆè€—æ›´å¤šçš„ CPU å’Œå†…å­˜èµ„æºã€‚</p><p>å¼€é”€ï¼š HTTPS é€šä¿¡éœ€è¦è¯ä¹¦ï¼Œè¿™ç±»è¯ä¹¦é€šå¸¸éœ€è¦å‘è®¤è¯æœºæ„ç”³è¯·æˆ–è€…ä»˜è´¹è´­ä¹°ã€‚</p><h2 id="6ã€è¯´è¯´-HTTPã€TCPã€Socket-çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#6ã€è¯´è¯´-HTTPã€TCPã€Socket-çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="6ã€è¯´è¯´ HTTPã€TCPã€Socket çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ"></a>6ã€è¯´è¯´ HTTPã€TCPã€Socket çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul><li>TCP &#x2F; IP ä»£è¡¨ä¼ è¾“æ§åˆ¶åè®® &#x2F; ç½‘é™…åè®®ï¼ŒæŒ‡çš„æ˜¯ä¸€ç³»åˆ—åè®®æ—ã€‚</li><li>HTTP æœ¬èº«å°±æ˜¯ä¸€ä¸ªåè®®ï¼Œæ˜¯ä» Web æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ã€‚</li><li>Socket æ˜¯ TCP&#x2F;IP ç½‘ç»œçš„ API ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªé—¨é¢æ¨¡å¼ï¼Œå®ƒæŠŠå¤æ‚çš„ TCP&#x2F;IP åè®®æ—éšè—åœ¨ Socket æ¥å£åé¢ã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œä¸€ç»„ç®€å•çš„æ¥å£å°±æ˜¯å…¨éƒ¨ï¼Œè®© Socket å»ç»„ç»‡æ•°æ®ï¼Œä»¥ç¬¦åˆæŒ‡å®šçš„åè®®ã€‚</li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼š</p><ul><li>éœ€è¦ IP åè®®æ¥è¿æ¥ç½‘ç»œ</li><li>TCP æ˜¯ä¸€ç§å…è®¸æˆ‘ä»¬å®‰å…¨ä¼ è¾“æ•°æ®çš„æœºåˆ¶ï¼Œä½¿ç”¨ TCP åè®®æ¥ä¼ è¾“æ•°æ®çš„ HTTP æ˜¯ Web æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä½¿ç”¨çš„ç‰¹æ®Šåè®®ã€‚</li><li>HTTP åŸºäº TCP åè®®ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ Socket å»å»ºç«‹ä¸€ä¸ª TCP è¿æ¥ã€‚</li></ul><h2 id="7ã€è¯´ä¸€ä¸‹-HTTP-çš„é•¿è¿æ¥ä¸çŸ­è¿æ¥çš„åŒºåˆ«"><a href="#7ã€è¯´ä¸€ä¸‹-HTTP-çš„é•¿è¿æ¥ä¸çŸ­è¿æ¥çš„åŒºåˆ«" class="headerlink" title="7ã€è¯´ä¸€ä¸‹ HTTP çš„é•¿è¿æ¥ä¸çŸ­è¿æ¥çš„åŒºåˆ«"></a>7ã€è¯´ä¸€ä¸‹ HTTP çš„é•¿è¿æ¥ä¸çŸ­è¿æ¥çš„åŒºåˆ«</h2><p>HTTP åè®®çš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥ï¼Œå®è´¨ä¸Šæ˜¯ TCP åè®®çš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥ã€‚</p><p><strong>çŸ­è¿æ¥</strong></p><p>åœ¨ HTTP &#x2F; 1.0 ä¸­é»˜è®¤ä½¿ç”¨çŸ­é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨æ¯è¿›è¡Œä¸€æ¬¡ HTTP æ“ä½œï¼Œå°±å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œä½†ä»»åŠ¡ç»“æŸå°±ä¸­æ–­è¿æ¥ã€‚å¦‚æœå®¢æˆ·ç«¯è®¿é—®çš„æŸä¸ª HTML æˆ–å…¶ä»–ç±»å‹çš„ Web èµ„æºï¼Œå¦‚ JavaScript æ–‡ä»¶ã€å›¾åƒæ–‡ä»¶ã€ CSS æ–‡ä»¶ç­‰ã€‚å½“æµè§ˆå™¨æ¯é‡åˆ°è¿™æ ·ä¸€ä¸ªWebèµ„æºï¼Œå°±ä¼šå»ºç«‹ä¸€ä¸ª HTTP ä¼šè¯.</p><p><strong>é•¿è¿æ¥</strong></p><p>ä» HTTP &#x2F; 1.1 èµ·ï¼Œé»˜è®¤ä½¿ç”¨é•¿è¿æ¥ï¼Œç”¨ä»¥ä¿æŒè¿æ¥ç‰¹æ€§ã€‚åœ¨ä½¿ç”¨é•¿è¿æ¥çš„æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç½‘é¡µæ‰“å¼€å®Œæˆåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºä¼ è¾“ HTTP æ•°æ®çš„ TCP è¿æ¥ä¸ä¼šå…³é—­ã€‚å¦‚æœå®¢æˆ·ç«¯å†æ¬¡è®¿é—®è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µï¼Œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸€æ¡å·²ç»å»ºç«‹çš„è¿æ¥ã€‚Keep-Alive ä¸ä¼šæ°¸ä¹…ä¿æŒè¿æ¥ï¼Œå®ƒæœ‰ä¸€ä¸ªä¿æŒæ—¶é—´ï¼Œå¯ä»¥åœ¨ä¸åŒçš„æœåŠ¡å™¨è½¯ä»¶ï¼ˆå¦‚ Apacheï¼‰ä¸­è®¾å®šè¿™ä¸ªæ—¶é—´ã€‚</p><h2 id="8ã€TCP-ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆ"><a href="#8ã€TCP-ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆ" class="headerlink" title="8ã€TCP ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆ"></a>8ã€TCP ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆ</h2><ul><li>TCP å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å»ºç«‹è¿æ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œé¦–å…ˆæœåŠ¡ç«¯éœ€è¦å¼€å¯ç›‘å¬ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡ç«¯å¤„äºâ€œæ”¶å¬â€çŠ¶æ€ï¼›</li><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ·è¿æ¥ï¼Œé€‰æ‹© seq&#x3D;x çš„åˆå§‹åºåˆ—å·ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºâ€œåŒæ­¥å·²å‘é€â€çš„çŠ¶æ€ï¼›</li><li>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼ŒåŒæ„è¿æ¥å¹¶å‘å®¢æˆ·ç«¯å‘é€ç¡®è®¤ï¼Œç¡®è®¤å·æ˜¯ ack&#x3D;x+1 è¡¨ç¤ºå®¢æˆ·ç«¯å¯ä»¥å‘é€ä¸‹ä¸€ä¸ªæ•°æ®åŒ…åºå·ä» x+1 å¼€å§‹ï¼ŒåŒæ—¶é€‰æ‹© seq&#x3D;y çš„åˆå§‹åºåˆ—å·ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äºâ€œåŒæ­¥æ”¶åˆ°â€çŠ¶æ€ï¼›</li><li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„ç¡®è®¤åï¼Œå‘æœåŠ¡ç«¯å‘é€ç¡®è®¤ä¿¡æ¯ï¼Œç¡®è®¤å·æ˜¯ ack&#x3D;y+1 è¡¨ç¤ºæœåŠ¡ç«¯å¯ä»¥å‘é€ä¸‹ä¸€ä¸ªæ•°æ®åŒ…åºå·ä» y+1 å¼€å§‹ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºâ€œå·²å»ºç«‹è¿æ¥â€çš„çŠ¶æ€ï¼›</li><li>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¡®è®¤åï¼Œä¹Ÿè¿›å…¥â€œå·²å»ºç«‹è¿æ¥â€çš„çŠ¶æ€ã€‚</li></ul><p>ä»ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹å¯ä»¥çœ‹å‡ºå¦‚æœåªæœ‰ä¸¤æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯çš„èµ·å§‹åºåˆ—å·å¯ä»¥ç¡®è®¤ï¼ŒæœåŠ¡ç«¯çš„èµ·å§‹åºåˆ—å·å°†å¾—ä¸åˆ°ç¡®è®¤ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/ff3de162f231c5621e7d2b25adbb1b34645325325.png">â€‹</p><h2 id="9ã€è¯´ä¸€ä¸‹-TCP-ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿæ€ä¹ˆè§£å†³ç²˜åŒ…é—®é¢˜çš„ï¼Ÿç¬¬äºŒç§æƒ…å†µå‘ç”Ÿäº†æ˜æ˜¾çš„ç²˜åŒ…ç°è±¡ï¼Œè¿™ç§æƒ…å†µå¯¹äºæ•°æ®æ¥æ”¶æ–¹æ¥è¯´å¾ˆéš¾å¤„ç†ã€‚"><a href="#9ã€è¯´ä¸€ä¸‹-TCP-ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿæ€ä¹ˆè§£å†³ç²˜åŒ…é—®é¢˜çš„ï¼Ÿç¬¬äºŒç§æƒ…å†µå‘ç”Ÿäº†æ˜æ˜¾çš„ç²˜åŒ…ç°è±¡ï¼Œè¿™ç§æƒ…å†µå¯¹äºæ•°æ®æ¥æ”¶æ–¹æ¥è¯´å¾ˆéš¾å¤„ç†ã€‚" class="headerlink" title="9ã€è¯´ä¸€ä¸‹ TCP ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿæ€ä¹ˆè§£å†³ç²˜åŒ…é—®é¢˜çš„ï¼Ÿç¬¬äºŒç§æƒ…å†µå‘ç”Ÿäº†æ˜æ˜¾çš„ç²˜åŒ…ç°è±¡ï¼Œè¿™ç§æƒ…å†µå¯¹äºæ•°æ®æ¥æ”¶æ–¹æ¥è¯´å¾ˆéš¾å¤„ç†ã€‚"></a>9ã€è¯´ä¸€ä¸‹ TCP ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿæ€ä¹ˆè§£å†³ç²˜åŒ…é—®é¢˜çš„ï¼Ÿç¬¬äºŒç§æƒ…å†µå‘ç”Ÿäº†æ˜æ˜¾çš„ç²˜åŒ…ç°è±¡ï¼Œè¿™ç§æƒ…å†µå¯¹äºæ•°æ®æ¥æ”¶æ–¹æ¥è¯´å¾ˆéš¾å¤„ç†ã€‚</h2><p>ä¸Šæ–‡ä¸­è®² TCP å’Œ UDP åŒºåˆ«çš„æ—¶å€™æåˆ° TCP ä¼ è¾“æ•°æ®åŸºäºå­—èŠ‚æµï¼Œä»åº”ç”¨å±‚åˆ° TCP ä¼ è¾“å±‚çš„å¤šä¸ªæ•°æ®åŒ…æ˜¯ä¸€è¿ä¸²çš„å­—èŠ‚æµæ˜¯æ²¡æœ‰è¾¹ç•Œçš„ï¼Œè€Œä¸” TCP é¦–éƒ¨å¹¶æ²¡æœ‰è®°å½•æ•°æ®åŒ…çš„é•¿åº¦ï¼Œæ‰€ä»¥ TCP ä¼ è¾“æ•°æ®çš„æ—¶å€™å¯èƒ½ä¼šå‘é€ç²˜åŒ…å’Œæ‹†åŒ…çš„é—®é¢˜ï¼›è€Œ UDP æ˜¯åŸºäºæ•°æ®æŠ¥ä¼ è¾“æ•°æ®çš„ï¼ŒUDP é¦–éƒ¨ä¹Ÿè®°å½•äº†æ•°æ®æŠ¥çš„é•¿åº¦ï¼Œå¯ä»¥è½»æ˜“çš„åŒºåˆ†å‡ºä¸åŒçš„æ•°æ®åŒ…çš„è¾¹ç•Œã€‚</p><p>æ¥ä¸‹æ¥çœ‹ä¸‹ TCP ä¼ è¾“æ•°æ®çš„å‡ ç§æƒ…å†µï¼Œé¦–å…ˆç¬¬ä¸€ç§æƒ…å†µæ˜¯æ­£å¸¸çš„ï¼Œæ—¢æ²¡æœ‰å‘é€ç²˜åŒ…ä¹Ÿæ²¡æœ‰å‘ç”Ÿæ‹†åŒ…ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/09d98a7c9edc41fe56bef3462a663fc9645325325.png">â€‹</p><p>ç¬¬äºŒç§æƒ…å†µå‘ç”Ÿäº†æ˜æ˜¾çš„ç²˜åŒ…ç°è±¡ï¼Œè¿™ç§æƒ…å†µå¯¹äºæ•°æ®æ¥æ”¶æ–¹æ¥è¯´å¾ˆéš¾å¤„ç†ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/040504c606029f8c3a95daeead81a5a2645325325.png">â€‹</p><p>æ¥ä¸‹æ¥çš„ä¸¤ç§æƒ…å†µå‘ç”Ÿäº†ç²˜åŒ…å’Œæ‹†åŒ…çš„ç°è±¡ï¼Œæ¥æ”¶ç«¯æ”¶åˆ°çš„æ•°æ®åŒ…è¦ä¹ˆæ˜¯ä¸å®Œæ•´çš„è¦ä¹ˆæ˜¯å¤šå‡ºæ¥ä¸€å—å„¿ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/1e3251d798b18cf79017abe8d9209acc645325325.png">â€‹</p><p>é€ æˆç²˜åŒ…å’Œæ‹†åŒ…ç°è±¡çš„åŸå› ï¼š</p><ul><li>TCP å‘é€ç¼“å†²åŒºå‰©ä½™ç©ºé—´ä¸è¶³ä»¥å‘é€ä¸€ä¸ªå®Œæ•´çš„æ•°æ®åŒ…ï¼Œå°†å‘ç”Ÿæ‹†åŒ…ï¼›</li><li>è¦å‘é€çš„æ•°æ®è¶…è¿‡äº†æœ€å¤§æŠ¥æ–‡é•¿åº¦çš„é™åˆ¶ï¼ŒTCP ä¼ è¾“æ•°æ®æ—¶è¿›è¡Œæ‹†åŒ…ï¼›</li><li>è¦å‘é€çš„æ•°æ®åŒ…å°äº TCP å‘é€ç¼“å†²åŒºå‰©ä½™ç©ºé—´ï¼ŒTCP å°†å¤šä¸ªæ•°æ®åŒ…å†™æ»¡å‘é€ç¼“å†²åŒºä¸€æ¬¡å‘é€å‡ºå»ï¼Œå°†å‘ç”Ÿç²˜åŒ…ï¼›</li><li>æ¥æ”¶ç«¯æ²¡æœ‰åŠæ—¶è¯»å– TCP å‘é€ç¼“å†²åŒºä¸­çš„æ•°æ®åŒ…ï¼Œå°†ä¼šå‘ç”Ÿç²˜åŒ…ã€‚</li></ul><p>ç²˜åŒ…æ‹†åŒ…çš„è§£å†³æ–¹æ³•ï¼š</p><ul><li>å‘é€ç«¯ç»™æ•°æ®åŒ…æ·»åŠ é¦–éƒ¨ï¼Œé¦–éƒ¨ä¸­æ·»åŠ æ•°æ®åŒ…çš„é•¿åº¦å±æ€§ï¼Œè¿™æ ·æ¥æ”¶ç«¯é€šè¿‡é¦–éƒ¨ä¸­çš„é•¿åº¦å­—æ®µå°±å¯ä»¥çŸ¥é“æ•°æ®åŒ…çš„å®é™…é•¿åº¦å•¦ï¼›</li><li>é’ˆå¯¹å‘é€çš„æ•°æ®åŒ…å°äºç¼“å†²åŒºå¤§å°çš„æƒ…å†µï¼Œå‘é€ç«¯å¯ä»¥å°†ä¸åŒçš„æ•°æ®åŒ…è§„å®šæˆåŒæ ·çš„é•¿åº¦ï¼Œä¸è¶³è¿™ä¸ªé•¿åº¦çš„è¡¥å…… 0ï¼Œæ¥æ”¶ç«¯ä»ç¼“å†²åŒºè¯»å–å›ºå®šçš„é•¿åº¦æ•°æ®è¿™æ ·å°±å¯ä»¥åŒºåˆ†ä¸åŒçš„æ•°æ®åŒ…ï¼›</li><li>å‘é€ç«¯é€šè¿‡ç»™ä¸åŒçš„æ•°æ®åŒ…æ·»åŠ é—´éš”ç¬¦åˆç¡®å®šè¾¹ç•Œï¼Œæ¥æ”¶ç«¯é€šè¿‡è¿™ä¸ªé—´éš”ç¬¦åˆå°±å¯ä»¥åŒºåˆ†ä¸åŒçš„æ•°æ®åŒ…ã€‚</li></ul><h2 id="10ã€TCP-å¦‚ä½•ä¿è¯å¯é æ€§"><a href="#10ã€TCP-å¦‚ä½•ä¿è¯å¯é æ€§" class="headerlink" title="10ã€TCP å¦‚ä½•ä¿è¯å¯é æ€§"></a>10ã€TCP å¦‚ä½•ä¿è¯å¯é æ€§</h2><p><strong>åºåˆ—å·å’Œç¡®è®¤å·æœºåˆ¶ï¼š</strong></p><p>TCP å‘é€ç«¯å‘é€æ•°æ®åŒ…çš„æ—¶å€™ä¼šé€‰æ‹©ä¸€ä¸ª seq åºåˆ—å·ï¼Œæ¥æ”¶ç«¯æ”¶åˆ°æ•°æ®åŒ…åä¼šæ£€æµ‹æ•°æ®åŒ…çš„å®Œæ•´æ€§ï¼Œå¦‚æœæ£€æµ‹é€šè¿‡ä¼šå“åº”ä¸€ä¸ª ack ç¡®è®¤å·è¡¨ç¤ºæ”¶åˆ°äº†æ•°æ®åŒ…ã€‚</p><p><strong>è¶…æ—¶é‡å‘æœºåˆ¶ï¼š</strong></p><p>TCP å‘é€ç«¯å‘é€äº†æ•°æ®åŒ…åä¼šå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¦‚æœä¸€å®šæ—¶é—´æ²¡æœ‰æ”¶åˆ°æ¥å—ç«¯çš„ç¡®è®¤åï¼Œå°†ä¼šé‡æ–°å‘é€è¯¥æ•°æ®åŒ…ã€‚</p><p><strong>å¯¹ä¹±åºæ•°æ®åŒ…é‡æ–°æ’åºï¼š</strong></p><p>ä» IP ç½‘ç»œå±‚ä¼ è¾“åˆ° TCP å±‚çš„æ•°æ®åŒ…å¯èƒ½ä¼šä¹±åºï¼ŒTCP å±‚ä¼šå¯¹æ•°æ®åŒ…é‡æ–°æ’åºå†å‘ç»™åº”ç”¨å±‚ã€‚</p><p><strong>ä¸¢å¼ƒé‡å¤æ•°æ®ï¼š</strong></p><p>ä» IP ç½‘ç»œå±‚ä¼ è¾“åˆ° TCP å±‚çš„æ•°æ®åŒ…å¯èƒ½ä¼šé‡å¤ï¼ŒTCP å±‚ä¼šä¸¢å¼ƒé‡å¤çš„æ•°æ®åŒ…ã€‚</p><p><strong>æµé‡æ§åˆ¶ï¼š</strong></p><p>TCP å‘é€ç«¯å’Œæ¥æ”¶ç«¯éƒ½æœ‰ä¸€ä¸ªå›ºå®šå¤§å°çš„ç¼“å†²ç©ºé—´ï¼Œä¸ºäº†é˜²æ­¢å‘é€ç«¯å‘é€æ•°æ®çš„é€Ÿåº¦å¤ªå¿«å¯¼è‡´æ¥æ”¶ç«¯ç¼“å†²åŒºæº¢å‡ºï¼Œå‘é€ç«¯åªèƒ½å‘é€æ¥æ”¶ç«¯å¯ä»¥æ¥çº³çš„æ•°æ®ï¼Œä¸ºäº†è¾¾åˆ°è¿™ç§æ§åˆ¶æ•ˆæœï¼ŒTCP ç”¨äº†æµé‡æ§åˆ¶åè®®ï¼ˆå¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£åè®®ï¼‰æ¥å®ç°ã€‚</p><h2 id="11ã€OSI-çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ"><a href="#11ã€OSI-çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="11ã€OSI çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ"></a>11ã€OSI çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ</h2><p>OSIä¸ƒå±‚æ¨¡å‹ä¸€èˆ¬æŒ‡å¼€æ”¾ç³»ç»Ÿäº’è¿å‚è€ƒæ¨¡å‹ï¼ˆOpen System Interconnect ç®€ç§°OSIï¼‰æ˜¯å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰å’Œå›½é™…ç”µæŠ¥ç”µè¯å’¨è¯¢å§”å‘˜ä¼šï¼ˆCCITTï¼‰è”åˆåˆ¶å®šçš„å¼€æ”¾ç³»ç»Ÿäº’è¿å‚è€ƒæ¨¡å‹,ä¸ºå¼€æ”¾å¼äº’è¿ä¿¡æ¯ç³»ç»Ÿæä¾›äº†ä¸€ç§åŠŸèƒ½ç»“æ„çš„æ¡†æ¶ã€‚</p><ul><li>åº”ç”¨å±‚ï¼šå„ç§åº”ç”¨ç¨‹åºåè®®ï¼Œæ¯”å¦‚ HTTPã€HTTPSã€FTPã€SOCKS å®‰å…¨å¥—æ¥å­—åè®®ã€DNS åŸŸåç³»ç»Ÿã€GDP ç½‘å…³å‘ç°åè®®ç­‰ç­‰ã€‚</li><li>è¡¨ç¤ºå±‚ï¼šåŠ å¯†è§£å¯†ã€è½¬æ¢ç¿»è¯‘ã€å‹ç¼©è§£å‹ç¼©ï¼Œæ¯”å¦‚ LPP è½»é‡çº§è¡¨ç¤ºåè®®ã€‚</li><li>ä¼šè¯å±‚ï¼šä¸åŒæœºå™¨ä¸Šçš„ç”¨æˆ·å»ºç«‹å’Œç®¡ç†ä¼šè¯ï¼Œæ¯”å¦‚ SSL å®‰å…¨å¥—æ¥å­—å±‚åè®®ã€TLS ä¼ è¾“å±‚å®‰å…¨åè®®ã€RPC è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®ç­‰ç­‰ã€‚ä¼ è¾“å±‚ï¼šæ¥å—ä¸Šä¸€å±‚çš„æ•°æ®ï¼Œåœ¨å¿…è¦çš„æ—¶å€™å¯¹æ•°æ®è¿›è¡Œåˆ†å‰²ï¼Œå¹¶å°†è¿™äº›æ•°æ®äº¤ç»™ç½‘ç»œå±‚ï¼Œä¿è¯è¿™äº›æ•°æ®æ®µæœ‰æ•ˆåˆ°è¾¾å¯¹ç«¯ï¼Œæ¯”å¦‚ TCP ä¼ è¾“æ§åˆ¶åè®®ã€UDP æ•°æ®æŠ¥åè®®ã€‚</li><li>ç½‘ç»œå±‚ï¼šæ§åˆ¶å­ç½‘çš„è¿è¡Œï¼šé€»è¾‘ç¼–å€ã€åˆ†ç»„ä¼ è¾“ã€è·¯ç”±é€‰æ‹©ï¼Œæ¯”å¦‚ IPã€IPV6ã€SLIP ç­‰ç­‰ã€‚</li><li>æ•°æ®é“¾è·¯å±‚ï¼šç‰©ç†å¯»å€ï¼ŒåŒæ—¶å°†åŸå§‹æ¯”ç‰¹æµè½¬å˜ä¸ºé€»è¾‘ä¼ è¾“è·¯çº¿ï¼Œæ¯”å¦‚ XTP å‹ç¼©ä¼ è¾“åè®®ã€PPTP ç‚¹å¯¹ç‚¹éš§é“åè®®ç­‰ç­‰ã€‚</li><li>ç‰©ç†å±‚ï¼šæœºæ¢°ã€ç”µå­ã€å®šæ—¶æ¥å£é€šä¿¡ä¿¡é“ä¸Šçš„åŸå§‹æ¯”ç‰¹æµä¼ è¾“ï¼Œæ¯”å¦‚ IEEE802.2 ç­‰ç­‰ã€‚</li></ul><h3 id="OSI-è¿™æ ·åˆ†å±‚æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"><a href="#OSI-è¿™æ ·åˆ†å±‚æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ" class="headerlink" title="OSI è¿™æ ·åˆ†å±‚æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"></a>OSI è¿™æ ·åˆ†å±‚æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</h3><p>OSI åˆ†å±‚çš„å¥½å¤„å¯ä»¥ä»äº”ä¸ªæ–¹é¢è®²ï¼š</p><ol><li>äººä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„è®¨è®ºå’Œå­¦ä¹ åè®®çš„è§„èŒƒç»†èŠ‚ã€‚</li><li>å±‚é—´çš„æ ‡å‡†æ¥å£æ–¹ä¾¿äº†å·¥ç¨‹æ¨¡å—åŒ–ã€‚</li><li>åˆ›å»ºäº†ä¸€ä¸ªæ›´å¥½çš„äº’è¿ç¯å¢ƒã€‚</li><li>é™ä½äº†å¤æ‚åº¦ï¼Œä½¿ç¨‹åºæ›´å®¹æ˜“ä¿®æ”¹ï¼Œäº§å“å¼€å‘çš„é€Ÿåº¦æ›´å¿«ã€‚</li><li>æ¯å±‚åˆ©ç”¨ç´§é‚»çš„ä¸‹å±‚æœåŠ¡ï¼Œæ›´å®¹æ˜“è®°ä½ä¸ªå±‚çš„åŠŸèƒ½ã€‚</li></ol><h2 id="12ã€æµè§ˆå™¨ä¸­è¾“å…¥ï¼šâ€œwww-woaijava-comâ€-ä¹‹åéƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè¯·è¯¦ç»†é˜è¿°"><a href="#12ã€æµè§ˆå™¨ä¸­è¾“å…¥ï¼šâ€œwww-woaijava-comâ€-ä¹‹åéƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè¯·è¯¦ç»†é˜è¿°" class="headerlink" title="12ã€æµè§ˆå™¨ä¸­è¾“å…¥ï¼šâ€œwww.woaijava.comâ€ ä¹‹åéƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè¯·è¯¦ç»†é˜è¿°"></a>12ã€æµè§ˆå™¨ä¸­è¾“å…¥ï¼šâ€œ<a href="http://www.woaijava.comâ€/">www.woaijava.comâ€</a> ä¹‹åéƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè¯·è¯¦ç»†é˜è¿°</h2><ul><li>ç”±åŸŸå â†’ IP åœ°å€ å¯»æ‰¾IPåœ°å€çš„è¿‡ç¨‹ä¾æ¬¡ç»è¿‡äº†æµè§ˆå™¨ç¼“å­˜ã€ç³»ç»Ÿç¼“å­˜ã€hosts æ–‡ä»¶ã€è·¯ç”±å™¨ç¼“å­˜ã€ é€’å½’æœç´¢æ ¹åŸŸåæœåŠ¡å™¨ã€‚</li><li>å»ºç«‹ TCP &#x2F; IPè¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹å…·ä½“è¿‡ç¨‹ï¼‰</li><li>ç”±æµè§ˆå™¨å‘é€ä¸€ä¸ª HTTP è¯·æ±‚</li><li>ç»è¿‡è·¯ç”±å™¨çš„è½¬å‘ï¼Œé€šè¿‡æœåŠ¡å™¨çš„é˜²ç«å¢™ï¼Œè¯¥ HTTP è¯·æ±‚åˆ°è¾¾äº†æœåŠ¡å™¨</li><li>æœåŠ¡å™¨å¤„ç†è¯¥ HTTP è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª HTML æ–‡ä»¶æµè§ˆå™¨è§£æè¯¥ HTML æ–‡ä»¶ï¼Œå¹¶ä¸”æ˜¾ç¤ºåœ¨æµè§ˆå™¨ç«¯</li></ul><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼š</p><ul><li>HTTP åè®®æ˜¯ä¸€ç§åŸºäº TCP &#x2F; IP çš„åº”ç”¨å±‚åè®®ï¼Œè¿›è¡Œ HTTP æ•°æ®è¯·æ±‚å¿…é¡»å…ˆå»ºç«‹ TCP &#x2F; IP è¿æ¥å¯ä»¥è¿™æ ·ç†è§£ï¼šHTTP æ˜¯è½¿è½¦ï¼Œæä¾›äº†å°è£…æˆ–è€…æ˜¾ç¤ºæ•°æ®çš„å…·ä½“å½¢å¼ï¼›Socket æ˜¯å‘åŠ¨æœºï¼Œæä¾›äº†ç½‘ç»œé€šä¿¡çš„èƒ½åŠ›ã€‚</li><li>ä¸¤ä¸ªè®¡ç®—æœºä¹‹é—´çš„äº¤æµæ— éæ˜¯ä¸¤ä¸ªç«¯å£ä¹‹é—´çš„æ•°æ®é€šä¿¡ï¼Œå…·ä½“çš„æ•°æ®ä¼šä»¥ä»€ä¹ˆæ ·çš„å½¢å¼å±•ç°æ˜¯ä»¥ä¸åŒçš„åº”ç”¨å±‚åè®®æ¥å®šä¹‰çš„ã€‚</li></ul><h2 id="13ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿ"><a href="#13ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿ" class="headerlink" title="13ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿ"></a>13ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿ</h2><p>å½“æµè§ˆå™¨æ‰§è¡Œ JS è„šæœ¬çš„æ—¶å€™ï¼Œä¼šæ£€æµ‹è„šæœ¬è¦è®¿é—®çš„åè®®ã€åŸŸåã€ç«¯å£å·æ˜¯ä¸æ˜¯å’Œå½“å‰ç½‘å€ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´å°±æ˜¯è·¨åŸŸã€‚è·¨åŸŸæ˜¯ä¸å…è®¸çš„ï¼Œè¿™ç§é™åˆ¶å«åšæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œç®€å•ç‚¹çš„è¯´æ³•å°±æ˜¯æµè§ˆå™¨ä¸å…è®¸ä¸€ä¸ªæºä¸­åŠ è½½è„šæœ¬ä¸å…¶ä»–æºä¸­çš„èµ„æºè¿›è¡Œäº¤äº’ã€‚é‚£ä¹ˆå¦‚ä½•å®ç°è·¨åŸŸå‘¢ï¼Ÿ</p><p>JSONPã€CORSæ–¹å¼ã€ä»£ç†æ–¹å¼</p><p><strong>1 JSONP</strong> <strong>æ–¹å¼</strong></p><p>scriptã€imgã€iframeã€linkã€videoã€audio ç­‰å¸¦æœ‰ src å±æ€§çš„æ ‡ç­¾å¯ä»¥è·¨åŸŸè¯·æ±‚å’Œæ‰§è¡Œèµ„æºï¼ŒJSONP åˆ©ç”¨è¿™ä¸€ç‚¹ â€œæ¼æ´â€ å®ç°è·¨åŸŸã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"> <span class="keyword">var</span> scriptTag = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"> scriptTag.<span class="property">type</span> = <span class="string">&quot;text/javascript&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"> scriptTag.<span class="property">src</span> = <span class="string">&quot;http://10.10.0.101:8899/jsonp?callback=f&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"> <span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(scriptTag);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†çœ‹ä¸‹ jQuery çš„å†™æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line"> <span class="comment">// è¯·æ±‚åŸŸå</span></span><br><span class="line"> <span class="attr">url</span>:<span class="string">&#x27;http://10.10.0.101:8899/login&#x27;</span>,</span><br><span class="line"> <span class="comment">// è¯·æ±‚æ–¹å¼</span></span><br><span class="line"> <span class="attr">type</span>:<span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line"> <span class="comment">// æ•°æ®ç±»å‹é€‰æ‹© jsonp</span></span><br><span class="line"> <span class="attr">dataType</span>:<span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line"> <span class="comment">// å›è°ƒæ–¹æ³•å</span></span><br><span class="line"> <span class="attr">jsonpCallback</span>:<span class="string">&#x27;callback&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// å›è°ƒæ–¹æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">callback</span>(<span class="params">response</span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2 CORS</strong> <strong>æ–¹å¼</strong></p><p>CORSï¼ˆCross-Origin Resource Sharingï¼‰å³è·¨åŸŸèµ„æºå…±äº«ï¼Œéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒï¼Œè¿™ç§è¯·æ±‚æ–¹å¼åˆ†ä¸ºç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚ã€‚</p><p>å½“æµè§ˆå™¨å‘å‡ºçš„ XMLHttpRequest è¯·æ±‚çš„è¯·æ±‚æ–¹å¼æ˜¯ POST æˆ–è€… GETï¼Œè¯·æ±‚å¤´ä¸­åªåŒ…å« Acceptã€Accept-Languageã€Content-Languageã€Last-Event-IDã€Content-Typeï¼ˆapplication&#x2F;x-www form-urlencodedã€multipart&#x2F;form-dataã€text&#x2F;plainï¼‰æ—¶é‚£ä¹ˆè¿™ä¸ªè¯·æ±‚å°±æ˜¯ä¸€ä¸ªç®€å•è¯·æ±‚ã€‚</p><p>å¯¹äºç®€å•çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šåœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  Origin å±æ€§ï¼Œæ ‡æ˜æœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼ˆåè®® + åŸŸå + ç«¯å£ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">GET</span></span><br><span class="line"><span class="comment">// æ ‡æ˜æœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼ˆåè®®+åŸŸå+ç«¯å£ï¼‰</span></span><br><span class="line"><span class="title class_">Origin</span>: <span class="attr">http</span>:<span class="comment">//127.0.0.1:8080</span></span><br><span class="line"><span class="comment">// IP</span></span><br><span class="line"><span class="title class_">Host</span>: <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8080</span></span><br><span class="line"><span class="comment">// é•¿è¿æ¥</span></span><br><span class="line"><span class="title class_">Connection</span>: keep-alive</span><br><span class="line"><span class="title class_">Content</span>-<span class="title class_">Type</span>: text/plain</span><br></pre></td></tr></table></figure><p>å¦‚æœ Origin æ ‡æ˜çš„åŸŸååœ¨æœåŠ¡å™¨è®¸å¯èŒƒå›´å†…ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šç»™å‡ºå“åº”ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// è¯¥å€¼ä¸Šæ–‡æåˆ°è¿‡ï¼Œè¡¨ç¤ºå…è®¸æµè§ˆå™¨æŒ‡å®šçš„åŸŸåè®¿é—®ï¼Œè¦ä¹ˆä¸ºæµè§ˆå™¨ä¼ å…¥çš„ originï¼Œè¦ä¹ˆä¸º * è¡¨ç¤º</span></span><br><span class="line">æ‰€æœ‰åŸŸåéƒ½å¯ä»¥è®¿é—®</span><br><span class="line"> <span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Origin</span>: <span class="attr">http</span>:<span class="comment">//127.0.0.1:8080</span></span><br><span class="line"> <span class="comment">// è¡¨ç¤ºæœåŠ¡å™¨æ˜¯å¦åŒæ„æµè§ˆå™¨å‘é€ cookie</span></span><br><span class="line"> <span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Credentials</span>: <span class="literal">true</span></span><br><span class="line"> <span class="comment">// æŒ‡å®š XMLHttpRequest#getResponseHeader() æ–¹æ³•å¯ä»¥è·å–åˆ°çš„å­—æ®µ</span></span><br><span class="line"> <span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Expose</span>-<span class="title class_">Headers</span>: xxx</span><br><span class="line"> <span class="title class_">Content</span>-<span class="title class_">Type</span>: text/html; charset=utf-<span class="number">8</span></span><br></pre></td></tr></table></figure><p>Access-Control-Allow-Credentials: true è¡¨ç¤ºæœåŠ¡å™¨åŒæ„æµè§ˆå™¨å‘é€ cookieï¼Œå¦å¤–æµè§ˆå™¨ä¹Ÿéœ€è¦è®¾ç½®æ”¯æŒå‘é€ cookieï¼Œå¦åˆ™å°±ç®—æœåŠ¡å™¨æ”¯æŒæµè§ˆå™¨ä¹Ÿä¸ä¼šå‘é€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"><span class="comment">// è®¾ç½®å‘é€çš„è¯·æ±‚æ˜¯å¦å¸¦ cookie</span></span><br><span class="line">xhr.<span class="property">withCredentials</span> = <span class="literal">true</span>;</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;http://10.10.0.101:8899/login&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/plain&#x27;</span>);</span><br></pre></td></tr></table></figure><p>å¦å¤–ä¸€ç§æ˜¯éç®€å•è¯·æ±‚ï¼Œè¯·æ±‚æ–¹å¼æ˜¯ PUT æˆ– DELETEï¼Œæˆ–è€…è¯·æ±‚å¤´ä¸­æ·»åŠ äº† ContentType:application&#x2F;json å±æ€§å’Œå±æ€§å€¼çš„è¯·æ±‚ã€‚</p><p>è¿™ç§è¯·æ±‚åœ¨æµè§ˆå™¨æ­£å¼å‘å‡º XMLHttpRequest è¯·æ±‚å‰ä¼šå…ˆå‘é€ä¸€ä¸ªé¢„æ£€ HTTP è¯·æ±‚ï¼Œè¯¢é—®æœåŠ¡å™¨å½“å‰ç½‘é¡µçš„åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„è®¸å¯åå•ä¹‹ä¸­ï¼Œåªæœ‰å¾—åˆ°æœåŠ¡å™¨çš„è‚¯å®šåæ‰ä¼šæ­£å¼å‘å‡ºé€šä¿¡è¯·æ±‚ã€‚é¢„æ£€è¯·æ±‚çš„å¤´ä¿¡æ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¢„æ£€è¯·æ±‚çš„è¯·æ±‚æ–¹å¼æ˜¯ OPTIONS</span></span><br><span class="line"><span class="variable constant_">OPTIONS</span></span><br><span class="line"><span class="comment">// æ ‡æ˜æœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼ˆåè®®+åŸŸå+ç«¯å£ï¼‰</span></span><br><span class="line"><span class="title class_">Origin</span>: <span class="attr">http</span>:<span class="comment">//127.0.0.1:8080</span></span><br><span class="line"><span class="comment">// æ ‡æ˜æ¥ä¸‹æ¥çš„ CORS è¯·æ±‚è¦ä½¿ç”¨çš„è¯·æ±‚æ–¹å¼</span></span><br><span class="line"><span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Request</span>-<span class="title class_">Method</span>: <span class="variable constant_">PUT</span></span><br><span class="line"><span class="comment">// æ ‡æ˜æ¥ä¸‹æ¥çš„ CORS è¯·æ±‚è¦é™„åŠ å‘é€çš„å¤´ä¿¡æ¯å±æ€§</span></span><br><span class="line"><span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Request</span>-<span class="title class_">Headers</span>: X-<span class="title class_">Custom</span>-<span class="title class_">Header</span></span><br><span class="line"><span class="comment">// IP</span></span><br><span class="line"><span class="title class_">Host</span>: <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8080</span></span><br><span class="line"><span class="comment">// é•¿è¿æ¥</span></span><br><span class="line"><span class="title class_">Connection</span>: keep-alive</span><br></pre></td></tr></table></figure><p>å¦‚æœæœåŠ¡å™¨å›åº”é¢„æ£€è¯·æ±‚çš„å“åº”å¤´ä¸­æ²¡æœ‰ä»»ä½• CORS ç›¸å…³çš„å¤´ä¿¡æ¯çš„è¯è¡¨ç¤ºä¸æ”¯æŒè·¨åŸŸï¼Œå¦‚æœå…è®¸è·¨åŸŸå°±ä¼šåšå‡ºå“åº”ï¼Œå“åº”å¤´ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">HTTP</span>/<span class="number">1.1</span> <span class="number">200</span> <span class="variable constant_">OK</span></span><br><span class="line"><span class="comment">// è¯¥å€¼ä¸Šæ–‡æåˆ°è¿‡ï¼Œè¡¨ç¤ºå…è®¸æµè§ˆå™¨æŒ‡å®šçš„åŸŸåè®¿é—®ï¼Œè¦ä¹ˆä¸ºæµè§ˆå™¨ä¼ å…¥çš„ originï¼Œè¦ä¹ˆä¸º * è¡¨ç¤ºæ‰€</span></span><br><span class="line">æœ‰åŸŸåéƒ½å¯ä»¥è®¿é—®</span><br><span class="line"><span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Origin</span>:<span class="attr">http</span>:<span class="comment">//127.0.0.1:8080</span></span><br><span class="line"><span class="comment">// æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰è·¨åŸŸè¯·æ±‚æ–¹å¼ï¼Œä¸ºäº†é˜²æ­¢æµè§ˆå™¨å‘èµ·å¤šæ¬¡é¢„æ£€è¯·æ±‚æŠŠæ‰€æœ‰çš„è¯·æ±‚æ–¹å¼è¿”å›ç»™æµè§ˆå™¨</span></span><br><span class="line"><span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Methods</span>: <span class="variable constant_">GET</span>, <span class="variable constant_">POST</span>, <span class="variable constant_">PUT</span></span><br><span class="line"><span class="comment">// æœåŠ¡å™¨æ”¯æŒé¢„æ£€è¯·æ±‚å¤´ä¿¡æ¯ä¸­çš„ Access-Control-Request-Headers å±æ€§å€¼</span></span><br><span class="line"><span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Headers</span>: X-<span class="title class_">Custom</span>-<span class="title class_">Header</span></span><br><span class="line"><span class="comment">// æœåŠ¡å™¨åŒæ„æµè§ˆå™¨å‘é€ cookie</span></span><br><span class="line"><span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Allow</span>-<span class="title class_">Credentials</span>: <span class="literal">true</span></span><br><span class="line"><span class="comment">// æŒ‡å®šé¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸæ˜¯ 20 å¤©ï¼ŒæœŸé—´ä¸å¿…å†æ¬¡å‘é€å¦ä¸€ä¸ªé¢„æ£€è¯·æ±‚</span></span><br><span class="line"><span class="title class_">Access</span>-<span class="title class_">Control</span>-<span class="title class_">Max</span>-<span class="title class_">Age</span>:<span class="number">1728000</span></span><br><span class="line"><span class="title class_">Content</span>-<span class="title class_">Type</span>: text/html; charset=utf-<span class="number">8</span></span><br><span class="line"><span class="title class_">Keep</span>-<span class="title class_">Alive</span>: timeout=<span class="number">2</span>, max=<span class="number">100</span></span><br><span class="line"><span class="comment">// é•¿è¿æ¥</span></span><br><span class="line"><span class="title class_">Connection</span>: <span class="title class_">Keep</span>-<span class="title class_">Alive</span></span><br><span class="line"><span class="title class_">Content</span>-<span class="title class_">Type</span>: text/plain</span><br></pre></td></tr></table></figure><p>æ¥ç€æµè§ˆå™¨ä¼šåƒç®€å•è¯·æ±‚ä¸€æ ·ï¼Œå‘é€ä¸€ä¸ª CORS è¯·æ±‚ï¼Œè¯·æ±‚å¤´ä¸­ä¸€å®šåŒ…å« Origin å±æ€§ï¼ŒæœåŠ¡å™¨çš„å“åº”å¤´ä¸­ä¹Ÿä¸€å®šå¾—åŒ…å« Access-Control-Allow-Origin å±æ€§ã€‚</p><p><strong>3</strong> <strong>ä»£ç†æ–¹å¼</strong></p><p>è·¨åŸŸé™åˆ¶æ˜¯æµè§ˆå™¨çš„åŒæºç­–ç•¥å¯¼è‡´çš„ï¼Œä½¿ç”¨ nginx å½“åšæœåŠ¡å™¨è®¿é—®åˆ«çš„æœåŠ¡çš„ HTTP æ¥å£æ˜¯ä¸éœ€è¦æ‰§è¡Œ JS è„šæ­¥ä¸å­˜åœ¨åŒæºç­–ç•¥é™åˆ¶çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨ Nginx åˆ›å»ºä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œè¿™ä¸ªä»£ç†æœåŠ¡å™¨çš„åŸŸåè·Ÿæµè§ˆå™¨è¦è®¿é—®çš„åŸŸåä¸€è‡´ï¼Œç„¶åé€šè¿‡è¿™ä¸ªä»£ç†æœåŠ¡å™¨ä¿®æ”¹ cookie ä¸­çš„åŸŸåä¸ºè¦è®¿é—®çš„ HTTP æ¥å£çš„åŸŸåï¼Œé€šè¿‡åå‘ä»£ç†å®ç°è·¨åŸŸã€‚</p><p>Nginx çš„é…ç½®ä¿¡æ¯ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server</span> <span class="string">&#123;</span></span><br><span class="line"><span class="comment"> # ä»£ç†æœåŠ¡å™¨çš„ç«¯å£</span></span><br><span class="line"> <span class="attr">listen</span> <span class="string">88;</span></span><br><span class="line"><span class="comment"> # ä»£ç†æœåŠ¡å™¨çš„åŸŸå</span></span><br><span class="line"> <span class="attr">server_name</span> <span class="string">http://127.0.0.1;</span></span><br><span class="line"> <span class="attr">location</span> <span class="string">/ &#123;</span></span><br><span class="line"><span class="comment"> # åå‘ä»£ç†æœåŠ¡å™¨çš„åŸŸå+ç«¯å£</span></span><br><span class="line"> <span class="attr">proxy_pass</span> <span class="string">http://127.0.0.2:89;</span></span><br><span class="line"><span class="comment"> # ä¿®æ”¹cookieé‡ŒåŸŸå</span></span><br><span class="line"> <span class="attr">proxy_cookie_domain</span> <span class="string">http://127.0.0.2 http://127.0.0.1;</span></span><br><span class="line"> <span class="attr">index</span> <span class="string">index.html index.htm;</span></span><br><span class="line"><span class="comment"> # è®¾ç½®å½“å‰ä»£ç†æœåŠ¡å™¨å…è®¸æµè§ˆå™¨è·¨åŸŸ</span></span><br><span class="line"> <span class="attr">add_header</span> <span class="string">Access-Control-Allow-Origin http://127.0.0.1;</span></span><br><span class="line"><span class="comment"> # è®¾ç½®å½“å‰ä»£ç†æœåŠ¡å™¨å…è®¸æµè§ˆå™¨å‘é€ cookie</span></span><br><span class="line"> <span class="attr">add_header</span> <span class="string">Access-Control-Allow-Credentials true;</span></span><br><span class="line"> <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure><p>å‰ç«¯ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"><span class="comment">// è®¾ç½®æµè§ˆå™¨å…è®¸å‘é€ cookie</span></span><br><span class="line">xhr.<span class="property">withCredentials</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// è®¿é—® nginx ä»£ç†æœåŠ¡å™¨</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;http://127.0.0.1:88&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure><h2 id="14ã€TCP-ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆ"><a href="#14ã€TCP-ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆ" class="headerlink" title="14ã€TCP ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆ"></a>14ã€TCP ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆ</h2><ul><li>CP å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å»ºç«‹è¿æ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œé¦–å…ˆæœåŠ¡ç«¯éœ€è¦å¼€å¯ç›‘å¬ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡ç«¯å¤„äºâ€œæ”¶å¬â€çŠ¶æ€ï¼›</li><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ·è¿æ¥ï¼Œé€‰æ‹© seq&#x3D;x çš„åˆå§‹åºåˆ—å·ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºâ€œåŒæ­¥å·²å‘é€â€çš„çŠ¶æ€ï¼›</li><li>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼ŒåŒæ„è¿æ¥å¹¶å‘å®¢æˆ·ç«¯å‘é€ç¡®è®¤ï¼Œç¡®è®¤å·æ˜¯ ack&#x3D;x+1 è¡¨ç¤ºå®¢æˆ·ç«¯å¯ä»¥å‘é€ä¸‹ä¸€ä¸ªæ•°æ®åŒ…åºå·ä» x+1 å¼€å§‹ï¼ŒåŒæ—¶é€‰æ‹© seq&#x3D;y çš„åˆå§‹åºåˆ—å·ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äºâ€œåŒæ­¥æ”¶åˆ°â€çŠ¶æ€ï¼›</li><li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„ç¡®è®¤åï¼Œå‘æœåŠ¡ç«¯å‘é€ç¡®è®¤ä¿¡æ¯ï¼Œç¡®è®¤å·æ˜¯ ack&#x3D;y+1 è¡¨ç¤ºæœåŠ¡ç«¯å¯ä»¥å‘é€ä¸‹ä¸€ä¸ªæ•°æ®åŒ…åºå·ä» y+1 å¼€å§‹ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºâ€œå·²å»ºç«‹è¿æ¥â€çš„çŠ¶æ€ï¼›</li><li>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¡®è®¤åï¼Œä¹Ÿè¿›å…¥â€œå·²å»ºç«‹è¿æ¥â€çš„çŠ¶æ€ã€‚</li></ul><p>ä»ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹å¯ä»¥çœ‹å‡ºå¦‚æœåªæœ‰ä¸¤æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯çš„èµ·å§‹åºåˆ—å·å¯ä»¥ç¡®è®¤ï¼ŒæœåŠ¡ç«¯çš„èµ·å§‹åºåˆ—å·å°†å¾—ä¸åˆ°ç¡®è®¤ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/be7d27ad349efa35b79a765f4a1c4baa645325325.png">â€‹</p><h2 id="15ã€è¯´ä¸€ä¸‹-TCP-ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿæ€ä¹ˆè§£å†³ç²˜åŒ…é—®é¢˜çš„ï¼Ÿ"><a href="#15ã€è¯´ä¸€ä¸‹-TCP-ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿæ€ä¹ˆè§£å†³ç²˜åŒ…é—®é¢˜çš„ï¼Ÿ" class="headerlink" title="15ã€è¯´ä¸€ä¸‹ TCP ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿæ€ä¹ˆè§£å†³ç²˜åŒ…é—®é¢˜çš„ï¼Ÿ"></a>15ã€è¯´ä¸€ä¸‹ <strong>TCP</strong> <strong>ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿæ€ä¹ˆè§£å†³ç²˜åŒ…é—®é¢˜çš„ï¼Ÿ</strong></h2><p>ä¸Šæ–‡ä¸­è®² TCP å’Œ UDP åŒºåˆ«çš„æ—¶å€™æåˆ° TCP ä¼ è¾“æ•°æ®åŸºäºå­—èŠ‚æµï¼Œä»åº”ç”¨å±‚åˆ° TCP ä¼ è¾“å±‚çš„å¤šä¸ªæ•°æ®åŒ…æ˜¯ä¸€è¿ä¸²çš„å­—èŠ‚æµæ˜¯æ²¡æœ‰è¾¹ç•Œçš„ï¼Œè€Œä¸” TCP é¦–éƒ¨å¹¶æ²¡æœ‰è®°å½•æ•°æ®åŒ…çš„é•¿åº¦ï¼Œæ‰€ä»¥ TCP ä¼ è¾“æ•°æ®çš„æ—¶å€™å¯èƒ½ä¼šå‘é€ç²˜åŒ…å’Œæ‹†åŒ…çš„é—®é¢˜ï¼›è€Œ UDP æ˜¯åŸºäºæ•°æ®æŠ¥ä¼ è¾“æ•°æ®çš„ï¼ŒUDP é¦–éƒ¨ä¹Ÿè®°å½•äº†æ•°æ®æŠ¥çš„é•¿åº¦ï¼Œå¯ä»¥è½»æ˜“çš„åŒºåˆ†å‡ºä¸åŒçš„æ•°æ®åŒ…çš„è¾¹ç•Œã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/24176c849a0bfe1cbdf3f6475144d700645325325.png">â€‹</p><p>é€ æˆç²˜åŒ…å’Œæ‹†åŒ…ç°è±¡çš„åŸå› ï¼š</p><ul><li>TCP å‘é€ç¼“å†²åŒºå‰©ä½™ç©ºé—´ä¸è¶³ä»¥å‘é€ä¸€ä¸ªå®Œæ•´çš„æ•°æ®åŒ…ï¼Œå°†å‘ç”Ÿæ‹†åŒ…ï¼›</li><li>è¦å‘é€çš„æ•°æ®è¶…è¿‡äº†æœ€å¤§æŠ¥æ–‡é•¿åº¦çš„é™åˆ¶ï¼ŒTCP ä¼ è¾“æ•°æ®æ—¶è¿›è¡Œæ‹†åŒ…ï¼›</li><li>è¦å‘é€çš„æ•°æ®åŒ…å°äº TCP å‘é€ç¼“å†²åŒºå‰©ä½™ç©ºé—´ï¼ŒTCP å°†å¤šä¸ªæ•°æ®åŒ…å†™æ»¡å‘é€ç¼“å†²åŒºä¸€æ¬¡å‘é€å‡ºå»ï¼Œå°†å‘ç”Ÿç²˜åŒ…ï¼›</li><li>æ¥æ”¶ç«¯æ²¡æœ‰åŠæ—¶è¯»å– TCP å‘é€ç¼“å†²åŒºä¸­çš„æ•°æ®åŒ…ï¼Œå°†ä¼šå‘ç”Ÿç²˜åŒ…ã€‚</li></ul><p>ç²˜åŒ…æ‹†åŒ…çš„è§£å†³æ–¹æ³•ï¼š</p><ul><li>å‘é€ç«¯ç»™æ•°æ®åŒ…æ·»åŠ é¦–éƒ¨ï¼Œé¦–éƒ¨ä¸­æ·»åŠ æ•°æ®åŒ…çš„é•¿åº¦å±æ€§ï¼Œè¿™æ ·æ¥æ”¶ç«¯é€šè¿‡é¦–éƒ¨ä¸­çš„é•¿åº¦å­—æ®µå°±å¯ä»¥çŸ¥é“æ•°æ®åŒ…çš„å®é™…é•¿åº¦å•¦ï¼›</li><li>é’ˆå¯¹å‘é€çš„æ•°æ®åŒ…å°äºç¼“å†²åŒºå¤§å°çš„æƒ…å†µï¼Œå‘é€ç«¯å¯ä»¥å°†ä¸åŒçš„æ•°æ®åŒ…è§„å®šæˆåŒæ ·çš„é•¿åº¦ï¼Œä¸è¶³è¿™ä¸ªé•¿åº¦çš„è¡¥å…… 0ï¼Œæ¥æ”¶ç«¯ä»ç¼“å†²åŒºè¯»å–å›ºå®šçš„é•¿åº¦æ•°æ®è¿™æ ·å°±å¯ä»¥åŒºåˆ†ä¸åŒçš„æ•°æ®åŒ…ï¼›</li><li>å‘é€ç«¯é€šè¿‡ç»™ä¸åŒçš„æ•°æ®åŒ…æ·»åŠ é—´éš”ç¬¦åˆç¡®å®šè¾¹ç•Œï¼Œæ¥æ”¶ç«¯é€šè¿‡è¿™ä¸ªé—´éš”ç¬¦åˆå°±å¯ä»¥åŒºåˆ†ä¸åŒçš„æ•°æ®åŒ…</li></ul><h2 id="16ã€HTTP1-0ã€HTTP1-1ã€HTTP2-0-çš„å…³ç³»å’ŒåŒºåˆ«"><a href="#16ã€HTTP1-0ã€HTTP1-1ã€HTTP2-0-çš„å…³ç³»å’ŒåŒºåˆ«" class="headerlink" title="16ã€HTTP1.0ã€HTTP1.1ã€HTTP2.0 çš„å…³ç³»å’ŒåŒºåˆ«"></a>16ã€HTTP1.0ã€HTTP1.1ã€HTTP2.0 çš„å…³ç³»å’ŒåŒºåˆ«</h2><p><strong>ä¸€ï¼Œå¯¹æ¯”</strong></p><table><thead><tr><th>HTTP1.0</th><th>æ— çŠ¶æ€ã€æ— è¿æ¥</th></tr></thead><tbody><tr><td>HTTP1.1</td><td>æŒä¹…è¿æ¥ï¼Œè¯·æ±‚ç®¡é“åŒ–ï¼Œå¢åŠ ç¼“å­˜å¤„ç†ï¼ˆæ–°çš„å­—æ®µå¦‚ catch-control ï¼‰ï¼Œå¢åŠ  Host å­—æ®µï¼Œæ”¯æŒæ–­ç‚¹ä¼ è¾“ç­‰ï¼ˆæŠŠæ–‡ä»¶åˆ†æˆå‡ éƒ¨åˆ†ï¼‰</td></tr><tr><td>HTTP2.0</td><td>äºŒè¿›åˆ¶åˆ†å¸§ï¼Œå¤šè·¯å¤ç”¨ï¼ˆæˆ–è¿æ¥å…±äº«ï¼‰ï¼Œå¤´éƒ¨å‹ç¼©ï¼ŒæœåŠ¡å™¨æ¨é€</td></tr></tbody></table><p><strong>äºŒã€HTTP1.0ï¼š</strong></p><p>æµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ª TCP è¿æ¥ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œæˆåç«‹å³æ–­å¼€ TCP è¿æ¥ï¼ˆæ— è¿æ¥ï¼‰ï¼ŒæœåŠ¡å™¨ä¸è·Ÿè¸ªæ¯ä¸ªå®¢æˆ·ç«¯ä¹Ÿä¸è®°å½•è¿‡å»çš„è¯·æ±‚ï¼ˆæ— çŠ¶æ€ï¼‰ã€‚</p><p><strong>ä¸‰ã€HTTP1.1ï¼š</strong></p><p>HTTP &#x2F; 1.0 ä¸­é»˜è®¤ä½¿ç”¨ Connection: closeã€‚åœ¨ HTTP &#x2F; 1.1 ä¸­å·²ç»é»˜è®¤ä½¿ç”¨ Connection: keep-aliveï¼Œé¿å…äº†è¿æ¥å»ºç«‹å’Œé‡Šæ”¾çš„å¼€é”€ï¼Œä½†æœåŠ¡å™¨å¿…é¡»æŒ‰ç…§å®¢æˆ·ç«¯è¯·æ±‚çš„å…ˆåé¡ºåºä¾æ¬¡å›é€ç›¸åº”çš„ç»“æœï¼Œä»¥ä¿è¯å®¢æˆ·ç«¯èƒ½å¤ŸåŒºåˆ†å‡ºæ¯æ¬¡è¯·æ±‚çš„å“åº”å†…å®¹ã€‚é€šè¿‡ Content-Length å­—æ®µæ¥åˆ¤æ–­å½“å‰è¯·æ±‚çš„æ•°æ®æ˜¯å¦å·²ç»å…¨éƒ¨æ¥æ”¶ã€‚ä¸å…è®¸åŒæ—¶å­˜åœ¨ä¸¤ä¸ªå¹¶è¡Œçš„å“åº”ã€‚</p><p><strong>å››ã€HTTP2.0ï¼š</strong></p><p>HTTP &#x2F; 2 å¼•å…¥äºŒè¿›åˆ¶æ•°æ®å¸§å’Œæµçš„æ¦‚å¿µï¼Œå…¶ä¸­å¸§å¯¹æ•°æ®è¿›è¡Œé¡ºåºæ ‡è¯†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™æ ·æµè§ˆå™¨æ”¶åˆ°æ•°æ®ä¹‹åï¼Œå°±å¯ä»¥æŒ‰ç…§åºåˆ—å¯¹æ•°æ®è¿›è¡Œåˆå¹¶ï¼Œè€Œä¸ä¼šå‡ºç°åˆå¹¶åæ•°æ®é”™ä¹±çš„æƒ…å†µã€‚åŒæ ·æ˜¯å› ä¸ºæœ‰äº†åºåˆ—ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥å¹¶è¡Œçš„ä¼ è¾“æ•°æ®ï¼Œè¿™å°±æ˜¯æµæ‰€åšçš„äº‹æƒ…ã€‚</p><p>æµï¼ˆstreamï¼‰ å·²å»ºç«‹è¿æ¥ä¸Šçš„åŒå‘å­—èŠ‚æµ æ¶ˆæ¯ ä¸é€»è¾‘æ¶ˆæ¯å¯¹åº”çš„å®Œæ•´çš„ä¸€ç³»åˆ—æ•°æ®å¸§ å¸§ HTTP2.0 é€šä¿¡çš„æœ€å°å•ä½ï¼Œæ¯ä¸ªå¸§åŒ…å«å¸§å¤´éƒ¨ï¼Œè‡³å°‘ä¹Ÿä¼šæ ‡è¯†å‡ºå½“å‰å¸§æ‰€å±çš„æµï¼ˆstream idï¼‰ã€‚ å¤šè·¯å¤ç”¨ï¼š</p><p>1ã€æ‰€æœ‰çš„HTTP2.0é€šä¿¡éƒ½åœ¨ä¸€ä¸ªTCPè¿æ¥ä¸Šå®Œæˆï¼Œè¿™ä¸ªè¿æ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµã€‚</p><p>2ã€æ¯ä¸ªæ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯ç”±ä¸€æˆ–å¤šä¸ªå¸§ç»„æˆã€‚è¿™äº›å¸§å¯ä»¥ä¹±åºå‘é€ï¼Œç„¶åå†æ ¹æ®</p><p>æ¯ä¸ªå¸§å¤´éƒ¨çš„æµæ ‡è¯†ç¬¦ï¼ˆstream idï¼‰é‡æ–°ç»„è£…ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯ä¸ªè¯·æ±‚æ˜¯ä¸€ä¸ªæ•°æ®æµï¼Œæ•°æ®æµä»¥æ¶ˆæ¯çš„æ–¹å¼å‘é€ï¼Œè€Œæ¶ˆæ¯åˆåˆ†ä¸ºå¤šä¸ªå¸§ï¼Œå¸§å¤´éƒ¨è®°å½•ç€ stream id ç”¨æ¥æ ‡è¯†æ‰€å±çš„æ•°æ®æµï¼Œä¸åŒå±çš„å¸§å¯ä»¥åœ¨è¿æ¥ä¸­éšæœºæ··æ‚åœ¨ä¸€èµ·ã€‚æ¥æ”¶æ–¹å¯ä»¥æ ¹æ® stream id å°†å¸§å†å½’å±åˆ°å„è‡ªä¸åŒçš„è¯·æ±‚å½“ä¸­å»ã€‚</p><p>3ã€å¦å¤–ï¼Œå¤šè·¯å¤ç”¨ï¼ˆè¿æ¥å…±äº«ï¼‰å¯èƒ½ä¼šå¯¼è‡´å…³é”®è¯·æ±‚è¢«é˜»å¡ã€‚HTTP2.0 é‡Œæ¯ä¸ªæ•°æ®æµéƒ½å¯ä»¥è®¾ç½®ä¼˜å…ˆçº§å’Œä¾èµ–ï¼Œä¼˜å…ˆçº§é«˜çš„æ•°æ®æµä¼šè¢«æœåŠ¡å™¨ä¼˜å…ˆå¤„ç†å’Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ•°æ®æµè¿˜å¯ä»¥ä¾èµ–å…¶ä»–çš„å­æ•°æ®æµã€‚</p><p>4ã€å¯è§ï¼ŒHTTP 2.0 å®ç°äº†çœŸæ­£çš„å¹¶è¡Œä¼ è¾“ï¼Œå®ƒèƒ½å¤Ÿåœ¨ä¸€ä¸ª TCP ä¸Šè¿›è¡Œä»»æ„æ•°é‡ HTTP è¯·æ±‚ã€‚è€Œè¿™ä¸ªå¼ºå¤§çš„åŠŸèƒ½åˆ™æ˜¯åŸºäºâ€œäºŒè¿›åˆ¶åˆ†å¸§â€çš„ç‰¹æ€§ã€‚</p><p>å¤´éƒ¨å‹ç¼©</p><p>åœ¨ HTTP1.x ä¸­ï¼Œå¤´éƒ¨å…ƒæ•°æ®éƒ½æ˜¯ä»¥çº¯æ–‡æœ¬çš„å½¢å¼å‘é€çš„ï¼Œé€šå¸¸ä¼šç»™æ¯ä¸ªè¯·æ±‚å¢åŠ  500~800 å­—èŠ‚çš„è´Ÿè·ã€‚</p><p>HTTP 2.0 ä½¿ç”¨ encoder æ¥å‡å°‘éœ€è¦ä¼ è¾“çš„ header å¤§å°ï¼Œé€šè®¯åŒæ–¹å„è‡ª cache ä¸€ä»½ header fields è¡¨ï¼Œæ—¢é¿å…äº†é‡å¤headerçš„ä¼ è¾“ï¼Œåˆå‡å°äº†éœ€è¦ä¼ è¾“çš„å¤§å°ã€‚é«˜æ•ˆçš„å‹ç¼©ç®—æ³•å¯ä»¥å¾ˆå¤§çš„å‹ç¼© headerï¼Œå‡å°‘å‘é€åŒ…çš„æ•°é‡ä»è€Œé™ä½å»¶è¿Ÿã€‚</p><p>æœåŠ¡å™¨æ¨é€ï¼š</p><p>æœåŠ¡å™¨é™¤äº†å¯¹æœ€åˆè¯·æ±‚çš„å“åº”å¤–ï¼ŒæœåŠ¡å™¨è¿˜å¯ä»¥é¢å¤–çš„å‘å®¢æˆ·ç«¯æ¨é€èµ„æºï¼Œè€Œæ— éœ€å®¢æˆ·ç«¯æ˜ç¡®çš„è¯·æ±‚ã€‚</p><h2 id="17ã€è¯´è¯´-HTTP-åè®®ä¸-TCP-IP-åè®®çš„å…³ç³»"><a href="#17ã€è¯´è¯´-HTTP-åè®®ä¸-TCP-IP-åè®®çš„å…³ç³»" class="headerlink" title="17ã€è¯´è¯´ HTTP åè®®ä¸ TCP &#x2F; IP åè®®çš„å…³ç³»"></a>17ã€è¯´è¯´ HTTP åè®®ä¸ TCP &#x2F; IP åè®®çš„å…³ç³»</h2><p>HTTP çš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥æœ¬è´¨ä¸Šæ˜¯ TCP é•¿è¿æ¥å’ŒçŸ­è¿æ¥ã€‚</p><p>HTTP å±äºåº”ç”¨å±‚åè®®ï¼Œåœ¨ä¼ è¾“å±‚ä½¿ç”¨ TCP åè®®ï¼Œåœ¨ç½‘ç»œå±‚ä½¿ç”¨IPåè®®ã€‚</p><p>IP åè®®ä¸»è¦è§£å†³ç½‘ç»œè·¯ç”±å’Œå¯»å€é—®é¢˜ï¼Œ</p><p>TCP åè®®ä¸»è¦è§£å†³å¦‚ä½•åœ¨IPå±‚ä¹‹ä¸Šå¯é åœ°ä¼ é€’æ•°æ®åŒ…ï¼Œä½¿å¾—ç½‘ç»œä¸Šæ¥æ”¶ç«¯æ”¶åˆ°å‘é€ç«¯æ‰€å‘å‡ºçš„æ‰€æœ‰åŒ…ï¼Œå¹¶ä¸”é¡ºåºä¸å‘é€é¡ºåºä¸€è‡´ã€‚TCP åè®®æ˜¯å¯é çš„ã€é¢å‘è¿æ¥çš„ã€‚</p><h2 id="18ã€å¦‚ä½•ç†è§£-HTTP-åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Ÿ"><a href="#18ã€å¦‚ä½•ç†è§£-HTTP-åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Ÿ" class="headerlink" title="18ã€å¦‚ä½•ç†è§£ HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Ÿ"></a>18ã€å¦‚ä½•ç†è§£ HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Ÿ</h2><p>HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼ŒæŒ‡çš„æ˜¯åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ï¼ŒæœåŠ¡å™¨ä¸çŸ¥é“å®¢æˆ·ç«¯æ˜¯ä»€ä¹ˆçŠ¶æ€ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰“å¼€ä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µå’Œä¸Šä¸€æ¬¡æ‰“å¼€è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»ã€‚HTTPæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„é¢å‘è¿æ¥çš„åè®®ï¼Œæ— çŠ¶æ€ä¸ä»£è¡¨ HTTP ä¸èƒ½ä¿æŒ TCP è¿æ¥ï¼Œæ›´ä¸èƒ½ä»£è¡¨ HTTP ä½¿ç”¨çš„æ˜¯ UDP åè®®ï¼ˆæ— è¿æ¥ï¼‰ã€‚</p><h2 id="19ã€ä»€ä¹ˆæ˜¯é•¿è¿æ¥å’ŒçŸ­è¿æ¥ï¼Ÿ"><a href="#19ã€ä»€ä¹ˆæ˜¯é•¿è¿æ¥å’ŒçŸ­è¿æ¥ï¼Ÿ" class="headerlink" title="19ã€ä»€ä¹ˆæ˜¯é•¿è¿æ¥å’ŒçŸ­è¿æ¥ï¼Ÿ"></a>19ã€ä»€ä¹ˆæ˜¯é•¿è¿æ¥å’ŒçŸ­è¿æ¥ï¼Ÿ</h2><p>åœ¨ HTTP &#x2F; 1.0 ä¸­é»˜è®¤ä½¿ç”¨çŸ­è¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ¯è¿›è¡Œä¸€æ¬¡ HTTP æ“ä½œï¼Œå°±å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œä»»åŠ¡ç»“æŸå°±ä¸­æ–­è¿æ¥ã€‚å½“å®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®çš„æŸä¸ª HTML æˆ–å…¶ä»–ç±»å‹çš„ Web é¡µä¸­åŒ…å«æœ‰å…¶ä»–çš„ Web èµ„æºï¼ˆå¦‚ JavaScript æ–‡ä»¶ã€å›¾åƒæ–‡ä»¶ã€CSS æ–‡ä»¶ç­‰ï¼‰ï¼Œæ¯é‡åˆ°è¿™æ ·ä¸€ä¸ªWebèµ„æºï¼Œæµè§ˆå™¨å°±ä¼šé‡æ–°å»ºç«‹ä¸€ä¸ª HTTP ä¼šè¯ã€‚</p><p>è€Œä» HTTP &#x2F; 1.1 èµ·ï¼Œé»˜è®¤ä½¿ç”¨é•¿è¿æ¥ï¼Œç”¨ä»¥ä¿æŒè¿æ¥ç‰¹æ€§ã€‚ä½¿ç”¨é•¿è¿æ¥çš„HTTPåè®®ï¼Œä¼šåœ¨å“åº”å¤´åŠ å…¥è¿™è¡Œä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection:keep-alive</span><br></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨é•¿è¿æ¥çš„æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç½‘é¡µæ‰“å¼€å®Œæˆåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºä¼ è¾“ HTTP æ•°æ®çš„ TCP è¿æ¥ä¸ä¼šå…³é—­ï¼Œå®¢æˆ·ç«¯å†æ¬¡è®¿é—®è¿™ä¸ªæœåŠ¡å™¨æ—¶ï¼Œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸€æ¡å·²ç»å»ºç«‹çš„è¿æ¥ã€‚Keep-Alive ä¸ä¼šæ°¸ä¹…ä¿æŒè¿æ¥ï¼Œå®ƒæœ‰ä¸€ä¸ªä¿æŒæ—¶é—´ï¼Œå¯ä»¥åœ¨ä¸åŒçš„æœåŠ¡å™¨è½¯ä»¶ï¼ˆå¦‚Apacheï¼‰ä¸­è®¾å®šè¿™ä¸ªæ—¶é—´ã€‚å®ç°é•¿è¿æ¥éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ”¯æŒé•¿è¿æ¥ã€‚</p><p>HTTP åè®®çš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥ï¼Œå®è´¨ä¸Šæ˜¯ TCP åè®®çš„é•¿è¿æ¥å’ŒçŸ­è¿æ¥ã€‚</p><h2 id="20ã€é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„ä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#20ã€é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„ä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="20ã€é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„ä¼˜ç¼ºç‚¹ï¼Ÿ"></a>20ã€é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</h2><p>é•¿è¿æ¥å¯ä»¥çœå»è¾ƒå¤šçš„ TCP å»ºç«‹å’Œå…³é—­çš„æ“ä½œï¼Œå‡å°‘æµªè´¹ï¼ŒèŠ‚çº¦æ—¶é—´ ã€‚å¯¹äºé¢‘ç¹è¯·æ±‚èµ„æºçš„å®¢æˆ·æ¥è¯´ï¼Œè¾ƒé€‚ç”¨é•¿è¿æ¥ã€‚ä¸è¿‡è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå­˜æ´»åŠŸèƒ½çš„æ¢æµ‹å‘¨æœŸå¤ªé•¿ï¼Œè¿˜æœ‰å°±æ˜¯å®ƒåªæ˜¯æ¢æµ‹ TCP è¿æ¥çš„å­˜æ´»ï¼Œå±äºæ¯”è¾ƒæ–¯æ–‡çš„åšæ³•ï¼Œé‡åˆ°æ¶æ„çš„è¿æ¥æ—¶ï¼Œä¿æ´»åŠŸèƒ½å°±ä¸å¤Ÿä½¿äº†ã€‚åœ¨é•¿è¿æ¥çš„åº”ç”¨åœºæ™¯ä¸‹ï¼Œclient ç«¯ä¸€èˆ¬ä¸ä¼šä¸»åŠ¨å…³é—­å®ƒä»¬ä¹‹é—´çš„è¿æ¥ï¼ŒClient ä¸ server ä¹‹é—´çš„è¿æ¥å¦‚æœä¸€ç›´ä¸å…³é—­çš„è¯ï¼Œä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œéšç€å®¢æˆ·ç«¯è¿æ¥è¶Šæ¥è¶Šå¤šï¼Œserver æ—©æ™šæœ‰æ‰›ä¸ä½çš„æ—¶å€™ï¼Œè¿™æ—¶å€™ server ç«¯éœ€è¦é‡‡å–ä¸€äº›ç­–ç•¥ï¼Œå¦‚å…³é—­ä¸€äº›é•¿æ—¶é—´æ²¡æœ‰è¯»å†™äº‹ä»¶å‘ç”Ÿçš„è¿æ¥ï¼Œè¿™æ ·å¯ ä»¥é¿å…ä¸€äº›æ¶æ„è¿æ¥å¯¼è‡´ server ç«¯æœåŠ¡å—æŸï¼›å¦‚æœæ¡ä»¶å†å…è®¸å°±å¯ä»¥ä»¥å®¢æˆ·ç«¯æœºå™¨ä¸ºé¢—ç²’åº¦ï¼Œé™åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯çš„æœ€å¤§é•¿è¿æ¥æ•°ï¼Œè¿™æ ·å¯ä»¥å®Œå…¨é¿å…æŸä¸ªè›‹ç–¼çš„å®¢æˆ·ç«¯è¿ç´¯åç«¯æœåŠ¡ã€‚</p><p>çŸ­è¿æ¥å¯¹äºæœåŠ¡å™¨æ¥è¯´ç®¡ç†è¾ƒä¸ºç®€å•ï¼Œå­˜åœ¨çš„è¿æ¥éƒ½æ˜¯æœ‰ç”¨çš„è¿æ¥ï¼Œä¸éœ€è¦é¢å¤–çš„æ§åˆ¶æ‰‹æ®µã€‚ä½†å¦‚æœå®¢æˆ·è¯·æ±‚é¢‘ç¹ï¼Œå°†åœ¨ TCP çš„å»ºç«‹å’Œå…³é—­æ“ä½œä¸Šæµªè´¹æ—¶é—´å’Œå¸¦å®½</p><h2 id="21ã€è¯´è¯´é•¿è¿æ¥çŸ­è¿æ¥çš„æ“ä½œè¿‡ç¨‹"><a href="#21ã€è¯´è¯´é•¿è¿æ¥çŸ­è¿æ¥çš„æ“ä½œè¿‡ç¨‹" class="headerlink" title="21ã€è¯´è¯´é•¿è¿æ¥çŸ­è¿æ¥çš„æ“ä½œè¿‡ç¨‹"></a>21ã€è¯´è¯´é•¿è¿æ¥çŸ­è¿æ¥çš„æ“ä½œè¿‡ç¨‹</h2><p>çŸ­è¿æ¥çš„æ“ä½œæ­¥éª¤æ˜¯ï¼šå»ºç«‹è¿æ¥â€”â€”æ•°æ®ä¼ è¾“â€”â€”å…³é—­è¿æ¥â€¦å»ºç«‹è¿æ¥â€”â€”æ•°æ®ä¼ è¾“â€”â€”å…³é—­è¿æ¥é•¿è¿æ¥çš„æ“ä½œæ­¥éª¤æ˜¯ï¼šå»ºç«‹è¿æ¥â€”â€”æ•°æ®ä¼ è¾“â€¦ï¼ˆä¿æŒè¿æ¥ï¼‰â€¦æ•°æ®ä¼ è¾“â€”â€”å…³é—­è¿æ¥</p><h2 id="22ã€è¯´è¯´-TCP-ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„å…¨è¿‡ç¨‹"><a href="#22ã€è¯´è¯´-TCP-ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„å…¨è¿‡ç¨‹" class="headerlink" title="22ã€è¯´è¯´ TCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„å…¨è¿‡ç¨‹"></a>22ã€è¯´è¯´ TCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„å…¨è¿‡ç¨‹</h2><p><strong>ä¸‰æ¬¡æ¡æ‰‹</strong></p><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ syn åŒ…ï¼ˆsyn&#x3D;xï¼‰åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥ SYN_SEND çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ï¼› ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ° syn åŒ…ï¼Œå¿…é¡»ç¡®è®¤å®¢æˆ·çš„SYNï¼ˆack&#x3D;x+1ï¼‰ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ª SYN åŒ…ï¼ˆsyn&#x3D;yï¼‰ï¼Œå³ SYN+ACK åŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥ SYN_RECV çŠ¶æ€ï¼› ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ SYNï¼‹ACK åŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ… ACKï¼ˆack&#x3D;y+1ï¼‰ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ ESTABLISHED çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚ æ¡æ‰‹è¿‡ç¨‹ä¸­ä¼ é€çš„åŒ…é‡Œä¸åŒ…å«æ•°æ®ï¼Œä¸‰æ¬¡æ¡æ‰‹å®Œæ¯•åï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æ‰æ­£å¼å¼€å§‹ä¼ é€æ•°æ®ã€‚ç†æƒ³çŠ¶æ€ä¸‹ï¼ŒTCPè¿æ¥ä¸€æ—¦å»ºç«‹ï¼Œåœ¨é€šä¿¡åŒæ–¹ä¸­çš„ä»»ä½•ä¸€æ–¹ä¸»åŠ¨å…³é—­è¿æ¥ä¹‹å‰ï¼ŒTCP è¿æ¥éƒ½å°†è¢«ä¸€ç›´ä¿æŒä¸‹å»ã€‚</p><p><strong>å››æ¬¡æŒ¥æ‰‹</strong></p><p>ä¸å»ºç«‹è¿æ¥çš„â€œä¸‰æ¬¡æ¡æ‰‹â€ç±»ä¼¼ï¼Œæ–­å¼€ä¸€ä¸ª TCP è¿æ¥åˆ™éœ€è¦â€œå››æ¬¡æ¡æ‰‹â€ã€‚ ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šä¸»åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ª FINï¼Œç”¨æ¥å…³é—­ä¸»åŠ¨æ–¹åˆ°è¢«åŠ¨å…³é—­æ–¹çš„æ•°æ®ä¼ é€ï¼Œä¹Ÿå°±æ˜¯ä¸»åŠ¨å…³é—­æ–¹å‘Šè¯‰è¢«åŠ¨å…³é—­æ–¹ï¼šæˆ‘å·²ç»ä¸ä¼šå†ç»™ä½ å‘æ•°æ®äº†(å½“ç„¶ï¼Œåœ¨finåŒ…ä¹‹å‰å‘é€å‡ºå»çš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°å¯¹åº”çš„ackç¡®è®¤æŠ¥æ–‡ï¼Œä¸»åŠ¨å…³é—­æ–¹ä¾ç„¶ä¼šé‡å‘è¿™äº›æ•°æ®)ï¼Œä½†æ˜¯ï¼Œæ­¤æ—¶ä¸»åŠ¨å…³é—­æ–¹è¿˜å¯ ä»¥æ¥å—æ•°æ®ã€‚ ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šè¢«åŠ¨å…³é—­æ–¹æ”¶åˆ° FIN åŒ…åï¼Œå‘é€ä¸€ä¸ª ACK ç»™å¯¹æ–¹ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå· +1ï¼ˆä¸ SYN ç›¸åŒï¼Œä¸€ä¸ªFINå ç”¨ä¸€ä¸ªåºå·ï¼‰ã€‚ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šè¢«åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ª FINï¼Œç”¨æ¥å…³é—­è¢«åŠ¨å…³é—­æ–¹åˆ°ä¸»åŠ¨å…³é—­æ–¹çš„æ•°æ®ä¼ é€ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰ä¸»åŠ¨å…³é—­æ–¹ï¼Œæˆ‘çš„æ•°æ®ä¹Ÿå‘é€å®Œäº†ï¼Œä¸ä¼šå†ç»™ä½ å‘æ•°æ®äº†ã€‚ ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šä¸»åŠ¨å…³é—­æ–¹æ”¶åˆ° FIN åï¼Œå‘é€ä¸€ä¸ª ACK ç»™è¢«åŠ¨å…³é—­æ–¹ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå· +1ï¼Œè‡³æ­¤ï¼Œå®Œæˆå››æ¬¡æŒ¥æ‰‹ã€‚</p><h2 id="23ã€è¯´è¯´-TCP-IP-å››å±‚ç½‘ç»œæ¨¡å‹"><a href="#23ã€è¯´è¯´-TCP-IP-å››å±‚ç½‘ç»œæ¨¡å‹" class="headerlink" title="23ã€è¯´è¯´ TCP &#x2F; IP å››å±‚ç½‘ç»œæ¨¡å‹"></a>23ã€è¯´è¯´ TCP &#x2F; IP å››å±‚ç½‘ç»œæ¨¡å‹</h2><p>TCP &#x2F; IPåˆ†å±‚æ¨¡å‹ï¼ˆTCP&#x2F;IP Layening Modelï¼‰è¢«ç§°ä½œå› ç‰¹ç½‘åˆ†å±‚æ¨¡å‹(Internet Layering Model)ã€å› ç‰¹ç½‘å‚è€ƒæ¨¡å‹(Internet Reference Model)ã€‚ä¸‹å›¾è¡¨ç¤ºäº† TCP &#x2F; IP åˆ†å±‚æ¨¡å‹çš„å››å±‚ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/5ac45eb94132ccbeef25d65b48741357645325325.png">â€‹</p><p>TCP &#x2F; IP åè®®è¢«ç»„ç»‡æˆå››ä¸ªæ¦‚å¿µå±‚ï¼Œå…¶ä¸­æœ‰ä¸‰å±‚å¯¹åº”äº ISO å‚è€ƒæ¨¡å‹ä¸­çš„ç›¸åº”å±‚ã€‚TCP &#x2F; IP åè®®æ—å¹¶ä¸åŒ…å«ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚ï¼Œå› æ­¤å®ƒä¸èƒ½ç‹¬ç«‹å®Œæˆæ•´ä¸ªè®¡ç®—æœºç½‘ç»œç³»ç»Ÿçš„åŠŸèƒ½ï¼Œå¿…é¡»ä¸è®¸å¤šå…¶ä»–çš„åè®®ååŒå·¥ä½œã€‚ TCP &#x2F; IP åˆ†å±‚æ¨¡å‹çš„å››ä¸ªåè®®å±‚åˆ†åˆ«å®Œæˆä»¥ä¸‹çš„åŠŸèƒ½ï¼š</p><p><strong>ç¬¬ä¸€å±‚ ç½‘ç»œæ¥å£å±‚</strong></p><p>ç½‘ç»œæ¥å£å±‚åŒ…æ‹¬ç”¨äºåä½œIPæ•°æ®åœ¨å·²æœ‰ç½‘ç»œä»‹è´¨ä¸Šä¼ è¾“çš„åè®®ã€‚</p><p>åè®®ï¼šARP,RARP</p><p><strong>ç¬¬äºŒå±‚ ç½‘ç»œå±‚</strong></p><p>ç½‘ç»œå±‚å¯¹åº”äº OSI ä¸ƒå±‚å‚è€ƒæ¨¡å‹çš„ç½‘ç»œå±‚ã€‚è´Ÿè´£æ•°æ®çš„åŒ…è£…ã€å¯»å€å’Œè·¯ç”±ã€‚åŒæ—¶è¿˜åŒ…å«ç½‘ç»œæ§åˆ¶æŠ¥æ–‡åè®®ï¼ˆInternet Control Message Protocol,ICMPï¼‰ç”¨æ¥æä¾›ç½‘ç»œè¯Šæ–­ä¿¡æ¯ã€‚</p><p>åè®®ï¼šæœ¬å±‚åŒ…å« IP åè®®ã€RIP åè®®ï¼ˆRouting Information Protocolï¼Œè·¯ç”±ä¿¡æ¯åè®®ï¼‰ï¼ŒICMP åè®®ã€‚</p><p><strong>ç¬¬ä¸‰å±‚ ä¼ è¾“å±‚</strong></p><p>ä¼ è¾“å±‚å¯¹åº”äº OSI ä¸ƒå±‚å‚è€ƒæ¨¡å‹çš„ä¼ è¾“å±‚ï¼Œå®ƒæä¾›ä¸¤ç§ç«¯åˆ°ç«¯çš„é€šä¿¡æœåŠ¡ã€‚</p><p>å…¶ä¸­ TCP åè®®(Transmission Control Protocol)æä¾›å¯é çš„æ•°æ®æµè¿è¾“æœåŠ¡ï¼ŒUDP åè®®(Use Datagram Protocol)æä¾›ä¸å¯é çš„ç”¨æˆ·æ•°æ®æŠ¥æœåŠ¡ã€‚</p><p><strong>ç¬¬å››å±‚ åº”ç”¨å±‚</strong></p><p>åº”ç”¨å±‚å¯¹åº”äº OSI ä¸ƒå±‚å‚è€ƒæ¨¡å‹çš„åº”ç”¨å±‚å’Œè¡¨è¾¾å±‚ã€‚å› ç‰¹ç½‘çš„åº”ç”¨å±‚åè®®åŒ…æ‹¬ Fingerã€Whoisã€FTP(æ–‡ä»¶ä¼ è¾“åè®®)ã€Gopherã€HTTP(è¶…æ–‡æœ¬ä¼ è¾“åè®®)ã€Telent(è¿œç¨‹ç»ˆç«¯åè®®)ã€SMTP(ç®€å•é‚®ä»¶ä¼ é€åè®®)ã€IRC(å› ç‰¹ç½‘ä¸­ç»§ä¼šè¯)ã€NNTPï¼ˆç½‘ç»œæ–°é—»ä¼ è¾“åè®®ï¼‰ç­‰ã€‚</p><h2 id="24ã€-è¯´è¯´åŸŸåè§£æè¯¦ç»†è¿‡ç¨‹ï¼Ÿ"><a href="#24ã€-è¯´è¯´åŸŸåè§£æè¯¦ç»†è¿‡ç¨‹ï¼Ÿ" class="headerlink" title="24ã€ è¯´è¯´åŸŸåè§£æè¯¦ç»†è¿‡ç¨‹ï¼Ÿ"></a>24ã€ è¯´è¯´åŸŸåè§£æè¯¦ç»†è¿‡ç¨‹ï¼Ÿ</h2><ol><li>æµè§ˆå™¨è®¿é—® <a href="http://www.baidu.com,è¯¢é—®æœ¬åœ°/">www.baidu.comï¼Œè¯¢é—®æœ¬åœ°</a> DNS æœåŠ¡å™¨æ˜¯å¦ç¼“å­˜äº†è¯¥ç½‘å€è§£æåçš„ IP åœ°å€ã€‚</li><li>å¦‚æœæœ¬åœ° DNS æœåŠ¡å™¨æ²¡æœ‰ç¼“å­˜çš„è¯ï¼Œå°±å» root-servers.net æ ¹æœåŠ¡å™¨æŸ¥è¯¢è¯¥ç½‘å€å¯¹åº”çš„ IP åœ°å€ã€‚</li><li>æ ¹æœåŠ¡å™¨è¿”å›é¡¶çº§åŸŸåæœåŠ¡å™¨çš„ç½‘å€ gtld-servers.netï¼Œç„¶åæœ¬åœ° DNS æœåŠ¡å™¨å»é¡¶çº§åŸŸåæœåŠ¡å™¨æŸ¥è¯¢è¯¥ç½‘å€å¯¹åº”çš„ IP åœ°å€ã€‚</li><li>é¡¶çº§åŸŸåæœåŠ¡å™¨è¿”å› <a href="http://www.baidu.com/">www.baidu.com</a> ä¸»åŒºåŸŸæœåŠ¡å™¨çš„åœ°å€ï¼Œç„¶åæœ¬åœ° DNS æœåŠ¡å™¨å» <a href="http://www.baidu.com/">www.baidu.com</a> ä¸»åŒºåŸŸæœåŠ¡å™¨æŸ¥è¯¢æ­¤åŸŸåå¯¹åº”çš„ IP åœ°å€ã€‚</li><li>æœ¬åœ° DNS æœåŠ¡å™¨æ‹¿åˆ° <a href="http://www.baidu.com/">www.baidu.com</a> è§£æåçš„ IP åœ°å€åï¼Œç¼“å­˜èµ·æ¥ä»¥ä¾¿å¤‡æŸ¥ï¼Œç„¶åæŠŠè§£æåçš„ IP åœ°å€è¿”å›ç»™æµè§ˆå™¨ã€‚</li></ol><h2 id="25ã€-IP-åœ°å€åˆ†ä¸ºå‡ ç±»ï¼Œæ¯ç±»éƒ½ä»£è¡¨ä»€ä¹ˆï¼Œç§ç½‘æ˜¯å“ªäº›ï¼Ÿ"><a href="#25ã€-IP-åœ°å€åˆ†ä¸ºå‡ ç±»ï¼Œæ¯ç±»éƒ½ä»£è¡¨ä»€ä¹ˆï¼Œç§ç½‘æ˜¯å“ªäº›ï¼Ÿ" class="headerlink" title="25ã€ IP åœ°å€åˆ†ä¸ºå‡ ç±»ï¼Œæ¯ç±»éƒ½ä»£è¡¨ä»€ä¹ˆï¼Œç§ç½‘æ˜¯å“ªäº›ï¼Ÿ"></a>25ã€ <strong>IP</strong> åœ°å€åˆ†ä¸ºå‡ ç±»ï¼Œæ¯ç±»éƒ½ä»£è¡¨ä»€ä¹ˆï¼Œç§ç½‘æ˜¯å“ªäº›ï¼Ÿ</h2><p>å¤§è‡´ä¸Šåˆ†ä¸ºå…¬å…±åœ°å€å’Œç§æœ‰åœ°å€ä¸¤å¤§ç±»ï¼Œå…¬å…±åœ°å€å¯ä»¥åœ¨å¤–ç½‘ä¸­éšæ„è®¿é—®ï¼Œç§æœ‰åœ°å€åªèƒ½åœ¨å†…ç½‘è®¿é—®åªæœ‰é€šè¿‡ä»£ç†æœåŠ¡å™¨æ‰å¯ä»¥å’Œå¤–ç½‘é€šä¿¡ã€‚</p><p>å…¬å…±åœ°å€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.0.0.1ï½126.255.255.254</span><br><span class="line">128.0.0.1ï½191.255.255.254</span><br><span class="line">192.0.0.1ï½223.255.255.254</span><br><span class="line">224.0.0.1ï½239.255.255.254</span><br><span class="line">240.0.0.1ï½255.255.255.254</span><br></pre></td></tr></table></figure><p>ç§æœ‰åœ°å€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10.0.0.0ï½10.255.255.255</span><br><span class="line">172.16.0.0ï½172.31.255.255</span><br><span class="line">192.168.0.0ï½192.168.255.255</span><br></pre></td></tr></table></figure><ul><li>0.0.0.0 è·¯ç”±å™¨è½¬å‘ä½¿ç”¨</li><li>127.x.x.x ä¿ç•™</li><li>255.255.255.255 å±€åŸŸç½‘ä¸‹çš„å¹¿æ’­åœ°å€</li></ul><h2 id="26ã€è¯´è¯´-TCP-å¦‚ä½•ä¿è¯å¯é æ€§çš„ï¼Ÿ"><a href="#26ã€è¯´è¯´-TCP-å¦‚ä½•ä¿è¯å¯é æ€§çš„ï¼Ÿ" class="headerlink" title="26ã€è¯´è¯´ TCP å¦‚ä½•ä¿è¯å¯é æ€§çš„ï¼Ÿ"></a>26ã€è¯´è¯´ TCP å¦‚ä½•ä¿è¯å¯é æ€§çš„ï¼Ÿ</h2><p><strong>åºåˆ—å·å’Œç¡®è®¤å·æœºåˆ¶ï¼š</strong></p><p>TCP å‘é€ç«¯å‘é€æ•°æ®åŒ…çš„æ—¶å€™ä¼šé€‰æ‹©ä¸€ä¸ª seq åºåˆ—å·ï¼Œæ¥æ”¶ç«¯æ”¶åˆ°æ•°æ®åŒ…åä¼šæ£€æµ‹æ•°æ®åŒ…çš„å®Œæ•´æ€§ï¼Œå¦‚æœæ£€æµ‹é€šè¿‡ä¼šå“åº”ä¸€ä¸ª ack ç¡®è®¤å·è¡¨ç¤ºæ”¶åˆ°äº†æ•°æ®åŒ…ã€‚</p><p><strong>è¶…æ—¶é‡å‘æœºåˆ¶ï¼š</strong></p><p>TCP å‘é€ç«¯å‘é€äº†æ•°æ®åŒ…åä¼šå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¦‚æœä¸€å®šæ—¶é—´æ²¡æœ‰æ”¶åˆ°æ¥å—ç«¯çš„ç¡®è®¤åï¼Œå°†ä¼šé‡æ–°å‘é€è¯¥æ•°æ®åŒ…ã€‚</p><p><strong>å¯¹ä¹±åºæ•°æ®åŒ…é‡æ–°æ’åºï¼š</strong></p><p>ä» IP ç½‘ç»œå±‚ä¼ è¾“åˆ° TCP å±‚çš„æ•°æ®åŒ…å¯èƒ½ä¼šä¹±åºï¼ŒTCP å±‚ä¼šå¯¹æ•°æ®åŒ…é‡æ–°æ’åºå†å‘ç»™åº”ç”¨å±‚ã€‚</p><p><strong>ä¸¢å¼ƒé‡å¤æ•°æ®ï¼š</strong></p><p>ä» IP ç½‘ç»œå±‚ä¼ è¾“åˆ° TCP å±‚çš„æ•°æ®åŒ…å¯èƒ½ä¼šé‡å¤ï¼ŒTCP å±‚ä¼šä¸¢å¼ƒé‡å¤çš„æ•°æ®åŒ…ã€‚</p><p><strong>æµé‡æ§åˆ¶ï¼š</strong></p><p>TCP å‘é€ç«¯å’Œæ¥æ”¶ç«¯éƒ½æœ‰ä¸€ä¸ªå›ºå®šå¤§å°çš„ç¼“å†²ç©ºé—´ï¼Œä¸ºäº†é˜²æ­¢å‘é€ç«¯å‘é€æ•°æ®çš„é€Ÿåº¦å¤ªå¿«å¯¼è‡´æ¥æ”¶ç«¯ç¼“å†²åŒºæº¢å‡ºï¼Œå‘é€ç«¯åªèƒ½å‘é€æ¥æ”¶ç«¯å¯ä»¥æ¥çº³çš„æ•°æ®ï¼Œä¸ºäº†è¾¾åˆ°è¿™ç§æ§åˆ¶æ•ˆæœï¼ŒTCP ç”¨äº†æµé‡æ§åˆ¶åè®®ï¼ˆå¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£åè®®ï¼‰æ¥å®ç°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œç›¸å…³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mavenç¯‡</title>
      <link href="/posts/31843.html"/>
      <url>/posts/31843.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h3 id="1ã€ä»€ä¹ˆæ˜¯-maven-ï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯-maven-ï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯ maven ï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯ maven ï¼Ÿ</h3><p>maven ä¸»è¦æœåŠ¡äºåŸºäº java å¹³å°çš„é¡¹ç›®æ„å»ºï¼Œä¾èµ–ç®¡ç†å’Œé¡¹ç›®ä¿¡æ¯ç®¡ç†ã€‚</p><p>maven é¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆPOMï¼‰ï¼Œå¯ä»¥é€šè¿‡ä¸€å°æ®µæè¿°ä¿¡æ¯æ¥ç®¡ç†é¡¹ç›®çš„æ„å»ºï¼ŒæŠ¥å‘Šå’Œæ–‡æ¡£çš„é¡¹ç›®ç®¡ç†å·¥å…·è½¯ä»¶ã€‚å®ƒåŒ…å«äº†ä¸€ä¸ªé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼Œä¸€ç»„æ ‡å‡†é›†åˆï¼Œä¸€ä¸ªé¡¹ç›®ç”Ÿå‘½å‘¨æœŸï¼Œä¸€ä¸ªä¾èµ–ç®¡ç†ç³»ç»Ÿå’Œç”¨æ¥è¿è¡Œå®šä¹‰åœ¨ç”Ÿå‘½å‘¨æœŸé˜¶æ®µä¸­æ’ä»¶ç›®æ ‡çš„é€»è¾‘ã€‚å½“ä½¿ç”¨ Maven çš„æ—¶å€™ï¼Œä½ ç”¨ä¸€ä¸ªæ˜ç¡®å®šä¹‰çš„é¡¹å¯¹è±¡æ¨¡å‹æ¥æè¿°ä½ çš„é¡¹ç›®ï¼Œç„¶å Maven å¯ä»¥åº”ç”¨æ¨ªåˆ‡çš„é€»è¾‘ï¼Œè¿™äº›é€»è¾‘æ¥è‡ªäºä¸€ç»„å…±äº«çš„ï¼ˆæˆ–è‡ªå®šä¹‰çš„ï¼‰æ’ä»¶ã€‚</p><h3 id="2ã€Maven-èƒ½ä¸ºæˆ‘ä»¬è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#2ã€Maven-èƒ½ä¸ºæˆ‘ä»¬è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="2ã€Maven èƒ½ä¸ºæˆ‘ä»¬è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>2ã€Maven èƒ½ä¸ºæˆ‘ä»¬è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3><p>â‘ æ·»åŠ ç¬¬ä¸‰æ–¹ jar åŒ…</p><p>æŒ‰ç…§æœ€åŸå§‹çš„åšæ³•ï¼Œæˆ‘ä»¬æ˜¯æ‰‹åŠ¨å¤åˆ¶ jar åŒ…åˆ°é¡¹ç›® WEB-INF &#x2F; lib ä¸‹ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½ä¼šæœ‰ä¸€ä»½ï¼Œé€ æˆå¤§é‡é‡å¤æ–‡ä»¶ã€‚è€Œ Maven å°† jar åŒ…æ”¾åœ¨æœ¬åœ°ä»“åº“ä¸­ç»Ÿä¸€ç®¡ç†ï¼Œéœ€è¦jaråŒ…åªéœ€è¦ç”¨åæ ‡çš„æ–¹å¼å¼•ç”¨å³å¯ã€‚</p><p>â‘¡jar åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»</p><p>jar åŒ…ä¹‹é—´å¾€å¾€ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œå¾ˆå¤š jar éœ€è¦åœ¨å…¶ä»–jaråŒ…çš„æ”¯æŒä¸‹æ‰èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œç§°ä¸º jar åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨å»å¯¼å…¥ï¼Œè¦çŸ¥é“ jar åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»å¹¶ä¸€ä¸€å¯¼å…¥æ˜¯åŠå…¶éº»çƒ¦è€Œä¸”å®¹æ˜“å‡ºé”™çš„ã€‚å¦‚æœä½¿ç”¨ Mavenï¼Œå®ƒèƒ½å¤Ÿå°†å½“å‰ jar åŒ…æ‰€ä¾èµ–çš„å…¶ä»–æ‰€æœ‰ jar åŒ…å…¨éƒ¨å¯¼å…¥ã€‚</p><p>â‘¢è·å–ç¬¬ä¸‰æ–¹ jar åŒ…å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦ç”¨åˆ°å¾ˆå¤š jar åŒ…ï¼Œæ¯ä¸ªjaråŒ…åœ¨å®˜ç½‘è·å–çš„æ–¹å¼ä¸å°½ç›¸åŒï¼Œç»™å·¥ä½œå¸¦æ¥äº†é¢å¤–å›°éš¾ã€‚ä½†æ˜¯ä½¿ç”¨Maven å¯ä»¥ä»¥åæ ‡çš„æ–¹å¼ä¾èµ–ä¸€ä¸ª jar åŒ…ï¼ŒMaven ä»ä¸­å¤®ä»“åº“è¿›è¡Œä¸‹è½½ï¼Œå¹¶åŒæ—¶ä¸‹è½½è¿™ä¸ª jar åŒ…ä¾èµ–çš„å…¶ä»– jar åŒ…ã€‚</p><p>â‘£å°†é¡¹ç›®æ‹†åˆ†ä¸ºå¤šä¸ªå·¥ç¨‹æ¨¡å—</p><p>é¡¹ç›®çš„è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œå·²ç»ä¸å¯èƒ½é€šè¿‡ package ç»“æ„æ¥åˆ’åˆ†æ¨¡å—ï¼Œå¿…é¡»å°†é¡¹ç›®æ‹†åˆ†ä¸ºå¤šä¸ªå·¥ç¨‹ååŒå¼€å‘ã€‚</p><h3 id="3ã€è¯´è¯´-maven-æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#3ã€è¯´è¯´-maven-æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="3ã€è¯´è¯´ maven æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"></a>3ã€è¯´è¯´ maven æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</h3><p><strong>ä¼˜ç‚¹</strong></p><ul><li>ç®€åŒ–äº†é¡¹ç›®ä¾èµ–ç®¡ç†</li><li>æ˜“äºä¸Šæ‰‹ï¼Œå¯¹äºæ–°æ‰‹æ¥è¯´äº†è§£å‡ ä¸ªå¸¸ç”¨å‘½ä»¤å³å¯æ»¡è¶³æ—¥å¸¸å·¥ä½œ</li><li>ä¾¿äºä¸æŒç»­é›†æˆå·¥å…·ï¼ˆjenkinsï¼‰æ•´åˆ</li><li>ä¾¿äºé¡¹ç›®å‡çº§ï¼Œæ— è®ºæ˜¯é¡¹ç›®æœ¬èº«è¿˜æ˜¯é¡¹ç›®ä½¿ç”¨çš„ä¾èµ–</li><li>maven æœ‰å¾ˆå¤šæ’ä»¶ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•ï¼Œæ¯”å¦‚ç”Ÿäº§ç«™ç‚¹ï¼Œè‡ªåŠ¨å‘å¸ƒç‰ˆæœ¬ç­‰</li></ul><p><strong>ç¼ºç‚¹</strong></p><ul><li>Maven æ˜¯ä¸€ä¸ªåºå¤§çš„æ„å»ºç³»ç»Ÿï¼Œå­¦ä¹ éš¾åº¦å¤§ã€‚ï¼ˆå¾ˆå¤šéƒ½å¯ä»¥è¿™æ ·è¯´ï¼Œå…¥é—¨å®¹æ˜“[ä¼˜ç‚¹]ä½†æ˜¯ç²¾é€šéš¾[ç¼ºç‚¹]ï¼‰</li><li>Mavené‡‡ç”¨çº¦å®šçº¦å®šä¼˜äºé…ç½®çš„ç­–ç•¥ï¼Œè™½ç„¶ä¸Šæ‰‹å®¹æ˜“ä½†æ˜¯ä¸€æ—¦å‡ºç°é—®é¢˜ï¼Œéš¾äºè°ƒè¯•ä¸­ç½‘ç»œç¯å¢ƒè¾ƒå·®ï¼Œå¾ˆå¤š repository æ— æ³•è®¿é—®</li></ul><h3 id="4ã€ä»€ä¹ˆæ˜¯-Maven-çš„åæ ‡ï¼Ÿ"><a href="#4ã€ä»€ä¹ˆæ˜¯-Maven-çš„åæ ‡ï¼Ÿ" class="headerlink" title="4ã€ä»€ä¹ˆæ˜¯ Maven çš„åæ ‡ï¼Ÿ"></a>4ã€ä»€ä¹ˆæ˜¯ Maven çš„åæ ‡ï¼Ÿ</h3><p>Maven å…¶ä¸­ä¸€ä¸ªæ ¸å¿ƒçš„ä½œç”¨å°±æ˜¯ç®¡ç†é¡¹ç›®çš„ä¾èµ–ï¼Œå¼•å…¥æˆ‘ä»¬æ‰€éœ€çš„å„ç§ jar åŒ…ç­‰ã€‚ä¸ºäº†èƒ½è‡ªåŠ¨åŒ–çš„è§£æä»»ä½•ä¸€ä¸ª Java æ„ä»¶ï¼ŒMaven å¿…é¡»å°†è¿™äº›JaråŒ…æˆ–è€…å…¶ä»–èµ„æºè¿›è¡Œå”¯ä¸€æ ‡è¯†ï¼Œè¿™æ˜¯ç®¡ç†é¡¹ç›®çš„ä¾èµ–çš„åŸºç¡€ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦è¯´çš„åæ ‡ã€‚åŒ…æ‹¬æˆ‘ä»¬è‡ªå·±å¼€å‘çš„é¡¹ç›®ï¼Œä¹Ÿæ˜¯è¦é€šè¿‡åæ ‡è¿›è¡Œå”¯ä¸€æ ‡è¯†çš„ï¼Œè¿™æ ·æ‰èƒ½æ‰å…¶å®ƒé¡¹ç›®ä¸­è¿›è¡Œä¾èµ–å¼•ç”¨ã€‚</p><p>maven çš„åæ ‡é€šè¿‡ groupIdï¼ŒartifactIdï¼Œversion å”¯ä¸€æ ‡å¿—ä¸€ä¸ªæ„ä»¶ã€‚groupId é€šå¸¸ä¸ºå…¬å¸æˆ–ç»„ç»‡åå­—ï¼ŒartifactId é€šå¸¸ä¸ºé¡¹ç›®åç§°ï¼ŒversionId ä¸ºç‰ˆæœ¬å·ã€‚</p><h3 id="5ã€è®²ä¸€ä¸‹-maven-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#5ã€è®²ä¸€ä¸‹-maven-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="5ã€è®²ä¸€ä¸‹ maven çš„ç”Ÿå‘½å‘¨æœŸ"></a>5ã€è®²ä¸€ä¸‹ maven çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>Maven çš„ç”Ÿå‘½å‘¨æœŸï¼šä»æˆ‘ä»¬çš„é¡¹ç›®æ„å»ºï¼Œä¸€ç›´åˆ°é¡¹ç›®å‘å¸ƒçš„è¿™ä¸ªè¿‡ç¨‹ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/bae9346c4e26f178421a2d0c578eec95645325325.png">â€‹</p><p>æ¯ä¸ªé˜¶æ®µçš„è¯´æ˜</p><table><thead><tr><th>é˜¶æ®µ</th><th>å¤„ç†</th><th>æè¿°</th></tr></thead><tbody><tr><td>validate</td><td>éªŒè¯é¡¹ç›®</td><td>éªŒè¯é¡¹ç›®æ˜¯å¦æ­£ç¡®ä¸”æ‰€æœ‰å¿…é¡»ä¿¡æ¯æ˜¯å¯ç”¨çš„</td></tr><tr><td>compile</td><td>æ‰§è¡Œç¼–è¯‘</td><td>æºä»£ç ç¼–è¯‘åœ¨æ­¤é˜¶æ®µå®Œæˆ</td></tr><tr><td>test</td><td>æµ‹è¯•</td><td>ä½¿ç”¨é€‚å½“çš„å•å…ƒæµ‹è¯•æ¡†æ¶(ï¼ˆä¾‹ JUnitï¼‰è¿è¡Œæµ‹è¯•ã€‚</td></tr><tr><td>package</td><td>æ‰“åŒ…</td><td>åˆ›å»º JAR &#x2F; WAR åŒ…å¦‚åœ¨ pom.xml ä¸­å®šä¹‰æåŠçš„åŒ…</td></tr><tr><td>verify</td><td>æ£€æŸ¥</td><td>å¯¹é›†æˆæµ‹è¯•çš„ç»“æœè¿›è¡Œæ£€æŸ¥ï¼Œä»¥ä¿è¯è´¨é‡è¾¾æ ‡</td></tr><tr><td>install</td><td>å®‰è£…</td><td>å®‰è£…æ‰“åŒ…çš„é¡¹ç›®åˆ°æœ¬åœ°ä»“åº“ï¼Œä»¥ä¾›å…¶ä»–é¡¹ç›®ä½¿ç”¨</td></tr><tr><td>deploy</td><td>éƒ¨ç½²</td><td>æ‹·è´æœ€ç»ˆçš„å·¥ç¨‹åŒ…åˆ°è¿œç¨‹ä»“åº“ä¸­ï¼Œä»¥å…±äº«ç»™å…¶ä»–å¼€å‘äººå‘˜å’Œå·¥ç¨‹</td></tr></tbody></table><h3 id="6ã€è¯´è¯´ä½ ç†Ÿæ‚‰å“ªäº›-maven-å‘½ä»¤ï¼Ÿ"><a href="#6ã€è¯´è¯´ä½ ç†Ÿæ‚‰å“ªäº›-maven-å‘½ä»¤ï¼Ÿ" class="headerlink" title="6ã€è¯´è¯´ä½ ç†Ÿæ‚‰å“ªäº› maven å‘½ä»¤ï¼Ÿ"></a>6ã€è¯´è¯´ä½ ç†Ÿæ‚‰å“ªäº› maven å‘½ä»¤ï¼Ÿ</h3><p>mvn archetype:generate åˆ›å»º Maven é¡¹ç›®</p><p>mvn compile ç¼–è¯‘æºä»£ç </p><p>mvn deploy å‘å¸ƒé¡¹ç›®</p><p>mvn test-compile ç¼–è¯‘æµ‹è¯•æºä»£ç </p><p>mvn test è¿è¡Œåº”ç”¨ç¨‹åºä¸­çš„å•å…ƒæµ‹è¯•</p><p>mvn site ç”Ÿæˆé¡¹ç›®ç›¸å…³ä¿¡æ¯çš„ç½‘ç«™</p><p>mvn clean æ¸…é™¤é¡¹ç›®ç›®å½•ä¸­çš„ç”Ÿæˆç»“æœ</p><p>mvn package æ ¹æ®é¡¹ç›®ç”Ÿæˆçš„jar</p><p>mvn install åœ¨æœ¬åœ° Repository ä¸­å®‰è£… jar</p><p>mvn eclipse:eclipse ç”Ÿæˆ eclipse é¡¹ç›®æ–‡ä»¶</p><p>mvnjetty:run å¯åŠ¨ jetty æœåŠ¡</p><p>mvntomcat:run å¯åŠ¨ tomcat æœåŠ¡</p><p>mvn clean package -Dmaven.test.skip&#x3D;true: æ¸…é™¤ä»¥å‰çš„åŒ…åé‡æ–°æ‰“åŒ…ï¼Œè·³è¿‡æµ‹è¯•ç±»</p><h3 id="7ã€å¦‚ä½•è§£å†³ä¾èµ–ä¼ é€’å¼•èµ·çš„ç‰ˆæœ¬å†²çªï¼Ÿ"><a href="#7ã€å¦‚ä½•è§£å†³ä¾èµ–ä¼ é€’å¼•èµ·çš„ç‰ˆæœ¬å†²çªï¼Ÿ" class="headerlink" title="7ã€å¦‚ä½•è§£å†³ä¾èµ–ä¼ é€’å¼•èµ·çš„ç‰ˆæœ¬å†²çªï¼Ÿ"></a>7ã€å¦‚ä½•è§£å†³ä¾èµ–ä¼ é€’å¼•èµ·çš„ç‰ˆæœ¬å†²çªï¼Ÿ</h3><p>å¯é€šè¿‡ dependency çš„ exclusion å…ƒç´ æ’é™¤æ‰ä¾èµ–ã€‚</p><h3 id="8ã€è¯´è¯´-maven-çš„ä¾èµ–åŸåˆ™"><a href="#8ã€è¯´è¯´-maven-çš„ä¾èµ–åŸåˆ™" class="headerlink" title="8ã€è¯´è¯´ maven çš„ä¾èµ–åŸåˆ™"></a>8ã€è¯´è¯´ maven çš„ä¾èµ–åŸåˆ™</h3><ul><li>æœ€çŸ­è·¯å¾„åŸåˆ™ï¼ˆä¾èµ–ä¼ é€’çš„è·¯å¾„è¶ŠçŸ­è¶Šä¼˜å…ˆï¼‰</li><li>pom æ–‡ä»¶ç”³æ˜é¡ºåºä¼˜å…ˆï¼ˆè·¯å¾„é•¿åº¦ä¸€æ ·ï¼Œåˆ™å…ˆç”³æ˜çš„ä¼˜å…ˆï¼‰</li><li>è¦†å†™åŸåˆ™ï¼ˆå½“å‰pomæ–‡ä»¶é‡Œç”³æ˜çš„ç›´æ¥è¦†ç›–çˆ¶å·¥ç¨‹ä¼ è¿‡æ¥çš„ï¼‰</li><li>çˆ¶çº§ä¾èµ–æ¯”å­çº§é«˜</li></ul><h3 id="9ã€è¯´è¯´ä¾èµ–çš„è§£ææœºåˆ¶ï¼Ÿ"><a href="#9ã€è¯´è¯´ä¾èµ–çš„è§£ææœºåˆ¶ï¼Ÿ" class="headerlink" title="9ã€è¯´è¯´ä¾èµ–çš„è§£ææœºåˆ¶ï¼Ÿ"></a>9ã€è¯´è¯´ä¾èµ–çš„è§£ææœºåˆ¶ï¼Ÿ</h3><p>å½“ä¾èµ–çš„èŒƒå›´æ˜¯ system çš„æ—¶å€™ï¼ŒMaven ç›´æ¥ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­è§£ææ„ä»¶ã€‚</p><p>æ ¹æ®ä¾èµ–åæ ‡è®¡ç®—ä»“åº“è·¯å¾„ï¼Œå°è¯•ç›´æ¥ä»æœ¬åœ°ä»“åº“å¯»æ‰¾æ„ä»¶ï¼Œå¦‚æœå‘ç°å¯¹åº”çš„æ„ä»¶ï¼Œå°±è§£ææˆåŠŸã€‚</p><p>å¦‚æœåœ¨æœ¬åœ°ä»“åº“ä¸å­˜åœ¨ç›¸åº”çš„æ„ä»¶ï¼Œå°±éå†æ‰€æœ‰çš„è¿œç¨‹ä»“åº“ï¼Œå‘ç°åï¼Œä¸‹è½½å¹¶è§£æä½¿ç”¨ã€‚</p><p>å¦‚æœä¾èµ–çš„ç‰ˆæœ¬æ˜¯ RELEASE æˆ– LATESTï¼Œå°±åŸºäºæ›´æ–°ç­–ç•¥è¯»å–æ‰€æœ‰è¿œç¨‹ä»“åº“çš„å…ƒæ•°æ®æ–‡ä»¶ï¼ˆgroupId&#x2F;artifactId&#x2F;maven-metadata.xmlï¼‰ï¼Œå°†å…¶ä¸æœ¬åœ°ä»“åº“çš„å¯¹åº”å…ƒåˆå¹¶åï¼Œè®¡ç®—å‡º RELEASE æˆ–è€… LATEST çœŸå®çš„å€¼ï¼Œç„¶ååŸºäºè¯¥å€¼æ£€æŸ¥æœ¬åœ°ä»“åº“ï¼Œæˆ–è€…ä»è¿œç¨‹ä»“åº“ä¸‹è½½ã€‚</p><p>å¦‚æœä¾èµ–çš„ç‰ˆæœ¬æ˜¯ SNAPSHOTï¼Œå°±åŸºäºæ›´æ–°ç­–ç•¥è¯»å–æ‰€æœ‰è¿œç¨‹ä»“åº“çš„å…ƒæ•°æ®æ–‡ä»¶ï¼Œå°†å®ƒä¸æœ¬åœ°ä»“åº“</p><p>å¯¹åº”çš„å…ƒæ•°æ®åˆå¹¶ï¼Œå¾—åˆ°æœ€æ–°å¿«ç…§ç‰ˆæœ¬çš„å€¼ï¼Œç„¶åæ ¹æ®è¯¥å€¼æ£€æŸ¥æœ¬åœ°ä»“åº“ï¼Œæˆ–ä»è¿œç¨‹ä»“åº“ä¸‹è½½ã€‚</p><p>å¦‚æœæœ€åè§£æå¾—åˆ°çš„æ„ä»¶ç‰ˆæœ¬åŒ…å«æœ‰æ—¶é—´æˆ³ï¼Œå…ˆå°†è¯¥æ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œå†å°†æ–‡ä»¶åä¸­æ—¶é—´æˆ³ä¿¡æ¯åˆ é™¤ï¼Œå‰©ä¸‹ SNAPSHOT å¹¶ä½¿ç”¨ï¼ˆä»¥éæ—¶é—´æˆ³çš„å½¢å¼ä½¿ç”¨ï¼‰ã€‚</p><h3 id="10ã€è¯´è¯´æ’ä»¶çš„è§£ææœºåˆ¶"><a href="#10ã€è¯´è¯´æ’ä»¶çš„è§£ææœºåˆ¶" class="headerlink" title="10ã€è¯´è¯´æ’ä»¶çš„è§£ææœºåˆ¶"></a>10ã€<strong>è¯´è¯´æ’ä»¶çš„è§£ææœºåˆ¶</strong></h3><p>ä¸ä¾èµ–çš„æ„ä»¶ä¸€æ ·ï¼Œæ’ä»¶ä¹Ÿæ˜¯åŸºäºåæ ‡ä¿å­˜åœ¨ Maven ä»“åº“ä¸­ã€‚åœ¨ç”¨åˆ°æ’ä»¶çš„æ—¶å€™ä¼šå…ˆä»æœ¬åœ°ä»“åº“æŸ¥æ‰¾æ’ä»¶ï¼Œå¦‚æœæœ¬åœ°ä»“åº“æ²¡æœ‰åˆ™ä»è¿œç¨‹ä»“åº“æŸ¥æ‰¾æ’ä»¶å¹¶ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“ã€‚ä¸æ™®é€šçš„ä¾èµ–æ„ä»¶ä¸åŒçš„æ˜¯ï¼ŒMaven ä¼šåŒºåˆ«å¯¹å¾…æ™®é€šä¾èµ–çš„è¿œç¨‹ä»“åº“ä¸æ’ä»¶çš„è¿œç¨‹ä»“åº“ã€‚å‰é¢æåˆ°çš„é…ç½®è¿œç¨‹ä»“åº“åªä¼šå¯¹æ™®é€šçš„ä¾èµ–æœ‰æ•ˆæœã€‚å½“ Maven éœ€è¦çš„æ’ä»¶åœ¨æœ¬åœ°ä»“åº“ä¸å­˜åœ¨æ—¶æ˜¯ä¸ä¼šå»æˆ‘ä»¬ä»¥å‰é…ç½®çš„è¿œç¨‹ä»“åº“æŸ¥æ‰¾æ’ä»¶çš„ï¼Œè€Œæ˜¯éœ€è¦æœ‰ä¸“é—¨çš„æ’ä»¶è¿œç¨‹ä»“åº“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLç¯‡</title>
      <link href="/posts/62535.html"/>
      <url>/posts/62535.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h3 id="1ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆ"><a href="#1ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆ" class="headerlink" title="1ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆ"></a>1ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆ</h3><p>ç¬¬ä¸€èŒƒå¼ï¼šåˆ—ä¸å¯å†åˆ†</p><p>ç¬¬äºŒèŒƒå¼ï¼šè¡Œå¯ä»¥å”¯ä¸€åŒºåˆ†ï¼Œä¸»é”®çº¦æŸ</p><p>ç¬¬ä¸‰èŒƒå¼ï¼šè¡¨çš„éä¸»å±æ€§ä¸èƒ½ä¾èµ–ä¸å…¶ä»–è¡¨çš„éä¸»å±æ€§å¤–é”®çº¦æŸä¸”ä¸‰å¤§èŒƒå¼æ˜¯ä¸€çº§ä¸€çº§ä¾èµ–çš„ï¼Œç¬¬äºŒèŒƒå¼å»ºç«‹åœ¨ç¬¬ä¸€èŒƒå¼ä¸Šï¼Œç¬¬ä¸‰èŒƒå¼å»ºç«‹ç¬¬ä¸€ç¬¬äºŒèŒƒå¼ä¸Šã€‚</p><h3 id="2ã€MySQL-æ•°æ®åº“å¼•æ“æœ‰å“ªäº›"><a href="#2ã€MySQL-æ•°æ®åº“å¼•æ“æœ‰å“ªäº›" class="headerlink" title="2ã€MySQL æ•°æ®åº“å¼•æ“æœ‰å“ªäº›"></a>2ã€MySQL æ•°æ®åº“å¼•æ“æœ‰å“ªäº›</h3><p>å¦‚ä½•æŸ¥çœ‹ MySQL æä¾›çš„æ‰€æœ‰å­˜å‚¨å¼•æ“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show engines;</span><br></pre></td></tr></table></figure><p><img src="https://i0.hdslb.com/bfs/article/0f6565e1c7bd6f421f34098bea9eb1c0645325325.png">â€‹</p><p><img src="https://i0.hdslb.com/bfs/article/ad0f286b6931cefd824532454130675d645325325.png">â€‹</p><p>MySQL å¸¸ç”¨å¼•æ“åŒ…æ‹¬ï¼šMYISAMã€Innodbã€Memoryã€MERGE</p><ul><li>MYISAMï¼šå…¨è¡¨é”ï¼Œæ‹¥æœ‰è¾ƒé«˜çš„æ‰§è¡Œé€Ÿåº¦ï¼Œä¸æ”¯æŒäº‹åŠ¡ï¼Œä¸æ”¯æŒå¤–é”®ï¼Œå¹¶å‘æ€§èƒ½å·®ï¼Œå ç”¨ç©ºé—´ç›¸å¯¹è¾ƒå°ï¼Œå¯¹äº‹åŠ¡å®Œæ•´æ€§æ²¡æœ‰è¦æ±‚ï¼Œä»¥selectã€insert ä¸ºä¸»çš„åº”ç”¨åŸºæœ¬ä¸Šå¯ä»¥ä½¿ç”¨è¿™å¼•æ“</li><li>Innodbï¼šè¡Œçº§é”ï¼Œæä¾›äº†å…·æœ‰æäº¤ã€å›æ»šå’Œå´©æºƒå›å¤èƒ½åŠ›çš„äº‹åŠ¡å®‰å…¨ï¼Œæ”¯æŒè‡ªåŠ¨å¢é•¿åˆ—ï¼Œæ”¯æŒå¤–é”®çº¦æŸï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œå ç”¨ç©ºé—´æ˜¯MYISAM çš„ 2.5 å€ï¼Œå¤„ç†æ•ˆç‡ç›¸å¯¹ä¼šå·®ä¸€äº›</li><li>Memoryï¼šå…¨è¡¨é”ï¼Œå­˜å‚¨åœ¨å†…å®¹ä¸­ï¼Œé€Ÿåº¦å¿«ï¼Œä½†ä¼šå ç”¨å’Œæ•°æ®é‡æˆæ­£æ¯”çš„å†…å­˜ç©ºé—´ä¸”æ•°æ®åœ¨ MySQL é‡å¯æ—¶ä¼šä¸¢å¤±ï¼Œé»˜è®¤ä½¿ç”¨ HASHç´¢å¼•ï¼Œæ£€ç´¢æ•ˆç‡éå¸¸é«˜ï¼Œä½†ä¸é€‚ç”¨äºç²¾ç¡®æŸ¥æ‰¾ï¼Œä¸»è¦ç”¨äºé‚£äº›å†…å®¹å˜åŒ–ä¸é¢‘ç¹çš„ä»£ç è¡¨</li><li>MERGEï¼šæ˜¯ä¸€ç»„ MYISAM è¡¨çš„ç»„åˆ</li></ul><h3 id="3ã€è¯´è¯´-InnoDB-ä¸-MyISAM-çš„åŒºåˆ«"><a href="#3ã€è¯´è¯´-InnoDB-ä¸-MyISAM-çš„åŒºåˆ«" class="headerlink" title="3ã€è¯´è¯´ InnoDB ä¸ MyISAM çš„åŒºåˆ«"></a>3ã€è¯´è¯´ InnoDB ä¸ MyISAM çš„åŒºåˆ«</h3><p>åœ¨ MySQL 5.5 åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒMyISAM æ˜¯é»˜è®¤çš„å­˜å‚¨å¼•æ“ï¼Œè€Œåœ¨ MySQL 5.5 ç‰ˆæœ¬ä»¥åï¼Œé»˜è®¤ä½¿ç”¨ InnoDB å­˜å‚¨å¼•æ“ã€‚</p><ol><li>InnoDB æ”¯æŒäº‹åŠ¡ï¼ŒMyISAM ä¸æ”¯æŒï¼Œå¯¹äº InnoDB æ¯ä¸€æ¡ SQL è¯­è¨€éƒ½é»˜è®¤å°è£…æˆäº‹åŠ¡ï¼Œè‡ªåŠ¨æäº¤ï¼Œè¿™æ ·ä¼šå½±å“é€Ÿåº¦ï¼Œæ‰€ä»¥æœ€å¥½æŠŠå¤šæ¡ SQL è¯­è¨€æ”¾åœ¨ begin å’Œ commit ä¹‹é—´ï¼Œç»„æˆä¸€ä¸ªäº‹åŠ¡ï¼›InnoDB éœ€è¦æ›´å¤šå­˜å‚¨ç©ºé—´ï¼Œä¼šåœ¨å†…å­˜ä¸­å»ºç«‹å…¶ä¸“ç”¨çš„ç¼“å†²æ± ç”¨äºé«˜é€Ÿç¼“å†²æ•°æ®å’Œç´¢å¼•ã€‚InnoDB æ”¯æŒè‡ªåŠ¨å¥”æºƒæ¢å¤ç‰¹æ€§ã€‚</li><li>InnoDB æ”¯æŒå¤–é”®ï¼Œè€Œ MyISAM ä¸æ”¯æŒã€‚å¯¹ä¸€ä¸ªåŒ…å«å¤–é”®çš„ InnoDB è¡¨è½¬ä¸º MYISAM ä¼šå¤±è´¥ï¼›</li><li>InnoDB æ˜¯èšé›†ç´¢å¼•ï¼Œæ•°æ®æ–‡ä»¶æ˜¯å’Œç´¢å¼•ç»‘åœ¨ä¸€èµ·çš„ï¼Œå¿…é¡»è¦æœ‰ä¸»é”®ï¼Œé€šè¿‡ä¸»é”®ç´¢å¼•æ•ˆç‡å¾ˆé«˜ã€‚ä½†æ˜¯è¾…åŠ©ç´¢å¼•éœ€è¦ä¸¤æ¬¡æŸ¥è¯¢ï¼Œå…ˆæŸ¥è¯¢åˆ°ä¸»é”®ï¼Œç„¶åå†é€šè¿‡ä¸»é”®æŸ¥è¯¢åˆ°æ•°æ®ã€‚å› æ­¤ï¼Œä¸»é”®ä¸åº”è¯¥è¿‡å¤§ï¼Œå› ä¸ºä¸»é”®å¤ªå¤§ï¼Œå…¶ä»–ç´¢å¼•ä¹Ÿéƒ½ä¼šå¾ˆå¤§ã€‚è€Œ MyISAM æ˜¯éèšé›†ç´¢å¼•ï¼Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•ä¿å­˜çš„æ˜¯æ•°æ®æ–‡ä»¶çš„æŒ‡é’ˆã€‚ä¸»é”®ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•æ˜¯ç‹¬ç«‹çš„ã€‚</li><li>InnoDB ä¸ä¿å­˜è¡¨çš„å…·ä½“è¡Œæ•°ï¼Œæ‰§è¡Œ select count(*) from table æ—¶éœ€è¦å…¨è¡¨æ‰«æã€‚è€Œ MyISAM ç”¨ä¸€ä¸ªå˜é‡ä¿å­˜äº†æ•´ä¸ªè¡¨çš„è¡Œæ•°ï¼ŒMyISAM ä¸æ”¯æŒè¡Œçº§é”ï¼Œæ‰§è¡Œä¸Šè¿°è¯­å¥æ—¶åªéœ€è¦è¯»å‡ºè¯¥å˜é‡å³å¯ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼›</li><li>Innodb ä¸æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼Œè€Œ MyISAM æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¸Š MyISAM è¦é«˜ï¼›</li></ol><p>InnoDB å’Œ MyISAM æ˜¯ä½¿ç”¨ MySQL æ—¶æœ€å¸¸ç”¨çš„ä¸¤ç§å¼•æ“ç±»å‹ï¼Œæˆ‘ä»¬é‡ç‚¹æ¥çœ‹ä¸‹ä¸¤è€…åŒºåˆ«ã€‚</p><ul><li>äº‹åŠ¡å’Œå¤–é”®<br>InnoDB æ”¯æŒäº‹åŠ¡å’Œå¤–é”®ï¼Œå…·æœ‰å®‰å…¨æ€§å’Œå®Œæ•´æ€§ï¼Œé€‚åˆå¤§é‡ insert æˆ– update æ“ä½œ<br>MyISAM ä¸æ”¯æŒäº‹åŠ¡å’Œå¤–é”®ï¼Œå®ƒæä¾›é«˜é€Ÿå­˜å‚¨å’Œæ£€ç´¢ï¼Œé€‚åˆå¤§é‡çš„ select æŸ¥è¯¢æ“ä½œ</li><li>é”æœºåˆ¶<br>InnoDB æ”¯æŒè¡Œçº§é”ï¼Œé”å®šæŒ‡å®šè®°å½•ã€‚åŸºäºç´¢å¼•æ¥åŠ é”å®ç°ã€‚<br>MyISAM æ”¯æŒè¡¨çº§é”ï¼Œé”å®šæ•´å¼ è¡¨ã€‚</li><li>ç´¢å¼•ç»“æ„<br>InnoDB ä½¿ç”¨èšé›†ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰ï¼Œç´¢å¼•å’Œè®°å½•åœ¨ä¸€èµ·å­˜å‚¨ï¼Œæ—¢ç¼“å­˜ç´¢å¼•ï¼Œä¹Ÿç¼“å­˜è®°å½•ã€‚<br>MyISAM ä½¿ç”¨éèšé›†ç´¢å¼•ï¼ˆéèšç°‡ç´¢å¼•ï¼‰ï¼Œç´¢å¼•å’Œè®°å½•åˆ†å¼€ã€‚</li><li>å¹¶å‘å¤„ç†èƒ½åŠ›<br>MyISAM ä½¿ç”¨è¡¨é”ï¼Œä¼šå¯¼è‡´å†™æ“ä½œå¹¶å‘ç‡ä½ï¼Œè¯»ä¹‹é—´å¹¶ä¸é˜»å¡ï¼Œè¯»å†™é˜»å¡ã€‚<br>InnoDB è¯»å†™é˜»å¡å¯ä»¥ä¸éš”ç¦»çº§åˆ«æœ‰å…³ï¼Œå¯ä»¥é‡‡ç”¨å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰æ¥æ”¯æŒé«˜å¹¶å‘</li><li>å­˜å‚¨æ–‡ä»¶<br>InnoDB è¡¨å¯¹åº”ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ª.frm è¡¨ç»“æ„æ–‡ä»¶ï¼Œä¸€ä¸ª.ibd æ•°æ®æ–‡ä»¶ã€‚InnoDB è¡¨æœ€å¤§æ”¯æŒ 64 TBï¼›<br>MyISAM è¡¨å¯¹åº”ä¸‰ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ª.frm è¡¨ç»“æ„æ–‡ä»¶ï¼Œä¸€ä¸ª MYD è¡¨æ•°æ®æ–‡ä»¶ï¼Œä¸€ä¸ª .MYI ç´¢å¼•æ–‡ä»¶ã€‚ä» MySQL5.0 å¼€å§‹é»˜è®¤é™åˆ¶æ˜¯256 TBã€‚</li></ul><p><img src="https://i0.hdslb.com/bfs/article/74936390d9ed593a293fa830c94ed5b5645325325.png">â€‹</p><p>MyISAM é€‚ç”¨åœºæ™¯</p><ul><li>ä¸éœ€è¦äº‹åŠ¡æ”¯æŒï¼ˆä¸æ”¯æŒï¼‰</li><li>å¹¶å‘ç›¸å¯¹è¾ƒä½ï¼ˆé”å®šæœºåˆ¶é—®é¢˜ï¼‰</li><li>æ•°æ®ä¿®æ”¹ç›¸å¯¹è¾ƒå°‘ï¼Œä»¥è¯»ä¸ºä¸»</li><li>æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸é«˜</li></ul><p>InnoDB é€‚ç”¨åœºæ™¯</p><ul><li>éœ€è¦äº‹åŠ¡æ”¯æŒï¼ˆå…·æœ‰è¾ƒå¥½çš„äº‹åŠ¡ç‰¹æ€§ï¼‰</li><li>è¡Œçº§é”å®šå¯¹é«˜å¹¶å‘æœ‰å¾ˆå¥½çš„é€‚åº”èƒ½åŠ›</li><li>æ•°æ®æ›´æ–°è¾ƒä¸ºé¢‘ç¹çš„åœºæ™¯</li><li>æ•°æ®ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜</li><li>ç¡¬ä»¶è®¾å¤‡å†…å­˜è¾ƒå¤§ï¼Œå¯ä»¥åˆ©ç”¨ InnoDB è¾ƒå¥½çš„ç¼“å­˜èƒ½åŠ›æ¥æé«˜å†…å­˜åˆ©ç”¨ç‡ï¼Œå‡å°‘ç£ç›˜ IO</li></ul><p>ä¸¤ç§å¼•æ“è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ</p><ul><li>æ˜¯å¦éœ€è¦äº‹åŠ¡ï¼Ÿæœ‰ï¼ŒInnoDB</li><li>æ˜¯å¦å­˜åœ¨å¹¶å‘ä¿®æ”¹ï¼Ÿæœ‰ï¼ŒInnoDB</li><li>æ˜¯å¦è¿½æ±‚å¿«é€ŸæŸ¥è¯¢ï¼Œä¸”æ•°æ®ä¿®æ”¹å°‘ï¼Ÿæ˜¯ï¼ŒMyISAM</li><li>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ InnoDB</li></ul><p>æ‰©å±•èµ„æ–™ï¼šå„ä¸ªå­˜å‚¨å¼•æ“ç‰¹æ€§å¯¹æ¯”</p><p><img src="https://i0.hdslb.com/bfs/article/cfe13898130fd0e6ee0a9921a371de61645325325.png">â€‹</p><h3 id="4ã€æ•°æ®åº“çš„äº‹åŠ¡"><a href="#4ã€æ•°æ®åº“çš„äº‹åŠ¡" class="headerlink" title="4ã€æ•°æ®åº“çš„äº‹åŠ¡"></a>4ã€æ•°æ®åº“çš„äº‹åŠ¡</h3><p><strong>ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿï¼š</strong>  å¤šæ¡ sql è¯­å¥ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p><p><strong>äº‹åŠ¡çš„ç‰¹æ€§ï¼š</strong></p><p><strong>æ•°æ®åº“äº‹åŠ¡ç‰¹æ€§ï¼šåŸå­æ€§ï¼ˆAtomicï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰ã€æŒä¹…æ€§ï¼ˆDurabiliyï¼‰ã€‚ç®€ç§° ACIDã€‚</strong></p><ul><li>åŸå­æ€§ï¼šç»„æˆä¸€ä¸ªäº‹åŠ¡çš„å¤šä¸ªæ•°æ®åº“æ“ä½œæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„åŸå­å•å…ƒï¼Œåªæœ‰æ‰€æœ‰æ“ä½œéƒ½æˆåŠŸï¼Œæ•´ä¸ªäº‹åŠ¡æ‰ä¼šæäº¤ã€‚ä»»ä½•ä¸€ä¸ªæ“ä½œå¤±è´¥ï¼Œå·²ç»æ‰§è¡Œçš„ä»»ä½•æ“ä½œéƒ½å¿…é¡»æ’¤é”€ï¼Œè®©æ•°æ®åº“è¿”å›åˆå§‹çŠ¶æ€ã€‚</li><li>ä¸€è‡´æ€§ï¼šäº‹åŠ¡æ“ä½œæˆåŠŸåï¼Œæ•°æ®åº“æ‰€å¤„çš„çŠ¶æ€å’Œå®ƒçš„ä¸šåŠ¡è§„åˆ™æ˜¯ä¸€è‡´çš„ã€‚å³æ•°æ®ä¸ä¼šè¢«ç ´åã€‚å¦‚ A è½¬è´¦ 100 å…ƒç»™ Bï¼Œä¸ç®¡æ“ä½œæ˜¯å¦æˆåŠŸï¼ŒA å’Œ B çš„è´¦æˆ·æ€»é¢æ˜¯ä¸å˜çš„ã€‚</li><li>éš”ç¦»æ€§ï¼šåœ¨å¹¶å‘æ•°æ®æ“ä½œæ—¶ï¼Œä¸åŒçš„äº‹åŠ¡æ‹¥æœ‰å„è‡ªçš„æ•°æ®ç©ºé—´ï¼Œå®ƒä»¬çš„æ“ä½œä¸ä¼šå¯¹å½¼æ­¤äº§ç”Ÿå¹²æ‰°</li><li>æŒä¹…æ€§ï¼šä¸€æ—¦äº‹åŠ¡æäº¤æˆåŠŸï¼Œäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚</li></ul><h3 id="5ã€ç´¢å¼•æ˜¯ä»€ä¹ˆ"><a href="#5ã€ç´¢å¼•æ˜¯ä»€ä¹ˆ" class="headerlink" title="5ã€ç´¢å¼•æ˜¯ä»€ä¹ˆ"></a>5ã€ç´¢å¼•æ˜¯ä»€ä¹ˆ</h3><p>å®˜æ–¹ä»‹ç»ç´¢å¼•æ˜¯å¸®åŠ© MySQL **é«˜æ•ˆè·å–æ•°æ® **çš„ <strong>æ•°æ®ç»“æ„</strong>ã€‚æ›´é€šä¿—çš„è¯´ï¼Œæ•°æ®åº“ç´¢å¼•å¥½æ¯”æ˜¯ä¸€æœ¬ä¹¦å‰é¢çš„ç›®å½•ï¼Œèƒ½ <strong>åŠ å¿«æ•°æ®åº“çš„æŸ¥è¯¢é€Ÿåº¦</strong>ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ç´¢å¼•æœ¬èº«ä¹Ÿå¾ˆå¤§ï¼Œä¸å¯èƒ½å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤ <strong>ç´¢å¼•å¾€å¾€æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„æ–‡ä»¶ä¸­çš„</strong>ï¼ˆå¯èƒ½å­˜å‚¨åœ¨å•ç‹¬çš„ç´¢å¼•æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯èƒ½å’Œæ•°æ®ä¸€èµ·å­˜å‚¨åœ¨æ•°æ®æ–‡ä»¶ä¸­ï¼‰ã€‚</p><p><strong>æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„ç´¢å¼•ï¼ŒåŒ…æ‹¬èšé›†ç´¢å¼•ã€è¦†ç›–ç´¢å¼•ã€ç»„åˆç´¢å¼•ã€å‰ç¼€ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ç­‰ï¼Œæ²¡æœ‰ç‰¹åˆ«è¯´æ˜ï¼Œé»˜è®¤éƒ½æ˜¯ä½¿ç”¨ B+ æ ‘ç»“æ„ç»„ç»‡ï¼ˆå¤šè·¯æœç´¢æ ‘ï¼Œå¹¶ä¸ä¸€å®šæ˜¯äºŒå‰çš„ï¼‰çš„ç´¢å¼•ã€‚</strong></p><h3 id="6ã€SQL-ä¼˜åŒ–æ‰‹æ®µæœ‰å“ªäº›"><a href="#6ã€SQL-ä¼˜åŒ–æ‰‹æ®µæœ‰å“ªäº›" class="headerlink" title="6ã€SQL ä¼˜åŒ–æ‰‹æ®µæœ‰å“ªäº›"></a>6ã€SQL ä¼˜åŒ–æ‰‹æ®µæœ‰å“ªäº›</h3><p>1ã€æŸ¥è¯¢è¯­å¥ä¸­ä¸è¦ä½¿ç”¨ select *</p><p>2ã€å°½é‡å‡å°‘å­æŸ¥è¯¢ï¼Œä½¿ç”¨å…³è”æŸ¥è¯¢ï¼ˆleft joinï¼Œright joinï¼Œinner joinï¼‰æ›¿ä»£</p><p>3ã€å‡å°‘ä½¿ç”¨ IN æˆ–è€… NOT INï¼Œä½¿ç”¨ existsï¼Œnot exists æˆ–è€…å…³è”æŸ¥è¯¢è¯­å¥æ›¿ä»£</p><p>4ã€or çš„æŸ¥è¯¢å°½é‡ç”¨ union æˆ–è€… union all ä»£æ›¿ï¼ˆåœ¨ç¡®è®¤æ²¡æœ‰é‡å¤æ•°æ®æˆ–è€…ä¸ç”¨å‰”é™¤é‡å¤æ•°æ®æ—¶ï¼Œunion all ä¼šæ›´å¥½ï¼‰</p><p>5ã€åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨ !&#x3D; æˆ– &lt;&gt; æ“ä½œç¬¦ï¼Œå¦åˆ™å°†å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚</p><p>6ã€åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ null å€¼åˆ¤æ–­ï¼Œå¦åˆ™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¦‚ï¼š select id from t where num is null å¯ä»¥åœ¨ num ä¸Šè®¾ç½®é»˜è®¤å€¼ 0ï¼Œç¡®ä¿è¡¨ä¸­ num åˆ—æ²¡æœ‰ null å€¼ï¼Œç„¶åè¿™æ ·æŸ¥è¯¢ï¼š select id from t where num &#x3D; 0</p><h3 id="7ã€ç®€å•è¯´ä¸€è¯´-dropã€delete-ä¸-truncate-çš„åŒºåˆ«"><a href="#7ã€ç®€å•è¯´ä¸€è¯´-dropã€delete-ä¸-truncate-çš„åŒºåˆ«" class="headerlink" title="7ã€ç®€å•è¯´ä¸€è¯´ dropã€delete ä¸ truncate çš„åŒºåˆ«"></a>7ã€ç®€å•è¯´ä¸€è¯´ dropã€delete ä¸ truncate çš„åŒºåˆ«</h3><p>SQL ä¸­çš„ dropã€deleteã€truncate éƒ½è¡¨ç¤ºåˆ é™¤ï¼Œä½†æ˜¯ä¸‰è€…æœ‰ä¸€äº›å·®åˆ«</p><p>delete å’Œ truncate åªåˆ é™¤è¡¨çš„æ•°æ®ä¸åˆ é™¤è¡¨çš„ç»“æ„ é€Ÿåº¦ï¼Œä¸€èˆ¬æ¥è¯´ï¼šdrop &gt; truncate &gt; delete delete è¯­å¥æ˜¯ dmlï¼Œè¿™ä¸ªæ“ä½œä¼šæ”¾åˆ°rollback segement ä¸­,äº‹åŠ¡æäº¤ä¹‹åæ‰ç”Ÿæ•ˆï¼›å¦‚æœæœ‰ç›¸åº”çš„ triggerï¼Œæ‰§è¡Œçš„æ—¶å€™å°†è¢«è§¦å‘ã€‚ truncateï¼Œdrop æ˜¯ ddlï¼Œ æ“ä½œç«‹å³ç”Ÿæ•ˆï¼ŒåŸæ•°æ®ä¸æ”¾åˆ° rollback segmentä¸­ï¼Œä¸èƒ½å›æ»šæ“ä½œä¸è§¦å‘ triggerã€‚</p><h3 id="8ã€ä»€ä¹ˆæ˜¯è§†å›¾"><a href="#8ã€ä»€ä¹ˆæ˜¯è§†å›¾" class="headerlink" title="8ã€ä»€ä¹ˆæ˜¯è§†å›¾"></a>8ã€ä»€ä¹ˆæ˜¯è§†å›¾</h3><p>è§†å›¾æ˜¯ä¸€ç§è™šæ‹Ÿçš„è¡¨ï¼Œå…·æœ‰å’Œç‰©ç†è¡¨ç›¸åŒçš„åŠŸèƒ½ã€‚å¯ä»¥å¯¹è§†å›¾è¿›è¡Œå¢ï¼Œæ”¹ï¼ŒæŸ¥ï¼Œæ“ä½œï¼Œè¯•å›¾é€šå¸¸æ˜¯æœ‰ä¸€ä¸ªè¡¨æˆ–è€…å¤šä¸ªè¡¨çš„è¡Œæˆ–åˆ—çš„å­é›†ã€‚å¯¹è§†å›¾çš„ä¿®æ”¹ä¸å½±å“åŸºæœ¬è¡¨ã€‚å®ƒä½¿å¾—æˆ‘ä»¬è·å–æ•°æ®æ›´å®¹æ˜“ï¼Œç›¸æ¯”å¤šè¡¨æŸ¥è¯¢ã€‚</p><h3 id="9ã€-ä»€ä¹ˆæ˜¯å†…è”æ¥ã€å·¦å¤–è”æ¥ã€å³å¤–è”æ¥ï¼Ÿ"><a href="#9ã€-ä»€ä¹ˆæ˜¯å†…è”æ¥ã€å·¦å¤–è”æ¥ã€å³å¤–è”æ¥ï¼Ÿ" class="headerlink" title="9ã€ ä»€ä¹ˆæ˜¯å†…è”æ¥ã€å·¦å¤–è”æ¥ã€å³å¤–è”æ¥ï¼Ÿ"></a>9ã€ ä»€ä¹ˆæ˜¯å†…è”æ¥ã€å·¦å¤–è”æ¥ã€å³å¤–è”æ¥ï¼Ÿ</h3><ul><li>å†…è”æ¥ï¼ˆInner Joinï¼‰ï¼šåŒ¹é…2å¼ è¡¨ä¸­ç›¸å…³è”çš„è®°å½•ã€‚</li><li>å·¦å¤–è”æ¥ï¼ˆLeft Outer Joinï¼‰ï¼šé™¤äº†åŒ¹é…2å¼ è¡¨ä¸­ç›¸å…³è”çš„è®°å½•å¤–ï¼Œè¿˜ä¼šåŒ¹é…å·¦è¡¨ä¸­å‰©ä½™çš„è®°å½•ï¼Œå³è¡¨ä¸­æœªåŒ¹é…åˆ°çš„å­—æ®µç”¨ NULL è¡¨ç¤ºã€‚</li><li>å³å¤–è”æ¥ï¼ˆRight Outer Joinï¼‰ï¼šé™¤äº†åŒ¹é… 2 å¼ è¡¨ä¸­ç›¸å…³è”çš„è®°å½•å¤–ï¼Œè¿˜ä¼šåŒ¹é…å³è¡¨ä¸­å‰©ä½™çš„è®°å½•ï¼Œå·¦è¡¨ä¸­æœªåŒ¹é…åˆ°çš„å­—æ®µç”¨ NULL è¡¨ç¤ºã€‚åœ¨åˆ¤å®šå·¦è¡¨å’Œå³è¡¨æ—¶ï¼Œè¦æ ¹æ®è¡¨åå‡ºç°åœ¨ Outer Join çš„å·¦å³ä½ç½®å…³ç³»ã€‚</li></ul><h3 id="10ã€å¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜ï¼Ÿ"><a href="#10ã€å¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜ï¼Ÿ" class="headerlink" title="10ã€å¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜ï¼Ÿ"></a>10ã€å¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜ï¼Ÿ</h3><p>åœ¨å…¸å‹çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¤šä¸ªäº‹åŠ¡å¹¶å‘è¿è¡Œï¼Œç»å¸¸ä¼šæ“ä½œç›¸åŒçš„æ•°æ®æ¥å®Œæˆå„è‡ªçš„ä»»åŠ¡ï¼ˆå¤šä¸ªç”¨æˆ·å¯¹åŒä¸€æ•°æ®è¿›è¡Œæ“ä½œï¼‰ã€‚å¹¶å‘è™½ç„¶æ˜¯å¿…é¡»çš„ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´ä»¥ä¸‹çš„é—®é¢˜ã€‚</p><ul><li><strong>è„è¯»ï¼ˆDirty readï¼‰:</strong>  å½“ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è®¿é—®æ•°æ®å¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œè¿™ç§ä¿®æ”¹è¿˜æ²¡æœ‰æäº¤åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ—¶å¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®äº†è¿™ä¸ªæ•°æ®ï¼Œç„¶åä½¿ç”¨äº†è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¿™ä¸ªæ•°æ®æ˜¯è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®ï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°çš„è¿™ä¸ªæ•°æ®æ˜¯â€œè„æ•°æ®â€ï¼Œä¾æ®â€œè„æ•°æ®â€æ‰€åšçš„æ“ä½œå¯èƒ½æ˜¯ä¸æ­£ç¡®çš„ã€‚</li><li><strong>ä¸¢å¤±ä¿®æ”¹ï¼ˆLost to modifyï¼‰:</strong>  æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡è¯»å–ä¸€ä¸ªæ•°æ®æ—¶ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®äº†è¯¥æ•°æ®ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­ä¿®æ”¹äº†è¿™ä¸ªæ•°æ®åï¼Œç¬¬äºŒä¸ªäº‹åŠ¡ä¹Ÿä¿®æ”¹äº†è¿™ä¸ªæ•°æ®ã€‚è¿™æ ·ç¬¬ä¸€ä¸ªäº‹åŠ¡å†…çš„ä¿®æ”¹ç»“æœå°±è¢«ä¸¢å¤±ï¼Œå› æ­¤ç§°ä¸ºä¸¢å¤±ä¿®æ”¹ã€‚ ä¾‹å¦‚ï¼šäº‹åŠ¡ 1 è¯»å–æŸè¡¨ä¸­çš„æ•°æ® A &#x3D; 20ï¼Œäº‹åŠ¡ 2 ä¹Ÿè¯»å– A &#x3D; 20ï¼Œäº‹åŠ¡ 1 ä¿®æ”¹ A &#x3D; A - 1ï¼Œäº‹åŠ¡ 2 ä¹Ÿä¿®æ”¹ A &#x3D; A - 1ï¼Œæœ€ç»ˆç»“æœ A &#x3D; 19ï¼Œäº‹åŠ¡ 1 çš„ä¿®æ”¹è¢«ä¸¢å¤±ã€‚</li><li><strong>ä¸å¯é‡å¤è¯»ï¼ˆUnrepeatablereadï¼‰:</strong>  æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»åŒä¸€æ•°æ®ã€‚åœ¨è¿™ä¸ªäº‹åŠ¡è¿˜æ²¡æœ‰ç»“æŸæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿè®¿é—®è¯¥æ•°æ®ã€‚é‚£ä¹ˆï¼Œåœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸­çš„ä¸¤æ¬¡è¯»æ•°æ®ä¹‹é—´ï¼Œç”±äºç¬¬äºŒä¸ªäº‹åŠ¡çš„ä¿®æ”¹å¯¼è‡´ç¬¬ä¸€ä¸ªäº‹åŠ¡ä¸¤æ¬¡è¯»å–çš„æ•°æ®å¯èƒ½ä¸å¤ªä¸€æ ·ã€‚è¿™å°±å‘ç”Ÿäº†åœ¨ä¸€ä¸ªäº‹åŠ¡å†…ä¸¤æ¬¡è¯»åˆ°çš„æ•°æ®æ˜¯ä¸ä¸€æ ·çš„æƒ…å†µï¼Œå› æ­¤ç§°ä¸ºä¸å¯é‡å¤è¯»ã€‚</li><li><strong>å¹»è¯»ï¼ˆPhantom readï¼‰:</strong>  å¹»è¯»ä¸ä¸å¯é‡å¤è¯»ç±»ä¼¼ã€‚å®ƒå‘ç”Ÿåœ¨ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰è¯»å–äº†å‡ è¡Œæ•°æ®ï¼Œæ¥ç€å¦ä¸€ä¸ªå¹¶å‘äº‹åŠ¡ï¼ˆT2ï¼‰æ’å…¥äº†ä¸€äº›æ•°æ®æ—¶ã€‚åœ¨éšåçš„æŸ¥è¯¢ä¸­ï¼Œç¬¬ä¸€ä¸ªäº‹åŠ¡ï¼ˆT1ï¼‰å°±ä¼šå‘ç°å¤šäº†ä¸€äº›åŸæœ¬ä¸å­˜åœ¨çš„è®°å½•ï¼Œå°±å¥½åƒå‘ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œæ‰€ä»¥ç§°ä¸ºå¹»è¯»ã€‚</li></ul><p><strong>ä¸å¯é‡å¤è¯»å’Œå¹»è¯»åŒºåˆ«ï¼š</strong></p><p>ä¸å¯é‡å¤è¯»çš„é‡ç‚¹æ˜¯ä¿®æ”¹æ¯”å¦‚å¤šæ¬¡è¯»å–ä¸€æ¡è®°å½•å‘ç°å…¶ä¸­æŸäº›åˆ—çš„å€¼è¢«ä¿®æ”¹ï¼Œå¹»è¯»çš„é‡ç‚¹åœ¨äºæ–°å¢æˆ–è€…åˆ é™¤æ¯”å¦‚å¤šæ¬¡è¯»å–ä¸€æ¡è®°å½•å‘ç°è®°å½•å¢å¤šæˆ–å‡å°‘äº†ã€‚</p><h3 id="11ã€äº‹åŠ¡éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQL-çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ï¼Ÿ"><a href="#11ã€äº‹åŠ¡éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQL-çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ï¼Ÿ" class="headerlink" title="11ã€äº‹åŠ¡éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQL çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ï¼Ÿ"></a>11ã€äº‹åŠ¡éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQL çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ï¼Ÿ</h3><p><strong>SQL</strong> <strong>æ ‡å‡†å®šä¹‰äº†å››ä¸ªéš”ç¦»çº§åˆ«ï¼š</strong></p><ul><li><strong>READ-UNCOMMITTEDï¼ˆè¯»å–æœªæäº¤)ï¼š</strong>  æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå…è®¸è¯»å–å°šæœªæäº¤çš„æ•°æ®å˜æ›´ï¼Œ<strong>å¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»</strong>ã€‚</li><li><strong>READ-COMMITTEDï¼ˆè¯»å–å·²æäº¤ï¼‰ï¼š</strong>  å…è®¸è¯»å–å¹¶å‘äº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œ<strong>å¯ä»¥é˜»æ­¢è„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿ</strong>ã€‚</li><li><strong>REPEATABLE-READï¼ˆå¯é‡å¤è¯»ï¼‰ï¼š</strong>  å¯¹åŒä¸€å­—æ®µçš„å¤šæ¬¡è¯»å–ç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œé™¤éæ•°æ®æ˜¯è¢«æœ¬èº«äº‹åŠ¡è‡ªå·±æ‰€ä¿®æ”¹ï¼Œ<strong>å¯ä»¥é˜»æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿ</strong>ã€‚</li><li><strong>SERIALIZABLEï¼ˆå¯ä¸²è¡ŒåŒ–ï¼‰ï¼š</strong>  æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨æœä» ACID çš„éš”ç¦»çº§åˆ«ã€‚æ‰€æœ‰çš„äº‹åŠ¡ä¾æ¬¡é€ä¸ªæ‰§è¡Œï¼Œè¿™æ ·äº‹åŠ¡ä¹‹é—´å°±å®Œå…¨ä¸å¯èƒ½äº§ç”Ÿå¹²æ‰°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>è¯¥çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»</strong>ã€‚</li></ul><table><thead><tr><th><strong>éš”ç¦»çº§åˆ«</strong></th><th><strong>è„è¯»</strong></th><th><strong>ä¸å¯é‡å¤è¯»</strong></th><th>å¹»<strong>å½±</strong>è¯»</th></tr></thead><tbody><tr><td>READ-UNCOMMITTED</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>READ-COMMITTED</td><td>Ã—</td><td>âˆš</td><td>âˆš</td></tr><tr><td>REPEATABLE-READ</td><td>Ã—</td><td>Ã—</td><td>âˆš</td></tr><tr><td>SERIALIZABLE</td><td>Ã—</td><td>Ã—</td><td>Ã—</td></tr></tbody></table><p>MySQL InnoDB å­˜å‚¨å¼•æ“çš„é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯ <strong>REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰</strong> ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ SELECT @@tx_isolationï¼›å‘½ä»¤æ¥æŸ¥çœ‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT @@tx_isolation;</span><br><span class="line">+-----------------+</span><br><span class="line">| @@tx_isolation |</span><br><span class="line">+-----------------+</span><br><span class="line">| REPEATABLE-READ |</span><br><span class="line">+-----------------+</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šä¸ SQL æ ‡å‡†ä¸åŒçš„åœ°æ–¹åœ¨äº InnoDB å­˜å‚¨å¼•æ“åœ¨ <strong>REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰</strong>  äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ä½¿ç”¨çš„æ˜¯ Next-Key Lock é”ç®—æ³•ï¼Œå› æ­¤å¯ä»¥é¿å…å¹»è¯»çš„äº§ç”Ÿï¼Œè¿™ä¸å…¶ä»–æ•°æ®åº“ç³»ç»Ÿï¼ˆå¦‚ SQL Serverï¼‰æ˜¯ä¸åŒçš„ã€‚æ‰€ä»¥è¯´ InnoDB å­˜å‚¨å¼•æ“çš„é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯ <strong>REPEATABLEREADï¼ˆå¯é‡è¯»ï¼‰</strong>  å·²ç»å¯ä»¥å®Œå…¨ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§è¦æ±‚ï¼Œå³è¾¾åˆ°äº†  SQL æ ‡å‡†çš„ <strong>SERIALIZABLEï¼ˆå¯ä¸²è¡ŒåŒ–ï¼‰éš”ç¦»çº§åˆ«ã€‚å› ä¸ºéš”ç¦»çº§åˆ«è¶Šä½ï¼Œäº‹åŠ¡è¯·æ±‚çš„é”è¶Šå°‘ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æ•°æ®åº“ç³»ç»Ÿçš„éš”ç¦»çº§åˆ«éƒ½æ˜¯ READ-COMMITTEDï¼ˆè¯»å–æäº¤å†…å®¹ï¼‰</strong>  ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“çš„æ˜¯ InnoDB å­˜å‚¨å¼•æ“é»˜è®¤ä½¿ç”¨(<strong>REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰</strong>  å¹¶ä¸ä¼šæœ‰ä»»ä½•æ€§èƒ½æŸå¤±ã€‚</p><p>InnoDB å­˜å‚¨å¼•æ“åœ¨ <strong>åˆ†å¸ƒå¼äº‹åŠ¡</strong> çš„æƒ…å†µä¸‹ä¸€èˆ¬ä¼šç”¨åˆ° <strong>SERIALIZABLEï¼ˆå¯ä¸²è¡ŒåŒ–ï¼‰</strong>  éš”ç¦»çº§åˆ«ã€‚</p><h3 id="12ã€å¤§è¡¨å¦‚ä½•ä¼˜åŒ–ï¼Ÿ"><a href="#12ã€å¤§è¡¨å¦‚ä½•ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="12ã€å¤§è¡¨å¦‚ä½•ä¼˜åŒ–ï¼Ÿ"></a>12ã€å¤§è¡¨å¦‚ä½•ä¼˜åŒ–ï¼Ÿ</h3><p>å½“ MySQL å•è¡¨è®°å½•æ•°è¿‡å¤§æ—¶ï¼Œæ•°æ®åº“çš„ CRUD æ€§èƒ½ä¼šæ˜æ˜¾ä¸‹é™ï¼Œä¸€äº›å¸¸è§çš„ä¼˜åŒ–æªæ–½å¦‚ä¸‹ï¼š</p><p><strong>1.</strong>  <strong>é™å®šæ•°æ®çš„èŒƒå›´</strong></p><p>åŠ¡å¿…ç¦æ­¢ä¸å¸¦ä»»ä½•é™åˆ¶æ•°æ®èŒƒå›´æ¡ä»¶çš„æŸ¥è¯¢è¯­å¥ã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬å½“ç”¨æˆ·åœ¨æŸ¥è¯¢è®¢å•å†å²çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶åœ¨ä¸€ä¸ªæœˆçš„èŒƒå›´å†…ï¼›</p><p><strong>2.</strong>  <strong>è¯» &#x2F; å†™åˆ†ç¦»</strong></p><p>ç»å…¸çš„æ•°æ®åº“æ‹†åˆ†æ–¹æ¡ˆï¼Œä¸»åº“è´Ÿè´£å†™ï¼Œä»åº“è´Ÿè´£è¯»ï¼›</p><p><strong>3.</strong>  <strong>å‚ç›´åˆ†åŒº</strong></p><p><strong>æ ¹æ®æ•°æ®åº“é‡Œé¢æ•°æ®è¡¨çš„ç›¸å…³æ€§è¿›è¡Œæ‹†åˆ†ã€‚</strong>  ä¾‹å¦‚ï¼Œç”¨æˆ·è¡¨ä¸­æ—¢æœ‰ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯åˆæœ‰ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¯ä»¥å°†ç”¨æˆ·è¡¨æ‹†åˆ†æˆä¸¤ä¸ªå•ç‹¬çš„è¡¨ï¼Œç”šè‡³æ”¾åˆ°å•ç‹¬çš„åº“åšåˆ†åº“ã€‚</p><p><strong>ç®€å•æ¥è¯´å‚ç›´æ‹†åˆ†æ˜¯æŒ‡æ•°æ®è¡¨åˆ—çš„æ‹†åˆ†ï¼ŒæŠŠä¸€å¼ åˆ—æ¯”è¾ƒå¤šçš„è¡¨æ‹†åˆ†ä¸ºå¤šå¼ è¡¨ã€‚</strong>  å¦‚ä¸‹æ‰€ç¤ºï¼Œè¿™æ ·æ¥è¯´å¤§å®¶åº”è¯¥å°±æ›´å®¹æ˜“ç†è§£äº†ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://github.com/gsjqwyl/JavaInterview">https://github.com/gsjqwyl/JavaInterview</a></p><ul><li><strong>å‚ç›´æ‹†åˆ†çš„ä¼˜ç‚¹ï¼š</strong>  å¯ä»¥ä½¿å¾—åˆ—æ•°æ®å˜å°ï¼Œåœ¨æŸ¥è¯¢æ—¶å‡å°‘è¯»å–çš„ Block æ•°ï¼Œå‡å°‘ I &#x2F; O æ¬¡æ•°ã€‚æ­¤å¤–ï¼Œå‚ç›´åˆ†åŒºå¯ä»¥ç®€åŒ–è¡¨çš„ç»“æ„ï¼Œæ˜“äºç»´æŠ¤ã€‚</li><li><strong>å‚ç›´æ‹†åˆ†çš„ç¼ºç‚¹ï¼š</strong>  ä¸»é”®ä¼šå‡ºç°å†—ä½™ï¼Œéœ€è¦ç®¡ç†å†—ä½™åˆ—ï¼Œå¹¶ä¼šå¼•èµ· Join æ“ä½œï¼Œå¯ä»¥é€šè¿‡åœ¨åº”ç”¨å±‚è¿›è¡Œ Join æ¥è§£å†³ã€‚æ­¤å¤–ï¼Œå‚ç›´åˆ†åŒºä¼šè®©äº‹åŠ¡å˜å¾—æ›´åŠ å¤æ‚ï¼›</li></ul><p><strong>4.</strong>  <strong>æ°´å¹³åˆ†åŒº</strong></p><p><strong>ä¿æŒæ•°æ®è¡¨ç»“æ„ä¸å˜ï¼Œé€šè¿‡æŸç§ç­–ç•¥å­˜å‚¨æ•°æ®åˆ†ç‰‡ã€‚è¿™æ ·æ¯ä¸€ç‰‡æ•°æ®åˆ†æ•£åˆ°ä¸åŒçš„è¡¨æˆ–è€…åº“ä¸­ï¼Œè¾¾åˆ°äº†åˆ†å¸ƒå¼çš„ç›®çš„ã€‚ æ°´å¹³æ‹†åˆ†å¯ä»¥æ”¯æ’‘éå¸¸å¤§çš„æ•°æ®é‡ã€‚</strong></p><p>æ°´å¹³æ‹†åˆ†æ˜¯æŒ‡æ•°æ®è¡¨è¡Œçš„æ‹†åˆ†ï¼Œè¡¨çš„è¡Œæ•°è¶…è¿‡ 200 ä¸‡è¡Œæ—¶ï¼Œå°±ä¼šå˜æ…¢ï¼Œè¿™æ—¶å¯ä»¥æŠŠä¸€å¼ çš„è¡¨çš„æ•°æ®æ‹†æˆå¤šå¼ è¡¨æ¥å­˜æ”¾ã€‚ä¸¾ä¸ªä¾‹å­ï¼šæˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·ä¿¡æ¯è¡¨æ‹†åˆ†æˆå¤šä¸ªç”¨æˆ·ä¿¡æ¯è¡¨ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…å•ä¸€è¡¨æ•°æ®é‡è¿‡å¤§å¯¹æ€§èƒ½é€ æˆå½±å“ã€‚</p><p>æ°´å¹³æ‹†åˆ†å¯ä»¥æ”¯æŒéå¸¸å¤§çš„æ•°æ®é‡ã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šåˆ†è¡¨ä»…ä»…æ˜¯è§£å†³äº†å•ä¸€è¡¨æ•°æ®è¿‡å¤§çš„é—®é¢˜ï¼Œä½†ç”±äºè¡¨çš„æ•°æ®è¿˜æ˜¯åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œå…¶å®å¯¹äºæå‡ MySQL å¹¶å‘èƒ½åŠ›æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œæ‰€ä»¥ <strong>æ°´å¹³æ‹†åˆ†æœ€å¥½åˆ†åº“</strong> ã€‚</p><p>æ°´å¹³æ‹†åˆ†èƒ½å¤Ÿ <strong>æ”¯æŒéå¸¸å¤§çš„æ•°æ®é‡å­˜å‚¨ï¼Œåº”ç”¨ç«¯æ”¹é€ ä¹Ÿå°‘</strong>ï¼Œä½† <strong>åˆ†ç‰‡äº‹åŠ¡éš¾ä»¥è§£å†³</strong> ï¼Œè·¨èŠ‚ç‚¹ Join æ€§èƒ½è¾ƒå·®ï¼Œé€»è¾‘å¤æ‚ã€‚ã€ŠJavaå·¥ç¨‹å¸ˆä¿®ç‚¼ä¹‹é“ã€‹çš„ä½œè€…æ¨è <strong>å°½é‡ä¸è¦å¯¹æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œå› ä¸ºæ‹†åˆ†ä¼šå¸¦æ¥é€»è¾‘ã€éƒ¨ç½²ã€è¿ç»´çš„å„ç§å¤æ‚åº¦</strong> ï¼Œä¸€èˆ¬çš„æ•°æ®è¡¨åœ¨ä¼˜åŒ–å¾—å½“çš„æƒ…å†µä¸‹æ”¯æ’‘åƒä¸‡ä»¥ä¸‹çš„æ•°æ®é‡æ˜¯æ²¡æœ‰å¤ªå¤§é—®é¢˜çš„ã€‚å¦‚æœå®åœ¨è¦åˆ†ç‰‡ï¼Œå°½é‡é€‰æ‹©å®¢æˆ·ç«¯åˆ†ç‰‡æ¶æ„ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä¸€æ¬¡å’Œä¸­é—´ä»¶çš„ç½‘ç»œ I&#x2F;Oã€‚</p><p><strong>ä¸‹é¢è¡¥å……ä¸€ä¸‹æ•°æ®åº“åˆ†ç‰‡çš„ä¸¤ç§å¸¸è§æ–¹æ¡ˆï¼š</strong></p><ul><li><strong>å®¢æˆ·ç«¯ä»£ç†ï¼š åˆ†ç‰‡é€»è¾‘åœ¨åº”ç”¨ç«¯ï¼Œå°è£…åœ¨ jar åŒ…ä¸­ï¼Œé€šè¿‡ä¿®æ”¹æˆ–è€…å°è£… JDBC å±‚æ¥å®ç°ã€‚</strong>  å½“å½“ç½‘çš„ <strong>Sharding-JDBC</strong> ã€é˜¿é‡Œçš„ TDD Læ˜¯ä¸¤ç§æ¯”è¾ƒå¸¸ç”¨çš„å®ç°ã€‚</li><li><strong>ä¸­é—´ä»¶ä»£ç†ï¼š åœ¨åº”ç”¨å’Œæ•°æ®ä¸­é—´åŠ äº†ä¸€ä¸ªä»£ç†å±‚ã€‚åˆ†ç‰‡é€»è¾‘ç»Ÿä¸€ç»´æŠ¤åœ¨ä¸­é—´ä»¶æœåŠ¡ä¸­ã€‚</strong>  æˆ‘ä»¬ç°åœ¨è°ˆçš„ <strong>Mycat</strong> ã€360 çš„ Atlasã€ç½‘æ˜“çš„DDB ç­‰ç­‰éƒ½æ˜¯è¿™ç§æ¶æ„çš„å®ç°ã€‚</li></ul><p>è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒï¼š MySQL å¤§è¡¨ä¼˜åŒ–æ–¹æ¡ˆ: <a href="https://segmentfault.com/a/1190000006158186">https://segmentfault.com/a/1190000006158186</a> ã€å€¼å¾—ç»†çœ‹ã€‘</p><h3 id="13ã€åˆ†åº“åˆ†è¡¨ä¹‹åï¼Œ-id-ä¸»é”®å¦‚ä½•å¤„ç†ï¼Ÿ"><a href="#13ã€åˆ†åº“åˆ†è¡¨ä¹‹åï¼Œ-id-ä¸»é”®å¦‚ä½•å¤„ç†ï¼Ÿ" class="headerlink" title="13ã€åˆ†åº“åˆ†è¡¨ä¹‹åï¼Œ id ä¸»é”®å¦‚ä½•å¤„ç†ï¼Ÿ"></a>13ã€åˆ†åº“åˆ†è¡¨ä¹‹åï¼Œ id ä¸»é”®å¦‚ä½•å¤„ç†ï¼Ÿ</h3><p>å› ä¸ºè¦æ˜¯åˆ†æˆå¤šä¸ªè¡¨ä¹‹åï¼Œæ¯ä¸ªè¡¨éƒ½æ˜¯ä» 1 å¼€å§‹ç´¯åŠ ï¼Œè¿™æ ·æ˜¯ä¸å¯¹çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ idæ¥æ”¯æŒã€‚</p><p>ç”Ÿæˆå…¨å±€ id æœ‰ä¸‹é¢è¿™å‡ ç§æ–¹å¼ï¼š</p><ul><li><strong>UUID</strong>ï¼šä¸é€‚åˆä½œä¸ºä¸»é”®ï¼Œå› ä¸ºå¤ªé•¿äº†ï¼Œå¹¶ä¸”æ— åºä¸å¯è¯»ï¼ŒæŸ¥è¯¢æ•ˆç‡ä½ã€‚æ¯”è¾ƒé€‚åˆç”¨äºç”Ÿæˆå”¯ä¸€çš„åå­—çš„æ ‡ç¤ºæ¯”å¦‚æ–‡ä»¶çš„åå­—ã€‚</li><li><strong>æ•°æ®åº“è‡ªå¢</strong> <strong>id</strong> : ä¸¤å°æ•°æ®åº“åˆ†åˆ«è®¾ç½®ä¸åŒæ­¥é•¿ï¼Œç”Ÿæˆä¸é‡å¤IDçš„ç­–ç•¥æ¥å®ç°é«˜å¯ç”¨ã€‚è¿™ç§æ–¹å¼ç”Ÿæˆçš„ id æœ‰åºï¼Œä½†æ˜¯éœ€è¦ç‹¬ç«‹éƒ¨ç½²æ•°æ®åº“å®ä¾‹ï¼Œæˆæœ¬é«˜ï¼Œè¿˜ä¼šæœ‰æ€§èƒ½ç“¶é¢ˆã€‚</li><li><strong>åˆ©ç”¨</strong> <strong>redis</strong> <strong>ç”Ÿæˆ</strong> <strong>id :</strong>  æ€§èƒ½æ¯”è¾ƒå¥½ï¼Œçµæ´»æ–¹ä¾¿ï¼Œä¸ä¾èµ–äºæ•°æ®åº“ã€‚ä½†æ˜¯ï¼Œå¼•å…¥äº†æ–°çš„ç»„ä»¶é€ æˆç³»ç»Ÿæ›´åŠ å¤æ‚ï¼Œå¯ç”¨æ€§é™ä½ï¼Œç¼–ç æ›´åŠ å¤æ‚ï¼Œå¢åŠ äº†ç³»ç»Ÿæˆæœ¬ã€‚</li><li><strong>Twitter çš„ snowflake ç®—æ³•</strong> ï¼šGithub åœ°å€ï¼š<a href="https://github.com/twitter-archive/snowflake%E3%80%82">https://github.com/twitter-archive/snowflakeã€‚</a></li><li><strong>ç¾å›¢çš„ Leaf åˆ†å¸ƒå¼ ID ç”Ÿæˆç³»ç»Ÿ</strong> ï¼šLeaf æ˜¯ç¾å›¢å¼€æºçš„åˆ†å¸ƒå¼ ID ç”Ÿæˆå™¨ï¼Œèƒ½ä¿è¯å…¨å±€å”¯ä¸€æ€§ã€è¶‹åŠ¿é€’å¢ã€å•è°ƒé€’å¢ã€ä¿¡æ¯å®‰å…¨ï¼Œé‡Œé¢ä¹Ÿæåˆ°äº†å‡ ç§åˆ†å¸ƒå¼æ–¹æ¡ˆçš„å¯¹æ¯”ï¼Œä½†ä¹Ÿéœ€è¦ä¾èµ–å…³ç³»æ•°æ®åº“ã€Zookeeper ç­‰ä¸­é—´ä»¶ã€‚æ„Ÿè§‰è¿˜ä¸é”™ã€‚ç¾å›¢æŠ€æœ¯å›¢é˜Ÿçš„ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://tech.meituan.com/2017/04/21/mt-leaf.html">https://tech.meituan.com/2017/04/21/mt-leaf.html</a> ã€‚</li></ul><h3 id="14ã€-è¯´è¯´åœ¨-MySQL-ä¸­ä¸€æ¡æŸ¥è¯¢-SQL-æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"><a href="#14ã€-è¯´è¯´åœ¨-MySQL-ä¸­ä¸€æ¡æŸ¥è¯¢-SQL-æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ" class="headerlink" title="14ã€ è¯´è¯´åœ¨ MySQL ä¸­ä¸€æ¡æŸ¥è¯¢ SQL æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"></a>14ã€ è¯´è¯´åœ¨ MySQL ä¸­ä¸€æ¡æŸ¥è¯¢ SQL æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</h3><p>æ¯”å¦‚ä¸‹é¢è¿™æ¡ SQL è¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name from t_user where id=1</span><br></pre></td></tr></table></figure><ol><li><strong>å–å¾—é“¾æ¥</strong>ï¼Œä½¿ç”¨åˆ° MySQL ä¸­çš„è¿æ¥å™¨ã€‚</li><li><strong>æŸ¥è¯¢ç¼“å­˜</strong>ï¼Œkey ä¸º SQL è¯­å¥ï¼Œvalue ä¸ºæŸ¥è¯¢ç»“æœï¼Œå¦‚æœæŸ¥åˆ°å°±ç›´æ¥è¿”å›ã€‚ä¸å»ºè®®ä½¿ç”¨æ¬¡ç¼“å­˜ï¼Œåœ¨ MySQL 8.0 ç‰ˆæœ¬å·²ç»å°†æŸ¥è¯¢ç¼“å­˜åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯è¯´ MySQL 8.0 ç‰ˆæœ¬åä¸å­˜åœ¨æ­¤åŠŸèƒ½ã€‚</li><li><strong>åˆ†æå™¨</strong>ï¼Œåˆ†ä¸ºè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æã€‚æ­¤é˜¶æ®µåªæ˜¯åšä¸€äº› SQL è§£æï¼Œè¯­æ³•æ ¡éªŒã€‚æ‰€ä»¥ä¸€èˆ¬è¯­æ³•é”™è¯¯åœ¨æ­¤é˜¶æ®µã€‚</li><li><strong>ä¼˜åŒ–å™¨</strong>ï¼Œæ˜¯åœ¨è¡¨é‡Œæœ‰å¤šä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼›æˆ–è€…ä¸€ä¸ªè¯­å¥ä¸­å­˜åœ¨å¤šè¡¨å…³è”çš„æ—¶å€™ï¼ˆjoinï¼‰ï¼Œå†³å®šå„ä¸ªè¡¨çš„è¿æ¥é¡ºåºã€‚</li><li><strong>æ‰§è¡Œå™¨</strong>ï¼Œé€šè¿‡åˆ†æå™¨è®© SQL çŸ¥é“ä½ è¦å¹²å•¥ï¼Œé€šè¿‡ä¼˜åŒ–å™¨çŸ¥é“è¯¥æ€ä¹ˆåšï¼Œäºæ˜¯å¼€å§‹æ‰§è¡Œè¯­å¥ã€‚æ‰§è¡Œè¯­å¥çš„æ—¶å€™è¿˜è¦åˆ¤æ–­æ˜¯å¦å…·å¤‡æ­¤æƒé™ï¼Œæ²¡æœ‰æƒé™å°±ç›´æ¥è¿”å›æç¤ºæ²¡æœ‰æƒé™çš„é”™è¯¯ï¼›æœ‰æƒé™åˆ™æ‰“å¼€è¡¨ï¼Œæ ¹æ®è¡¨çš„å¼•æ“å®šä¹‰ï¼Œå»ä½¿ç”¨è¿™ä¸ªå¼•æ“æä¾›çš„æ¥å£ï¼Œè·å–è¿™ä¸ªè¡¨çš„ç¬¬ä¸€è¡Œï¼Œåˆ¤æ–­ id æ˜¯éƒ½ç­‰äº 1ã€‚å¦‚æœæ˜¯ï¼Œç›´æ¥è¿”å›ï¼›å¦‚æœä¸æ˜¯ç»§ç»­è°ƒç”¨å¼•æ“æ¥å£å»ä¸‹ä¸€è¡Œï¼Œé‡å¤ç›¸åŒçš„åˆ¤æ–­ï¼Œç›´åˆ°å–åˆ°è¿™ä¸ªè¡¨çš„æœ€åä¸€è¡Œï¼Œæœ€åè¿”å›ã€‚</li></ol><h3 id="15ã€ç´¢å¼•æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#15ã€ç´¢å¼•æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="15ã€ç´¢å¼•æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"></a>15ã€ç´¢å¼•æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</h3><p><img src="https://i0.hdslb.com/bfs/article/b6b5a23a6f75a21499b0e1b9a55adfa5645325325.png">â€‹</p><h3 id="16ã€MySQL-ä¸­-varchar-ä¸-char-çš„åŒºåˆ«ï¼Ÿ-varchar-30-ä¸­çš„-30-ä»£è¡¨çš„æ¶µä¹‰ï¼Ÿ"><a href="#16ã€MySQL-ä¸­-varchar-ä¸-char-çš„åŒºåˆ«ï¼Ÿ-varchar-30-ä¸­çš„-30-ä»£è¡¨çš„æ¶µä¹‰ï¼Ÿ" class="headerlink" title="16ã€MySQL ä¸­ varchar ä¸ char çš„åŒºåˆ«ï¼Ÿ varchar(30)  ä¸­çš„ 30 ä»£è¡¨çš„æ¶µä¹‰ï¼Ÿ"></a>16ã€MySQL ä¸­ varchar ä¸ char çš„åŒºåˆ«ï¼Ÿ varchar(30)  ä¸­çš„ 30 ä»£è¡¨çš„æ¶µä¹‰ï¼Ÿ</h3><ul><li><p>varchar ä¸ char çš„åŒºåˆ«ï¼Œchar æ˜¯ä¸€ç§å›ºå®šé•¿åº¦çš„ç±»å‹ï¼Œvarchar åˆ™æ˜¯ä¸€ç§å¯å˜é•¿åº¦çš„ç±»å‹ã€‚</p></li><li><p>CHAR å’Œ VARCHAR ç±»å‹åœ¨å­˜å‚¨å’Œæ£€ç´¢æ–¹é¢æœ‰æ‰€ä¸åŒ</p><p>CHAR åˆ—é•¿åº¦å›ºå®šä¸ºåˆ›å»ºè¡¨æ—¶å£°æ˜çš„é•¿åº¦ï¼Œé•¿åº¦å€¼èŒƒå›´æ˜¯ 1 åˆ° 255ï¼›å½“ CHAR å€¼è¢«å­˜å‚¨æ—¶ï¼Œå®ƒä»¬è¢«ç”¨ç©ºæ ¼å¡«å……åˆ°ç‰¹å®šé•¿åº¦ï¼Œæ£€ç´¢ CHAR å€¼æ—¶éœ€åˆ é™¤å°¾éšç©ºæ ¼ã€‚</p></li><li><p>varchar(30) ä¸­ 30 çš„æ¶µä¹‰æœ€å¤šå­˜æ”¾ 30 ä¸ªå­—ç¬¦ã€‚varchar(30) å’Œ (130) å­˜å‚¨ hello æ‰€å ç©ºé—´ä¸€æ ·ï¼Œä½†åè€…åœ¨æ’åºæ—¶ä¼šæ¶ˆè€—æ›´å¤šå†…å­˜ï¼Œå› ä¸º ORDER BY col é‡‡ç”¨ fixed_length è®¡ç®— col é•¿åº¦ï¼ˆmemory å¼•æ“ä¹Ÿä¸€æ ·ï¼‰ã€‚</p></li><li><p>å¯¹æ•ˆç‡è¦æ±‚é«˜ç”¨ charï¼Œå¯¹ç©ºé—´ä½¿ç”¨è¦æ±‚é«˜ç”¨ varcharã€‚</p></li></ul><h3 id="17ã€int-11-ä¸­çš„-11-ä»£è¡¨ä»€ä¹ˆæ¶µä¹‰ï¼Ÿ"><a href="#17ã€int-11-ä¸­çš„-11-ä»£è¡¨ä»€ä¹ˆæ¶µä¹‰ï¼Ÿ" class="headerlink" title="17ã€int(11) ä¸­çš„ 11 ä»£è¡¨ä»€ä¹ˆæ¶µä¹‰ï¼Ÿ"></a>17ã€int(11) ä¸­çš„ 11 ä»£è¡¨ä»€ä¹ˆæ¶µä¹‰ï¼Ÿ</h3><p>int(11) ä¸­çš„ 11ï¼Œä¸å½±å“å­—æ®µå­˜å‚¨çš„èŒƒå›´ï¼Œåªå½±å“å±•ç¤ºæ•ˆæœã€‚</p><h3 id="18ã€-ä¸ºä»€ä¹ˆ-SELECT-COUNT-FROM-table-åœ¨-InnoDB-æ¯”-MyISAM-æ…¢ï¼Ÿ"><a href="#18ã€-ä¸ºä»€ä¹ˆ-SELECT-COUNT-FROM-table-åœ¨-InnoDB-æ¯”-MyISAM-æ…¢ï¼Ÿ" class="headerlink" title="18ã€ ä¸ºä»€ä¹ˆ SELECT COUNT(*) FROM table åœ¨ InnoDB æ¯” MyISAM æ…¢ï¼Ÿ"></a>18ã€ ä¸ºä»€ä¹ˆ SELECT COUNT(*) FROM table åœ¨ InnoDB æ¯” MyISAM æ…¢ï¼Ÿ</h3><p><em>å¯¹äº SELECT COUNT(</em> ) FROM table è¯­å¥ï¼Œåœ¨æ²¡æœ‰ WHERE æ¡ä»¶çš„æƒ…å†µä¸‹ï¼ŒInnoDB æ¯” MyISAM å¯èƒ½ä¼šæ…¢å¾ˆå¤šï¼Œå°¤å…¶åœ¨å¤§è¡¨çš„æƒ…å†µä¸‹ã€‚å› ä¸ºï¼ŒInnoDB æ˜¯å»å®æ—¶ç»Ÿè®¡ç»“æœï¼Œä¼š <strong>å…¨è¡¨æ‰«æ</strong>ï¼›è€Œ MyISAM å†…éƒ¨ç»´æŒäº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œé¢„å­˜äº†ç»“æœï¼Œæ‰€ä»¥ç›´æ¥è¿”å›å³å¯ã€‚</p><h3 id="19ã€MySQLç´¢å¼•ç±»å‹æœ‰å“ªäº›ï¼Ÿ"><a href="#19ã€MySQLç´¢å¼•ç±»å‹æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="19ã€MySQLç´¢å¼•ç±»å‹æœ‰å“ªäº›ï¼Ÿ"></a>19ã€MySQLç´¢å¼•ç±»å‹æœ‰å“ªäº›ï¼Ÿ</h3><p><strong>ä¸»é”®ç´¢å¼•</strong></p><p>ç´¢å¼•åˆ—ä¸­çš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¸å…è®¸æœ‰ç©ºå€¼ã€‚</p><p><strong>æ™®é€šç´¢å¼•</strong></p><p>MySQL ä¸­åŸºæœ¬ç´¢å¼•ç±»å‹ï¼Œæ²¡æœ‰ä»€ä¹ˆé™åˆ¶ï¼Œå…è®¸åœ¨å®šä¹‰ç´¢å¼•çš„åˆ—ä¸­æ’å…¥é‡å¤å€¼å’Œç©ºå€¼ã€‚</p><p><strong>å”¯ä¸€ç´¢å¼•</strong></p><p>ç´¢å¼•åˆ—ä¸­çš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯å…è®¸ä¸ºç©ºå€¼ã€‚</p><p><strong>å…¨æ–‡ç´¢å¼•</strong></p><p>åªèƒ½åœ¨æ–‡æœ¬ç±»å‹ CHARï¼ŒVARCHARï¼ŒTEXT ç±»å‹å­—æ®µä¸Šåˆ›å»ºå…¨æ–‡ç´¢å¼•ã€‚å­—æ®µé•¿åº¦æ¯”è¾ƒå¤§æ—¶ï¼Œå¦‚æœåˆ›å»ºæ™®é€šç´¢å¼•ï¼Œåœ¨è¿›è¡Œ like æ¨¡ç³ŠæŸ¥è¯¢æ—¶æ•ˆç‡æ¯”è¾ƒä½ï¼Œè¿™æ—¶å¯ä»¥åˆ›å»ºå…¨æ–‡ç´¢å¼•ã€‚MyISAM å’Œ InnoDB ä¸­éƒ½å¯ä»¥ä½¿ç”¨å…¨æ–‡ç´¢å¼•ã€‚</p><p><strong>ç©ºé—´ç´¢å¼•</strong></p><p>MySQL åœ¨ 5.7 ä¹‹åçš„ç‰ˆæœ¬æ”¯æŒäº†ç©ºé—´ç´¢å¼•ï¼Œè€Œä¸”æ”¯æŒ OpenGIS å‡ ä½•æ•°æ®æ¨¡å‹ã€‚MySQL åœ¨ç©ºé—´ç´¢å¼•è¿™æ–¹é¢éµå¾ª OpenGIS å‡ ä½•æ•°æ®æ¨¡å‹è§„åˆ™ã€‚</p><p><strong>å‰ç¼€ç´¢å¼•</strong></p><p>åœ¨æ–‡æœ¬ç±»å‹å¦‚ CHARï¼ŒVARCHARï¼ŒTEXT ç±»åˆ—ä¸Šåˆ›å»ºç´¢å¼•æ—¶ï¼Œå¯ä»¥æŒ‡å®šç´¢å¼•åˆ—çš„é•¿åº¦ï¼Œä½†æ˜¯æ•°å€¼ç±»å‹ä¸èƒ½æŒ‡å®šã€‚å…¶ä»–ï¼ˆæŒ‰ç…§ç´¢å¼•åˆ—æ•°é‡åˆ†ç±»ï¼‰</p><ol><li>å•åˆ—ç´¢å¼•</li><li>ç»„åˆç´¢å¼•</li></ol><p>ç»„åˆç´¢å¼•çš„ä½¿ç”¨ï¼Œéœ€è¦éµå¾ª <strong>æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼ˆæœ€å·¦åŒ¹é…åŸåˆ™ï¼‰</strong> ã€‚ä¸€èˆ¬æƒ…å†µä¸‹åœ¨æ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹ä½¿ç”¨ç»„åˆç´¢å¼•æ›¿ä»£å¤šä¸ªå•åˆ—ç´¢å¼•ä½¿ç”¨ã€‚</p><h3 id="20ã€ä»€ä¹ˆæ—¶å€™ä¸è¦ä½¿ç”¨ç´¢å¼•ï¼Ÿ"><a href="#20ã€ä»€ä¹ˆæ—¶å€™ä¸è¦ä½¿ç”¨ç´¢å¼•ï¼Ÿ" class="headerlink" title="20ã€ä»€ä¹ˆæ—¶å€™ä¸è¦ä½¿ç”¨ç´¢å¼•ï¼Ÿ"></a>20ã€ä»€ä¹ˆæ—¶å€™ä¸è¦ä½¿ç”¨ç´¢å¼•ï¼Ÿ</h3><ol><li>ç»å¸¸å¢åˆ æ”¹çš„åˆ—ä¸è¦å»ºç«‹ç´¢å¼•ï¼›</li><li>æœ‰å¤§é‡é‡å¤çš„åˆ—ä¸å»ºç«‹ç´¢å¼•ï¼›</li><li>è¡¨è®°å½•å¤ªå°‘ä¸è¦å»ºç«‹ç´¢å¼•ã€‚</li></ol><h3 id="21ã€è¯´è¯´ä»€ä¹ˆæ˜¯-MVCCï¼Ÿ"><a href="#21ã€è¯´è¯´ä»€ä¹ˆæ˜¯-MVCCï¼Ÿ" class="headerlink" title="21ã€è¯´è¯´ä»€ä¹ˆæ˜¯ MVCCï¼Ÿ"></a>21ã€è¯´è¯´ä»€ä¹ˆæ˜¯ MVCCï¼Ÿ</h3><p>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCC&#x3D;Multi-Version Concurrency Controlï¼‰ï¼Œæ˜¯ä¸€ç§ç”¨æ¥è§£å†³è¯» - å†™å†²çªçš„æ— é”å¹¶å‘æ§åˆ¶ã€‚ä¹Ÿå°±æ˜¯ä¸ºäº‹åŠ¡åˆ†é…å•å‘å¢é•¿çš„æ—¶é—´æˆ³ï¼Œä¸ºæ¯ä¸ªä¿®æ”¹ä¿å­˜ä¸€ä¸ªç‰ˆæœ¬ã€‚ç‰ˆæœ¬ä¸äº‹åŠ¡æ—¶é—´æˆ³å…³è”ï¼Œè¯»æ“ä½œåªè¯»è¯¥äº‹åŠ¡å¼€å§‹å‰çš„æ•°æ®åº“çš„å¿«ç…§ï¼ˆå¤åˆ¶äº†ä¸€ä»½æ•°æ®ï¼‰ã€‚è¿™æ ·åœ¨è¯»æ“ä½œä¸ç”¨é˜»å¡å†™æ“ä½œï¼Œå†™æ“ä½œä¸ç”¨é˜»å¡è¯»æ“ä½œçš„åŒæ—¶ï¼Œé¿å…äº†è„è¯»å’Œä¸å¯é‡å¤è¯»ã€‚</p><h4 id="MVCC-å¯ä»¥ä¸ºæ•°æ®åº“è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#MVCC-å¯ä»¥ä¸ºæ•°æ®åº“è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="MVCC å¯ä»¥ä¸ºæ•°æ®åº“è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>MVCC å¯ä»¥ä¸ºæ•°æ®åº“è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h4><p>åœ¨å¹¶å‘è¯»å†™æ•°æ®åº“æ—¶ï¼Œå¯ä»¥åšåˆ°åœ¨è¯»æ“ä½œæ—¶ä¸ç”¨é˜»å¡å†™æ“ä½œï¼Œå†™æ“ä½œä¹Ÿä¸ç”¨é˜»å¡è¯»æ“ä½œï¼Œæé«˜äº†æ•°æ®åº“å¹¶å‘è¯»å†™çš„æ€§èƒ½ã€‚åŒæ—¶è¿˜å¯ä»¥è§£å†³è„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯»ç­‰äº‹åŠ¡éš”ç¦»é—®é¢˜ï¼Œä½†ä¸èƒ½è§£å†³æ›´æ–°ä¸¢å¤±é—®é¢˜ã€‚</p><h4 id="è¯´è¯´-MVCC-çš„å®ç°åŸç†"><a href="#è¯´è¯´-MVCC-çš„å®ç°åŸç†" class="headerlink" title="è¯´è¯´ MVCC çš„å®ç°åŸç†"></a>è¯´è¯´ MVCC çš„å®ç°åŸç†</h4><p>MVCC çš„ç›®çš„å°±æ˜¯å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œåœ¨æ•°æ®åº“ä¸­çš„å®ç°ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¯»å†™å†²çªï¼Œå®ƒçš„å®ç°åŸç†ä¸»è¦æ˜¯ä¾èµ–è®°å½•ä¸­çš„ 3 ä¸ªéšå¼å­—æ®µã€undo æ—¥å¿—ã€Read View æ¥å®ç°çš„ã€‚</p><h5 id="ä¸‰ä¸ªéšå¼å­—æ®µï¼š"><a href="#ä¸‰ä¸ªéšå¼å­—æ®µï¼š" class="headerlink" title="ä¸‰ä¸ªéšå¼å­—æ®µï¼š"></a><strong>ä¸‰ä¸ªéšå¼å­—æ®µï¼š</strong></h5><p><strong>DB_ROW_ID</strong>ï¼šéšå«çš„è‡ªå¢ IDï¼ˆéšè—ä¸»é”®ï¼‰</p><p><strong>DB_TRX_ID</strong>ï¼šè®°å½•æœ€è¿‘ä¿®æ”¹è¿™æ¡è®°å½•çš„äº‹åŠ¡ ID</p><p><strong>DB_ROLL_PTR</strong>ï¼šå›æ»šæŒ‡é’ˆï¼ŒæŒ‡å‘è¿™æ¡è®°å½•çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬</p><h3 id="22ã€-è¯·è¯´è¯´-MySQL-æ•°æ®åº“çš„é”ï¼Ÿ"><a href="#22ã€-è¯·è¯´è¯´-MySQL-æ•°æ®åº“çš„é”ï¼Ÿ" class="headerlink" title="22ã€ è¯·è¯´è¯´ MySQL æ•°æ®åº“çš„é”ï¼Ÿ"></a>22ã€ è¯·è¯´è¯´ MySQL æ•°æ®åº“çš„é”ï¼Ÿ</h3><p>å…³äº MySQL çš„é”æœºåˆ¶ï¼Œå¯èƒ½ä¼šé—®å¾ˆå¤šé—®é¢˜ï¼Œä¸è¿‡è¿™ä¹Ÿå¾—çœ‹é¢è¯•å®˜åœ¨è¿™æ–¹é¢çš„çŸ¥è¯†å‚¨å¤‡ã€‚</p><p>MySQL ä¸­æœ‰å…±äº«é”å’Œæ’å®ƒé”ï¼Œä¹Ÿå°±æ˜¯è¯»é”å’Œå†™é”ã€‚</p><ol><li>å…±äº«é”ï¼šä¸å µå¡ï¼Œå¤šä¸ªç”¨æˆ·å¯ä»¥åŒä¸€æ—¶åˆ»è¯»å–åŒä¸€ä¸ªèµ„æºï¼Œç›¸äº’ä¹‹é—´æ²¡æœ‰å½±å“ã€‚</li><li>æ’å®ƒé”ï¼šä¸€ä¸ªå†™æ“ä½œé˜»å¡å…¶ä»–çš„è¯»é”å’Œå†™é”ï¼Œè¿™æ ·å¯ä»¥åªå…è®¸ä¸€ä¸ªç”¨æˆ·è¿›è¡Œå†™å…¥ï¼Œé˜²æ­¢å…¶ä»–ç”¨æˆ·è¯»å–æ­£åœ¨å†™å…¥çš„èµ„æºã€‚</li><li>è¡¨é”ï¼šç³»ç»Ÿå¼€é”€æœ€å°ï¼Œä¼šé”å®šæ•´å¼ è¡¨ï¼ŒMyISAM ä½¿ç”¨è¡¨é”ã€‚</li><li>è¡Œé”ï¼šå®¹æ˜“å‡ºç°æ­»é”ï¼Œå‘ç”Ÿå†²çªæ¦‚ç‡ä½ï¼Œå¹¶å‘é«˜ï¼ŒInnoDB æ”¯æŒè¡Œé”ï¼ˆå¿…é¡»æœ‰ç´¢å¼•æ‰èƒ½å®ç°ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨é”å…¨è¡¨ï¼Œé‚£ä¹ˆå°±ä¸æ˜¯è¡Œé”äº†ï¼‰ã€‚</li></ol><h3 id="23ã€è¯´è¯´ä»€ä¹ˆæ˜¯é”å‡çº§ï¼Ÿ"><a href="#23ã€è¯´è¯´ä»€ä¹ˆæ˜¯é”å‡çº§ï¼Ÿ" class="headerlink" title="23ã€è¯´è¯´ä»€ä¹ˆæ˜¯é”å‡çº§ï¼Ÿ"></a>23ã€è¯´è¯´ä»€ä¹ˆæ˜¯é”å‡çº§ï¼Ÿ</h3><p>MySQL è¡Œé”åªèƒ½åŠ åœ¨ç´¢å¼•ä¸Šï¼Œå¦‚æœæ“ä½œä¸èµ°ç´¢å¼•ï¼Œå°±ä¼šå‡çº§ä¸ºè¡¨é”ã€‚å› ä¸º InnoDB çš„è¡Œé”æ˜¯åŠ åœ¨ç´¢å¼•ä¸Šçš„ï¼Œå¦‚æœä¸èµ°ç´¢å¼•ï¼Œè‡ªç„¶å°±æ²¡æ³•ä½¿ç”¨è¡Œé”äº†ï¼ŒåŸå› æ˜¯ InnoDB æ˜¯å°† primary key index å’Œç›¸å…³çš„è¡Œæ•°æ®å…±åŒæ”¾åœ¨ B+ æ ‘çš„å¶èŠ‚ç‚¹ã€‚InnoDB ä¸€å®šä¼šæœ‰ä¸€ä¸ª primary keyï¼Œsecondary index æŸ¥æ‰¾çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯é€šè¿‡æ‰¾åˆ°å¯¹åº”çš„ primaryï¼Œå†æ‰¾å¯¹åº”çš„æ•°æ®è¡Œã€‚</p><p>å½“éå”¯ä¸€ç´¢å¼•ä¸Šè®°å½•æ•°è¶…è¿‡ä¸€å®šæ•°é‡æ—¶ï¼Œè¡Œé”ä¹Ÿä¼šå‡çº§ä¸ºè¡¨é”ã€‚æµ‹è¯•å‘ç° <strong>å½“éå”¯ä¸€ç´¢å¼•ç›¸åŒçš„å†…å®¹ä¸å°‘äºæ•´ä¸ªè¡¨è®°å½•çš„äºŒåˆ†ä¹‹ä¸€æ—¶ä¼šå‡çº§ä¸ºè¡¨é”</strong>ã€‚å› ä¸ºå½“éå”¯ä¸€ç´¢å¼•ç›¸åŒçš„å†…å®¹è¾¾åˆ°æ•´ä¸ªè®°å½•çš„äºŒåˆ†ä¹‹ä¸€æ—¶ï¼Œç´¢å¼•éœ€è¦çš„æ€§èƒ½æ¯”å…¨æ–‡æ£€ç´¢è¿˜è¦å¤§ï¼ŒæŸ¥è¯¢è¯­å¥ä¼˜åŒ–æ—¶ä¼šé€‰æ‹©ä¸èµ°ç´¢å¼•ï¼Œé€ æˆç´¢å¼•å¤±æ•ˆï¼Œè¡Œé”è‡ªç„¶å°±ä¼šå‡çº§ä¸ºè¡¨é”ã€‚</p><h3 id="24ã€è¯´è¯´æ‚²è§‚é”å’Œä¹è§‚é”"><a href="#24ã€è¯´è¯´æ‚²è§‚é”å’Œä¹è§‚é”" class="headerlink" title="24ã€è¯´è¯´æ‚²è§‚é”å’Œä¹è§‚é”"></a>24ã€è¯´è¯´æ‚²è§‚é”å’Œä¹è§‚é”</h3><p><strong>æ‚²è§‚é”</strong></p><p>è¯´çš„æ˜¯æ•°æ®åº“è¢«å¤–ç•Œï¼ˆåŒ…æ‹¬æœ¬ç³»ç»Ÿå½“å‰çš„å…¶ä»–äº‹ç‰©ä»¥åŠæ¥è‡ªå¤–éƒ¨ç³»ç»Ÿçš„äº‹åŠ¡å¤„ç†ï¼‰ä¿®æ”¹ä¿æŒç€ä¿å®ˆæ€åº¦ï¼Œå› æ­¤åœ¨æ•´ä¸ªæ•°æ®ä¿®æ”¹è¿‡ç¨‹ä¸­ï¼Œå°†æ•°æ®å¤„äºé”çŠ¶æ€ã€‚æ‚²è§‚çš„å®ç°å¾€å¾€æ˜¯ä¾é æ•°æ®åº“æä¾›çš„é”æœºåˆ¶ï¼Œä¹Ÿåªæœ‰æ•°æ®åº“å±‚é¢æä¾›çš„é”æœºåˆ¶æ‰èƒ½çœŸæ­£ä¿è¯æ•°æ®è®¿é—®çš„æ’ä»–æ€§ï¼Œå¦åˆ™ï¼Œå³ä½¿åœ¨æœ¬ç³»ç»Ÿæ±‡æ€»å®ç°äº†åŠ é”æœºåˆ¶ï¼Œä¹Ÿæ˜¯æ²¡æœ‰åŠæ³•ä¿è¯ç³»ç»Ÿä¸ä¼šä¿®æ”¹æ•°æ®ã€‚</p><p>åœ¨æ‚²è§‚é”çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œå°±éœ€è¦ä¸€è‡´æ€§é”å®šè¯»ã€‚è¯»å–æ•°æ®æ—¶ç»™åŠ é”ï¼Œå…¶å®ƒäº‹åŠ¡æ— æ³•ä¿®æ”¹è¿™äº›æ•°æ®ã€‚ä¿®æ”¹åˆ é™¤æ•°æ®æ—¶ä¹Ÿè¦åŠ é”ï¼Œå…¶å®ƒäº‹åŠ¡æ— æ³•è¯»å–è¿™äº›æ•°æ®ã€‚</p><p><strong>ä¹è§‚é”</strong></p><p>ç›¸å¯¹æ‚²è§‚é”è€Œè¨€ï¼Œä¹è§‚é”æœºåˆ¶é‡‡å–äº†æ›´åŠ å®½æ¾çš„åŠ é”æœºåˆ¶ã€‚æ‚²è§‚é”å¤§å¤šæ•°æƒ…å†µä¸‹ä¾é æ•°æ®åº“çš„é”æœºåˆ¶å®ç°ï¼Œä»¥ä¿è¯æ“ä½œæœ€å¤§ç¨‹åº¦çš„ç‹¬å æ€§ã€‚ä½†éšä¹‹è€Œæ¥çš„å°±æ˜¯æ•°æ®åº“æ€§èƒ½çš„å¤§é‡å¼€é”€ï¼Œç‰¹åˆ«æ˜¯å¯¹é•¿äº‹åŠ¡è€Œè¨€ï¼Œè¿™æ ·çš„å¼€é”€å¾€å¾€æ— æ³•æ‰¿å—ã€‚</p><p>è€Œä¹è§‚é”æœºåˆ¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä¹è§‚é”ï¼Œå¤§å¤šæ˜¯åŸºäºæ•°æ®ç‰ˆæœ¬ï¼ˆVersionï¼‰è®°å½•æœºåˆ¶å®ç°ã€‚ä½•è°“æ•°æ®ç‰ˆæœ¬ï¼Ÿå³ä¸ºæ•°æ®å¢åŠ ä¸€ä¸ªç‰ˆæœ¬æ ‡è¯†ï¼Œåœ¨åŸºäºæ•°æ®åº“è¡¨çš„ç‰ˆæœ¬è§£å†³æ–¹æ¡ˆä¸­ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡ä¸ºæ•°æ®åº“è¡¨å¢åŠ ä¸€ä¸ªâ€œversionâ€å­—æ®µæ¥å®ç°ã€‚è¯»å–å‡ºæ•°æ®æ—¶ï¼Œå°†æ­¤ç‰ˆæœ¬å·ä¸€åŒè¯»å‡ºï¼Œä¹‹åæ›´æ–°æ—¶ï¼Œå¯¹æ­¤ç‰ˆæœ¬å·åŠ ä¸€ã€‚æ­¤æ—¶ï¼Œå°†æäº¤æ•°æ®çš„ç‰ˆæœ¬æ•°æ®ä¸æ•°æ®åº“è¡¨å¯¹åº”è®°å½•çš„å½“å‰ç‰ˆæœ¬ä¿¡æ¯è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœæäº¤çš„æ•°æ®ç‰ˆæœ¬å·å¤§äºæ•°æ®åº“è¡¨å½“å‰ç‰ˆæœ¬å·ï¼Œåˆ™äºˆä»¥æ›´æ–°ï¼Œå¦åˆ™è®¤ä¸ºæ˜¯è¿‡æœŸæ•°æ®ã€‚</p><h3 id="25ã€æ€æ ·å°½é‡é¿å…æ­»é”çš„å‡ºç°ï¼Ÿ"><a href="#25ã€æ€æ ·å°½é‡é¿å…æ­»é”çš„å‡ºç°ï¼Ÿ" class="headerlink" title="25ã€æ€æ ·å°½é‡é¿å…æ­»é”çš„å‡ºç°ï¼Ÿ"></a>25ã€æ€æ ·å°½é‡é¿å…æ­»é”çš„å‡ºç°ï¼Ÿ</h3><ol><li>è®¾ç½®è·å–é”çš„è¶…æ—¶æ—¶é—´ï¼Œè‡³å°‘èƒ½ä¿è¯æœ€å·®æƒ…å†µä¸‹ï¼Œå¯ä»¥é€€å‡ºç¨‹åºï¼Œä¸è‡³äºä¸€ç›´ç­‰å¾…å¯¼è‡´æ­»é”ï¼›</li><li>è®¾ç½®æŒ‰ç…§åŒä¸€é¡ºåºè®¿é—®èµ„æºï¼Œç±»ä¼¼äºä¸²è¡Œæ‰§è¡Œï¼›</li><li>é¿å…äº‹åŠ¡ä¸­çš„ç”¨æˆ·äº¤å‰ï¼›</li><li>ä¿æŒäº‹åŠ¡ç®€çŸ­å¹¶åœ¨ä¸€ä¸ªæ‰¹å¤„ç†ä¸­ï¼›</li><li>ä½¿ç”¨ä½éš”ç¦»çº§åˆ«ï¼›</li><li>ä½¿ç”¨ç»‘å®šé“¾æ¥ã€‚</li></ol><h3 id="26ã€ä½¿ç”¨-MySQL-çš„ç´¢å¼•åº”è¯¥æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ"><a href="#26ã€ä½¿ç”¨-MySQL-çš„ç´¢å¼•åº”è¯¥æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ" class="headerlink" title="26ã€ä½¿ç”¨ MySQL çš„ç´¢å¼•åº”è¯¥æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ"></a>26ã€ä½¿ç”¨ MySQL çš„ç´¢å¼•åº”è¯¥æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ</h3><p><img src="https://i0.hdslb.com/bfs/article/7d8032bd3a5afea6ade9033cabdf66f6645325325.png">â€‹</p><h3 id="27ã€ä¸»é”®å’Œå€™é€‰é”®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#27ã€ä¸»é”®å’Œå€™é€‰é”®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="27ã€ä¸»é”®å’Œå€™é€‰é”®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>27ã€ä¸»é”®å’Œå€™é€‰é”®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>è¡¨æ ¼çš„æ¯ä¸€è¡Œéƒ½ç”±ä¸»é”®å”¯ä¸€æ ‡è¯†ï¼Œä¸€ä¸ªè¡¨åªæœ‰ä¸€ä¸ªä¸»é”®ã€‚ä¸»é”®ä¹Ÿæ˜¯å€™é€‰é”®ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œå€™é€‰é”®å¯ä»¥è¢«æŒ‡å®šä¸ºä¸»é”®ï¼Œå¹¶ä¸”å¯ä»¥ç”¨äºä»»ä½•å¤– é”®å¼•ç”¨ã€‚</p><h3 id="28ã€ä¸»é”®ä¸ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#28ã€ä¸»é”®ä¸ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="28ã€ä¸»é”®ä¸ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>28ã€ä¸»é”®ä¸ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>ä¸»é”®ä¸€ <strong>å®šä¼šåˆ›å»ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ï¼Œä½†æ˜¯æœ‰å”¯ä¸€ç´¢å¼•çš„åˆ—ä¸ä¸€å®šæ˜¯ä¸»é”®ï¼›</strong></p><p>ä¸»é”®ä¸å…è®¸ä¸ºç©ºå€¼ï¼Œå”¯ä¸€ç´¢å¼•åˆ—å…è®¸ç©ºå€¼ï¼›</p><p>ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•ï¼›</p><p>ä¸»é”®å¯ä»¥è¢« <strong>å…¶ä»–è¡¨å¼•ç”¨ä¸ºå¤–é”®ï¼Œå”¯ä¸€ç´¢å¼•åˆ—ä¸å¯ä»¥ï¼›</strong></p><p>ä¸»é”®æ˜¯ä¸€ç§çº¦æŸï¼Œè€Œå”¯ä¸€ç´¢å¼•æ˜¯ä¸€ç§ç´¢å¼•ï¼Œæ˜¯è¡¨çš„å†—ä½™æ•°æ®ç»“æ„</p><h3 id="29ã€MySQL-å¦‚ä½•åšåˆ°é«˜å¯ç”¨æ–¹æ¡ˆï¼Ÿ"><a href="#29ã€MySQL-å¦‚ä½•åšåˆ°é«˜å¯ç”¨æ–¹æ¡ˆï¼Ÿ" class="headerlink" title="29ã€MySQL å¦‚ä½•åšåˆ°é«˜å¯ç”¨æ–¹æ¡ˆï¼Ÿ"></a>29ã€MySQL å¦‚ä½•åšåˆ°é«˜å¯ç”¨æ–¹æ¡ˆï¼Ÿ</h3><p>MySQL é«˜å¯ç”¨ï¼Œæ„å‘³ç€ä¸èƒ½ä¸€å° MySQL å‡ºäº†é—®é¢˜ï¼Œå°±ä¸èƒ½è®¿é—®äº†ã€‚</p><ol><li>MySQL é«˜å¯ç”¨ï¼šåˆ†åº“åˆ†è¡¨ï¼Œé€šè¿‡ MyCat è¿æ¥å¤šä¸ª MySQL</li><li>MyCat ä¹Ÿå¾—é«˜å¯ç”¨ï¼šHaproxyï¼Œè¿æ¥å¤šä¸ª MyCat</li><li>Haproxy ä¹Ÿå¾—é«˜å¯ç”¨ï¼šé€šè¿‡ keepalived è¾…åŠ© Haproxy</li></ol><h3 id="30ã€ä»€ä¹ˆæ˜¯-BufferPoolï¼Ÿ"><a href="#30ã€ä»€ä¹ˆæ˜¯-BufferPoolï¼Ÿ" class="headerlink" title="30ã€ä»€ä¹ˆæ˜¯ BufferPoolï¼Ÿ"></a>30ã€ä»€ä¹ˆæ˜¯ BufferPoolï¼Ÿ</h3><p><strong>Buffer Pool åŸºæœ¬æ¦‚å¿µ</strong></p><p>Buffer Poolï¼šç¼“å†²æ± ï¼Œç®€ç§° BPã€‚å…¶ä½œç”¨æ˜¯ç”¨æ¥ç¼“å­˜è¡¨æ•°æ®ä¸ç´¢å¼•æ•°æ®ï¼Œå‡å°‘ç£ç›˜ IO æ“ä½œï¼Œæå‡æ•ˆç‡ã€‚</p><p>Buffer Poolç”± <strong>ç¼“å­˜æ•°æ®é¡µ(Page)</strong>  å’Œ å¯¹ç¼“å­˜æ•°æ®é¡µè¿›è¡Œæè¿°çš„ <strong>æ§åˆ¶å—</strong> ç»„æˆ, æ§åˆ¶å—ä¸­å­˜å‚¨ç€å¯¹åº”ç¼“å­˜é¡µçš„æ‰€å±çš„è¡¨ç©ºé—´ã€æ•°æ®é¡µçš„ç¼–å·ã€ä»¥åŠå¯¹åº”ç¼“å­˜é¡µåœ¨ Buffer Pool ä¸­çš„åœ°å€ç­‰ä¿¡æ¯.</p><p>Buffer Pool é»˜è®¤å¤§å°æ˜¯ 128 M, ä»¥ Page é¡µä¸ºå•ä½ï¼ŒPage é¡µé»˜è®¤å¤§å° 16Kï¼Œè€Œæ§åˆ¶å—çš„å¤§å°çº¦ä¸ºæ•°æ®é¡µçš„ 5%ï¼Œå¤§æ¦‚æ˜¯ 800 å­—èŠ‚ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/1c38c81742ee6cee81749f44398881e5645325325.png">â€‹</p><blockquote><p>æ³¨: Buffer Pool å¤§å°ä¸º 128 M æŒ‡çš„å°±æ˜¯ç¼“å­˜é¡µçš„å¤§å°ï¼Œæ§åˆ¶å—åˆ™ä¸€èˆ¬å  5 %ï¼Œæ‰€ä»¥æ¯æ¬¡ä¼šå¤šç”³è¯· 6 M çš„å†…å­˜ç©ºé—´ç”¨äºå­˜æ”¾æ§åˆ¶å—</p></blockquote><p><strong>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªé¡µæ˜¯å¦åœ¨ BufferPool ä¸­ç¼“å­˜ ?</strong></p><p>MySQL ä¸­æœ‰ä¸€ä¸ªå“ˆå¸Œè¡¨æ•°æ®ç»“æ„ï¼Œå®ƒä½¿ç”¨è¡¨ç©ºé—´å· + æ•°æ®é¡µå·ï¼Œä½œä¸ºä¸€ä¸ª keyï¼Œç„¶åç¼“å†²é¡µå¯¹åº”çš„æ§åˆ¶å—ä½œä¸º valueã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/f4fc145bb7933d4d86d9ed3fd1e6755a645325325.png">â€‹</p><ul><li><strong>å½“éœ€è¦è®¿é—®æŸä¸ªé¡µçš„æ•°æ®æ—¶ï¼Œå…ˆä»å“ˆå¸Œè¡¨ä¸­æ ¹æ®è¡¨ç©ºé—´å· + é¡µå·çœ‹çœ‹æ˜¯å¦å­˜åœ¨å¯¹åº”çš„ç¼“å†²é¡µã€‚</strong></li><li><strong>å¦‚æœæœ‰ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±ä»freeé“¾è¡¨ä¸­é€‰å‡ºä¸€ä¸ªç©ºé—²çš„ç¼“å†²é¡µï¼Œç„¶åæŠŠç£ç›˜ä¸­å¯¹åº”çš„é¡µåŠ è½½åˆ°è¯¥ç¼“å†²é¡µçš„ä½ç½®</strong></li></ul><h3 id="31ã€InnoDB-å¦‚ä½•ç®¡ç†-Page-é¡µï¼Ÿ"><a href="#31ã€InnoDB-å¦‚ä½•ç®¡ç†-Page-é¡µï¼Ÿ" class="headerlink" title="31ã€InnoDB å¦‚ä½•ç®¡ç† Page é¡µï¼Ÿ"></a>31ã€InnoDB å¦‚ä½•ç®¡ç† Page é¡µï¼Ÿ</h3><p><strong>Pageé¡µåˆ†ç±»</strong></p><p>BP çš„åº•å±‚é‡‡ç”¨é“¾è¡¨æ•°æ®ç»“æ„ç®¡ç† Pageã€‚åœ¨ InnoDB è®¿é—®è¡¨è®°å½•å’Œç´¢å¼•æ—¶ä¼šåœ¨ Page é¡µä¸­ç¼“å­˜ï¼Œä»¥åä½¿ç”¨å¯ä»¥å‡å°‘ç£ç›˜ IO æ“ä½œï¼Œæå‡æ•ˆç‡ã€‚</p><p>Page æ ¹æ®çŠ¶æ€å¯ä»¥åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/bafec47492a931391312b726a44168c5645325325.png">â€‹</p><ul><li>free page ï¼šç©ºé—² pageï¼Œæœªè¢«ä½¿ç”¨</li><li>clean pageï¼šè¢«ä½¿ç”¨ pageï¼Œæ•°æ®æ²¡æœ‰è¢«ä¿®æ”¹è¿‡</li><li>dirty pageï¼šè„é¡µï¼Œè¢«ä½¿ç”¨ pageï¼Œæ•°æ®è¢«ä¿®æ”¹è¿‡ï¼ŒPage é¡µä¸­æ•°æ®å’Œç£ç›˜çš„æ•°æ®äº§ç”Ÿäº†ä¸ä¸€è‡´</li></ul><p>Page é¡µå¦‚ä½•ç®¡ç†</p><p>é’ˆå¯¹ä¸Šé¢æ‰€è¯´çš„ä¸‰ç§ page ç±»å‹ï¼ŒInnoDB é€šè¿‡ä¸‰ç§é“¾è¡¨ç»“æ„æ¥ç»´æŠ¤å’Œç®¡ç†</p><ol><li>free listï¼šè¡¨ç¤ºç©ºé—²ç¼“å†²åŒºï¼Œç®¡ç† free page</li></ol><ul><li>free é“¾è¡¨æ˜¯æŠŠæ‰€æœ‰ç©ºé—²çš„ç¼“å†²é¡µå¯¹åº”çš„æ§åˆ¶å—ä½œä¸ºä¸€ä¸ªä¸ªçš„èŠ‚ç‚¹æ”¾åˆ°ä¸€ä¸ªé“¾è¡¨ä¸­ï¼Œè¿™ä¸ªé“¾è¡¨ä¾¿ç§°ä¹‹ä¸º free é“¾è¡¨</li><li>åŸºèŠ‚ç‚¹:  free é“¾è¡¨ä¸­åªæœ‰ä¸€ä¸ªåŸºèŠ‚ç‚¹æ˜¯ä¸è®°å½•ç¼“å­˜é¡µä¿¡æ¯ï¼ˆå•ç‹¬ç”³è¯·ç©ºé—´ï¼‰ï¼Œå®ƒé‡Œé¢å°±å­˜æ”¾äº† free é“¾è¡¨çš„å¤´èŠ‚ç‚¹çš„åœ°å€ï¼Œå°¾èŠ‚ç‚¹çš„åœ°å€ï¼Œè¿˜æœ‰ free é“¾è¡¨é‡Œå½“å‰æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ã€‚</li></ul><p><img src="https://i0.hdslb.com/bfs/article/a9e0db76112a1f3de9718fd1f92b6d48645325325.png">â€‹</p><p>2.flush listï¼šè¡¨ç¤ºéœ€è¦åˆ·æ–°åˆ°ç£ç›˜çš„ç¼“å†²åŒºï¼Œç®¡ç† dirty pageï¼Œå†…éƒ¨ page æŒ‰ä¿®æ”¹æ—¶é—´æ’åºã€‚</p><ul><li>InnoDB å¼•æ“ä¸ºäº†æé«˜å¤„ç†æ•ˆç‡ï¼Œåœ¨æ¯æ¬¡ä¿®æ”¹ç¼“å†²é¡µåï¼Œå¹¶ä¸æ˜¯ç«‹åˆ»æŠŠä¿®æ”¹åˆ·æ–°åˆ°ç£ç›˜ä¸Šï¼Œè€Œæ˜¯åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œåˆ·æ–°æ“ä½œ. æ‰€ä»¥éœ€è¦ä½¿ç”¨åˆ° flush é“¾è¡¨å­˜å‚¨è„é¡µï¼Œå‡¡æ˜¯è¢«ä¿®æ”¹è¿‡çš„ç¼“å†²é¡µå¯¹åº”çš„æ§åˆ¶å—éƒ½ä¼šä½œä¸ºèŠ‚ç‚¹åŠ å…¥åˆ° flush é“¾è¡¨.</li><li>flush é“¾è¡¨çš„ç»“æ„ä¸ free é“¾è¡¨çš„ç»“æ„ç›¸ä¼¼</li></ul><p><img src="https://i0.hdslb.com/bfs/article/985fa195f96eb2e89187493c3298e300645325325.png">â€‹</p><p><strong>3.lru list</strong>ï¼šè¡¨ç¤ºæ­£åœ¨ä½¿ç”¨çš„ç¼“å†²åŒºï¼Œç®¡ç† clean page å’Œ dirty pageï¼Œç¼“å†²åŒºä»¥ midpoint ä¸ºåŸºç‚¹ï¼Œå‰é¢é“¾è¡¨ç§°ä¸º new åˆ—è¡¨åŒºï¼Œå­˜æ”¾ç»å¸¸è®¿é—®çš„æ•°æ®ï¼Œå  63 %ï¼›åé¢çš„é“¾è¡¨ç§°ä¸º old åˆ—è¡¨åŒºï¼Œå­˜æ”¾ä½¿ç”¨è¾ƒå°‘æ•°æ®ï¼Œå  37 %</p><p><img src="https://i0.hdslb.com/bfs/article/e2bdb3501ae1afee189188bfaea55c4f645325325.png">â€‹</p><h3 id="32ã€ä¸ºä»€ä¹ˆå†™ç¼“å†²åŒºï¼Œä»…é€‚ç”¨äºéå”¯ä¸€æ™®é€šç´¢å¼•é¡µï¼Ÿ"><a href="#32ã€ä¸ºä»€ä¹ˆå†™ç¼“å†²åŒºï¼Œä»…é€‚ç”¨äºéå”¯ä¸€æ™®é€šç´¢å¼•é¡µï¼Ÿ" class="headerlink" title="32ã€ä¸ºä»€ä¹ˆå†™ç¼“å†²åŒºï¼Œä»…é€‚ç”¨äºéå”¯ä¸€æ™®é€šç´¢å¼•é¡µï¼Ÿ"></a>32ã€ä¸ºä»€ä¹ˆå†™ç¼“å†²åŒºï¼Œä»…é€‚ç”¨äºéå”¯ä¸€æ™®é€šç´¢å¼•é¡µï¼Ÿ</h3><p><strong>change Buffer åŸºæœ¬æ¦‚å¿µ</strong></p><p>Change Bufferï¼šå†™ç¼“å†²åŒºï¼Œæ˜¯é’ˆå¯¹äºŒçº§ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰é¡µçš„æ›´æ–°ä¼˜åŒ–æªæ–½ã€‚</p><p>ä½œç”¨:  åœ¨è¿›è¡Œ DML æ“ä½œæ—¶ï¼Œå¦‚æœè¯·æ±‚çš„è¾…åŠ©ç´¢å¼•ï¼ˆäºŒçº§ç´¢å¼•ï¼‰æ²¡æœ‰åœ¨ç¼“å†²æ± ä¸­æ—¶ï¼Œå¹¶ä¸ä¼šç«‹åˆ»å°†ç£ç›˜é¡µåŠ è½½åˆ°ç¼“å†²æ± ï¼Œè€Œæ˜¯åœ¨ CB è®°å½•ç¼“å†²å˜æ›´ï¼Œç­‰æœªæ¥æ•°æ®è¢«è¯»å–æ—¶ï¼Œå†å°†æ•°æ®åˆå¹¶æ¢å¤åˆ° BP ä¸­ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/0a7e8b17fa2dd366683efcd194b83db3645325325.png">â€‹</p><ol><li>ChangeBuffer ç”¨äºå­˜å‚¨ SQL å˜æ›´æ“ä½œï¼Œæ¯”å¦‚ Insert&#x2F;Update&#x2F;Delete ç­‰ SQL è¯­å¥</li><li>ChangeBuffer ä¸­çš„æ¯ä¸ªå˜æ›´æ“ä½œéƒ½æœ‰å…¶å¯¹åº”çš„æ•°æ®é¡µï¼Œå¹¶ä¸”è¯¥æ•°æ®é¡µæœªåŠ è½½åˆ°ç¼“å­˜ä¸­ï¼›</li><li>å½“ ChangeBuffer ä¸­å˜æ›´æ“ä½œå¯¹åº”çš„æ•°æ®é¡µåŠ è½½åˆ°ç¼“å­˜ä¸­åï¼ŒInnoDB ä¼šæŠŠå˜æ›´æ“ä½œ Merge åˆ°æ•°æ®é¡µä¸Šï¼›</li><li>InnoDB ä¼šå®šæœŸåŠ è½½ ChangeBuffer ä¸­æ“ä½œå¯¹åº”çš„æ•°æ®é¡µåˆ°ç¼“å­˜ä¸­ï¼Œå¹¶ Merge å˜æ›´æ“ä½œï¼›</li></ol><p><strong>change bufferæ›´æ–°æµç¨‹</strong></p><p><img src="https://i0.hdslb.com/bfs/article/d617f9f10078fde08a416caa27a75c0d645325325.png">â€‹</p><p>å†™ç¼“å†²åŒºï¼Œä»…é€‚ç”¨äºéå”¯ä¸€æ™®é€šç´¢å¼•é¡µï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p><ul><li><strong>å¦‚æœåœ¨ç´¢å¼•è®¾ç½®å”¯ä¸€æ€§ï¼Œåœ¨è¿›è¡Œä¿®æ”¹æ—¶ï¼ŒInnoDB å¿…é¡»è¦åšå”¯ä¸€æ€§æ ¡éªŒï¼Œå› æ­¤å¿…é¡»æŸ¥è¯¢ç£ç›˜ï¼Œåšä¸€æ¬¡ IO æ“ä½œã€‚ä¼šç›´æ¥å°†è®°å½•æŸ¥è¯¢åˆ°BufferPool ä¸­ï¼Œç„¶ååœ¨ç¼“å†²æ± ä¿®æ”¹ï¼Œä¸ä¼šåœ¨ ChangeBuffer æ“ä½œã€‚</strong></li></ul><h3 id="33ã€MySQL-ä¸ºä»€ä¹ˆæ”¹è¿›-LRU-ç®—æ³•ï¼Ÿ"><a href="#33ã€MySQL-ä¸ºä»€ä¹ˆæ”¹è¿›-LRU-ç®—æ³•ï¼Ÿ" class="headerlink" title="33ã€MySQL ä¸ºä»€ä¹ˆæ”¹è¿› LRU ç®—æ³•ï¼Ÿ"></a>33ã€MySQL ä¸ºä»€ä¹ˆæ”¹è¿› LRU ç®—æ³•ï¼Ÿ</h3><p><strong>æ™®é€š LRU ç®—æ³•</strong></p><p>LRU &#x3D; Least Recently Usedï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ï¼šå°±æ˜¯æœ«å°¾æ·˜æ±°æ³•ï¼Œæ–°æ•°æ®ä»é“¾è¡¨å¤´éƒ¨åŠ å…¥ï¼Œé‡Šæ”¾ç©ºé—´æ—¶ä»æœ«å°¾æ·˜æ±°.</p><p><img src="https://i0.hdslb.com/bfs/article/a9f00f2cae0220f5c7ec8cbe56308dd9645325325.png">â€‹</p><ol><li>å½“è¦è®¿é—®æŸä¸ªé¡µæ—¶ï¼Œå¦‚æœä¸åœ¨ Buffer Poolï¼Œéœ€è¦æŠŠè¯¥é¡µåŠ è½½åˆ°ç¼“å†²æ± ,å¹¶ä¸”æŠŠè¯¥ç¼“å†²é¡µå¯¹åº”çš„æ§åˆ¶å—ä½œä¸ºèŠ‚ç‚¹æ·»åŠ åˆ° LRU é“¾è¡¨çš„å¤´éƒ¨ã€‚</li><li>å½“è¦è®¿é—®æŸä¸ªé¡µæ—¶ï¼Œå¦‚æœåœ¨ Buffer Pool ä¸­ï¼Œåˆ™ç›´æ¥æŠŠè¯¥é¡µå¯¹åº”çš„æ§åˆ¶å—ç§»åŠ¨åˆ° LRU é“¾è¡¨çš„å¤´éƒ¨</li><li>å½“éœ€è¦é‡Šæ”¾ç©ºé—´æ—¶ï¼Œä»æœ€æœ«å°¾æ·˜æ±°</li></ol><p><strong>æ™®é€š LRU é“¾è¡¨çš„ä¼˜ç¼ºç‚¹</strong></p><p>ä¼˜ç‚¹</p><ul><li>æ‰€æœ‰æœ€è¿‘ä½¿ç”¨çš„æ•°æ®éƒ½åœ¨é“¾è¡¨è¡¨å¤´ï¼Œæœ€è¿‘æœªä½¿ç”¨çš„æ•°æ®éƒ½åœ¨é“¾è¡¨è¡¨å°¾ï¼Œä¿è¯çƒ­æ•°æ®èƒ½æœ€å¿«è¢«è·å–åˆ°ã€‚</li></ul><p>ç¼ºç‚¹</p><ul><li>å¦‚æœå‘ç”Ÿå…¨è¡¨æ‰«æï¼ˆæ¯”å¦‚ï¼šæ²¡æœ‰å»ºç«‹åˆé€‚çš„ç´¢å¼• or æŸ¥è¯¢æ—¶ä½¿ç”¨ select * ç­‰ï¼‰ï¼Œåˆ™æœ‰å¾ˆå¤§å¯èƒ½å°†çœŸæ­£çš„çƒ­æ•°æ®æ·˜æ±°æ‰.</li><li>ç”±äº MySQL ä¸­å­˜åœ¨é¢„è¯»æœºåˆ¶ï¼Œå¾ˆå¤šé¢„è¯»çš„é¡µéƒ½ä¼šè¢«æ”¾åˆ° LRU é“¾è¡¨çš„è¡¨å¤´ã€‚å¦‚æœè¿™äº›é¢„è¯»çš„é¡µéƒ½æ²¡æœ‰ç”¨åˆ°çš„è¯ï¼Œè¿™æ ·ï¼Œä¼šå¯¼è‡´å¾ˆå¤šå°¾éƒ¨çš„ç¼“å†²é¡µå¾ˆå¿«å°±ä¼šè¢«æ·˜æ±°ã€‚</li></ul><p><img src="https://i0.hdslb.com/bfs/article/9649fb52abb75101bea79d2fd07bd45f645325325.png">â€‹</p><p><strong>æ”¹è¿›å‹ LRU ç®—æ³•</strong></p><p>æ”¹è¿›å‹ LRUï¼šå°†é“¾è¡¨åˆ†ä¸º new å’Œ old ä¸¤ä¸ªéƒ¨åˆ†ï¼ŒåŠ å…¥å…ƒç´ æ—¶å¹¶ä¸æ˜¯ä»è¡¨å¤´æ’å…¥ï¼Œè€Œæ˜¯ä»ä¸­é—´ midpoint ä½ç½®æ’å…¥ï¼ˆå°±æ˜¯è¯´ä»ç£ç›˜ä¸­æ–°è¯»å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨å†·æ•°æ®åŒºçš„å¤´éƒ¨ï¼‰ï¼Œå¦‚æœæ•°æ®å¾ˆå¿«è¢«è®¿é—®ï¼Œé‚£ä¹ˆ page å°±ä¼šå‘ new åˆ—è¡¨å¤´éƒ¨ç§»åŠ¨ï¼Œå¦‚æœæ•°æ®æ²¡æœ‰è¢«è®¿é—®ï¼Œä¼šé€æ­¥å‘ old å°¾éƒ¨ç§»åŠ¨ï¼Œç­‰å¾…æ·˜æ±°ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/8359f18a389db89420113caa7edd7ce3645325325.png">â€‹</p><p>å†·æ•°æ®åŒºçš„æ•°æ®é¡µä»€ä¹ˆæ—¶å€™ä¼šè¢«è½¬åˆ°åˆ°çƒ­æ•°æ®åŒºå‘¢ ?</p><ol><li>å¦‚æœè¯¥æ•°æ®é¡µåœ¨ LRU é“¾è¡¨ä¸­å­˜åœ¨æ—¶é—´è¶…è¿‡ 1 sï¼Œå°±å°†å…¶ç§»åŠ¨åˆ°é“¾è¡¨å¤´éƒ¨  ( é“¾è¡¨æŒ‡çš„æ˜¯æ•´ä¸ª LRU é“¾è¡¨)</li><li>å¦‚æœè¯¥æ•°æ®é¡µåœ¨ LRU é“¾è¡¨ä¸­å­˜åœ¨çš„æ—¶é—´çŸ­äº 1 sï¼Œå…¶ä½ç½®ä¸å˜ï¼ˆç”±äºå…¨è¡¨æ‰«ææœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒå¯¹æŸä¸ªé¡µçš„é¢‘ç¹è®¿é—®æ€»è€—æ—¶ä¼šå¾ˆçŸ­ï¼‰</li><li>1 s è¿™ä¸ªæ—¶é—´æ˜¯ç”±å‚æ•° <code>innodb_old_blocks_time</code>â€‹ æ§åˆ¶çš„</li></ol><h3 id="34ã€ä½¿ç”¨ç´¢å¼•ä¸€å®šå¯ä»¥æå‡æ•ˆç‡å—ï¼Ÿ"><a href="#34ã€ä½¿ç”¨ç´¢å¼•ä¸€å®šå¯ä»¥æå‡æ•ˆç‡å—ï¼Ÿ" class="headerlink" title="34ã€ä½¿ç”¨ç´¢å¼•ä¸€å®šå¯ä»¥æå‡æ•ˆç‡å—ï¼Ÿ"></a>34ã€ä½¿ç”¨ç´¢å¼•ä¸€å®šå¯ä»¥æå‡æ•ˆç‡å—ï¼Ÿ</h3><p>ç´¢å¼•å°±æ˜¯æ’å¥½åºçš„,å¸®åŠ©æˆ‘ä»¬è¿›è¡Œå¿«é€ŸæŸ¥æ‰¾çš„æ•°æ®ç»“æ„.</p><p>ç®€å•æ¥è®²ï¼Œç´¢å¼•å°±æ˜¯ä¸€ç§å°†æ•°æ®åº“ä¸­çš„è®°å½•æŒ‰ç…§ç‰¹æ®Šå½¢å¼å­˜å‚¨çš„æ•°æ®ç»“æ„ã€‚é€šè¿‡ç´¢å¼•ï¼Œèƒ½å¤Ÿæ˜¾è‘—åœ°æé«˜æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ï¼Œä»è€Œæå‡æœåŠ¡å™¨çš„æ€§èƒ½.</p><p>ç´¢å¼•çš„ä¼˜åŠ¿ä¸åŠ£åŠ¿</p><ul><li><p>ä¼˜ç‚¹</p><ul><li>æé«˜æ•°æ®æ£€ç´¢çš„æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„ IO æˆæœ¬</li><li>é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œé™ä½äº† CPU çš„æ¶ˆè€—</li></ul></li><li><p>ç¼ºç‚¹</p><ul><li>åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´ï¼Œè¿™ç§æ—¶é—´éšç€æ•°æ®é‡çš„å¢åŠ è€Œå¢åŠ </li><li>ç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´ï¼Œé™¤äº†æ•°æ®è¡¨å ç”¨æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ç”¨ä¸€å®šçš„ç‰©ç†ç©ºé—´</li><li>å½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤ï¼Œé™ä½äº†æ•°æ®çš„ç»´æŠ¤é€Ÿåº¦</li></ul></li><li><p>åˆ›å»ºç´¢å¼•çš„åŸåˆ™</p><ul><li>åœ¨ç»å¸¸éœ€è¦æœç´¢çš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå¯ä»¥åŠ å¿«æœç´¢çš„é€Ÿåº¦ï¼›</li><li>åœ¨ä½œä¸ºä¸»é”®çš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå¼ºåˆ¶è¯¥åˆ—çš„å”¯ä¸€æ€§å’Œç»„ç»‡è¡¨ä¸­æ•°æ®çš„æ’åˆ—ç»“æ„ï¼›</li><li>åœ¨ç»å¸¸ç”¨åœ¨è¿æ¥çš„åˆ—ä¸Šï¼Œè¿™äº›åˆ—ä¸»è¦æ˜¯ä¸€äº›å¤–é”®ï¼Œå¯ä»¥åŠ å¿«è¿æ¥çš„é€Ÿåº¦ï¼›</li><li>åœ¨ç»å¸¸éœ€è¦æ ¹æ®èŒƒå›´è¿›è¡Œæœç´¢çš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æ’åºï¼Œå…¶æŒ‡å®šçš„èŒƒå›´æ˜¯è¿ç»­çš„ï¼›</li><li>åœ¨ç»å¸¸éœ€è¦æ’åºçš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æ’åºï¼Œè¿™æ ·æŸ¥è¯¢å¯ä»¥åˆ©ç”¨ç´¢å¼•çš„æ’åºï¼ŒåŠ å¿«æ’åºæŸ¥è¯¢æ—¶é—´ï¼›</li><li>åœ¨ç»å¸¸ä½¿ç”¨åœ¨ WHERE å­å¥ä¸­çš„åˆ—ä¸Šé¢åˆ›å»ºç´¢å¼•ï¼ŒåŠ å¿«æ¡ä»¶çš„åˆ¤æ–­é€Ÿåº¦ã€‚</li></ul></li></ul><h3 id="35ã€ä»‹ç»ä¸€ä¸‹-Page-é¡µçš„ç»“æ„ï¼Ÿ"><a href="#35ã€ä»‹ç»ä¸€ä¸‹-Page-é¡µçš„ç»“æ„ï¼Ÿ" class="headerlink" title="35ã€ä»‹ç»ä¸€ä¸‹ Page é¡µçš„ç»“æ„ï¼Ÿ"></a>35ã€ä»‹ç»ä¸€ä¸‹ Page é¡µçš„ç»“æ„ï¼Ÿ</h3><p>Page æ˜¯æ•´ä¸ª InnoDB å­˜å‚¨çš„æœ€åŸºæœ¬æ„ä»¶ï¼Œä¹Ÿæ˜¯ InnoDB ç£ç›˜ç®¡ç†çš„æœ€å°å•ä½ï¼Œä¸æ•°æ®åº“ç›¸å…³çš„æ‰€æœ‰å†…å®¹éƒ½å­˜å‚¨åœ¨è¿™ç§ Page ç»“æ„é‡Œã€‚</p><p>Page åˆ†ä¸ºå‡ ç§ç±»å‹ï¼Œå¸¸è§çš„é¡µç±»å‹æœ‰æ•°æ®é¡µï¼ˆB+tree Nodeï¼‰Undo é¡µï¼ˆUndo Log Pageï¼‰ç³»ç»Ÿé¡µï¼ˆSystem Pageï¼‰ äº‹åŠ¡æ•°æ®é¡µï¼ˆTransaction System Pageï¼‰ç­‰</p><p><img src="https://i0.hdslb.com/bfs/article/883fe39434511bdbc27eaf488c81cdca645325325.png">â€‹</p><p><strong>Page å„éƒ¨åˆ†è¯´æ˜</strong></p><table><thead><tr><th><strong>åç§°</strong></th><th><strong>å ç”¨å¤§å°</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>File Header</strong></td><td><strong>38å­—èŠ‚</strong></td><td><strong>æ–‡ä»¶å¤´, æè¿°é¡µä¿¡æ¯</strong></td></tr><tr><td><strong>Page Header</strong></td><td><strong>56å­—èŠ‚</strong></td><td><strong>é¡µå¤´,é¡µçš„çŠ¶æ€</strong></td></tr><tr><td><strong>Infimum + Supremum</strong></td><td><strong>26å­—èŠ‚</strong></td><td><strong>æœ€å¤§å’Œæœ€å°è®°å½•,è¿™æ˜¯ä¸¤ä¸ªè™šæ‹Ÿçš„è¡Œè®°å½•</strong></td></tr><tr><td><strong>User Records</strong></td><td><strong>ä¸ç¡®å®š</strong></td><td><strong>ç”¨æˆ·è®°å½•,å­˜å‚¨æ•°æ®è¡Œè®°å½•</strong></td></tr><tr><td><strong>Free Space</strong></td><td><strong>ä¸ç¡®å®š</strong></td><td><strong>ç©ºé—²ç©ºé—´,é¡µä¸­è¿˜æ²¡æœ‰è¢«ä½¿ç”¨çš„ç©ºé—´</strong></td></tr><tr><td><strong>Page Directory</strong></td><td><strong>ä¸ç¡®å®š</strong></td><td><strong>é¡µç›®å½•,å­˜å‚¨ç”¨æˆ·è®°å½•çš„ç›¸å¯¹ä½ç½®</strong></td></tr><tr><td><strong>File Trailer</strong></td><td><strong>8å­—èŠ‚</strong></td><td><strong>æ–‡ä»¶å°¾,æ ¡éªŒé¡µæ˜¯å¦å®Œæ•´</strong></td></tr></tbody></table><ul><li>File Header å­—æ®µç”¨äºè®°å½• Page çš„å¤´ä¿¡æ¯ï¼Œå…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ˜¯ FIL_PAGE_PREV å’Œ FIL_PAGE_NEXT å­—æ®µï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°è¯¥é¡µçš„ä¸Šä¸€é¡µå’Œä¸‹ä¸€é¡µï¼Œå®é™…ä¸Šæ‰€æœ‰é¡µé€šè¿‡ä¸¤ä¸ªå­—æ®µå¯ä»¥å½¢æˆä¸€æ¡åŒå‘é“¾è¡¨</li><li>Page Header å­—æ®µç”¨äºè®°å½• Page çš„çŠ¶æ€ä¿¡æ¯ã€‚</li><li>Infimum å’Œ Supremum æ˜¯ä¸¤ä¸ªä¼ªè¡Œè®°å½•ï¼ŒInfimumï¼ˆä¸‹ç¡®ç•Œï¼‰è®°å½•æ¯”è¯¥é¡µä¸­ä»»ä½•ä¸»é”®å€¼éƒ½è¦å°çš„å€¼ï¼ŒSupremum ï¼ˆä¸Šç¡®ç•Œï¼‰è®°å½•æ¯”è¯¥é¡µä¸­ä»»ä½•ä¸»é”®å€¼éƒ½è¦å¤§çš„å€¼ï¼Œè¿™ä¸ªä¼ªè®°å½•åˆ†åˆ«æ„æˆäº†é¡µä¸­è®°å½•çš„è¾¹ç•Œã€‚</li><li>User Records ä¸­å­˜æ”¾çš„æ˜¯å®é™…çš„æ•°æ®è¡Œè®°å½•</li><li>Free Space ä¸­å­˜æ”¾çš„æ˜¯ç©ºé—²ç©ºé—´ï¼Œè¢«åˆ é™¤çš„è¡Œè®°å½•ä¼šè¢«è®°å½•æˆç©ºé—²ç©ºé—´</li><li>Page Directory è®°å½•ç€ä¸äºŒå‰æŸ¥æ‰¾ç›¸å…³çš„ä¿¡æ¯</li><li>File Trailer å­˜å‚¨ç”¨äºæ£€æµ‹æ•°æ®å®Œæ•´æ€§çš„æ ¡éªŒå’Œç­‰æ•°æ®ã€‚</li></ul><p><strong>é¡µç»“æ„æ•´ä½“ä¸Šå¯ä»¥åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸ºé€šç”¨éƒ¨åˆ†(æ–‡ä»¶å¤´ã€æ–‡ä»¶å°¾)ã€å­˜å‚¨è®°å½•ç©ºé—´ã€ç´¢å¼•éƒ¨åˆ†ã€‚</strong></p><ol><li>é€šç”¨éƒ¨åˆ† (File Header&amp;File Trailer )</li></ol><p>é€šç”¨éƒ¨åˆ†ï¼šä¸»è¦æŒ‡æ–‡ä»¶å¤´å’Œæ–‡ä»¶å°¾ï¼Œå°†é¡µçš„å†…å®¹è¿›è¡Œå°è£…ï¼Œé€šè¿‡æ–‡ä»¶å¤´å’Œæ–‡ä»¶å°¾æ ¡éªŒçš„ CheckSum æ–¹å¼æ¥ç¡®ä¿é¡µçš„ä¼ è¾“æ˜¯å®Œæ•´çš„ã€‚</p><p>å…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ˜¯åœ¨æ–‡ä»¶å¤´ä¸­çš„ <code>FIL_PAGE_PREV</code>â€‹ å’Œ <code>FIL_PAGE_NEXT</code>â€‹ å­—æ®µï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°è¯¥é¡µçš„ä¸Šä¸€é¡µå’Œä¸‹ä¸€é¡µï¼Œå®é™…ä¸Šæ‰€æœ‰é¡µé€šè¿‡ä¸¤ä¸ªå­—æ®µå¯ä»¥å½¢æˆä¸€æ¡åŒå‘é“¾è¡¨</p><p><img src="https://i0.hdslb.com/bfs/article/6e7ee787db89bfe47bd14ad09cec1c4c645325325.png">â€‹</p><ol start="2"><li>è®°å½•éƒ¨åˆ†(User Records&amp;Free Space)</li></ol><p>é¡µçš„ä¸»è¦ä½œç”¨æ˜¯å­˜å‚¨è®°å½•ï¼Œæ‰€ä»¥â€œæœ€å°å’Œæœ€å¤§è®°å½•â€å’Œâ€œç”¨æˆ·è®°å½•â€éƒ¨åˆ†å äº†é¡µç»“æ„çš„ä¸»è¦ç©ºé—´ã€‚å¦å¤–ç©ºé—²ç©ºé—´æ˜¯ä¸ªçµæ´»çš„éƒ¨åˆ†ï¼Œå½“æœ‰æ–°çš„è®°å½•æ’å…¥æ—¶ï¼Œä¼šä»ç©ºé—²ç©ºé—´ä¸­è¿›è¡Œåˆ†é…ç”¨äºå­˜å‚¨æ–°è®°å½•</p><p><img src="https://i0.hdslb.com/bfs/article/567f2497038d8dc21861c0bc47ba44a7645325325.png" style="zoom:67%;" />â€‹</p><p><strong>3)æ•°æ®ç›®å½•éƒ¨åˆ† (Page Directory)</strong></p><p>æ•°æ®é¡µä¸­è¡Œè®°å½•æŒ‰ç…§ä¸»é”®å€¼ç”±å°åˆ°å¤§é¡ºåºä¸²è”æˆä¸€ä¸ªå•é“¾è¡¨(<strong>é¡µä¸­è®°å½•æ˜¯ä»¥å•å‘é“¾è¡¨çš„å½¢å¼è¿›è¡Œå­˜å‚¨çš„</strong>)ï¼Œä¸”å•é“¾è¡¨çš„é“¾è¡¨å¤´ä¸ºæœ€å°è®°å½•ï¼Œé“¾è¡¨å°¾ä¸ºæœ€å¤§è®°å½•ã€‚å¹¶ä¸”ä¸ºäº†æ›´å¿«é€Ÿåœ°å®šä½åˆ°æŒ‡å®šçš„è¡Œè®°å½•ï¼Œé€šè¿‡ <code>Page Directory</code>â€‹å®ç°ç›®å½•çš„åŠŸèƒ½ï¼Œå€ŸåŠ© <code>Page Directory</code>â€‹ä½¿ç”¨äºŒåˆ†æ³•å¿«é€Ÿæ‰¾åˆ°éœ€è¦æŸ¥æ‰¾çš„è¡Œè®°å½•ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/6d0e3ff76cd828629225d6572458c287645325325.png">â€‹</p><h3 id="36ã€è¯´ä¸€ä¸‹èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•ï¼Ÿ"><a href="#36ã€è¯´ä¸€ä¸‹èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•ï¼Ÿ" class="headerlink" title="36ã€è¯´ä¸€ä¸‹èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•ï¼Ÿ"></a>36ã€è¯´ä¸€ä¸‹èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•ï¼Ÿ</h3><p>èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«æ˜¯ï¼šå¶èŠ‚ç‚¹æ˜¯å¦å­˜æ”¾ä¸€æ•´è¡Œè®°å½•</p><ul><li><strong>èšç°‡ç´¢å¼•</strong>ï¼šå°†æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æ”¾åˆ°äº†ä¸€å—,ç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹ä¿å­˜äº†è¡Œæ•°æ®.</li><li><strong>éèšç°‡ç´¢å¼•</strong>ï¼šå°†æ•°æ®ä¸ç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹æŒ‡å‘äº†æ•°æ®å¯¹åº”çš„ä½ç½®.</li></ul><p>InnoDB ä¸»é”®ä½¿ç”¨çš„æ˜¯èšç°‡ç´¢å¼•ï¼ŒMyISAM ä¸ç®¡æ˜¯ä¸»é”®ç´¢å¼•ï¼Œè¿˜æ˜¯äºŒçº§ç´¢å¼•ä½¿ç”¨çš„éƒ½æ˜¯éèšç°‡ç´¢å¼•ã€‚</p><p>åœ¨InnoDBå¼•æ“ä¸­ï¼Œä¸»é”®ç´¢å¼•é‡‡ç”¨çš„å°±æ˜¯èšç°‡ç´¢å¼•ç»“æ„å­˜å‚¨ã€‚</p><p>èšç°‡ç´¢å¼•ï¼ˆèšé›†ç´¢å¼•ï¼‰</p><ul><li><p>èšç°‡ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®å­˜å‚¨æ–¹å¼ï¼ŒInnoDB çš„èšç°‡ç´¢å¼•å°±æ˜¯æŒ‰ç…§ä¸»é”®é¡ºåºæ„å»º B+Treeç»“æ„ã€‚B+Tree çš„å¶å­èŠ‚ç‚¹å°±æ˜¯è¡Œè®°å½•ï¼Œè¡Œè®°å½•å’Œä¸»é”®å€¼ç´§å‡‘åœ°å­˜å‚¨åœ¨ä¸€èµ·ã€‚ è¿™ä¹Ÿæ„å‘³ç€ InnoDB çš„ä¸»é”®ç´¢å¼•å°±æ˜¯æ•°æ®è¡¨æœ¬èº«ï¼Œå®ƒæŒ‰ä¸»é”®é¡ºåºå­˜æ”¾äº†æ•´å¼ è¡¨çš„æ•°æ®ï¼Œå ç”¨çš„ç©ºé—´å°±æ˜¯æ•´ä¸ªè¡¨æ•°æ®é‡çš„å¤§å°ã€‚é€šå¸¸è¯´çš„ä¸»é”®ç´¢å¼•å°±æ˜¯èšé›†ç´¢å¼•ã€‚</p></li><li><p>InnoDB çš„è¡¨è¦æ±‚ <strong>å¿…é¡»è¦æœ‰èšç°‡ç´¢å¼•</strong>ï¼š</p><ul><li>å¦‚æœè¡¨å®šä¹‰äº†ä¸»é”®ï¼Œåˆ™ä¸»é”®ç´¢å¼•å°±æ˜¯èšç°‡ç´¢å¼•</li><li>å¦‚æœè¡¨æ²¡æœ‰å®šä¹‰ä¸»é”®ï¼Œåˆ™ç¬¬ä¸€ä¸ªéç©º unique åˆ—ä½œä¸ºèšç°‡ç´¢å¼•</li><li>å¦åˆ™ InnoDB ä¼šä»å»ºä¸€ä¸ªéšè—çš„ row-id ä½œä¸ºèšç°‡ç´¢å¼•</li></ul></li><li><p>è¾…åŠ©ç´¢å¼•<br>InnoDB è¾…åŠ©ç´¢å¼•ï¼Œä¹Ÿå«ä½œäºŒçº§ç´¢å¼•ï¼Œæ˜¯æ ¹æ®ç´¢å¼•åˆ—æ„å»º B+Tree ç»“æ„ã€‚ä½†åœ¨ B+Tree çš„å¶å­èŠ‚ç‚¹ä¸­åªå­˜äº†ç´¢å¼•åˆ—å’Œä¸»é”®çš„ä¿¡æ¯ã€‚äºŒçº§ç´¢å¼•å ç”¨çš„ç©ºé—´ä¼šæ¯”èšç°‡ç´¢å¼•å°å¾ˆå¤šï¼Œ é€šå¸¸åˆ›å»ºè¾…åŠ©ç´¢å¼•å°±æ˜¯ä¸ºäº†æå‡æŸ¥è¯¢æ•ˆç‡ã€‚ä¸€ä¸ªè¡¨ InnoDB åªèƒ½åˆ›å»ºä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œä½†å¯ä»¥åˆ›å»ºå¤šä¸ªè¾…åŠ©ç´¢å¼•ã€‚</p></li></ul><p><img src="https://i0.hdslb.com/bfs/article/9afb24093bb64a103c60a6ec8ac53f19645325325.png" style="zoom:67%;" />â€‹</p><p><strong>éèšç°‡ç´¢å¼•</strong></p><p>ä¸ InnoDB è¡¨å­˜å‚¨ä¸åŒï¼ŒMyISM ä½¿ç”¨çš„æ˜¯éèšç°‡ç´¢å¼•ï¼Œéèšç°‡ç´¢å¼•çš„ä¸¤æ£µ B+ æ ‘çœ‹ä¸Šå»æ²¡ä»€ä¹ˆä¸åŒ ï¼ŒèŠ‚ç‚¹çš„ç»“æ„å®Œå…¨ä¸€è‡´åªæ˜¯å­˜å‚¨çš„å†…å®¹ä¸åŒè€Œå·²ï¼Œä¸»é”®ç´¢å¼• B+ æ ‘çš„èŠ‚ç‚¹å­˜å‚¨äº†ä¸»é”®ï¼Œè¾…åŠ©é”®ç´¢å¼• B+ æ ‘å­˜å‚¨äº†è¾…åŠ©é”®ã€‚</p><p>è¡¨æ•°æ®å­˜å‚¨åœ¨ç‹¬ç«‹çš„åœ°æ–¹ï¼Œè¿™ä¸¤é¢— B+ æ ‘çš„å¶å­èŠ‚ç‚¹éƒ½ä½¿ç”¨ä¸€ä¸ªåœ°å€æŒ‡å‘çœŸæ­£çš„è¡¨æ•°æ®ï¼Œå¯¹äºè¡¨æ•°æ®æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªé”®æ²¡æœ‰ä»»ä½•å·®åˆ«ã€‚ç”±äº ç´¢å¼•æ ‘æ˜¯ç‹¬ç«‹çš„ï¼Œé€šè¿‡è¾…åŠ©é”®æ£€ç´¢æ— éœ€è®¿é—®ä¸»é”®çš„ç´¢å¼•æ ‘ ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/d7e9fc60acc909fb50accddb827ce276645325325.png">â€‹</p><p><strong>èšç°‡ç´¢å¼•çš„ä¼˜ç‚¹</strong></p><ol><li>å½“ä½ éœ€è¦å–å‡ºä¸€å®šèŒƒå›´å†…çš„æ•°æ®æ—¶ï¼Œç”¨èšç°‡ç´¢å¼•ä¹Ÿæ¯”ç”¨éèšç°‡ç´¢å¼•å¥½ã€‚</li><li>å½“é€šè¿‡èšç°‡ç´¢å¼•æŸ¥æ‰¾ç›®æ ‡æ•°æ®æ—¶ç†è®ºä¸Šæ¯”éèšç°‡ç´¢å¼•è¦å¿«ï¼Œå› ä¸ºéèšç°‡ç´¢å¼•å®šä½åˆ°å¯¹åº”ä¸»é”®æ—¶è¿˜è¦å¤šä¸€æ¬¡ç›®æ ‡è®°å½•å¯»å€,å³å¤šä¸€æ¬¡I&#x2F;Oã€‚</li><li>ä½¿ç”¨è¦†ç›–ç´¢å¼•æ‰«æçš„æŸ¥è¯¢å¯ä»¥ç›´æ¥ä½¿ç”¨é¡µèŠ‚ç‚¹ä¸­çš„ä¸»é”®å€¼ã€‚</li></ol><p><strong>èšç°‡ç´¢å¼•çš„ç¼ºç‚¹</strong></p><ol><li>æ’å…¥é€Ÿåº¦ä¸¥é‡ä¾èµ–äºæ’å…¥é¡ºåº ã€‚</li><li>æ›´æ–°ä¸»é”®çš„ä»£ä»·å¾ˆé«˜ï¼Œå› ä¸ºå°†ä¼šå¯¼è‡´è¢«æ›´æ–°çš„è¡Œç§»åŠ¨ ã€‚</li><li>äºŒçº§ç´¢å¼•è®¿é—®éœ€è¦ä¸¤æ¬¡ç´¢å¼•æŸ¥æ‰¾ï¼Œç¬¬ä¸€æ¬¡æ‰¾åˆ°ä¸»é”®å€¼ï¼Œç¬¬äºŒæ¬¡æ ¹æ®ä¸»é”®å€¼æ‰¾åˆ°è¡Œæ•°æ®ã€‚</li></ol><h3 id="37ã€ç´¢å¼•æœ‰å“ªå‡ ç§ç±»å‹ï¼Ÿ"><a href="#37ã€ç´¢å¼•æœ‰å“ªå‡ ç§ç±»å‹ï¼Ÿ" class="headerlink" title="37ã€ç´¢å¼•æœ‰å“ªå‡ ç§ç±»å‹ï¼Ÿ"></a>37ã€ç´¢å¼•æœ‰å“ªå‡ ç§ç±»å‹ï¼Ÿ</h3><p><strong>1ï¼‰æ™®é€šç´¢å¼•</strong></p><ul><li><strong>è¿™æ˜¯æœ€åŸºæœ¬çš„ç´¢å¼•ç±»å‹ï¼ŒåŸºäºæ™®é€šå­—æ®µå»ºç«‹çš„ç´¢å¼•ï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX &lt;ç´¢å¼•çš„åå­—&gt; ON tablename (å­—æ®µå);</span><br><span class="line">ALTER TABLE tablename ADD INDEX [ç´¢å¼•çš„åå­—] (å­—æ®µå);</span><br><span class="line">CREATE TABLE tablename ( [...], INDEX [ç´¢å¼•çš„åå­—] (å­—æ®µå) );</span><br></pre></td></tr></table></figure><p><strong>2ï¼‰å”¯ä¸€ç´¢å¼•</strong></p><ul><li><strong>ä¸&quot;æ™®é€šç´¢å¼•&quot;ç±»ä¼¼ï¼Œä¸åŒçš„å°±æ˜¯ï¼šç´¢å¼•å­—æ®µçš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ ã€‚</strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE UNIQUE INDEX &lt;ç´¢å¼•çš„åå­—&gt; ON tablename (å­—æ®µå);</span><br><span class="line">ALTER TABLE tablename ADD UNIQUE INDEX [ç´¢å¼•çš„åå­—] (å­—æ®µå);</span><br><span class="line">CREATE TABLE tablename ( [...], UNIQUE [ç´¢å¼•çš„åå­—] (å­—æ®µå) ;</span><br></pre></td></tr></table></figure><p><strong>3ï¼‰ä¸»é”®ç´¢å¼•</strong></p><ul><li><strong>å®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œä¸å…è®¸æœ‰ç©ºå€¼ã€‚åœ¨åˆ›å»ºæˆ–ä¿®æ”¹è¡¨æ—¶è¿½åŠ ä¸»é”®çº¦æŸå³å¯ï¼Œæ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ã€‚</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tablename ( [...], <span class="keyword">PRIMARY</span> KEY (å­—æ®µå) );</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablename <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (å­—æ®µå);</span><br></pre></td></tr></table></figure><p><strong>4ï¼‰å¤åˆç´¢å¼•</strong></p><ul><li><strong>ç”¨æˆ·å¯ä»¥åœ¨å¤šä¸ªåˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œè¿™ç§ç´¢å¼•å«åšç»„å¤åˆç´¢å¼•ï¼ˆç»„åˆç´¢å¼•ï¼‰ã€‚å¤åˆç´¢å¼•å¯ä»¥ä»£æ›¿å¤šä¸ªå•ä¸€ç´¢å¼•ï¼Œç›¸æ¯”å¤šä¸ªå•ä¸€ç´¢å¼•å¤åˆç´¢å¼•æ‰€éœ€çš„å¼€é”€æ›´å°ã€‚</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX <span class="operator">&lt;</span>ç´¢å¼•çš„åå­—<span class="operator">&gt;</span> <span class="keyword">ON</span> tablename (å­—æ®µå<span class="number">1</span>ï¼Œå­—æ®µå<span class="number">2.</span>..);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablename <span class="keyword">ADD</span> INDEX [ç´¢å¼•çš„åå­—] (å­—æ®µå<span class="number">1</span>ï¼Œå­—æ®µå<span class="number">2.</span>..);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tablename ( [...], INDEX [ç´¢å¼•çš„åå­—] (å­—æ®µå<span class="number">1</span>ï¼Œå­—æ®µå<span class="number">2.</span>..) );</span><br></pre></td></tr></table></figure><ul><li><p><strong>å¤åˆç´¢å¼•ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li><strong>ä½•æ—¶ä½¿ç”¨å¤åˆç´¢å¼•ï¼Œè¦æ ¹æ®whereæ¡ä»¶å»ºç´¢å¼•ï¼Œæ³¨æ„ä¸è¦è¿‡å¤šä½¿ç”¨ç´¢å¼•ï¼Œè¿‡å¤šä½¿ç”¨ä¼šå¯¹æ›´æ–°æ“ä½œæ•ˆç‡æœ‰å¾ˆå¤§å½±å“ã€‚</strong></li><li><strong>å¦‚æœè¡¨å·²ç»å»ºç«‹äº†(col1ï¼Œcol2)ï¼Œå°±æ²¡æœ‰å¿…è¦å†å•ç‹¬å»ºç«‹ï¼ˆcol1ï¼‰ï¼›å¦‚æœç°åœ¨æœ‰(col1)ç´¢å¼•ï¼Œå¦‚æœæŸ¥è¯¢éœ€è¦col1å’Œcol2æ¡ä»¶ï¼Œå¯ä»¥å»ºç«‹(col1,col2)å¤åˆç´¢å¼•ï¼Œå¯¹äºæŸ¥è¯¢æœ‰ä¸€å®šæé«˜ã€‚</strong></li></ul></li></ul><p><strong>5) å…¨æ–‡ç´¢å¼•</strong></p><p>æŸ¥è¯¢æ“ä½œåœ¨æ•°æ®é‡æ¯”è¾ƒå°‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ like æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä½†æ˜¯å¯¹äºå¤§é‡çš„æ–‡æœ¬æ•°æ®æ£€ç´¢ï¼Œæ•ˆç‡å¾ˆä½ã€‚å¦‚æœä½¿ç”¨å…¨æ–‡ç´¢å¼•ï¼ŒæŸ¥è¯¢é€Ÿåº¦ä¼šæ¯” likeå¿«å¾ˆå¤šå€ã€‚</p><p>åœ¨ MySQL 5.6 ä»¥å‰çš„ç‰ˆæœ¬ï¼Œåªæœ‰ MyISAM å­˜å‚¨å¼•æ“æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼Œä» MySQL 5.6 å¼€å§‹ MyISAM å’Œ InnoDB å­˜å‚¨å¼•æ“å‡æ”¯æŒã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE FULLTEXT INDEX &lt;ç´¢å¼•çš„åå­—&gt; ON tablename (å­—æ®µå);</span><br><span class="line"></span><br><span class="line">ALTER TABLE tablename ADD FULLTEXT [ç´¢å¼•çš„åå­—] (å­—æ®µå);</span><br><span class="line"></span><br><span class="line">CREATE TABLE tablename ( [...], FULLTEXT KEY [ç´¢å¼•çš„åå­—] (å­—æ®µå) ;</span><br></pre></td></tr></table></figure><p>å…¨æ–‡ç´¢å¼•æ–¹å¼æœ‰è‡ªç„¶è¯­è¨€æ£€ç´¢ <code>IN NATURAL LANGUAGE MODE</code>â€‹å’Œå¸ƒå°”æ£€ç´¢ <code>IN BOOLEAN MODE</code>â€‹ä¸¤ç§å’Œå¸¸ç”¨çš„ like æ¨¡ç³ŠæŸ¥è¯¢ä¸åŒï¼Œå…¨æ–‡ç´¢å¼•æœ‰è‡ªå·±çš„è¯­æ³•æ ¼å¼ï¼Œä½¿ç”¨ match å’Œ against å…³é”®å­—ï¼Œæ¯”å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users3 WHERE MATCH(NAME) AGAINST(&#x27;aabb&#x27;);</span><br><span class="line"></span><br><span class="line">-- * è¡¨ç¤ºé€šé…ç¬¦,åªèƒ½åœ¨è¯çš„åé¢</span><br><span class="line">SELECT * FROM users3 WHERE MATCH(NAME) AGAINST(&#x27;aa*&#x27;  IN BOOLEAN MODE);</span><br></pre></td></tr></table></figure><p>å…¨æ–‡ç´¢å¼•ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å…¨æ–‡ç´¢å¼•å¿…é¡»åœ¨å­—ç¬¦ä¸²ã€æ–‡æœ¬å­—æ®µä¸Šå»ºç«‹ã€‚</li><li>å…¨æ–‡ç´¢å¼•å­—æ®µå€¼å¿…é¡»åœ¨æœ€å°å­—ç¬¦å’Œæœ€å¤§å­—ç¬¦ä¹‹é—´çš„æ‰ä¼šæœ‰æ•ˆã€‚ï¼ˆinnodbï¼š3-84ï¼›myisamï¼š4-84ï¼‰</li></ul><h3 id="38ã€ä»‹ç»ä¸€ä¸‹æœ€ä½³å·¦å‰ç¼€æ³•åˆ™ï¼Ÿ"><a href="#38ã€ä»‹ç»ä¸€ä¸‹æœ€ä½³å·¦å‰ç¼€æ³•åˆ™ï¼Ÿ" class="headerlink" title="38ã€ä»‹ç»ä¸€ä¸‹æœ€ä½³å·¦å‰ç¼€æ³•åˆ™ï¼Ÿ"></a>38ã€ä»‹ç»ä¸€ä¸‹æœ€ä½³å·¦å‰ç¼€æ³•åˆ™ï¼Ÿ</h3><p>1)æœ€ä½³å·¦å‰ç¼€æ³•åˆ™</p><p>æœ€ä½³å·¦å‰ç¼€æ³•åˆ™:  å¦‚æœåˆ›å»ºçš„æ˜¯è”åˆç´¢å¼•ï¼Œå°±è¦éµå¾ªè¯¥æ³•åˆ™ã€‚ ä½¿ç”¨ç´¢å¼•æ—¶ï¼Œwhere åé¢çš„æ¡ä»¶éœ€è¦ä»ç´¢å¼•çš„æœ€å·¦å‰åˆ—å¼€å§‹ä½¿ç”¨ï¼Œå¹¶ä¸”ä¸èƒ½è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ä½¿ç”¨ã€‚</p><ul><li><p>åœºæ™¯1:  æŒ‰ç…§ç´¢å¼•å­—æ®µé¡ºåºä½¿ç”¨ï¼Œä¸‰ä¸ªå­—æ®µéƒ½ä½¿ç”¨äº†ç´¢å¼•,æ²¡æœ‰é—®é¢˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM users WHERE user_name = &#x27;tom&#x27; </span><br><span class="line">AND user_age = 17 AND user_level = &#x27;A&#x27;;</span><br></pre></td></tr></table></figure></li><li><p>åœºæ™¯2: ç›´æ¥è·³è¿‡ user_name ä½¿ç”¨ç´¢å¼•å­—æ®µï¼Œç´¢å¼•æ— æ•ˆï¼Œæœªä½¿ç”¨åˆ°ç´¢å¼•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM users WHERE user_age = 17 AND user_level = &#x27;A&#x27;;</span><br></pre></td></tr></table></figure></li><li><p>åœºæ™¯3:  ä¸æŒ‰ç…§åˆ›å»ºè”åˆç´¢å¼•çš„é¡ºåº,ä½¿ç”¨ç´¢å¼•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM users WHERE </span><br><span class="line">user_age = 17 AND user_name = &#x27;tom&#x27; AND user_level = &#x27;A&#x27;;</span><br></pre></td></tr></table></figure><p>whereåé¢æŸ¥è¯¢æ¡ä»¶é¡ºåºæ˜¯ <code>user_age</code>â€‹ã€<code>user_level</code>â€‹ã€<code>user_name</code>â€‹ä¸æˆ‘ä»¬åˆ›å»ºçš„ç´¢å¼•é¡ºåº <code>user_name</code>â€‹ã€<code>user_age</code>â€‹ã€<code>user_level</code>â€‹ä¸ä¸€è‡´ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯ä½¿ç”¨äº†ç´¢å¼•ï¼ŒåŸå› æ˜¯å› ä¸ºMySqlåº•å±‚ä¼˜åŒ–å™¨å¯¹å…¶è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p></li><li><p>æœ€ä½³å·¦å‰ç¼€åº•å±‚åŸç†<br>MySQLåˆ›å»ºè”åˆç´¢å¼•çš„è§„åˆ™æ˜¯: é¦–å…ˆä¼šå¯¹è”åˆç´¢å¼•æœ€å·¦è¾¹çš„å­—æ®µè¿›è¡Œæ’åº( ä¾‹å­ä¸­æ˜¯ <code>user_name</code>â€‹ ), åœ¨ç¬¬ä¸€ä¸ªå­—æ®µçš„åŸºç¡€ä¹‹ä¸Š å†å¯¹ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åº ( ä¾‹å­ä¸­æ˜¯ <code>user_age</code>â€‹ ) .</p><p><img src="https://i0.hdslb.com/bfs/article/102f33407cec5b519872e5eecbf602a7645325325.png">â€‹</p></li><li><p>æœ€ä½³å·¦å‰ç¼€åŸåˆ™å…¶å®æ˜¯å’Œ B+ æ ‘çš„ç»“æ„æœ‰å…³ç³»ï¼Œæœ€å·¦å­—æ®µè‚¯å®šæ˜¯æœ‰åºçš„ï¼Œç¬¬äºŒä¸ªå­—æ®µåˆ™æ˜¯æ— åºçš„(è”åˆç´¢å¼•çš„æ’åºæ–¹å¼æ˜¯ï¼šå…ˆæŒ‰ç…§ç¬¬ä¸€ä¸ªå­—æ®µè¿›è¡Œæ’åºï¼Œå¦‚æœç¬¬ä¸€ä¸ªå­—æ®µç›¸ç­‰å†æ ¹æ®ç¬¬äºŒä¸ªå­—æ®µæ’åº)ã€‚æ‰€ä»¥å¦‚æœç›´æ¥ä½¿ç”¨ç¬¬äºŒä¸ªå­—æ®µ <code>user_age</code>â€‹ é€šå¸¸æ˜¯ä½¿ç”¨ä¸åˆ°ç´¢å¼•çš„ã€‚</p></li></ul><h3 id="39ã€ä»€ä¹ˆæ˜¯ç´¢å¼•ä¸‹æ¨ï¼Ÿ"><a href="#39ã€ä»€ä¹ˆæ˜¯ç´¢å¼•ä¸‹æ¨ï¼Ÿ" class="headerlink" title="39ã€ä»€ä¹ˆæ˜¯ç´¢å¼•ä¸‹æ¨ï¼Ÿ"></a>39ã€ä»€ä¹ˆæ˜¯ç´¢å¼•ä¸‹æ¨ï¼Ÿ</h3><p>ç´¢å¼•ä¸‹æ¨ï¼ˆindex condition pushdown ï¼‰ç®€ç§° ICPï¼Œåœ¨ Mysql 5.6 çš„ç‰ˆæœ¬ä¸Šæ¨å‡ºï¼Œç”¨äºä¼˜åŒ–æŸ¥è¯¢ã€‚</p><p>éœ€æ±‚ï¼šæŸ¥è¯¢ users è¡¨ä¸­ â€œåå­—ç¬¬ä¸€ä¸ªå­—æ˜¯å¼ ï¼Œå¹´é¾„ä¸º 10 å²çš„æ‰€æœ‰è®°å½•â€ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE user_name LIKE &#x27;å¼ %&#x27; AND user_age = 10;</span><br></pre></td></tr></table></figure><p>æ ¹æ®æœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œè¯¥è¯­å¥åœ¨æœç´¢ç´¢å¼•æ ‘çš„æ—¶å€™ï¼Œåªèƒ½åŒ¹é…åˆ°åå­—ç¬¬ä¸€ä¸ªå­—æ˜¯â€˜å¼ â€™çš„è®°å½•ï¼Œæ¥ä¸‹æ¥æ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿå½“ç„¶å°±æ˜¯ä»è¯¥è®°å½•å¼€å§‹ï¼Œé€ä¸ªå›è¡¨ï¼Œåˆ°ä¸»é”®ç´¢å¼•ä¸Šæ‰¾å‡ºç›¸åº”çš„è®°å½•ï¼Œå†æ¯”å¯¹ <code>age</code>â€‹ è¿™ä¸ªå­—æ®µçš„å€¼æ˜¯å¦ç¬¦åˆã€‚</p><p>å›¾1: åœ¨ (name,age) ç´¢å¼•é‡Œé¢ç‰¹æ„å»æ‰äº† age çš„å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹ InnoDB å¹¶ä¸ä¼šå»çœ‹ age çš„å€¼ï¼Œåªæ˜¯æŒ‰é¡ºåºæŠŠâ€œname ç¬¬ä¸€ä¸ªå­—æ˜¯â€™å¼ â€™â€çš„è®°å½•ä¸€æ¡æ¡å–å‡ºæ¥å›è¡¨ã€‚å› æ­¤ï¼Œéœ€è¦å›è¡¨ 4 æ¬¡</p><p><img src="https://i0.hdslb.com/bfs/article/26845cc4f82c9421229d50e3f631b8f9645325325.png">â€‹</p><p>MySQL 5.6 å¼•å…¥äº†ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–ï¼Œå¯ä»¥åœ¨ç´¢å¼•éå†è¿‡ç¨‹ä¸­ï¼Œå¯¹ç´¢å¼•ä¸­åŒ…å«çš„å­—æ®µå…ˆåšåˆ¤æ–­ï¼Œè¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„è®°å½•ï¼Œå‡å°‘å›è¡¨æ¬¡æ•°ã€‚</p><p>å›¾2: InnoDB åœ¨ (name,age) ç´¢å¼•å†…éƒ¨å°±åˆ¤æ–­äº† age æ˜¯å¦ç­‰äº 10ï¼Œå¯¹äºä¸ç­‰äº 10 çš„è®°å½•ï¼Œç›´æ¥åˆ¤æ–­å¹¶è·³è¿‡,å‡å°‘å›è¡¨æ¬¡æ•°.</p><p><img src="https://i0.hdslb.com/bfs/article/c27e67c4bc3dcadf2c5db89259081fc3645325325.png">â€‹</p><p>æ€»ç»“</p><p>å¦‚æœæ²¡æœ‰ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–ï¼ˆæˆ–ç§° ICP ä¼˜åŒ–ï¼‰ï¼Œå½“è¿›è¡Œç´¢å¼•æŸ¥è¯¢æ—¶ï¼Œé¦–å…ˆæ ¹æ®ç´¢å¼•æ¥æŸ¥æ‰¾è®°å½•ï¼Œç„¶åå†æ ¹æ® where æ¡ä»¶æ¥è¿‡æ»¤è®°å½•ï¼›</p><p>åœ¨æ”¯æŒ ICP ä¼˜åŒ–åï¼ŒMySQL ä¼šåœ¨å–å‡ºç´¢å¼•çš„åŒæ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›è¡Œ where æ¡ä»¶è¿‡æ»¤å†è¿›è¡Œç´¢å¼•æŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯è¯´æå‰æ‰§è¡Œ where çš„éƒ¨åˆ†è¿‡æ»¤æ“ä½œï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¯ä»¥å¤§å¤§å‡å°‘å›è¡¨æ¬¡æ•°ï¼Œä»è€Œæå‡æ•´ä½“æ€§èƒ½ã€‚</p><h3 id="40ã€ä»€ä¹ˆæ˜¯è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ï¼Ÿ"><a href="#40ã€ä»€ä¹ˆæ˜¯è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ï¼Ÿ" class="headerlink" title="40ã€ä»€ä¹ˆæ˜¯è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ï¼Ÿ"></a>40ã€ä»€ä¹ˆæ˜¯è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ï¼Ÿ</h3><p>è‡ªé€‚åº” Hash ç´¢å¼•ï¼ˆAdatptive Hash Indexï¼Œå†…éƒ¨ç®€ç§° AHIï¼‰æ˜¯ InnoDB çš„ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œè¿˜æœ‰ä¸¤ä¸ªæ˜¯ Buffer Pool ç®€ç§° BPã€åŒå†™ç¼“å†²åŒºï¼ˆDoublewrite Bufferï¼‰ã€‚</p><p>1ã€è‡ªé€‚åº”å³æˆ‘ä»¬ä¸éœ€è¦è‡ªå·±å¤„ç†ï¼Œå½“ InnoDB å¼•æ“æ ¹æ®æŸ¥è¯¢ç»Ÿè®¡å‘ç°æŸä¸€æŸ¥è¯¢æ»¡è¶³ hash ç´¢å¼•çš„æ•°æ®ç»“æ„ç‰¹ç‚¹ï¼Œå°±ä¼šç»™å…¶å»ºç«‹ä¸€ä¸ª hashç´¢å¼•ï¼›</p><p>2ã€hash ç´¢å¼•åº•å±‚çš„æ•°æ®ç»“æ„æ˜¯æ•£åˆ—è¡¨ï¼ˆHash è¡¨ï¼‰ï¼Œå…¶æ•°æ®ç‰¹ç‚¹å°±æ˜¯æ¯”è¾ƒé€‚åˆåœ¨å†…å­˜ä¸­ä½¿ç”¨ï¼Œè‡ªé€‚åº” Hash ç´¢å¼•å­˜åœ¨äº InnoDB æ¶æ„ä¸­çš„ç¼“å­˜ä¸­ï¼ˆä¸å­˜åœ¨äºç£ç›˜æ¶æ„ä¸­ï¼‰ï¼Œè§ä¸‹é¢çš„ InnoDB æ¶æ„å›¾ã€‚</p><p>3ã€è‡ªé€‚åº” hash ç´¢å¼•åªé€‚åˆæœç´¢ç­‰å€¼çš„æŸ¥è¯¢ï¼Œå¦‚ select * from table where index_col&#x3D;â€™xxxâ€™ï¼Œè€Œå¯¹äºå…¶ä»–æŸ¥æ‰¾ç±»å‹ï¼Œå¦‚èŒƒå›´æŸ¥æ‰¾ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨çš„ï¼›</p><p><img src="https://i0.hdslb.com/bfs/article/dd7dc37533ddc007eea2e0685cacc34b645325325.png">â€‹</p><p>Adaptive Hash Index æ˜¯é’ˆå¯¹ B+ æ ‘ Search Path çš„ä¼˜åŒ–ï¼Œå› æ­¤æ‰€æœ‰ä¼šæ¶‰åŠåˆ° Search Path çš„æ“ä½œï¼Œå‡å¯ä½¿ç”¨æ­¤ Hash ç´¢å¼•è¿›è¡Œä¼˜åŒ–.</p><p><img src="https://i0.hdslb.com/bfs/article/055f2f08cbda942bd8e8f57e9bd3bce3645325325.png">â€‹</p><p>æ ¹æ®ç´¢å¼•é”®å€¼(å‰ç¼€)å¿«é€Ÿå®šä½åˆ°å¶å­èŠ‚ç‚¹æ»¡è¶³æ¡ä»¶è®°å½•çš„ Offsetï¼Œå‡å°‘äº† B+ æ ‘ Search Path çš„ä»£ä»·ï¼Œå°† B+ æ ‘ä» Root èŠ‚ç‚¹è‡³ Leaf èŠ‚ç‚¹çš„è·¯å¾„å®šä½ï¼Œä¼˜åŒ–ä¸º Hash Index çš„å¿«é€ŸæŸ¥è¯¢ã€‚</p><p>InnoDB çš„è‡ªé€‚åº” Hash ç´¢å¼•æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œå¯ä»¥é€šè¿‡é…ç½®ä¸‹é¢çš„å‚æ•°è®¾ç½®è¿›è¡Œå…³é—­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">innodb_adaptive_hash_index = off</span><br></pre></td></tr></table></figure><p>è‡ªé€‚åº” Hash ç´¢å¼•ä½¿ç”¨åˆ†ç‰‡è¿›è¡Œå®ç°çš„ï¼Œåˆ†ç‰‡æ•°å¯ä»¥ä½¿ç”¨é…ç½®å‚æ•°è®¾ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">innodb_adaptive_hash_index_parts = 8</span><br></pre></td></tr></table></figure><h3 id="41ã€ä¸ºä»€ä¹ˆ-LIKE-ä»¥-å¼€å¤´ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ"><a href="#41ã€ä¸ºä»€ä¹ˆ-LIKE-ä»¥-å¼€å¤´ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ" class="headerlink" title="41ã€ä¸ºä»€ä¹ˆ LIKE ä»¥ % å¼€å¤´ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ"></a>41ã€ä¸ºä»€ä¹ˆ LIKE ä»¥ % å¼€å¤´ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ</h3><p>like æŸ¥è¯¢ä¸ºèŒƒå›´æŸ¥è¯¢ï¼Œ% å‡ºç°åœ¨å·¦è¾¹ï¼Œåˆ™ç´¢å¼•å¤±æ•ˆã€‚% å‡ºç°åœ¨å³è¾¹ç´¢å¼•æœªå¤±æ•ˆ.</p><p>åœºæ™¯1: ä¸¤è¾¹éƒ½æœ‰ % æˆ–è€… å­—æ®µå·¦è¾¹æœ‰ %,ç´¢å¼•éƒ½ä¼šå¤±æ•ˆã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;%tom%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;%tom&#x27;</span>;</span><br></pre></td></tr></table></figure><p>åœºæ™¯2: å­—æ®µå³è¾¹æœ‰ %,ç´¢å¼•ç”Ÿæ•ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;tom%&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>è§£å†³ % å‡ºç°åœ¨å·¦è¾¹ç´¢å¼•å¤±æ•ˆçš„æ–¹æ³•ï¼Œä½¿ç”¨è¦†ç›–ç´¢å¼•&lt;åˆ›å»º åŒ…å«æ‰€æœ‰æŸ¥è¯¢åˆ—å¦‚ï¼šuser_name,user_age,user_level çš„æ‰€ç´¢å¼•&gt;</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> user_name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;%jack%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> user_name,user_age,user_level <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_name <span class="keyword">LIKE</span> <span class="string">&#x27;%jack%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”åœºæ™¯ 1 å¯ä»¥çŸ¥é“, é€šè¿‡ä½¿ç”¨è¦†ç›–ç´¢å¼• <code>type = index</code>â€‹,å¹¶ä¸” <code>extra = Using index</code>â€‹ï¼Œä»å…¨è¡¨æ‰«æå˜æˆäº†å…¨ç´¢å¼•æ‰«æ.</p><p><strong>like å¤±æ•ˆçš„åŸå› </strong></p><ol><li><strong>%å·åœ¨å³:</strong>  ç”±äº B+ æ ‘çš„ç´¢å¼•é¡ºåºï¼Œæ˜¯æŒ‰ç…§é¦–å­—æ¯çš„å¤§å°è¿›è¡Œæ’åºï¼Œ% å·åœ¨å³çš„åŒ¹é…åˆæ˜¯åŒ¹é…é¦–å­—æ¯ã€‚æ‰€ä»¥å¯ä»¥åœ¨ B+ æ ‘ä¸Šè¿›è¡Œæœ‰åºçš„æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾é¦–å­—æ¯ç¬¦åˆè¦æ±‚çš„æ•°æ®ã€‚æ‰€ä»¥æœ‰äº›æ—¶å€™å¯ä»¥ç”¨åˆ°ç´¢å¼•.</li><li><strong>%å·åœ¨å·¦:</strong>   æ˜¯åŒ¹é…å­—ç¬¦ä¸²å°¾éƒ¨çš„æ•°æ®ï¼Œæˆ‘ä»¬ä¸Šé¢è¯´äº†æ’åºè§„åˆ™ï¼Œå°¾éƒ¨çš„å­—æ¯æ˜¯æ²¡æœ‰é¡ºåºçš„ï¼Œæ‰€ä»¥ä¸èƒ½æŒ‰ç…§ç´¢å¼•é¡ºåºæŸ¥è¯¢ï¼Œå°±ç”¨ä¸åˆ°ç´¢å¼•.</li><li><strong>ä¸¤ä¸ª %% å·:</strong>   è¿™ä¸ªæ˜¯æŸ¥è¯¢ä»»æ„ä½ç½®çš„å­—æ¯æ»¡è¶³æ¡ä»¶å³å¯ï¼Œåªæœ‰é¦–å­—æ¯æ˜¯è¿›è¡Œç´¢å¼•æ’åºçš„ï¼Œå…¶ä»–ä½ç½®çš„å­—æ¯éƒ½æ˜¯ç›¸å¯¹æ— åºçš„ï¼Œæ‰€ä»¥æŸ¥æ‰¾ä»»æ„ä½ç½®çš„å­—æ¯æ˜¯ç”¨ä¸ä¸Šç´¢å¼•çš„.</li></ol><h3 id="42ã€è‡ªå¢è¿˜æ˜¯-UUIDï¼Ÿæ•°æ®åº“ä¸»é”®çš„ç±»å‹è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ"><a href="#42ã€è‡ªå¢è¿˜æ˜¯-UUIDï¼Ÿæ•°æ®åº“ä¸»é”®çš„ç±»å‹è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ" class="headerlink" title="42ã€è‡ªå¢è¿˜æ˜¯ UUIDï¼Ÿæ•°æ®åº“ä¸»é”®çš„ç±»å‹è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ"></a>42ã€è‡ªå¢è¿˜æ˜¯ UUIDï¼Ÿæ•°æ®åº“ä¸»é”®çš„ç±»å‹è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ</h3><p>auto_increment çš„ä¼˜ç‚¹ï¼š</p><ol><li>å­—æ®µé•¿åº¦è¾ƒ uuid å°å¾ˆå¤šï¼Œå¯ä»¥æ˜¯ bigint ç”šè‡³æ˜¯ int ç±»å‹ï¼Œè¿™å¯¹æ£€ç´¢çš„æ€§èƒ½ä¼šæœ‰æ‰€å½±å“ã€‚</li><li>åœ¨å†™çš„æ–¹é¢ï¼Œå› ä¸ºæ˜¯è‡ªå¢çš„ï¼Œæ‰€ä»¥ä¸»é”®æ˜¯è¶‹åŠ¿è‡ªå¢çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ–°å¢çš„æ•°æ®æ°¸è¿œåœ¨åé¢ï¼Œè¿™ç‚¹å¯¹äºæ€§èƒ½æœ‰å¾ˆå¤§çš„æå‡ã€‚</li><li>æ•°æ®åº“è‡ªåŠ¨ç¼–å·ï¼Œé€Ÿåº¦å¿«ï¼Œè€Œä¸”æ˜¯å¢é‡å¢é•¿ï¼ŒæŒ‰é¡ºåºå­˜æ”¾ï¼Œå¯¹äºæ£€ç´¢éå¸¸æœ‰åˆ©ã€‚</li><li>æ•°å­—å‹ï¼Œå ç”¨ç©ºé—´å°ï¼Œæ˜“æ’åºï¼Œåœ¨ç¨‹åºä¸­ä¼ é€’ä¹Ÿæ–¹ä¾¿ã€‚</li></ol><p>auto_increment çš„ç¼ºç‚¹ï¼š</p><ol><li>ç”±äºæ˜¯è‡ªå¢ï¼Œå¾ˆå®¹æ˜“é€šè¿‡ç½‘ç»œçˆ¬è™«çŸ¥æ™“å½“å‰ç³»ç»Ÿçš„ä¸šåŠ¡é‡ã€‚</li><li>é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œç«äº‰è‡ªå¢é”ä¼šé™ä½æ•°æ®åº“çš„ååèƒ½åŠ›ã€‚</li><li>æ•°æ®è¿ç§»æˆ–åˆ†åº“åˆ†è¡¨åœºæ™¯ä¸‹ï¼Œè‡ªå¢æ–¹å¼ä¸å†é€‚ç”¨ã€‚</li></ol><p>UUID çš„ä¼˜ç‚¹ï¼š</p><ol><li>ä¸ä¼šå†²çªã€‚è¿›è¡Œæ•°æ®æ‹†åˆ†ã€åˆå¹¶å­˜å‚¨çš„æ—¶å€™ï¼Œèƒ½ä¿è¯ä¸»é”®å…¨å±€çš„å”¯ä¸€æ€§</li><li>å¯ä»¥åœ¨åº”ç”¨å±‚ç”Ÿæˆï¼Œæé«˜æ•°æ®åº“ååèƒ½åŠ›</li></ol><p>UUID çš„ç¼ºç‚¹ï¼š</p><ol><li>å½±å“æ’å…¥é€Ÿåº¦ï¼Œ å¹¶ä¸”é€ æˆç¡¬ç›˜ä½¿ç”¨ç‡ä½ã€‚ä¸è‡ªå¢ç›¸æ¯”ï¼Œæœ€å¤§çš„ç¼ºé™·å°±æ˜¯éšæœºioï¼Œä¸‹é¢æˆ‘ä»¬ä¼šå»å…·ä½“è§£é‡Š</li><li>å­—ç¬¦ä¸²ç±»å‹ç›¸æ¯”æ•´æ•°ç±»å‹è‚¯å®šæ›´æ¶ˆè€—ç©ºé—´ï¼Œè€Œä¸”ä¼šæ¯”æ•´æ•°ç±»å‹æ“ä½œæ…¢ã€‚</li></ol><p><strong>uuid å’Œè‡ªå¢ id çš„ç´¢å¼•ç»“æ„å¯¹æ¯”</strong></p><p>1ã€<strong>ä½¿ç”¨è‡ªå¢ id çš„å†…éƒ¨ç»“æ„</strong></p><p><img src="https://i0.hdslb.com/bfs/article/80f7b14a62b14ec777e62fe2f675d567645325325.png">â€‹</p><p>è‡ªå¢çš„ä¸»é”®çš„å€¼æ˜¯é¡ºåºçš„ï¼Œæ‰€ä»¥ InnoDB æŠŠæ¯ä¸€æ¡è®°å½•éƒ½å­˜å‚¨åœ¨ä¸€æ¡è®°å½•çš„åé¢ã€‚</p><ul><li>å½“è¾¾åˆ°é¡µé¢çš„æœ€å¤§å¡«å……å› å­æ—¶å€™ï¼ˆInnoDB é»˜è®¤çš„æœ€å¤§å¡«å……å› å­æ˜¯é¡µå¤§å°çš„ 15&#x2F;16ï¼Œä¼šç•™å‡º 1&#x2F;16 çš„ç©ºé—´ç•™ä½œä»¥åçš„ä¿®æ”¹ï¼‰ã€‚</li><li>ä¸‹ä¸€æ¡è®°å½•å°±ä¼šå†™å…¥æ–°çš„é¡µä¸­ï¼Œä¸€æ—¦æ•°æ®æŒ‰ç…§è¿™ç§é¡ºåºçš„æ–¹å¼åŠ è½½ï¼Œä¸»é”®é¡µå°±ä¼šè¿‘ä¹äºé¡ºåºçš„è®°å½•å¡«æ»¡ï¼Œæå‡äº†é¡µé¢çš„æœ€å¤§å¡«å……ç‡ï¼Œä¸ä¼šæœ‰é¡µçš„æµªè´¹ã€‚</li><li>æ–°æ’å…¥çš„è¡Œä¸€å®šä¼šåœ¨åŸæœ‰çš„æœ€å¤§æ•°æ®è¡Œä¸‹ä¸€è¡Œï¼ŒMySQL å®šä½å’Œå¯»å€å¾ˆå¿«ï¼Œä¸ä¼šä¸ºè®¡ç®—æ–°è¡Œçš„ä½ç½®è€Œåšå‡ºé¢å¤–çš„æ¶ˆè€—ã€‚å‡å°‘äº†é¡µåˆ†è£‚å’Œç¢ç‰‡çš„äº§ç”Ÿã€‚</li></ul><p>2ã€<strong>ä½¿ç”¨ uuid çš„ç´¢å¼•å†…éƒ¨ç»“æ„</strong></p><p>æ’å…¥UUIDï¼š æ–°çš„è®°å½•å¯èƒ½ä¼šæ’å…¥ä¹‹å‰è®°å½•çš„ä¸­é—´ï¼Œå› æ­¤éœ€è¦ç§»åŠ¨ä¹‹å‰çš„è®°å½•</p><p><img src="https://i0.hdslb.com/bfs/article/a6cb3c2e1b3c0daa7728b1a521c3c40b645325325.png">â€‹</p><p>è¢«å†™æ»¡å·²ç»åˆ·æ–°åˆ°ç£ç›˜ä¸Šçš„é¡µå¯èƒ½ä¼šè¢«é‡æ–°è¯»å–</p><p><img src="https://i0.hdslb.com/bfs/article/ad093cae974e6cd9e322ff0debce89df645325325.png">â€‹</p><p>å› ä¸º uuid ç›¸å¯¹é¡ºåºçš„è‡ªå¢ id æ¥è¯´æ˜¯æ¯«æ— è§„å¾‹å¯è¨€çš„ï¼Œæ–°è¡Œçš„å€¼ä¸ä¸€å®šè¦æ¯”ä¹‹å‰çš„ä¸»é”®çš„å€¼è¦å¤§ï¼Œæ‰€ä»¥ innodb æ— æ³•åšåˆ°æ€»æ˜¯æŠŠæ–°è¡Œæ’å…¥åˆ°ç´¢å¼•çš„æœ€åï¼Œè€Œæ˜¯éœ€è¦ä¸ºæ–°è¡Œå¯»æ‰¾æ–°çš„åˆé€‚çš„ä½ç½®ä»è€Œæ¥åˆ†é…æ–°çš„ç©ºé—´ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹éœ€è¦åšå¾ˆå¤šé¢å¤–çš„æ“ä½œï¼Œæ•°æ®çš„æ¯«æ— é¡ºåºä¼šå¯¼è‡´æ•°æ®åˆ†å¸ƒæ•£ä¹±ï¼Œå°†ä¼šå¯¼è‡´ä»¥ä¸‹çš„é—®é¢˜ï¼š</p><ol><li>å†™å…¥çš„ç›®æ ‡é¡µå¾ˆå¯èƒ½å·²ç»åˆ·æ–°åˆ°ç£ç›˜ä¸Šå¹¶ä¸”ä»ç¼“å­˜ä¸Šç§»é™¤ï¼Œæˆ–è€…è¿˜æ²¡æœ‰è¢«åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼Œinnodb åœ¨æ’å…¥ä¹‹å‰ä¸å¾—ä¸å…ˆæ‰¾åˆ°å¹¶ä»ç£ç›˜è¯»å–ç›®æ ‡é¡µåˆ°å†…å­˜ä¸­ï¼Œè¿™å°†å¯¼è‡´å¤§é‡çš„éšæœº IOã€‚</li><li>å› ä¸ºå†™å…¥æ˜¯ä¹±åºçš„ï¼Œinnodb ä¸å¾—ä¸é¢‘ç¹çš„åšé¡µåˆ†è£‚æ“ä½œï¼Œä»¥ä¾¿ä¸ºæ–°çš„è¡Œåˆ†é…ç©ºé—´ï¼Œé¡µåˆ†è£‚å¯¼è‡´ç§»åŠ¨å¤§é‡çš„æ•°æ®ï¼Œä¸€æ¬¡æ’å…¥æœ€å°‘éœ€è¦ä¿®æ”¹ä¸‰ä¸ªé¡µä»¥ä¸Šã€‚</li><li>ç”±äºé¢‘ç¹çš„é¡µåˆ†è£‚ï¼Œé¡µä¼šå˜å¾—ç¨€ç–å¹¶è¢«ä¸è§„åˆ™çš„å¡«å……ï¼Œæœ€ç»ˆä¼šå¯¼è‡´æ•°æ®ä¼šæœ‰ç¢ç‰‡ã€‚</li><li>åœ¨æŠŠéšæœºå€¼ï¼ˆuuid å’Œé›ªèŠ± idï¼‰è½½å…¥åˆ°èšç°‡ç´¢å¼•ï¼ˆInnoDB é»˜è®¤çš„ç´¢å¼•ç±»å‹ï¼‰ä»¥åï¼Œæœ‰æ—¶å€™ä¼šéœ€è¦åšä¸€æ¬¡ OPTIMEIZE TABLE æ¥é‡å»ºè¡¨å¹¶ä¼˜åŒ–é¡µçš„å¡«å……ï¼Œè¿™å°†åˆéœ€è¦ä¸€å®šçš„æ—¶é—´æ¶ˆè€—ã€‚</li></ol><p>ç»“è®ºï¼šä½¿ç”¨ InnoDB åº”è¯¥å°½å¯èƒ½çš„æŒ‰ä¸»é”®çš„è‡ªå¢é¡ºåºæ’å…¥ï¼Œå¹¶ä¸”å°½å¯èƒ½ä½¿ç”¨å•è°ƒçš„å¢åŠ çš„èšç°‡é”®çš„å€¼æ¥æ’å…¥æ–°è¡Œã€‚å¦‚æœæ˜¯åˆ†åº“åˆ†è¡¨åœºæ™¯ä¸‹ï¼Œåˆ†å¸ƒå¼ä¸»é”® ID çš„ç”Ÿæˆæ–¹æ¡ˆ ä¼˜å…ˆé€‰æ‹©é›ªèŠ±ç®—æ³•ç”Ÿæˆå…¨å±€å”¯ä¸€ä¸»é”®ï¼ˆé›ªèŠ±ç®—æ³•ç”Ÿæˆçš„ä¸»é”®åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯æœ‰åºçš„ï¼‰ã€‚</p><h3 id="43ã€B-æ ‘å’Œ-B-æ ‘çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#43ã€B-æ ‘å’Œ-B-æ ‘çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="43ã€B æ ‘å’Œ B+ æ ‘çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>43ã€B æ ‘å’Œ B+ æ ‘çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>1ï¼‰B-Tree ä»‹ç»</strong></p><p>B-Tree æ˜¯ä¸€ç§å¹³è¡¡çš„å¤šè·¯æŸ¥æ‰¾æ ‘ï¼ŒB æ ‘å…è®¸ä¸€ä¸ªèŠ‚ç‚¹å­˜æ”¾å¤šä¸ªæ•°æ®ã€‚è¿™æ ·å¯ä»¥åœ¨å°½å¯èƒ½å‡å°‘æ ‘çš„æ·±åº¦çš„åŒæ—¶ï¼Œå­˜æ”¾æ›´å¤šçš„æ•°æ®(æŠŠç˜¦é«˜çš„æ ‘å˜çš„çŸ®èƒ–).</p><p>B-Tree ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å­æ ‘ä¸ªæ•°çš„æœ€å¤§å€¼ç§°ä¸º B-Tree çš„é˜¶ï¼Œç”¨ m è¡¨ç¤ºã€‚ä¸€é¢— m é˜¶çš„ B æ ‘ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œå°±å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ã€‚</p><p>m é˜¶çš„ B-Tree æ»¡è¶³ä»¥ä¸‹æ¡ä»¶:</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæ‹¥æœ‰ m-1 ä¸ªå…³é”®å­—(æ ¹èŠ‚ç‚¹é™¤å¤–)ï¼Œä¹Ÿå°±æ˜¯ m ä¸ªå­æ ‘</li><li>æ ¹èŠ‚ç‚¹è‡³å°‘æœ‰ä¸¤ä¸ªå­æ ‘(å¯ä»¥æ²¡æœ‰å­æ ‘,æœ‰å°±å¿…é¡»æ˜¯ä¸¤ä¸ª)</li><li>åˆ†æ”¯èŠ‚ç‚¹è‡³å°‘æœ‰ï¼ˆm&#x2F;2ï¼‰é¢—å­æ ‘ (é™¤å»æ ¹èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹å…¶ä»–éƒ½æ˜¯åˆ†æ”¯èŠ‚ç‚¹)</li><li>æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚,å¹¶ä¸”ä»¥å‡åºæ’åº</li></ol><p><img src="https://i0.hdslb.com/bfs/article/4cd1cd61b4c21b68170fee958dfccb6a645325325.png">â€‹</p><p><strong>ä»€ä¹ˆæ˜¯ B-Tree çš„é˜¶ ?</strong><br>æ‰€æœ‰èŠ‚ç‚¹ä¸­ï¼ŒèŠ‚ç‚¹ã€60,70,90ã€‘æ‹¥æœ‰çš„å­èŠ‚ç‚¹æ•°ç›®æœ€å¤šï¼Œå››ä¸ªå­èŠ‚ç‚¹ï¼ˆç°è‰²èŠ‚ç‚¹ï¼‰ï¼Œæ‰€ä»¥ä¸Šé¢çš„ B-Tree ä¸º 4 é˜¶ B æ ‘ã€‚</p><p><strong>B-Tree ç»“æ„å­˜å‚¨ç´¢å¼•çš„ç‰¹ç‚¹</strong></p><p>ä¸ºäº†æè¿° B-Tree é¦–å…ˆå®šä¹‰ä¸€æ¡è®°å½•ä¸ºä¸€ä¸ªé”®å€¼å¯¹[key, data] ï¼Œkey ä¸ºè®°å½•çš„é”®å€¼ï¼Œå¯¹åº”è¡¨ä¸­çš„ä¸»é”®å€¼(èšç°‡ç´¢å¼•)ï¼Œdata ä¸ºä¸€è¡Œè®°å½•ä¸­é™¤ä¸»é”®å¤–çš„æ•°æ®ã€‚å¯¹äºä¸åŒçš„è®°å½•ï¼Œkeyå€¼äº’ä¸ç›¸åŒ</p><ul><li>ç´¢å¼•å€¼å’Œ data æ•°æ®åˆ†å¸ƒåœ¨æ•´æ£µæ ‘ç»“æ„ä¸­</li><li>ç™½è‰²å—éƒ¨åˆ†æ˜¯æŒ‡é’ˆï¼Œå­˜å‚¨ç€å­èŠ‚ç‚¹çš„åœ°å€ä¿¡æ¯ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜æ”¾å¤šä¸ªç´¢å¼•å€¼åŠå¯¹åº”çš„ data æ•°æ®</li><li>æ ‘èŠ‚ç‚¹ä¸­çš„å¤šä¸ªç´¢å¼•å€¼ä»å·¦åˆ°å³å‡åºæ’åˆ—</li></ul><p><img src="https://i0.hdslb.com/bfs/article/e0cf8ccb248023495b189db9e4eb1b29645325325.png">â€‹</p><p><strong>B-Tree çš„æŸ¥æ‰¾æ“ä½œ</strong></p><p>B-Tree çš„æ¯ä¸ªèŠ‚ç‚¹çš„å…ƒç´ å¯ä»¥è§†ä¸ºä¸€æ¬¡ I&#x2F;O è¯»å–ï¼Œæ ‘çš„é«˜åº¦è¡¨ç¤ºæœ€å¤šçš„ I&#x2F;O æ¬¡æ•°ï¼Œåœ¨ç›¸åŒæ•°é‡çš„æ€»å…ƒç´ ä¸ªæ•°ä¸‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å…ƒç´ ä¸ªæ•°è¶Šå¤šï¼Œé«˜åº¦è¶Šä½ï¼ŒæŸ¥è¯¢æ‰€éœ€çš„ I&#x2F;O æ¬¡æ•°è¶Šå°‘.</p><p><strong>B-Tree æ€»ç»“</strong></p><ul><li>ä¼˜ç‚¹: B æ ‘å¯ä»¥åœ¨å†…éƒ¨èŠ‚ç‚¹å­˜å‚¨é”®å€¼å’Œç›¸å…³è®°å½•æ•°æ®ï¼Œå› æ­¤æŠŠé¢‘ç¹è®¿é—®çš„æ•°æ®æ”¾åœ¨é è¿‘æ ¹èŠ‚ç‚¹çš„ä½ç½®å°†å¤§å¤§æé«˜çƒ­ç‚¹æ•°æ®çš„æŸ¥è¯¢æ•ˆç‡ã€‚</li><li>ç¼ºç‚¹: B æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸ä»…åŒ…å«æ•°æ®çš„ key å€¼ï¼Œè¿˜æœ‰ data æ•°æ®.ã€‚æ‰€ä»¥å½“ data æ•°æ®è¾ƒå¤§æ—¶ï¼Œä¼šå¯¼è‡´æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„ key å€¼å‡å°‘ï¼Œå¹¶ä¸”å¯¼è‡´ B æ ‘çš„å±‚æ•°å˜é«˜ã€‚å¢åŠ æŸ¥è¯¢æ—¶çš„ IO æ¬¡æ•°ã€‚</li><li>ä½¿ç”¨åœºæ™¯: B æ ‘ä¸»è¦åº”ç”¨äºæ–‡ä»¶ç³»ç»Ÿä»¥åŠéƒ¨åˆ†æ•°æ®åº“ç´¢å¼•ï¼Œå¦‚ MongoDBï¼Œå¤§éƒ¨åˆ†å…³ç³»å‹æ•°æ®åº“ç´¢å¼•åˆ™æ˜¯ä½¿ç”¨ B+ æ ‘å®ç°</li></ul><p><strong>2ï¼‰B+Tree</strong></p><p>B+Tree æ˜¯åœ¨ B-Tree åŸºç¡€ä¸Šçš„ä¸€ç§ä¼˜åŒ–ï¼Œä½¿å…¶æ›´é€‚åˆå®ç°å­˜å‚¨ç´¢å¼•ç»“æ„ï¼ŒInnoDB å­˜å‚¨å¼•æ“å°±æ˜¯ç”¨ B+Tree å®ç°å…¶ç´¢å¼•ç»“æ„ã€‚</p><p><strong>B+Tree çš„ç‰¹å¾</strong></p><ul><li>éå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼ä¿¡æ¯.</li><li>æ‰€æœ‰å¶å­èŠ‚ç‚¹ä¹‹é—´éƒ½æœ‰ä¸€ä¸ªé“¾æŒ‡é’ˆ.</li><li>æ•°æ®è®°å½•éƒ½å­˜æ”¾åœ¨å¶å­èŠ‚ç‚¹ä¸­.</li></ul><p><img src="https://i0.hdslb.com/bfs/article/74b5236f1e971da3533c92b02b73532a645325325.png">â€‹</p><p><strong>B+Tree çš„ä¼˜åŠ¿</strong></p><ol><li>B+Tree æ˜¯ B Tree çš„å˜ç§ï¼ŒB Tree èƒ½è§£å†³çš„é—®é¢˜ï¼ŒB+Tree ä¹Ÿèƒ½å¤Ÿè§£å†³ï¼ˆé™ä½æ ‘çš„é«˜åº¦ï¼Œå¢å¤§èŠ‚ç‚¹å­˜å‚¨æ•°æ®é‡ï¼‰</li><li>B+Tree æ‰«åº“å’Œæ‰«è¡¨èƒ½åŠ›æ›´å¼ºï¼Œå¦‚æœæˆ‘ä»¬è¦æ ¹æ®ç´¢å¼•å»è¿›è¡Œæ•°æ®è¡¨çš„æ‰«æï¼Œå¯¹ B Tree è¿›è¡Œæ‰«æï¼Œéœ€è¦æŠŠæ•´æ£µæ ‘éå†ä¸€éï¼Œè€Œ B+Treeåªéœ€è¦éå†ä»–çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹å³å¯ï¼ˆå¶å­èŠ‚ç‚¹ä¹‹é—´æœ‰å¼•ç”¨ï¼‰ã€‚</li><li>B+Tree ç£ç›˜è¯»å†™èƒ½åŠ›æ›´å¼ºï¼Œä»–çš„æ ¹èŠ‚ç‚¹å’Œæ”¯èŠ‚ç‚¹ä¸ä¿å­˜æ•°æ®åŒºï¼Œæ‰€æœ‰æ ¹èŠ‚ç‚¹å’Œæ”¯èŠ‚ç‚¹åŒæ ·å¤§å°çš„æƒ…å†µä¸‹ï¼Œä¿å­˜çš„å…³é”®å­—è¦æ¯” B Treeè¦å¤šã€‚è€Œå¶å­èŠ‚ç‚¹ä¸ä¿å­˜å­èŠ‚ç‚¹å¼•ç”¨ã€‚æ‰€ä»¥ï¼ŒB+Tree è¯»å†™ä¸€æ¬¡ç£ç›˜åŠ è½½çš„å…³é”®å­—æ¯” B Tree æ›´å¤šã€‚</li><li>B+Tree æ’åºèƒ½åŠ›æ›´å¼ºï¼Œå¦‚ä¸Šé¢çš„å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒB+Tree å¤©ç„¶å…·æœ‰æ’åºåŠŸèƒ½ã€‚</li><li>B+Tree æŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®šï¼Œæ¯æ¬¡æŸ¥è¯¢æ•°æ®ï¼ŒæŸ¥è¯¢ IO æ¬¡æ•°ä¸€å®šæ˜¯ç¨³å®šçš„ã€‚å½“ç„¶è¿™ä¸ªæ¯ä¸ªäººçš„ç†è§£éƒ½ä¸åŒï¼Œå› ä¸ºåœ¨ B Tree å¦‚æœæ ¹èŠ‚ç‚¹å‘½ä¸­ç›´æ¥è¿”å›ï¼Œç¡®å®æ•ˆç‡æ›´é«˜ã€‚</li></ol><h3 id="44ã€ä¸€ä¸ª-B-æ ‘ä¸­å¤§æ¦‚èƒ½å­˜æ”¾å¤šå°‘æ¡ç´¢å¼•è®°å½•ï¼Ÿ"><a href="#44ã€ä¸€ä¸ª-B-æ ‘ä¸­å¤§æ¦‚èƒ½å­˜æ”¾å¤šå°‘æ¡ç´¢å¼•è®°å½•ï¼Ÿ" class="headerlink" title="44ã€ä¸€ä¸ª B+ æ ‘ä¸­å¤§æ¦‚èƒ½å­˜æ”¾å¤šå°‘æ¡ç´¢å¼•è®°å½•ï¼Ÿ"></a>44ã€ä¸€ä¸ª B+ æ ‘ä¸­å¤§æ¦‚èƒ½å­˜æ”¾å¤šå°‘æ¡ç´¢å¼•è®°å½•ï¼Ÿ</h3><p>MySQL è®¾è®¡è€…å°†ä¸€ä¸ª B+Tree çš„èŠ‚ç‚¹çš„å¤§å°è®¾ç½®ä¸ºç­‰äºä¸€ä¸ªé¡µ. (è¿™æ ·åšçš„ç›®çš„æ˜¯æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡ I&#x2F;O å°±å¯ä»¥å®Œå…¨è½½å…¥)ï¼Œ InnoDB çš„ä¸€ä¸ªé¡µçš„å¤§å°æ˜¯ 16 KBï¼Œæ‰€ä»¥æ¯ä¸ªèŠ‚ç‚¹çš„å¤§å°ä¹Ÿæ˜¯ 16KB, å¹¶ä¸” B+Tree çš„æ ¹èŠ‚ç‚¹æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œå­èŠ‚ç‚¹æ‰æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/fad212e7828ee334c839f5b0697f3155645325325.png">â€‹</p><p><strong>å‡è®¾ä¸€ä¸ª B+ æ ‘é«˜ä¸º 2ï¼Œå³å­˜åœ¨ä¸€ä¸ªæ ¹èŠ‚ç‚¹å’Œè‹¥å¹²ä¸ªå¶å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™æ£µ B+ æ ‘çš„å­˜æ”¾æ€»è®°å½•æ•°ä¸ºï¼š</strong></p><p><strong>æ ¹èŠ‚ç‚¹æŒ‡é’ˆæ•° å•ä¸ªå¶å­èŠ‚ç‚¹è®°å½•è¡Œæ•°.</strong></p><ul><li><strong>è®¡ç®—æ ¹èŠ‚ç‚¹æŒ‡é’ˆæ•°</strong>: å‡è®¾è¡¨çš„ä¸»é”®ä¸º INT ç±»å‹,å ç”¨çš„å°±æ˜¯ 4 ä¸ªå­—èŠ‚,æˆ–è€…æ˜¯ BIGINT å ç”¨ 8 ä¸ªå­—èŠ‚, æŒ‡é’ˆå¤§å°ä¸º 6 ä¸ªå­—èŠ‚,é‚£ä¹ˆä¸€ä¸ªé¡µ(å°±æ˜¯ B+Tree ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹) ,å¤§æ¦‚å¯ä»¥å­˜å‚¨: 16384B &#x2F; (4B+6B) &#x3D; 1638 ,ä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šå¯ä»¥å­˜å‚¨ 1638  ä¸ªç´¢å¼•æŒ‡é’ˆ.</li><li><strong>è®¡ç®—æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„è®°å½•æ•°</strong>:æˆ‘ä»¬å‡è®¾ä¸€è¡Œè®°å½•çš„æ•°æ®å¤§å°ä¸º1k,é‚£ä¹ˆä¸€é¡µå°±å¯ä»¥å­˜å‚¨16è¡Œæ•°æ®,16KB &#x2F; 1KB &#x3D; 16.</li><li><strong>ä¸€é¢—é«˜åº¦ä¸º 2 çš„ B+Tree å¯ä»¥å­˜æ”¾çš„è®°å½•æ•°ä¸º</strong>: 1638 * 16&#x3D;26208 æ¡æ•°æ®è®°å½•, åŒæ ·çš„åŸç†å¯ä»¥æ¨ç®—å‡ºä¸€ä¸ªé«˜åº¦ 3 çš„ B+Tree å¯ä»¥å­˜æ”¾: 1638 * 1638 * 16 &#x3D; 42928704 æ¡è¿™æ ·çš„è®°å½•.</li></ul><p><strong>æ‰€ä»¥ InnoDB ä¸­çš„ B+Tree é«˜åº¦ä¸€èˆ¬ä¸º 1-3 å±‚,å°±å¯ä»¥æ»¡è¶³åƒä¸‡çº§åˆ«çš„æ•°æ®å­˜å‚¨</strong>,åœ¨æŸ¥æ‰¾æ•°æ®æ—¶ä¸€æ¬¡é¡µçš„æŸ¥æ‰¾ä»£è¡¨ä¸€æ¬¡ IOï¼Œæ‰€ä»¥é€šè¿‡ä¸»é”®ç´¢å¼•æŸ¥è¯¢é€šå¸¸åªéœ€è¦ 1-3 æ¬¡ IO æ“ä½œå³å¯æŸ¥æ‰¾åˆ°æ•°æ®ã€‚</p><h3 id="45ã€explain-ç”¨è¿‡å—ï¼Œæœ‰å“ªäº›ä¸»è¦å­—æ®µï¼Ÿ"><a href="#45ã€explain-ç”¨è¿‡å—ï¼Œæœ‰å“ªäº›ä¸»è¦å­—æ®µï¼Ÿ" class="headerlink" title="45ã€explain ç”¨è¿‡å—ï¼Œæœ‰å“ªäº›ä¸»è¦å­—æ®µï¼Ÿ"></a>45ã€explain ç”¨è¿‡å—ï¼Œæœ‰å“ªäº›ä¸»è¦å­—æ®µï¼Ÿ</h3><p>ä½¿ç”¨ <code>EXPLAIN</code>â€‹ å…³é”®å­—å¯ä»¥æ¨¡æ‹Ÿä¼˜åŒ–å™¨æ¥æ‰§è¡ŒSQLæŸ¥è¯¢è¯­å¥ï¼Œä»è€ŒçŸ¥é“ MySQL æ˜¯å¦‚ä½•å¤„ç†æˆ‘ä»¬çš„ SQL è¯­å¥çš„ã€‚åˆ†æå‡ºæŸ¥è¯¢è¯­å¥æˆ–æ˜¯è¡¨ç»“æ„çš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p><strong>MySQL æŸ¥è¯¢è¿‡ç¨‹</strong></p><p><img src="https://i0.hdslb.com/bfs/article/b433343b25366b570f7a7a707ef869f2645325325.png">â€‹</p><p><strong>é€šè¿‡ explain æˆ‘ä»¬å¯ä»¥è·å¾—ä»¥ä¸‹ä¿¡æ¯ï¼š</strong></p><ul><li><strong>è¡¨çš„è¯»å–é¡ºåº</strong></li><li><strong>æ•°æ®è¯»å–æ“ä½œçš„æ“ä½œç±»å‹</strong></li><li><strong>å“ªäº›ç´¢å¼•å¯ä»¥è¢«ä½¿ç”¨</strong></li><li><strong>å“ªäº›ç´¢å¼•çœŸæ­£è¢«ä½¿ç”¨</strong></li><li><strong>è¡¨çš„ç›´æ¥å¼•ç”¨</strong></li><li><strong>æ¯å¼ è¡¨çš„æœ‰å¤šå°‘è¡Œè¢«ä¼˜åŒ–å™¨æŸ¥è¯¢äº†</strong></li></ul><p>Explainä½¿ç”¨æ–¹å¼: <strong>explain+sql è¯­å¥</strong>, é€šè¿‡æ‰§è¡Œ explain å¯ä»¥è·å¾— sql è¯­å¥æ‰§è¡Œçš„ç›¸å…³ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from users;</span><br></pre></td></tr></table></figure><h3 id="46ã€type-å­—æ®µä¸­æœ‰å“ªäº›å¸¸è§çš„å€¼ï¼Ÿ"><a href="#46ã€type-å­—æ®µä¸­æœ‰å“ªäº›å¸¸è§çš„å€¼ï¼Ÿ" class="headerlink" title="46ã€type å­—æ®µä¸­æœ‰å“ªäº›å¸¸è§çš„å€¼ï¼Ÿ"></a>46ã€type å­—æ®µä¸­æœ‰å“ªäº›å¸¸è§çš„å€¼ï¼Ÿ</h3><p><strong>type å­—æ®µåœ¨ MySQL å®˜ç½‘æ–‡æ¡£æè¿°å¦‚ä¸‹ï¼š</strong></p><blockquote><p><strong>The join type. For descriptions of the different types.</strong></p></blockquote><p><strong>type å­—æ®µæ˜¾ç¤ºçš„æ˜¯è¿æ¥ç±»å‹ ( join type è¡¨ç¤ºçš„æ˜¯ç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼æ¥è·å–æ•°æ®)ï¼Œå®ƒæè¿°äº†æ‰¾åˆ°æ‰€éœ€æ•°æ®æ‰€ä½¿ç”¨çš„æ‰«ææ–¹å¼, æ˜¯è¾ƒä¸ºé‡è¦çš„ä¸€ä¸ªæŒ‡æ ‡ã€‚</strong></p><p><strong>ä¸‹é¢ç»™å‡ºå„ç§è¿æ¥ç±»å‹,æŒ‰ç…§ä»æœ€ä½³ç±»å‹åˆ°æœ€åç±»å‹è¿›è¡Œæ’åº:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- å®Œæ•´çš„è¿æ¥ç±»å‹æ¯”è¾ƒå¤š</span><br><span class="line">system &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL</span><br><span class="line"></span><br><span class="line">-- ç®€åŒ–ä¹‹å,æˆ‘ä»¬å¯ä»¥åªå…³æ³¨ä¸€ä¸‹å‡ ç§</span><br><span class="line">system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL</span><br></pre></td></tr></table></figure><blockquote><p><strong>ä¸€èˆ¬æ¥è¯´,éœ€è¦ä¿è¯æŸ¥è¯¢è‡³å°‘è¾¾åˆ° range çº§åˆ«,æœ€å¥½èƒ½åˆ° ref,å¦åˆ™å°±è¦å°±è¡Œ SQL çš„ä¼˜åŒ–è°ƒæ•´</strong></p></blockquote><p>ä¸‹é¢ä»‹ç» type å­—æ®µä¸åŒå€¼è¡¨ç¤ºçš„å«ä¹‰:</p><table><thead><tr><th><strong>typeç±» å‹</strong></th><th><strong>è§£é‡Š</strong></th></tr></thead><tbody><tr><td><strong>system</strong></td><td><strong>ä¸è¿›è¡Œç£ç›˜ IO,æŸ¥è¯¢ç³»ç»Ÿè¡¨,ä»…ä»…è¿”å›ä¸€æ¡æ•°æ®</strong></td></tr><tr><td><strong>const</strong></td><td><strong>æŸ¥æ‰¾ä¸»é”®ç´¢å¼•,æœ€å¤šè¿”å›1æ¡æˆ–0æ¡æ•°æ®. å±äºç²¾ç¡®æŸ¥æ‰¾</strong></td></tr><tr><td><strong>eq_ref</strong></td><td><strong>æŸ¥æ‰¾å”¯ä¸€æ€§ç´¢å¼•,è¿”å›æ•°æ®æœ€å¤šä¸€æ¡, å±äºç²¾ç¡®æŸ¥æ‰¾</strong></td></tr><tr><td><strong>ref</strong></td><td><strong>æŸ¥æ‰¾éå”¯ä¸€æ€§ç´¢å¼•,è¿”å›åŒ¹é…æŸä¸€æ¡ä»¶çš„å¤šæ¡æ•°æ®,å±äºç²¾ç¡®æŸ¥æ‰¾,æ•°æ®è¿”å›å¯èƒ½æ˜¯å¤šæ¡.</strong></td></tr><tr><td><strong>range</strong></td><td><strong>æŸ¥æ‰¾æŸä¸ªç´¢å¼•çš„éƒ¨åˆ†ç´¢å¼•,åªæ£€ç´¢ç»™å®šèŒƒå›´çš„è¡Œ,å±äºèŒƒå›´æŸ¥æ‰¾. æ¯”å¦‚: &gt; ã€ &lt; ã€in ã€between</strong></td></tr><tr><td><strong>index</strong></td><td><strong>æŸ¥æ‰¾æ‰€æœ‰ç´¢å¼•æ ‘,æ¯”ALLå¿«ä¸€äº›,å› ä¸ºç´¢å¼•æ–‡ä»¶è¦æ¯”æ•°æ®æ–‡ä»¶å°.</strong></td></tr><tr><td><strong>ALL</strong></td><td><strong>ä¸ä½¿ç”¨ä»»ä½•ç´¢å¼•,ç›´æ¥è¿›è¡Œå…¨è¡¨æ‰«æ</strong></td></tr><tr><td></td><td></td></tr></tbody></table><h3 id="47ã€Extra-æœ‰å“ªäº›ä¸»è¦æŒ‡æ ‡ï¼Œå„è‡ªçš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#47ã€Extra-æœ‰å“ªäº›ä¸»è¦æŒ‡æ ‡ï¼Œå„è‡ªçš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="47ã€Extra æœ‰å“ªäº›ä¸»è¦æŒ‡æ ‡ï¼Œå„è‡ªçš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>47ã€Extra æœ‰å“ªäº›ä¸»è¦æŒ‡æ ‡ï¼Œå„è‡ªçš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Extra æ˜¯ EXPLAIN è¾“å‡ºä¸­å¦å¤–ä¸€ä¸ªå¾ˆé‡è¦çš„åˆ—ï¼Œè¯¥åˆ—æ˜¾ç¤º MySQL åœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­çš„ä¸€äº›è¯¦ç»†ä¿¡æ¯</p><table><thead><tr><th><strong>extraç±»å‹</strong></th><th><strong>è§£é‡Š</strong></th></tr></thead><tbody><tr><td><strong>Using filesort</strong></td><td><strong>MySQLä¸­æ— æ³•åˆ©ç”¨ç´¢å¼•å®Œæˆçš„æ’åºæ“ä½œç§°ä¸º  â€œæ–‡ä»¶æ’åºâ€</strong></td></tr><tr><td><strong>Using index</strong></td><td><strong>è¡¨ç¤ºç›´æ¥è®¿é—®ç´¢å¼•å°±èƒ½å¤Ÿè·å–åˆ°æ‰€éœ€è¦çš„æ•°æ®ï¼ˆè¦†ç›–ç´¢å¼•ï¼‰ï¼Œä¸éœ€è¦é€šè¿‡ç´¢å¼•å›è¡¨</strong></td></tr><tr><td><strong>Using index condition</strong></td><td><strong>æœç´¢æ¡ä»¶ä¸­è™½ç„¶å‡ºç°äº†ç´¢å¼•åˆ—ï¼Œä½†æ˜¯æœ‰éƒ¨åˆ†æ¡ä»¶æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼Œ</strong>  <strong>ä¼šæ ¹æ®èƒ½ç”¨ç´¢å¼•çš„æ¡ä»¶å…ˆæœç´¢ä¸€éå†åŒ¹é…æ— æ³•ä½¿ç”¨ç´¢å¼•çš„æ¡ä»¶ã€‚</strong></td></tr><tr><td><strong>Using join buffer</strong></td><td><strong>ä½¿ç”¨äº†è¿æ¥ç¼“å­˜, ä¼šæ˜¾ç¤ºjoinè¿æ¥æŸ¥è¯¢æ—¶,MySQLé€‰æ‹©çš„æŸ¥è¯¢ç®—æ³•</strong></td></tr><tr><td><strong>Using temporary</strong></td><td><strong>è¡¨ç¤ºMySQLéœ€è¦ä½¿ç”¨ä¸´æ—¶è¡¨æ¥å­˜å‚¨ç»“æœé›†ï¼Œå¸¸è§äºæ’åºå’Œåˆ†ç»„æŸ¥è¯¢</strong></td></tr><tr><td><strong>Using where</strong></td><td><strong>æ„å‘³ç€å…¨è¡¨æ‰«ææˆ–è€…åœ¨æŸ¥æ‰¾ä½¿ç”¨ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œä½†æ˜¯è¿˜æœ‰æŸ¥è¯¢æ¡ä»¶ä¸åœ¨ç´¢å¼•å­—æ®µå½“ä¸­</strong></td></tr></tbody></table><h3 id="48ã€å¦‚ä½•è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–ï¼Ÿ"><a href="#48ã€å¦‚ä½•è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="48ã€å¦‚ä½•è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–ï¼Ÿ"></a>48ã€å¦‚ä½•è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–ï¼Ÿ</h3><ul><li><p>ä¸€èˆ¬æ€§åˆ†é¡µ</p><p>ä¸€èˆ¬çš„åˆ†é¡µæŸ¥è¯¢ä½¿ç”¨ç®€å•çš„ limit å­å¥å°±å¯ä»¥å®ç°ã€‚limitæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM è¡¨å LIMIT [offset,] rows</span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šç¬¬ä¸€ä¸ªè¿”å›è®°å½•è¡Œçš„åç§»é‡ï¼Œæ³¨æ„ä»0å¼€å§‹ï¼›</li><li>ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šè¿”å›è®°å½•è¡Œçš„æœ€å¤§æ•°ç›®ï¼›</li><li>å¦‚æœåªç»™å®šä¸€ä¸ªå‚æ•°ï¼Œå®ƒè¡¨ç¤ºè¿”å›æœ€å¤§çš„è®°å½•è¡Œæ•°ç›®ï¼›</li></ul><p><strong>æ€è€ƒ1ï¼šå¦‚æœåç§»é‡å›ºå®šï¼Œè¿”å›è®°å½•é‡å¯¹æ‰§è¡Œæ—¶é—´æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from user limit 10000,1;</span><br><span class="line">select * from user limit 10000,10;</span><br><span class="line">select * from user limit 10000,100;</span><br><span class="line">select * from user limit 10000,1000;</span><br><span class="line">select * from user limit 10000,10000;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šåœ¨æŸ¥è¯¢è®°å½•æ—¶ï¼Œè¿”å›è®°å½•é‡ä½äº100æ¡ï¼ŒæŸ¥è¯¢æ—¶é—´åŸºæœ¬æ²¡æœ‰å˜åŒ–ï¼Œå·®è·ä¸å¤§ã€‚éšç€æŸ¥è¯¢è®°å½•é‡è¶Šå¤§ï¼Œæ‰€èŠ±è´¹çš„æ—¶é—´ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚</p><p><strong>æ€è€ƒ2ï¼šå¦‚æœæŸ¥è¯¢åç§»é‡å˜åŒ–ï¼Œè¿”å›è®°å½•æ•°å›ºå®šå¯¹æ‰§è¡Œæ—¶é—´æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from user limit 1,100;</span><br><span class="line">select * from user limit 10,100;</span><br><span class="line">select * from user limit 100,100;</span><br><span class="line">select * from user limit 1000,100;</span><br><span class="line">select * from user limit 10000,100;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šåœ¨æŸ¥è¯¢è®°å½•æ—¶ï¼Œå¦‚æœæŸ¥è¯¢è®°å½•é‡ç›¸åŒï¼Œåç§»é‡è¶…è¿‡100åå°±å¼€å§‹éšç€åç§»é‡å¢å¤§ï¼ŒæŸ¥è¯¢æ—¶é—´æ€¥å‰§çš„å¢åŠ ã€‚ï¼ˆè¿™ç§åˆ†é¡µæŸ¥è¯¢æœºåˆ¶ï¼Œæ¯æ¬¡éƒ½ä¼šä»æ•°æ®åº“ç¬¬ä¸€æ¡è®°å½•å¼€å§‹æ‰«æï¼Œè¶Šå¾€åæŸ¥è¯¢è¶Šæ…¢ï¼Œè€Œä¸”æŸ¥è¯¢çš„æ•°æ®è¶Šå¤šï¼Œä¹Ÿä¼šæ‹–æ…¢æ€»æŸ¥è¯¢é€Ÿåº¦ã€‚ï¼‰</p></li><li><p>åˆ†é¡µä¼˜åŒ–æ–¹æ¡ˆ</p><p><strong>ä¼˜åŒ–1: é€šè¿‡ç´¢å¼•è¿›è¡Œåˆ†é¡µ</strong></p><p>ç›´æ¥è¿›è¡Œ limit æ“ä½œ ä¼šäº§ç”Ÿå…¨è¡¨æ‰«æï¼Œé€Ÿåº¦å¾ˆæ…¢. Limit é™åˆ¶çš„æ˜¯ä»ç»“æœé›†çš„ M ä½ç½®å¤„å–å‡º N æ¡è¾“å‡ºï¼Œå…¶ä½™æŠ›å¼ƒ.</p><p>å‡è®¾ ID æ˜¯è¿ç»­é€’å¢çš„ï¼Œæˆ‘ä»¬æ ¹æ®æŸ¥è¯¢çš„é¡µæ•°å’ŒæŸ¥è¯¢çš„è®°å½•æ•°å¯ä»¥ç®—å‡ºæŸ¥è¯¢çš„ id çš„èŒƒå›´ï¼Œç„¶åé…åˆ limit ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM user WHERE id  &gt;= 100001 LIMIT 100;</span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–2ï¼šåˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- é¦–å…ˆå®šä½åç§»ä½ç½®çš„id</span><br><span class="line">SELECT id FROM user_contacts LIMIT 100000,1;</span><br><span class="line"></span><br><span class="line">-- æ ¹æ®è·å–åˆ°çš„idå€¼å‘åæŸ¥è¯¢.</span><br><span class="line">EXPLAIN SELECT * FROM user_contacts WHERE id &gt;=</span><br><span class="line">(SELECT id FROM user_contacts LIMIT 100000,1) LIMIT 100;</span><br></pre></td></tr></table></figure><p>åŸå› ï¼šä½¿ç”¨äº† id åšä¸»é”®æ¯”è¾ƒ (id&gt;&#x3D;)ï¼Œå¹¶ä¸”å­æŸ¥è¯¢ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•è¿›è¡Œä¼˜åŒ–ã€‚</p></li></ul><h3 id="49ã€å¦‚ä½•åšæ…¢æŸ¥è¯¢ä¼˜åŒ–ï¼Ÿ"><a href="#49ã€å¦‚ä½•åšæ…¢æŸ¥è¯¢ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="49ã€å¦‚ä½•åšæ…¢æŸ¥è¯¢ä¼˜åŒ–ï¼Ÿ"></a>49ã€å¦‚ä½•åšæ…¢æŸ¥è¯¢ä¼˜åŒ–ï¼Ÿ</h3><p><strong>MySQL æ…¢æŸ¥è¯¢çš„ç›¸å…³å‚æ•°è§£é‡Šï¼š</strong></p><ul><li><strong>slow_query_log</strong>ï¼šæ˜¯å¦å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œ<code>ON(1)</code>â€‹è¡¨ç¤ºå¼€å¯,<br>â€‹<code>OFF(0)</code>â€‹ è¡¨ç¤ºå…³é—­ã€‚</li><li><strong>slow-query-log-file</strong>ï¼šæ–°ç‰ˆï¼ˆ5.6 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰MySQL æ•°æ®åº“æ…¢æŸ¥è¯¢æ—¥å¿—å­˜å‚¨è·¯å¾„ã€‚</li><li><strong>long_query_time</strong>ï¼š æ…¢æŸ¥è¯¢ <strong>é˜ˆå€¼</strong>ï¼Œå½“æŸ¥è¯¢æ—¶é—´å¤šäºè®¾å®šçš„é˜ˆå€¼æ—¶ï¼Œè®°å½•æ—¥å¿—ã€‚</li></ul><p><strong>æ…¢æŸ¥è¯¢é…ç½®æ–¹å¼</strong></p><ol><li><strong>é»˜è®¤æƒ…å†µä¸‹ slow_query_log çš„å€¼ä¸º OFFï¼Œè¡¨ç¤ºæ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯ç¦ç”¨çš„</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;%slow_query_log%&#x27;;</span><br><span class="line">+---------------------+------------------------------+</span><br><span class="line">| Variable_name       | Value                        |</span><br><span class="line">+---------------------+------------------------------+</span><br><span class="line">| slow_query_log      | ON                           |</span><br><span class="line">| slow_query_log_file | /var/lib/mysql/test-slow.log |</span><br><span class="line">+---------------------+------------------------------+</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>å¯ä»¥é€šè¿‡è®¾ç½® slow_query_log çš„å€¼æ¥å¼€å¯</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global slow_query_log=1;</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>ä½¿ç”¨</strong> <code>set global slow_query_log=1</code>â€‹  å¼€å¯äº†æ…¢æŸ¥è¯¢æ—¥å¿—åªå¯¹å½“å‰æ•°æ®åº“ç”Ÿæ•ˆï¼ŒMySQL é‡å¯ååˆ™ä¼šå¤±æ•ˆã€‚å¦‚æœè¦æ°¸ä¹…ç”Ÿæ•ˆï¼Œå°±å¿…é¡»ä¿®æ”¹é…ç½®æ–‡ä»¶ my.cnfï¼ˆå…¶å®ƒç³»ç»Ÿå˜é‡ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- ç¼–è¾‘é…ç½®</span><br><span class="line">vim /etc/my.cnf</span><br><span class="line"></span><br><span class="line">-- æ·»åŠ å¦‚ä¸‹å†…å®¹</span><br><span class="line">slow_query_log =1</span><br><span class="line">slow_query_log_file=/var/lib/mysql/ruyuan-slow.log</span><br><span class="line"></span><br><span class="line">-- é‡å¯MySQL</span><br><span class="line">service mysqld restart</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &#x27;%slow_query%&#x27;;</span><br><span class="line">+---------------------+--------------------------------+</span><br><span class="line">| Variable_name       | Value                          |</span><br><span class="line">+---------------------+--------------------------------+</span><br><span class="line">| slow_query_log      | ON                             |</span><br><span class="line">| slow_query_log_file | /var/lib/mysql/ruyuan-slow.log |</span><br><span class="line">+---------------------+--------------------------------+</span><br></pre></td></tr></table></figure><ol start="4"><li>é‚£ä¹ˆå¼€å¯äº†æ…¢æŸ¥è¯¢æ—¥å¿—åï¼Œä»€ä¹ˆæ ·çš„ SQL æ‰ä¼šè®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—é‡Œé¢å‘¢ï¼Ÿ è¿™ä¸ªæ˜¯ç”±å‚æ•° <code>long_query_time</code>â€‹æ§åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹long_query_time çš„å€¼ä¸º 10 ç§’.</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;long_query_time&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name   <span class="operator">|</span> <span class="keyword">Value</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> long_query_time <span class="operator">|</span> <span class="number">10.000000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> <span class="keyword">global</span> long_query_time<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span>  <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;long_query_time&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name   <span class="operator">|</span> <span class="keyword">Value</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> long_query_time <span class="operator">|</span> <span class="number">10.000000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+-----------+</span></span><br></pre></td></tr></table></figure><ol start="5"><li><strong>ä¿®æ”¹äº†å˜é‡ long_query_timeï¼Œä½†æ˜¯æŸ¥è¯¢å˜é‡ long_query_time çš„å€¼è¿˜æ˜¯10ï¼Œéš¾é“æ²¡æœ‰ä¿®æ”¹åˆ°å‘¢ï¼Ÿæ³¨æ„ï¼šä½¿ç”¨å‘½ä»¤ set global long_query_time&#x3D;1 ä¿®æ”¹åï¼Œéœ€è¦é‡æ–°è¿æ¥æˆ–æ–°å¼€ä¸€ä¸ªä¼šè¯æ‰èƒ½çœ‹åˆ°ä¿®æ”¹å€¼ã€‚</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;long_query_time&#x27;;</span><br><span class="line">+-----------------+----------+</span><br><span class="line">| Variable_name   | Value    |</span><br><span class="line">+-----------------+----------+</span><br><span class="line">| long_query_time | 1.000000 |</span><br><span class="line">+-----------------+----------+</span><br></pre></td></tr></table></figure><ol start="6"><li><code>log_output</code>â€‹ å‚æ•°æ˜¯æŒ‡å®šæ—¥å¿—çš„å­˜å‚¨æ–¹å¼ã€‚<code>log_output=&#39;FILE&#39;</code>â€‹  è¡¨ç¤ºå°†æ—¥å¿—å­˜å…¥æ–‡ä»¶ï¼Œé»˜è®¤å€¼æ˜¯â€™FILEâ€™ã€‚<code>log_output=&#39;TABLE&#39;</code>â€‹ è¡¨ç¤ºå°†æ—¥å¿—å­˜å…¥æ•°æ®åº“ï¼Œè¿™æ ·æ—¥å¿—ä¿¡æ¯å°±ä¼šè¢«å†™å…¥åˆ° mysql.slow_log è¡¨ä¸­ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW VARIABLES LIKE &#x27;%log_output%&#x27;;</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| log_output    | FILE  |</span><br><span class="line">+---------------+-------+</span><br></pre></td></tr></table></figure><blockquote><p><strong>MySQL æ•°æ®åº“æ”¯æŒåŒæ—¶ä¸¤ç§æ—¥å¿—å­˜å‚¨æ–¹å¼ï¼Œé…ç½®çš„æ—¶å€™ä»¥é€—å·éš”å¼€å³å¯ï¼Œå¦‚ï¼šlog_output&#x3D;â€™FILE,TABLEâ€™ã€‚æ—¥å¿—è®°å½•åˆ°ç³»ç»Ÿçš„ä¸“ç”¨æ—¥å¿—è¡¨ä¸­ï¼Œè¦æ¯”è®°å½•åˆ°æ–‡ä»¶è€—è´¹æ›´å¤šçš„ç³»ç»Ÿèµ„æºï¼Œå› æ­¤å¯¹äºéœ€è¦å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œåˆéœ€è¦èƒ½å¤Ÿè·å¾—æ›´é«˜çš„ç³»ç»Ÿæ€§èƒ½ï¼Œé‚£ä¹ˆå»ºè®®ä¼˜å…ˆè®°å½•åˆ°æ–‡ä»¶.</strong></p></blockquote><ol start="7"><li>ç³»ç»Ÿå˜é‡ <code>log-queries-not-using-indexes</code>â€‹ï¼šæœªä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢ä¹Ÿè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼ˆå¯é€‰é¡¹ï¼‰ã€‚å¦‚æœè°ƒä¼˜çš„è¯ï¼Œå»ºè®®å¼€å¯è¿™ä¸ªé€‰é¡¹ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;log_queries_not_using_indexes&#x27;;</span><br><span class="line">+-------------------------------+-------+</span><br><span class="line">| Variable_name                 | Value |</span><br><span class="line">+-------------------------------+-------+</span><br><span class="line">| log_queries_not_using_indexes | OFF   |</span><br><span class="line">+-------------------------------+-------+</span><br><span class="line"></span><br><span class="line">mysql&gt; set global log_queries_not_using_indexes=1;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &#x27;log_queries_not_using_indexes&#x27;;</span><br><span class="line">+-------------------------------+-------+</span><br><span class="line">| Variable_name                 | Value |</span><br><span class="line">+-------------------------------+-------+</span><br><span class="line">| log_queries_not_using_indexes | ON    |</span><br><span class="line">+-------------------------------+-------+</span><br></pre></td></tr></table></figure><p><strong>3) æ…¢æŸ¥è¯¢æµ‹è¯•</strong></p><ol><li><strong>æ‰§è¡Œ test_index.sql è„šæœ¬,ç›‘æ§æ…¢æŸ¥è¯¢æ—¥å¿—å†…å®¹</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost mysql]# tail -f /var/lib/mysql/ruyuan-slow.log </span><br><span class="line">/usr/sbin/mysqld, Version: 5.7.30-log (MySQL Community Server (GPL)). started with:</span><br><span class="line">Tcp port: 0  Unix socket: /var/lib/mysql/mysql.sock</span><br><span class="line">Time                 Id Command    Argument</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>æ‰§è¡Œä¸‹é¢çš„ SQLï¼Œæ‰§è¡Œè¶…æ—¶ (è¶…è¿‡1ç§’) æˆ‘ä»¬å»æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM test_index WHERE  </span><br><span class="line">hobby = &#x27;20009951&#x27; OR hobby = &#x27;10009931&#x27; OR hobby = &#x27;30009931&#x27; </span><br><span class="line">OR dname = &#x27;name4000&#x27; OR dname = &#x27;name6600&#x27; ;</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>æ—¥å¿—å†…å®¹</strong></li></ol><p><strong>æˆ‘ä»¬å¾—åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—åï¼Œæœ€é‡è¦çš„ä¸€æ­¥å°±æ˜¯å»åˆ†æè¿™ä¸ªæ—¥å¿—ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æ…¢æ—¥å¿—é‡Œåˆ°åº•è®°å½•äº†å“ªäº›å†…å®¹ã€‚</strong></p><p><strong>å¦‚ä¸‹å›¾æ˜¯æ…¢æ—¥å¿—é‡Œå…¶ä¸­ä¸€æ¡ SQL çš„è®°å½•å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°æœ‰æ—¶é—´æˆ³ï¼Œç”¨æˆ·ï¼ŒæŸ¥è¯¢æ—¶é•¿åŠå…·ä½“çš„ SQL ç­‰ä¿¡æ¯.</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Time: 2022-02-23T13:50:45.005959Z</span><br><span class="line"># User@Host: root[root] @ localhost []  Id:     3</span><br><span class="line"># Query_time: 3.724273  Lock_time: 0.000371 Rows_sent: 5  Rows_examined: 5000000</span><br><span class="line">SET timestamp=1645624245;</span><br><span class="line">select * from test_index where hobby = &#x27;20009951&#x27; or hobby = &#x27;10009931&#x27; or hobby = &#x27;30009931&#x27; or dname = &#x27;name4000&#x27; or dname = &#x27;name6600&#x27;;</span><br></pre></td></tr></table></figure><ul><li><strong>Time: æ‰§è¡Œæ—¶é—´</strong></li><li><strong>User: ç”¨æˆ·ä¿¡æ¯ ,Idä¿¡æ¯</strong></li><li><strong>Query_time: æŸ¥è¯¢æ—¶é•¿</strong></li><li><strong>Lock_time: ç­‰å¾…é”çš„æ—¶é•¿</strong></li><li><strong>Rows_sent:æŸ¥è¯¢ç»“æœçš„è¡Œæ•°</strong></li><li><strong>Rows_examined: æŸ¥è¯¢æ‰«æçš„è¡Œæ•°</strong></li><li><strong>SET timestamp: æ—¶é—´æˆ³</strong></li><li><strong>SQLçš„å…·ä½“ä¿¡æ¯</strong></li></ul><p><strong>æ…¢æŸ¥è¯¢ SQL ä¼˜åŒ–æ€è·¯</strong></p><p><strong>1) SQLæ€§èƒ½ä¸‹é™çš„åŸå› </strong></p><p>åœ¨æ—¥å¸¸çš„è¿ç»´è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ° DBA å°†ä¸€äº›æ‰§è¡Œæ•ˆç‡è¾ƒä½çš„ SQL å‘è¿‡æ¥æ‰¾å¼€å‘äººå‘˜åˆ†æï¼Œå½“æˆ‘ä»¬æ‹¿åˆ°è¿™ä¸ª SQL è¯­å¥ä¹‹åï¼Œåœ¨å¯¹è¿™äº›SQL è¿›è¡Œåˆ†æä¹‹å‰ï¼Œéœ€è¦æ˜ç¡®å¯èƒ½å¯¼è‡´ SQL æ‰§è¡Œæ€§èƒ½ä¸‹é™çš„åŸå› è¿›è¡Œåˆ†æï¼Œæ‰§è¡Œæ€§èƒ½ä¸‹é™å¯ä»¥ä½“ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p><ul><li><p><strong>ç­‰å¾…æ—¶é—´é•¿</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é”è¡¨å¯¼è‡´æŸ¥è¯¢ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œåç»­æˆ‘ä»¬ä» MySQL é”çš„æœºåˆ¶å»åˆ†æ SQL æ‰§è¡Œçš„åŸç†</span><br></pre></td></tr></table></figure></li><li><p><strong>æ‰§è¡Œæ—¶é—´é•¿</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.æŸ¥è¯¢è¯­å¥å†™çš„çƒ‚</span><br><span class="line">2.ç´¢å¼•å¤±æ•ˆ </span><br><span class="line">3.å…³è”æŸ¥è¯¢å¤ªå¤šjoin </span><br><span class="line">4.æœåŠ¡å™¨è°ƒä¼˜åŠå„ä¸ªå‚æ•°çš„è®¾ç½®</span><br></pre></td></tr></table></figure></li></ul><p><strong>2) æ…¢æŸ¥è¯¢ä¼˜åŒ–æ€è·¯</strong></p><ol><li><p>ä¼˜å…ˆé€‰æ‹©ä¼˜åŒ–é«˜å¹¶å‘æ‰§è¡Œçš„ SQLï¼Œå› ä¸ºé«˜å¹¶å‘çš„ SQL å‘ç”Ÿé—®é¢˜å¸¦æ¥åæœæ›´ä¸¥é‡.</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚ä¸‹é¢ä¸¤ç§æƒ…å†µ:</span><br><span class="line">   SQL1: æ¯å°æ—¶æ‰§è¡Œ10000æ¬¡, æ¯æ¬¡20ä¸ªIO ä¼˜åŒ–åæ¯æ¬¡18ä¸ªIO,æ¯å°æ—¶èŠ‚çœ2ä¸‡æ¬¡IO</span><br><span class="line">   SQL2: æ¯å°æ—¶10æ¬¡,æ¯æ¬¡20000ä¸ªIO,æ¯æ¬¡ä¼˜åŒ–å‡å°‘2000ä¸ªIO,æ¯å°æ—¶èŠ‚çœ2ä¸‡æ¬¡IO</span><br><span class="line">   SQL2æ›´éš¾ä¼˜åŒ–,SQL1æ›´å¥½ä¼˜åŒ–.ä½†æ˜¯ç¬¬ä¸€ç§å±äºé«˜å¹¶å‘SQL,æ›´æ€¥éœ€ä¼˜åŒ– æˆæœ¬æ›´ä½</span><br></pre></td></tr></table></figure></li><li><p>å®šä½ä¼˜åŒ–å¯¹è±¡çš„æ€§èƒ½ç“¶é¢ˆ(åœ¨ä¼˜åŒ–ä¹‹å‰äº†è§£æ€§èƒ½ç“¶é¢ˆåœ¨å“ª)</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åœ¨å»ä¼˜åŒ– SQL æ—¶,é€‰æ‹©ä¼˜åŒ–åˆ†æ–¹å‘æœ‰ä¸‰ä¸ª: </span><br><span class="line">  1.IO(æ•°æ®è®¿é—®æ¶ˆè€—çš„äº†å¤ªå¤šçš„æ—¶é—´,æŸ¥çœ‹æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº†ç´¢å¼•) , </span><br><span class="line">  2.CPU(æ•°æ®è¿ç®—èŠ±è´¹äº†å¤ªå¤šæ—¶é—´, æ•°æ®çš„è¿ç®—åˆ†ç»„ æ’åºæ˜¯ä¸æ˜¯æœ‰é—®é¢˜) </span><br><span class="line">  3.ç½‘ç»œå¸¦å®½(åŠ å¤§ç½‘ç»œå¸¦å®½)</span><br></pre></td></tr></table></figure></li><li><p>æ˜ç¡®ä¼˜åŒ–ç›®æ ‡</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">éœ€è¦æ ¹æ®æ•°æ®åº“å½“å‰çš„çŠ¶æ€</span><br><span class="line">æ•°æ®åº“ä¸­ä¸è¯¥æ¡SQLçš„å…³ç³»</span><br><span class="line">å½“å‰SQLçš„å…·ä½“åŠŸèƒ½</span><br><span class="line">æœ€å¥½çš„æƒ…å†µæ¶ˆè€—çš„èµ„æº,æœ€å·®æƒ…å†µä¸‹æ¶ˆè€—çš„èµ„æº,ä¼˜åŒ–çš„ç»“æœåªæœ‰ä¸€ä¸ªç»™ç”¨æˆ·ä¸€ä¸ªå¥½çš„ä½“éªŒ</span><br></pre></td></tr></table></figure></li><li><p>ä» explain æ‰§è¡Œè®¡åˆ’å…¥æ‰‹</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åªæœ‰ explain èƒ½å‘Šè¯‰ä½ å½“å‰ SQL çš„æ‰§è¡ŒçŠ¶æ€</span><br></pre></td></tr></table></figure></li><li><p>æ°¸è¿œç”¨å°çš„ç»“æœé›†é©±åŠ¨å¤§çš„ç»“æœé›†</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å°çš„æ•°æ®é›†é©±åŠ¨å¤§çš„æ•°æ®é›†,å‡å°‘å†…å±‚è¡¨è¯»å–çš„æ¬¡æ•°</span><br><span class="line"></span><br><span class="line">ç±»ä¼¼äºåµŒå¥—å¾ªç¯</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">å¦‚æœå°çš„å¾ªç¯åœ¨å¤–å±‚,å¯¹äºæ•°æ®åº“è¿æ¥æ¥è¯´å°±åªè¿æ¥<span class="number">5</span>æ¬¡,è¿›è¡Œ<span class="number">5000</span>æ¬¡æ“ä½œ,å¦‚æœ<span class="number">1000</span>åœ¨å¤–,åˆ™éœ€è¦è¿›è¡Œ<span class="number">1000</span>æ¬¡æ•°æ®åº“è¿æ¥,ä»è€Œæµªè´¹èµ„æºï¼Œå¢åŠ æ¶ˆè€—.è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦å°è¡¨é©±åŠ¨å¤§è¡¨ã€‚</span><br></pre></td></tr></table></figure></li><li><p>å°½å¯èƒ½åœ¨ç´¢å¼•ä¸­å®Œæˆæ’åº</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ’åºæ“ä½œç”¨çš„æ¯”è¾ƒå¤š,order by åé¢çš„å­—æ®µå¦‚æœåœ¨ç´¢å¼•ä¸­,ç´¢å¼•æœ¬æ¥å°±æ˜¯æ’å¥½åºçš„,æ‰€ä»¥é€Ÿåº¦å¾ˆå¿«,æ²¡æœ‰ç´¢å¼•çš„è¯,å°±éœ€è¦ä»è¡¨ä¸­æ‹¿æ•°æ®,åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åº,å¦‚æœå†…å­˜ç©ºé—´ä¸å¤Ÿè¿˜ä¼šå‘ç”Ÿè½ç›˜æ“ä½œ</span><br></pre></td></tr></table></figure></li><li><p>åªè·å–è‡ªå·±éœ€è¦çš„åˆ—</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸è¦ä½¿ç”¨select  * ,select * å¾ˆå¯èƒ½ä¸èµ°ç´¢å¼•,è€Œä¸”æ•°æ®é‡è¿‡å¤§</span><br></pre></td></tr></table></figure></li><li><p>åªä½¿ç”¨æœ€æœ‰æ•ˆçš„è¿‡æ»¤æ¡ä»¶</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¯¯åŒº whereåé¢çš„æ¡ä»¶è¶Šå¤šè¶Šå¥½,ä½†å®é™…ä¸Šæ˜¯åº”è¯¥ç”¨æœ€çŸ­çš„è·¯å¾„è®¿é—®åˆ°æ•°æ®</span><br></pre></td></tr></table></figure></li><li><p>å°½å¯èƒ½é¿å…å¤æ‚çš„joinå’Œå­æŸ¥è¯¢</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ¯æ¡SQLçš„JOINæ“ä½œ å»ºè®®ä¸è¦è¶…è¿‡ä¸‰å¼ è¡¨</span><br><span class="line">å°†å¤æ‚çš„SQL, æ‹†åˆ†æˆå¤šä¸ªå°çš„SQL å•ä¸ªè¡¨æ‰§è¡Œ,è·å–çš„ç»“æœ åœ¨ç¨‹åºä¸­è¿›è¡Œå°è£…</span><br><span class="line">å¦‚æœjoinå ç”¨çš„èµ„æºæ¯”è¾ƒå¤š,ä¼šå¯¼è‡´å…¶ä»–è¿›ç¨‹ç­‰å¾…æ—¶é—´å˜é•¿</span><br></pre></td></tr></table></figure></li><li><p>åˆç†è®¾è®¡å¹¶åˆ©ç”¨ç´¢å¼•</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å¦‚ä½•åˆ¤å®šæ˜¯å¦éœ€è¦åˆ›å»ºç´¢å¼•?</span><br><span class="line"> 1.è¾ƒä¸ºé¢‘ç¹çš„ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼•.</span><br><span class="line"> 2.å”¯ä¸€æ€§å¤ªå·®çš„å­—æ®µä¸é€‚åˆå•ç‹¬åˆ›å»ºç´¢å¼•ï¼Œå³ä½¿é¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶.ï¼ˆå”¯ä¸€æ€§å¤ªå·®çš„å­—æ®µä¸»è¦æ˜¯æŒ‡å“ªäº›å‘¢ï¼Ÿå¦‚çŠ¶æ€å­—æ®µï¼Œç±»å‹å­—æ®µç­‰ç­‰è¿™äº›å­—æ®µä¸­çš„æ•°æ®å¯èƒ½æ€»å…±å°±æ˜¯é‚£ä¹ˆå‡ ä¸ªå‡ åä¸ªæ•°å€¼é‡å¤ä½¿ç”¨ï¼‰ï¼ˆå½“ä¸€æ¡Queryæ‰€è¿”å›çš„æ•°æ®è¶…è¿‡äº†å…¨è¡¨çš„15%çš„æ—¶å€™ï¼Œå°±ä¸åº”è¯¥å†ä½¿ç”¨ç´¢å¼•æ‰«ææ¥å®Œæˆè¿™ä¸ªQueryäº†ï¼‰.</span><br><span class="line"> 3.æ›´æ–°éå¸¸é¢‘ç¹çš„å­—æ®µä¸é€‚åˆåˆ›å»ºç´¢å¼•.ï¼ˆå› ä¸ºç´¢å¼•ä¸­çš„å­—æ®µè¢«æ›´æ–°çš„æ—¶å€™ï¼Œä¸ä»…ä»…éœ€è¦æ›´æ–°è¡¨ä¸­çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜è¦æ›´æ–°ç´¢å¼•æ•°æ®ï¼Œä»¥ç¡®ä¿ç´¢å¼•ä¿¡æ¯æ˜¯å‡†ç¡®çš„ï¼‰.</span><br><span class="line"> 4.ä¸ä¼šå‡ºç°åœ¨WHEREå­å¥ä¸­çš„å­—æ®µä¸è¯¥åˆ›å»ºç´¢å¼•.</span><br><span class="line">    </span><br><span class="line">å¦‚ä½•é€‰æ‹©åˆé€‚ç´¢å¼•?</span><br><span class="line"> 1.å¯¹äºå•é”®ç´¢å¼•ï¼Œå°½é‡é€‰æ‹©é’ˆå¯¹å½“å‰Queryè¿‡æ»¤æ€§æ›´å¥½çš„ç´¢å¼•.</span><br><span class="line"> 2.é€‰æ‹©è”åˆç´¢å¼•æ—¶,å½“å‰Queryä¸­è¿‡æ»¤æ€§æœ€å¥½çš„å­—æ®µåœ¨ç´¢å¼•å­—æ®µé¡ºåºä¸­æ’åˆ—è¦é å‰.</span><br><span class="line"> 3.é€‰æ‹©è”åˆç´¢å¼•æ—¶,å°½é‡ç´¢å¼•å­—æ®µå‡ºç°åœ¨wä¸­æ¯”è¾ƒå¤šçš„ç´¢å¼•.</span><br></pre></td></tr></table></figure></li></ol><h3 id="50ã€Hash-ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#50ã€Hash-ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="50ã€Hash ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ"></a>50ã€Hash ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ</h3><p>MySQL ä¸­ç´¢å¼•çš„å¸¸ç”¨æ•°æ®ç»“æ„æœ‰ä¸¤ç§: ä¸€ç§æ˜¯ B+Treeï¼Œå¦ä¸€ç§åˆ™æ˜¯ Hash.</p><p>Hash åº•å±‚å®ç°æ˜¯ç”± Hash è¡¨æ¥å®ç°çš„ï¼Œæ˜¯æ ¹æ®é”®å€¼ &lt;key,value&gt; å­˜å‚¨æ•°æ®çš„ç»“æ„ã€‚éå¸¸é€‚åˆæ ¹æ® key æŸ¥æ‰¾ value å€¼ï¼Œä¹Ÿå°±æ˜¯å•ä¸ª key æŸ¥è¯¢ï¼Œæˆ–è€…è¯´ç­‰å€¼æŸ¥è¯¢ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/1654c92951211b752f83fbb4b725f1fd645325325.png">â€‹</p><p>å¯¹äºæ¯ä¸€è¡Œæ•°æ®ï¼Œå­˜å‚¨å¼•æ“éƒ½ä¼šå¯¹æ‰€æœ‰çš„ç´¢å¼•åˆ—è®¡ç®—ä¸€ä¸ªå“ˆå¸Œç ï¼Œå“ˆå¸Œç æ˜¯ä¸€ä¸ªè¾ƒå°çš„å€¼,å¦‚æœå‡ºç°å“ˆå¸Œç å€¼ç›¸åŒçš„æƒ…å†µä¼šæ‹‰å‡ºä¸€æ¡é“¾è¡¨.</p><p>Hsahç´¢å¼•çš„ä¼˜ç‚¹</p><ul><li>å› ä¸ºç´¢å¼•è‡ªèº«åªéœ€è¦å­˜å‚¨å¯¹åº”çš„ Hash å€¼,æ‰€ä»¥ç´¢å¼•ç»“æ„éå¸¸ç´§å‡‘, åªéœ€è¦åšç­‰å€¼æ¯”è¾ƒæŸ¥è¯¢ï¼Œè€Œä¸åŒ…å«æ’åºæˆ–èŒƒå›´æŸ¥è¯¢çš„éœ€æ±‚ï¼Œéƒ½é€‚åˆä½¿ç”¨å“ˆå¸Œç´¢å¼• .</li><li>æ²¡æœ‰å“ˆå¸Œå†²çªçš„æƒ…å†µä¸‹,ç­‰å€¼æŸ¥è¯¢è®¿é—®å“ˆå¸Œç´¢å¼•çš„æ•°æ®éå¸¸å¿«.(å¦‚æœå‘ç”Ÿ Hash å†²çª,å­˜å‚¨å¼•æ“å¿…é¡»éå†é“¾è¡¨ä¸­çš„æ‰€æœ‰è¡ŒæŒ‡é’ˆ,é€è¡Œè¿›è¡Œæ¯”è¾ƒ,ç›´åˆ°æ‰¾åˆ°æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è¡Œ).</li></ul><p>Hash ç´¢å¼•çš„ç¼ºç‚¹</p><ul><li>å“ˆå¸Œç´¢å¼•åªåŒ…å«å“ˆå¸Œå€¼å’Œè¡ŒæŒ‡é’ˆï¼Œè€Œä¸å­˜å‚¨å­—æ®µå€¼ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ç´¢å¼•ä¸­çš„å€¼æ¥é¿å…è¯»å–è¡Œã€‚</li><li>å“ˆå¸Œç´¢å¼•åªæ”¯æŒç­‰å€¼æ¯”è¾ƒæŸ¥è¯¢ã€‚ä¸æ”¯æŒä»»ä½•èŒƒå›´æŸ¥è¯¢å’Œéƒ¨åˆ†ç´¢å¼•åˆ—åŒ¹é…æŸ¥æ‰¾ã€‚</li><li>å“ˆå¸Œç´¢å¼•æ•°æ®å¹¶ä¸æ˜¯æŒ‰ç…§ç´¢å¼•å€¼é¡ºåºå­˜å‚¨çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æ— æ³•ç”¨äºæ’åºã€‚</li></ul><h3 id="51ã€è¯´ä¸€ä¸‹-InnoDB-å†…å­˜ç›¸å…³çš„å‚æ•°ä¼˜åŒ–ï¼Ÿ"><a href="#51ã€è¯´ä¸€ä¸‹-InnoDB-å†…å­˜ç›¸å…³çš„å‚æ•°ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="51ã€è¯´ä¸€ä¸‹ InnoDB å†…å­˜ç›¸å…³çš„å‚æ•°ä¼˜åŒ–ï¼Ÿ"></a>51ã€è¯´ä¸€ä¸‹ InnoDB å†…å­˜ç›¸å…³çš„å‚æ•°ä¼˜åŒ–ï¼Ÿ</h3><p>Buffer Pool å‚æ•°ä¼˜åŒ–</p><p>1.1 ç¼“å†²æ± å†…å­˜å¤§å°é…ç½®</p><p>ä¸€ä¸ªå¤§çš„æ—¥å¿—ç¼“å†²åŒºå…è®¸å¤§é‡çš„äº‹åŠ¡åœ¨æäº¤ä¹‹å‰ä¸å†™æ—¥å¿—åˆ°ç£ç›˜ã€‚å› æ­¤ï¼Œå¦‚æœä½ æœ‰å¾ˆå¤šäº‹åŠ¡çš„æ›´æ–°ï¼Œæ’å…¥æˆ–åˆ é™¤æ“ä½œï¼Œé€šè¿‡è®¾ç½®è¿™ä¸ªå‚æ•°ä¼šå¤§é‡çš„å‡å°‘ç£ç›˜ I&#x2F;O çš„æ¬¡æ•°æ•°ã€‚<br>å»ºè®®ï¼šåœ¨ä¸“ç”¨æ•°æ®åº“æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥å°†ç¼“å†²æ± å¤§å°è®¾ç½®ä¸ºæœåŠ¡å™¨ç‰©ç†å†…å­˜çš„ 60 % - 80 %.</p><ul><li><p><strong>æŸ¥çœ‹ç¼“å†²æ± å¤§å°</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%innodb_buffer_pool_size%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name           <span class="operator">|</span> <span class="keyword">Value</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> innodb_buffer_pool_size <span class="operator">|</span> <span class="number">134217728</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-----------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="number">134217728</span> <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">134217728</span> <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">128.00000000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨çº¿è°ƒæ•´ InnoDB ç¼“å†²æ± å¤§å°</strong><br><strong>innodb_buffer_pool_size å¯ä»¥åŠ¨æ€è®¾ç½®ï¼Œå…è®¸åœ¨ä¸é‡æ–°å¯åŠ¨æœåŠ¡å™¨çš„æƒ…å†µä¸‹è°ƒæ•´ç¼“å†²æ± çš„å¤§å°.</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SET</span> <span class="keyword">GLOBAL</span> innodb_buffer_pool_size <span class="operator">=</span> <span class="number">268435456</span>; <span class="comment">-- 512</span></span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.10</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%innodb_buffer_pool_size%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name           <span class="operator">|</span> <span class="keyword">Value</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> innodb_buffer_pool_size <span class="operator">|</span> <span class="number">268435456</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+-----------+</span></span><br></pre></td></tr></table></figure><p><strong>ç›‘æ§åœ¨çº¿è°ƒæ•´ç¼“å†²æ± çš„è¿›åº¦</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> STATUS <span class="keyword">WHERE</span> Variable_name<span class="operator">=</span><span class="string">&#x27;InnoDB_buffer_pool_resize_status&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+----------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name                    <span class="operator">|</span> <span class="keyword">Value</span>                                                        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+----------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_resize_status <span class="operator">|</span> Size did <span class="keyword">not</span> change (<span class="keyword">old</span> size <span class="operator">=</span> <span class="keyword">new</span> size <span class="operator">=</span> <span class="number">268435456.</span> Nothing <span class="keyword">to</span> do. <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+----------------------------------------------------------------------+</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>1.3 InnoDB ç¼“å­˜æ€§èƒ½è¯„ä¼°</strong></p><p>å½“å‰é…ç½®çš„ innodb_buffer_pool_size æ˜¯å¦åˆé€‚ï¼Œå¯ä»¥é€šè¿‡åˆ†æ InnoDB ç¼“å†²æ± çš„ç¼“å­˜å‘½ä¸­ç‡æ¥éªŒè¯ã€‚</p><ul><li><p>ä»¥ä¸‹å…¬å¼è®¡ç®— InnoDB buffer pool å‘½ä¸­ç‡:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä¸­ç‡ <span class="operator">=</span> innodb_buffer_pool_read_requests <span class="operator">/</span> (innodb_buffer_pool_read_requests<span class="operator">+</span>innodb_buffer_pool_reads)<span class="operator">*</span> <span class="number">100</span></span><br><span class="line"></span><br><span class="line">å‚æ•°<span class="number">1</span>: innodb_buffer_pool_readsï¼šè¡¨ç¤ºInnoDBç¼“å†²æ± æ— æ³•æ»¡è¶³çš„è¯·æ±‚æ•°ã€‚éœ€è¦ä»ç£ç›˜ä¸­è¯»å–ã€‚</span><br><span class="line">å‚æ•°<span class="number">2</span>: innodb_buffer_pool_read_requestsï¼šè¡¨ç¤ºä»å†…å­˜ä¸­è¯»å–é¡µçš„è¯·æ±‚æ•°ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> status <span class="keyword">like</span> <span class="string">&#x27;innodb_buffer_pool_read%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name                         <span class="operator">|</span> <span class="keyword">Value</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_read_ahead_rnd     <span class="operator">|</span> <span class="number">0</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_read_ahead         <span class="operator">|</span> <span class="number">0</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_read_ahead_evicted <span class="operator">|</span> <span class="number">0</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_read_requests      <span class="operator">|</span> <span class="number">12701</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_reads              <span class="operator">|</span> <span class="number">455</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------+-------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ­¤å€¼ä½äº90%ï¼Œåˆ™å¯ä»¥è€ƒè™‘å¢åŠ innodb_buffer_pool_sizeã€‚</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="number">12701</span> <span class="operator">/</span> (<span class="number">455</span> <span class="operator">+</span> <span class="number">12701</span>) <span class="operator">*</span> <span class="number">100</span> ;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12701</span> <span class="operator">/</span> (<span class="number">455</span> <span class="operator">+</span> <span class="number">12701</span>) <span class="operator">*</span> <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------+</span></span><br><span class="line"><span class="operator">|</span>                     <span class="number">96.5415</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------+</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>1.4 Page ç®¡ç†ç›¸å…³å‚æ•°</strong></p><p>**æŸ¥çœ‹ Page é¡µçš„å¤§å°(é»˜è®¤16KB),**â€‹<code>innodb_page_size</code>â€‹åªèƒ½åœ¨åˆå§‹åŒ– MySQL å®ä¾‹ä¹‹å‰é…ç½®ï¼Œä¸èƒ½åœ¨ä¹‹åä¿®æ”¹ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šå€¼ï¼Œåˆ™ä½¿ç”¨é»˜è®¤é¡µé¢å¤§å°åˆå§‹åŒ–å®ä¾‹ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%innodb_page_size%&#x27;</span>; </span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name    <span class="operator">|</span> <span class="keyword">Value</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> innodb_page_size <span class="operator">|</span> <span class="number">16384</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-------+</span></span><br></pre></td></tr></table></figure><p><strong>Page é¡µç®¡ç†çŠ¶æ€ç›¸å…³å‚æ•°</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">global</span> status <span class="keyword">like</span> <span class="string">&#x27;%innodb_buffer_pool_pages%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name                    <span class="operator">|</span> <span class="keyword">Value</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_pages_data    <span class="operator">|</span> <span class="number">515</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_pages_dirty   <span class="operator">|</span> <span class="number">0</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_pages_flushed <span class="operator">|</span> <span class="number">334</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_pages_free    <span class="operator">|</span> <span class="number">15868</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_pages_misc    <span class="operator">|</span> <span class="number">0</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Innodb_buffer_pool_pages_total   <span class="operator">|</span> <span class="number">16383</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+-------+</span></span><br></pre></td></tr></table></figure><p><strong>pages_data</strong>: InnoDB ç¼“å†²æ± ä¸­åŒ…å«æ•°æ®çš„é¡µæ•°ã€‚ è¯¥æ•°å­—åŒ…æ‹¬è„é¡µé¢å’Œå¹²å‡€é¡µé¢ã€‚</p><p><strong>pages_dirty</strong>: æ˜¾ç¤ºåœ¨å†…å­˜ä¸­ä¿®æ”¹ä½†å°šæœªå†™å…¥æ•°æ®æ–‡ä»¶çš„ InnoDB ç¼“å†²æ± æ•°æ®é¡µçš„æ•°é‡ï¼ˆè„é¡µåˆ·æ–°ï¼‰ã€‚</p><p><strong>pages_flushed</strong>: è¡¨ç¤ºä» InnoDB ç¼“å†²æ± ä¸­åˆ·æ–°è„é¡µçš„è¯·æ±‚æ•°ã€‚</p><p><strong>pages_free</strong>: æ˜¾ç¤º InnoDB ç¼“å†²æ± ä¸­çš„ç©ºé—²é¡µé¢</p><p><strong>pages_misc</strong>: ç¼“å­˜æ± ä¸­å½“å‰å·²ç»è¢«ç”¨ä½œç®¡ç†ç”¨é€”æˆ– hash index è€Œä¸èƒ½ç”¨ä½œä¸ºæ™®é€šæ•°æ®é¡µçš„æ•°ç›®</p><p><strong>pages_total</strong>: ç¼“å­˜æ± çš„é¡µæ€»æ•°ç›®ã€‚å•ä½æ˜¯ pageã€‚</p><h3 id="52ã€InnoDB-æ—¥å¿—ç›¸å…³çš„å‚æ•°ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ"><a href="#52ã€InnoDB-æ—¥å¿—ç›¸å…³çš„å‚æ•°ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ" class="headerlink" title="52ã€InnoDB æ—¥å¿—ç›¸å…³çš„å‚æ•°ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ"></a>52ã€InnoDB æ—¥å¿—ç›¸å…³çš„å‚æ•°ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ</h3><p><strong>1.æ—¥å¿—ç¼“å†²åŒºç›¸å…³å‚æ•°é…ç½®</strong></p><p><strong>æ—¥å¿—ç¼“å†²åŒºçš„å¤§å°ã€‚ä¸€èˆ¬é»˜è®¤å€¼ 16MB æ˜¯å¤Ÿç”¨çš„ï¼Œä½†å¦‚æœäº‹åŠ¡ä¹‹ä¸­å«æœ‰ blog&#x2F;text ç­‰å¤§å­—æ®µï¼Œè¿™ä¸ªç¼“å†²åŒºä¼šè¢«å¾ˆå¿«å¡«æ»¡ä¼šå¼•èµ·é¢å¤–çš„IO è´Ÿè½½ã€‚é…ç½®æ›´å¤§çš„æ—¥å¿—ç¼“å†²åŒº,å¯ä»¥æœ‰æ•ˆçš„æé«˜ MySQL çš„æ•ˆç‡.</strong></p><ul><li><p><strong>innodb_log_buffer_size ç¼“å†²åŒºå¤§å°</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;innodb_log_buffer_size&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+----------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name          <span class="operator">|</span> <span class="keyword">Value</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+----------+</span></span><br><span class="line"><span class="operator">|</span> innodb_log_buffer_size <span class="operator">|</span> <span class="number">16777216</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+----------+</span></span><br></pre></td></tr></table></figure></li><li><p><strong>innodb_log_files_in_group æ—¥å¿—ç»„æ–‡ä»¶ä¸ªæ•°</strong><br><strong>æ—¥å¿—ç»„æ ¹æ®éœ€è¦æ¥åˆ›å»ºã€‚è€Œæ—¥å¿—ç»„çš„æˆå‘˜åˆ™éœ€è¦è‡³å°‘ 2 ä¸ªï¼Œå®ç°å¾ªç¯å†™å…¥å¹¶ä½œä¸ºå†—ä½™ç­–ç•¥ã€‚</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;innodb_log_files_in_group&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name             <span class="operator">|</span> <span class="keyword">Value</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> innodb_log_files_in_group <span class="operator">|</span> <span class="number">2</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+-------+</span></span><br></pre></td></tr></table></figure></li><li><p><strong>innodb_log_file_size æ—¥å¿—æ–‡ä»¶å¤§å°</strong><br><strong>å‚æ•°innodb_log_file_size ç”¨äºè®¾å®š MySQL æ—¥å¿—ç»„ä¸­æ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°(é»˜è®¤ 48M)ã€‚æ­¤å‚æ•°æ˜¯ä¸€ä¸ªå…¨å±€çš„é™æ€å‚æ•°ï¼Œä¸èƒ½åŠ¨æ€ä¿®æ”¹ã€‚</strong><br><strong>å‚æ•° innodb_log_file_size çš„æœ€å¤§å€¼ï¼ŒäºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶å¤§å°ï¼ˆinnodb_log_file_size * innodb_log_files_in_groupï¼‰ä¸èƒ½è¶…è¿‡512GB.æ‰€ä»¥å•ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°ä¸èƒ½è¶…è¿‡ 256G.</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;innodb_log_file_size&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name        <span class="operator">|</span> <span class="keyword">Value</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+</span></span><br><span class="line"><span class="operator">|</span> innodb_log_file_size <span class="operator">|</span> <span class="number">50331648</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+----------+</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>2.æ—¥å¿—æ–‡ä»¶å‚æ•°ä¼˜åŒ–</strong></p><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æ—¥å¿—æ–‡ä»¶å¤§å°è®¾ç½®å¯¹æ€§èƒ½çš„å½±å“</p><ul><li><p>è®¾ç½®è¿‡å°</p><ol><li>å‚æ•° <code>innodb_log_file_size</code>â€‹è®¾ç½®å¤ªå°ï¼Œå°±ä¼šå¯¼è‡´ MySQL çš„æ—¥å¿—æ–‡ä»¶( redo logï¼‰é¢‘ç¹åˆ‡æ¢ï¼Œé¢‘ç¹çš„è§¦å‘æ•°æ®åº“çš„æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰ï¼Œå¯¼è‡´åˆ·æ–°è„é¡µåˆ°ç£ç›˜çš„æ¬¡æ•°å¢åŠ ã€‚ä»è€Œå½±å“ IO æ€§èƒ½ã€‚</li><li>å¤„ç†å¤§äº‹åŠ¡æ—¶ï¼Œå°†æ‰€æœ‰çš„æ—¥å¿—æ–‡ä»¶å†™æ»¡äº†ï¼Œäº‹åŠ¡å†…å®¹è¿˜æ²¡æœ‰å†™å®Œï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æ—¥å¿—ä¸èƒ½åˆ‡æ¢.</li></ol></li><li><p>è®¾ç½®è¿‡å¤§<br>å‚æ•° <code>innodb_log_file_size</code>â€‹å¦‚æœè®¾ç½®å¤ªå¤§ï¼Œè™½ç„¶å¯ä»¥æå‡ IO æ€§èƒ½ï¼Œä½†æ˜¯å½“ MySQL ç”±äºæ„å¤–å®•æœºæ—¶ï¼ŒäºŒè¿›åˆ¶æ—¥å¿—å¾ˆå¤§ï¼Œé‚£ä¹ˆæ¢å¤çš„æ—¶é—´å¿…ç„¶å¾ˆé•¿ã€‚è€Œä¸”è¿™ä¸ªæ¢å¤æ—¶é—´å¾€å¾€ä¸å¯æ§ï¼Œå—å¤šæ–¹é¢å› ç´ å½±å“ã€‚</p></li></ul><p><strong>ä¼˜åŒ–å»ºè®®:</strong></p><p>å¦‚ä½•è®¾ç½®åˆé€‚çš„æ—¥å¿—æ–‡ä»¶å¤§å° ?</p><ul><li>æ ¹æ®å®é™…ç”Ÿäº§åœºæ™¯çš„ä¼˜åŒ–ç»éªŒ,ä¸€èˆ¬æ˜¯è®¡ç®—ä¸€æ®µæ—¶é—´å†…ç”Ÿæˆçš„äº‹åŠ¡æ—¥å¿—ï¼ˆredo logï¼‰çš„å¤§å°ï¼Œ è€Œ MySQL çš„æ—¥å¿—æ–‡ä»¶çš„å¤§å°æœ€å°‘åº”è¯¥æ‰¿è½½ä¸€ä¸ªå°æ—¶çš„ä¸šåŠ¡æ—¥å¿—é‡(å®˜ç½‘æ–‡æ¡£ä¸­æœ‰è¯´æ˜)ã€‚</li></ul><p>æƒ³è¦ä¼°è®¡ä¸€ä¸‹ InnoDB redo log çš„å¤§å°ï¼Œéœ€è¦æŠ“å–ä¸€æ®µæ—¶é—´å†… Log SequenceNumberï¼ˆæ—¥å¿—é¡ºåºå·ï¼‰çš„æ•°æ®,æ¥è®¡ç®—ä¸€å°æ—¶å†…äº§ç”Ÿçš„æ—¥å¿—å¤§å°.</p><blockquote><p><strong>Log sequence number</strong></p><p><strong>è‡ªç³»ç»Ÿä¿®æ”¹å¼€å§‹ï¼Œå°±ä¸æ–­çš„ç”Ÿæˆ redo æ—¥å¿—ã€‚ä¸ºäº†è®°å½•ä¸€å…±ç”Ÿæˆäº†å¤šå°‘æ—¥å¿—ï¼Œäºæ˜¯ mysql è®¾è®¡äº†å…¨å±€å˜é‡ log sequence numberï¼Œç®€ç§° lsnï¼Œä½†ä¸æ˜¯ä» 0 å¼€å§‹ï¼Œæ˜¯ä» 8704 å­—èŠ‚å¼€å§‹ã€‚</strong></p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- pageråˆ†é¡µå·¥å…·, åªè·å– sequenceçš„ä¿¡æ¯</span></span><br><span class="line">mysql<span class="operator">&gt;</span> pager grep sequence;</span><br><span class="line">PAGER <span class="keyword">set</span> <span class="keyword">to</span> <span class="string">&#x27;grep sequence&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢çŠ¶æ€,å¹¶å€’è®¡æ—¶ä¸€åˆ†é’Ÿ</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> engine innodb status\G <span class="keyword">select</span> sleep(<span class="number">60</span>);</span><br><span class="line">Log sequence number <span class="number">5399154</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">1</span> min <span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸€åˆ†æ—¶é—´å†…æ‰€ç”Ÿæˆçš„æ•°æ®é‡ 5406150</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> engine innodb status\G;</span><br><span class="line">Log sequence number <span class="number">5406150</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å…³é—­pager</span></span><br><span class="line">mysql<span class="operator">&gt;</span> nopager;</span><br><span class="line">PAGER <span class="keyword">set</span> <span class="keyword">to</span> stdout</span><br></pre></td></tr></table></figure><p>æœ‰äº†ä¸€åˆ†é’Ÿçš„æ—¥å¿—é‡,æ®æ­¤æ¨ç®—ä¸€å°æ—¶å†…çš„æ—¥å¿—é‡</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> (<span class="number">5406150</span> <span class="operator">-</span> <span class="number">5399154</span>) <span class="operator">/</span> <span class="number">1024</span> <span class="keyword">as</span> kb_per_min;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> kb_per_min <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">6.8320</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> (<span class="number">5406150</span> <span class="operator">-</span> <span class="number">5399154</span>) <span class="operator">/</span> <span class="number">1024</span> <span class="operator">*</span> <span class="number">60</span> <span class="keyword">as</span> kb_per_min;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> kb_per_min <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">409.9219</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br></pre></td></tr></table></figure><p>å¤ªå¤§çš„ç¼“å†²æ± æˆ–éå¸¸ä¸æ­£å¸¸çš„ä¸šåŠ¡è´Ÿè½½å¯èƒ½ä¼šè®¡ç®—å‡ºéå¸¸å¤§(æˆ–éå¸¸å°)çš„æ—¥å¿—å¤§å°ã€‚è¿™ä¹Ÿæ˜¯å…¬å¼ä¸è¶³ä¹‹å¤„ï¼Œéœ€è¦æ ¹æ®åˆ¤æ–­å’Œç»éªŒã€‚ä½†è¿™ä¸ªè®¡ç®—æ–¹æ³•æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒæ ‡å‡†ã€‚</p><h3 id="53ã€InnoDB-IO-çº¿ç¨‹ç›¸å…³å‚æ•°ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ"><a href="#53ã€InnoDB-IO-çº¿ç¨‹ç›¸å…³å‚æ•°ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ" class="headerlink" title="53ã€InnoDB IO çº¿ç¨‹ç›¸å…³å‚æ•°ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ"></a>53ã€InnoDB IO çº¿ç¨‹ç›¸å…³å‚æ•°ä¼˜åŒ–äº†è§£è¿‡å—ï¼Ÿ</h3><p>æ•°æ®åº“å±äº IO å¯†é›†å‹çš„åº”ç”¨ç¨‹åºï¼Œå…¶ä¸»è¦èŒè´£å°±æ˜¯æ•°æ®çš„ç®¡ç†åŠå­˜å‚¨å·¥ä½œã€‚ä»å†…å­˜ä¸­è¯»å–ä¸€ä¸ªæ•°æ®åº“æ•°æ®çš„æ—¶é—´æ˜¯å¾®ç§’çº§åˆ«ï¼Œè€Œä»ä¸€å—æ™®é€šç¡¬ç›˜ä¸Šè¯»å–ä¸€ä¸ª IO æ˜¯åœ¨æ¯«ç§’çº§åˆ«ã€‚è¦ä¼˜åŒ–æ•°æ®åº“ï¼ŒIO æ“ä½œæ˜¯å¿…é¡»è¦ä¼˜åŒ–çš„ï¼Œå°½å¯èƒ½å°†ç£ç›˜ IO è½¬åŒ–ä¸ºå†…å­˜ IOã€‚</p><p><strong>1) å‚æ•°: query_cache_size&amp;have_query_cache</strong><br>MySQL æŸ¥è¯¢ç¼“å­˜ä¼šä¿å­˜æŸ¥è¯¢è¿”å›çš„å®Œæ•´ç»“æœã€‚å½“æŸ¥è¯¢å‘½ä¸­è¯¥ç¼“å­˜ï¼Œä¼šç«‹åˆ»è¿”å›ç»“æœï¼Œè·³è¿‡äº†è§£æï¼Œä¼˜åŒ–å’Œæ‰§è¡Œé˜¶æ®µã€‚<br>æŸ¥è¯¢ç¼“å­˜ä¼šè·Ÿè¸ªæŸ¥è¯¢ä¸­æ¶‰åŠçš„æ¯ä¸ªè¡¨ï¼Œå¦‚æœè¿™äº›è¡¨å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå’Œè¿™ä¸ªè¡¨ç›¸å…³çš„æ‰€æœ‰ç¼“å­˜éƒ½å°†å¤±æ•ˆã€‚</p><ol><li>æŸ¥çœ‹æŸ¥è¯¢ç¼“å­˜æ˜¯å¦å¼€å¯</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢æ˜¯å¦æ”¯æŒæŸ¥è¯¢ç¼“å­˜</span><br><span class="line">mysql&gt; show variables like &#x27;have_query_cache&#x27;;</span><br><span class="line">+------------------+-------+</span><br><span class="line">| Variable_name    | Value |</span><br><span class="line">+------------------+-------+</span><br><span class="line">| have_query_cache | YES   |</span><br><span class="line">+------------------+-------+</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢æ˜¯å¦å¼€å¯æŸ¥è¯¢ç¼“å­˜ é»˜è®¤å…³é—­</span><br><span class="line">mysql&gt; show variables like &#x27;%query_cache_type%&#x27;;</span><br><span class="line">+------------------+-------+</span><br><span class="line">| Variable_name    | Value |</span><br><span class="line">+------------------+-------+</span><br><span class="line">| query_cache_type | OFF   |</span><br><span class="line">+------------------+-------+</span><br></pre></td></tr></table></figure><ol start="2"><li>å¼€å¯ç¼“å­˜,åœ¨ my.ini ä¸­æ·»åŠ ä¸‹é¢ä¸€è¡Œå‚æ•°</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">query_cache_size=128M</span><br><span class="line">query_cache_type=1</span><br><span class="line"></span><br><span class="line">query_cache_type:</span><br><span class="line">è®¾ç½®ä¸º0ï¼ŒOFF,ç¼“å­˜ç¦ç”¨</span><br><span class="line">è®¾ç½®ä¸º1ï¼ŒON,ç¼“å­˜æ‰€æœ‰çš„ç»“æœ</span><br><span class="line">è®¾ç½®ä¸º2ï¼ŒDENAND,åªç¼“å­˜åœ¨selectè¯­å¥ä¸­é€šè¿‡SQL_CACHEæŒ‡å®šéœ€è¦ç¼“å­˜çš„æŸ¥è¯¢</span><br></pre></td></tr></table></figure><ol start="3"><li>æµ‹è¯•èƒ½å¦ç¼“å­˜æŸ¥è¯¢</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show status like &#x27;%Qcache%&#x27;;</span><br><span class="line">+-------------------------+---------+</span><br><span class="line">| Variable_name           | Value   |</span><br><span class="line">+-------------------------+---------+</span><br><span class="line">| Qcache_free_blocks      | 1       |</span><br><span class="line">| Qcache_free_memory      | 1031832 |</span><br><span class="line">| Qcache_hits             | 0       |</span><br><span class="line">| Qcache_inserts          | 0       |</span><br><span class="line">| Qcache_lowmem_prunes    | 0       |</span><br><span class="line">| Qcache_not_cached       | 1       |</span><br><span class="line">| Qcache_queries_in_cache | 0       |</span><br><span class="line">| Qcache_total_blocks     | 1       |</span><br><span class="line">+-------------------------+---------+</span><br></pre></td></tr></table></figure><ul><li><strong>Qcache_free_blocks</strong>:ç¼“å­˜ä¸­ç›®å‰å‰©ä½™çš„ blocks æ•°é‡ï¼ˆå¦‚æœå€¼è¾ƒå¤§ï¼Œåˆ™æŸ¥è¯¢ç¼“å­˜ä¸­çš„å†…å­˜ç¢ç‰‡è¿‡å¤šï¼‰</li><li><strong>Qcache_free_memory</strong>:ç©ºé—²ç¼“å­˜çš„å†…å­˜å¤§å°</li><li><strong>Qcache_hits</strong>:å‘½ä¸­ç¼“å­˜æ¬¡æ•°</li><li><strong>Qcache_inserts</strong>: æœªå‘½ä¸­ç„¶åè¿›è¡Œæ­£å¸¸æŸ¥è¯¢</li><li><strong>Qcache_lowmem_prunes</strong>:æŸ¥è¯¢å› ä¸ºå†…å­˜ä¸è¶³è€Œè¢«ç§»é™¤å‡ºæŸ¥è¯¢ç¼“å­˜è®°å½•</li><li><strong>Qcache_not_cached</strong>: æ²¡æœ‰è¢«ç¼“å­˜çš„æŸ¥è¯¢æ•°é‡</li><li><strong>Qcache_queries_in_cache</strong>:å½“å‰ç¼“å­˜ä¸­ç¼“å­˜çš„æŸ¥è¯¢æ•°é‡</li><li><strong>Qcache_total_blocks</strong>:å½“å‰ç¼“å­˜çš„blockæ•°é‡</li></ul><p><strong>ä¼˜åŒ–å»ºè®®</strong>: Query Cache çš„ä½¿ç”¨éœ€è¦å¤šä¸ªå‚æ•°é…åˆï¼Œå…¶ä¸­æœ€ä¸ºå…³é”®çš„æ˜¯ query_cache_size å’Œ query_cache_type ï¼Œå‰è€…è®¾ç½®ç”¨äºç¼“å­˜ ResultSet çš„å†…å­˜å¤§å°ï¼Œåè€…è®¾ç½®åœ¨ä½•åœºæ™¯ä¸‹ä½¿ç”¨ Query Cacheã€‚</p><p>MySQL æ•°æ®åº“æ•°æ®å˜åŒ–ç›¸å¯¹ä¸å¤šï¼Œquery_cache_size  ä¸€èˆ¬è®¾ç½®ä¸º 256MB æ¯”è¾ƒåˆé€‚ ,ä¹Ÿå¯ä»¥é€šè¿‡è®¡ç®— Query Cache çš„å‘½ä¸­ç‡æ¥è¿›è¡Œè°ƒæ•´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">( Qcache_hits / ( Qcache_hits + Qcache_inserts ) * 100) )</span><br></pre></td></tr></table></figure><ol start="2"><li>å‚æ•°: innodb_max_dirty_pages_pct è¯¥å‚æ•°æ˜¯ InnoDB å­˜å‚¨å¼•æ“ç”¨æ¥æ§åˆ¶ buffer pool ä¸­è„é¡µçš„ç™¾åˆ†æ¯”ï¼Œå½“è„é¡µæ•°é‡å æ¯”è¶…è¿‡è¿™ä¸ªå‚æ•°è®¾ç½®çš„å€¼æ—¶ï¼ŒInnoDB ä¼šå¯åŠ¨åˆ·è„é¡µçš„æ“ä½œã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- innodb_max_dirty_pages_pct å‚æ•°å¯ä»¥åŠ¨æ€è°ƒæ•´ï¼Œæœ€å°å€¼ä¸º0ï¼Œ æœ€å¤§å€¼ä¸º99.99ï¼Œé»˜è®¤å€¼ä¸º 75ã€‚</span><br><span class="line">mysql&gt; show variables like &#x27;innodb_max_dirty_pages_pct&#x27;;</span><br><span class="line">+----------------------------+-----------+</span><br><span class="line">| Variable_name              | Value     |</span><br><span class="line">+----------------------------+-----------+</span><br><span class="line">| innodb_max_dirty_pages_pct | 75.000000 |</span><br><span class="line">+----------------------------+-----------+</span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–å»ºè®®</strong>: è¯¥å‚æ•°æ¯”ä¾‹å€¼è¶Šå¤§ï¼Œä»å†…å­˜åˆ°ç£ç›˜çš„å†™å…¥æ“ä½œå°±ä¼šç›¸å¯¹å‡å°‘ï¼Œæ‰€ä»¥èƒ½å¤Ÿä¸€å®šç¨‹åº¦ä¸‹å‡å°‘å†™å…¥æ“ä½œçš„ç£ç›˜ IOã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿™ä¸ªæ¯”ä¾‹å€¼è¿‡å¤§ï¼Œå½“æ•°æ®åº“ Crash ä¹‹åé‡å¯çš„æ—¶é—´å¯èƒ½å°±ä¼šå¾ˆé•¿ï¼Œå› ä¸ºä¼šæœ‰å¤§é‡çš„äº‹åŠ¡æ•°æ®éœ€è¦ä»æ—¥å¿—æ–‡ä»¶æ¢å¤å‡ºæ¥å†™å…¥æ•°æ®æ–‡ä»¶ä¸­.æœ€å¤§ä¸å»ºè®®è¶…è¿‡90,ä¸€èˆ¬é‡å¯æ¢å¤çš„æ•°æ®åœ¨è¶…è¿‡ 1G Bçš„è¯,å¯åŠ¨é€Ÿåº¦å°±ä¼šå˜æ…¢.</p><p><strong>3) å‚æ•°: innodb_old_blocks_pct&amp;innodb_old_blocks_time</strong><br>â€‹<code>innodb_old_blocks_pct</code>â€‹ ç”¨æ¥ç¡®å®š LRU é“¾è¡¨ä¸­ old sublist æ‰€å æ¯”ä¾‹,é»˜è®¤å ç”¨ 37%</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;%innodb_old_blocks_pct%&#x27;;</span><br><span class="line">+-----------------------+-------+</span><br><span class="line">| Variable_name         | Value |</span><br><span class="line">+-----------------------+-------+</span><br><span class="line">| innodb_old_blocks_pct | 37    |</span><br><span class="line">+-----------------------+-------+</span><br></pre></td></tr></table></figure><p><code>innodb_old_blocks_time</code>â€‹  ç”¨æ¥æ§åˆ¶ old sublist ä¸­ page çš„è½¬ç§»ç­–ç•¥ï¼Œæ–°çš„ page é¡µåœ¨è¿›å…¥ LRU é“¾è¡¨ä¸­æ—¶ï¼Œä¼šå…ˆæ’å…¥åˆ° old sublist çš„å¤´éƒ¨ï¼Œç„¶å page éœ€è¦åœ¨ old sublist ä¸­åœç•™ innodb_old_blocks_time è¿™ä¹ˆä¹…åï¼Œä¸‹ä¸€æ¬¡å¯¹è¯¥ page çš„è®¿é—®æ‰ä¼šä½¿å…¶ç§»åŠ¨åˆ° new sublist çš„å¤´éƒ¨ï¼Œé»˜è®¤å€¼ 1 ç§’.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;%innodb_old_blocks_time%&#x27;;</span><br><span class="line">+------------------------+-------+</span><br><span class="line">| Variable_name          | Value |</span><br><span class="line">+------------------------+-------+</span><br><span class="line">| innodb_old_blocks_time | 1000  |</span><br><span class="line">+------------------------+-------+</span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–å»ºè®®</strong>: åœ¨æ²¡æœ‰å¤§è¡¨æ‰«æçš„æƒ…å†µä¸‹ï¼Œå¹¶ä¸”æ•°æ®å¤šä¸ºé¢‘ç¹ä½¿ç”¨çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ  innodb_old_blocks_pct çš„å€¼ï¼Œå¹¶ä¸”å‡å°innodb_old_blocks_time çš„å€¼ã€‚è®©æ•°æ®é¡µèƒ½å¤Ÿæ›´å¿«å’Œæ›´å¤šçš„è¿›å…¥çš„çƒ­ç‚¹æ•°æ®åŒºã€‚</p><h3 id="54ã€ä»€ä¹ˆæ˜¯å†™å¤±æ•ˆï¼Ÿ"><a href="#54ã€ä»€ä¹ˆæ˜¯å†™å¤±æ•ˆï¼Ÿ" class="headerlink" title="54ã€ä»€ä¹ˆæ˜¯å†™å¤±æ•ˆï¼Ÿ"></a>54ã€ä»€ä¹ˆæ˜¯å†™å¤±æ•ˆï¼Ÿ</h3><p>InnoDB çš„é¡µå’Œæ“ä½œç³»ç»Ÿçš„é¡µå¤§å°ä¸ä¸€è‡´ï¼ŒInnoDB é¡µå¤§å°ä¸€èˆ¬ä¸º 16Kï¼Œæ“ä½œç³»ç»Ÿé¡µå¤§å°ä¸º 4 Kï¼ŒInnoDB çš„é¡µå†™å…¥åˆ°ç£ç›˜æ—¶ï¼Œä¸€ä¸ªé¡µéœ€è¦åˆ† 4 æ¬¡å†™ã€‚</p><p>å¦‚æœå­˜å‚¨å¼•æ“æ­£åœ¨å†™å…¥é¡µçš„æ•°æ®åˆ°ç£ç›˜æ—¶å‘ç”Ÿäº†å®•æœºï¼Œå¯èƒ½å‡ºç°é¡µåªå†™äº†ä¸€éƒ¨åˆ†çš„æƒ…å†µï¼Œæ¯”å¦‚åªå†™äº† 4 Kï¼Œå°±å®•æœºäº†ï¼Œè¿™ç§æƒ…å†µå«åšéƒ¨åˆ†å†™å¤±æ•ˆï¼ˆpartial page writeï¼‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/1e26c86c28a11d784954f7f9815e5f28645325325.png">â€‹</p><p><strong>åŒå†™ç¼“å†²åŒº Doublewrite Buffer</strong></p><p>ä¸ºäº†è§£å†³å†™å¤±æ•ˆé—®é¢˜ï¼ŒInnoDB å®ç°äº† double write buffer Files, å®ƒä½äºç³»ç»Ÿè¡¨ç©ºé—´ï¼Œæ˜¯ä¸€ä¸ªå­˜å‚¨åŒºåŸŸã€‚</p><p>åœ¨ BufferPool çš„ page é¡µåˆ·æ–°åˆ°ç£ç›˜çœŸæ­£çš„ä½ç½®å‰ï¼Œä¼šå…ˆå°†æ•°æ®å­˜åœ¨ Doublewrite ç¼“å†²åŒºã€‚è¿™æ ·åœ¨å®•æœºé‡å¯æ—¶ï¼Œå¦‚æœå‡ºç°æ•°æ®é¡µæŸåï¼Œé‚£ä¹ˆåœ¨åº”ç”¨ redo log ä¹‹å‰ï¼Œéœ€è¦é€šè¿‡è¯¥é¡µçš„å‰¯æœ¬æ¥è¿˜åŸè¯¥é¡µï¼Œç„¶åå†è¿›è¡Œ redo log é‡åšï¼Œdouble write å®ç°äº† InnoDB å¼•æ“æ•°æ®é¡µçš„å¯é æ€§.</p><p>é»˜è®¤æƒ…å†µä¸‹å¯ç”¨åŒå†™ç¼“å†²åŒºï¼Œå¦‚æœè¦ç¦ç”¨ Doublewrite ç¼“å†²åŒºï¼Œå¯ä»¥å°† <code>innodb_doublewrite</code>â€‹è®¾ç½®ä¸º 0ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%innodb_doublewrite%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name      <span class="operator">|</span> <span class="keyword">Value</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------+</span></span><br><span class="line"><span class="operator">|</span> innodb_doublewrite <span class="operator">|</span> <span class="keyword">ON</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+-------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure><p>æ•°æ®åŒå†™æµç¨‹</p><p><img src="https://i0.hdslb.com/bfs/article/a5fc50b29ff10bdb1dd2fb2a21b758bb645325325.png">â€‹</p><ul><li><strong>step1</strong>ï¼šå½“è¿›è¡Œç¼“å†²æ± ä¸­çš„è„é¡µåˆ·æ–°åˆ°ç£ç›˜çš„æ“ä½œæ—¶,å¹¶ä¸ä¼šç›´æ¥å†™ç£ç›˜,æ¯æ¬¡è„é¡µåˆ·æ–°å¿…é¡»è¦å…ˆå†™ double write .</li><li><strong>step2</strong>ï¼šé€šè¿‡ memcpy å‡½æ•°å°†è„é¡µå¤åˆ¶åˆ°å†…å­˜ä¸­çš„ double write buffer .</li><li><strong>step3</strong>:  double write buffer å†åˆ†ä¸¤æ¬¡ã€æ¯æ¬¡ 1 MB, é¡ºåºå†™å…¥å…±äº«è¡¨ç©ºé—´çš„ç‰©ç†ç£ç›˜ä¸Š, <strong>ç¬¬ä¸€æ¬¡å†™</strong>.</li><li><strong>step4</strong>:  åœ¨å®Œæˆ double write é¡µçš„å†™å…¥åï¼Œå†å°† double wirite buffer ä¸­çš„é¡µå†™å…¥å„ä¸ªè¡¨çš„ **ç‹¬ç«‹è¡¨ç©ºé—´ **æ–‡ä»¶ä¸­(æ•°æ®æ–‡ä»¶ .ibd), <strong>ç¬¬äºŒæ¬¡å†™</strong>ã€‚</li></ul><p><strong>ä¸ºä»€ä¹ˆå†™ä¸¤æ¬¡ ?</strong></p><p>å¯èƒ½æœ‰çš„åŒå­¦ä¼šæœ‰ç–‘é—®ï¼Œä¸ºå•¥å†™ä¸¤æ¬¡ï¼Œåˆ·ä¸€æ¬¡æ•°æ®æ–‡ä»¶ä¿å­˜æ•°æ®ä¸å°±å¯ä»¥äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å†™å…±äº«è¡¨ç©ºé—´ ?å…¶å®æ˜¯å› ä¸ºå…±äº«è¡¨ç©ºé—´æ˜¯åœ¨ibdbata æ–‡ä»¶ä¸­åˆ’å‡º 2 M è¿ç»­çš„ç©ºé—´ï¼Œä¸“é—¨ç»™ double write åˆ·è„é¡µç”¨çš„, ç”±äºåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>double write é¡µçš„å­˜å‚¨æ˜¯è¿ç»­çš„ï¼Œå› æ­¤å†™å…¥ç£ç›˜ä¸ºé¡ºåºå†™ï¼Œæ€§èƒ½å¾ˆé«˜</strong>ï¼›å®Œæˆ double write åï¼Œå†å°†è„é¡µå†™å…¥å®é™…çš„å„ä¸ªè¡¨ç©ºé—´æ–‡ä»¶ï¼Œè¿™æ—¶å†™å…¥å°±æ˜¯ç¦»æ•£çš„äº†.</p><h3 id="55ã€ä»€ä¹ˆæ˜¯è¡Œæº¢å‡ºï¼Ÿ"><a href="#55ã€ä»€ä¹ˆæ˜¯è¡Œæº¢å‡ºï¼Ÿ" class="headerlink" title="55ã€ä»€ä¹ˆæ˜¯è¡Œæº¢å‡ºï¼Ÿ"></a>55ã€ä»€ä¹ˆæ˜¯è¡Œæº¢å‡ºï¼Ÿ</h3><p><strong>è¡Œè®°å½•æ ¼å¼</strong></p><p><strong>1) è¡Œæ ¼å¼åˆ†ç±»</strong></p><p>è¡¨çš„è¡Œæ ¼å¼å†³å®šäº†å®ƒçš„è¡Œæ˜¯å¦‚ä½•ç‰©ç†å­˜å‚¨çš„ï¼Œè¿™åè¿‡æ¥åˆä¼šå½±å“æŸ¥è¯¢å’Œ DML æ“ä½œçš„æ€§èƒ½ã€‚å¦‚æœåœ¨å•ä¸ª page é¡µä¸­å®¹çº³æ›´å¤šè¡Œï¼ŒæŸ¥è¯¢å’Œç´¢å¼•æŸ¥æ‰¾å¯ä»¥æ›´å¿«åœ°å·¥ä½œï¼Œç¼“å†²æ± ä¸­æ‰€éœ€çš„å†…å­˜æ›´å°‘ï¼Œå†™å…¥æ›´æ–°æ—¶æ‰€éœ€çš„ I&#x2F;O æ›´å°‘ã€‚</p><p>InnoDB å­˜å‚¨å¼•æ“æ”¯æŒå››ç§è¡Œæ ¼å¼ï¼šRedundantã€Compactã€Dynamic å’Œ Compressed .</p><p>æŸ¥è¯¢ MySQL ä½¿ç”¨çš„è¡Œæ ¼å¼ï¼Œé»˜è®¤ä¸º: dynamic</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;innodb_default_row_format&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+---------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name             <span class="operator">|</span> <span class="keyword">Value</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+---------+</span></span><br><span class="line"><span class="operator">|</span> innodb_default_row_format <span class="operator">|</span> <span class="keyword">dynamic</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+---------+</span></span><br></pre></td></tr></table></figure><p>æŒ‡å®šè¡Œæ ¼å¼è¯­æ³•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>table_name(column_name)<span class="operator">&gt;</span> ROW_FORMAT<span class="operator">=</span>è¡Œæ ¼å¼åç§°</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span> ROW_FORMAT<span class="operator">=</span>è¡Œæ ¼å¼åç§°</span><br></pre></td></tr></table></figure><p><strong>2) COMPACT è¡Œè®°å½•æ ¼å¼</strong></p><p>Compact è®¾è®¡ç›®æ ‡æ˜¯é«˜æ•ˆåœ°å­˜å‚¨æ•°æ®ï¼Œä¸€ä¸ªé¡µä¸­å­˜æ”¾çš„è¡Œæ•°æ®è¶Šå¤šï¼Œå…¶æ€§èƒ½å°±è¶Šé«˜ã€‚</p><p>Compactè¡Œè®°å½•ç”±ä¸¤éƒ¨åˆ†ç»„æˆ: è®°å½•æ”¾å…¥é¢å¤–ä¿¡æ¯ å’Œ  è®°å½•çš„çœŸå®æ•°æ®.</p><p><img src="https://i0.hdslb.com/bfs/article/2c4f0efaaa93b9222464dc819abde7e3645325325.png">â€‹</p><p><strong>è®°å½•é¢å¤–ä¿¡æ¯éƒ¨åˆ†</strong></p><p>æœåŠ¡å™¨ä¸ºäº†æè¿°ä¸€æ¡è®°å½•è€Œæ·»åŠ äº†ä¸€äº›é¢å¤–ä¿¡æ¯(å…ƒæ•°æ®ä¿¡æ¯)ï¼Œè¿™äº›é¢å¤–ä¿¡æ¯åˆ†ä¸º 3 ç±»ï¼Œåˆ†åˆ«æ˜¯: å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨ã€NULL å€¼åˆ—è¡¨å’Œè®°å½•å¤´ä¿¡æ¯.</p><ul><li><p><strong>å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨</strong></p><p>MySQL æ”¯æŒä¸€äº›å˜é•¿çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚ VARCHAR(M)ã€VARBINARY(M)ã€å„ç§ TEXT ç±»å‹ï¼Œå„ç§ BLOB ç±»å‹ï¼Œè¿™äº›å˜é•¿çš„æ•°æ®ç±»å‹å ç”¨çš„å­˜å‚¨ç©ºé—´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><ol><li>çœŸæ­£çš„æ•°æ®å†…å®¹</li><li>å ç”¨çš„å­—èŠ‚æ•°</li></ol><p>å˜é•¿å­—æ®µçš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œæ‰€ä»¥åœ¨å­˜å‚¨æ•°æ®çš„æ—¶å€™è¦æŠŠè¿™äº›æ•°æ®å ç”¨çš„å­—èŠ‚æ•°ä¹Ÿå­˜èµ·æ¥ï¼Œè¯»å–æ•°æ®çš„æ—¶å€™æ‰èƒ½æ ¹æ®è¿™ä¸ªé•¿åº¦åˆ—è¡¨å»è¯»å–å¯¹åº”é•¿åº¦çš„æ•°æ®ã€‚</p><p>åœ¨ <code>Compact</code>â€‹è¡Œæ ¼å¼ä¸­ï¼ŒæŠŠæ‰€æœ‰å˜é•¿ç±»å‹çš„åˆ—çš„é•¿åº¦éƒ½å­˜æ”¾åœ¨è®°å½•çš„å¼€å¤´éƒ¨ä½å½¢æˆä¸€ä¸ªåˆ—è¡¨ï¼ŒæŒ‰ç…§åˆ—çš„é¡ºåºé€†åºå­˜æ”¾,è¿™ä¸ªåˆ—è¡¨å°±æ˜¯ <strong>å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨</strong>ã€‚</p></li><li><p><strong>NULL å€¼åˆ—è¡¨</strong></p><p>è¡¨ä¸­çš„æŸäº›åˆ—å¯èƒ½ä¼šå­˜å‚¨ NULL å€¼ï¼Œå¦‚æœæŠŠè¿™äº› NULL å€¼éƒ½æ”¾åˆ°è®°å½•çš„çœŸå®æ•°æ®ä¸­ä¼šæ¯”è¾ƒæµªè´¹ç©ºé—´ï¼Œæ‰€ä»¥ Compact è¡Œæ ¼å¼æŠŠè¿™äº›å€¼ä¸º NULL çš„åˆ—å­˜å‚¨åˆ° NULL å€¼åˆ—è¡¨ä¸­ã€‚( å¦‚æœè¡¨ä¸­æ‰€æœ‰åˆ—éƒ½ä¸å…è®¸ä¸º NULLï¼Œå°±ä¸å­˜åœ¨ NULL å€¼åˆ—è¡¨ )</p></li><li><p><strong>è®°å½•å¤´ä¿¡æ¯</strong></p><p>è®°å½•å¤´ä¿¡æ¯æ˜¯ç”±å›ºå®šçš„ 5 ä¸ªå­—èŠ‚ç»„æˆï¼Œ5 ä¸ªå­—èŠ‚ä¹Ÿå°±æ˜¯ 40 ä¸ªäºŒè¿›åˆ¶ä½ï¼Œä¸åŒçš„ä½ä»£è¡¨ä¸åŒçš„æ„æ€ï¼Œè¿™äº›å¤´ä¿¡æ¯ä¼šåœ¨åé¢çš„ä¸€äº›åŠŸèƒ½ä¸­çœ‹åˆ°ã€‚</p><table><thead><tr><th>åç§°</th><th>å¤§å°(å•ä½:bit)</th><th>æè¿°</th></tr></thead><tbody><tr><td>é¢„ç•™ä½1</td><td>1</td><td>æ²¡æœ‰ä½¿ç”¨</td></tr><tr><td>é¢„ç•™ä½2</td><td>1</td><td>æ²¡æœ‰ä½¿ç”¨</td></tr><tr><td>delete_mask</td><td>1</td><td>æ ‡è®°è¯¥è®°å½•æ˜¯å¦è¢«åˆ é™¤</td></tr><tr><td>min_rec_mask</td><td>1</td><td>æ ‡è®°è¯¥è®°å½•æ˜¯å¦æ˜¯æœ¬å±‚ B+ æ ‘çš„éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°è®°å½•</td></tr><tr><td>n_owned</td><td>4</td><td>è¡¨ç¤ºå½“å‰åˆ†ç»„ä¸­ç®¡ç†çš„è®°å½•æ•°</td></tr><tr><td>heap_no</td><td>13</td><td>è¡¨ç¤ºå½“å‰è®°å½•åœ¨è®°å½•å †ä¸­çš„ä½ç½®ä¿¡æ¯</td></tr><tr><td>record_type</td><td>3</td><td>è¡¨ç¤ºå½“å‰è®°å½•çš„ç±»å‹:<br />0 è¡¨ç¤ºæ™®é€šè®°å½•,<br />1 è¡¨ç¤º B+ æ ‘éå¶å­èŠ‚ç‚¹è®°å½•,<br />2 è¡¨ç¤ºæœ€å°è®°å½•,3è¡¨ç¤ºæœ€å¤§è®°å½•</td></tr><tr><td>next_record</td><td>16</td><td>è¡¨ç¤ºä¸‹ä¸€æ¡è®°å½•çš„ç›¸å¯¹ä½ç½®</td></tr></tbody></table><ol><li><p>delete_mask</p><p> è¿™ä¸ªå±æ€§æ ‡è®°ç€å½“å‰è®°å½•æ˜¯å¦è¢«åˆ é™¤ï¼Œå ç”¨ 1 ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå€¼ä¸º 0 çš„æ—¶å€™ä»£è¡¨è®°å½•å¹¶æ²¡æœ‰è¢«åˆ é™¤ï¼Œä¸º 1 çš„æ—¶å€™ä»£è¡¨è®°å½•è¢«åˆ é™¤æ‰äº†</p></li><li><p>min_rec_mask</p><p> B+ æ ‘çš„æ¯å±‚éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°è®°å½•éƒ½ä¼šæ·»åŠ è¯¥æ ‡è®°ã€‚</p></li><li><p>n_owned</p><p> ä»£è¡¨æ¯ä¸ªåˆ†ç»„é‡Œï¼Œæ‰€æ‹¥æœ‰çš„è®°å½•çš„æ•°é‡ï¼Œä¸€èˆ¬æ˜¯åˆ†ç»„é‡Œä¸»é”®æœ€å¤§å€¼æ‰æœ‰çš„ã€‚</p></li><li><p>heap_no</p><p> åœ¨æ•°æ®é¡µçš„ User Records ä¸­æ’å…¥çš„è®°å½•æ˜¯ä¸€æ¡ä¸€æ¡ç´§å‡‘çš„æ’åˆ—çš„ï¼Œè¿™ç§ç´§å‡‘æ’åˆ—çš„ç»“æ„åˆè¢«ç§°ä¸ºå †ã€‚ä¸ºäº†ä¾¿äºç®¡ç†è¿™ä¸ªå †ï¼ŒæŠŠè®°å½•åœ¨å †ä¸­çš„ç›¸å¯¹ä½ç½®ç»™å®šä¸€ä¸ªç¼–å·â€”â€”heap_noã€‚æ‰€ä»¥ heap_no è¿™ä¸ªå±æ€§è¡¨ç¤ºå½“å‰è®°å½•åœ¨æœ¬é¡µä¸­çš„ä½ç½®ã€‚</p></li><li><p>record_type</p><p> è¿™ä¸ªå±æ€§è¡¨ç¤ºå½“å‰è®°å½•çš„ç±»å‹ï¼Œä¸€å…±æœ‰ 4 ç§ç±»å‹çš„è®°å½•ï¼Œ 0 è¡¨ç¤ºæ™®é€šç”¨æˆ·è®°å½•ï¼Œ 1 è¡¨ç¤º B+ æ ‘éå¶èŠ‚ç‚¹è®°å½•ï¼Œ 2 è¡¨ç¤ºæœ€å°è®°å½•ï¼Œ 3 è¡¨ç¤ºæœ€å¤§è®°å½•ã€‚</p></li><li><p>next_record</p><p> è¡¨ç¤ºä»å½“å‰è®°å½•çš„çœŸå®æ•°æ®åˆ°ä¸‹ä¸€æ¡è®°å½•çš„çœŸå®æ•°æ®çš„åœ°å€åç§»é‡ï¼Œå¯ä»¥ç†è§£ä¸ºæŒ‡å‘ä¸‹ä¸€æ¡è®°å½•åœ°å€çš„æŒ‡é’ˆã€‚å€¼ä¸ºæ­£æ•°è¯´æ˜ä¸‹ä¸€æ¡è®°å½•åœ¨å½“å‰è®°å½•åé¢ï¼Œä¸ºè´Ÿæ•°è¯´æ˜ä¸‹ä¸€æ¡è®°å½•åœ¨å½“å‰è®°å½•çš„å‰é¢ã€‚</p></li></ol></li><li><p><strong>è®°å½•çœŸå®æ•°æ®éƒ¨åˆ†</strong></p><p>è®°å½•çš„çœŸå®æ•°æ®é™¤äº†æ’å…¥çš„é‚£äº›åˆ—çš„æ•°æ®ï¼ŒMySQL ä¼šä¸ºæ¯ä¸ªè®°å½•é»˜è®¤çš„æ·»åŠ ä¸€äº›åˆ—ï¼ˆä¹Ÿç§°ä¸ºéšè—åˆ—ï¼‰ï¼Œå…·ä½“çš„åˆ—å¦‚ä¸‹ï¼š&lt;**MVCC ä¸­çš„ä¸‰ä¸ªéšå¼å­—æ®µ**&gt;</p><p><img src="https://i0.hdslb.com/bfs/article/74b4dd3fffdbf61c3ed83b089743901c645325325.png">â€‹</p><table><thead><tr><th>åˆ—å</th><th>æ˜¯å¦å¿…é¡»</th><th>å ç”¨ç©ºé—´</th><th>æè¿°</th></tr></thead><tbody><tr><td>row_id</td><td>å¦</td><td>6å­—èŠ‚</td><td>è¡Œ ID,å”¯ä¸€æ ‡è¯†ä¸€æ¡è®°å½•</td></tr><tr><td>transaction_id</td><td>æ˜¯</td><td>6å­—èŠ‚</td><td>äº‹åŠ¡ ID</td></tr><tr><td>roll_pointer</td><td>æ˜¯</td><td>7å­—èŠ‚</td><td>å›æ»šæŒ‡é’ˆ</td></tr></tbody></table><p>ç”Ÿæˆéšè—ä¸»é”®åˆ—çš„æ–¹å¼æœ‰:</p><ol><li>æœåŠ¡å™¨ä¼šåœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ¯å½“å‘æŸä¸ªåŒ…å«éšè—çš„row_idåˆ—çš„è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•æ—¶ï¼Œå°±ä¼šæŠŠè¯¥å˜é‡çš„å€¼å½“ä½œæ–°è®°å½•çš„row_idåˆ—çš„å€¼ï¼Œå¹¶ä¸”æŠŠè¯¥å˜é‡è‡ªå¢1ã€‚</li><li>æ¯å½“è¿™ä¸ªå˜é‡çš„å€¼ä¸º256çš„å€æ•°æ—¶ï¼Œå°±ä¼šå°†è¯¥å˜é‡çš„å€¼åˆ·æ–°åˆ°ç³»ç»Ÿè¡¨ç©ºé—´çš„é¡µå·ä¸º7çš„é¡µé¢ä¸­ä¸€ä¸ªMax Row IDçš„å±æ€§å¤„ã€‚</li><li>å½“ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œä¼šå°†é¡µä¸­çš„Max Row IDå±æ€§åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¯¥å€¼åŠ ä¸Š256ä¹‹åèµ‹å€¼ç»™å…¨å±€å˜é‡ï¼Œå› ä¸ºåœ¨ä¸Šæ¬¡å…³æœºæ—¶è¯¥å…¨å±€å˜é‡çš„å€¼å¯èƒ½å¤§äºé¡µä¸­Max Row IDå±æ€§å€¼ã€‚  <ol start="4"><li></li></ol></li></ol><p><strong>3) Compact ä¸­çš„è¡Œæº¢å‡ºæœºåˆ¶</strong></p><p><strong>ä»€ä¹ˆæ˜¯è¡Œæº¢å‡º ?</strong></p><p>MySQL ä¸­æ˜¯ä»¥é¡µä¸ºåŸºæœ¬å•ä½,è¿›è¡Œç£ç›˜ä¸å†…å­˜ä¹‹é—´çš„æ•°æ®äº¤äº’çš„,æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªé¡µçš„å¤§å°æ˜¯16 KB,16 KB &#x3D; 16384 å­—èŠ‚.è€Œä¸€ä¸ª varchar(m) ç±»å‹åˆ—æœ€å¤šå¯ä»¥å­˜å‚¨ 65532 ä¸ªå­—èŠ‚,ä¸€äº›å¤§çš„æ•°æ®ç±»å‹æ¯”å¦‚ TEXT å¯ä»¥å­˜å‚¨æ›´å¤š.</p><p>å¦‚æœä¸€ä¸ªè¡¨ä¸­å­˜åœ¨è¿™æ ·çš„å¤§å­—æ®µ,é‚£ä¹ˆä¸€ä¸ªé¡µå°±æ— æ³•å­˜å‚¨ä¸€æ¡å®Œæ•´çš„è®°å½•.è¿™æ—¶å°±ä¼šå‘ç”Ÿè¡Œæº¢å‡º,å¤šå‡ºçš„æ•°æ®å°±ä¼šå­˜å‚¨åœ¨å¦å¤–çš„æº¢å‡ºé¡µä¸­.</p><p>æ€»ç»“: å¦‚æœæŸäº›å­—æ®µä¿¡æ¯è¿‡é•¿ï¼Œæ— æ³•å­˜å‚¨åœ¨Bæ ‘èŠ‚ç‚¹ä¸­ï¼Œè¿™æ—¶å€™ä¼šè¢«å•ç‹¬åˆ†é…ç©ºé—´ï¼Œæ­¤æ—¶è¢«ç§°ä¸ºæº¢å‡ºé¡µï¼Œè¯¥å­—æ®µè¢«ç§°ä¸ºé¡µå¤–åˆ—ã€‚</p><p><strong>Compact ä¸­çš„è¡Œæº¢å‡ºæœºåˆ¶</strong></p><p>InnoDB è§„å®šä¸€é¡µè‡³å°‘å­˜å‚¨ä¸¤æ¡è®°å½•(B+ æ ‘ç‰¹ç‚¹)ï¼Œå¦‚æœé¡µä¸­åªèƒ½å­˜æ”¾ä¸‹ä¸€æ¡è®°å½•ï¼ŒInnoDB å­˜å‚¨å¼•æ“ä¼šè‡ªåŠ¨å°†è¡Œæ•°æ®å­˜æ”¾åˆ°æº¢å‡ºé¡µä¸­.<br>å½“å‘ç”Ÿè¡Œæº¢å‡ºæ—¶ï¼Œæ•°æ®é¡µåªä¿å­˜äº†å‰ 768 å­—èŠ‚çš„å‰ç¼€æ•°æ®ï¼Œæ¥ç€æ˜¯ 20 ä¸ªå­—èŠ‚çš„åç§»é‡ï¼ŒæŒ‡å‘è¡Œæº¢å‡ºé¡µ.</p><p><img src="https://i0.hdslb.com/bfs/article/585c02c4956baea22f0fb09b588371dc645325325.png">â€‹</p></li></ul><h3 id="56ã€å¦‚ä½•è¿›è¡Œ-JOIN-ä¼˜åŒ–ï¼Ÿ"><a href="#56ã€å¦‚ä½•è¿›è¡Œ-JOIN-ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="56ã€å¦‚ä½•è¿›è¡Œ JOIN ä¼˜åŒ–ï¼Ÿ"></a>56ã€å¦‚ä½•è¿›è¡Œ JOIN ä¼˜åŒ–ï¼Ÿ</h3><p>JOIN æ˜¯ MySQL ç”¨æ¥è¿›è¡Œè”è¡¨æ“ä½œçš„ï¼Œç”¨æ¥åŒ¹é…ä¸¤ä¸ªè¡¨çš„æ•°æ®ï¼Œç­›é€‰å¹¶åˆå¹¶å‡ºç¬¦åˆæˆ‘ä»¬è¦æ±‚çš„ç»“æœé›†ã€‚</p><p>JOIN æ“ä½œæœ‰å¤šç§æ–¹å¼ï¼Œå–å†³äºæœ€ç»ˆæ•°æ®çš„åˆå¹¶æ•ˆæœã€‚å¸¸ç”¨è¿æ¥æ–¹å¼çš„æœ‰ä»¥ä¸‹å‡ ç§:</p><p><img src="https://i0.hdslb.com/bfs/article/57e6fb4af9da80ba974e65f4f3aff6bf645325325.png">â€‹</p><p>ä»€ä¹ˆæ˜¯é©±åŠ¨è¡¨ ?</p><ul><li>å¤šè¡¨å…³è”æŸ¥è¯¢æ—¶,ç¬¬ä¸€ä¸ªè¢«å¤„ç†çš„è¡¨å°±æ˜¯é©±åŠ¨è¡¨,ä½¿ç”¨é©±åŠ¨è¡¨å»å…³è”å…¶ä»–è¡¨.</li><li>é©±åŠ¨è¡¨çš„ç¡®å®šéå¸¸çš„å…³é”®,ä¼šç›´æ¥å½±å“å¤šè¡¨å…³è”çš„é¡ºåº,ä¹Ÿå†³å®šåç»­å…³è”æŸ¥è¯¢çš„æ€§èƒ½</li></ul><p>é©±åŠ¨è¡¨çš„é€‰æ‹©è¦éµå¾ªä¸€ä¸ªè§„åˆ™:</p><ul><li>åœ¨å¯¹æœ€ç»ˆçš„ç»“æœé›†æ²¡æœ‰å½±å“çš„å‰æä¸‹,ä¼˜å…ˆé€‰æ‹©ç»“æœé›†æœ€å°çš„é‚£å¼ è¡¨ä½œä¸ºé©±åŠ¨è¡¨</li></ul><p><strong>3) ä¸‰ç§ JOINç®—æ³•</strong></p><p>1.Simple Nested-Loop Joinï¼ˆ ç®€å•çš„åµŒå¥—å¾ªç¯è¿æ¥ )</p><ul><li><p><strong>ç®€å•æ¥è¯´åµŒå¥—å¾ªç¯è¿æ¥ç®—æ³•å°±æ˜¯ä¸€ä¸ªåŒå±‚for å¾ªç¯ ï¼Œé€šè¿‡å¾ªç¯å¤–å±‚è¡¨çš„è¡Œæ•°æ®ï¼Œé€ä¸ªä¸å†…å±‚è¡¨çš„æ‰€æœ‰è¡Œæ•°æ®è¿›è¡Œæ¯”è¾ƒæ¥è·å–ç»“æœ.</strong></p></li><li><p><strong>è¿™ç§ç®—æ³•æ˜¯æœ€ç®€å•çš„æ–¹æ¡ˆï¼Œæ€§èƒ½ä¹Ÿä¸€èˆ¬ã€‚å¯¹å†…å¾ªç¯æ²¡ä¼˜åŒ–ã€‚</strong></p></li><li><p><strong>ä¾‹å¦‚æœ‰è¿™æ ·ä¸€æ¡SQL:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- è¿æ¥ç”¨æˆ·è¡¨ä¸è®¢å•è¡¨ è¿æ¥æ¡ä»¶æ˜¯ u.id = o.user_id</span><br><span class="line">select * from user t1 left join order t2 on t1.id = t2.user_id;</span><br><span class="line">-- userè¡¨ä¸ºé©±åŠ¨è¡¨,orderè¡¨ä¸ºè¢«é©±åŠ¨è¡¨</span><br></pre></td></tr></table></figure></li><li><p>è½¬æ¢æˆä»£ç æ‰§è¡Œæ—¶çš„æ€è·¯æ˜¯è¿™æ ·çš„:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for(userè¡¨è¡Œ uRow : userè¡¨)&#123;</span><br><span class="line">    for(Orderè¡¨çš„è¡Œ oRow : orderè¡¨)&#123;</span><br><span class="line">        if(uRow.id = oRow.user_id)&#123;</span><br><span class="line">            return uRow;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>åŒ¹é…è¿‡ç¨‹å¦‚ä¸‹å›¾</strong></p><p><img src="https://i0.hdslb.com/bfs/article/e4842829badfa87c1d66033140877b50645325325.png">â€‹</p></li><li><p><strong>SNL çš„ç‰¹ç‚¹</strong></p><ul><li><p><strong>ç®€å•ç²—æš´å®¹æ˜“ç†è§£ï¼Œå°±æ˜¯é€šè¿‡åŒå±‚å¾ªç¯æ¯”è¾ƒæ•°æ®æ¥è·å¾—ç»“æœ</strong></p></li><li><p><strong>æŸ¥è¯¢æ•ˆç‡ä¼šéå¸¸æ…¢,å‡è®¾ A è¡¨æœ‰ N è¡Œï¼ŒB è¡¨æœ‰ M è¡Œã€‚SNL çš„å¼€é”€å¦‚ä¸‹ï¼š</strong></p><ul><li><strong>A è¡¨æ‰«æ 1 æ¬¡ã€‚</strong></li><li><strong>B è¡¨æ‰«æ M æ¬¡ã€‚</strong></li><li><strong>ä¸€å…±æœ‰ N ä¸ªå†…å¾ªç¯ï¼Œæ¯ä¸ªå†…å¾ªç¯è¦ M æ¬¡ï¼Œä¸€å…±æœ‰å†…å¾ªç¯ N * M æ¬¡</strong></li></ul></li></ul></li></ul><p><strong>2) Index Nested-Loop Joinï¼ˆ ç´¢å¼•åµŒå¥—å¾ªç¯è¿æ¥ ï¼‰</strong></p><ul><li><p>Index Nested-Loop Join å…¶ä¼˜åŒ–çš„æ€è·¯:  <strong>ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘å†…å±‚è¡¨æ•°æ®çš„åŒ¹é…æ¬¡æ•°</strong> , æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œç”¨æ¥è¿›è¡Œ join çš„å­—æ®µå·²ç»åœ¨è¢«é©±åŠ¨è¡¨ä¸­å»ºç«‹äº†ç´¢å¼•ã€‚</p></li><li><p>ä»åŸæ¥çš„  <code>åŒ¹é…æ¬¡æ•° = å¤–å±‚è¡¨è¡Œæ•° * å†…å±‚è¡¨è¡Œæ•°</code>â€‹ , å˜æˆäº†  <code>åŒ¹é…æ¬¡æ•° = å¤–å±‚è¡¨çš„è¡Œæ•° * å†…å±‚è¡¨ç´¢å¼•çš„é«˜åº¦</code>â€‹  ï¼Œæå¤§çš„æå‡äº† joinçš„æ€§èƒ½ã€‚</p></li><li><p>å½“ <code>order</code>â€‹  è¡¨çš„   <code>user_id</code>â€‹  ä¸ºç´¢å¼•çš„æ—¶å€™æ‰§è¡Œè¿‡ç¨‹ä¼šå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/eed9a432fb1471f93746efa8941722e8645325325.png">â€‹</p></li></ul><p><strong>æ³¨æ„ï¼šä½¿ç”¨Index Nested-Loop Join ç®—æ³•çš„å‰ææ˜¯åŒ¹é…çš„å­—æ®µå¿…é¡»å»ºç«‹äº†ç´¢å¼•ã€‚</strong></p><p><strong>3) Block Nested-Loop Join( å—åµŒå¥—å¾ªç¯è¿æ¥ )</strong></p><p>å¦‚æœ join çš„å­—æ®µæœ‰ç´¢å¼•ï¼ŒMySQL ä¼šä½¿ç”¨ INL ç®—æ³•ã€‚å¦‚æœæ²¡æœ‰çš„è¯ï¼ŒMySQL ä¼šå¦‚ä½•å¤„ç†ï¼Ÿ</p><p>å› ä¸ºä¸å­˜åœ¨ç´¢å¼•äº†ï¼Œæ‰€ä»¥è¢«é©±åŠ¨è¡¨éœ€è¦è¿›è¡Œæ‰«æã€‚è¿™é‡Œ MySQL å¹¶ä¸ä¼šç®€å•ç²—æš´çš„åº”ç”¨ SNL ç®—æ³•ï¼Œè€Œæ˜¯åŠ å…¥äº† buffer ç¼“å†²åŒºï¼Œé™ä½äº†å†…å¾ªç¯çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¢«é©±åŠ¨è¡¨çš„æ‰«ææ¬¡æ•°ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/04bdcb43c34dc4d7d49471108f45bc67645325325.png">â€‹</p><ul><li><p>åœ¨å¤–å±‚å¾ªç¯æ‰«æ userè¡¨ä¸­çš„æ‰€æœ‰è®°å½•ã€‚æ‰«æçš„æ—¶å€™ï¼Œä¼šæŠŠéœ€è¦è¿›è¡Œ join ç”¨åˆ°çš„åˆ—éƒ½ç¼“å­˜åˆ° buffer ä¸­ã€‚buffer ä¸­çš„æ•°æ®æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œé‡Œé¢çš„è®°å½•ä¸éœ€è¦ä¸€æ¡ä¸€æ¡åœ°å–å‡ºæ¥å’Œ order è¡¨è¿›è¡Œæ¯”è¾ƒï¼Œè€Œæ˜¯æ•´ä¸ª buffer å’Œ orderè¡¨è¿›è¡Œæ‰¹é‡æ¯”è¾ƒã€‚</p></li><li><p>å¦‚æœæˆ‘ä»¬æŠŠ buffer çš„ç©ºé—´å¼€å¾—å¾ˆå¤§ï¼Œå¯ä»¥å®¹çº³ä¸‹ user è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œé‚£ä¹ˆ order è¡¨ä¹Ÿåªéœ€è¦è®¿é—®ä¸€æ¬¡ã€‚</p></li><li><p>MySQL é»˜è®¤ buffer å¤§å° 256Kï¼Œå¦‚æœæœ‰ n ä¸ª join æ“ä½œï¼Œä¼šç”Ÿæˆ n-1 ä¸ª join bufferã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;%join_buffer%&#x27;;</span><br><span class="line">+------------------+--------+</span><br><span class="line">| Variable_name    | Value  |</span><br><span class="line">+------------------+--------+</span><br><span class="line">| join_buffer_size | 262144 |</span><br><span class="line">+------------------+--------+</span><br><span class="line"></span><br><span class="line">mysql&gt; set session join_buffer_size=262144;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></li></ul><p><strong>4) JOIN ä¼˜åŒ–æ€»ç»“</strong></p><ol><li>æ°¸è¿œç”¨å°ç»“æœé›†é©±åŠ¨å¤§ç»“æœé›†(å…¶æœ¬è´¨å°±æ˜¯å‡å°‘å¤–å±‚å¾ªç¯çš„æ•°æ®æ•°é‡)</li><li>ä¸ºåŒ¹é…çš„æ¡ä»¶å¢åŠ ç´¢å¼•(å‡å°‘å†…å±‚è¡¨çš„å¾ªç¯åŒ¹é…æ¬¡æ•°)</li><li>å¢å¤§ join buffer size çš„å¤§å°ï¼ˆä¸€æ¬¡ç¼“å­˜çš„æ•°æ®è¶Šå¤šï¼Œé‚£ä¹ˆå†…å±‚åŒ…çš„æ‰«è¡¨æ¬¡æ•°å°±è¶Šå°‘ï¼‰</li><li>å‡å°‘ä¸å¿…è¦çš„å­—æ®µæŸ¥è¯¢ï¼ˆå­—æ®µè¶Šå°‘ï¼Œjoin buffer æ‰€ç¼“å­˜çš„æ•°æ®å°±è¶Šå¤š</li></ol><h3 id="57ã€ç´¢å¼•å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ"><a href="#57ã€ç´¢å¼•å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ" class="headerlink" title="57ã€ç´¢å¼•å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ"></a>57ã€ç´¢å¼•å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ</h3><ol><li>æŸ¥è¯¢æ¡ä»¶åŒ…å« orï¼Œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</li><li>éšå¼ç±»å‹è½¬æ¢ï¼Œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œä¾‹å¦‚ age å­—æ®µç±»å‹æ˜¯ intï¼Œæˆ‘ä»¬ where age &#x3D; â€œ1â€ï¼Œè¿™æ ·å°±ä¼šè§¦å‘éšå¼ç±»å‹è½¬æ¢</li><li>like é€šé…ç¬¦ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œæ³¨æ„:â€ABC%â€ ä¸ä¼šå¤±æ•ˆï¼Œä¼šèµ° range ç´¢å¼•ï¼Œâ€% ABCâ€ ç´¢å¼•ä¼šå¤±æ•ˆ</li><li>è”åˆç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶çš„æ¡ä»¶åˆ—ä¸æ˜¯è”åˆç´¢å¼•ä¸­çš„ç¬¬ä¸€ä¸ªåˆ—ï¼Œç´¢å¼•å¤±æ•ˆã€‚</li><li>å¯¹ç´¢å¼•å­—æ®µè¿›è¡Œå‡½æ•°è¿ç®—ã€‚</li><li>å¯¹ç´¢å¼•åˆ—è¿ç®—ï¼ˆå¦‚ï¼Œ+ã€-ã€*ã€&#x2F;ï¼‰ï¼Œç´¢å¼•å¤±æ•ˆã€‚</li><li>ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨ï¼ˆ!&#x3D; æˆ–è€… &lt; &gt;ï¼Œnot inï¼‰æ—¶ï¼Œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</li><li>ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨ is nullï¼Œ is not nullï¼Œå¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</li><li>ç›¸ join çš„ä¸¤ä¸ªè¡¨çš„å­—ç¬¦ç¼–ç ä¸åŒï¼Œä¸èƒ½å‘½ä¸­ç´¢å¼•ï¼Œä¼šå¯¼è‡´ç¬›å¡å°”ç§¯çš„å¾ªç¯è®¡ç®—</li><li>mysql ä¼°è®¡ä½¿ç”¨å…¨è¡¨æ‰«æè¦æ¯”ä½¿ç”¨ç´¢å¼•å¿«ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚</li></ol><h3 id="58ã€ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ"><a href="#58ã€ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ" class="headerlink" title="58ã€ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ"></a>58ã€ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ</h3><p><strong>è¦†ç›–ç´¢å¼•æ˜¯ä¸€ç§é¿å…å›è¡¨æŸ¥è¯¢çš„ä¼˜åŒ–ç­–ç•¥:  åªéœ€è¦åœ¨ä¸€æ£µç´¢å¼•æ ‘ä¸Šå°±èƒ½è·å– SQL æ‰€éœ€çš„æ‰€æœ‰åˆ—æ•°æ®ï¼Œæ— éœ€å›è¡¨ï¼Œé€Ÿåº¦æ›´å¿«ã€‚</strong></p><p>å…·ä½“çš„å®ç°æ–¹å¼:</p><ul><li><em>å°†è¢«æŸ¥è¯¢çš„å­—æ®µå»ºç«‹æ™®é€šç´¢å¼•æˆ–è€…è”åˆç´¢å¼•</em>ï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥ç›´æ¥è¿”å›ç´¢å¼•ä¸­çš„çš„æ•°æ®ï¼Œä¸éœ€è¦å†é€šè¿‡èšé›†ç´¢å¼•å»å®šä½è¡Œè®°å½•ï¼Œé¿å…äº†å›è¡¨çš„æƒ…å†µå‘ç”Ÿã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT user_name,user_age,user_level FROM users </span><br><span class="line">WHERE user_name = &#x27;tom&#x27; AND user_age = 17;</span><br></pre></td></tr></table></figure><p><img src="https://i0.hdslb.com/bfs/article/799c724170fcbb356e816435aa8c8828645325325.png">â€‹</p><p>è¦†ç›–ç´¢å¼•çš„å®šä¹‰ä¸æ³¨æ„äº‹é¡¹:</p><ul><li>å¦‚æœä¸€ä¸ªç´¢å¼•åŒ…å«äº† æ‰€æœ‰éœ€è¦æŸ¥è¯¢çš„å­—æ®µçš„å€¼ (ä¸éœ€è¦å›è¡¨)ï¼Œè¿™ä¸ªç´¢å¼•å°±æ˜¯è¦†ç›–ç´¢å¼•ã€‚</li><li>MySQL åªèƒ½ä½¿ç”¨ B+Tree ç´¢å¼•åšè¦†ç›–ç´¢å¼• (å› ä¸ºåªæœ‰ B+ æ ‘èƒ½å­˜å‚¨ç´¢å¼•åˆ—å€¼)</li><li>åœ¨ explain çš„ Extra åˆ—, å¦‚æœå‡ºç° <code>Using index</code>â€‹  è¡¨ç¤º ä½¿ç”¨åˆ°äº†è¦†ç›–ç´¢å¼• , æ‰€å–çš„æ•°æ®å®Œå…¨åœ¨ç´¢å¼•ä¸­å°±èƒ½æ‹¿åˆ°</li></ul><h3 id="59ã€ä»‹ç»ä¸€ä¸‹-MySQL-ä¸­äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ"><a href="#59ã€ä»‹ç»ä¸€ä¸‹-MySQL-ä¸­äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ" class="headerlink" title="59ã€ä»‹ç»ä¸€ä¸‹ MySQL ä¸­äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ"></a>59ã€ä»‹ç»ä¸€ä¸‹ MySQL ä¸­äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ</h3><p>åœ¨å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªé€»è¾‘å·¥ä½œå•å…ƒè¦æˆä¸ºäº‹åŠ¡ï¼Œå¿…é¡»æ»¡è¶³è¿™ 4 ä¸ªç‰¹æ€§ï¼Œå³æ‰€è°“çš„ ACIDï¼šåŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰å’ŒæŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚</p><p>1ï¼‰åŸå­æ€§</p><p>åŸå­æ€§ï¼šäº‹åŠ¡ä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«æ‰§è¡Œï¼ŒåŒ…å«åœ¨å…¶ä¸­çš„å¯¹æ•°æ®åº“çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨è¢«æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚</p><p>InnoDB å­˜å‚¨å¼•æ“æä¾›äº†ä¸¤ç§äº‹åŠ¡æ—¥å¿—ï¼šredo log(é‡åšæ—¥å¿—)å’Œundo log(å›æ»šæ—¥å¿—)ã€‚å…¶ä¸­ redo log ç”¨äºä¿è¯äº‹åŠ¡æŒä¹…æ€§ï¼›undo log åˆ™æ˜¯äº‹åŠ¡åŸå­æ€§å’Œéš”ç¦»æ€§å®ç°çš„åŸºç¡€ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/e90097274567143910680b4f9c99933e645325325.png">â€‹</p><p>æ¯å†™ä¸€ä¸ªäº‹åŠ¡,éƒ½ä¼šä¿®æ”¹ Buffer Pool,ä»è€Œäº§ç”Ÿç›¸åº”çš„ Redo&#x2F;Undoæ—¥å¿—:</p><ul><li>å¦‚æœè¦å›æ»šäº‹åŠ¡ï¼Œé‚£ä¹ˆå°±åŸºäº undo log æ¥å›æ»šå°±å¯ä»¥äº†ï¼ŒæŠŠä¹‹å‰å¯¹ç¼“å­˜é¡µåšçš„ä¿®æ”¹éƒ½ç»™å›æ»šäº†å°±å¯ä»¥äº†ã€‚</li><li>å¦‚æœäº‹åŠ¡æäº¤ä¹‹åï¼Œredo log åˆ·å…¥ç£ç›˜ï¼Œç»“æœ MySQL å®•æœºäº†ï¼Œæ˜¯å¯ä»¥æ ¹æ® redo log æ¢å¤äº‹åŠ¡ä¿®æ”¹è¿‡çš„ç¼“å­˜æ•°æ®çš„ã€‚</li></ul><p>å®ç°åŸå­æ€§çš„å…³é”®ï¼Œæ˜¯å½“äº‹åŠ¡å›æ»šæ—¶èƒ½å¤Ÿæ’¤é”€æ‰€æœ‰å·²ç»æˆåŠŸæ‰§è¡Œçš„sqlè¯­å¥ã€‚</p><p>InnoDB å®ç°å›æ»šï¼Œé çš„æ˜¯ undo log ï¼šå½“äº‹åŠ¡å¯¹æ•°æ®åº“è¿›è¡Œä¿®æ”¹æ—¶ï¼ŒInnoDB ä¼šç”Ÿæˆå¯¹åº”çš„ undo log  ï¼›å¦‚æœäº‹åŠ¡æ‰§è¡Œå¤±è´¥æˆ–è°ƒç”¨äº†rollback ï¼Œå¯¼è‡´äº‹åŠ¡éœ€è¦å›æ»šï¼Œä¾¿å¯ä»¥åˆ©ç”¨ undo log ä¸­çš„ä¿¡æ¯å°†æ•°æ®å›æ»šåˆ°ä¿®æ”¹ä¹‹å‰çš„æ ·å­ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/392c4f9425992397df19f25b7e041716645325325.png">â€‹</p><p>2ï¼‰ä¸€è‡´æ€§</p><p>ä¸€è‡´æ€§ï¼šäº‹åŠ¡åº”ç¡®ä¿æ•°æ®åº“çš„çŠ¶æ€ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€è½¬å˜ä¸ºå¦ä¸€ä¸ªä¸€è‡´çŠ¶æ€ã€‚<em>ä¸€è‡´çŠ¶æ€</em>çš„å«ä¹‰æ˜¯æ•°æ®åº“ä¸­çš„æ•°æ®åº”æ»¡è¶³å®Œæ•´æ€§çº¦æŸã€‚</p><ul><li>çº¦æŸä¸€è‡´æ€§ï¼šåˆ›å»ºè¡¨ç»“æ„æ—¶æ‰€æŒ‡å®šçš„å¤–é”®ã€å”¯ä¸€ç´¢å¼•ç­‰çº¦æŸã€‚</li><li>æ•°æ®ä¸€è‡´æ€§ï¼šæ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„è§„å®šï¼Œå› ä¸ºå®ƒæ˜¯ç”±åŸå­æ€§ã€æŒä¹…æ€§ã€éš”ç¦»æ€§å…±åŒä¿è¯çš„ç»“æœï¼Œè€Œä¸æ˜¯å•å•ä¾èµ–äºæŸä¸€ç§æŠ€æœ¯ã€‚</li></ul><p><img src="https://i0.hdslb.com/bfs/article/1afe1926be86e503132b5e9053939c70645325325.png">â€‹</p><p>3ï¼‰éš”ç¦»æ€§</p><p>éš”ç¦»æ€§ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹å…¶ä»–çš„å¹¶å‘äº‹åŠ¡æ˜¯éš”ç¦»çš„ã€‚</p><p>ä¸è€ƒè™‘éš”ç¦»æ€§ä¼šå¼•å‘çš„é—®é¢˜:</p><ul><li><strong>è„è¯»</strong> : ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹ä½†æœªæäº¤çš„æ•°æ®ã€‚</li><li><strong>ä¸å¯é‡å¤è¯»</strong>: ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€è¡Œè®°å½•çš„ç»“æœä¸ä¸€è‡´ï¼Œåé¢è¯»å–çš„è·Ÿå‰é¢è¯»å–çš„ç»“æœä¸ä¸€è‡´ã€‚</li><li><strong>å¹»è¯»</strong> : ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡æŒ‰ç›¸åŒæ¡ä»¶æŸ¥è¯¢ï¼Œç»“æœä¸ä¸€è‡´ã€‚åç»­æŸ¥è¯¢çš„ç»“æœå’Œé¢å‰æŸ¥è¯¢ç»“æœä¸åŒï¼Œå¤šäº†æˆ–å°‘äº†å‡ è¡Œè®°å½•ã€‚</li></ul><p>æ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰ 4 ä¸ªï¼Œç”±ä½åˆ°é«˜ä¾æ¬¡ä¸ºRead uncommitted ã€Read committedã€Repeatable read ã€Serializable ï¼Œè¿™å››ä¸ªçº§åˆ«å¯ä»¥é€ä¸ªè§£å†³è„è¯» ã€ä¸å¯é‡å¤è¯» ã€å¹»è¯» è¿™å‡ ç±»é—®é¢˜ã€‚</p><p>4ï¼‰æŒä¹…æ€§</p><p>æŒä¹…æ€§ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ï¼Œåç»­çš„æ“ä½œæˆ–æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ï¼Œä¸ä¼šä¸¢å¤±ã€‚</p><p>MySQL äº‹åŠ¡çš„æŒä¹…æ€§ä¿è¯ä¾èµ–çš„æ—¥å¿—æ–‡ä»¶: <code>redo log</code>â€‹</p><ul><li>redo log ä¹ŸåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šä¸€æ˜¯å†…å­˜ä¸­çš„æ—¥å¿—ç¼“å†²(redo log buffer)ï¼Œè¯¥éƒ¨åˆ†æ—¥å¿—æ˜¯æ˜“å¤±æ€§çš„ï¼›äºŒæ˜¯ç£ç›˜ä¸Šçš„é‡åšæ—¥å¿—æ–‡ä»¶(redo log file)ï¼Œè¯¥éƒ¨åˆ†æ—¥å¿—æ˜¯æŒä¹…çš„ã€‚redo log æ˜¯ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ•°æ®åº“ä¸­ç‰©ç†é¡µçš„æƒ…å†µ ã€‚</li><li>å½“æ•°æ®å‘ç”Ÿä¿®æ”¹æ—¶ï¼ŒInnoDB ä¸ä»…ä¼šä¿®æ”¹ Buffer Pool ä¸­çš„æ•°æ®ï¼Œä¹Ÿä¼šåœ¨ redo log buffer è®°å½•è¿™æ¬¡æ“ä½œï¼›å½“äº‹åŠ¡æäº¤æ—¶ï¼Œä¼šå¯¹ redo log buffer è¿›è¡Œåˆ·ç›˜ï¼Œè®°å½•åˆ° redo log file ä¸­ã€‚å¦‚æœ MySQL å®•æœºï¼Œé‡å¯æ—¶å¯ä»¥è¯»å– redo log file ä¸­çš„æ•°æ®ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œæ¢å¤ã€‚è¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡æäº¤äº‹åŠ¡éƒ½å®æ—¶è¿›è¡Œåˆ·è„äº†ã€‚</li></ul><p><img src="https://i0.hdslb.com/bfs/article/61aead67ddbea6b72d23b9e3f46a1021645325325.png">â€‹</p><p>5ï¼‰ACID æ€»ç»“</p><ul><li>äº‹åŠ¡çš„æŒä¹…åŒ–æ˜¯ä¸ºäº†åº”å¯¹ç³»ç»Ÿå´©æºƒé€ æˆçš„æ•°æ®ä¸¢å¤±.</li><li>åªæœ‰ä¿è¯äº†äº‹åŠ¡çš„ä¸€è‡´æ€§ï¼Œæ‰èƒ½ä¿è¯æ‰§è¡Œç»“æœçš„æ­£ç¡®æ€§</li><li>åœ¨éå¹¶å‘çŠ¶æ€ä¸‹ï¼Œäº‹åŠ¡é—´å¤©ç„¶ä¿è¯éš”ç¦»æ€§ï¼Œå› æ­¤åªéœ€è¦ä¿è¯äº‹åŠ¡çš„åŸå­æ€§å³å¯ä¿è¯ä¸€è‡´æ€§.</li><li>åœ¨å¹¶å‘çŠ¶æ€ä¸‹ï¼Œéœ€è¦ä¸¥æ ¼ä¿è¯äº‹åŠ¡çš„åŸå­æ€§ã€éš”ç¦»æ€§ã€‚</li></ul><p><img src="https://i0.hdslb.com/bfs/article/1b3f7c56b6dbaa73d18d3d11c14d3523645325325.png">â€‹</p><h3 id="60ã€MySQL-çš„å¯é‡å¤è¯»æ€ä¹ˆå®ç°çš„ï¼Ÿ"><a href="#60ã€MySQL-çš„å¯é‡å¤è¯»æ€ä¹ˆå®ç°çš„ï¼Ÿ" class="headerlink" title="60ã€MySQL çš„å¯é‡å¤è¯»æ€ä¹ˆå®ç°çš„ï¼Ÿ"></a>60ã€MySQL çš„å¯é‡å¤è¯»æ€ä¹ˆå®ç°çš„ï¼Ÿ</h3><p>å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å®šä¹‰ï¼š ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹åŠ¡åœ¨å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚</p><p>MVCC</p><ul><li>MVCCï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶, ç”¨äºå®ç°<strong>è¯»å·²æäº¤</strong>å’Œ<strong>å¯é‡å¤è¯»</strong>éš”ç¦»çº§åˆ«ã€‚</li><li>MVCC çš„æ ¸å¿ƒå°±æ˜¯ Undo log å¤šç‰ˆæœ¬é“¾ + Read viewï¼Œâ€œMVâ€å°±æ˜¯é€šè¿‡ Undo logæ¥ä¿å­˜æ•°æ®çš„å†å²ç‰ˆæœ¬ï¼Œå®ç°å¤šç‰ˆæœ¬çš„ç®¡ç†ï¼Œâ€œCCâ€æ˜¯é€šè¿‡ Read-viewæ¥å®ç°ç®¡ç†ï¼Œé€šè¿‡ Read-viewåŸåˆ™æ¥å†³å®šæ•°æ®æ˜¯å¦æ˜¾ç¤ºã€‚åŒæ—¶é’ˆå¯¹ä¸åŒçš„éš”ç¦»çº§åˆ«ï¼Œ Read view çš„ç”Ÿæˆç­–ç•¥ä¸åŒï¼Œä¹Ÿå°±å®ç°äº†ä¸åŒçš„éš”ç¦»çº§åˆ«ã€‚</li></ul><p><strong>Undo log å¤šç‰ˆæœ¬é“¾</strong></p><p>æ¯æ¡æ•°æ®éƒ½æœ‰ä¸‰ä¸ªéšè—å­—æ®µ:</p><table><thead><tr><th>åˆ—å</th><th>æ˜¯å¦å¿…é¡»</th><th>å ç”¨ç©ºé—´</th><th>æè¿°</th></tr></thead><tbody><tr><td>row_id</td><td>å¦</td><td>6å­—èŠ‚</td><td>è¡Œ ID,å”¯ä¸€æ ‡è¯†ä¸€æ¡è®°å½•</td></tr><tr><td>transaction_id</td><td>æ˜¯</td><td>6å­—èŠ‚</td><td>äº‹åŠ¡ IDï¼Œè®°å½•æœ€è¿‘ä¸€æ¬¡æ›´æ–°è¿™æ¡æ•°æ®çš„äº‹åŠ¡id</td></tr><tr><td>roll_pointer</td><td>æ˜¯</td><td>7å­—èŠ‚</td><td>å›æ»šæŒ‡é’ˆï¼ŒæŒ‡å‘ä¹‹å‰ç”Ÿæˆçš„ undo log</td></tr></tbody></table><p><img src="https://i0.hdslb.com/bfs/article/c3961f27cb6a5c113f7521268067f332645325325.png">â€‹</p><p>æ¯ä¸€æ¡æ•°æ®éƒ½æœ‰å¤šä¸ªç‰ˆæœ¬,ç‰ˆæœ¬ä¹‹é—´é€šè¿‡ undo log é“¾æ¡è¿›è¡Œè¿æ¥é€šè¿‡è¿™æ ·çš„è®¾è®¡æ–¹å¼ï¼Œå¯ä»¥ä¿è¯æ¯ä¸ªäº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œä¸€æ—¦éœ€è¦å›æ»šæ“ä½œ,å¯ä»¥ä¿è¯åŒä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»å–åˆ°æ¯”å½“å‰ç‰ˆæœ¬æ›´æ—©æäº¤çš„å€¼,ä¸èƒ½çœ‹åˆ°æ›´æ™šæäº¤çš„å€¼ã€‚</p><p><strong>ReadView</strong></p><p>Read Viewæ˜¯ InnoDB åœ¨å®ç° MVCC æ—¶ç”¨åˆ°çš„ä¸€è‡´æ€§è¯»è§†å›¾ï¼Œå³ consistent read viewï¼Œç”¨äºæ”¯æŒ RCï¼ˆRead Committedï¼Œè¯»æäº¤ï¼‰å’Œ RRï¼ˆRepeatable Readï¼Œå¯é‡å¤è¯»ï¼‰éš”ç¦»çº§åˆ«çš„å®ç°.</p><p>Read Viewç®€å•ç†è§£å°±æ˜¯å¯¹æ•°æ®åœ¨æŸä¸ªæ—¶åˆ»çš„çŠ¶æ€æ‹æˆç…§ç‰‡è®°å½•ä¸‹æ¥ã€‚é‚£ä¹ˆä¹‹åè·å–æŸæ—¶åˆ»çš„æ•°æ®æ—¶å°±è¿˜æ˜¯åŸæ¥çš„ç…§ç‰‡ä¸Šçš„æ•°æ®ï¼Œæ˜¯ä¸ä¼šå˜çš„.</p><p>Read Viewä¸­æ¯”è¾ƒé‡è¦çš„å­—æ®µæœ‰4ä¸ª:</p><ul><li><code>m_ids</code>â€‹ : ç”¨æ¥è¡¨ç¤ºMySQLä¸­å“ªäº›äº‹åŠ¡æ­£åœ¨æ‰§è¡Œ,ä½†æ˜¯æ²¡æœ‰æäº¤.</li><li><code>min_trx_id</code>: å°±æ˜¯m_idsé‡Œæœ€å°çš„å€¼.</li><li><code>max_trx_id</code>â€‹ : ä¸‹ä¸€ä¸ªè¦ç”Ÿæˆçš„äº‹åŠ¡idå€¼,ä¹Ÿå°±æ˜¯æœ€å¤§äº‹åŠ¡id</li><li><code>creator_trx_id</code>: å°±æ˜¯ä½ è¿™ä¸ªäº‹åŠ¡çš„id</li></ul><p><img src="https://i0.hdslb.com/bfs/article/d1f0208f9c1b768d3863cc539cb29ac9645325325.png">â€‹</p><p>å½“ä¸€ä¸ªäº‹åŠ¡ç¬¬ä¸€æ¬¡æ‰§è¡ŒæŸ¥è¯¢ sql æ—¶ï¼Œä¼šç”Ÿæˆä¸€è‡´æ€§è§†å›¾ read-viewï¼ˆå¿«ç…§ï¼‰ï¼ŒæŸ¥è¯¢æ—¶ä» undo log ä¸­æœ€æ–°çš„ä¸€æ¡è®°å½•å¼€å§‹è·Ÿ read-view åšå¯¹æ¯”ï¼Œå¦‚æœä¸ç¬¦åˆæ¯”è¾ƒè§„åˆ™ï¼Œå°±æ ¹æ®å›æ»šæŒ‡é’ˆå›æ»šåˆ°ä¸Šä¸€æ¡è®°å½•ç»§ç»­æ¯”è¾ƒï¼Œç›´åˆ°å¾—åˆ°ç¬¦åˆæ¯”è¾ƒæ¡ä»¶çš„æŸ¥è¯¢ç»“æœã€‚</p><p><strong>Read Viewåˆ¤æ–­è®°å½•æŸä¸ªç‰ˆæœ¬æ˜¯å¦å¯è§çš„è§„åˆ™å¦‚ä¸‹</strong></p><p><img src="https://i0.hdslb.com/bfs/article/f1b2f05bb0c12783dfe110f4316e7cba645325325.png">â€‹</p><p>1.å¦‚æœå½“å‰è®°å½•çš„äº‹åŠ¡idè½åœ¨ç»¿è‰²éƒ¨åˆ†ï¼ˆtrx_id &lt; min_idï¼‰ï¼Œè¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬æ˜¯å·²æäº¤çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œå¯è¯»ã€‚<br>2.å¦‚æœå½“å‰è®°å½•çš„äº‹åŠ¡idè½åœ¨çº¢è‰²éƒ¨åˆ†ï¼ˆtrx_id &gt; max_idï¼‰ï¼Œè¡¨ç¤ºè¿™ä¸ªç‰ˆæœ¬æ˜¯ç”±å°†æ¥å¯åŠ¨çš„äº‹åŠ¡ç”Ÿæˆçš„ï¼Œä¸å¯è¯»ã€‚</p><ol start="3"><li>å¦‚æœå½“å‰è®°å½•çš„äº‹åŠ¡idè½åœ¨é»„è‰²éƒ¨åˆ†ï¼ˆmin_id &lt;&#x3D; trx_id &lt;&#x3D; max_idï¼‰ï¼Œåˆ™åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</li><li>è‹¥å½“å‰è®°å½•çš„äº‹åŠ¡idåœ¨æœªæäº¤äº‹åŠ¡çš„æ•°ç»„ä¸­ï¼Œåˆ™æ­¤æ¡è®°å½•ä¸å¯è¯»ï¼›</li><li>è‹¥å½“å‰è®°å½•çš„äº‹åŠ¡idä¸åœ¨æœªæäº¤äº‹åŠ¡çš„æ•°ç»„ä¸­ï¼Œåˆ™æ­¤æ¡è®°å½•å¯è¯»ã€‚</li></ol><p>RC å’Œ RR éš”ç¦»çº§åˆ«éƒ½æ˜¯ç”± MVCC å®ç°ï¼ŒåŒºåˆ«åœ¨äºï¼š</p><ol><li>è¯»å–çš„ä¸€è‡´æ€§ï¼šåœ¨ RC éš”ç¦»çº§åˆ«ä¸‹ï¼Œè¯»å–çš„æ•°æ®æ˜¯æäº¤äº‹åŠ¡æ—¶çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå³è¯»å–å·²ç»æäº¤çš„æ•°æ®ã€‚è€Œåœ¨ RR éš”ç¦»çº§åˆ«ä¸‹ï¼Œè¯»å–çš„æ•°æ®æ˜¯äº‹åŠ¡å¼€å§‹æ—¶çš„å¿«ç…§ç‰ˆæœ¬ï¼Œå³è¯»å–äº‹åŠ¡å¼€å§‹æ—¶å·²ç»å­˜åœ¨çš„æ•°æ®ã€‚åœ¨ RR çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡åœ¨è¯»å–æ•°æ®æ—¶ï¼Œå³ä½¿å…¶ä»–äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œä¹Ÿä¸ä¼šçœ‹åˆ°è¿™äº›ä¿®æ”¹ï¼Œä¿è¯äº†è¯»å–çš„ä¸€è‡´æ€§ã€‚</li><li>è¯»å–çš„é”å®šï¼šåœ¨ RC éš”ç¦»çº§åˆ«ä¸‹ï¼Œè¯»å–çš„æ•°æ®ä¸ä¼šè¢«é”å®šï¼Œå³å…¶ä»–äº‹åŠ¡å¯ä»¥ä¿®æ”¹è¢«è¯»å–çš„æ•°æ®ã€‚è€Œåœ¨ RR éš”ç¦»çº§åˆ«ä¸‹ï¼Œè¯»å–çš„æ•°æ®ä¼šè¢«å…±äº«é”å®šï¼Œå³å…¶ä»–äº‹åŠ¡ä¸èƒ½ä¿®æ”¹è¢«è¯»å–çš„æ•°æ®ï¼Œä»è€Œé¿å…äº†è„è¯»å’Œä¸å¯é‡å¤è¯»çš„é—®é¢˜ã€‚</li><li>å¹¶å‘å†²çªï¼šç”±äº RR éš”ç¦»çº§åˆ«ä¸‹çš„è¯»å–ä¼šé”å®šæ•°æ®ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ›´å¤šçš„å¹¶å‘å†²çªå’Œé”ç«äº‰ï¼Œä»è€Œå½±å“æ€§èƒ½ã€‚è€Œåœ¨ RC éš”ç¦»çº§åˆ«ä¸‹ï¼Œè¯»å–ä¸ä¼šé”å®šæ•°æ®ï¼Œå¯ä»¥æé«˜å¹¶å‘æ€§èƒ½ã€‚</li></ol><h3 id="61ã€Repeatable-Read-è§£å†³äº†å¹»è¯»é—®é¢˜å—ï¼Ÿ"><a href="#61ã€Repeatable-Read-è§£å†³äº†å¹»è¯»é—®é¢˜å—ï¼Ÿ" class="headerlink" title="61ã€Repeatable Read è§£å†³äº†å¹»è¯»é—®é¢˜å—ï¼Ÿ"></a>61ã€Repeatable Read è§£å†³äº†å¹»è¯»é—®é¢˜å—ï¼Ÿ</h3><p>å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å®šä¹‰ï¼š ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹åŠ¡åœ¨å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚</p><p>ä¸è¿‡ç†è®ºä¸Šä¼šå‡ºç°å¹»è¯»ï¼Œç®€å•çš„è¯´å¹»è¯»æŒ‡çš„çš„å½“ç”¨æˆ·è¯»å–æŸä¸€èŒƒå›´çš„æ•°æ®è¡Œæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡åˆåœ¨è¯¥èŒƒå›´æ’å…¥äº†æ–°è¡Œï¼Œå½“ç”¨æˆ·åœ¨è¯»å–è¯¥èŒƒå›´çš„æ•°æ®æ—¶ä¼šå‘ç°æœ‰æ–°çš„å¹»å½±è¡Œã€‚</p><p><strong>æ³¨æ„åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ™®é€šçš„æŸ¥è¯¢æ˜¯å¿«ç…§è¯»ï¼Œæ˜¯ä¸ä¼šçœ‹åˆ°åˆ«çš„äº‹åŠ¡æ’å…¥çš„æ•°æ®çš„ã€‚å› æ­¤ï¼Œ å¹»è¯»åœ¨â€œå½“å‰è¯»â€ä¸‹æ‰ä¼šå‡ºç°ï¼ˆæŸ¥è¯¢è¯­å¥æ·»åŠ for updateï¼Œè¡¨ç¤ºå½“å‰è¯»ï¼‰ï¼›</strong></p><p>åœ¨ MVCC å¹¶å‘æ§åˆ¶ä¸­ï¼Œè¯»æ“ä½œå¯ä»¥åˆ†ä¸ºä¸¤ç±»: å¿«ç…§è¯»ï¼ˆ<code>Snapshot Read</code>â€‹ï¼‰ä¸å½“å‰è¯» ï¼ˆ<code>Current Read</code>â€‹ï¼‰ã€‚</p><ul><li><p>å¿«ç…§è¯»<br>å¿«ç…§è¯»æ˜¯æŒ‡è¯»å–æ•°æ®æ—¶ä¸æ˜¯è¯»å–æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®ï¼Œè€Œæ˜¯åŸºäºå†å²ç‰ˆæœ¬è¯»å–çš„ä¸€ä¸ªå¿«ç…§ä¿¡æ¯ï¼ˆmysql è¯»å– undo log å†å²ç‰ˆæœ¬) ï¼Œå¿«ç…§è¯»å¯ä»¥ä½¿æ™®é€šçš„ SELECT è¯»å–æ•°æ®æ—¶ä¸ç”¨å¯¹è¡¨æ•°æ®è¿›è¡ŒåŠ é”ï¼Œä»è€Œè§£å†³äº†å› ä¸ºå¯¹æ•°æ®åº“è¡¨çš„åŠ é”è€Œå¯¼è‡´çš„ä¸¤ä¸ªå¦‚ä¸‹é—®é¢˜</p><ol><li>è§£å†³äº†å› åŠ é”å¯¼è‡´çš„ä¿®æ”¹æ•°æ®æ—¶æ— æ³•å¯¹æ•°æ®è¯»å–é—®é¢˜.</li><li>è§£å†³äº†å› åŠ é”å¯¼è‡´è¯»å–æ•°æ®æ—¶æ— æ³•å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹çš„é—®é¢˜.</li></ol></li><li><p>å½“å‰è¯»<br>å½“å‰è¯»æ˜¯è¯»å–çš„æ•°æ®åº“æœ€æ–°çš„æ•°æ®ï¼Œå½“å‰è¯»å’Œå¿«ç…§è¯»ä¸åŒï¼Œå› ä¸ºè¦è¯»å–æœ€æ–°çš„æ•°æ®è€Œä¸”è¦ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œæ‰€ä»¥å½“å‰è¯»æ˜¯éœ€è¦å¯¹æ•°æ®è¿›è¡ŒåŠ é”çš„ï¼ˆ<code>æ’å…¥/æ›´æ–°/åˆ é™¤æ“ä½œï¼Œå±äºå½“å‰è¯»ï¼Œéœ€è¦åŠ é”</code>â€‹   , <code>select for update</code>â€‹ ä¸ºå½“å‰è¯»ï¼‰</p></li></ul><p>è¡¨ç»“æ„</p><table><thead><tr><th>id</th><th>key</th><th>value</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td></tr></tbody></table><p>å‡è®¾ select * from where value&#x3D;1 for updateï¼Œåªåœ¨è¿™ä¸€è¡ŒåŠ é”ï¼ˆæ³¨æ„è¿™åªæ˜¯å‡è®¾ï¼‰ï¼Œå…¶å®ƒè¡Œä¸åŠ é”ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°å¦‚ä¸‹åœºæ™¯ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/967b10c0f0e9356693b837275165e967645325325.png">â€‹</p><p>Session A çš„ä¸‰æ¬¡æŸ¥è¯¢ Q1-Q3 éƒ½æ˜¯ select * from where value&#x3D;1 for updateï¼ŒæŸ¥è¯¢çš„ value&#x3D;1 çš„æ‰€æœ‰ rowã€‚</p><ul><li>T1ï¼šQ1 åªè¿”å›ä¸€è¡Œ(1,1,1)ï¼›</li><li>T2ï¼šsession B æ›´æ–° id&#x3D;0 çš„ value ä¸º 1ï¼Œæ­¤æ—¶è¡¨ t ä¸­ value&#x3D;1 çš„æ•°æ®æœ‰ä¸¤è¡Œ</li><li>T3ï¼šQ2 è¿”å›ä¸¤è¡Œ(0,0,1),(1,1,1)</li><li>T4ï¼šsession C æ’å…¥ä¸€è¡Œ(6,6,1)ï¼Œæ­¤æ—¶è¡¨ t ä¸­ value&#x3D;1 çš„æ•°æ®æœ‰ä¸‰è¡Œ</li><li>T5ï¼šQ3 è¿”å›ä¸‰è¡Œ(0,0,1),(1,1,1),(6,6,1)</li><li>T6ï¼šsession A äº‹ç‰© commitã€‚</li></ul><p>å…¶ä¸­ Q3 è¯»åˆ° value&#x3D;1 è¿™ä¸€æ ·çš„ç°è±¡ï¼Œå°±ç§°ä¹‹ä¸ºå¹»è¯»ï¼Œ<strong>å¹»è¯»æŒ‡çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡åœ¨å‰åä¸¤æ¬¡æŸ¥è¯¢åŒä¸€ä¸ªèŒƒå›´çš„æ—¶å€™ï¼Œåä¸€æ¬¡æŸ¥è¯¢çœ‹åˆ°äº†å‰ä¸€æ¬¡æŸ¥è¯¢æ²¡æœ‰çœ‹åˆ°çš„è¡Œ</strong>ã€‚</p><p>å…ˆå¯¹â€œå¹»è¯»â€åšå‡ºå¦‚ä¸‹è§£é‡Šï¼š</p><ul><li>è¦è®¨è®ºã€Œå¯é‡å¤è¯»ã€éš”ç¦»çº§åˆ«çš„å¹»è¯»ç°è±¡ï¼Œæ˜¯è¦å»ºç«‹åœ¨ã€Œå½“å‰è¯»ã€çš„æƒ…å†µä¸‹ï¼Œè€Œä¸æ˜¯å¿«ç…§è¯»,å› ä¸ºåœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ™®é€šçš„æŸ¥è¯¢æ˜¯å¿«ç…§è¯»ï¼Œæ˜¯ä¸ä¼šçœ‹åˆ°åˆ«çš„äº‹åŠ¡æ’å…¥çš„æ•°æ®çš„ã€‚</li></ul><p><strong>Next-key Lock é”</strong></p><p>äº§ç”Ÿå¹»è¯»çš„åŸå› æ˜¯ï¼Œè¡Œé”åªèƒ½é”ä½è¡Œï¼Œä½†æ˜¯æ–°æ’å…¥è®°å½•è¿™ä¸ªåŠ¨ä½œï¼Œè¦æ›´æ–°çš„æ˜¯è®°å½•ä¹‹é—´çš„â€œé—´éš™â€ã€‚å› æ­¤ï¼ŒInnodb å¼•æ“ä¸ºäº†è§£å†³ã€Œå¯é‡å¤è¯»ã€éš”ç¦»çº§åˆ«ä½¿ç”¨ã€Œå½“å‰è¯»ã€è€Œé€ æˆçš„å¹»è¯»é—®é¢˜ï¼Œå°±å¼•å‡ºäº† next-key é”ï¼Œå°±æ˜¯è®°å½•é”å’Œé—´éš™é”çš„ç»„åˆã€‚</p><ul><li>RecordLock é”ï¼šé”å®šå•ä¸ªè¡Œè®°å½•çš„é”ã€‚ï¼ˆè®°å½•é”ï¼ŒRCã€RR éš”ç¦»çº§åˆ«éƒ½æ”¯æŒï¼‰</li><li>GapLock é”ï¼šé—´éš™é”ï¼Œé”å®šç´¢å¼•è®°å½•é—´éš™(ä¸åŒ…æ‹¬è®°å½•æœ¬èº«)ï¼Œç¡®ä¿ç´¢å¼•è®°å½•çš„é—´éš™ä¸å˜ã€‚ï¼ˆèŒƒå›´é”ï¼ŒRR éš”ç¦»çº§åˆ«æ”¯æŒï¼‰</li><li>Next-key Lock é”ï¼šè®°å½•é”å’Œé—´éš™é”ç»„åˆï¼ŒåŒæ—¶é”ä½æ•°æ®ï¼Œå¹¶ä¸”é”ä½æ•°æ®å‰åèŒƒå›´ã€‚ï¼ˆè®°å½•é”+èŒƒå›´é”ï¼ŒRR éš”ç¦»çº§åˆ«æ”¯æŒï¼‰</li></ul><p><img src="https://i0.hdslb.com/bfs/article/a5663ec542ce6b7f1df9d1e311b9f635645325325.png">â€‹</p><p><strong>æ€»ç»“</strong></p><ul><li>RR éš”ç¦»çº§åˆ«ä¸‹é—´éš™é”æ‰æœ‰æ•ˆï¼ŒRC éš”ç¦»çº§åˆ«ä¸‹æ²¡æœ‰é—´éš™é”ï¼›</li><li>RR éš”ç¦»çº§åˆ«ä¸‹ä¸ºäº†è§£å†³â€œå¹»è¯»â€é—®é¢˜ï¼šâ€œå¿«ç…§è¯»â€ä¾é  MVCC æ§åˆ¶ï¼Œâ€œå½“å‰è¯»â€é€šè¿‡é—´éš™é”è§£å†³ï¼›</li><li>é—´éš™é”å’Œè¡Œé”åˆç§° next-key lockï¼Œæ¯ä¸ª next-key lock æ˜¯å‰å¼€åé—­åŒºé—´ï¼›</li><li>é—´éš™é”çš„å¼•å…¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´åŒæ ·è¯­å¥é”ä½æ›´å¤§çš„èŒƒå›´ï¼Œå½±å“å¹¶å‘åº¦ã€‚</li></ul><h3 id="62ã€è¯·è¯´ä¸€ä¸‹æ•°æ®åº“é”çš„ç§ç±»ï¼Ÿ"><a href="#62ã€è¯·è¯´ä¸€ä¸‹æ•°æ®åº“é”çš„ç§ç±»ï¼Ÿ" class="headerlink" title="62ã€è¯·è¯´ä¸€ä¸‹æ•°æ®åº“é”çš„ç§ç±»ï¼Ÿ"></a>62ã€è¯·è¯´ä¸€ä¸‹æ•°æ®åº“é”çš„ç§ç±»ï¼Ÿ</h3><p><strong>MySQL æ•°æ®åº“ç”±äºå…¶è‡ªèº«æ¶æ„çš„ç‰¹ç‚¹,å­˜åœ¨å¤šç§æ•°æ®å­˜å‚¨å¼•æ“, MySQL ä¸­ä¸åŒçš„å­˜å‚¨å¼•æ“æ”¯æŒä¸åŒçš„é”æœºåˆ¶ã€‚</strong></p><ul><li>**MyISAM **å’Œ <strong>MEMORY</strong> å­˜å‚¨å¼•æ“é‡‡ç”¨çš„è¡¨çº§é”ï¼Œ</li><li><strong>InnoDB</strong> å­˜å‚¨å¼•æ“æ—¢æ”¯æŒè¡Œçº§é”ï¼Œä¹Ÿæ”¯æŒè¡¨çº§é”ï¼Œé»˜è®¤æƒ…å†µä¸‹é‡‡ç”¨è¡Œçº§é”ã€‚</li><li><strong>BDB</strong> é‡‡ç”¨çš„æ˜¯é¡µé¢é”ï¼Œä¹Ÿæ”¯æŒè¡¨çº§é”</li></ul><p><strong>æŒ‰ç…§æ•°æ®æ“ä½œçš„ç±»å‹åˆ†</strong></p><ul><li>è¯»é”ï¼ˆå…±äº«é”ï¼‰ï¼šé’ˆå¯¹åŒä¸€ä»½æ•°æ®ï¼Œå¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œè€Œä¸ä¼šäº’ç›¸å½±å“ã€‚</li><li>å†™é”ï¼ˆæ’ä»–é”ï¼‰ï¼šå½“å‰å†™æ“ä½œæ²¡æœ‰å®Œæˆå‰ï¼Œå®ƒä¼šé˜»æ–­å…¶ä»–å†™é”å’Œè¯»é”ã€‚</li></ul><p><strong>æŒ‰ç…§æ•°æ®æ“ä½œçš„ç²’åº¦åˆ†</strong></p><ul><li>è¡¨çº§é”ï¼šå¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘åº¦æœ€ä½ã€‚</li><li>è¡Œçº§é”ï¼š å¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½ï¼Œå¹¶å‘åº¦ä¹Ÿæœ€é«˜ã€‚</li><li>é¡µé¢é”ï¼šå¼€é”€å’ŒåŠ é”æ—¶é—´ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œå¹¶å‘åº¦ä¸€èˆ¬</li></ul><p><strong>æŒ‰ç…§æ“ä½œæ€§èƒ½å¯åˆ†ä¸ºä¹è§‚é”å’Œæ‚²è§‚é”</strong></p><ul><li>ä¹è§‚é”ï¼šä¸€èˆ¬çš„å®ç°æ–¹å¼æ˜¯å¯¹è®°å½•æ•°æ®ç‰ˆæœ¬è¿›è¡Œæ¯”å¯¹ï¼Œåœ¨æ•°æ®æ›´æ–°æäº¤çš„æ—¶å€™æ‰ä¼šè¿›è¡Œå†²çªæ£€æµ‹ï¼Œå¦‚æœå‘ç°å†²çªäº†ï¼Œåˆ™æç¤ºé”™è¯¯ä¿¡æ¯ã€‚</li><li>æ‚²è§‚é”ï¼šåœ¨å¯¹ä¸€æ¡æ•°æ®ä¿®æ”¹çš„æ—¶å€™ï¼Œä¸ºäº†é¿å…åŒæ—¶è¢«å…¶ä»–äººä¿®æ”¹ï¼Œåœ¨ä¿®æ”¹æ•°æ®ä¹‹å‰å…ˆé”å®šï¼Œå†ä¿®æ”¹çš„æ§åˆ¶æ–¹å¼ã€‚å…±äº«é”å’Œæ’ä»–é”æ˜¯æ‚²è§‚é”çš„ä¸åŒå®ç°ï¼Œä½†éƒ½å±äºæ‚²è§‚é”èŒƒç•´ã€‚</li></ul><h3 id="63ã€è¯·è¯´ä¸€ä¸‹å…±äº«é”å’Œæ’ä»–é”ï¼Ÿ"><a href="#63ã€è¯·è¯´ä¸€ä¸‹å…±äº«é”å’Œæ’ä»–é”ï¼Ÿ" class="headerlink" title="63ã€è¯·è¯´ä¸€ä¸‹å…±äº«é”å’Œæ’ä»–é”ï¼Ÿ"></a>63ã€è¯·è¯´ä¸€ä¸‹å…±äº«é”å’Œæ’ä»–é”ï¼Ÿ</h3><p><strong>è¡Œçº§é”åˆ†ä¸ºå…±äº«é”å’Œæ’ä»–é”ä¸¤ç§ã€‚</strong></p><p>è¡Œé”çš„æ˜¯ mysql é”ä¸­ç²’åº¦æœ€å°çš„ä¸€ç§é”ï¼Œå› ä¸ºé”çš„ç²’åº¦å¾ˆå°ï¼Œæ‰€ä»¥å‘ç”Ÿèµ„æºäº‰æŠ¢çš„æ¦‚ç‡ä¹Ÿæœ€å°ï¼Œå¹¶å‘æ€§èƒ½æœ€å¤§ï¼Œä½†æ˜¯ä¹Ÿä¼šé€ æˆæ­»é”ï¼Œæ¯æ¬¡åŠ é”å’Œé‡Šæ”¾é”çš„å¼€é”€ä¹Ÿä¼šå˜å¤§ã€‚</p><p><strong>ä½¿ç”¨ MySQL è¡Œçº§é”çš„ä¸¤ä¸ªå‰æ</strong></p><ul><li>ä½¿ç”¨ innoDB å¼•æ“</li><li>å¼€å¯äº‹åŠ¡ (éš”ç¦»çº§åˆ«ä¸º <code>Repeatable Read</code>â€‹)</li></ul><p><strong>InnoDBè¡Œé”çš„ç±»å‹</strong></p><ul><li><strong>å…±äº«é”</strong>ï¼ˆSï¼‰ï¼šå½“äº‹åŠ¡å¯¹æ•°æ®åŠ ä¸Šå…±äº«é”å, å…¶ä»–ç”¨æˆ·å¯ä»¥å¹¶å‘è¯»å–æ•°æ®ï¼Œä½†ä»»ä½•äº‹åŠ¡éƒ½ä¸èƒ½å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼ˆè·å–æ•°æ®ä¸Šçš„æ’ä»–é”ï¼‰ï¼Œç›´åˆ°å·²é‡Šæ”¾æ‰€æœ‰å…±äº«é”ã€‚</li><li><strong>æ’ä»–é”</strong>ï¼ˆXï¼‰ï¼šå¦‚æœäº‹åŠ¡ T å¯¹æ•°æ® A åŠ ä¸Šæ’ä»–é”åï¼Œåˆ™å…¶ä»–äº‹åŠ¡ä¸èƒ½å†å¯¹æ•°æ® A åŠ ä»»ä»»ä½•ç±»å‹çš„å°é”ã€‚è·å‡†æ’ä»–é”çš„äº‹åŠ¡æ—¢èƒ½è¯»æ•°æ®ï¼Œåˆèƒ½ä¿®æ”¹æ•°æ®ã€‚</li></ul><p><strong>åŠ é”çš„æ–¹å¼</strong></p><ul><li>InnoDB å¼•æ“é»˜è®¤æ›´æ–°è¯­å¥ï¼Œ<strong>update,delete,insert éƒ½ä¼šè‡ªåŠ¨ç»™æ¶‰åŠåˆ°çš„æ•°æ®åŠ ä¸Šæ’ä»–é”</strong>ï¼Œselect è¯­å¥é»˜è®¤ä¸ä¼šåŠ ä»»ä½•é”ç±»å‹ï¼Œå¦‚æœè¦åŠ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼:</li><li>åŠ å…±äº«é”ï¼ˆSï¼‰ï¼šselect * from table_name where â€¦ <strong>lock in share mode</strong>;</li><li>åŠ æ’ä»–é”ï¼ˆxï¼‰ï¼šselect * from table_name where â€¦ <strong>for update</strong>;</li></ul><p><strong>é”å…¼å®¹</strong></p><ul><li>å…±äº«é”åªèƒ½å…¼å®¹å…±äº«é”, ä¸å…¼å®¹æ’å®ƒé”</li><li>æ’å®ƒé”äº’æ–¥å…±äº«é”å’Œå…¶å®ƒæ’å®ƒé”</li></ul><p><img src="https://i0.hdslb.com/bfs/article/cc5981ae9c7d264ab289be94f1bd7813645325325.png">â€‹</p><h3 id="64ã€InnoDB-çš„è¡Œé”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"><a href="#64ã€InnoDB-çš„è¡Œé”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ" class="headerlink" title="64ã€InnoDB çš„è¡Œé”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"></a>64ã€InnoDB çš„è¡Œé”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h3><p><strong>InnoDB è¡Œé”æ˜¯é€šè¿‡å¯¹ç´¢å¼•æ•°æ®é¡µä¸Šçš„è®°å½•åŠ é”å®ç°çš„</strong>ï¼Œä¸»è¦å®ç°ç®—æ³•æœ‰ 3 ç§ï¼šRecord Lockã€Gap Lock å’Œ Next-key Lockã€‚</p><ul><li><strong>RecordLock é”ï¼šé”å®šå•ä¸ªè¡Œè®°å½•çš„é”ã€‚ï¼ˆè®°å½•é”ï¼ŒRCã€RR éš”ç¦»çº§åˆ«éƒ½æ”¯æŒï¼‰</strong></li><li><strong>GapLock é”ï¼šé—´éš™é”ï¼Œé”å®šç´¢å¼•è®°å½•é—´éš™ï¼Œç¡®ä¿ç´¢å¼•è®°å½•çš„é—´éš™ä¸å˜ã€‚ï¼ˆèŒƒå›´é”ï¼ŒRR éš”ç¦»çº§åˆ«æ”¯æŒï¼‰</strong></li><li><strong>Next-key Lock é”ï¼šè®°å½•é”å’Œé—´éš™é”ç»„åˆï¼ŒåŒæ—¶é”ä½æ•°æ®ï¼Œå¹¶ä¸”é”ä½æ•°æ®å‰åèŒƒå›´ã€‚ï¼ˆè®°å½•é”+èŒƒå›´é”ï¼ŒRR éš”ç¦»çº§åˆ«æ”¯æŒï¼‰</strong></li></ul><blockquote><p>æ³¨æ„ï¼š InnoDB è¿™ç§è¡Œé”å®ç°ç‰¹ç‚¹æ„å‘³ç€ï¼šåªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼ŒInnoDB æ‰ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ï¼ŒInnoDB å°†ä½¿ç”¨è¡¨é”</p></blockquote><p><strong>åœ¨ RR éš”ç¦»çº§åˆ«ï¼ŒInnoDB å¯¹äºè®°å½•åŠ é”è¡Œä¸ºéƒ½æ˜¯å…ˆé‡‡ç”¨ Next-Key Lockï¼Œä½†æ˜¯å½“ SQL æ“ä½œå«æœ‰å”¯ä¸€ç´¢å¼•æ—¶ï¼ŒInnodb ä¼šå¯¹ Next-Key Lock è¿›è¡Œä¼˜åŒ–ï¼Œé™çº§ä¸º RecordLockï¼Œä»…é”ä½ç´¢å¼•æœ¬èº«è€ŒéèŒƒå›´ã€‚</strong></p><p><strong>å„ç§æ“ä½œåŠ é”çš„ç‰¹ç‚¹</strong></p><p>1ï¼‰select â€¦ from è¯­å¥ï¼šInnoDB å¼•æ“é‡‡ç”¨ MVCC æœºåˆ¶å®ç°éé˜»å¡è¯»ï¼Œæ‰€ä»¥å¯¹äºæ™®é€šçš„ select è¯­å¥ï¼ŒInnoDB ä¸åŠ é”</p><p>2ï¼‰select â€¦ from lock in share modeè¯­å¥ï¼šè¿½åŠ äº†å…±äº«é”ï¼ŒInnoDB ä¼šä½¿ç”¨ Next-Key Lock é”è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ‰«æå‘ç°å”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥é™çº§ä¸º RecordLock é”ã€‚</p><p>3ï¼‰select â€¦ from for update è¯­å¥ï¼šè¿½åŠ äº†æ’ä»–é”ï¼ŒInnoDB ä¼šä½¿ç”¨ Next-Key Lock é”è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ‰«æå‘ç°å”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥é™çº§ä¸ºRecordLock é”ã€‚</p><p>4ï¼‰update â€¦ where è¯­å¥ï¼šInnoDB ä¼šä½¿ç”¨ Next-Key Lock é”è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ‰«æå‘ç°å”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥é™çº§ä¸º RecordLocké”ã€‚</p><p>5ï¼‰delete â€¦ where è¯­å¥ï¼šInnoDB ä¼šä½¿ç”¨ Next-Key Lock é”è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ‰«æå‘ç°å”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥é™çº§ä¸º RecordLocké”ã€‚</p><p>6ï¼‰insertè¯­å¥ï¼šInnoDB ä¼šåœ¨å°†è¦æ’å…¥çš„é‚£ä¸€è¡Œè®¾ç½®ä¸€ä¸ªæ’ä»–çš„ RecordLock é”ã€‚</p><p><strong>ä¸‹é¢ä»¥â€œupdate t1 set name&#x3D;â€˜lisiâ€™ where id&#x3D;10â€æ“ä½œä¸ºä¾‹ï¼Œä¸¾ä¾‹å­åˆ†æä¸‹ InnoDB å¯¹ä¸åŒç´¢å¼•çš„åŠ é”è¡Œä¸ºï¼Œä»¥RRéš”ç¦»çº§åˆ«ä¸ºä¾‹ã€‚</strong></p><ol><li><p>ä¸»é”®åŠ é”</p><p> åŠ é”è¡Œä¸ºï¼šä»…åœ¨id&#x3D;10çš„ä¸»é”®ç´¢å¼•è®°å½•ä¸ŠåŠ Xé”ã€‚</p><p> <img src="https://i0.hdslb.com/bfs/article/6438762f4f547cbf72e68c617de64bde645325325.png">â€‹</p></li><li><p>å”¯ä¸€é”®åŠ é”</p><p> åŠ é”è¡Œä¸ºï¼šç°åœ¨å”¯ä¸€ç´¢å¼• id ä¸ŠåŠ  X é”ï¼Œç„¶ååœ¨ id&#x3D;10 çš„ä¸»é”®ç´¢å¼•è®°å½•ä¸ŠåŠ  X é”ã€‚</p><p> <img src="https://i0.hdslb.com/bfs/article/ef7852cb39645f452db1d42f215b80db645325325.png">â€‹</p></li><li><p>éå”¯ä¸€é”®åŠ é”</p><p> åŠ é”è¡Œä¸ºï¼šå¯¹æ»¡è¶³id&#x3D;10æ¡ä»¶çš„è®°å½•å’Œä¸»é”®åˆ†åˆ«åŠ Xé”ï¼Œç„¶ååœ¨(6,c)-(10,b)ã€(10,b)-(10,d)ã€(10,d)-(11,f)èŒƒå›´åˆ†åˆ«åŠ Gap Lockã€‚</p><p> <img src="https://i0.hdslb.com/bfs/article/53841f5e4d1942fedeb17abc6d899054645325325.png">â€‹</p></li><li><p>æ— ç´¢å¼•åŠ é”</p><p> åŠ é”è¡Œä¸ºï¼šè¡¨é‡Œæ‰€æœ‰è¡Œå’Œé—´éš™éƒ½ä¼šåŠ Xé”ã€‚ï¼ˆå½“æ²¡æœ‰ç´¢å¼•æ—¶ï¼Œä¼šå¯¼è‡´å…¨è¡¨é”å®šï¼Œå› ä¸º InnoDB å¼•æ“é”æœºåˆ¶æ˜¯åŸºäºç´¢å¼•å®ç°çš„è®°å½•é”å®šï¼‰ã€‚</p><p> <img src="https://i0.hdslb.com/bfs/article/52e03a6026a951aed74f0efbc0b1723f645325325.png">â€‹</p></li></ol><h3 id="65ã€å¹¶å‘äº‹åŠ¡ä¼šäº§ç”Ÿå“ªäº›é—®é¢˜"><a href="#65ã€å¹¶å‘äº‹åŠ¡ä¼šäº§ç”Ÿå“ªäº›é—®é¢˜" class="headerlink" title="65ã€å¹¶å‘äº‹åŠ¡ä¼šäº§ç”Ÿå“ªäº›é—®é¢˜"></a>65ã€å¹¶å‘äº‹åŠ¡ä¼šäº§ç”Ÿå“ªäº›é—®é¢˜</h3><p>äº‹åŠ¡å¹¶å‘å¤„ç†å¯èƒ½ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š</p><ul><li><p>æ›´æ–°ä¸¢å¤±<br>å½“ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡æ›´æ–°åŒä¸€è¡Œè®°å½•ï¼Œä¼šäº§ç”Ÿæ›´æ–°ä¸¢å¤±ç°è±¡ã€‚å¯ä»¥åˆ†ä¸ºå›æ»šè¦†ç›–å’Œæäº¤è¦†ç›–ã€‚</p><ul><li>å›æ»šè¦†ç›–ï¼šä¸€ä¸ªäº‹åŠ¡å›æ»šæ“ä½œï¼ŒæŠŠå…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ•°æ®ç»™è¦†ç›–äº†ã€‚</li><li>æäº¤è¦†ç›–ï¼šä¸€ä¸ªäº‹åŠ¡æäº¤æ“ä½œï¼ŒæŠŠå…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ•°æ®ç»™è¦†ç›–äº†ã€‚</li></ul></li><li><p>è„è¯»<br>ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹ä½†æœªæäº¤çš„æ•°æ®ã€‚</p></li><li><p>ä¸å¯é‡å¤è¯»<br>ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€è¡Œè®°å½•ä¸ä¸€è‡´ï¼Œåé¢è¯»å–çš„è·Ÿå‰é¢è¯»å–çš„ä¸ä¸€è‡´ã€‚</p></li><li><p>å¹»è¯»<br>ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡æŒ‰ç›¸åŒæ¡ä»¶æŸ¥è¯¢ï¼Œç»“æœä¸ä¸€è‡´ã€‚åç»­æŸ¥è¯¢çš„ç»“æœå’Œé¢å‰æŸ¥è¯¢ç»“æœä¸åŒï¼Œå¤šäº†æˆ–å°‘äº†å‡ è¡Œè®°å½•ã€‚</p></li></ul><p>â€œæ›´æ–°ä¸¢å¤±â€ã€â€è„è¯»â€ã€â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€ç­‰å¹¶å‘äº‹åŠ¡é—®é¢˜ï¼Œå…¶å®éƒ½æ˜¯æ•°æ®åº“ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒMySQLæ•°æ®åº“æ˜¯é€šè¿‡äº‹åŠ¡éš”ç¦»çº§åˆ«æ¥è§£å†³çš„ï¼Œæ•°æ®åº“ç³»ç»Ÿæä¾›äº†ä»¥ä¸‹ 4 ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ä¾›ç”¨æˆ·é€‰æ‹©ã€‚</p><table><thead><tr><th>äº‹åŠ¡éš”ç¦»çº§åˆ«</th><th>å›æ»šè¦†ç›–</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>æäº¤è¦†ç›–</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>è¯»æœªæäº¤</td><td>x</td><td>å¯èƒ½å‘ç”Ÿ</td><td>å¯èƒ½å‘ç”Ÿ</td><td>å¯èƒ½å‘ç”Ÿ</td><td>å¯èƒ½å‘ç”Ÿ</td></tr><tr><td>è¯»å·²æäº¤</td><td>x</td><td>x</td><td>å¯èƒ½å‘ç”Ÿ</td><td>å¯èƒ½å‘ç”Ÿ</td><td>å¯èƒ½å‘ç”Ÿ</td></tr><tr><td>å¯é‡å¤è¯»</td><td>x</td><td>x</td><td>x</td><td>x</td><td>å¯èƒ½å‘ç”Ÿ</td></tr><tr><td>ä¸²è¡ŒåŒ–</td><td>x</td><td>x</td><td>x</td><td>x</td><td>x</td></tr></tbody></table><ul><li><strong>è¯»æœªæäº¤</strong><br>Read Uncommitted è¯»æœªæäº¤ï¼šè§£å†³äº†å›æ»šè¦†ç›–ç±»å‹çš„æ›´æ–°ä¸¢å¤±ï¼Œä½†å¯èƒ½å‘ç”Ÿè„è¯»ç°è±¡ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½è¯»å–åˆ°å…¶ä»–ä¼šè¯ä¸­æœªæäº¤äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®ã€‚</li><li><strong>å·²æäº¤è¯»</strong><br>Read Committed è¯»å·²æäº¤ï¼šåªèƒ½è¯»å–åˆ°å…¶ä»–ä¼šè¯ä¸­å·²ç»æäº¤çš„æ•°æ®ï¼Œè§£å†³äº†è„è¯»ã€‚ä½†å¯èƒ½å‘ç”Ÿä¸å¯é‡å¤è¯»ç°è±¡ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ä¸¤æ¬¡æŸ¥è¯¢ç»“æœä¸ä¸€è‡´ã€‚</li><li><strong>å¯é‡å¤åº¦</strong><br>Repeatable Read å¯é‡å¤è¯»ï¼šè§£å†³äº†ä¸å¯é‡å¤è¯»ï¼Œå®ƒç¡®ä¿åŒä¸€äº‹åŠ¡çš„å¤šä¸ªå®ä¾‹åœ¨å¹¶å‘è¯»å–æ•°æ®æ—¶ï¼Œä¼šçœ‹åˆ°åŒæ ·çš„æ•°æ®è¡Œã€‚ä¸è¿‡ç†è®ºä¸Šä¼šå‡ºç°å¹»è¯»ï¼Œç®€å•çš„è¯´å¹»è¯»æŒ‡çš„çš„å½“ç”¨æˆ·è¯»å–æŸä¸€èŒƒå›´çš„æ•°æ®è¡Œæ—¶ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡åˆåœ¨è¯¥èŒƒå›´æ’å…¥äº†æ–°è¡Œï¼Œå½“ç”¨æˆ·åœ¨è¯»å–è¯¥èŒƒå›´çš„æ•°æ®æ—¶ä¼šå‘ç°æœ‰æ–°çš„å¹»å½±è¡Œã€‚</li><li><strong>å¯ä¸²è¡ŒåŒ–</strong><br>æ‰€æœ‰çš„å¢åˆ æ”¹æŸ¥ä¸²è¡Œæ‰§è¡Œã€‚å®ƒé€šè¿‡å¼ºåˆ¶äº‹åŠ¡æ’åºï¼Œè§£å†³ç›¸äº’å†²çªï¼Œä»è€Œè§£å†³å¹»åº¦çš„é—®é¢˜ã€‚è¿™ä¸ªçº§åˆ«å¯èƒ½å¯¼è‡´å¤§é‡çš„è¶…æ—¶ç°è±¡çš„å’Œé”ç«äº‰ï¼Œæ•ˆç‡ä½ä¸‹ã€‚</li></ul><p>æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œå¹¶å‘é—®é¢˜å°±è¶Šå°ï¼Œä½†æ˜¯å¹¶å‘å¤„ç†èƒ½åŠ›è¶Šå·®ï¼ˆä»£ä»·ï¼‰ã€‚è¯»æœªæäº¤éš”ç¦»çº§åˆ«æœ€ä½ï¼Œå¹¶å‘é—®é¢˜å¤šï¼Œä½†æ˜¯å¹¶å‘å¤„ç†èƒ½åŠ›å¥½ã€‚ä»¥åä½¿ç”¨æ—¶ï¼Œå¯ä»¥æ ¹æ®ç³»ç»Ÿç‰¹ç‚¹æ¥é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„éš”ç¦»çº§åˆ«ï¼Œæ¯”å¦‚å¯¹ä¸å¯é‡å¤è¯»å’Œå¹»è¯»å¹¶ä¸æ•æ„Ÿï¼Œæ›´å¤šå…³å¿ƒæ•°æ®åº“å¹¶å‘å¤„ç†èƒ½åŠ›ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ Read Commited éš”ç¦»çº§åˆ«ã€‚</p><p>äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œé’ˆå¯¹ Innodb å¼•æ“ï¼Œæ”¯æŒäº‹åŠ¡çš„åŠŸèƒ½ã€‚åƒ MyISAM å¼•æ“æ²¡æœ‰å…³ç³»ã€‚</p><p><strong>äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œé”çš„å…³ç³»</strong></p><p>1ï¼‰äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯ SQL92 å®šåˆ¶çš„æ ‡å‡†ï¼Œç›¸å½“äºäº‹åŠ¡å¹¶å‘æ§åˆ¶çš„æ•´ä½“è§£å†³æ–¹æ¡ˆï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹é”å’Œ MVCC ä½¿ç”¨çš„å°è£…ï¼Œéšè—äº†åº•å±‚ç»†èŠ‚ã€‚</p><p>2ï¼‰é”æ˜¯æ•°æ®åº“å®ç°å¹¶å‘æ§åˆ¶çš„åŸºç¡€ï¼Œäº‹åŠ¡éš”ç¦»æ€§æ˜¯é‡‡ç”¨é”æ¥å®ç°ï¼Œå¯¹ç›¸åº”æ“ä½œåŠ ä¸åŒçš„é”ï¼Œå°±å¯ä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡åŒæ—¶å¯¹æ•°æ®è¿›è¡Œè¯»å†™æ“ä½œã€‚</p><p>3ï¼‰å¯¹ç”¨æˆ·æ¥è®²ï¼Œé¦–å…ˆé€‰æ‹©ä½¿ç”¨éš”ç¦»çº§åˆ«ï¼Œå½“é€‰ç”¨çš„éš”ç¦»çº§åˆ«ä¸èƒ½è§£å†³å¹¶å‘é—®é¢˜æˆ–éœ€æ±‚æ—¶ï¼Œæ‰æœ‰å¿…è¦åœ¨å¼€å‘ä¸­æ‰‹åŠ¨çš„è®¾ç½®é”ã€‚</p><p>MySQL é»˜è®¤éš”ç¦»çº§åˆ«ï¼šå¯é‡å¤è¯»</p><p>Oracleã€SQLServer é»˜è®¤éš”ç¦»çº§åˆ«ï¼šè¯»å·²æäº¤</p><p>ä¸€èˆ¬ä½¿ç”¨æ—¶ï¼Œå»ºè®®é‡‡ç”¨é»˜è®¤éš”ç¦»çº§åˆ«ï¼Œç„¶åå­˜åœ¨çš„ä¸€äº›å¹¶å‘é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡æ‚²è§‚é”ã€ä¹è§‚é”ç­‰å®ç°å¤„ç†ã€‚</p><h3 id="66ã€è¯´ä¸€ä¸‹MVCCå†…éƒ¨ç»†èŠ‚"><a href="#66ã€è¯´ä¸€ä¸‹MVCCå†…éƒ¨ç»†èŠ‚" class="headerlink" title="66ã€è¯´ä¸€ä¸‹MVCCå†…éƒ¨ç»†èŠ‚"></a>66ã€è¯´ä¸€ä¸‹MVCCå†…éƒ¨ç»†èŠ‚</h3><p><strong>MVCCæ¦‚å¿µ</strong></p><p>MVCCï¼ˆMulti Version Concurrency Controlï¼‰è¢«ç§°ä¸ºå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œæ˜¯æŒ‡åœ¨æ•°æ®åº“ä¸­ä¸ºäº†å®ç°é«˜å¹¶å‘çš„æ•°æ®è®¿é—®ï¼Œå¯¹æ•°æ®è¿›è¡Œå¤šç‰ˆæœ¬å¤„ç†ï¼Œå¹¶é€šè¿‡äº‹åŠ¡çš„å¯è§æ€§æ¥ä¿è¯äº‹åŠ¡èƒ½çœ‹åˆ°è‡ªå·±åº”è¯¥çœ‹åˆ°çš„æ•°æ®ç‰ˆæœ¬ã€‚</p><blockquote><p>MVCC æœ€å¤§çš„å¥½å¤„æ˜¯è¯»ä¸åŠ é”ï¼Œè¯»å†™ä¸å†²çªã€‚åœ¨è¯»å¤šå†™å°‘çš„ç³»ç»Ÿåº”ç”¨ä¸­ï¼Œè¯»å†™ä¸å†²çªæ˜¯éå¸¸é‡è¦çš„ï¼Œæå¤§çš„æå‡ç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°é˜¶æ®µå‡ ä¹æ‰€æœ‰çš„å…³ç³»å‹æ•°æ®åº“éƒ½æ”¯æŒ MVCC çš„åŸå› ï¼Œä¸è¿‡ç›®å‰ MVCC åªåœ¨ Read Commited å’Œ Repeatable Read ä¸¤ç§éš”ç¦»çº§åˆ«ä¸‹å·¥ä½œã€‚</p></blockquote><p>å›ç­”è¿™ä¸ªé¢è¯•é¢˜æ—¶ï¼Œä¸»è¦ä»‹ç»ä»¥ä¸‹çš„å‡ ä¸ªå…³é”®å†…å®¹ï¼š</p><p><strong>1ï¼‰è¡Œè®°å½•çš„ä¸‰ä¸ªéšè—å­—æ®µ</strong></p><p><img src="https://i0.hdslb.com/bfs/article/17bf48a92e269bb617de555567bca771645325325.png">â€‹</p><p>![i</p><ul><li><code>DB_ROW_ID</code>â€‹ : å¦‚æœæ²¡æœ‰ä¸ºè¡¨æ˜¾å¼çš„å®šä¹‰ä¸»é”®ï¼Œå¹¶ä¸”è¡¨ä¸­ä¹Ÿæ²¡æœ‰å®šä¹‰å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆ InnoDB ä¼šè‡ªåŠ¨ä¸ºè¡¨æ·»åŠ ä¸€ä¸ª row_id çš„éšè—åˆ—ä½œä¸ºä¸»é”®ã€‚</li><li><code>DB_TRX_ID</code>â€‹ : äº‹åŠ¡ä¸­å¯¹æŸæ¡è®°å½•åšå¢åˆ æ”¹æ—¶,å°±ä¼šå°†è¿™ä¸ªäº‹åŠ¡çš„äº‹åŠ¡ ID å†™å…¥åˆ° trx_id ä¸­.</li><li><code>DB_ROLL_PTR</code>: å›æ»šæŒ‡é’ˆ,æŒ‡å‘ undo log çš„æŒ‡é’ˆ</li></ul><p><strong>2ï¼‰Undo log å¤šç‰ˆæœ¬é“¾</strong></p><p>ä¸¾ä¾‹ï¼šäº‹åŠ¡ T-100 å’Œ T-120 å¯¹è¡¨ä¸­ id &#x3D; 1 çš„æ•°æ®è¡Œåš update æ“ä½œï¼Œäº‹åŠ¡ T-130 è¿›è¡Œ select æ“ä½œï¼Œå³ä½¿ T-100 å·²ç»æäº¤ä¿®æ”¹ï¼Œä¸‰æ¬¡ select è¯­å¥çš„ç»“æœéƒ½æ˜¯â€œlisiâ€ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/7f21d5cefd8f45cc7a2a3319c86ef3be645325325.png">â€‹</p><ul><li>æ¯ä¸€æ¡æ•°æ®éƒ½æœ‰å¤šä¸ªç‰ˆæœ¬,ç‰ˆæœ¬ä¹‹é—´é€šè¿‡ undo log é“¾æ¡è¿›è¡Œè¿æ¥</li></ul><p><img src="https://i0.hdslb.com/bfs/article/9540d8681c56571208f9d9112b07f8d4645325325.png">â€‹</p><p><strong>3ï¼‰ReadView</strong></p><p>Read Viewæ˜¯ InnoDB åœ¨å®ç° MVCC æ—¶ç”¨åˆ°çš„ä¸€è‡´æ€§è¯»è§†å›¾ï¼Œå³ consistent read viewï¼Œç”¨äºæ”¯æŒ RCï¼ˆRead Committedï¼Œè¯»æäº¤ï¼‰å’Œ RRï¼ˆRepeatable Readï¼Œå¯é‡å¤è¯»ï¼‰éš”ç¦»çº§åˆ«çš„å®ç°.</p><p>Read View ç®€å•ç†è§£å°±æ˜¯å¯¹æ•°æ®åœ¨æ¯ä¸ªæ—¶åˆ»çš„çŠ¶æ€æ‹æˆç…§ç‰‡è®°å½•ä¸‹æ¥ã€‚é‚£ä¹ˆä¹‹åè·å–æŸæ—¶åˆ»çš„æ•°æ®æ—¶å°±è¿˜æ˜¯åŸæ¥çš„ç…§ç‰‡ä¸Šçš„æ•°æ®ï¼Œæ˜¯ä¸ä¼šå˜çš„.</p><p>Read Viewä¸­æ¯”è¾ƒé‡è¦çš„å­—æ®µæœ‰ 4 ä¸ª:</p><ul><li><code>m_ids</code>â€‹ : ç”¨æ¥è¡¨ç¤º MySQL ä¸­å“ªäº›äº‹åŠ¡æ­£åœ¨æ‰§è¡Œ,ä½†æ˜¯æ²¡æœ‰æäº¤.</li><li><code>min_trx_id</code>: å°±æ˜¯ m_ids é‡Œæœ€å°çš„å€¼.</li><li><code>max_trx_id</code>â€‹ : ä¸‹ä¸€ä¸ªè¦ç”Ÿæˆçš„äº‹åŠ¡ id å€¼,ä¹Ÿå°±æ˜¯æœ€å¤§äº‹åŠ¡ id</li><li><code>creator_trx_id</code>: å°±æ˜¯ä½ è¿™ä¸ªäº‹åŠ¡çš„ id</li></ul><p><strong>é€šè¿‡ Read View åˆ¤æ–­è®°å½•çš„æŸä¸ªç‰ˆæœ¬æ˜¯å¦å¯è§çš„æ–¹å¼æ€»ç»“:</strong></p><ul><li><p>trx_id &#x3D; creator_trx_id<br>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_id,ä¸readviewä¸­çš„creator_trx_idå€¼ç›¸åŒ,è¡¨æ˜å½“å‰äº‹åŠ¡åœ¨è®¿é—®è‡ªå·±ä¿®æ”¹è¿‡çš„è®°å½•,è¯¥ç‰ˆæœ¬å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®.</p></li><li><p>trx_id &lt; min_trx_id<br>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_id,å°äºreadviewä¸­çš„min_trx_idå€¼,è¡¨æ˜ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡åœ¨å½“å‰äº‹åŠ¡ç”Ÿæˆreadviewå‰å·²ç»æäº¤,è¯¥ç‰ˆæœ¬å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®.</p></li><li><p>trx_id &gt;&#x3D; max_trx_id<br>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_id,å¤§äºæˆ–ç­‰äºreadviewä¸­çš„max_trx_idå€¼,è¡¨æ˜ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡åœ¨å½“å‰äº‹åŠ¡ç”Ÿæˆreadviewåæ‰å¼€å¯,è¯¥ç‰ˆæœ¬ä¸å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®.</p></li><li><p>trx_id &gt; min_trx_id &amp;&amp; trx_id &lt; max_trx_id<br>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_id,å€¼åœ¨readviewçš„min_trx_idå’Œmax_trx_idä¹‹é—´ï¼Œå°±éœ€è¦åˆ¤æ–­trx_idå±æ€§å€¼æ˜¯ä¸æ˜¯åœ¨m_idsåˆ—è¡¨ä¸­ï¼Ÿ</p><ul><li>åœ¨ï¼šè¯´æ˜åˆ›å»ºreadviewæ—¶ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡è¿˜æ˜¯æ´»è·ƒçš„,è¯¥ç‰ˆæœ¬ä¸å¯ä»¥è¢«è®¿é—®</li><li>ä¸åœ¨ï¼šè¯´æ˜åˆ›å»ºreadviewæ—¶ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡å·²ç»è¢«æäº¤,è¯¥ç‰ˆæœ¬å¯ä»¥è¢«è®¿é—®</li></ul></li></ul><p><strong>ä½•æ—¶ç”Ÿæˆ ReadView å¿«ç…§</strong></p><ul><li>åœ¨ <strong>è¯»å·²æäº¤ï¼ˆRead Committedï¼Œ ç®€ç§°RCï¼‰</strong>  éš”ç¦»çº§åˆ«ä¸‹ï¼Œ**æ¯ä¸€æ¬¡ **è¯»å–æ•°æ®å‰éƒ½ç”Ÿæˆä¸€ä¸ªReadVIewã€‚</li><li>åœ¨ <strong>å¯é‡å¤è¯»</strong> ï¼ˆRepeatable Readï¼Œç®€ç§°RRï¼‰éš”ç¦»çº§åˆ«ä¸‹ï¼Œåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œåªåœ¨ <strong>ç¬¬ä¸€æ¬¡</strong>è¯»å–æ•°æ®å‰ç”Ÿæˆä¸€ä¸ª ReadVIewã€‚</li></ul><p><strong>4ï¼‰å¿«ç…§è¯»ï¼ˆ</strong>â€‹<strong>â€‹<code>Snapshot Read</code>â€‹</strong>â€‹ <strong>ï¼‰ä¸å½“å‰è¯» ï¼ˆ</strong>â€‹<strong>â€‹<code>Current Read</code>â€‹</strong>â€‹ <strong>ï¼‰</strong></p><p>åœ¨ MVCC å¹¶å‘æ§åˆ¶ä¸­ï¼Œè¯»æ“ä½œå¯ä»¥åˆ†ä¸ºä¸¤ç±»: å¿«ç…§è¯»ï¼ˆ<code>Snapshot Read</code>â€‹ï¼‰ä¸å½“å‰è¯» ï¼ˆ<code>Current Read</code>â€‹ï¼‰ã€‚</p><ul><li><p>å¿«ç…§è¯»<br>å¿«ç…§è¯»æ˜¯æŒ‡è¯»å–æ•°æ®æ—¶ä¸æ˜¯è¯»å–æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®ï¼Œè€Œæ˜¯åŸºäºå†å²ç‰ˆæœ¬è¯»å–çš„ä¸€ä¸ªå¿«ç…§ä¿¡æ¯ï¼ˆmysqlè¯»å–undo logå†å²ç‰ˆæœ¬) ï¼Œå¿«ç…§è¯»å¯ä»¥ä½¿æ™®é€šçš„SELECT è¯»å–æ•°æ®æ—¶ä¸ç”¨å¯¹è¡¨æ•°æ®è¿›è¡ŒåŠ é”ï¼Œä»è€Œè§£å†³äº†å› ä¸ºå¯¹æ•°æ®åº“è¡¨çš„åŠ é”è€Œå¯¼è‡´çš„ä¸¤ä¸ªå¦‚ä¸‹é—®é¢˜</p><ol><li>è§£å†³äº†å› åŠ é”å¯¼è‡´çš„ä¿®æ”¹æ•°æ®æ—¶æ— æ³•å¯¹æ•°æ®è¯»å–é—®é¢˜.</li><li>è§£å†³äº†å› åŠ é”å¯¼è‡´è¯»å–æ•°æ®æ—¶æ— æ³•å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹çš„é—®é¢˜.</li></ol></li><li><p>å½“å‰è¯»<br>å½“å‰è¯»æ˜¯è¯»å–çš„æ•°æ®åº“æœ€æ–°çš„æ•°æ®ï¼Œå½“å‰è¯»å’Œå¿«ç…§è¯»ä¸åŒï¼Œå› ä¸ºè¦è¯»å–æœ€æ–°çš„æ•°æ®è€Œä¸”è¦ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œæ‰€ä»¥å½“å‰è¯»æ˜¯éœ€è¦å¯¹æ•°æ®è¿›è¡ŒåŠ é”çš„ï¼ˆ<code>Update delete insert select ....lock in share mode</code>â€‹   , <code>select for update</code>â€‹ ä¸ºå½“å‰è¯»ï¼‰</p></li></ul><p><strong>æ€»ç»“ä¸€ä¸‹</strong></p><ul><li>å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå†™-å†™æ“ä½œæœ‰åŠ é”è§£å†³æ–¹æ¡ˆï¼Œä½†ä¸ºäº†æé«˜æ€§èƒ½ï¼ŒInnoDB å­˜å‚¨å¼•æ“æä¾› MVCCï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³è¯»-å†™ï¼Œå†™-è¯»æ“ä½œä¸‹ä¸åŠ é”ä»èƒ½å®‰å…¨è¿›è¡Œã€‚</li><li>MVCC çš„è¿‡ç¨‹ï¼Œæœ¬è´¨å°±æ˜¯è®¿é—®ç‰ˆæœ¬é“¾ï¼Œå¹¶åˆ¤æ–­å“ªä¸ªç‰ˆæœ¬å¯è§çš„è¿‡ç¨‹ã€‚è¯¥åˆ¤æ–­ç®—æ³•æ˜¯é€šè¿‡ç‰ˆæœ¬ä¸Šçš„ trx_id ä¸å¿«ç…§ ReadView çš„è‹¥å¹²ä¸ªä¿¡æ¯è¿›è¡Œå¯¹æ¯”ã€‚</li><li>å¿«ç…§ç”Ÿæˆçš„æ—¶æœºå› éš”ç¦»çº§åˆ«ä¸åŒï¼Œè¯»å·²æäº¤éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ¯ä¸€æ¬¡è¯»å–å‰éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå¿«ç…§ ReadViewï¼›è€Œå¯é‡å¤è¯»åˆ™ä»…åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œç¬¬ä¸€æ¬¡è¯»å–å‰ç”Ÿæˆä¸€ä¸ªå¿«ç…§ã€‚</li></ul><h3 id="67ã€è¯´ä¸€ä¸‹-MySQL-æ­»é”çš„åŸå› å’Œå¤„ç†æ–¹æ³•"><a href="#67ã€è¯´ä¸€ä¸‹-MySQL-æ­»é”çš„åŸå› å’Œå¤„ç†æ–¹æ³•" class="headerlink" title="67ã€è¯´ä¸€ä¸‹ MySQL æ­»é”çš„åŸå› å’Œå¤„ç†æ–¹æ³•"></a>67ã€è¯´ä¸€ä¸‹ MySQL æ­»é”çš„åŸå› å’Œå¤„ç†æ–¹æ³•</h3><p><strong>1) è¡¨çš„æ­»é”</strong></p><p><strong>äº§ç”ŸåŸå› :</strong></p><p>ç”¨æˆ·Aè®¿é—®è¡¨Aï¼ˆé”ä½äº†è¡¨Aï¼‰ï¼Œç„¶ååˆè®¿é—®è¡¨Bï¼›å¦ä¸€ä¸ªç”¨æˆ·Bè®¿é—®è¡¨Bï¼ˆé”ä½äº†è¡¨Bï¼‰ï¼Œç„¶åä¼å›¾è®¿é—®è¡¨Aï¼›è¿™æ—¶ç”¨æˆ·Aç”±äºç”¨æˆ·Bå·²ç»é”ä½è¡¨Bï¼Œå®ƒå¿…é¡»ç­‰å¾…ç”¨æˆ·Bé‡Šæ”¾è¡¨Bæ‰èƒ½ç»§ç»­ï¼ŒåŒæ ·ç”¨æˆ·Bè¦ç­‰ç”¨æˆ·Aé‡Šæ”¾è¡¨Aæ‰èƒ½ç»§ç»­ï¼Œè¿™å°±æ­»é”å°±äº§ç”Ÿäº†ã€‚</p><p>ç”¨æˆ·Aâ€“ã€‹Aè¡¨ï¼ˆè¡¨é”ï¼‰â€“ã€‹Bè¡¨ï¼ˆè¡¨é”ï¼‰</p><p>ç”¨æˆ·Bâ€“ã€‹Bè¡¨ï¼ˆè¡¨é”ï¼‰â€“ã€‹Aè¡¨ï¼ˆè¡¨é”ï¼‰</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>è¿™ç§æ­»é”æ¯”è¾ƒå¸¸è§ï¼Œæ˜¯ç”±äºç¨‹åºçš„BUGäº§ç”Ÿçš„ï¼Œé™¤äº†è°ƒæ•´çš„ç¨‹åºçš„é€»è¾‘æ²¡æœ‰å…¶å®ƒçš„åŠæ³•ã€‚</p><p>ä»”ç»†åˆ†æç¨‹åºçš„é€»è¾‘ï¼Œå¯¹äºæ•°æ®åº“çš„å¤šè¡¨æ“ä½œæ—¶ï¼Œå°½é‡æŒ‰ç…§ç›¸åŒçš„é¡ºåºè¿›è¡Œå¤„ç†ï¼Œå°½é‡é¿å…åŒæ—¶é”å®šä¸¤ä¸ªèµ„æºï¼Œå¦‚æ“ä½œAå’ŒBä¸¤å¼ è¡¨æ—¶ï¼Œæ€»æ˜¯æŒ‰å…ˆAåBçš„é¡ºåºå¤„ç†ï¼Œ å¿…é¡»åŒæ—¶é”å®šä¸¤ä¸ªèµ„æºæ—¶ï¼Œè¦ä¿è¯åœ¨ä»»ä½•æ—¶åˆ»éƒ½åº”è¯¥æŒ‰ç…§ç›¸åŒçš„é¡ºåºæ¥é”å®šèµ„æºã€‚</p><p><strong>2) è¡Œçº§é”æ­»é”</strong></p><p><strong>äº§ç”ŸåŸå› 1ï¼š</strong></p><p>å¦‚æœåœ¨äº‹åŠ¡ä¸­æ‰§è¡Œäº†ä¸€æ¡æ²¡æœ‰ç´¢å¼•æ¡ä»¶çš„æŸ¥è¯¢ï¼Œå¼•å‘å…¨è¡¨æ‰«æï¼ŒæŠŠè¡Œçº§é”ä¸Šå‡ä¸ºå…¨è¡¨è®°å½•é”å®šï¼ˆç­‰ä»·äºè¡¨çº§é”ï¼‰ï¼Œå¤šä¸ªè¿™æ ·çš„äº‹åŠ¡æ‰§è¡Œåï¼Œå°±å¾ˆå®¹æ˜“äº§ç”Ÿæ­»é”å’Œé˜»å¡ï¼Œæœ€ç»ˆåº”ç”¨ç³»ç»Ÿä¼šè¶Šæ¥è¶Šæ…¢ï¼Œå‘ç”Ÿé˜»å¡æˆ–æ­»é”ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ1ï¼š</strong></p><p>SQLè¯­å¥ä¸­ä¸è¦ä½¿ç”¨å¤ªå¤æ‚çš„å…³è”å¤šè¡¨çš„æŸ¥è¯¢ï¼›ä½¿ç”¨explainâ€œæ‰§è¡Œè®¡åˆ’â€å¯¹SQLè¯­å¥è¿›è¡Œåˆ†æï¼Œå¯¹äºæœ‰å…¨è¡¨æ‰«æå’Œå…¨è¡¨é”å®šçš„SQLè¯­å¥ï¼Œå»ºç«‹ç›¸åº”çš„ç´¢å¼•è¿›è¡Œä¼˜åŒ–ã€‚</p><p><strong>äº§ç”ŸåŸå› 2ï¼š</strong></p><ul><li><p>ä¸¤ä¸ªäº‹åŠ¡åˆ†åˆ«æƒ³æ‹¿åˆ°å¯¹æ–¹æŒæœ‰çš„é”ï¼Œäº’ç›¸ç­‰å¾…ï¼Œäºæ˜¯äº§ç”Ÿæ­»é”</p><p><img src="https://i0.hdslb.com/bfs/article/e6a53da8010cd05e08974df2721cd631645325325.png">â€‹</p></li></ul><p><strong>äº§ç”ŸåŸå› 3</strong>ï¼šæ¯ä¸ªäº‹åŠ¡åªæœ‰ä¸€ä¸ªSQL,ä½†æ˜¯æœ‰äº›æƒ…å†µè¿˜æ˜¯ä¼šå‘ç”Ÿæ­»é”.</p><ol><li>äº‹åŠ¡1,ä»nameç´¢å¼•å‡ºå‘ , è¯»åˆ°çš„[hdc, 1],  [hdc, 6]å‡æ»¡è¶³æ¡ä»¶, ä¸ä»…ä¼šåŠ nameç´¢å¼•ä¸Šçš„è®°å½•Xé”, è€Œä¸”ä¼šåŠ èšç°‡ç´¢å¼•ä¸Šçš„è®°å½•Xé”, åŠ é”é¡ºåºä¸ºå…ˆ[1,hdc,100], å[6,hdc,10]</li><li>äº‹åŠ¡2ï¼Œä»pubtimeç´¢å¼•å‡ºå‘ï¼Œ[10,6],[100,1]å‡æ»¡è¶³è¿‡æ»¤æ¡ä»¶ï¼ŒåŒæ ·ä¹Ÿä¼šåŠ èšç°‡ç´¢å¼•ä¸Šçš„è®°å½•Xé”ï¼ŒåŠ é”é¡ºåºä¸º[6,hdc,10]ï¼Œå[1,hdc,100]ã€‚</li><li>ä½†æ˜¯åŠ é”æ—¶å‘ç°è·Ÿäº‹åŠ¡1çš„åŠ é”é¡ºåºæ­£å¥½ç›¸åï¼Œä¸¤ä¸ªSessionæ°å¥½éƒ½æŒæœ‰äº†ç¬¬ä¸€æŠŠé”ï¼Œè¯·æ±‚åŠ ç¬¬äºŒæŠŠé”ï¼Œæ­»é”å°±å‘ç”Ÿäº†ã€‚</li></ol><p><img src="https://i0.hdslb.com/bfs/article/f29ba944ea6942c14e2d86780bbf017a645325325.png">â€‹</p><p><strong>è§£å†³æ–¹æ¡ˆ:</strong>  å¦‚ä¸Šé¢çš„åŸå› 2å’ŒåŸå› 3,  å¯¹ç´¢å¼•åŠ é”é¡ºåºçš„ä¸ä¸€è‡´å¾ˆå¯èƒ½ä¼šå¯¼è‡´æ­»é”ï¼Œæ‰€ä»¥å¦‚æœå¯ä»¥ï¼Œå°½é‡ä»¥ç›¸åŒçš„é¡ºåºæ¥è®¿é—®ç´¢å¼•è®°å½•å’Œè¡¨ã€‚åœ¨ç¨‹åºä»¥æ‰¹é‡æ–¹å¼å¤„ç†æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœäº‹å…ˆå¯¹æ•°æ®æ’åºï¼Œä¿è¯æ¯ä¸ªçº¿ç¨‹æŒ‰å›ºå®šçš„é¡ºåºæ¥å¤„ç†è®°å½•ï¼Œä¹Ÿå¯ä»¥å¤§å¤§é™ä½å‡ºç°æ­»é”çš„å¯èƒ½ï¼›</p><h3 id="68ã€ä»‹ç»ä¸€ä¸‹-MySQL-çš„ä½“ç³»æ¶æ„ï¼Ÿ"><a href="#68ã€ä»‹ç»ä¸€ä¸‹-MySQL-çš„ä½“ç³»æ¶æ„ï¼Ÿ" class="headerlink" title="68ã€ä»‹ç»ä¸€ä¸‹ MySQL çš„ä½“ç³»æ¶æ„ï¼Ÿ"></a>68ã€ä»‹ç»ä¸€ä¸‹ MySQL çš„ä½“ç³»æ¶æ„ï¼Ÿ</h3><p><img src="https://i0.hdslb.com/bfs/article/6779b38ea601df6834ec70b7d55d491e645325325.png">â€‹</p><p><strong>MySQL Serveræ¶æ„è‡ªé¡¶å‘ä¸‹å¤§è‡´å¯ä»¥åˆ†ç½‘ç»œè¿æ¥å±‚ã€æœåŠ¡å±‚ã€å­˜å‚¨å¼•æ“å±‚å’Œç³»ç»Ÿæ–‡ä»¶å±‚ã€‚</strong></p><p><strong>ä¸€ã€ç½‘ç»œè¿æ¥å±‚</strong></p><ul><li><strong>å®¢æˆ·ç«¯è¿æ¥å™¨ï¼ˆClient Connectorsï¼‰ï¼šæä¾›ä¸MySQLæœåŠ¡å™¨å»ºç«‹çš„æ”¯æŒã€‚ç›®å‰å‡ ä¹æ”¯æŒæ‰€æœ‰ä¸»æµçš„æœåŠ¡ç«¯ç¼–ç¨‹æŠ€æœ¯ï¼Œä¾‹å¦‚å¸¸è§çš„ Javaã€Cã€Pythonã€.NETç­‰ï¼Œå®ƒä»¬é€šè¿‡å„è‡ªAPIæŠ€æœ¯ä¸MySQLå»ºç«‹è¿æ¥ã€‚</strong></li></ul><p><strong>äºŒã€æœåŠ¡å±‚ï¼ˆMySQL Serverï¼‰</strong></p><p><strong>æœåŠ¡å±‚æ˜¯MySQL Serverçš„æ ¸å¿ƒï¼Œä¸»è¦åŒ…å«ç³»ç»Ÿç®¡ç†å’Œæ§åˆ¶å·¥å…·ã€è¿æ¥æ± ã€SQLæ¥å£ã€è§£æå™¨ã€æŸ¥è¯¢ä¼˜åŒ–å™¨å’Œç¼“å­˜å…­ä¸ªéƒ¨åˆ†ã€‚</strong></p><ul><li><p><strong>è¿æ¥æ± ï¼ˆConnection Poolï¼‰</strong> ï¼šè´Ÿè´£å­˜å‚¨å’Œç®¡ç†å®¢æˆ·ç«¯ä¸æ•°æ®åº“çš„è¿æ¥ï¼Œä¸€ä¸ªçº¿ç¨‹è´Ÿè´£ç®¡ç†ä¸€ä¸ªè¿æ¥ã€‚</p></li><li><p><strong>ç³»ç»Ÿç®¡ç†å’Œæ§åˆ¶å·¥å…·ï¼ˆManagement Services &amp; Utilitiesï¼‰</strong> ï¼šä¾‹å¦‚å¤‡ä»½æ¢å¤ã€å®‰å…¨ç®¡ç†ã€é›†ç¾¤ç®¡ç†ç­‰</p></li><li><p><strong>SQLæ¥å£ï¼ˆSQL Interfaceï¼‰</strong> ï¼šç”¨äºæ¥å—å®¢æˆ·ç«¯å‘é€çš„å„ç§SQLå‘½ä»¤ï¼Œå¹¶ä¸”è¿”å›ç”¨æˆ·éœ€è¦æŸ¥è¯¢çš„ç»“æœã€‚æ¯”å¦‚DMLã€DDLã€å­˜å‚¨è¿‡ç¨‹ã€è§†å›¾ã€è§¦å‘å™¨ç­‰ã€‚</p></li><li><p><strong>è§£æå™¨ï¼ˆParserï¼‰</strong> ï¼šè´Ÿè´£å°†è¯·æ±‚çš„SQLè§£æç”Ÿæˆä¸€ä¸ªâ€è§£ææ ‘â€ã€‚ç„¶åæ ¹æ®ä¸€äº›MySQLè§„åˆ™è¿›ä¸€æ­¥æ£€æŸ¥è§£ææ ‘æ˜¯å¦åˆæ³•ã€‚</p></li><li><p><strong>æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼ˆOptimizerï¼‰</strong> ï¼šå½“â€œè§£ææ ‘â€é€šè¿‡è§£æå™¨è¯­æ³•æ£€æŸ¥åï¼Œå°†äº¤ç”±ä¼˜åŒ–å™¨å°†å…¶è½¬åŒ–æˆæ‰§è¡Œè®¡åˆ’ï¼Œç„¶åä¸å­˜å‚¨å¼•æ“äº¤äº’ã€‚</p><blockquote><p><strong>select uid,name from user where gender&#x3D;1;</strong></p><p><strong>é€‰å–â€“ã€‹æŠ•å½±â€“ã€‹è”æ¥ ç­–ç•¥</strong></p><p><strong>1ï¼‰selectå…ˆæ ¹æ®whereè¯­å¥è¿›è¡Œé€‰å–ï¼Œå¹¶ä¸æ˜¯æŸ¥è¯¢å‡ºå…¨éƒ¨æ•°æ®å†è¿‡æ»¤</strong></p><p><strong>2ï¼‰selectæŸ¥è¯¢æ ¹æ®uidå’Œnameè¿›è¡Œå±æ€§æŠ•å½±ï¼Œå¹¶ä¸æ˜¯å–å‡ºæ‰€æœ‰å­—æ®µ</strong></p><p><strong>3ï¼‰å°†å‰é¢é€‰å–å’ŒæŠ•å½±è”æ¥èµ·æ¥æœ€ç»ˆç”ŸæˆæŸ¥è¯¢ç»“æœ</strong></p></blockquote></li><li><p><strong>ç¼“å­˜ï¼ˆCache&amp;Bufferï¼‰</strong> ï¼š ç¼“å­˜æœºåˆ¶æ˜¯ç”±ä¸€ç³»åˆ—å°ç¼“å­˜ç»„æˆçš„ã€‚æ¯”å¦‚è¡¨ç¼“å­˜ï¼Œè®°å½•ç¼“å­˜ï¼Œæƒé™ç¼“å­˜ï¼Œå¼•æ“ç¼“å­˜ç­‰ã€‚å¦‚æœæŸ¥è¯¢ç¼“å­˜æœ‰å‘½ä¸­çš„æŸ¥è¯¢ç»“æœï¼ŒæŸ¥è¯¢è¯­å¥å°±å¯ä»¥ç›´æ¥å»æŸ¥è¯¢ç¼“å­˜ä¸­å–æ•°æ®ã€‚</p></li></ul><p><strong>ä¸‰ã€å­˜å‚¨å¼•æ“å±‚ï¼ˆPluggable Storage Enginesï¼‰</strong></p><p><strong>å­˜å‚¨å¼•æ“è´Ÿè´£MySQLä¸­æ•°æ®çš„å­˜å‚¨ä¸æå–ï¼Œä¸åº•å±‚ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œäº¤äº’ã€‚MySQLå­˜å‚¨å¼•æ“æ˜¯æ’ä»¶å¼çš„ï¼ŒæœåŠ¡å™¨ä¸­çš„æŸ¥è¯¢æ‰§è¡Œå¼•æ“é€šè¿‡æ¥å£ä¸å­˜å‚¨å¼•æ“è¿›è¡Œé€šä¿¡ï¼Œæ¥å£å±è”½äº†ä¸åŒå­˜å‚¨å¼•æ“ä¹‹é—´çš„å·®å¼‚ ã€‚ç°åœ¨æœ‰å¾ˆå¤šç§å­˜å‚¨å¼•æ“ï¼Œå„æœ‰å„çš„ç‰¹ç‚¹ï¼Œæœ€å¸¸è§çš„æ˜¯MyISAMå’ŒInnoDBã€‚</strong></p><p><strong>å››ã€ç³»ç»Ÿæ–‡ä»¶å±‚ï¼ˆFile Systemï¼‰</strong></p><p><strong>è¯¥å±‚è´Ÿè´£å°†æ•°æ®åº“çš„æ•°æ®å’Œæ—¥å¿—å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šï¼Œå¹¶å®Œæˆä¸å­˜å‚¨å¼•æ“çš„äº¤äº’ï¼Œæ˜¯æ–‡ä»¶çš„ç‰©ç†å­˜å‚¨å±‚ã€‚ä¸»è¦åŒ…å«æ—¥å¿—æ–‡ä»¶ï¼Œæ•°æ®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œpid æ–‡ä»¶ï¼Œsocket æ–‡ä»¶ç­‰ã€‚</strong></p><ul><li><p><strong>æ—¥å¿—æ–‡ä»¶</strong></p><ul><li><strong>é”™è¯¯æ—¥å¿—ï¼ˆError logï¼‰</strong><br><strong>é»˜è®¤å¼€å¯ï¼Œshow variables like â€˜%log_error%â€™</strong></li><li><strong>é€šç”¨æŸ¥è¯¢æ—¥å¿—ï¼ˆGeneral query logï¼‰</strong><br><strong>è®°å½•ä¸€èˆ¬æŸ¥è¯¢è¯­å¥ï¼Œshow variables like â€˜%general%â€™;</strong></li><li><strong>äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinary logï¼‰</strong><br><strong>è®°å½•äº†å¯¹MySQLæ•°æ®åº“æ‰§è¡Œçš„æ›´æ”¹æ“ä½œï¼Œå¹¶ä¸”è®°å½•äº†è¯­å¥çš„å‘ç”Ÿæ—¶é—´ã€æ‰§è¡Œæ—¶é•¿ï¼›ä½†æ˜¯å®ƒä¸è®°å½•selectã€showç­‰ä¸ä¿®æ”¹æ•°æ®åº“çš„SQLã€‚ä¸»è¦ç”¨äºæ•°æ®åº“æ¢å¤å’Œä¸»ä»å¤åˆ¶ã€‚</strong><br><strong>show variables like â€˜%log_bin%â€™; &#x2F;&#x2F;æ˜¯å¦å¼€å¯</strong><br><strong>show variables like â€˜%binlog%â€™; &#x2F;&#x2F;å‚æ•°æŸ¥çœ‹</strong><br><strong>show binary logs;&#x2F;&#x2F;æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶</strong></li><li><strong>æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ˆSlow query logï¼‰</strong><br><strong>è®°å½•æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…æ—¶çš„æŸ¥è¯¢SQLï¼Œé»˜è®¤æ˜¯10ç§’ã€‚</strong><br><strong>show variables like â€˜%slow_query%â€™; &#x2F;&#x2F;æ˜¯å¦å¼€å¯</strong><br><strong>show variables like â€˜%long_query_time%â€™; &#x2F;&#x2F;æ—¶é•¿</strong></li></ul></li><li><p><strong>é…ç½®æ–‡ä»¶</strong><br><strong>ç”¨äºå­˜æ”¾MySQLæ‰€æœ‰çš„é…ç½®ä¿¡æ¯æ–‡ä»¶ï¼Œæ¯”å¦‚my.cnfã€my.iniç­‰ã€‚</strong></p></li><li><p><strong>æ•°æ®æ–‡ä»¶</strong></p><ul><li><strong>db.opt æ–‡ä»¶ï¼šè®°å½•è¿™ä¸ªåº“çš„é»˜è®¤ä½¿ç”¨çš„å­—ç¬¦é›†å’Œæ ¡éªŒè§„åˆ™ã€‚</strong></li><li><strong>frm æ–‡ä»¶ï¼šå­˜å‚¨ä¸è¡¨ç›¸å…³çš„å…ƒæ•°æ®ï¼ˆmetaï¼‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¡¨ç»“æ„çš„å®šä¹‰ä¿¡æ¯ç­‰ï¼Œæ¯ä¸€å¼ è¡¨éƒ½ä¼šæœ‰ä¸€ä¸ªfrm æ–‡ä»¶ã€‚</strong></li><li><strong>MYD æ–‡ä»¶ï¼šMyISAM å­˜å‚¨å¼•æ“ä¸“ç”¨ï¼Œå­˜æ”¾ MyISAM è¡¨çš„æ•°æ®ï¼ˆdata)ï¼Œæ¯ä¸€å¼ è¡¨éƒ½ä¼šæœ‰ä¸€ä¸ª .MYD æ–‡ä»¶ã€‚</strong></li><li><strong>MYI æ–‡ä»¶ï¼šMyISAM å­˜å‚¨å¼•æ“ä¸“ç”¨ï¼Œå­˜æ”¾ MyISAM è¡¨çš„ç´¢å¼•ç›¸å…³ä¿¡æ¯ï¼Œæ¯ä¸€å¼  MyISAM è¡¨å¯¹åº”ä¸€ä¸ª .MYI æ–‡ä»¶ã€‚</strong></li><li><strong>ibdæ–‡ä»¶å’Œ IBDATA æ–‡ä»¶ï¼šå­˜æ”¾ InnoDB çš„æ•°æ®æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç´¢å¼•ï¼‰ã€‚InnoDB å­˜å‚¨å¼•æ“æœ‰ä¸¤ç§è¡¨ç©ºé—´æ–¹å¼ï¼šç‹¬äº«è¡¨ç©ºé—´å’Œå…±äº«è¡¨ç©ºé—´ã€‚ç‹¬äº«è¡¨ç©ºé—´ä½¿ç”¨ .ibd æ–‡ä»¶æ¥å­˜æ”¾æ•°æ®ï¼Œä¸”æ¯ä¸€å¼  InnoDB è¡¨å¯¹åº”ä¸€ä¸ª .ibd æ–‡ä»¶ã€‚å…±äº«è¡¨ç©ºé—´ä½¿ç”¨ .ibdata æ–‡ä»¶ï¼Œæ‰€æœ‰è¡¨å…±åŒä½¿ç”¨ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼Œè‡ªè¡Œé…ç½®ï¼‰.ibdata æ–‡ä»¶ã€‚</strong></li><li><strong>ibdata1 æ–‡ä»¶ï¼šç³»ç»Ÿè¡¨ç©ºé—´æ•°æ®æ–‡ä»¶ï¼Œå­˜å‚¨è¡¨å…ƒæ•°æ®ã€Undoæ—¥å¿—ç­‰ ã€‚</strong></li><li><strong>ib_logfile0ã€ib_logfile1 æ–‡ä»¶ï¼šRedo log æ—¥å¿—æ–‡ä»¶ã€‚</strong></li></ul></li><li><p><strong>pid æ–‡ä»¶</strong><br><strong>pid æ–‡ä»¶æ˜¯ mysqld åº”ç”¨ç¨‹åºåœ¨ Unix&#x2F;Linux ç¯å¢ƒä¸‹çš„ä¸€ä¸ªè¿›ç¨‹æ–‡ä»¶ï¼Œå’Œè®¸å¤šå…¶ä»– Unix&#x2F;Linux æœåŠ¡ç«¯ç¨‹åºä¸€æ ·ï¼Œå®ƒå­˜æ”¾ç€è‡ªå·±çš„è¿›ç¨‹ idã€‚</strong></p></li><li><p><strong>socket æ–‡ä»¶</strong><br><strong>socket æ–‡ä»¶ä¹Ÿæ˜¯åœ¨ Unix&#x2F;Linux ç¯å¢ƒä¸‹æ‰æœ‰çš„ï¼Œç”¨æˆ·åœ¨ Unix&#x2F;Linux ç¯å¢ƒä¸‹å®¢æˆ·ç«¯è¿æ¥å¯ä»¥ä¸é€šè¿‡ TCP&#x2F;IP ç½‘ç»œè€Œç›´æ¥ä½¿ç”¨ Unix Socket æ¥è¿æ¥ MySQLã€‚</strong></p></li></ul><h3 id="69ã€undo-logã€redo-logã€-bin-log-çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#69ã€undo-logã€redo-logã€-bin-log-çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="69ã€undo logã€redo logã€ bin log çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>69ã€undo logã€redo logã€ bin log çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p><strong>undo log åŸºæœ¬æ¦‚å¿µ</strong></p><ul><li>undo logæ˜¯ä¸€ç§ç”¨äºæ’¤é”€å›é€€çš„æ—¥å¿—ï¼Œåœ¨æ•°æ®åº“äº‹åŠ¡å¼€å§‹ä¹‹å‰ï¼ŒMySQL ä¼šå…ˆè®°å½•æ›´æ–°å‰çš„æ•°æ®åˆ° undo log æ—¥å¿—æ–‡ä»¶é‡Œé¢ï¼Œå½“äº‹åŠ¡å›æ»šæ—¶æˆ–è€…æ•°æ®åº“å´©æºƒæ—¶ï¼Œå¯ä»¥åˆ©ç”¨ undo log æ¥è¿›è¡Œå›é€€ã€‚</li><li>Undo Logäº§ç”Ÿå’Œé”€æ¯ï¼šUndo Log åœ¨äº‹åŠ¡å¼€å§‹å‰äº§ç”Ÿï¼›äº‹åŠ¡åœ¨æäº¤æ—¶ï¼Œå¹¶ä¸ä¼šç«‹åˆ»åˆ é™¤ undo logï¼Œinnodb ä¼šå°†è¯¥äº‹åŠ¡å¯¹åº”çš„ undo logæ”¾å…¥åˆ°åˆ é™¤åˆ—è¡¨ä¸­ï¼Œåé¢ä¼šé€šè¿‡åå°çº¿ç¨‹ purge thread è¿›è¡Œå›æ”¶å¤„ç†ã€‚</li></ul><p><strong>æ³¨æ„: undo log ä¹Ÿä¼šäº§ç”Ÿ redo logï¼Œå› ä¸º undo log ä¹Ÿè¦å®ç°æŒä¹…æ€§ä¿æŠ¤ã€‚</strong></p><p><strong>undo log çš„ä½œç”¨</strong></p><ol><li><strong>æä¾›å›æ»šæ“ä½œã€undo log å®ç°äº‹åŠ¡çš„åŸå­æ€§ã€‘</strong><br> åœ¨æ•°æ®ä¿®æ”¹çš„æ—¶å€™ï¼Œä¸ä»…è®°å½•äº† redo logï¼Œè¿˜è®°å½•äº†ç›¸å¯¹åº”çš„ undo logï¼Œå¦‚æœå› ä¸ºæŸäº›åŸå› å¯¼è‡´äº‹åŠ¡æ‰§è¡Œå¤±è´¥äº†ï¼Œå¯ä»¥å€ŸåŠ© undo logè¿›è¡Œå›æ»šã€‚<br> <em>undo log å’Œ redo log è®°å½•ç‰©ç†æ—¥å¿—ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯</em>é€»è¾‘æ—¥å¿—ã€‚å¯ä»¥è®¤ä¸ºå½“ delete ä¸€æ¡è®°å½•æ—¶ï¼Œundo log ä¸­ä¼šè®°å½•ä¸€æ¡å¯¹åº”çš„ insert è®°å½•ï¼Œåä¹‹äº¦ç„¶ï¼Œå½“ update ä¸€æ¡è®°å½•æ—¶ï¼Œå®ƒè®°å½•ä¸€æ¡å¯¹åº”ç›¸åçš„ update è®°å½•ã€‚</li><li><strong>æä¾›å¤šç‰ˆæœ¬æ§åˆ¶(MVCC)ã€</strong>â€‹<em><strong>undo logå®ç°å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰</strong></em>â€‹ <strong>ã€‘</strong><br> MVCCï¼Œå³å¤šç‰ˆæœ¬æ§åˆ¶ã€‚åœ¨ MySQL æ•°æ®åº“ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œç”¨ undo Log æ¥å®ç°å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰ã€‚å½“è¯»å–çš„æŸä¸€è¡Œè¢«å…¶ä»–äº‹åŠ¡é”å®šæ—¶ï¼Œå®ƒå¯ä»¥ä» undo log ä¸­åˆ†æå‡ºè¯¥è¡Œè®°å½•ä»¥å‰çš„æ•°æ®ç‰ˆæœ¬æ˜¯æ€æ ·çš„ï¼Œä»è€Œè®©ç”¨æˆ·èƒ½å¤Ÿè¯»å–åˆ°å½“å‰äº‹åŠ¡æ“ä½œä¹‹å‰çš„æ•°æ®ã€å¿«ç…§è¯»ã€‘ã€‚</li></ol><p><strong>redo log åŸºæœ¬æ¦‚å¿µ</strong></p><ul><li>InnoDB å¼•æ“å¯¹æ•°æ®çš„æ›´æ–°ï¼Œæ˜¯å…ˆå°†æ›´æ–°è®°å½•å†™å…¥ redo log æ—¥å¿—ï¼Œç„¶åä¼šåœ¨ç³»ç»Ÿç©ºé—²çš„æ—¶å€™æˆ–è€…æ˜¯æŒ‰ç…§è®¾å®šçš„æ›´æ–°ç­–ç•¥å†å°†æ—¥å¿—ä¸­çš„å†…å®¹æ›´æ–°åˆ°ç£ç›˜ä¹‹ä¸­ã€‚è¿™å°±æ˜¯æ‰€è°“çš„é¢„å†™å¼æŠ€æœ¯ï¼ˆWrite Ahead loggingï¼‰ã€‚è¿™ç§æŠ€æœ¯å¯ä»¥å¤§å¤§å‡å°‘ IO æ“ä½œçš„é¢‘ç‡ï¼Œæå‡æ•°æ®åˆ·æ–°çš„æ•ˆç‡ã€‚</li><li>redo logï¼šè¢«ç§°ä½œé‡åšæ—¥å¿—, åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šä¸€ä¸ªæ˜¯å†…å­˜ä¸­çš„æ—¥å¿—ç¼“å†²ï¼š <code>redo log buffer</code>â€‹ï¼Œå¦ä¸€ä¸ªæ˜¯ç£ç›˜ä¸Šçš„æ—¥å¿—æ–‡ä»¶ï¼š <code>redo log file</code>â€‹ ã€‚</li></ul><p><strong>redo logçš„ä½œç”¨</strong></p><ul><li>mysql æ¯æ‰§è¡Œä¸€æ¡ DML è¯­å¥ï¼Œå…ˆå°†è®°å½•å†™å…¥ redo log buffer ã€‚åç»­æŸä¸ªæ—¶é—´ç‚¹å†ä¸€æ¬¡æ€§å°†å¤šä¸ªæ“ä½œè®°å½•å†™åˆ° redo log file ã€‚å½“æ•…éšœå‘ç”Ÿè‡´ä½¿å†…å­˜æ•°æ®ä¸¢å¤±åï¼ŒInnoDB ä¼šåœ¨é‡å¯æ—¶ï¼Œç»è¿‡é‡æ”¾ redoï¼Œå°† Page æ¢å¤åˆ°å´©æºƒä¹‹å‰çš„çŠ¶æ€ <strong>é€šè¿‡ Redo log å¯ä»¥å®ç°äº‹åŠ¡çš„æŒä¹…æ€§ ã€‚</strong></li></ul><p><strong>bin log åŸºæœ¬æ¦‚å¿µ</strong></p><ul><li><p>binlog æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ ¼å¼çš„æ–‡ä»¶ï¼Œç”¨äºè®°å½•ç”¨æˆ·å¯¹æ•°æ®åº“æ›´æ–°çš„ SQL è¯­å¥ä¿¡æ¯ï¼Œä¾‹å¦‚æ›´æ”¹æ•°æ®åº“è¡¨å’Œæ›´æ”¹å†…å®¹çš„SQLè¯­å¥éƒ½ä¼šè®°å½•åˆ°binlogé‡Œï¼Œä½†æ˜¯ä¸ä¼šè®°å½•SELECTå’ŒSHOWè¿™ç±»æ“ä½œã€‚</p></li><li><p>binlogåœ¨MySQLçš„Serverå±‚å®ç°(å¼•æ“å…±ç”¨)</p></li><li><p>binlogä¸ºé€»è¾‘æ—¥å¿—,è®°å½•çš„æ˜¯ä¸€æ¡SQLè¯­å¥çš„åŸå§‹é€»è¾‘</p><ul><li>binlogä¸é™åˆ¶å¤§å°,è¿½åŠ å†™å…¥,ä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—.</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œbinlogæ—¥å¿—æ˜¯äºŒè¿›åˆ¶æ ¼å¼çš„ï¼Œä¸èƒ½ä½¿ç”¨æŸ¥çœ‹æ–‡æœ¬å·¥å…·çš„å‘½ä»¤ï¼ˆæ¯”å¦‚ï¼Œcatï¼Œviç­‰ï¼‰æŸ¥çœ‹ï¼Œè€Œä½¿ç”¨mysqlbinlogè§£ææŸ¥çœ‹ã€‚</li></ul></li></ul><p><strong>bin log çš„ä½œç”¨</strong></p><ol><li>ä¸»ä»å¤åˆ¶ï¼šåœ¨ä¸»åº“ä¸­å¼€å¯ Binlog åŠŸèƒ½ï¼Œè¿™æ ·ä¸»åº“å°±å¯ä»¥æŠŠ Binlog ä¼ é€’ç»™ä»åº“ï¼Œä»åº“æ‹¿åˆ°Binlogåå®ç°æ•°æ®æ¢å¤è¾¾åˆ°ä¸»ä»æ•°æ®ä¸€è‡´æ€§ã€‚</li><li>æ•°æ®æ¢å¤ï¼šé€šè¿‡mysqlbinlogå·¥å…·æ¥æ¢å¤æ•°æ®ã€‚</li></ol><h3 id="70ã€redo-log-ä¸-undo-log-çš„æŒä¹…åŒ–ç­–ç•¥ï¼Ÿ"><a href="#70ã€redo-log-ä¸-undo-log-çš„æŒä¹…åŒ–ç­–ç•¥ï¼Ÿ" class="headerlink" title="70ã€redo log ä¸ undo log çš„æŒä¹…åŒ–ç­–ç•¥ï¼Ÿ"></a>70ã€redo log ä¸ undo log çš„æŒä¹…åŒ–ç­–ç•¥ï¼Ÿ</h3><p><strong>redo logæŒä¹…åŒ–</strong></p><p>ç¼“å†²åŒºæ•°æ®ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æ— æ³•ç›´æ¥å†™å…¥ç£ç›˜çš„ï¼Œä¸­é—´å¿…é¡»ç»è¿‡æ“ä½œç³»ç»Ÿç¼“å†²åŒº( OS Buffer )ã€‚å› æ­¤ï¼Œ redo log buffer å†™å…¥ redo logfile å®é™…ä¸Šæ˜¯å…ˆå†™å…¥ OS Bufferï¼Œç„¶åå†é€šè¿‡ç³»ç»Ÿè°ƒç”¨ fsync() å°†å…¶åˆ·åˆ° redo log file.</p><p>Redo Buffer æŒä¹…åŒ–åˆ° redo log çš„ç­–ç•¥ï¼Œå¯é€šè¿‡ <code>Innodb_flush_log_at_trx_commit</code>â€‹ è®¾ç½®ï¼š</p><table><thead><tr><th><strong>å‚æ•°å€¼</strong></th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>0 (å»¶è¿Ÿå†™)</td><td>äº‹åŠ¡æäº¤æ—¶ä¸ä¼šå°† <code>redo log buffer</code>â€‹ä¸­æ—¥å¿—å†™å…¥åˆ° <code>os buffer</code>â€‹ï¼Œ è€Œæ˜¯æ¯ç§’å†™å…¥ <code>os buffer</code>â€‹å¹¶è°ƒç”¨ <code>fsync()</code>â€‹å†™å…¥åˆ° <code>redo log file</code>â€‹ä¸­ã€‚ ä¹Ÿå°±æ˜¯è¯´è®¾ç½®ä¸º0æ—¶æ˜¯(å¤§çº¦)æ¯ç§’åˆ·æ–°å†™å…¥åˆ°ç£ç›˜ä¸­çš„ï¼Œå½“ç³»ç»Ÿå´©æºƒï¼Œä¼šä¸¢å¤±1ç§’é’Ÿçš„æ•°æ®ã€‚</td></tr><tr><td>1  (å®æ—¶å†™,å®æ—¶åˆ·)</td><td>äº‹åŠ¡æ¯æ¬¡æäº¤éƒ½ä¼šå°† <code>redo log buffer</code>â€‹ä¸­çš„æ—¥å¿—å†™å…¥ <code>os buffer</code>â€‹å¹¶ è°ƒç”¨ <code>fsync()</code>â€‹åˆ·åˆ° <code>redo log file</code>â€‹ä¸­ã€‚è¿™ç§æ–¹å¼å³ä½¿ç³»ç»Ÿå´©æºƒä¹Ÿä¸ä¼šä¸¢å¤±ä»»ä½•æ•°æ®ï¼Œä½†æ˜¯å› ä¸ºæ¯æ¬¡æäº¤éƒ½å†™å…¥ç£ç›˜ï¼ŒIOçš„æ€§èƒ½è¾ƒå·®ã€‚</td></tr><tr><td>2 (å®æ—¶å†™, å»¶æ—¶åˆ·)</td><td>æ¯æ¬¡æäº¤éƒ½ä»…å†™å…¥åˆ° <code>os buffer</code>â€‹ï¼Œç„¶åæ˜¯æ¯ç§’è°ƒç”¨ <code>fsync()</code>â€‹å°† <code>os buffer</code>â€‹ä¸­çš„æ—¥å¿—å†™å…¥åˆ° <code>redo log file</code>â€‹ã€‚</td></tr></tbody></table><p><img src="https://i0.hdslb.com/bfs/article/1b10ad28800b83215fe2e0778bcacc06645325325.png">â€‹</p><p>ä¸€èˆ¬å»ºè®®é€‰æ‹©å–å€¼2ï¼Œå› ä¸º MySQL æŒ‚äº†æ•°æ®æ²¡æœ‰æŸå¤±ï¼Œæ•´ä¸ªæœåŠ¡å™¨æŒ‚äº†æ‰ä¼šæŸå¤±1ç§’çš„äº‹åŠ¡æäº¤æ•°æ®</p><p><strong>undo logæŒä¹…åŒ–</strong></p><p>MySQLä¸­çš„Undo Logä¸¥æ ¼çš„è®²ä¸æ˜¯Logï¼Œè€Œæ˜¯æ•°æ®ï¼Œå› æ­¤ä»–çš„ç®¡ç†å’Œè½ç›˜éƒ½è·Ÿæ•°æ®æ˜¯ä¸€æ ·çš„ï¼š</p><ul><li>Undoçš„ç£ç›˜ç»“æ„å¹¶ä¸æ˜¯é¡ºåºçš„ï¼Œè€Œæ˜¯åƒæ•°æ®ä¸€æ ·æŒ‰Pageç®¡ç†</li><li>Undoå†™å…¥æ—¶ï¼Œä¹Ÿåƒæ•°æ®ä¸€æ ·äº§ç”Ÿå¯¹åº”çš„Redo Log (å› ä¸ºundoä¹Ÿæ˜¯å¯¹é¡µé¢çš„ä¿®æ”¹ï¼Œè®°å½•undoè¿™ä¸ªæ“ä½œæœ¬èº«ä¹Ÿä¼šæœ‰å¯¹åº”çš„redo)ã€‚</li><li>Undoçš„Pageä¹Ÿåƒæ•°æ®ä¸€æ ·ç¼“å­˜åœ¨Buffer Poolä¸­ï¼Œè·Ÿæ•°æ®Pageä¸€èµ·åšLRUæ¢å…¥æ¢å‡ºï¼Œä»¥åŠåˆ·è„ã€‚Undo Pageçš„åˆ·è„ä¹Ÿåƒæ•°æ®ä¸€æ ·è¦ç­‰åˆ°å¯¹åº”çš„Redo Log è½ç›˜ä¹‹å</li></ul><p>å½“äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œinnodbä¸ä¼šç«‹å³åˆ é™¤undo logï¼Œå› ä¸ºåç»­è¿˜å¯èƒ½ä¼šç”¨åˆ°undo logï¼Œå¦‚éš”ç¦»çº§åˆ«ä¸ºrepeatable readæ—¶ï¼Œäº‹åŠ¡è¯»å–çš„éƒ½æ˜¯å¼€å¯äº‹åŠ¡æ—¶çš„æœ€æ–°æäº¤è¡Œç‰ˆæœ¬ï¼Œåªè¦è¯¥äº‹åŠ¡ä¸ç»“æŸï¼Œè¯¥è¡Œç‰ˆæœ¬å°±ä¸èƒ½åˆ é™¤ï¼Œå³undo logä¸èƒ½åˆ é™¤ã€‚</p><p>ä½†æ˜¯åœ¨äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œä¼šå°†è¯¥äº‹åŠ¡å¯¹åº”çš„undo logæ”¾å…¥åˆ°åˆ é™¤åˆ—è¡¨ä¸­ï¼Œæœªæ¥é€šè¿‡purgeæ¥åˆ é™¤ã€‚å¹¶ä¸”æäº¤äº‹åŠ¡æ—¶ï¼Œè¿˜ä¼šåˆ¤æ–­undo logåˆ†é…çš„é¡µæ˜¯å¦å¯ä»¥é‡ç”¨ï¼Œå¦‚æœå¯ä»¥é‡ç”¨ï¼Œåˆ™ä¼šåˆ†é…ç»™åé¢æ¥çš„äº‹åŠ¡ï¼Œé¿å…ä¸ºæ¯ä¸ªç‹¬ç«‹çš„äº‹åŠ¡åˆ†é…ç‹¬ç«‹çš„undo logé¡µè€Œæµªè´¹å­˜å‚¨ç©ºé—´å’Œæ€§èƒ½ã€‚</p><h3 id="71ã€bin-log-ä¸-undo-log-çš„åŒºåˆ«ï¼Ÿ"><a href="#71ã€bin-log-ä¸-undo-log-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="71ã€bin log ä¸ undo log çš„åŒºåˆ«ï¼Ÿ"></a>71ã€bin log ä¸ undo log çš„åŒºåˆ«ï¼Ÿ</h3><p><strong>1ï¼‰redo log æ˜¯ InnoDB å¼•æ“ç‰¹æœ‰çš„ï¼›binlogæ˜¯MySQLçš„Serverå±‚å®ç°çš„ï¼Œæ‰€æœ‰å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ã€‚</strong></p><p><strong>2ï¼‰redo logæ˜¯ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯â€œåœ¨XXXæ•°æ®é¡µä¸Šåšäº†XXXä¿®æ”¹â€ï¼›binlog æ˜¯é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯åŸå§‹é€»è¾‘ï¼Œå…¶è®°å½•æ˜¯å¯¹åº”çš„SQLè¯­å¥ã€‚</strong></p><ul><li>ç‰©ç†æ—¥å¿—: è®°å½•çš„æ˜¯æ¯ä¸€ä¸ªpageé¡µä¸­å…·ä½“å­˜å‚¨çš„å€¼æ˜¯å¤šå°‘ï¼Œåœ¨è¿™ä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹.  æ¯”å¦‚: æŸä¸ªäº‹ç‰©å°†ç³»ç»Ÿè¡¨ç©ºé—´ä¸­çš„ç¬¬100ä¸ªé¡µé¢ä¸­åç§»é‡ä¸º1000å¤„çš„é‚£ä¸ªå­—èŠ‚çš„å€¼1æ”¹ä¸º2.</li><li>é€»è¾‘æ—¥å¿—: è®°å½•çš„æ˜¯æ¯ä¸€ä¸ªpageé¡µé¢ä¸­å…·ä½“æ•°æ®æ˜¯æ€ä¹ˆå˜åŠ¨çš„ï¼Œå®ƒä¼šè®°å½•ä¸€ä¸ªå˜åŠ¨çš„è¿‡ç¨‹æˆ–SQLè¯­å¥çš„é€»è¾‘, æ¯”å¦‚: æŠŠä¸€ä¸ªpageé¡µä¸­çš„ä¸€ä¸ªæ•°æ®ä»1æ”¹ä¸º2ï¼Œå†ä»2æ”¹ä¸º3,é€»è¾‘æ—¥å¿—å°±ä¼šè®°å½•1-&gt;2,2-&gt;3è¿™ä¸ªæ•°æ®å˜åŒ–çš„è¿‡ç¨‹.</li></ul><p><strong>3ï¼‰redo logæ˜¯å¾ªç¯å†™çš„ï¼Œç©ºé—´ä¸€å®šä¼šç”¨å®Œï¼Œéœ€è¦write poså’Œcheck pointæ­é…ï¼›binlogæ˜¯è¿½åŠ å†™ï¼Œå†™åˆ°ä¸€å®šå¤§å°ä¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªï¼Œå¹¶ä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—</strong></p><ul><li>Redo Log æ–‡ä»¶å†…å®¹æ˜¯ä»¥é¡ºåºå¾ªç¯çš„æ–¹å¼å†™å…¥æ–‡ä»¶ï¼Œå†™æ»¡æ—¶åˆ™å›æº¯åˆ°ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿›è¡Œè¦†ç›–å†™ã€‚</li></ul><p><img src="https://i0.hdslb.com/bfs/article/a5474cc0cc02572c55cd40610ad6a5a0645325325.png">â€‹</p><ul><li><strong>write pos</strong>: è¡¨ç¤ºæ—¥å¿—å½“å‰è®°å½•çš„ä½ç½®ï¼Œå½“ib_logfile_4å†™æ»¡åï¼Œä¼šä»ib_logfile_1ä»å¤´å¼€å§‹è®°å½•ï¼›</li><li><strong>check point</strong>: è¡¨ç¤ºå°†æ—¥å¿—è®°å½•çš„ä¿®æ”¹å†™è¿›ç£ç›˜ï¼Œå®Œæˆæ•°æ®è½ç›˜ï¼Œæ•°æ®è½ç›˜åcheckpointä¼šå°†æ—¥å¿—ä¸Šçš„ç›¸å…³è®°å½•æ“¦é™¤æ‰ï¼Œå³ <code>write pos -&gt; checkpoint</code>â€‹  ä¹‹é—´çš„éƒ¨åˆ†æ˜¯redo logç©ºç€çš„éƒ¨åˆ†ï¼Œç”¨äºè®°å½•æ–°çš„è®°å½•ï¼Œ<code>checkpoint -&gt; write pos</code>â€‹ ä¹‹é—´æ˜¯redo log å¾…è½ç›˜çš„æ•°æ®ä¿®æ”¹è®°å½•</li><li>å¦‚æœ write pos è¿½ä¸Š checkpointï¼Œè¡¨ç¤ºå†™æ»¡ï¼Œè¿™æ—¶å€™ä¸èƒ½å†æ‰§è¡Œæ–°çš„æ›´æ–°ï¼Œå¾—åœä¸‹æ¥å…ˆæ“¦æ‰ä¸€äº›è®°å½•ï¼ŒæŠŠ checkpoint æ¨è¿›ä¸€ä¸‹ã€‚</li></ul><p><strong>3ï¼‰Redo Log ä½œä¸ºæœåŠ¡å™¨å¼‚å¸¸å®•æœºåäº‹åŠ¡æ•°æ®è‡ªåŠ¨æ¢å¤ä½¿ç”¨ï¼ŒBinlog å¯ä»¥ä½œä¸ºä¸»ä»å¤åˆ¶å’Œæ•°æ®æ¢å¤ä½¿ç”¨ã€‚Binlogæ²¡æœ‰è‡ªåŠ¨crash-safeèƒ½åŠ›</strong></p><p>CrashSafeæŒ‡MySQLæœåŠ¡å™¨å®•æœºé‡å¯åï¼Œèƒ½å¤Ÿä¿è¯ï¼š</p><ul><li>æ‰€æœ‰å·²ç»æäº¤çš„äº‹åŠ¡çš„æ•°æ®ä»ç„¶å­˜åœ¨ã€‚</li><li>æ‰€æœ‰æ²¡æœ‰æäº¤çš„äº‹åŠ¡çš„æ•°æ®è‡ªåŠ¨å›æ»šã€‚</li></ul><h3 id="72ã€MySQL-çš„-binlog-æœ‰å‡ ç§æ—¥å¿—æ ¼å¼ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#72ã€MySQL-çš„-binlog-æœ‰å‡ ç§æ—¥å¿—æ ¼å¼ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="72ã€MySQL çš„ binlog æœ‰å‡ ç§æ—¥å¿—æ ¼å¼ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>72ã€MySQL çš„ binlog æœ‰å‡ ç§æ—¥å¿—æ ¼å¼ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>binlogæ—¥å¿—æœ‰ä¸‰ç§æ¨¡å¼</p><p>1ï¼‰ROWï¼ˆrow-based replication, RBRï¼‰ï¼šæ—¥å¿—ä¸­ä¼šè®°å½•æ¯ä¸€è¡Œæ•°æ®è¢«ä¿®æ”¹çš„æƒ…å†µï¼Œç„¶ååœ¨slaveç«¯å¯¹ç›¸åŒçš„æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šèƒ½æ¸…æ¥šè®°å½•æ¯ä¸€ä¸ªè¡Œæ•°æ®çš„ä¿®æ”¹ç»†èŠ‚ï¼Œèƒ½å®Œå…¨å®ç°ä¸»ä»æ•°æ®åŒæ­¥å’Œæ•°æ®çš„æ¢å¤ã€‚è€Œä¸”ä¸ä¼šå‡ºç°æŸäº›ç‰¹å®šæƒ…å†µä¸‹å­˜å‚¨è¿‡ç¨‹æˆ–functionæ— æ³•è¢«æ­£ç¡®å¤åˆ¶çš„é—®é¢˜ã€‚</li><li>ç¼ºç‚¹ï¼šæ‰¹é‡æ“ä½œï¼Œä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿—ï¼Œå°¤å…¶æ˜¯alter tableä¼šè®©æ—¥å¿—é‡æš´æ¶¨ã€‚</li></ul><p>2ï¼‰STATMENTï¼ˆstatement-based replication, SBRï¼‰ï¼šè®°å½•æ¯ä¸€æ¡ä¿®æ”¹æ•°æ®çš„SQLè¯­å¥ï¼ˆæ‰¹é‡ä¿®æ”¹æ—¶ï¼Œè®°å½•çš„ä¸æ˜¯å•æ¡SQLè¯­å¥ï¼Œè€Œæ˜¯æ‰¹é‡ä¿®æ”¹çš„SQLè¯­å¥äº‹ä»¶ï¼‰, slaveåœ¨å¤åˆ¶çš„æ—¶å€™SQLè¿›ç¨‹ä¼šè§£ææˆå’ŒåŸæ¥masterç«¯æ‰§è¡Œè¿‡çš„ç›¸åŒçš„SQLå†æ¬¡æ‰§è¡Œã€‚ç®€ç§°SQLè¯­å¥å¤åˆ¶ã€‚</p><ul><li><p>ä¼˜ç‚¹ï¼šæ—¥å¿—é‡å°ï¼Œå‡å°‘ç£ç›˜IOï¼Œæå‡å­˜å‚¨å’Œæ¢å¤é€Ÿåº¦</p></li><li><p>ç¼ºç‚¹ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´ï¼Œæ¯”å¦‚last_insert_id()ã€now()ç­‰å‡½æ•°ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/64b85a69c74d65fd988c9e08c5088831645325325.png">â€‹</p></li></ul><p>3ï¼‰MIXEDï¼ˆmixed-based replication, MBRï¼‰ï¼šä»¥ä¸Šä¸¤ç§æ¨¡å¼çš„æ··åˆä½¿ç”¨ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ STATEMENT æ¨¡å¼ä¿å­˜ binlogï¼Œå¯¹äºSTATEMENTæ¨¡å¼æ— æ³•å¤åˆ¶çš„æ“ä½œä½¿ç”¨ROWæ¨¡å¼ä¿å­˜binlogï¼ŒMySQLä¼šæ ¹æ®æ‰§è¡Œçš„SQLè¯­å¥é€‰æ‹©å†™å…¥æ¨¡å¼ã€‚</p><p>ä¼ä¸šåœºæ™¯å¦‚ä½•é€‰æ‹©binlogçš„æ¨¡å¼</p><ol><li>å¦‚æœç”Ÿäº§ä¸­ä½¿ç”¨MySQLçš„ç‰¹æ®ŠåŠŸèƒ½ç›¸å¯¹å°‘ï¼ˆå­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€å‡½æ•°ï¼‰ã€‚é€‰æ‹©é»˜è®¤çš„è¯­å¥æ¨¡å¼ï¼ŒStatementã€‚</li><li>å¦‚æœç”Ÿäº§ä¸­ä½¿ç”¨MySQLçš„ç‰¹æ®ŠåŠŸèƒ½è¾ƒå¤šçš„ï¼Œå¯ä»¥é€‰æ‹©Mixedæ¨¡å¼ã€‚</li><li>å¦‚æœç”Ÿäº§ä¸­ä½¿ç”¨MySQLçš„ç‰¹æ®ŠåŠŸèƒ½è¾ƒå¤šï¼Œåˆå¸Œæœ›æ•°æ®æœ€å¤§åŒ–ä¸€è‡´ï¼Œæ­¤æ—¶æœ€å¥½Row æ¨¡å¼ï¼›ä½†æ˜¯è¦æ³¨æ„ï¼Œè¯¥æ¨¡å¼çš„binlogæ—¥å¿—é‡å¢é•¿éå¸¸å¿«.</li></ol><h3 id="73ã€MySQL-çº¿ä¸Šä¿®æ”¹å¤§è¡¨ç»“æ„æœ‰å“ªäº›é£é™©ï¼Ÿ"><a href="#73ã€MySQL-çº¿ä¸Šä¿®æ”¹å¤§è¡¨ç»“æ„æœ‰å“ªäº›é£é™©ï¼Ÿ" class="headerlink" title="73ã€MySQL çº¿ä¸Šä¿®æ”¹å¤§è¡¨ç»“æ„æœ‰å“ªäº›é£é™©ï¼Ÿ"></a>73ã€MySQL çº¿ä¸Šä¿®æ”¹å¤§è¡¨ç»“æ„æœ‰å“ªäº›é£é™©ï¼Ÿ</h3><p>åœ¨çº¿ä¿®æ”¹å¤§è¡¨çš„å¯èƒ½å½±å“</p><ul><li>åœ¨çº¿ä¿®æ”¹å¤§è¡¨çš„è¡¨ç»“æ„æ‰§è¡Œæ—¶é—´å¾€å¾€ä¸å¯é¢„ä¼°ï¼Œä¸€èˆ¬æ—¶é—´è¾ƒé•¿ã€‚</li><li>ç”±äºä¿®æ”¹è¡¨ç»“æ„æ˜¯è¡¨çº§é”ï¼Œå› æ­¤åœ¨ä¿®æ”¹è¡¨ç»“æ„æ—¶ï¼Œå½±å“è¡¨å†™å…¥æ“ä½œã€‚</li><li>å¦‚æœé•¿æ—¶é—´çš„ä¿®æ”¹è¡¨ç»“æ„ï¼Œä¸­é€”ä¿®æ”¹å¤±è´¥ï¼Œç”±äºä¿®æ”¹è¡¨ç»“æ„æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå› æ­¤å¤±è´¥åä¼šè¿˜åŸè¡¨ç»“æ„ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¡¨éƒ½æ˜¯é”ç€ä¸å¯å†™å…¥ã€‚</li><li>ä¿®æ”¹å¤§è¡¨ç»“æ„å®¹æ˜“å¯¼è‡´æ•°æ®åº“ CPUã€IO ç­‰æ€§èƒ½æ¶ˆè€—ï¼Œä½¿ MySQL æœåŠ¡å™¨æ€§èƒ½é™ä½ã€‚</li><li>åœ¨çº¿ä¿®æ”¹å¤§è¡¨ç»“æ„å®¹æ˜“å¯¼è‡´ä¸»ä»å»¶æ—¶ï¼Œä»è€Œå½±å“ä¸šåŠ¡è¯»å–ã€‚</li></ul><p>ä¿®æ”¹æ–¹å¼ï¼š</p><ol><li>å¯¹è¡¨åŠ é”(è¡¨æ­¤æ—¶åªè¯»)</li><li>å¤åˆ¶åŸè¡¨ç‰©ç†ç»“æ„</li><li>ä¿®æ”¹è¡¨çš„ç‰©ç†ç»“æ„</li><li>æŠŠåŸè¡¨æ•°æ®å¯¼å…¥ä¸­é—´è¡¨ä¸­ ï¼Œæ•°æ®åŒæ­¥å®Œåï¼Œ**é”å®šä¸­é—´è¡¨ï¼Œå¹¶åˆ é™¤åŸè¡¨</li><li>renameä¸­é—´è¡¨ä¸ºåŸè¡¨</li><li>åˆ·æ–°æ•°æ®å­—å…¸ï¼Œå¹¶é‡Šæ”¾é”</li></ol><p>ä½¿ç”¨å·¥å…·ï¼š <strong>online-schema-change</strong> ï¼Œæ˜¯ percona æ¨å‡ºçš„ä¸€ä¸ªé’ˆå¯¹ mysql åœ¨çº¿ ddl çš„å·¥å…·ã€‚percona æ˜¯ä¸€ä¸ªmysqlåˆ†æ”¯ç»´æŠ¤å…¬å¸ï¼Œä¸“é—¨æä¾›mysqlæŠ€æœ¯æœåŠ¡çš„ã€‚</p><h3 id="74ã€count-åˆ—å-ã€count-1-å’Œ-count-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#74ã€count-åˆ—å-ã€count-1-å’Œ-count-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="74ã€count(åˆ—å)ã€count(1) å’Œ count(*) æœ‰ä»€ä¹ˆåŒºåˆ«?"></a>74ã€count(åˆ—å)ã€count(1) å’Œ count(*) æœ‰ä»€ä¹ˆåŒºåˆ«?</h3><p><strong>è¿›è¡Œç»Ÿè®¡æ“ä½œæ—¶,count ä¸­çš„ç»Ÿè®¡æ¡ä»¶å¯ä»¥ä¸‰ç§é€‰æ‹©:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN  SELECT COUNT(*) FROM user;</span><br><span class="line"></span><br><span class="line">EXPLAIN  SELECT COUNT(åˆ—å) FROM user;</span><br><span class="line"></span><br><span class="line">EXPLAIN  SELECT COUNT(1) FROM user;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæ•ˆæœä¸Šï¼š</p><ul><li>count(*) åŒ…æ‹¬äº†æ‰€æœ‰çš„åˆ—,åœ¨ç»Ÿè®¡æ—¶ ä¸ä¼šå¿½ç•¥åˆ—å€¼ä¸ºnullçš„æ•°æ®ã€‚</li><li>count(1) ç”¨1è¡¨ç¤ºä»£ç è¡Œ,åœ¨ç»Ÿè®¡æ—¶,ä¸ä¼šå¿½ç•¥åˆ—å€¼ä¸ºnullçš„æ•°æ®ã€‚</li><li>count(åˆ—å)åœ¨ç»Ÿè®¡æ—¶,ä¼šå¿½ç•¥åˆ—å€¼ä¸ºç©ºçš„æ•°æ®,å°±æ˜¯è¯´æŸä¸ªå­—æ®µçš„å€¼ä¸ºnullæ—¶ä¸ç»Ÿè®¡ã€‚</li></ul><p>æ‰§è¡Œæ•ˆç‡ä¸Šï¼š</p><ul><li><p>InnoDBå¼•æ“ï¼šcountï¼ˆå­—æ®µ) &lt; count(1) &#x3D; count(*)</p><ul><li>InnoDBé€šè¿‡éå†æœ€å°çš„å¯ç”¨äºŒçº§ç´¢å¼•æ¥å¤„ç†select count(*) è¯­å¥ï¼Œé™¤éç´¢å¼•æˆ–ä¼˜åŒ–å™¨æç¤ºæŒ‡ç¤ºä¼˜åŒ–å™¨ä½¿ç”¨ä¸åŒçš„ç´¢å¼•ã€‚å¦‚æœäºŒçº§ç´¢å¼•ä¸å­˜åœ¨ï¼Œåˆ™é€šè¿‡æ‰«æèšé›†ç´¢å¼•æ¥å¤„ç†ã€‚</li><li>InnoDBå·²åŒæ ·çš„æ–¹å¼å¤„ç†count(1)å’Œcount(*)</li></ul></li><li><p>MyISAMå¼•æ“ï¼šcountï¼ˆå­—æ®µ) &lt; count(1) &lt;&#x3D; count(*)</p><ul><li>MyISAMå­˜å‚¨äº†æ•°æ®çš„å‡†ç¡®è¡Œæ•°ï¼Œä½¿ç”¨ <code>count(*)</code>â€‹ä¼šç›´æ¥è¯»å–è¯¥è¡Œæ•°ï¼Œ åªæœ‰å½“ç¬¬ä¸€åˆ—å®šä¹‰ä¸ºNOT NULLæ—¶ï¼Œcountï¼ˆ1ï¼‰ï¼Œæ‰ä¼šæ‰§è¡Œè¯¥æ“ä½œï¼Œæ‰€ä»¥ä¼˜å…ˆé€‰æ‹© <code>count(*)</code>â€‹</li></ul></li><li><p>count(åˆ—å) ä¼šéå†æ•´ä¸ªè¡¨ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œå®ƒä¼šå…ˆè·å–åˆ—ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œç„¶åç´¯åŠ ï¼Œå› æ­¤count(åˆ—å)æ€§èƒ½ä¸å¦‚å‰ä¸¤è€…ã€‚</p></li></ul><p>æ³¨æ„ï¼šcount(*)ï¼Œè¿™æ˜¯ SQL92 å®šä¹‰çš„æ ‡å‡†ç»Ÿè®¡è¡Œæ•°çš„è¯­æ³•ï¼Œè·Ÿæ•°æ®åº“æ— å…³ï¼Œä¸NULLä¹Ÿæ— å…³ã€‚è€Œcount(åˆ—å) æ˜¯ç»Ÿè®¡åˆ—å€¼æ•°é‡ï¼Œä¸è®¡NULLï¼Œç›¸åŒåˆ—å€¼ç®—ä¸€ä¸ªã€‚</p><h3 id="75ã€ä»€ä¹ˆæ˜¯åˆ†åº“åˆ†è¡¨ï¼Ÿä»€ä¹ˆæ—¶å€™è¿›è¡Œåˆ†åº“åˆ†è¡¨ï¼Ÿ"><a href="#75ã€ä»€ä¹ˆæ˜¯åˆ†åº“åˆ†è¡¨ï¼Ÿä»€ä¹ˆæ—¶å€™è¿›è¡Œåˆ†åº“åˆ†è¡¨ï¼Ÿ" class="headerlink" title="75ã€ä»€ä¹ˆæ˜¯åˆ†åº“åˆ†è¡¨ï¼Ÿä»€ä¹ˆæ—¶å€™è¿›è¡Œåˆ†åº“åˆ†è¡¨ï¼Ÿ"></a>75ã€ä»€ä¹ˆæ˜¯åˆ†åº“åˆ†è¡¨ï¼Ÿä»€ä¹ˆæ—¶å€™è¿›è¡Œåˆ†åº“åˆ†è¡¨ï¼Ÿ</h3><p><strong>ä»€ä¹ˆæ˜¯åˆ†åº“åˆ†è¡¨</strong></p><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æŒ‡é€šè¿‡æŸç§ç‰¹å®šçš„æ¡ä»¶ï¼Œå°†æˆ‘ä»¬å­˜æ”¾åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­çš„æ•°æ®åˆ†æ•£å­˜æ”¾åˆ°å¤šä¸ªæ•°æ®åº“ï¼ˆä¸»æœºï¼‰ä¸Šé¢ï¼Œä»¥è¾¾åˆ°åˆ†æ•£å•å°è®¾å¤‡è´Ÿè½½çš„æ•ˆæœã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/1b35e708c6239fa5b4c4bd296f2b819f645325325.png">â€‹</p><ul><li><p>åˆ†åº“åˆ†è¡¨è§£å†³çš„é—®é¢˜</p><p><strong>åˆ†åº“åˆ†è¡¨çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³ç”±äºæ•°æ®é‡è¿‡å¤§è€Œå¯¼è‡´æ•°æ®åº“æ€§èƒ½é™ä½çš„é—®é¢˜ï¼Œå°†åŸæ¥å•ä½“æœåŠ¡çš„æ•°æ®åº“è¿›è¡Œæ‹†åˆ†.å°†æ•°æ®å¤§è¡¨æ‹†åˆ†æˆè‹¥å¹²æ•°æ®è¡¨ç»„æˆï¼Œä½¿å¾—å•ä¸€æ•°æ®åº“ã€å•ä¸€æ•°æ®è¡¨çš„æ•°æ®é‡å˜å°ï¼Œä»è€Œè¾¾åˆ°æå‡æ•°æ®åº“æ€§èƒ½çš„ç›®çš„ã€‚</strong></p></li><li><p>ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åˆ†åº“åˆ†è¡¨</p><ul><li><strong>å•æœºå­˜å‚¨å®¹é‡é‡åˆ°ç“¶é¢ˆ.</strong></li><li><strong>è¿æ¥æ•°,å¤„ç†èƒ½åŠ›è¾¾åˆ°ä¸Šé™.</strong></li></ul></li></ul><blockquote><p>æ³¨æ„:</p><p>åˆ†åº“åˆ†è¡¨ä¹‹å‰,è¦æ ¹æ®é¡¹ç›®çš„å®é™…æƒ…å†µ ç¡®å®šæˆ‘ä»¬çš„æ•°æ®é‡æ˜¯ä¸æ˜¯å¤Ÿå¤§,å¹¶å‘é‡æ˜¯ä¸æ˜¯å¤Ÿå¤§,æ¥å†³å®šæ˜¯å¦åˆ†åº“åˆ†è¡¨.</p><p>æ•°æ®é‡ä¸å¤Ÿå°±ä¸è¦åˆ†è¡¨,å•è¡¨æ•°æ®é‡è¶…è¿‡1000ä¸‡æˆ–100Gçš„æ—¶å€™, é€Ÿåº¦å°±ä¼šå˜æ…¢(å®˜æ–¹æµ‹è¯•),</p></blockquote><p>åˆ†åº“åˆ†è¡¨åŒ…æ‹¬ï¼š å‚ç›´åˆ†åº“ã€å‚ç›´åˆ†è¡¨ã€æ°´å¹³åˆ†åº“ã€æ°´å¹³åˆ†è¡¨ å››ç§æ–¹å¼ã€‚</p><p><strong>å‚ç›´åˆ†åº“</strong></p><ul><li><p>æ•°æ®åº“ä¸­ä¸åŒçš„è¡¨å¯¹åº”ç€ä¸åŒçš„ä¸šåŠ¡ï¼Œå‚ç›´åˆ‡åˆ†æ˜¯æŒ‡æŒ‰ç…§ä¸šåŠ¡çš„ä¸åŒå°†è¡¨è¿›è¡Œåˆ†ç±»,åˆ†å¸ƒåˆ°ä¸åŒçš„æ•°æ®åº“ä¸Šé¢</p><ul><li>å°†æ•°æ®åº“éƒ¨ç½²åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šï¼Œä»è€Œè¾¾åˆ°å¤šä¸ªæœåŠ¡å™¨å…±åŒåˆ†æ‘Šå‹åŠ›çš„æ•ˆæœ</li></ul><p><img src="https://i0.hdslb.com/bfs/article/ec0a0b49d93d336f88dbac0bb9106d1c645325325.png">â€‹</p></li></ul><p><strong>å‚ç›´åˆ†è¡¨</strong></p><p>è¡¨ä¸­å­—æ®µå¤ªå¤šä¸”åŒ…å«å¤§å­—æ®µçš„æ—¶å€™ï¼Œåœ¨æŸ¥è¯¢æ—¶å¯¹æ•°æ®åº“çš„IOã€å†…å­˜ä¼šå—åˆ°å½±å“ï¼ŒåŒæ—¶æ›´æ–°æ•°æ®æ—¶ï¼Œäº§ç”Ÿçš„binlogæ–‡ä»¶ä¼šå¾ˆå¤§ï¼ŒMySQLåœ¨ä¸»ä»åŒæ­¥æ—¶ä¹Ÿä¼šæœ‰å»¶è¿Ÿçš„é£é™©</p><ul><li>å°†ä¸€ä¸ªè¡¨æŒ‰ç…§å­—æ®µåˆ†æˆå¤šè¡¨ï¼Œæ¯ä¸ªè¡¨å­˜å‚¨å…¶ä¸­ä¸€éƒ¨åˆ†å­—æ®µã€‚</li><li>å¯¹èŒä½è¡¨è¿›è¡Œå‚ç›´æ‹†åˆ†, å°†èŒä½åŸºæœ¬ä¿¡æ¯æ”¾åœ¨ä¸€å¼ è¡¨, å°†èŒä½æè¿°ä¿¡æ¯å­˜æ”¾åœ¨å¦ä¸€å¼ è¡¨</li></ul><p><img src="https://i0.hdslb.com/bfs/article/ae11c232208e04424c8714325c372335645325325.png">â€‹</p><ul><li><p>å‚ç›´æ‹†åˆ†å¸¦æ¥çš„ä¸€äº›æå‡</p><ul><li>è§£å†³ä¸šåŠ¡å±‚é¢çš„è€¦åˆï¼Œä¸šåŠ¡æ¸…æ™°</li><li>èƒ½å¯¹ä¸åŒä¸šåŠ¡çš„æ•°æ®è¿›è¡Œåˆ†çº§ç®¡ç†ã€ç»´æŠ¤ã€ç›‘æ§ã€æ‰©å±•ç­‰</li><li>é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå‚ç›´åˆ†åº“ä¸€å®šç¨‹åº¦çš„æé«˜è®¿é—®æ€§èƒ½</li></ul></li><li><p>å‚ç›´æ‹†åˆ†æ²¡æœ‰å½»åº•è§£å†³å•è¡¨æ•°æ®é‡è¿‡å¤§çš„é—®é¢˜</p></li></ul><p><strong>æ°´å¹³åˆ†åº“</strong></p><ul><li><p>å°†å•å¼ è¡¨çš„æ•°æ®åˆ‡åˆ†åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šå»ï¼Œæ¯ä¸ªæœåŠ¡å™¨å…·æœ‰ç›¸åº”çš„åº“ä¸è¡¨ï¼Œåªæ˜¯è¡¨ä¸­æ•°æ®é›†åˆä¸åŒã€‚ æ°´å¹³åˆ†åº“åˆ†è¡¨èƒ½å¤Ÿæœ‰æ•ˆçš„ç¼“è§£å•æœºå’Œå•åº“çš„æ€§èƒ½ç“¶é¢ˆå’Œå‹åŠ›ï¼Œçªç ´IOã€è¿æ¥æ•°ã€ç¡¬ä»¶èµ„æºç­‰çš„ç“¶é¢ˆ.</p></li><li><p>ç®€å•è®²å°±æ˜¯æ ¹æ®è¡¨ä¸­çš„æ•°æ®çš„é€»è¾‘å…³ç³»ï¼Œå°†åŒä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®æŒ‰ç…§æŸç§æ¡ä»¶æ‹†åˆ†åˆ°å¤šå°æ•°æ®åº“ï¼ˆä¸»æœºï¼‰ä¸Šé¢, ä¾‹å¦‚å°†è®¢å•è¡¨ æŒ‰ç…§idæ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°, åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„åº“ä¸­ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/0f369796e743d374c0e2eb2a4bdceafb645325325.png">â€‹</p></li></ul><p><strong>æ°´å¹³åˆ†è¡¨</strong></p><ul><li><p>é’ˆå¯¹æ•°æ®é‡å·¨å¤§çš„å•å¼ è¡¨ï¼ˆæ¯”å¦‚è®¢å•è¡¨ï¼‰ï¼ŒæŒ‰ç…§è§„åˆ™æŠŠä¸€å¼ è¡¨çš„æ•°æ®åˆ‡åˆ†åˆ°å¤šå¼ è¡¨é‡Œé¢å»ã€‚ ä½†æ˜¯è¿™äº›è¡¨è¿˜æ˜¯åœ¨åŒä¸€ä¸ªåº“ä¸­ï¼Œæ‰€ä»¥åº“çº§åˆ«çš„æ•°æ®åº“æ“ä½œè¿˜æ˜¯æœ‰IOç“¶é¢ˆã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/39cf77666c02fcef4d54278a5bf1a429645325325.png">â€‹</p></li><li><p>æ€»ç»“</p><ul><li><strong>å‚ç›´åˆ†è¡¨</strong>: å°†ä¸€ä¸ªè¡¨æŒ‰ç…§å­—æ®µåˆ†æˆå¤šè¡¨ï¼Œæ¯ä¸ªè¡¨å­˜å‚¨å…¶ä¸­ä¸€éƒ¨åˆ†å­—æ®µã€‚</li><li><strong>å‚ç›´åˆ†åº“</strong>: æ ¹æ®è¡¨çš„ä¸šåŠ¡ä¸åŒ,åˆ†åˆ«å­˜æ”¾åœ¨ä¸åŒçš„åº“ä¸­,è¿™äº›åº“åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨.</li><li><strong>æ°´å¹³åˆ†åº“</strong>: æŠŠä¸€å¼ è¡¨çš„æ•°æ®æŒ‰ç…§ä¸€å®šè§„åˆ™,åˆ†é…åˆ°<strong>ä¸åŒçš„æ•°æ®åº“</strong>,æ¯ä¸€ä¸ªåº“åªæœ‰è¿™å¼ è¡¨çš„éƒ¨åˆ†æ•°æ®.</li><li><strong>æ°´å¹³åˆ†è¡¨</strong>: æŠŠä¸€å¼ è¡¨çš„æ•°æ®æŒ‰ç…§ä¸€å®šè§„åˆ™,åˆ†é…åˆ°<strong>åŒä¸€ä¸ªæ•°æ®åº“çš„å¤šå¼ è¡¨ä¸­</strong>,æ¯ä¸ªè¡¨åªæœ‰è¿™ä¸ªè¡¨çš„éƒ¨åˆ†æ•°æ®.</li></ul></li></ul><h3 id="76ã€è¯´è¯´-MySQL-çš„ä¸»ä»å¤åˆ¶ï¼Ÿ"><a href="#76ã€è¯´è¯´-MySQL-çš„ä¸»ä»å¤åˆ¶ï¼Ÿ" class="headerlink" title="76ã€è¯´è¯´ MySQL çš„ä¸»ä»å¤åˆ¶ï¼Ÿ"></a>76ã€è¯´è¯´ MySQL çš„ä¸»ä»å¤åˆ¶ï¼Ÿ</h3><p><strong>ä¸»ä»å¤åˆ¶çš„ç”¨é€”</strong></p><ul><li>å®æ—¶ç¾å¤‡ï¼Œç”¨äºæ•…éšœåˆ‡æ¢</li><li>è¯»å†™åˆ†ç¦»ï¼Œæä¾›æŸ¥è¯¢æœåŠ¡</li><li>å¤‡ä»½ï¼Œé¿å…å½±å“ä¸šåŠ¡</li></ul><p><strong>ä¸»ä»éƒ¨ç½²å¿…è¦æ¡ä»¶</strong></p><ul><li>ä¸»åº“å¼€å¯ binlog æ—¥å¿—ï¼ˆè®¾ç½®log-binå‚æ•°ï¼‰</li><li>ä¸»ä»server-idä¸åŒ</li><li>ä»åº“æœåŠ¡å™¨èƒ½è¿é€šä¸»åº“</li></ul><p><strong>ä¸»ä»å¤åˆ¶çš„åŸç†</strong></p><ul><li>Mysql ä¸­æœ‰ä¸€ç§æ—¥å¿—å«åš bin æ—¥å¿—ï¼ˆäºŒè¿›åˆ¶æ—¥å¿—ï¼‰ã€‚è¿™ä¸ªæ—¥å¿—ä¼šè®°å½•ä¸‹æ‰€æœ‰ä¿®æ”¹äº†æ•°æ®åº“çš„SQL è¯­å¥ï¼ˆinsert,update,delete,create&#x2F;alter&#x2F;drop table, grant ç­‰ç­‰ï¼‰ã€‚</li><li>ä¸»ä»å¤åˆ¶çš„åŸç†å…¶å®å°±æ˜¯æŠŠä¸»æœåŠ¡å™¨ä¸Šçš„ bin æ—¥å¿—å¤åˆ¶åˆ°ä»æœåŠ¡å™¨ä¸Šæ‰§è¡Œä¸€éï¼Œè¿™æ ·ä»æœåŠ¡å™¨ä¸Šçš„æ•°æ®å°±å’Œä¸»æœåŠ¡å™¨ä¸Šçš„æ•°æ®ç›¸åŒäº†ã€‚</li></ul><p><img src="https://i0.hdslb.com/bfs/article/c680212291531546b71a79be879ef9ef645325325.png">â€‹</p><ol><li>ä¸»åº“dbçš„æ›´æ–°äº‹ä»¶(updateã€insertã€delete)è¢«å†™åˆ°binlog</li><li>ä¸»åº“åˆ›å»ºä¸€ä¸ªbinlog dump threadï¼ŒæŠŠbinlogçš„å†…å®¹å‘é€åˆ°ä»åº“</li><li>ä»åº“å¯åŠ¨å¹¶å‘èµ·è¿æ¥ï¼Œè¿æ¥åˆ°ä¸»åº“</li><li>ä»åº“å¯åŠ¨ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªI&#x2F;Oçº¿ç¨‹ï¼Œè¯»å–ä¸»åº“ä¼ è¿‡æ¥çš„binlogå†…å®¹å¹¶å†™å…¥åˆ°relay log</li><li>ä»åº“å¯åŠ¨ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªSQLçº¿ç¨‹ï¼Œä»relay logé‡Œé¢è¯»å–å†…å®¹ï¼Œæ‰§è¡Œè¯»å–åˆ°çš„æ›´æ–°äº‹ä»¶ï¼Œå°†æ›´æ–°å†…å®¹å†™å…¥åˆ°slaveçš„db</li></ol><h3 id="77ã€è¯´ä¸€ä¸‹-MySQL-æ‰§è¡Œä¸€æ¡æŸ¥è¯¢è¯­å¥çš„å†…éƒ¨æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ"><a href="#77ã€è¯´ä¸€ä¸‹-MySQL-æ‰§è¡Œä¸€æ¡æŸ¥è¯¢è¯­å¥çš„å†…éƒ¨æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ" class="headerlink" title="77ã€è¯´ä¸€ä¸‹ MySQL æ‰§è¡Œä¸€æ¡æŸ¥è¯¢è¯­å¥çš„å†…éƒ¨æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ"></a>77ã€è¯´ä¸€ä¸‹ MySQL æ‰§è¡Œä¸€æ¡æŸ¥è¯¢è¯­å¥çš„å†…éƒ¨æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ</h3><p><img src="https://i0.hdslb.com/bfs/article/68e458ad0454f560d1183853ea6e71b1645325325.png">â€‹</p><ul><li><p>â‘ å»ºç«‹è¿æ¥ï¼ˆConnectors&amp;Connection Poolï¼‰ï¼Œé€šè¿‡å®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨é€šä¿¡åè®®ä¸MySQLå»ºç«‹è¿æ¥ã€‚MySQL å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„é€šä¿¡æ–¹å¼æ˜¯ â€œ åŠåŒå·¥ â€ã€‚å¯¹äºæ¯ä¸€ä¸ª MySQL çš„è¿æ¥ï¼Œæ—¶åˆ»éƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹çŠ¶æ€æ¥æ ‡è¯†è¿™ä¸ªè¿æ¥æ­£åœ¨åšä»€ä¹ˆã€‚<br>é€šè®¯æœºåˆ¶ï¼š</p><ul><li>å…¨åŒå·¥ï¼šèƒ½åŒæ—¶å‘é€å’Œæ¥æ”¶æ•°æ®ï¼Œä¾‹å¦‚å¹³æ—¶æ‰“ç”µè¯ã€‚</li><li>åŠåŒå·¥ï¼šæŒ‡çš„æŸä¸€æ—¶åˆ»ï¼Œè¦ä¹ˆå‘é€æ•°æ®ï¼Œè¦ä¹ˆæ¥æ”¶æ•°æ®ï¼Œä¸èƒ½åŒæ—¶ã€‚ä¾‹å¦‚æ—©æœŸå¯¹è®²æœº</li><li>å•å·¥ï¼šåªèƒ½å‘é€æ•°æ®æˆ–åªèƒ½æ¥æ”¶æ•°æ®ã€‚ä¾‹å¦‚å•è¡Œé“</li></ul><p>çº¿ç¨‹çŠ¶æ€ï¼š<br>show processlist; &#x2F;&#x2F;æŸ¥çœ‹ç”¨æˆ·æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ä¿¡æ¯ï¼Œrootç”¨æˆ·èƒ½æŸ¥çœ‹æ‰€æœ‰çº¿ç¨‹ï¼Œå…¶ä»–ç”¨æˆ·åªèƒ½çœ‹è‡ªå·±çš„</p><ul><li><p>idï¼šçº¿ç¨‹IDï¼Œå¯ä»¥ä½¿ç”¨kill xxï¼›</p></li><li><p>userï¼šå¯åŠ¨è¿™ä¸ªçº¿ç¨‹çš„ç”¨æˆ·</p></li><li><p>Hostï¼šå‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯çš„IPå’Œç«¯å£å·</p></li><li><p>dbï¼šå½“å‰å‘½ä»¤åœ¨å“ªä¸ªåº“æ‰§è¡Œ</p></li><li><p>Commandï¼šè¯¥çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ“ä½œå‘½ä»¤</p><ul><li>Create DBï¼šæ­£åœ¨åˆ›å»ºåº“æ“ä½œ</li><li>Drop DBï¼šæ­£åœ¨åˆ é™¤åº“æ“ä½œ</li><li>Executeï¼šæ­£åœ¨æ‰§è¡Œä¸€ä¸ªPreparedStatement</li><li>Close Stmtï¼šæ­£åœ¨å…³é—­ä¸€ä¸ªPreparedStatement</li><li>Queryï¼šæ­£åœ¨æ‰§è¡Œä¸€ä¸ªè¯­å¥</li><li>Sleepï¼šæ­£åœ¨ç­‰å¾…å®¢æˆ·ç«¯å‘é€è¯­å¥</li><li>Quitï¼šæ­£åœ¨é€€å‡º</li><li>Shutdownï¼šæ­£åœ¨å…³é—­æœåŠ¡å™¨</li></ul></li><li><p>Timeï¼šè¡¨ç¤ºè¯¥çº¿ç¨‹å¤„äºå½“å‰çŠ¶æ€çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’</p></li><li><p>Stateï¼šçº¿ç¨‹çŠ¶æ€</p><ul><li>Updatingï¼šæ­£åœ¨æœç´¢åŒ¹é…è®°å½•ï¼Œè¿›è¡Œä¿®æ”¹</li><li>Sleepingï¼šæ­£åœ¨ç­‰å¾…å®¢æˆ·ç«¯å‘é€æ–°è¯·æ±‚</li><li>Startingï¼šæ­£åœ¨æ‰§è¡Œè¯·æ±‚å¤„ç†</li><li>Checking tableï¼šæ­£åœ¨æ£€æŸ¥æ•°æ®è¡¨</li><li>Closing table : æ­£åœ¨å°†è¡¨ä¸­æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ä¸­</li><li>Lockedï¼šè¢«å…¶ä»–æŸ¥è¯¢é”ä½äº†è®°å½•</li><li>Sending Dataï¼šæ­£åœ¨å¤„ç†SelectæŸ¥è¯¢ï¼ŒåŒæ—¶å°†ç»“æœå‘é€ç»™å®¢æˆ·ç«¯</li></ul></li><li><p>Infoï¼šä¸€èˆ¬è®°å½•çº¿ç¨‹æ‰§è¡Œçš„è¯­å¥ï¼Œé»˜è®¤æ˜¾ç¤ºå‰100ä¸ªå­—ç¬¦ã€‚æƒ³æŸ¥çœ‹å®Œæ•´çš„ä½¿ç”¨show full processlist;</p></li></ul></li><li><p>â‘¡æŸ¥è¯¢ç¼“å­˜ï¼ˆCache&amp;Bufferï¼‰ï¼Œè¿™æ˜¯MySQLçš„ä¸€ä¸ªå¯ä¼˜åŒ–æŸ¥è¯¢çš„åœ°æ–¹ï¼Œå¦‚æœå¼€å¯äº†æŸ¥è¯¢ç¼“å­˜ä¸”åœ¨æŸ¥è¯¢ç¼“å­˜è¿‡ç¨‹ä¸­æŸ¥è¯¢åˆ°å®Œå…¨ç›¸åŒçš„SQLè¯­å¥ï¼Œåˆ™å°†æŸ¥è¯¢ç»“æœç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ï¼›å¦‚æœæ²¡æœ‰å¼€å¯æŸ¥è¯¢ç¼“å­˜æˆ–è€…æ²¡æœ‰æŸ¥è¯¢åˆ°å®Œå…¨ç›¸åŒçš„ SQL è¯­å¥åˆ™ä¼šç”±è§£æå™¨è¿›è¡Œè¯­æ³•è¯­ä¹‰è§£æï¼Œå¹¶ç”Ÿæˆâ€œè§£ææ ‘â€ã€‚</p><ul><li><p>ç¼“å­˜SelectæŸ¥è¯¢çš„ç»“æœå’ŒSQLè¯­å¥</p></li><li><p>æ‰§è¡ŒSelectæŸ¥è¯¢æ—¶ï¼Œå…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¯ç”¨çš„è®°å½•é›†ï¼Œè¦æ±‚æ˜¯å¦å®Œå…¨ç›¸åŒï¼ˆåŒ…æ‹¬å‚æ•°å€¼ï¼‰ï¼Œè¿™æ ·æ‰ä¼šåŒ¹é…ç¼“å­˜æ•°æ®å‘½ä¸­ã€‚</p></li><li><p>å³ä½¿å¼€å¯æŸ¥è¯¢ç¼“å­˜ï¼Œä»¥ä¸‹SQLä¹Ÿä¸èƒ½ç¼“å­˜</p><ul><li>æŸ¥è¯¢è¯­å¥ä½¿ç”¨SQL_NO_CACHE</li><li>æŸ¥è¯¢çš„ç»“æœå¤§äºquery_cache_limitè®¾ç½®</li><li>æŸ¥è¯¢ä¸­æœ‰ä¸€äº›ä¸ç¡®å®šçš„å‚æ•°ï¼Œæ¯”å¦‚now()</li></ul></li><li><p>show variables like â€˜%query_cache%â€™; &#x2F;&#x2F;æŸ¥çœ‹æŸ¥è¯¢ç¼“å­˜æ˜¯å¦å¯ç”¨ï¼Œç©ºé—´å¤§å°ï¼Œé™åˆ¶ç­‰</p></li><li><p>show status like â€˜Qcache%â€™; &#x2F;&#x2F;æŸ¥çœ‹æ›´è¯¦ç»†çš„ç¼“å­˜å‚æ•°ï¼Œå¯ç”¨ç¼“å­˜ç©ºé—´ï¼Œç¼“å­˜å—ï¼Œç¼“å­˜å¤šå°‘ç­‰</p></li></ul></li><li><p>â‘¢è§£æå™¨ï¼ˆParserï¼‰å°†å®¢æˆ·ç«¯å‘é€çš„ SQL è¿›è¡Œè¯­æ³•è§£æï¼Œç”Ÿæˆâ€è§£ææ ‘â€ã€‚é¢„å¤„ç†å™¨æ ¹æ®ä¸€äº› MySQL è§„åˆ™è¿›ä¸€æ­¥æ£€æŸ¥â€œè§£ææ ‘â€æ˜¯å¦åˆæ³•ï¼Œä¾‹å¦‚è¿™é‡Œå°†æ£€æŸ¥æ•°æ®è¡¨å’Œæ•°æ®åˆ—æ˜¯å¦å­˜åœ¨ï¼Œè¿˜ä¼šè§£æåå­—å’Œåˆ«åï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦æœ‰æ­§ä¹‰ï¼Œæœ€åç”Ÿæˆæ–°çš„â€œè§£ææ ‘â€ã€‚</p></li><li><p>â‘£æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼ˆOptimizerï¼‰æ ¹æ®â€œè§£ææ ‘â€ç”Ÿæˆæœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’ã€‚MySQL ä½¿ç”¨å¾ˆå¤šä¼˜åŒ–ç­–ç•¥ç”Ÿæˆæœ€ä¼˜çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šé™æ€ä¼˜åŒ–ï¼ˆç¼–è¯‘æ—¶ä¼˜åŒ–ï¼‰ã€åŠ¨æ€ä¼˜åŒ–ï¼ˆè¿è¡Œæ—¶ä¼˜åŒ–ï¼‰ã€‚</p><ul><li><p>ç­‰ä»·å˜æ¢ç­–ç•¥</p><ul><li>5&#x3D;5 and a&gt;5 æ”¹æˆ a &gt; 5</li><li>a &lt; b and a&#x3D;5 æ”¹æˆb&gt;5 and a&#x3D;5</li><li>åŸºäºè”åˆç´¢å¼•ï¼Œè°ƒæ•´æ¡ä»¶ä½ç½®ç­‰</li></ul></li><li><p>ä¼˜åŒ–countã€minã€maxç­‰å‡½æ•°</p><ul><li>InnoDBå¼•æ“minå‡½æ•°åªéœ€è¦æ‰¾ç´¢å¼•æœ€å·¦è¾¹</li><li>InnoDBå¼•æ“maxå‡½æ•°åªéœ€è¦æ‰¾ç´¢å¼•æœ€å³è¾¹</li><li>MyISAMå¼•æ“count(*)ï¼Œä¸éœ€è¦è®¡ç®—ï¼Œç›´æ¥è¿”å›</li></ul></li><li><p>æå‰ç»ˆæ­¢æŸ¥è¯¢</p><ul><li>ä½¿ç”¨äº†limitæŸ¥è¯¢ï¼Œè·å– limit æ‰€éœ€çš„æ•°æ®ï¼Œå°±ä¸åœ¨ç»§ç»­éå†åé¢æ•°æ®</li></ul></li><li><p>inçš„ä¼˜åŒ–</p><ul><li>MySQL å¯¹ in æŸ¥è¯¢ï¼Œä¼šå…ˆè¿›è¡Œæ’åºï¼Œå†é‡‡ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾æ•°æ®ã€‚æ¯”å¦‚ where id in (2,1,3)ï¼Œå˜æˆ in (1,2,3)</li></ul></li></ul></li><li><p>â‘¤æŸ¥è¯¢æ‰§è¡Œå¼•æ“è´Ÿè´£æ‰§è¡Œ SQL è¯­å¥ï¼Œæ­¤æ—¶æŸ¥è¯¢æ‰§è¡Œå¼•æ“ä¼šæ ¹æ® SQL è¯­å¥ä¸­è¡¨çš„å­˜å‚¨å¼•æ“ç±»å‹ï¼Œä»¥åŠå¯¹åº”çš„APIæ¥å£ä¸åº•å±‚å­˜å‚¨å¼•æ“ç¼“å­˜æˆ–è€…ç‰©ç†æ–‡ä»¶çš„äº¤äº’ï¼Œå¾—åˆ°æŸ¥è¯¢ç»“æœå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚è‹¥å¼€å¯ç”¨æŸ¥è¯¢ç¼“å­˜ï¼Œè¿™æ—¶ä¼šå°† SQL è¯­å¥å’Œç»“æœå®Œæ•´åœ°ä¿å­˜åˆ°æŸ¥è¯¢ç¼“å­˜ï¼ˆCache&amp;Bufferï¼‰ä¸­ï¼Œä»¥åè‹¥æœ‰ç›¸åŒçš„ SQL è¯­å¥æ‰§è¡Œåˆ™ç›´æ¥è¿”å›ç»“æœã€‚</p><ul><li>å¦‚æœå¼€å¯äº†æŸ¥è¯¢ç¼“å­˜ï¼Œå…ˆå°†æŸ¥è¯¢ç»“æœåšç¼“å­˜æ“ä½œ</li><li>è¿”å›ç»“æœè¿‡å¤šï¼Œé‡‡ç”¨å¢é‡æ¨¡å¼è¿”å›</li></ul></li></ul><h3 id="78ã€Mysql-å†…éƒ¨æ”¯æŒç¼“å­˜æŸ¥è¯¢å—ï¼Ÿ"><a href="#78ã€Mysql-å†…éƒ¨æ”¯æŒç¼“å­˜æŸ¥è¯¢å—ï¼Ÿ" class="headerlink" title="78ã€Mysql å†…éƒ¨æ”¯æŒç¼“å­˜æŸ¥è¯¢å—ï¼Ÿ"></a>78ã€Mysql å†…éƒ¨æ”¯æŒç¼“å­˜æŸ¥è¯¢å—ï¼Ÿ</h3><p>ä½¿ç”¨ç¼“å­˜çš„å¥½å¤„ï¼šå½“ MySQL æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„æŸ¥è¯¢ SQL ä¹‹åï¼Œä»…ä»…åªéœ€è¦å¯¹å…¶è¿›è¡Œç›¸åº”çš„æƒé™éªŒè¯ä¹‹åï¼Œå°±ä¼šé€šè¿‡ Query Cache æ¥æŸ¥æ‰¾ç»“æœï¼Œç”šè‡³éƒ½ä¸éœ€è¦ç»è¿‡ Optimizer æ¨¡å—è¿›è¡Œæ‰§è¡Œè®¡åˆ’çš„åˆ†æä¼˜åŒ–ï¼Œæ›´ä¸éœ€è¦å‘ç”Ÿä»»ä½•å­˜å‚¨å¼•æ“çš„äº¤äº’.</p><p>mysql 5.7 æ”¯æŒå†…éƒ¨ç¼“å­˜ï¼Œ8.0 ä¹‹åå·²åºŸå¼ƒ</p><p>mysql ç¼“å­˜çš„é™åˆ¶</p><ol><li>mysql åŸºæœ¬æ²¡æœ‰æ‰‹æ®µçµæ´»çš„ç®¡ç†ç¼“å­˜å¤±æ•ˆå’Œç”Ÿæ•ˆï¼Œå°¤å…¶å¯¹äºé¢‘ç¹æ›´æ–°çš„è¡¨</li><li>SQL å¿…é¡»å®Œå…¨ä¸€è‡´æ‰ä¼šå¯¼è‡´ cache å‘½ä¸­</li><li>ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´ï¼Œå¤ªå¤§çš„ result set ä¸ä¼šè¢« cache (&lt; query_cache_limit)ï¼›</li><li>MySQL ç¼“å­˜åœ¨åˆ†åº“åˆ†è¡¨ç¯å¢ƒä¸‹æ˜¯ä¸èµ·ä½œç”¨çš„ï¼›</li><li>æ‰§è¡Œ SQL é‡Œæœ‰è§¦å‘å™¨,è‡ªå®šä¹‰å‡½æ•°æ—¶ï¼ŒMySQL ç¼“å­˜ä¹Ÿæ˜¯ä¸èµ·ä½œç”¨çš„ï¼›</li><li>åœ¨è¡¨çš„ç»“æ„æˆ–æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒåŸºäºè¯¥è¡¨ç›¸å…³ cache ç«‹å³å…¨éƒ¨å¤±æ•ˆã€‚</li></ol><p>æ›¿ä»£æ–¹æ¡ˆ</p><ul><li>åº”ç”¨å±‚ç»„ç»‡ç¼“å­˜ï¼Œæœ€ç®€å•çš„æ˜¯ä½¿ç”¨ redisï¼Œehcached ç­‰</li></ul><h3 id="79ã€ORM-å¯ä»¥é˜²æ­¢-SQL-æ³¨å…¥æ”»å‡»å—"><a href="#79ã€ORM-å¯ä»¥é˜²æ­¢-SQL-æ³¨å…¥æ”»å‡»å—" class="headerlink" title="79ã€ORM å¯ä»¥é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»å—?"></a>79ã€ORM å¯ä»¥é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»å—?</h3><p>ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶æœ¬èº«å¹¶ä¸èƒ½å®Œå…¨é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ï¼Œä½†å®ƒå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘ SQL æ³¨å…¥çš„é£é™©ã€‚ä¸‹é¢æ˜¯ä¸€äº›ORMæ¡†æ¶å¦‚ä½•å¸®åŠ©å‡å°‘SQLæ³¨å…¥æ”»å‡»çš„æ–¹å¼ï¼š</p><ol><li>å‚æ•°åŒ–æŸ¥è¯¢ï¼šORM æ¡†æ¶é€šå¸¸ä¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢æ¥æ‰§è¡Œæ•°æ®åº“æ“ä½œï¼Œè€Œä¸æ˜¯ç›´æ¥å°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®æ‹¼æ¥åˆ°SQLè¯­å¥ä¸­ã€‚å‚æ•°åŒ–æŸ¥è¯¢å¯ä»¥å°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’ç»™SQLè¯­å¥ï¼Œè€Œä¸æ˜¯å°†å…¶ç›´æ¥åµŒå…¥åˆ° SQL è¯­å¥ä¸­ï¼Œä»è€Œé¿å…äº† SQL æ³¨å…¥æ”»å‡»ã€‚</li><li>è‡ªåŠ¨è½¬ä¹‰ï¼šä¸€äº› ORM æ¡†æ¶ä¼šè‡ªåŠ¨å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œè½¬ä¹‰ï¼Œä»¥ç¡®ä¿è¾“å…¥æ•°æ®ä¸­çš„ç‰¹æ®Šå­—ç¬¦ä¸ä¼šè¢«è¯¯è®¤ä¸ºæ˜¯SQLè¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢æ¶æ„çš„SQLæ³¨å…¥æ”»å‡»ã€‚</li><li>è¾“å…¥éªŒè¯å’Œè¿‡æ»¤ï¼šORM æ¡†æ¶é€šå¸¸æä¾›äº†è¾“å…¥éªŒè¯å’Œè¿‡æ»¤çš„åŠŸèƒ½ï¼Œå¯ä»¥å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œæ£€æŸ¥å’Œè¿‡æ»¤ï¼Œä»¥ç¡®ä¿è¾“å…¥çš„æ•°æ®ç¬¦åˆé¢„æœŸçš„æ ¼å¼å’Œç±»å‹ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢ä¸€äº›å¸¸è§çš„SQLæ³¨å…¥æ”»å‡»ã€‚</li></ol><p>å°½ç®¡ ORM æ¡†æ¶å¯ä»¥æä¾›ä¸€äº›ä¿æŠ¤æœºåˆ¶æ¥å‡å°‘SQLæ³¨å…¥æ”»å‡»çš„é£é™©ï¼Œä½†ä»ç„¶éœ€è¦å¼€å‘äººå‘˜è‡ªå·±ä¿è¯åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ã€‚å¼€å‘äººå‘˜åº”è¯¥éµå¾ªå®‰å…¨çš„ç¼–ç å®è·µï¼Œå¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œå……åˆ†éªŒè¯å’Œè¿‡æ»¤ï¼Œä»¥é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºç¡€ç¯‡</title>
      <link href="/posts/6314.html"/>
      <url>/posts/6314.html</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€-Java-è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹"><a href="#1ã€-Java-è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹" class="headerlink" title="1ã€ Java è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹"></a><strong>1</strong>ã€ <strong>Java</strong> è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹</h3><details class="folding-tag" red><summary> å±•å¼€ç­”æ¡ˆ </summary>              <div class='content'>              <p>1ã€ç®€å•æ˜“å­¦ã€æœ‰ä¸°å¯Œçš„ç±»åº“</p><p>2ã€é¢å‘å¯¹è±¡ï¼ˆ Java æœ€é‡è¦çš„ç‰¹æ€§ï¼Œè®©ç¨‹åºè€¦åˆåº¦æ›´ä½ï¼Œå†…èšæ€§æ›´é«˜ï¼‰</p><p>3ã€ä¸å¹³å°æ— å…³æ€§ï¼ˆ JVM æ˜¯ Java è·¨å¹³å°ä½¿ç”¨çš„æ ¹æœ¬ï¼‰</p><p>4ã€å¯é å®‰å…¨</p><p>5ã€æ”¯æŒå¤šçº¿ç¨‹ </p>              </div>            </details><h3 id="2ã€é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«"><a href="#2ã€é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«" class="headerlink" title="2ã€é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«"></a><strong>2</strong>ã€é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ«</h3><details class="folding-tag" red><summary> å±•å¼€ç­”æ¡ˆ </summary>              <div class='content'>              <p><strong>é¢å‘è¿‡ç¨‹</strong>ï¼šæ˜¯åˆ†æè§£å†³é—®é¢˜çš„æ­¥éª¤ï¼Œç„¶åç”¨å‡½æ•°æŠŠè¿™äº›æ­¥éª¤ä¸€æ­¥ä¸€æ­¥åœ°å®ç°ï¼Œç„¶ååœ¨ä½¿ç”¨çš„æ—¶å€™ä¸€ä¸€è°ƒç”¨åˆ™å¯ã€‚æ€§èƒ½è¾ƒé«˜ï¼Œæ‰€ä»¥å•ç‰‡æœºã€åµŒå…¥å¼å¼€å‘ç­‰ä¸€èˆ¬é‡‡ç”¨é¢å‘è¿‡ç¨‹å¼€å‘</p><p><strong>é¢å‘å¯¹è±¡</strong>ï¼šæ˜¯æŠŠæ„æˆé—®é¢˜çš„äº‹åŠ¡åˆ†è§£æˆå„ä¸ªå¯¹è±¡ï¼Œè€Œå»ºç«‹å¯¹è±¡çš„ç›®çš„ä¹Ÿä¸æ˜¯ä¸ºäº†å®Œæˆä¸€ä¸ªä¸ªæ­¥éª¤ï¼Œè€Œæ˜¯ä¸ºäº†æè¿°æŸä¸ªäº‹ç‰©åœ¨è§£å†³æ•´ä¸ªé—®é¢˜çš„è¿‡ç¨‹ä¸­æ‰€å‘ç”Ÿçš„è¡Œä¸ºã€‚é¢å‘å¯¹è±¡æœ‰ <strong>å°è£…ã€ç»§æ‰¿ã€å¤šæ€</strong> çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æ˜“ç»´æŠ¤ã€æ˜“å¤ç”¨ã€æ˜“æ‰©å±•ã€‚å¯ä»¥è®¾è®¡å‡ºä½è€¦åˆçš„ç³»ç»Ÿã€‚ ä½†æ˜¯æ€§èƒ½ä¸Šæ¥è¯´ï¼Œæ¯”é¢å‘è¿‡ç¨‹è¦ä½ã€‚ </p>              </div>            </details><h3 id="3-ã€å…«ç§åŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°ï¼Œä»¥åŠä»–ä»¬çš„å°è£…ç±»"><a href="#3-ã€å…«ç§åŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°ï¼Œä»¥åŠä»–ä»¬çš„å°è£…ç±»" class="headerlink" title="3  ã€å…«ç§åŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°ï¼Œä»¥åŠä»–ä»¬çš„å°è£…ç±»"></a><strong>3</strong>  <strong>ã€å…«ç§åŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°ï¼Œä»¥åŠä»–ä»¬çš„å°è£…ç±»</strong></h3><table><thead><tr><th><strong>åŸºæœ¬ç±»å‹</strong></th><th><strong>å¤§å°ï¼ˆå­—èŠ‚ï¼‰</strong></th><th><strong>é»˜è®¤å€¼</strong></th><th><strong>å°è£…ç±»</strong></th></tr></thead><tbody><tr><td>byte</td><td>1</td><td>ï¼ˆ byte ï¼‰0</td><td>Byte</td></tr><tr><td>short</td><td>2</td><td>ï¼ˆ short ï¼‰0</td><td>Short</td></tr><tr><td>int</td><td>4</td><td>0</td><td>Integer</td></tr><tr><td>long</td><td>8</td><td>0 L</td><td>Long</td></tr><tr><td>float</td><td>4</td><td>0.0 f</td><td>Float</td></tr><tr><td>double</td><td>8</td><td>0.0 d</td><td>Double</td></tr><tr><td>boolean</td><td>-</td><td>false</td><td>Boolean</td></tr><tr><td>char</td><td>2</td><td>\u0000ï¼ˆ null ï¼‰</td><td>Character</td></tr></tbody></table><p>æ³¨ï¼š</p><ul><li>int æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒInteger æ˜¯ int çš„å°è£…ç±»ï¼Œæ˜¯å¼•ç”¨ç±»å‹ã€‚int é»˜è®¤å€¼æ˜¯0ï¼Œè€Œ Integer é»˜è®¤å€¼æ˜¯nullï¼Œæ‰€ä»¥Integerèƒ½åŒºåˆ†å‡º0å’Œnullçš„æƒ…å†µã€‚ä¸€æ—¦javaçœ‹åˆ°nullï¼Œå°±çŸ¥é“è¿™ä¸ªå¼•ç”¨è¿˜æ²¡æœ‰æŒ‡å‘æŸä¸ªå¯¹è±¡ï¼Œå†ä»»ä½•å¼•ç”¨ä½¿ç”¨å‰ï¼Œå¿…é¡»ä¸ºå…¶æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</li><li>åŸºæœ¬æ•°æ®ç±»å‹åœ¨å£°æ˜æ—¶ç³»ç»Ÿä¼šè‡ªåŠ¨ç»™å®ƒåˆ†é…ç©ºé—´ï¼Œè€Œå¼•ç”¨ç±»å‹å£°æ˜æ—¶åªæ˜¯åˆ†é…äº†å¼•ç”¨ç©ºé—´ï¼Œå¿…é¡»é€šè¿‡å®ä¾‹åŒ–å¼€è¾Ÿæ•°æ®ç©ºé—´ä¹‹åæ‰å¯ä»¥èµ‹å€¼ã€‚æ•°ç»„å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œå°†ä¸€ä¸ªæ•°ç»„èµ‹å€¼ç»™å¦ä¸€ä¸ªæ•°ç»„æ—¶åªæ˜¯å¤åˆ¶äº†ä¸€ä¸ªå¼•ç”¨ï¼Œæ‰€ä»¥é€šè¿‡æŸä¸€ä¸ªæ•°ç»„æ‰€åšçš„ä¿®æ”¹åœ¨å¦ä¸€ä¸ªæ•°ç»„ä¸­ä¹Ÿçœ‹çš„è§ã€‚</li></ul><p>è™½ç„¶å®šä¹‰äº† boolean è¿™ç§æ•°æ®ç±»å‹ï¼Œä½†æ˜¯åªå¯¹å®ƒæä¾›äº†éå¸¸æœ‰é™çš„æ”¯æŒã€‚åœ¨ Java è™šæ‹Ÿæœºä¸­æ²¡æœ‰ä»»ä½•ä¾› boolean å€¼ä¸“ç”¨çš„å­—èŠ‚ç æŒ‡ä»¤ï¼ŒJava è¯­è¨€è¡¨è¾¾å¼æ‰€æ“ä½œçš„ boolean å€¼ï¼Œåœ¨ç¼–è¯‘ä¹‹åéƒ½ä½¿ç”¨ Java è™šæ‹Ÿæœºä¸­çš„ int æ•°æ®ç±»å‹æ¥ä»£æ›¿ï¼Œè€Œ boolean æ•°ç»„å°†ä¼šè¢«ç¼–ç æˆ Java è™šæ‹Ÿæœºçš„ byte æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´  boolean å…ƒç´ å  8 ä½ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥å¾—å‡º boolean ç±»å‹å äº†å•ç‹¬ä½¿ç”¨æ˜¯ 4 ä¸ªå­—èŠ‚ï¼Œåœ¨æ•°ç»„ä¸­åˆæ˜¯ 1 ä¸ªå­—</p><p>èŠ‚ã€‚ä½¿ç”¨ int çš„åŸå› æ˜¯ï¼Œå¯¹äºå½“ä¸‹ 32 ä½çš„å¤„ç†å™¨ï¼ˆ CPU ï¼‰æ¥è¯´ï¼Œä¸€æ¬¡å¤„ç†æ•°æ®æ˜¯ 32 ä½ï¼ˆè¿™é‡Œä¸æ˜¯æŒ‡çš„æ˜¯ 32 &#x2F; 64 ä½ç³»ç»Ÿï¼Œè€Œæ˜¯æŒ‡ CPU ç¡¬ä»¶å±‚é¢ï¼‰ï¼Œå…·æœ‰é«˜æ•ˆå­˜å–çš„ç‰¹ç‚¹ã€‚</p><h3 id="4ã€æ ‡è¯†ç¬¦çš„å‘½åè§„åˆ™"><a href="#4ã€æ ‡è¯†ç¬¦çš„å‘½åè§„åˆ™" class="headerlink" title="4ã€æ ‡è¯†ç¬¦çš„å‘½åè§„åˆ™"></a><strong>4</strong>ã€æ ‡è¯†ç¬¦çš„å‘½åè§„åˆ™</h3><p><strong>æ ‡è¯†ç¬¦çš„å«ä¹‰ï¼š</strong>  æ˜¯æŒ‡åœ¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„å†…å®¹ï¼Œè­¬å¦‚ï¼Œç±»çš„åå­—ï¼Œæ–¹æ³•åç§°ä»¥åŠå˜é‡åç§°ç­‰ç­‰ï¼Œéƒ½æ˜¯æ ‡è¯†ç¬¦ã€‚</p><p><strong>å‘½åè§„åˆ™ï¼šï¼ˆç¡¬æ€§è¦æ±‚ï¼‰</strong>  æ ‡è¯†ç¬¦å¯ä»¥åŒ…å«è‹±æ–‡å­—æ¯ï¼Œ0 - 9 çš„æ•°å­—ï¼Œ$ ä»¥åŠ_ æ ‡è¯†ç¬¦ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ æ ‡è¯†ç¬¦ä¸æ˜¯å…³é”®å­—</p><p><strong>å‘½åè§„èŒƒï¼šï¼ˆéç¡¬æ€§è¦æ±‚ï¼‰</strong>  ç±»åè§„èŒƒï¼šé¦–å­—ç¬¦å¤§å†™ï¼Œåé¢æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼ˆå¤§é©¼å³°å¼ï¼‰ã€‚ å˜é‡åè§„èŒƒï¼šé¦–å­—æ¯å°å†™ï¼Œåé¢æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼ˆå°é©¼å³°å¼ï¼‰ã€‚ æ–¹æ³•åè§„èŒƒï¼šåŒå˜é‡åã€‚</p><h3 id="5ã€instanceof-å…³é”®å­—çš„ä½œç”¨"><a href="#5ã€instanceof-å…³é”®å­—çš„ä½œç”¨" class="headerlink" title="5ã€instanceof å…³é”®å­—çš„ä½œç”¨"></a><strong>5</strong>ã€instanceof <strong>å…³é”®å­—çš„ä½œç”¨</strong></h3><p>instanceof  ä¸¥æ ¼æ¥è¯´æ˜¯ Java ä¸­çš„ä¸€ä¸ªåŒç›®è¿ç®—ç¬¦ï¼Œç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œç”¨æ³•ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> obj <span class="keyword">instanceof</span> Class</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ obj ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒClass è¡¨ç¤ºä¸€ä¸ªç±»æˆ–è€…ä¸€ä¸ªæ¥å£ï¼Œå½“ obj ä¸º Class çš„å¯¹è±¡ï¼Œæˆ–è€…æ˜¯å…¶ç›´æ¥æˆ–é—´æ¥å­ç±»ï¼Œæˆ–è€…æ˜¯å…¶æ¥å£çš„å®ç°ç±»ï¼Œç»“æœ result éƒ½è¿”å› trueï¼Œå¦åˆ™è¿”å› false ã€‚</p><p>æ³¨æ„ï¼šç¼–è¯‘å™¨ä¼šæ£€æŸ¥ obj æ˜¯å¦èƒ½è½¬æ¢æˆå³è¾¹çš„ class ç±»å‹ï¼Œå¦‚æœä¸èƒ½è½¬æ¢åˆ™ç›´æ¥æŠ¥é”™ï¼Œå¦‚æœä¸èƒ½ç¡®å®šç±»å‹ï¼Œåˆ™é€šè¿‡ç¼–è¯‘ï¼Œå…·ä½“çœ‹è¿è¡Œæ—¶å®šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">System.out.println(i <span class="keyword">instanceof</span> Integer);<span class="comment">//ç¼–è¯‘ä¸é€šè¿‡ i å¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹</span></span><br><span class="line">System.out.println(i <span class="keyword">instanceof</span> Object);<span class="comment">//ç¼–è¯‘ä¸é€šè¿‡</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">integer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">1</span>);</span><br><span class="line">System.out.println(integer <span class="keyword">instanceof</span> Integer);<span class="comment">//true</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//false ,åœ¨ JavaSE è§„èŒƒ ä¸­å¯¹ instanceof è¿ç®—ç¬¦çš„è§„å®šå°±æ˜¯ï¼šå¦‚æœ obj ä¸º nullï¼Œé‚£ä¹ˆå°†è¿”å› falseã€‚</span></span><br><span class="line">System.out.println(<span class="literal">null</span> <span class="keyword">instanceof</span> Object);</span><br></pre></td></tr></table></figure><h3 id="6ã€Java-è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±"><a href="#6ã€Java-è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±" class="headerlink" title="6ã€Java è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±"></a><strong>6</strong>ã€Java è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±</h3><p><strong>è£…ç®±å°±æ˜¯è‡ªåŠ¨å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºåŒ…è£…å™¨ç±»å‹ï¼ˆ int â€“&gt; Integer ï¼‰ï¼Œè°ƒç”¨æ–¹æ³•ï¼šInteger çš„ valueOf (int) æ–¹æ³•</strong></p><p><strong>æ‹†ç®±å°±æ˜¯è‡ªåŠ¨å°†åŒ…è£…å™¨ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ Integer â€“&gt; intï¼‰ï¼Œè°ƒç”¨æ–¹æ³•ï¼šInteger çš„ intValue æ–¹æ³•</strong></p><p>åœ¨ Java SE5 ä¹‹å‰ï¼Œå¦‚æœè¦ç”Ÿæˆä¸€ä¸ªæ•°å€¼ä¸º 10 çš„ Integer å¯¹è±¡ï¼Œå¿…é¡»è¿™æ ·è¿›è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><p>è€Œåœ¨ä» Java SE5 å¼€å§‹å°±æä¾›äº†è‡ªåŠ¨è£…ç®±çš„ç‰¹æ€§ï¼Œå¦‚æœè¦ç”Ÿæˆä¸€ä¸ªæ•°å€¼ä¸º 10 çš„ Integer å¯¹è±¡ï¼Œåªéœ€è¦è¿™æ ·å°±å¯ä»¥äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure><p><strong>é¢è¯•é¢˜ 1 ï¼š ä»¥ä¸‹ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> </span><br><span class="line"> <span class="type">Integer</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"> <span class="type">Integer</span> <span class="variable">i2</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">i3</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"> <span class="type">Integer</span> <span class="variable">i4</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"> </span><br><span class="line"> System.out.println(i1==i2);</span><br><span class="line"> System.out.println(i3==i4);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„ç»“æœï¼Ÿè¾“å‡ºç»“æœè¡¨æ˜ i1 å’Œ i2 æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œ i3 å’Œ i4 æŒ‡å‘çš„æ˜¯ä¸åŒçš„å¯¹</p><p>è±¡ã€‚æ­¤æ—¶åªéœ€ä¸€çœ‹æºç ä¾¿çŸ¥ç©¶ç«Ÿï¼Œä¸‹é¢è¿™æ®µä»£ç æ˜¯ Integer çš„ valueOf æ–¹æ³•çš„å…·ä½“å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">valueOf</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line"> <span class="keyword">if</span>(i &gt;= -<span class="number">128</span> &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="line"> <span class="keyword">return</span> IntegerCache.cache[i + <span class="number">128</span>];</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(i);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ IntegerCache ç±»çš„å®ç°ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">IntegerCache</span> &#123;</span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> high;</span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> -<span class="number">128</span>;</span><br><span class="line"> <span class="comment">// high value may be configured by property</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> <span class="number">127</span>;</span><br><span class="line"> <span class="keyword">if</span> (integerCacheHighPropValue != <span class="literal">null</span>) &#123;</span><br><span class="line"> <span class="comment">// Use Long.decode here to avoid invoking methods that</span></span><br><span class="line"> <span class="comment">// require Integer&#x27;s autoboxing cache to be initialized</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> Long.decode(integerCacheHighPropValue).intValue();</span><br><span class="line"> i = Math.max(i, <span class="number">127</span>);</span><br><span class="line"> <span class="comment">// Maximum array size is Integer.MAX_VALUE</span></span><br><span class="line">h = Math.min(i, Integer.MAX_VALUE - -low);</span><br><span class="line"> &#125;</span><br><span class="line"> high = h;</span><br><span class="line"> cache = <span class="keyword">new</span> <span class="title class_">Integer</span>[(high - low) + <span class="number">1</span>];</span><br><span class="line"> <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> low;</span><br><span class="line"> <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line"> cache[k] = <span class="keyword">new</span> <span class="title class_">Integer</span>(j++);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">private</span> <span class="title function_">IntegerCache</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ä»è¿™2æ®µä»£ç å¯ä»¥çœ‹å‡ºï¼Œåœ¨é€šè¿‡ valueOf æ–¹æ³•åˆ›å»º Integer å¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚æœæ•°å€¼åœ¨ [-128,127] ä¹‹é—´ï¼Œä¾¿è¿”å›æŒ‡å‘ IntegerCache.cache ä¸­å·²ç»å­˜åœ¨çš„å¯¹è±¡çš„å¼•ç”¨ï¼›å¦åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„ Integer å¯¹è±¡ã€‚</p><p>ä¸Šé¢çš„ä»£ç ä¸­ i1 å’Œ i2 çš„æ•°å€¼ä¸º 100 ï¼Œå› æ­¤ä¼šç›´æ¥ä» cache ä¸­å–å·²ç»å­˜åœ¨çš„å¯¹è±¡ï¼Œæ‰€ä»¥ i1 å’Œ i2 æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œ i3 å’Œ i4 åˆ™æ˜¯åˆ†åˆ«æŒ‡å‘ä¸åŒçš„å¯¹è±¡ã€‚</p><p><strong>é¢è¯•é¢˜ 2 ï¼šä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆè¿è¡Œç»“æœï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> </span><br><span class="line"> <span class="type">Double</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">100.0</span>;</span><br><span class="line"> <span class="type">Double</span> <span class="variable">i2</span> <span class="operator">=</span> <span class="number">100.0</span>;</span><br><span class="line"> <span class="type">Double</span> <span class="variable">i3</span> <span class="operator">=</span> <span class="number">200.0</span>;</span><br><span class="line"> <span class="type">Double</span> <span class="variable">i4</span> <span class="operator">=</span> <span class="number">200.0</span>;</span><br><span class="line"> </span><br><span class="line"> System.out.println(i1==i2);</span><br><span class="line"> System.out.println(i3==i4);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure><p>åŸå› ï¼š åœ¨æŸä¸ªèŒƒå›´å†…çš„æ•´å‹æ•°å€¼çš„ä¸ªæ•°æ˜¯æœ‰é™çš„ï¼Œè€Œæµ®ç‚¹æ•°å´ä¸æ˜¯ã€‚</p><h3 id="7ã€-é‡è½½å’Œé‡å†™çš„åŒºåˆ«"><a href="#7ã€-é‡è½½å’Œé‡å†™çš„åŒºåˆ«" class="headerlink" title="7ã€ é‡è½½å’Œé‡å†™çš„åŒºåˆ«"></a><strong>7</strong>ã€ é‡è½½å’Œé‡å†™çš„åŒºåˆ«</h3><p><strong>é‡å†™ (Override)</strong></p><p>ä»å­—é¢ä¸Šçœ‹ï¼Œé‡å†™å°±æ˜¯é‡æ–°å†™ä¸€éçš„æ„æ€ã€‚å…¶å®å°±æ˜¯åœ¨å­ç±»ä¸­æŠŠçˆ¶ç±»æœ¬èº«æœ‰çš„æ–¹æ³•é‡æ–°å†™ä¸€éã€‚å­ç±»ç»§æ‰¿äº†çˆ¶ç±»åŸæœ‰çš„æ–¹æ³•ï¼Œä½†æœ‰æ—¶å­ç±»å¹¶ä¸æƒ³åŸå°ä¸åŠ¨çš„ç»§æ‰¿çˆ¶ç±»ä¸­çš„æŸä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥åœ¨æ–¹æ³•åï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›ç±»å‹(é™¤è¿‡å­ç±»ä¸­æ–¹æ³•çš„è¿”å›å€¼æ˜¯çˆ¶ç±»ä¸­æ–¹æ³•è¿”å›å€¼çš„å­ç±»æ—¶)éƒ½ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œ å¯¹æ–¹æ³•ä½“è¿›è¡Œä¿®æ”¹æˆ–é‡å†™ï¼Œè¿™å°±æ˜¯é‡å†™ã€‚ä½†è¦æ³¨æ„å­ç±»å‡½æ•°çš„è®¿é—®ä¿®é¥°æƒé™ä¸èƒ½å°‘äºçˆ¶ç±»çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"> <span class="type">Son</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Son</span>();</span><br><span class="line"> s.sayHello();</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_">Father</span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"> System.out.println(<span class="string">&quot;hello by &quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é‡å†™ æ€»ç»“ï¼š</strong>  1.å‘ç”Ÿåœ¨çˆ¶ç±»ä¸å­ç±»ä¹‹é—´ 2.æ–¹æ³•åï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›ç±»å‹ï¼ˆé™¤è¿‡å­ç±»ä¸­æ–¹æ³•çš„è¿”å›ç±»å‹æ˜¯çˆ¶ç±»ä¸­è¿”å›ç±»å‹çš„å­ç±»ï¼‰å¿…é¡»ç›¸åŒ 3.è®¿é—®ä¿®é¥°ç¬¦çš„é™åˆ¶ä¸€å®šè¦å¤§äºè¢«é‡å†™æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆ public &gt; protected &gt; default &gt; private ) 4.é‡å†™æ–¹æ³•ä¸€å®šä¸èƒ½æŠ›å‡ºæ–°çš„æ£€æŸ¥å¼‚å¸¸æˆ–è€…æ¯”è¢«é‡å†™æ–¹æ³•ç”³æ˜æ›´åŠ å®½æ³›çš„æ£€æŸ¥å‹å¼‚å¸¸</p><p><strong>é‡è½½ï¼ˆ Overload ï¼‰</strong></p><p>åœ¨ä¸€ä¸ªç±»ä¸­ï¼ŒåŒåçš„æ–¹æ³•å¦‚æœæœ‰ä¸åŒçš„å‚æ•°åˆ—è¡¨ï¼ˆ<strong>å‚æ•°ç±»å‹ä¸åŒã€å‚æ•°ä¸ªæ•°ä¸åŒç”šè‡³æ˜¯å‚æ•°é¡ºåºä¸åŒ</strong>ï¼‰åˆ™è§†ä¸ºé‡è½½ã€‚åŒæ—¶ï¼Œé‡è½½å¯¹è¿”å›ç±»å‹æ²¡æœ‰è¦æ±‚ï¼Œå¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒï¼Œä½†<strong>ä¸èƒ½é€šè¿‡è¿”å›ç±»å‹æ˜¯å¦ç›¸åŒæ¥åˆ¤æ–­é‡è½½</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"> <span class="type">Father</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Father</span>();</span><br><span class="line"> s.sayHello();</span><br><span class="line"> s.sayHello(<span class="string">&quot;wintershii&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">(String name)</span> &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;Hello&quot;</span> + <span class="string">&quot; &quot;</span> + name);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é‡è½½ æ€»ç»“ï¼š</strong>  1.é‡è½½ Overload æ˜¯ä¸€ä¸ªç±»ä¸­å¤šæ€æ€§çš„ä¸€ç§è¡¨ç° 2.é‡è½½è¦æ±‚åŒåæ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸åŒ(å‚æ•°ç±»å‹ï¼Œå‚æ•°ä¸ªæ•°ç”šè‡³æ˜¯å‚æ•°é¡ºåº) 3.é‡è½½çš„æ—¶å€™ï¼Œè¿”å›å€¼ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸ç›¸åŒã€‚æ— æ³•ä»¥è¿”å›å‹åˆ«ä½œä¸ºé‡è½½å‡½æ•°çš„åŒºåˆ†æ ‡å‡†</p><h3 id="8ã€equals-ä¸-çš„åŒºåˆ«"><a href="#8ã€equals-ä¸-çš„åŒºåˆ«" class="headerlink" title="8ã€equals ä¸ &#x3D;&#x3D; çš„åŒºåˆ«"></a>8ã€equals ä¸ &#x3D;&#x3D; çš„åŒºåˆ«</h3><p> <strong>&#x3D;&#x3D;</strong>   <strong>ï¼š</strong></p><p>&#x3D;&#x3D; æ¯”è¾ƒçš„æ˜¯å˜é‡(æ ˆ)å†…å­˜ä¸­å­˜æ”¾çš„å¯¹è±¡çš„(å †)å†…å­˜åœ°å€ï¼Œç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯å¦ç›¸åŒï¼Œå³æ˜¯å¦æ˜¯æŒ‡ç›¸åŒä¸€ä¸ªå¯¹è±¡ã€‚æ¯”è¾ƒçš„æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„æŒ‡é’ˆæ“ä½œã€‚</p><p>1ã€æ¯”è¾ƒçš„æ˜¯æ“ä½œç¬¦ä¸¤ç«¯çš„æ“ä½œæ•°æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚ 2ã€ä¸¤è¾¹çš„æ“ä½œæ•°å¿…é¡»æ˜¯åŒä¸€ç±»å‹çš„ï¼ˆå¯ä»¥æ˜¯çˆ¶å­ç±»ä¹‹é—´ï¼‰æ‰èƒ½ç¼–è¯‘é€šè¿‡ã€‚ 3ã€æ¯”è¾ƒçš„æ˜¯åœ°å€ï¼Œå¦‚æœæ˜¯å…·ä½“çš„é˜¿æ‹‰ä¼¯æ•°å­—çš„æ¯”è¾ƒï¼Œå€¼ç›¸ç­‰åˆ™ä¸º trueï¼Œå¦‚ï¼š int a &#x3D; 10 ä¸ long b &#x3D; 10 L ä¸ double c &#x3D; 10.0 éƒ½æ˜¯ç›¸åŒçš„ï¼ˆä¸ºtrueï¼‰ï¼Œå› ä¸ºä»–ä»¬éƒ½æŒ‡å‘åœ°å€ä¸º 10 çš„å †ã€‚</p><p><strong>equals</strong>ï¼š</p><p>equalsç”¨æ¥æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œç”±äºæ‰€æœ‰çš„ç±»éƒ½æ˜¯ç»§æ‰¿è‡ª java.lang.Object ç±»çš„ï¼Œæ‰€ä»¥é€‚ç”¨äºæ‰€æœ‰å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å¯¹è¯¥æ–¹æ³•è¿›è¡Œè¦†ç›–çš„è¯ï¼Œè°ƒç”¨çš„ä»ç„¶æ˜¯ Object ç±»ä¸­çš„æ–¹æ³•ï¼Œè€Œ Object ä¸­çš„ equals æ–¹æ³•è¿”å›çš„å´æ˜¯ &#x3D;&#x3D; çš„åˆ¤æ–­ã€‚</p><p>æ€»ç»“ï¼š</p><p>æ‰€æœ‰æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰æ—¶ï¼Œéƒ½æ˜¯ç”¨ equals å¹¶ä¸”åœ¨å¯¹å¸¸é‡ç›¸æ¯”è¾ƒæ—¶ï¼ŒæŠŠå¸¸é‡å†™åœ¨å‰é¢ï¼Œå› ä¸ºä½¿ç”¨ object çš„ equals object å¯èƒ½ä¸º null åˆ™ç©ºæŒ‡é’ˆ</p><p>åœ¨é˜¿é‡Œçš„ä»£ç è§„èŒƒä¸­åªä½¿ç”¨ equalsï¼Œé˜¿é‡Œæ’ä»¶é»˜è®¤ä¼šè¯†åˆ«ï¼Œå¹¶å¯ä»¥å¿«é€Ÿä¿®æ”¹ï¼Œæ¨èå®‰è£…é˜¿é‡Œæ’ä»¶æ¥æ’æŸ¥è€ä»£ç ä½¿ç”¨ â€œ&#x3D;&#x3D;â€ ï¼Œæ›¿æ¢æˆ equals</p><h3 id="9ã€Hashcode-çš„ä½œç”¨"><a href="#9ã€Hashcode-çš„ä½œç”¨" class="headerlink" title="9ã€Hashcode çš„ä½œç”¨"></a><strong>9ã€Hashcode çš„ä½œç”¨</strong></h3><p>java çš„é›†åˆæœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯ List ï¼Œè¿˜æœ‰ä¸€ç±»æ˜¯ Set ã€‚å‰è€…æœ‰åºå¯é‡å¤ï¼Œåè€…æ— åºä¸é‡å¤ã€‚å½“æˆ‘ä»¬åœ¨ set ä¸­æ’å…¥çš„æ—¶å€™æ€ä¹ˆåˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨è¯¥å…ƒç´ å‘¢ï¼Œå¯ä»¥é€šè¿‡ equals æ–¹æ³•ã€‚ä½†æ˜¯å¦‚æœå…ƒç´ å¤ªå¤šï¼Œç”¨è¿™æ ·çš„æ–¹æ³•å°±ä¼šæ¯”è¾ƒæ»¡ã€‚</p><p>äºæ˜¯æœ‰äººå‘æ˜äº†å“ˆå¸Œç®—æ³•æ¥æé«˜é›†åˆä¸­æŸ¥æ‰¾å…ƒç´ çš„æ•ˆç‡ã€‚ è¿™ç§æ–¹å¼å°†é›†åˆåˆ†æˆè‹¥å¹²ä¸ªå­˜å‚¨åŒºåŸŸï¼Œæ¯ä¸ªå¯¹è±¡å¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªå“ˆå¸Œç ï¼Œå¯ä»¥å°†å“ˆå¸Œç åˆ†ç»„ï¼Œæ¯ç»„åˆ†åˆ«å¯¹åº”æŸä¸ªå­˜å‚¨åŒºåŸŸï¼Œæ ¹æ®ä¸€ä¸ªå¯¹è±¡çš„å“ˆå¸Œç å°±å¯ä»¥ç¡®å®šè¯¥å¯¹è±¡åº”è¯¥å­˜å‚¨çš„é‚£ä¸ªåŒºåŸŸã€‚</p><p>hashCode æ–¹æ³•å¯ä»¥è¿™æ ·ç†è§£ï¼šå®ƒè¿”å›çš„å°±æ˜¯æ ¹æ®å¯¹è±¡çš„å†…å­˜åœ°å€æ¢ç®—å‡ºçš„ä¸€ä¸ªå€¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“é›†åˆè¦æ·»åŠ æ–°çš„å…ƒç´ æ—¶ï¼Œå…ˆè°ƒç”¨è¿™ä¸ªå…ƒç´ çš„ hashCode æ–¹æ³•ï¼Œå°±ä¸€ä¸‹å­èƒ½å®šä½åˆ°å®ƒåº”è¯¥æ”¾ç½®çš„ç‰©ç†ä½ç½®ä¸Šã€‚å¦‚æœè¿™ä¸ªä½ç½®ä¸Šæ²¡æœ‰å…ƒç´ ï¼Œå®ƒå°±å¯ä»¥ç›´æ¥å­˜å‚¨åœ¨è¿™ä¸ªä½ç½®ä¸Šï¼Œä¸ç”¨å†è¿›è¡Œä»»ä½•æ¯”è¾ƒäº†ï¼›å¦‚æœè¿™ä¸ªä½ç½®ä¸Šå·²ç»æœ‰å…ƒç´ äº†ï¼Œå°±è°ƒç”¨å®ƒçš„ equals æ–¹æ³•ä¸æ–°å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œç›¸åŒçš„è¯å°±ä¸å­˜äº†ï¼Œä¸ç›¸åŒå°±æ•£åˆ—å…¶å®ƒçš„åœ°å€ã€‚è¿™æ ·ä¸€æ¥å®é™…è°ƒç”¨ equals æ–¹æ³•çš„æ¬¡æ•°å°±å¤§å¤§é™ä½äº†ï¼Œå‡ ä¹åªéœ€è¦ä¸€ä¸¤æ¬¡ã€‚</p><h3 id="10ã€Stringã€StringBuffer-å’Œ-StringBuilder-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"><a href="#10ã€Stringã€StringBuffer-å’Œ-StringBuilder-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="10ã€Stringã€StringBuffer å’Œ StringBuilder çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?"></a>10ã€Stringã€StringBuffer å’Œ StringBuilder çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?</h3><p>String æ˜¯åªè¯»å­—ç¬¦ä¸²ï¼Œå®ƒå¹¶ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ä»åº•å±‚æºç æ¥çœ‹æ˜¯ä¸€ä¸ª final ç±»å‹çš„å­—ç¬¦æ•°ç»„ï¼Œæ‰€å¼•ç”¨çš„å­—ç¬¦ä¸²ä¸èƒ½è¢«æ”¹å˜ï¼Œä¸€ç»å®šä¹‰ï¼Œæ— æ³•å†å¢åˆ æ”¹ã€‚æ¯æ¬¡å¯¹ String çš„æ“ä½œéƒ½ä¼šç”Ÿæˆæ–°çš„ String å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">char</span> value[];<span class="comment">//dk1.8 åŠä»¥å‰ String åº•å±‚ä½¿ç”¨çš„æ˜¯ char æ•°ç»„</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">byte</span>[] value;<span class="comment">//jdk 1.9 åŠä»¥åä½¿ç”¨çš„æ˜¯ byte æ•°ç»„</span></span><br></pre></td></tr></table></figure><p><strong>jdk1.8 åŠä»¥å‰ String åº•å±‚ä½¿ç”¨çš„æ˜¯ char æ•°ç»„ï¼Œjdk 1.9 åŠä»¥åä½¿ç”¨çš„æ˜¯ byte æ•°ç»„ã€‚</strong></p><p>æ¯æ¬¡ + æ“ä½œ ï¼š éšå¼åœ¨å †ä¸Š new äº†ä¸€ä¸ªè·ŸåŸå­—ç¬¦ä¸²ç›¸åŒçš„ StringBuilder å¯¹è±¡ï¼Œå†è°ƒç”¨ append æ–¹æ³•æ‹¼æ¥ + åé¢çš„å­—ç¬¦ã€‚</p><p>StringBuffer å’Œ StringBuilder ä»–ä»¬ä¸¤éƒ½ç»§æ‰¿äº† AbstractStringBuilder æŠ½è±¡ç±»ï¼Œä» AbstractStringBuilder æŠ½è±¡ç±»ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åŸºäº1.8</span></span><br><span class="line"><span class="comment">* The value is used for character storage.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">char</span>[] value;</span><br></pre></td></tr></table></figure><p>ä»–ä»¬çš„åº•å±‚éƒ½æ˜¯å¯å˜çš„å­—ç¬¦æ•°ç»„ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œé¢‘ç¹çš„å­—ç¬¦ä¸²æ“ä½œæ—¶ï¼Œå»ºè®®ä½¿ç”¨ StringBuffer å’Œ StringBuilder æ¥è¿›è¡Œæ“ä½œã€‚ å¦å¤–StringBuffer å¯¹æ–¹æ³•åŠ äº†åŒæ­¥é”æˆ–è€…å¯¹è°ƒç”¨çš„æ–¹æ³•åŠ äº†åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚StringBuilder å¹¶æ²¡æœ‰å¯¹æ–¹æ³•è¿›è¡ŒåŠ åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</p><h3 id="11ã€ArrayList-å’Œ-linkedList-çš„åŒºåˆ«"><a href="#11ã€ArrayList-å’Œ-linkedList-çš„åŒºåˆ«" class="headerlink" title="11ã€ArrayList å’Œ linkedList çš„åŒºåˆ«"></a>11ã€ArrayList å’Œ linkedList çš„åŒºåˆ«</h3><p><strong>ArrayList</strong></p><ul><li><strong>ä¼˜ç‚¹</strong>ï¼šArrayList æ˜¯å®ç°äº†åŸºäºåŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œå› ä¸ºåœ°å€è¿ç»­ï¼Œä¸€æ—¦æ•°æ®å­˜å‚¨å¥½äº†ï¼ŒæŸ¥è¯¢æ“ä½œæ•ˆç‡ä¼šæ¯”è¾ƒé«˜ï¼ˆåœ¨å†…å­˜é‡Œæ˜¯è¿ç€æ”¾çš„ï¼‰ã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼šå› ä¸ºåœ°å€è¿ç»­ï¼ŒArrayList è¦ç§»åŠ¨æ•°æ®ï¼Œæ‰€ä»¥æ’å…¥å’Œåˆ é™¤æ“ä½œæ•ˆç‡æ¯”è¾ƒä½ã€‚</li></ul><p><strong>LinkedList</strong></p><ul><li><strong>ä¼˜ç‚¹</strong>ï¼šLinkedList åŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œåœ°å€æ˜¯ä»»æ„çš„ï¼Œæ‰€ä»¥åœ¨å¼€è¾Ÿå†…å­˜ç©ºé—´çš„æ—¶å€™ä¸éœ€è¦ç­‰ä¸€ä¸ªè¿ç»­çš„åœ°å€ã€‚å¯¹äºæ–°å¢å’Œåˆ é™¤æ“ä½œï¼ŒLinkedList æ¯”è¾ƒå ä¼˜åŠ¿ã€‚LinkedList é€‚ç”¨äºè¦å¤´å°¾æ“ä½œæˆ–æ’å…¥æŒ‡å®šä½ç½®çš„åœºæ™¯ã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼šå› ä¸º LinkedList è¦ç§»åŠ¨æŒ‡é’ˆï¼Œæ‰€ä»¥æŸ¥è¯¢æ“ä½œæ€§èƒ½æ¯”è¾ƒä½ã€‚</li></ul><p><strong>é€‚ç”¨åœºæ™¯åˆ†æ</strong></p><ul><li>å½“éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¯¹éšæœºè®¿é—®çš„æ—¶å€™ï¼Œé€‰ç”¨ ArrayListã€‚</li><li>å½“éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¤šæ¬¡å¢åŠ åˆ é™¤ä¿®æ”¹æ—¶ï¼Œé‡‡ç”¨ LinkedListã€‚</li></ul><p>å¦‚æœå®¹é‡å›ºå®šï¼Œå¹¶ä¸”åªä¼šæ·»åŠ åˆ°å°¾éƒ¨ï¼Œä¸ä¼šå¼•èµ·æ‰©å®¹ï¼Œä¼˜å…ˆé‡‡ç”¨ ArrayListã€‚</p><p>å½“ç„¶ï¼Œç»å¤§æ•°ä¸šåŠ¡çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ ArrayList å°±å¤Ÿäº†ï¼Œä½†éœ€è¦æ³¨æ„é¿å… ArrayList çš„æ‰©å®¹ï¼Œä»¥åŠéé¡ºåºçš„æ’å…¥ã€‚</p><p><strong>Array ï¼ˆæ•°ç»„ï¼‰æ˜¯åŸºäºç´¢å¼•ï¼ˆindexï¼‰çš„æ•°æ®ç»“æ„ï¼Œå®ƒä½¿ç”¨ç´¢å¼•åœ¨æ•°ç»„ä¸­æœç´¢å’Œè¯»å–æ•°æ®æ˜¯å¾ˆå¿«çš„ã€‚</strong></p><p>Array è·å–æ•°æ®çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O ( 1 ) ,ä½†æ˜¯è¦åˆ é™¤æ•°æ®å´æ˜¯å¼€é”€å¾ˆå¤§ï¼Œå› ä¸ºè¿™éœ€è¦é‡æ’æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆå› ä¸ºåˆ é™¤æ•°æ®ä»¥å, éœ€è¦æŠŠåé¢æ‰€æœ‰çš„æ•°æ®å‰ç§»ï¼‰</p><p><strong>ç¼ºç‚¹ï¼š</strong> æ•°ç»„åˆå§‹åŒ–å¿…é¡»æŒ‡å®šåˆå§‹åŒ–çš„é•¿åº¦, å¦åˆ™æŠ¥é”™</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">4</span>];<span class="comment">//æ¨ä»‹ä½¿ç”¨int[] è¿™ç§æ–¹å¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">int</span> c[] = &#123;<span class="number">23</span>,<span class="number">43</span>,<span class="number">56</span>,<span class="number">78</span>&#125;;<span class="comment">//é•¿åº¦ï¼š4ï¼Œç´¢å¼•èŒƒå›´ï¼š[0,3]</span></span><br></pre></td></tr></table></figure><p><strong>List æ˜¯ä¸€ä¸ªæœ‰åºçš„é›†åˆï¼Œå¯ä»¥åŒ…å«é‡å¤çš„å…ƒç´ ï¼Œæä¾›äº†æŒ‰ç´¢å¼•è®¿é—®çš„æ–¹å¼ï¼Œå®ƒç»§æ‰¿ Collectionã€‚</strong></p><p><strong>Listæœ‰ä¸¤ä¸ªé‡è¦çš„å®ç°ç±»ï¼šArrayList å’Œ LinkedList</strong></p><p><strong>ArrayList:</strong>  <strong>å¯ä»¥çœ‹ä½œæ˜¯èƒ½å¤Ÿè‡ªåŠ¨å¢é•¿å®¹é‡çš„æ•°ç»„</strong></p><p><strong>ArrayList çš„ toArray æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„</strong></p><p><strong>ArrayList çš„ asList æ–¹æ³•è¿”å›ä¸€ä¸ªåˆ—è¡¨</strong></p><p>ArrayListåº•å±‚çš„å®ç°æ˜¯ Array, æ•°ç»„æ‰©å®¹å®ç°</p><p><strong>LinkList æ˜¯ä¸€ä¸ªåŒé“¾è¡¨ ï¼Œåœ¨æ·»åŠ å’Œåˆ é™¤å…ƒç´ æ—¶å…·æœ‰æ¯” ArrayList æ›´å¥½çš„æ€§èƒ½ï¼›ä½†åœ¨ get ä¸ set æ–¹é¢å¼±äºArrayListã€‚å½“ç„¶ï¼Œè¿™äº›å¯¹æ¯”éƒ½æ˜¯æŒ‡æ•°æ®é‡å¾ˆå¤§æˆ–è€…æ“ä½œå¾ˆé¢‘ç¹ã€‚</strong></p><h3 id="12ã€HashMap-å’Œ-HashTable-çš„åŒºåˆ«"><a href="#12ã€HashMap-å’Œ-HashTable-çš„åŒºåˆ«" class="headerlink" title="12ã€HashMap å’Œ HashTable çš„åŒºåˆ«"></a>12ã€HashMap å’Œ HashTable çš„åŒºåˆ«</h3><p>HashTable æ˜¯ java ä¸€å¼€å§‹å‘å¸ƒæ—¶å°±æä¾›çš„é”®å€¼æ˜ å°„çš„æ•°æ®ç»“æ„ï¼Œè€Œ HashMap äº§ç”Ÿäº JDK 1.2ã€‚è™½ç„¶ HashTable æ¯” HashMap å‡ºç°çš„æ—©ä¸€äº›ï¼Œ<strong>ä½†æ˜¯ç°åœ¨ HashTable åŸºæœ¬ä¸Šå·²ç»è¢«å¼ƒç”¨äº†</strong>ã€‚è€Œ HashMap å·²ç»æˆä¸ºåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§æ•°æ®ç±»å‹äº†ã€‚</p><h4 id="1ã€ä¸¤è€…çˆ¶ç±»ä¸åŒ"><a href="#1ã€ä¸¤è€…çˆ¶ç±»ä¸åŒ" class="headerlink" title="1ã€ä¸¤è€…çˆ¶ç±»ä¸åŒ"></a>1ã€ä¸¤è€…çˆ¶ç±»ä¸åŒ</h4><p>HashMap æ˜¯ç»§æ‰¿è‡ª AbstractMap ç±»ï¼Œè€Œ HashTable æ˜¯ç»§æ‰¿è‡ª Dictionary ç±»ã€‚ä¸è¿‡å®ƒä»¬åŒæ—¶å®ç°äº† mapã€Cloneableï¼ˆå¯å¤åˆ¶ï¼‰ã€Serializableï¼ˆå¯åºåˆ—åŒ–ï¼‰è¿™ä¸‰ä¸ªæ¥å£ã€‚</p><h4 id="2ã€å¯¹å¤–æä¾›çš„æ¥å£ä¸åŒ"><a href="#2ã€å¯¹å¤–æä¾›çš„æ¥å£ä¸åŒ" class="headerlink" title="2ã€å¯¹å¤–æä¾›çš„æ¥å£ä¸åŒ"></a>2ã€å¯¹å¤–æä¾›çš„æ¥å£ä¸åŒ</h4><p>HashTable æ¯” HashMap å¤šæä¾›äº† elments() å’Œ contains() ä¸¤ä¸ªæ–¹æ³•ã€‚elments() æ–¹æ³•ç»§æ‰¿è‡ª HashTable çš„çˆ¶ç±» Dictionnaryã€‚elements() æ–¹æ³•ç”¨äºè¿”å›æ­¤ HashTable ä¸­çš„ value çš„æšä¸¾ã€‚</p><p>contains() æ–¹æ³•åˆ¤æ–­è¯¥ HashTable æ˜¯å¦åŒ…å«ä¼ å…¥çš„ valueã€‚å®ƒçš„ä½œç”¨ä¸ containsValue() ä¸€è‡´ã€‚äº‹å®ä¸Šï¼ŒcontansValue() å°±åªæ˜¯è°ƒç”¨äº†ä¸€ä¸‹ contains() æ–¹æ³•ã€‚</p><h4 id="3ã€å¯¹-null-çš„æ”¯æŒä¸åŒ"><a href="#3ã€å¯¹-null-çš„æ”¯æŒä¸åŒ" class="headerlink" title="3ã€å¯¹ null çš„æ”¯æŒä¸åŒ"></a>3ã€å¯¹ null çš„æ”¯æŒä¸åŒ</h4><p>Hashtableï¼škey å’Œ value éƒ½ä¸èƒ½ä¸º nullã€‚</p><p>HashMapï¼škey å¯ä»¥ä¸º nullï¼Œä½†æ˜¯è¿™æ ·çš„ key åªèƒ½æœ‰ä¸€ä¸ªï¼Œå› ä¸ºå¿…é¡»ä¿è¯ key çš„å”¯ä¸€æ€§ï¼›å¯ä»¥æœ‰å¤šä¸ª key å€¼å¯¹åº”çš„ value ä¸º nullã€‚</p><h4 id="4ã€å®‰å…¨æ€§ä¸åŒ"><a href="#4ã€å®‰å…¨æ€§ä¸åŒ" class="headerlink" title="4ã€å®‰å…¨æ€§ä¸åŒ"></a>4ã€å®‰å…¨æ€§ä¸åŒ</h4><p>HashMap æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œåœ¨å¤šçº¿ç¨‹å¹¶å‘çš„ç¯å¢ƒä¸‹ï¼Œå¯èƒ½ä¼šäº§ç”Ÿæ­»é”ç­‰é—®é¢˜ï¼Œå› æ­¤éœ€è¦å¼€å‘äººå‘˜è‡ªå·±å¤„ç†å¤šçº¿ç¨‹çš„å®‰å…¨é—®é¢˜ã€‚</p><p>Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå®ƒçš„æ¯ä¸ªæ–¹æ³•ä¸Šéƒ½æœ‰ synchronized  å…³é”®å­—ï¼Œå› æ­¤å¯ç›´æ¥ç”¨äºå¤šçº¿ç¨‹ä¸­ã€‚</p><p>è™½ç„¶ HashMap æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œä½†æ˜¯å®ƒçš„æ•ˆç‡è¿œè¿œé«˜äº Hashtableï¼Œè¿™æ ·è®¾è®¡æ˜¯åˆç†çš„ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„ä½¿ç”¨åœºæ™¯éƒ½æ˜¯å•çº¿ç¨‹ã€‚å½“éœ€è¦å¤šçº¿ç¨‹æ“ä½œçš„æ—¶å€™å¯ä»¥ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„ ConcurrentHashMap ã€‚</p><p>ConcurrentHashMap è™½ç„¶ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯å®ƒçš„æ•ˆç‡æ¯”Hashtableè¦é«˜å¥½å¤šå€ã€‚å› ä¸º ConcurrentHashMap ä½¿ç”¨äº†åˆ†æ®µé”ï¼Œå¹¶ä¸å¯¹æ•´ä¸ªæ•°æ®è¿›è¡Œé”å®šã€‚</p><p><strong>ç¬¬äºŒç§ç­”æ¡ˆï¼š</strong></p><ol><li><p>å‡ºç”Ÿçš„ç‰ˆæœ¬ä¸ä¸€æ ·ï¼ŒHashtable å‡ºç”Ÿäº Java å‘å¸ƒçš„ç¬¬ä¸€ç‰ˆæœ¬ JDK 1.0ï¼ŒHashMap å‡ºç”Ÿäº JDK 1.2ã€‚</p></li><li><p>éƒ½å®ç°äº† Mapã€Cloneableã€Serializableï¼ˆ å½“å‰ JDK ç‰ˆæœ¬ 1.8 ï¼‰ã€‚</p></li><li><p>HashMap ç»§æ‰¿çš„æ˜¯ AbstractMapï¼Œå¹¶ä¸” AbstractMap ä¹Ÿå®ç°äº† Map æ¥å£ã€‚Hashtable ç»§æ‰¿ Dictionaryã€‚</p></li><li><p>Hashtable ä¸­å¤§éƒ¨åˆ† public ä¿®é¥°æ™®é€šæ–¹æ³•éƒ½æ˜¯ synchronized å­—æ®µä¿®é¥°çš„ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒHashMap æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</p></li><li><p>Hashtable çš„ key ä¸èƒ½ä¸º nullï¼Œvalue ä¹Ÿä¸èƒ½ä¸º nullï¼Œè¿™ä¸ªå¯ä»¥ä» Hashtable æºç ä¸­çš„ put æ–¹æ³•çœ‹åˆ°ï¼Œåˆ¤æ–­å¦‚æœ value ä¸º null å°±ç›´æ¥æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œåœ¨ put æ–¹æ³•ä¸­è®¡ç®— key çš„ hash å€¼ä¹‹å‰å¹¶æ²¡æœ‰åˆ¤æ–­ key ä¸º null çš„æƒ…å†µï¼Œé‚£è¯´æ˜ï¼Œè¿™æ—¶å€™å¦‚æœ key ä¸ºç©ºï¼Œç…§æ ·ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p></li><li><p>HashMap çš„ key å’Œ value éƒ½å¯ä»¥ä¸º nullã€‚åœ¨è®¡ç®— hash å€¼çš„æ—¶å€™ï¼Œæœ‰åˆ¤æ–­ï¼Œå¦‚æœ key&#x3D;&#x3D;null ï¼Œåˆ™å…¶ hash&#x3D;0 ï¼›è‡³äº value æ˜¯å¦ä¸º nullï¼Œæ ¹æœ¬æ²¡æœ‰åˆ¤æ–­è¿‡ã€‚</p></li><li><p>Hashtable ç›´æ¥ä½¿ç”¨å¯¹è±¡çš„ hash å€¼ã€‚hash å€¼æ˜¯ JDK æ ¹æ®å¯¹è±¡çš„åœ°å€æˆ–è€…å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ç®—å‡ºæ¥çš„ int ç±»å‹çš„æ•°å€¼ã€‚ç„¶åå†ä½¿ç”¨é™¤ç•™ä½™æ•°æ³•æ¥è·å¾—æœ€ç»ˆçš„ä½ç½®ã€‚ç„¶è€Œé™¤æ³•è¿ç®—æ˜¯éå¸¸è€—è´¹æ—¶é—´çš„ï¼Œæ•ˆç‡å¾ˆä½ã€‚HashMap ä¸ºäº†æé«˜è®¡ç®—æ•ˆç‡ï¼Œå°†å“ˆå¸Œè¡¨çš„å¤§å°å›ºå®šä¸ºäº† 2 çš„å¹‚ï¼Œè¿™æ ·åœ¨å–æ¨¡é¢„ç®—æ—¶ï¼Œä¸éœ€è¦åšé™¤æ³•ï¼Œåªéœ€è¦åšä½è¿ç®—ã€‚ä½è¿ç®—æ¯”é™¤æ³•çš„æ•ˆç‡è¦é«˜å¾ˆå¤šã€‚</p></li><li><p>Hashtableã€HashMap éƒ½ä½¿ç”¨äº† Iteratorã€‚è€Œç”±äºå†å²åŸå› ï¼ŒHashtable è¿˜ä½¿ç”¨äº† Enumeration çš„æ–¹å¼ã€‚</p></li><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆå§‹å®¹é‡ä¸åŒï¼ŒHashtable çš„åˆå§‹é•¿åº¦æ˜¯ 11ï¼Œä¹‹åæ¯æ¬¡æ‰©å……å®¹é‡å˜ä¸ºä¹‹å‰çš„ 2n+1ï¼ˆn ä¸ºä¸Šä¸€æ¬¡çš„é•¿åº¦ï¼‰è€Œ HashMap çš„åˆå§‹é•¿åº¦ä¸º 16ï¼Œä¹‹åæ¯æ¬¡æ‰©å……å˜ä¸ºåŸæ¥çš„ä¸¤å€ã€‚</p><p> å¦å¤–åœ¨ Hashtable æºç æ³¨é‡Šä¸­æœ‰è¿™ä¹ˆä¸€å¥è¯ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hashtable is synchronized. If a thread-safe implementation is not needed, it is</span><br><span class="line">recommended to use HashMap in place of Hashtable . If a thread-safe highlyconcurrent implementation is desired, then it is recommended to use</span><br><span class="line">ConcurrentHashMap in place of Hashtable.</span><br></pre></td></tr></table></figure></li></ol><p>å¤§è‡´æ„æ€ï¼šHashtable æ˜¯çº¿ç¨‹å®‰å…¨ï¼Œæ¨èä½¿ç”¨ HashMap ä»£æ›¿ Hashtableï¼›å¦‚æœéœ€è¦çº¿ç¨‹å®‰å…¨é«˜å¹¶å‘çš„è¯ï¼Œæ¨èä½¿ç”¨ ConcurrentHashMap ä»£æ›¿ Hashtableã€‚</p><p>è¿™ä¸ªå›ç­”å®Œäº†ï¼Œé¢è¯•å®˜å¯èƒ½ä¼šç»§ç»­é—®ï¼šHashMap æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œé‚£ä¹ˆåœ¨éœ€è¦çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹è¿˜è¦è€ƒè™‘æ€§èƒ½ï¼Œæœ‰ä»€ä¹ˆè§£å†³æ–¹å¼ï¼Ÿ</p><p>è¿™é‡Œæœ€å¥½çš„é€‰æ‹©å°±æ˜¯ ConcurrentHashMap äº†ï¼Œä½†é¢è¯•å®˜è‚¯å®šä¼šå«ä½ ç»§ç»­è¯´ä¸€ä¸‹ ConcurrentHashMap æ•°æ®ç»“æ„ä»¥åŠåº•å±‚åŸç†ç­‰ã€‚</p><p><strong>æ‹“å±•ï¼šä»€ä¹ˆæ˜¯åˆ†æ®µé”ï¼Ÿ</strong></p><p>ConcurrentHashMap ä¸­çš„åˆ†æ®µé”ç§°ä¸º Segmentï¼Œå®ƒçš„å†…éƒ¨ç»“æ„æ˜¯ç»´æŠ¤ä¸€ä¸ª HashEntry æ•°ç»„ï¼ŒåŒæ—¶ Segment è¿˜ç»§æ‰¿äº† ReentrantLockã€‚</p><p>å½“éœ€è¦ put å…ƒç´ çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯å¯¹æ•´ä¸ª ConcurrentHashMap è¿›è¡ŒåŠ é”ï¼Œè€Œæ˜¯å…ˆé€šè¿‡ hashcode æ¥åˆ¤æ–­å®ƒæ”¾åœ¨å“ªä¸€ä¸ªåˆ†æ®µä¸­ï¼Œç„¶åå¯¹è¯¥åˆ†æ®µè¿›è¡ŒåŠ é”ã€‚æ‰€ä»¥å½“å¤šçº¿ç¨‹ put çš„æ—¶å€™ï¼Œåªè¦ä¸æ˜¯æ”¾åœ¨åŒä¸€ä¸ªåˆ†æ®µä¸­ï¼Œå°±å¯ä»¥å®ç°å¹¶è¡Œçš„æ’å…¥ã€‚åˆ†æ®µé”çš„è®¾è®¡ç›®çš„å°±æ˜¯ä¸ºäº†ç»†åŒ–é”çš„ç²’åº¦ï¼Œä»è€Œæé«˜å¹¶å‘èƒ½åŠ›ã€‚</p><p>jdk 1.8 ä¸­çš„ ConcurrentHashMap ä¸­åºŸå¼ƒäº† Segment é”ï¼Œç›´æ¥ä½¿ç”¨äº†æ•°ç»„å…ƒç´ ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªé”ã€‚åœ¨å…ƒç´ ä¸­æ²¡æœ‰å€¼çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ CAS æ“ä½œæ¥è®¾å€¼ï¼ŒåŒæ—¶ä¿è¯å¹¶å‘å®‰å…¨ï¼›å¦‚æœå…ƒç´ é‡Œé¢å·²ç»å­˜åœ¨å€¼çš„è¯ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ synchronized å…³é”®å­—å¯¹å…ƒç´ åŠ é”ï¼Œå†è¿›è¡Œä¹‹åçš„ hash å†²çªå¤„ç†ã€‚jdk1.8 çš„ ConcurrentHashMap åŠ é”ç²’åº¦æ¯” jdk 1.7 é‡Œçš„ Segment æ¥åŠ é”ç²’åº¦æ›´ç»†ï¼Œå¹¶å‘æ€§èƒ½æ›´å¥½ã€‚</p><h4 id="5ã€åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°ä¸åŒ"><a href="#5ã€åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°ä¸åŒ" class="headerlink" title="5ã€åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°ä¸åŒ"></a>5ã€åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°ä¸åŒ</h4><p>HashMap çš„åˆå§‹å®¹é‡ä¸ºï¼š16ï¼ŒHashtable åˆå§‹å®¹é‡ä¸ºï¼š11ï¼Œä¸¤è€…çš„è´Ÿè½½å› å­é»˜è®¤éƒ½æ˜¯ï¼š0.75</p><ul><li>HashMap æ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„ 2 å€ï¼ˆ 2 n ï¼‰ï¼›</li><li>HashTable æ¯æ¬¡æ‰©å……ï¼Œå®¹é‡ä¼šå˜ä¸ºåŸæ¥çš„ 2 å€ + 1ï¼ˆ 2 n + 1 ï¼‰ï¼›</li></ul><p>ä¸‹é¢ç»™å‡º HashMap ä¸­çš„æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The default initial capacity - MUST be a power of two.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_INITIAL_CAPACITY</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">4</span>; <span class="comment">// aka 16</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The maximum capacity, used if a higher value is implicitly specified</span></span><br><span class="line"><span class="comment"> * by either of the constructors with arguments.</span></span><br><span class="line"><span class="comment"> * MUST be a power of two &lt;= 1&lt;&lt;30.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAXIMUM_CAPACITY</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The load factor used when none specified in constructor.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">float</span> <span class="variable">DEFAULT_LOAD_FACTOR</span> <span class="operator">=</span> <span class="number">0.75f</span>;</span><br></pre></td></tr></table></figure><p><strong>æ‹“å±•ï¼šä»€ä¹ˆæ˜¯è´Ÿè½½å› å­ï¼Ÿ</strong></p><p>è´Ÿè½½å› å­ loadFactor &#x3D; å“ˆå¸Œè¡¨çš„æœ‰æ•ˆå…ƒç´ ä¸ªæ•° &#x2F; å“ˆå¸Œè¡¨é•¿åº¦</p><p>è¿™ä¸ªå€¼è¶Šå¤§å°±è¯´æ˜å†²çªè¶Šä¸¥é‡ä¸€äº›<br>è¿™ä¸ªå€¼è¶Šå°è¯´æ˜å†²çªè¶Šå°ï¼Œæ•°ç»„åˆ©ç”¨ç‡è¶Šä½<br>æ‰©å®¹ï¼šé‡‡ç”¨æ•´è¡¨æ‰©å®¹çš„æ–¹å¼ä»€ä¹ˆæ—¶å€™éœ€è¦å¯¹æ•°ç»„æ‰©å®¹ï¼Ÿ</p><p>æ‰©å®¹ä¸å¦å°±æ ¹æ®è´Ÿè½½å› å­æ¥å†³å®šï¼Œå½“æ•°ç»„é•¿åº¦ * è´Ÿè½½å› å­ &lt;&#x3D;  æœ‰æ•ˆå…ƒç´ ä¸ªæ•°å°±éœ€è¦æ‰©å®¹</p><p>HashMapä¸­çš„æºç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Returns a power of two size for the given target capacity.</span><br><span class="line"> */</span><br><span class="line">static final int tableSizeFor(int cap) &#123;</span><br><span class="line">    int n = cap - 1;</span><br><span class="line">    n |= n &gt;&gt;&gt; 1;</span><br><span class="line">    n |= n &gt;&gt;&gt; 2;</span><br><span class="line">    n |= n &gt;&gt;&gt; 4;</span><br><span class="line">    n |= n &gt;&gt;&gt; 8;</span><br><span class="line">    n |= n &gt;&gt;&gt; 16;</span><br><span class="line">    return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6ã€è®¡ç®—-hash-å€¼çš„æ–¹æ³•ä¸åŒ"><a href="#6ã€è®¡ç®—-hash-å€¼çš„æ–¹æ³•ä¸åŒ" class="headerlink" title="6ã€è®¡ç®— hash å€¼çš„æ–¹æ³•ä¸åŒ"></a>6ã€è®¡ç®— hash å€¼çš„æ–¹æ³•ä¸åŒ</h4><p>ä¸ºäº†å¾—åˆ°å…ƒç´ çš„ä½ç½®ï¼Œé¦–å…ˆéœ€è¦æ ¹æ®å…ƒç´ çš„ KEY è®¡ç®—å‡ºä¸€ä¸ª hash å€¼ï¼Œç„¶åå†ç”¨è¿™ä¸ª hash å€¼æ¥è®¡ç®—å¾—åˆ°æœ€ç»ˆçš„ä½ç½®ã€‚</p><p>Hashtable ä¸­ hash çš„è®¡ç®—æ–¹æ³•ä¸ºï¼šç›´æ¥ä½¿ç”¨å¯¹è±¡çš„ hashCode()ã€‚<br>HashMap ä¸­ hash çš„è®¡ç®—æ–¹æ³•ä¸ºï¼škey çš„ hash å€¼é«˜ 16 ä½ä¸å˜ï¼Œä½ 16 ä½ä¸é«˜ 16 ä½å¼‚æˆ–ä½œä¸º key æœ€ç»ˆçš„ hash å€¼ã€‚ï¼ˆh&gt;&gt;&gt;16ï¼Œè¡¨ç¤ºæ— ç¬¦å·å³ç§» 16 ä½ï¼Œé«˜ä½è¡¥ 0 ï¼‰</p><p><strong>HashTableï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Maps the specified &lt;code&gt;key&lt;/code&gt; to the specified</span></span><br><span class="line"><span class="comment"> * &lt;code&gt;value&lt;/code&gt; in this hashtable. Neither the key nor the</span></span><br><span class="line"><span class="comment"> * value can be &lt;code&gt;null&lt;/code&gt;. &lt;p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The value can be retrieved by calling the &lt;code&gt;get&lt;/code&gt; method</span></span><br><span class="line"><span class="comment"> * with a key that is equal to the original key.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>      key     the hashtable key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>      value   the value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>     the previous value of the specified key in this hashtable,</span></span><br><span class="line"><span class="comment"> *             or &lt;code&gt;null&lt;/code&gt; if it did not have one</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@exception</span>  NullPointerException  if the key or value is</span></span><br><span class="line"><span class="comment"> *               &lt;code&gt;null&lt;/code&gt;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span>     Object#equals(Object)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span>     #get(Object)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    <span class="comment">// Make sure the value is not null</span></span><br><span class="line">    <span class="keyword">if</span> (value == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Makes sure the key is not already in the hashtable.</span></span><br><span class="line">    Entry&lt;?,?&gt; tab[] = table;</span><br><span class="line">    <span class="type">int</span> <span class="variable">hash</span> <span class="operator">=</span> key.hashCode();</span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> (hash &amp; <span class="number">0x7FFFFFFF</span>) % tab.length;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    Entry&lt;K,V&gt; entry = (Entry&lt;K,V&gt;)tab[index];</span><br><span class="line">    <span class="keyword">for</span>(; entry != <span class="literal">null</span> ; entry = entry.next) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((entry.hash == hash) &amp;&amp; entry.key.equals(key)) &#123;</span><br><span class="line">            <span class="type">V</span> <span class="variable">old</span> <span class="operator">=</span> entry.value;</span><br><span class="line">            entry.value = value;</span><br><span class="line">            <span class="keyword">return</span> old;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    addEntry(hash, key, value, index);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>HashMapï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Computes key.hashCode() and spreads (XORs) higher bits of hash</span></span><br><span class="line"><span class="comment"> * to lower.  Because the table uses power-of-two masking, sets of</span></span><br><span class="line"><span class="comment"> * hashes that vary only in bits above the current mask will</span></span><br><span class="line"><span class="comment"> * always collide. (Among known examples are sets of Float keys</span></span><br><span class="line"><span class="comment"> * holding consecutive whole numbers in small tables.)  So we</span></span><br><span class="line"><span class="comment"> * apply a transform that spreads the impact of higher bits</span></span><br><span class="line"><span class="comment"> * downward. There is a tradeoff between speed, utility, and</span></span><br><span class="line"><span class="comment"> * quality of bit-spreading. Because many common sets of hashes</span></span><br><span class="line"><span class="comment"> * are already reasonably distributed (so don&#x27;t benefit from</span></span><br><span class="line"><span class="comment"> * spreading), and because we use trees to handle large sets of</span></span><br><span class="line"><span class="comment"> * collisions in bins, we just XOR some shifted bits in the</span></span><br><span class="line"><span class="comment"> * cheapest possible way to reduce systematic lossage, as well as</span></span><br><span class="line"><span class="comment"> * to incorporate impact of the highest bits that would otherwise</span></span><br><span class="line"><span class="comment"> * never be used in index calculations because of table bounds.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ‹“å±•ï¼šä»€ä¹ˆæ˜¯hashCodeï¼Ÿ</strong></p><p>hashCode æ˜¯ JDK æ ¹æ®å¯¹è±¡çš„åœ°å€æˆ–è€…å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ç®—å‡ºæ¥çš„ int ç±»å‹çš„æ•°å€¼ã€‚</p><p><strong>ä¸¤è€…ä¸ºå•¥ hash ç®—æ³•ä¸ä¸€æ ·ï¼Ÿ</strong></p><p>Hashtable åœ¨è®¡ç®—å…ƒç´ çš„ä½ç½®æ—¶ä½¿ç”¨é™¤ç•™ä½™æ•°æ³•æ¥è·å¾—å­˜å‚¨çš„æœ€ç»ˆçš„ä½ç½®ï¼Œè€Œé™¤æ³•è¿ç®—æ˜¯æ¯”è¾ƒè€—æ—¶çš„ã€‚</p><p>HashMap ä¸ºäº†æé«˜è®¡ç®—æ•ˆç‡ï¼Œå°†å“ˆå¸Œè¡¨çš„å¤§å°å›ºå®šä¸ºäº† 2 çš„å€æ•°ï¼Œè¿™æ ·åœ¨å–æ¨¡è¿ç®—æ—¶ï¼Œä¸éœ€è¦åšé™¤æ³•ï¼Œåªéœ€è¦åšä½è¿ç®—ï¼ˆå·¦ç§»ä¸€ä½å°±æ˜¯ä¹˜ä»¥ 2 ï¼‰ã€‚ä½è¿ç®—æ¯”é™¤æ³•çš„æ•ˆç‡è¦é«˜å¾ˆå¤šã€‚</p><p>HashMap çš„æ•ˆç‡è™½ç„¶æé«˜äº†ï¼Œä½†æ˜¯ hash å†²çªå´ä¹Ÿå¢åŠ äº†ã€‚å› ä¸ºå®ƒå¾—å‡ºçš„ hash å€¼çš„ä½ä½ç›¸åŒçš„æ¦‚ç‡æ¯”è¾ƒé«˜ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHashMap é‡æ–°æ ¹æ® hashcode è®¡ç®— hash å€¼åï¼Œåˆå°† hash å€¼æ— ç¬¦å·å³ç§» 16 ä½ï¼Œä½¿å¾—è¿ç®—å‡ºæ¥æ‰€å–å¾—çš„ä½ç½®åˆ†æ•£åˆ°é«˜ä½ä½ä¸­ï¼Œä»è€Œå‡å°‘äº† hash å†²çªã€‚HashMap ä¸­é‡‡å–çš„è¿™ç§ç®€å•ä½è¿ç®—æ“ä½œï¼Œä¸ä¼šæŠŠä½¿ç”¨ 2 çš„å¹‚æ¬¡æ–¹å¸¦æ¥çš„æ•ˆç‡æå‡ç»™æŠµæ¶ˆæ‰ã€‚</p><h4 id="7-è¿­ä»£å™¨å†…éƒ¨å®ç°ä¸åŒ"><a href="#7-è¿­ä»£å™¨å†…éƒ¨å®ç°ä¸åŒ" class="headerlink" title="7. è¿­ä»£å™¨å†…éƒ¨å®ç°ä¸åŒ"></a>7. è¿­ä»£å™¨å†…éƒ¨å®ç°ä¸åŒ</h4><p>Hashtableã€HashMap éƒ½ä½¿ç”¨äº† Iteratorã€‚Hashtable è¿˜ä½¿ç”¨äº† Enumeration çš„æ–¹å¼ ã€‚</p><p>Hashtableä¸­ çš„ Enumerator ç±»ï¼Œå®ç°äº† Enumeration æ¥å£å’Œ Iterator æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A hashtable enumerator class.  This class implements both the</span></span><br><span class="line"><span class="comment"> * Enumeration and Iterator interfaces, but individual instances</span></span><br><span class="line"><span class="comment"> * can be created with the Iterator methods disabled.  This is necessary</span></span><br><span class="line"><span class="comment"> * to avoid unintentionally increasing the capabilities granted a user</span></span><br><span class="line"><span class="comment"> * by passing an Enumeration.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Enumerator</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Enumeration</span>&lt;T&gt;, Iterator&lt;T&gt; &#123;</span><br><span class="line">    Entry&lt;?,?&gt;[] table = Hashtable.<span class="built_in">this</span>.table;</span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> table.length;</span><br><span class="line">    Entry&lt;?,?&gt; entry;</span><br><span class="line">    Entry&lt;?,?&gt; lastReturned;</span><br><span class="line">    <span class="type">int</span> type;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Indicates whether this Enumerator is serving as an Iterator</span></span><br><span class="line"><span class="comment">     * or an Enumeration.  (true -&gt; Iterator).</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> iterator;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The modCount value that the iterator believes that the backing</span></span><br><span class="line"><span class="comment">     * Hashtable should have.  If this expectation is violated, the iterator</span></span><br><span class="line"><span class="comment">     * has detected concurrent modification.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;</span><br><span class="line"></span><br><span class="line">    Enumerator(<span class="type">int</span> type, <span class="type">boolean</span> iterator) &#123;</span><br><span class="line">        <span class="built_in">this</span>.type = type;</span><br><span class="line">        <span class="built_in">this</span>.iterator = iterator;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasMoreElements</span><span class="params">()</span> &#123;</span><br><span class="line">        Entry&lt;?,?&gt; e = entry;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> index;</span><br><span class="line">        Entry&lt;?,?&gt;[] t = table;</span><br><span class="line">        <span class="comment">/* Use locals for faster loop iteration */</span></span><br><span class="line">        <span class="keyword">while</span> (e == <span class="literal">null</span> &amp;&amp; i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            e = t[--i];</span><br><span class="line">        &#125;</span><br><span class="line">        entry = e;</span><br><span class="line">        index = i;</span><br><span class="line">        <span class="keyword">return</span> e != <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">nextElement</span><span class="params">()</span> &#123;</span><br><span class="line">        Entry&lt;?,?&gt; et = entry;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> index;</span><br><span class="line">        Entry&lt;?,?&gt;[] t = table;</span><br><span class="line">        <span class="comment">/* Use locals for faster loop iteration */</span></span><br><span class="line">        <span class="keyword">while</span> (et == <span class="literal">null</span> &amp;&amp; i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            et = t[--i];</span><br><span class="line">        &#125;</span><br><span class="line">        entry = et;</span><br><span class="line">        index = i;</span><br><span class="line">        <span class="keyword">if</span> (et != <span class="literal">null</span>) &#123;</span><br><span class="line">            Entry&lt;?,?&gt; e = lastReturned = entry;</span><br><span class="line">            entry = e.next;</span><br><span class="line">            <span class="keyword">return</span> type == KEYS ? (T)e.key : (type == VALUES ? (T)e.value : (T)e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>(<span class="string">&quot;Hashtable Enumerator&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Iterator methods</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hasMoreElements();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">        <span class="keyword">return</span> nextElement();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!iterator)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">        <span class="keyword">if</span> (lastReturned == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;Hashtable Enumerator&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">synchronized</span>(Hashtable.<span class="built_in">this</span>) &#123;</span><br><span class="line">            Entry&lt;?,?&gt;[] tab = Hashtable.<span class="built_in">this</span>.table;</span><br><span class="line">            <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> (lastReturned.hash &amp; <span class="number">0x7FFFFFFF</span>) % tab.length;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">            Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;)tab[index];</span><br><span class="line">            <span class="keyword">for</span>(Entry&lt;K,V&gt; prev = <span class="literal">null</span>; e != <span class="literal">null</span>; prev = e, e = e.next) &#123;</span><br><span class="line">                <span class="keyword">if</span> (e == lastReturned) &#123;</span><br><span class="line">                    modCount++;</span><br><span class="line">                    expectedModCount++;</span><br><span class="line">                    <span class="keyword">if</span> (prev == <span class="literal">null</span>)</span><br><span class="line">                        tab[index] = e.next;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        prev.next = e.next;</span><br><span class="line">                    count--;</span><br><span class="line">                    lastReturned = <span class="literal">null</span>;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>HashMap ä¸­çš„ Iterator ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ------------------------------------------------------------ */</span></span><br><span class="line">  <span class="comment">// iterators</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">HashIterator</span> &#123;</span><br><span class="line">      Node&lt;K,V&gt; next;        <span class="comment">// next entry to return</span></span><br><span class="line">      Node&lt;K,V&gt; current;     <span class="comment">// current entry</span></span><br><span class="line">      <span class="type">int</span> expectedModCount;  <span class="comment">// for fast-fail</span></span><br><span class="line">      <span class="type">int</span> index;             <span class="comment">// current slot</span></span><br><span class="line"></span><br><span class="line">      HashIterator() &#123;</span><br><span class="line">          expectedModCount = modCount;</span><br><span class="line">          Node&lt;K,V&gt;[] t = table;</span><br><span class="line">          current = next = <span class="literal">null</span>;</span><br><span class="line">          index = <span class="number">0</span>;</span><br><span class="line">          <span class="keyword">if</span> (t != <span class="literal">null</span> &amp;&amp; size &gt; <span class="number">0</span>) &#123; <span class="comment">// advance to first entry</span></span><br><span class="line">              <span class="keyword">do</span> &#123;&#125; <span class="keyword">while</span> (index &lt; t.length &amp;&amp; (next = t[index++]) == <span class="literal">null</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> next != <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">final</span> Node&lt;K,V&gt; <span class="title function_">nextNode</span><span class="params">()</span> &#123;</span><br><span class="line">          Node&lt;K,V&gt;[] t;</span><br><span class="line">          Node&lt;K,V&gt; e = next;</span><br><span class="line">          <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">          <span class="keyword">if</span> (e == <span class="literal">null</span>)</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">          <span class="keyword">if</span> ((next = (current = e).next) == <span class="literal">null</span> &amp;&amp; (t = table) != <span class="literal">null</span>) &#123;</span><br><span class="line">              <span class="keyword">do</span> &#123;&#125; <span class="keyword">while</span> (index &lt; t.length &amp;&amp; (next = t[index++]) == <span class="literal">null</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> e;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">          Node&lt;K,V&gt; p = current;</span><br><span class="line">          <span class="keyword">if</span> (p == <span class="literal">null</span>)</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>();</span><br><span class="line">          <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">              <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">          current = <span class="literal">null</span>;</span><br><span class="line">          <span class="type">K</span> <span class="variable">key</span> <span class="operator">=</span> p.key;</span><br><span class="line">          removeNode(hash(key), key, <span class="literal">null</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">          expectedModCount = modCount;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><strong>æ‹“å±•ï¼šJDK 8 ä¹‹åï¼ŒHashMap å’Œ Hashtable çš„ Iterator éƒ½æœ‰ fast-fail æœºåˆ¶ã€‚</strong></p><p>å½“æœ‰å…¶å®ƒçº¿ç¨‹ä¿®æ”¹äº† HashMap çš„ç»“æ„æ—¶ï¼Œå°†ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚</p><p>æ³¨ï¼šç»“æ„ä¿®æ”¹æ˜¯æŒ‡æ”¹å˜ HashMap ä¸­çš„æ˜ å°„æ•°é‡æˆ–ä»¥å…¶ä»–æ–¹å¼ä¿®æ”¹å…¶å†…éƒ¨ç»“æ„ (å¦‚ï¼Œé‡æ–°å“ˆå¸Œï¼Œå¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹å…ƒç´ )ã€‚</p><p><strong>ä»€ä¹ˆæ˜¯ fast-fail æœºåˆ¶ï¼Ÿ</strong></p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1-1-20240823074440-3xmm3cy.png">â€‹</p><p>ä¾‹å¦‚ï¼Œé€šå¸¸ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹åœ¨å¦ä¸€ä¸ªçº¿ç¨‹è¿­ä»£ Collection æ—¶ä¿®æ”¹å®ƒã€‚</p><p>é€šå¸¸ï¼Œè¿­ä»£çš„ç»“æœåœ¨è¿™äº›æƒ…å†µä¸‹æ˜¯æ²¡æœ‰å®šä¹‰çš„ã€‚å¦‚æœæ£€æµ‹åˆ°æ­¤è¡Œä¸ºï¼Œä¸€äº› Iterator å®ç°(åŒ…æ‹¬JREæä¾›çš„æ‰€æœ‰é€šç”¨é›†åˆå®ç°)å¯èƒ½ä¼šé€‰æ‹©æŠ›å‡ºæ­¤å¼‚å¸¸ã€‚è¿™æ ·åšçš„è¿­ä»£å™¨è¢«ç§°ä¸ºå¿«é€Ÿå¤±è´¥è¿­ä»£å™¨ï¼Œå› ä¸ºå®ƒä»¬å¿«é€Ÿè€Œå¹²å‡€åœ°å¤±è´¥ï¼Œè€Œä¸æ˜¯å†’ç€åœ¨æœªæ¥ä¸ç¡®å®šçš„æ—¶é—´å‘ç”Ÿä»»æ„ã€ä¸ç¡®å®šè¡Œä¸ºçš„é£é™©ã€‚</p><p>è¿­ä»£å™¨ä¸­çš„ modCount å˜é‡ï¼Œç±»ä¼¼äºå¹¶å‘ç¼–ç¨‹ä¸­çš„ CASï¼ˆCompare and Swapï¼‰æŠ€æœ¯ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæ¯æ¬¡åœ¨å‘ç”Ÿå¢åˆ æ”¹çš„æ—¶å€™éƒ½ä¼šå‡ºç° modCount++ çš„åŠ¨ä½œã€‚</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1-2-20240823074441-3mr3hcn.png">â€‹</p><p>è€Œ modcount å¯ä»¥ç†è§£ä¸ºæ˜¯å½“å‰ hashtable çš„çŠ¶æ€ã€‚æ¯å‘ç”Ÿä¸€æ¬¡æ“ä½œï¼ŒçŠ¶æ€å°±å‘å‰èµ°ä¸€æ­¥ã€‚è®¾ç½®è¿™ä¸ªçŠ¶æ€ï¼Œä¸»è¦æ˜¯ç”±äº hashtable ç­‰å®¹å™¨ç±»åœ¨è¿­ä»£æ—¶ï¼Œåˆ¤æ–­æ•°æ®æ˜¯å¦è¿‡æ—¶æ—¶ä½¿ç”¨çš„ã€‚å°½ç®¡ hashtable é‡‡ç”¨äº†åŸç”Ÿçš„åŒæ­¥é”æ¥ä¿æŠ¤æ•°æ®å®‰å…¨ã€‚ä½†æ˜¯åœ¨å‡ºç°è¿­ä»£æ•°æ®çš„æ—¶å€™ï¼Œåˆ™æ— æ³•ä¿è¯è¾¹è¿­ä»£ï¼Œè¾¹æ­£ç¡®æ“ä½œã€‚äºæ˜¯ä½¿ç”¨è¿™ä¸ªå€¼æ¥æ ‡è®°çŠ¶æ€ã€‚ä¸€æ—¦åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ï¼Œåˆ™ä¼šå¿«é€ŸæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œç»ˆæ­¢è¿­ä»£è¡Œä¸ºã€‚</p><h3 id="13ã€-Collection-åŒ…ç»“æ„ä¸-Collections-çš„åŒºåˆ«"><a href="#13ã€-Collection-åŒ…ç»“æ„ä¸-Collections-çš„åŒºåˆ«" class="headerlink" title="13ã€ Collection åŒ…ç»“æ„ä¸ Collections çš„åŒºåˆ«"></a>13ã€ Collection åŒ…ç»“æ„ä¸ Collections çš„åŒºåˆ«</h3><p>Collection æ˜¯é›†åˆç±»çš„ä¸Šçº§æ¥å£ï¼Œå­æ¥å£æœ‰ Setã€Listã€LinkedListã€ArrayListã€Vectorã€Stackã€Setï¼›</p><p>Collections æ˜¯é›†åˆç±»çš„ä¸€ä¸ªå¸®åŠ©ç±»ï¼Œ å®ƒåŒ…å«æœ‰å„ç§æœ‰å…³é›†åˆæ“ä½œçš„é™æ€å¤šæ€æ–¹æ³•ï¼Œç”¨äºå®ç°å¯¹å„ç§é›†åˆçš„æœç´¢ã€æ’åºã€çº¿ç¨‹å®‰å…¨åŒ–ç­‰æ“ä½œã€‚æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œå°±åƒä¸€ä¸ªå·¥å…·ç±»ï¼ŒæœåŠ¡äº Java çš„ Collection æ¡†æ¶ã€‚</p><h3 id="14ã€-Java-çš„å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™š"><a href="#14ã€-Java-çš„å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™š" class="headerlink" title="14ã€ Java çš„å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™š"></a>14ã€ Java çš„å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™š</h3><h4 id="1ã€å¼ºå¼•ç”¨"><a href="#1ã€å¼ºå¼•ç”¨" class="headerlink" title="1ã€å¼ºå¼•ç”¨"></a>1ã€å¼ºå¼•ç”¨</h4><p>å¼ºå¼•ç”¨æ˜¯å¹³å¸¸ä¸­ä½¿ç”¨æœ€å¤šçš„å¼•ç”¨ï¼Œå¼ºå¼•ç”¨åœ¨ç¨‹åºå†…å­˜ä¸è¶³ï¼ˆOOMï¼‰çš„æ—¶å€™ä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼Œä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;str&quot;</span>);</span><br><span class="line">System.out.println(str);</span><br></pre></td></tr></table></figure><h4 id="2ã€è½¯å¼•ç”¨"><a href="#2ã€è½¯å¼•ç”¨" class="headerlink" title="2ã€è½¯å¼•ç”¨"></a>2ã€è½¯å¼•ç”¨</h4><p>è½¯å¼•ç”¨åœ¨ç¨‹åºå†…å­˜ä¸è¶³æ—¶ï¼Œä¼šè¢«å›æ”¶ï¼Œä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„ï¼šwrf è¿™ä¸ªå¼•ç”¨ä¹Ÿæ˜¯å¼ºå¼•ç”¨ï¼Œå®ƒæ˜¯æŒ‡å‘ SoftReference è¿™ä¸ªå¯¹è±¡çš„ï¼Œ</span></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„è½¯å¼•ç”¨æŒ‡çš„æ˜¯æŒ‡å‘ new String(&quot;str&quot;) çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯ SoftReference ç±»ä¸­ T</span></span><br><span class="line">SoftReference&lt;String&gt; wrf = <span class="keyword">new</span> <span class="title class_">SoftReference</span>&lt;String&gt;(<span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;str&quot;</span>));</span><br></pre></td></tr></table></figure><p>å¯ç”¨åœºæ™¯ï¼š åˆ›å»ºç¼“å­˜çš„æ—¶å€™ï¼Œåˆ›å»ºçš„å¯¹è±¡æ”¾è¿›ç¼“å­˜ä¸­ï¼Œå½“å†…å­˜ä¸è¶³æ—¶ï¼ŒJVM å°±ä¼šå›æ”¶æ—©å…ˆåˆ›å»ºçš„å¯¹è±¡ã€‚</p><h4 id="3ã€å¼±å¼•ç”¨"><a href="#3ã€å¼±å¼•ç”¨" class="headerlink" title="3ã€å¼±å¼•ç”¨"></a>3ã€å¼±å¼•ç”¨</h4><p>å¼±å¼•ç”¨å°±æ˜¯åªè¦ JVM åƒåœ¾å›æ”¶å™¨å‘ç°äº†å®ƒï¼Œå°±ä¼šå°†ä¹‹å›æ”¶ï¼Œä»–çš„å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´ä½ä¸€ç‚¹ï¼Œå¼±å¼•ç”¨çš„å¯¹è±¡ä¸‹ä¸€æ¬¡ GC çš„æ—¶å€™ä¸€å®šä¼šè¢«å›æ”¶ï¼Œè€Œä¸ç®¡å†…å­˜æ˜¯å¦è¶³å¤Ÿã€‚ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WeakReference&lt;String&gt; wrf = <span class="keyword">new</span> <span class="title class_">WeakReference</span>&lt;String&gt;(str);</span><br></pre></td></tr></table></figure><p><strong>å¯ç”¨åœºæ™¯ï¼š</strong>  Java æºç ä¸­çš„ <code>java.util.WeakHashMap</code>â€‹ ä¸­çš„ <code>key</code>â€‹ å°±æ˜¯ä½¿ç”¨å¼±å¼•ç”¨ï¼Œæˆ‘çš„ç†è§£å°±æ˜¯ï¼Œä¸€æ—¦æˆ‘ä¸éœ€è¦æŸä¸ªå¼•ç”¨ï¼ŒJVM ä¼šè‡ªåŠ¨å¸®æˆ‘å¤„ç†å®ƒï¼Œè¿™æ ·æˆ‘å°±ä¸éœ€è¦åšå…¶å®ƒæ“ä½œã€‚</p><h4 id="4ã€è™šå¼•ç”¨"><a href="#4ã€è™šå¼•ç”¨" class="headerlink" title="4ã€è™šå¼•ç”¨"></a>4ã€è™šå¼•ç”¨</h4><p>è™šå¼•ç”¨çš„å›æ”¶æœºåˆ¶è·Ÿå¼±å¼•ç”¨å·®ä¸å¤šï¼Œä½†æ˜¯å®ƒè¢«å›æ”¶ä¹‹å‰ï¼Œä¼šè¢«æ”¾å…¥ <code>ReferenceQueue</code>â€‹ ä¸­ã€‚æ³¨æ„å“¦ï¼Œå…¶å®ƒå¼•ç”¨æ˜¯è¢« JVM å›æ”¶åæ‰è¢«ä¼ å…¥ <code>ReferenceQueue</code>â€‹ ä¸­çš„ã€‚ç”±äºè¿™ä¸ªæœºåˆ¶ï¼Œæ‰€ä»¥è™šå¼•ç”¨å¤§å¤šè¢«ç”¨äºå¼•ç”¨é”€æ¯å‰çš„å¤„ç†å·¥ä½œã€‚è¿˜æœ‰å°±æ˜¯ï¼Œè™šå¼•ç”¨åˆ›å»ºçš„æ—¶å€™ï¼Œå¿…é¡»å¸¦æœ‰ <code>ReferenceQueue</code>â€‹ ï¼ŒåŒæ ·çš„å½“å‘ç”ŸGCçš„æ—¶å€™ï¼Œè™šå¼•ç”¨ä¹Ÿä¼šè¢«å›æ”¶ã€‚å¯ä»¥ç”¨è™šå¼•ç”¨æ¥ç®¡ç†å †å¤–å†…å­˜</p><p>ä½¿ç”¨ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PhantomReference&lt;String&gt; prf = <span class="keyword">new</span> <span class="title class_">PhantomReference</span>&lt;String&gt;(<span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;str&quot;</span>),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ReferenceQueue</span>&lt;&gt;());</span><br></pre></td></tr></table></figure><p>å¯ç”¨åœºæ™¯ï¼š å¯¹è±¡é”€æ¯å‰çš„ä¸€äº›æ“ä½œï¼Œæ¯”å¦‚è¯´èµ„æºé‡Šæ”¾ç­‰ã€‚ <code>Object.finalize()</code>â€‹ è™½ç„¶ä¹Ÿå¯ä»¥åšè¿™ç±»åŠ¨ä½œï¼Œä½†æ˜¯è¿™ä¸ªæ–¹å¼å³ä¸å®‰å…¨åˆä½æ•ˆ</p><p>ä¸Šè¯‰æ‰€è¯´çš„å‡ ç±»å¼•ç”¨ï¼Œéƒ½æ˜¯æŒ‡å¯¹è±¡æœ¬èº«çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯æŒ‡ Reference çš„å››ä¸ªå­ç±»çš„å¼•ç”¨ï¼ˆ SoftReference ç­‰ï¼‰ã€‚</p><h3 id="15ã€-æ³›å‹å¸¸ç”¨ç‰¹ç‚¹"><a href="#15ã€-æ³›å‹å¸¸ç”¨ç‰¹ç‚¹" class="headerlink" title="15ã€ æ³›å‹å¸¸ç”¨ç‰¹ç‚¹"></a>15ã€ æ³›å‹å¸¸ç”¨ç‰¹ç‚¹</h3><p>æ³›å‹æ˜¯ Java SE 1.5 ä¹‹åçš„ç‰¹æ€§ï¼Œ ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ã€‹ä¸­å¯¹æ³›å‹çš„å®šä¹‰æ˜¯ï¼š</p><p>â€œæ³›å‹â€ æ„å‘³ç€ç¼–å†™çš„ä»£ç å¯ä»¥è¢«ä¸åŒç±»å‹çš„å¯¹è±¡æ‰€é‡ç”¨ã€‚</p><p>â€œæ³›å‹â€ï¼Œé¡¾åæ€ä¹‰ï¼Œâ€œæ³›æŒ‡çš„ç±»å‹â€ã€‚æˆ‘ä»¬æä¾›äº†æ³›æŒ‡çš„æ¦‚å¿µï¼Œä½†å…·ä½“æ‰§è¡Œçš„æ—¶å€™å´å¯ä»¥æœ‰å…·ä½“çš„è§„åˆ™æ¥çº¦æŸï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨çš„éå¸¸å¤šçš„ArrayList å°±æ˜¯ä¸ªæ³›å‹ç±»ï¼ŒArrayListä½œä¸ºé›†åˆå¯ä»¥å­˜æ”¾å„ç§å…ƒç´ ï¼Œå¦‚ Integerï¼Œ Stringï¼Œè‡ªå®šä¹‰çš„å„ç§ç±»å‹ç­‰ï¼Œä½†åœ¨æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™é€šè¿‡å…·ä½“çš„è§„åˆ™æ¥çº¦æŸï¼Œå¦‚æˆ‘ä»¬å¯ä»¥çº¦æŸé›†åˆä¸­åªå­˜æ”¾Integerç±»å‹çš„å…ƒç´ ï¼Œå¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; iniData = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ³›å‹çš„å¥½å¤„ï¼Ÿ</p><p>ä»¥é›†åˆæ¥ä¸¾ä¾‹ï¼Œä½¿ç”¨æ³›å‹çš„å¥½å¤„æ˜¯æˆ‘ä»¬ä¸å¿…å› ä¸ºæ·»åŠ å…ƒç´ ç±»å‹çš„ä¸åŒè€Œå®šä¹‰ä¸åŒç±»å‹çš„é›†åˆï¼Œå¦‚æ•´å‹é›†åˆç±»ï¼Œæµ®ç‚¹å‹é›†åˆç±»ï¼Œå­—ç¬¦ä¸²é›†åˆç±»ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªé›†åˆæ¥å­˜æ”¾æ•´å‹ã€æµ®ç‚¹å‹ï¼Œå­—ç¬¦ä¸²å‹æ•°æ®ï¼Œè€Œè¿™å¹¶ä¸æ˜¯æœ€é‡è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬åªè¦æŠŠåº•å±‚å­˜å‚¨è®¾ç½®äº† Object å³å¯ï¼Œæ·»åŠ çš„æ•°æ®å…¨éƒ¨éƒ½å¯å‘ä¸Šè½¬å‹ä¸º Objectã€‚ æ›´é‡è¦çš„æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡è§„åˆ™æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•æ§åˆ¶å­˜å‚¨çš„æ•°æ®ç±»å‹ã€‚</p><h3 id="16ã€-Java-åˆ›å»ºå¯¹è±¡æœ‰å‡ ç§æ–¹å¼ï¼Ÿ"><a href="#16ã€-Java-åˆ›å»ºå¯¹è±¡æœ‰å‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="16ã€ Java åˆ›å»ºå¯¹è±¡æœ‰å‡ ç§æ–¹å¼ï¼Ÿ"></a>16ã€ Java åˆ›å»ºå¯¹è±¡æœ‰å‡ ç§æ–¹å¼ï¼Ÿ</h3><h4 id="1ã€new-å…³é”®å­—"><a href="#1ã€new-å…³é”®å­—" class="headerlink" title="1ã€new å…³é”®å­—"></a><strong>1ã€new å…³é”®å­—</strong></h4><p>ä½¿ç”¨ new å…³é”®å­—åˆ›å»ºå¯¹è±¡ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„ä¹Ÿæ˜¯æœ€ç®€å•çš„åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æˆ‘ä»¬è¿˜å¯ä»¥è°ƒç”¨ä»»æ„çš„æ„é€ å™¨ï¼ˆæ— å‚çš„å’Œæœ‰å‚çš„ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ClassName</span> <span class="variable">myClass</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassName</span>();</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>å½“æˆ‘ä»¬ä½¿ç”¨ <code>new</code>â€‹ åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šåœ¨æ ˆä¸­åˆ›å»º <code>myClass</code>â€‹ è¿™ä¸ªå¼•ç”¨ï¼Œå¹¶ä¸”åœ¨å †ä¸­å¼€è¾Ÿä¸€å—ç©ºé—´å­˜æ”¾å¯¹è±¡çš„å€¼ï¼Œç„¶åè®© <code>myClass</code>â€‹ è¿™ä¸ªå¼•ç”¨æŒ‡å‘å †ä¸­æ–°å»ºçš„ <code>ClassName</code>â€‹ å¯¹è±¡çš„å€¼ï¼›</li><li>ä¸ç®¡æ¯æ¬¡åˆ›å»ºçš„å¯¹è±¡çš„å€¼æ˜¯å¦ç›¸åŒï¼Œæ¯æ¬¡ç”¨ <code>new</code>â€‹ åˆ›å»ºå¯¹è±¡æ—¶ï¼Œåœ¨æ ˆä¸­åˆ›å»ºçš„å¼•ç”¨éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œå³åœ°å€éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚</li></ul><h4 id="2ã€Class-newInstance"><a href="#2ã€Class-newInstance" class="headerlink" title="2ã€Class.newInstance"></a><strong>2ã€Class.newInstance</strong></h4><p>è¿™æ˜¯æˆ‘ä»¬è¿ç”¨ <strong>åå°„</strong> åˆ›å»ºå¯¹è±¡æ—¶æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚</p><p><code>Class</code>â€‹ ç±»çš„ <code>newInstance</code>â€‹ ä½¿ç”¨çš„æ˜¯ç±»çš„ <code>public</code>â€‹ çš„ <strong>æ— å‚</strong> æ„é€ æ–¹æ³•ã€‚å› æ­¤ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨æ­¤æ–¹æ³•åˆ›å»ºå¯¹è±¡çš„å‰ææ˜¯å¿…é¡»æœ‰ <code>public</code>â€‹ çš„æ— å‚æ„é€ å™¨æ‰è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ClassName</span> <span class="variable">myClass</span> <span class="operator">=</span> ClassName.class.newInstance();</span><br><span class="line"><span class="type">ClassName</span> <span class="variable">myClass</span> <span class="operator">=</span> (ClassName)Class.foeName(<span class="string">&quot;ClassName&quot;</span>).newInstance();</span><br></pre></td></tr></table></figure><h4 id="3ã€Constructor-newInstance"><a href="#3ã€Constructor-newInstance" class="headerlink" title="3ã€Constructor.newInstance"></a>3ã€Constructor.newInstance</h4><p>è¯¥æ–¹æ³•å’Œ <code>Class</code>â€‹ ç±»çš„ <code>newInstance</code>â€‹ æ–¹æ³•å¾ˆåƒï¼Œä½†æ˜¯æ¯”å®ƒå¼ºå¤§å¾ˆå¤šã€‚</p><p><code>java.lang.relect.Constructor</code>â€‹ ç±»é‡Œä¹Ÿæœ‰ä¸€ä¸ª <code>newInstance</code>â€‹ æ–¹æ³•å¯ä»¥åˆ›å»ºå¯¹è±¡ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ª <code>newInstance</code>â€‹ æ–¹æ³•è°ƒç”¨ <strong>æœ‰å‚æ•°</strong>ï¼ˆä¸å†å¿…é¡»æ˜¯æ— å‚ï¼‰çš„å’Œ <strong>ç§æœ‰çš„</strong> æ„é€ å‡½æ•°ï¼ˆä¸å†å¿…é¡»æ˜¯ <code>public</code>â€‹ ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Constructor&lt;ClassName&gt; constructor = ClassName.class.getConstructor();</span><br><span class="line"><span class="type">ClassName</span> <span class="variable">class</span> <span class="operator">=</span> constructor.newInstance();</span><br></pre></td></tr></table></figure><h4 id="ä¸¤ç§-newInstance-æ–¹æ³•çš„åŒºåˆ«"><a href="#ä¸¤ç§-newInstance-æ–¹æ³•çš„åŒºåˆ«" class="headerlink" title="ä¸¤ç§ newInstance æ–¹æ³•çš„åŒºåˆ«"></a>ä¸¤ç§ newInstance æ–¹æ³•çš„åŒºåˆ«</h4><ul><li><code>Class</code>â€‹ ç±»ä½äº <code>java</code>â€‹ çš„ <code>lang</code>â€‹ åŒ…ä¸­ï¼Œ<br>â€‹<code>Constructor</code>â€‹ æ˜¯ <code>java</code>â€‹ åå°„æœºåˆ¶çš„ä¸€éƒ¨åˆ†</li><li><code>Class</code>â€‹ ç±»çš„ <code>newInstance</code>â€‹ åªèƒ½è§¦å‘ <strong>æ— å‚æ•°</strong> çš„æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œ<br>â€‹<code>Constructor</code>â€‹ ç±»çš„ <code>newInstance</code>â€‹ èƒ½è§¦å‘ <strong>æœ‰å‚æ•°</strong> æˆ–è€… <strong>ä»»æ„å‚æ•°</strong> çš„æ„é€ æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚</li><li><code>Class</code>â€‹ ç±»çš„ <code>newInstance</code>â€‹ éœ€è¦å…¶æ„é€ æ–¹æ³•æ˜¯ <code>public</code>â€‹ çš„æˆ–è€…å¯¹è°ƒç”¨æ–¹æ³•å¯è§çš„ï¼Œ<br>â€‹<code>Constructor</code>â€‹ ç±»çš„ <code>newInstance</code>â€‹ å¯ä»¥åœ¨ç‰¹å®šç¯å¢ƒä¸‹è°ƒç”¨ <strong>ç§æœ‰æ„é€ æ–¹æ³•</strong> æ¥åˆ›å»ºå¯¹è±¡ã€‚</li><li><code>Class</code>â€‹ ç±»çš„ <code>newInstance</code>â€‹ æŠ›å‡ºç±»æ„é€ å‡½æ•°çš„å¼‚å¸¸ï¼Œ<br>â€‹<code>Constructor</code>â€‹ ç±»çš„ <code>newInstance</code>â€‹ åŒ…è£…äº†ä¸€ä¸ª <code>InvocationTargetException</code>â€‹ å¼‚å¸¸ã€‚</li></ul><h4 id="4ã€Clone-æ–¹æ³•"><a href="#4ã€Clone-æ–¹æ³•" class="headerlink" title="4ã€Clone æ–¹æ³•"></a>4ã€Clone æ–¹æ³•</h4><p>æ— è®ºä½•æ—¶æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„ <code>clone</code>â€‹ æ–¹æ³•ï¼Œ<code>JVM</code>â€‹ å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå°†å‰é¢çš„å¯¹è±¡çš„å†…å®¹å…¨éƒ¨æ‹·è´è¿›å»ï¼Œç”¨ <code>clone</code>â€‹ æ–¹æ³•åˆ›å»ºå¯¹è±¡å¹¶ä¸ä¼šè°ƒç”¨ä»»ä½•æ„é€ å‡½æ•°ã€‚</p><p>è¦ä½¿ç”¨ <code>clone</code>â€‹ æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆå®ç° <code>Cloneable</code>â€‹ æ¥å£å¹¶å¤å†™ <code>Object</code>â€‹ çš„ <code>clone</code>â€‹ æ–¹æ³•ï¼ˆå› ä¸º <code>Object</code>â€‹ çš„è¿™ä¸ªæ–¹æ³•æ˜¯ <code>protected</code>â€‹ çš„ï¼Œè‹¥ä¸å¤å†™ï¼Œå¤–éƒ¨ä¹Ÿè°ƒç”¨ä¸äº†ï¼‰ã€‚</p><p>public class ClassName implements Cloneable {<br>â€¦<br>&#x2F;&#x2F; è®¿é—®æƒé™å†™ä¸ºpublicï¼Œå¹¶ä¸”è¿”å›å€¼å†™ä¸ºmyclass<br>@Override<br>public ClassName clone() throws CloneNotSupportedException {<br>return (ClassName) super.clone();<br>}<br>â€¦<br>}</p><p>public class Main {<br>public static void main(String[] args) throws Exception {<br>ClassName myClass &#x3D; new ClassName();<br>Object clone &#x3D; myclass.clone();<br>&#x2F;&#x2F;ClassName clone &#x3D; (ClassName)myClass.clone();<br>}<br>}</p><p><strong>æ³¨æ„ï¼š</strong></p><ul><li><code>clone()</code>â€‹ æ–¹æ³•åªä¼šè¿›è¡Œ <strong>æµ…å¤åˆ¶</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´åªä¼šåœ¨æ ˆä¸­å†åˆ›å»ºä¸€ä¸ªå¼•ç”¨æŒ‡å‘åŸæ¥çš„å¯¹è±¡çš„å€¼æ‰€å¤„çš„å †ç©ºé—´ä¸­ï¼Œå †ä¸­çš„å¯¹è±¡çš„å€¼è¿˜æ˜¯åŸæ¥çš„å¹¶æ²¡æœ‰é‡æ–°åˆ›å»ºï¼›</li><li>ä½¿ç”¨ <code>clone()</code>â€‹ æ–¹æ³•å¹¶ä¸éœ€è¦è°ƒç”¨é€ å‡½æ•°</li></ul><h4 id="5ã€ååºåˆ—åŒ–"><a href="#5ã€ååºåˆ—åŒ–" class="headerlink" title="5ã€ååºåˆ—åŒ–"></a>5ã€ååºåˆ—åŒ–</h4><p>è¦æƒ³é€šè¿‡ååºåˆ—åŒ–åˆ›å»ºå¯¹è±¡ï¼Œå°±å¿…é¡»ç°å°†æŸä¸ªå¯¹è±¡åºåˆ—åŒ–</p><p><strong>æ¦‚å¿µï¼š</strong></p><p>1.<strong>åºåˆ—åŒ–ï¼šå°†</strong> <strong>â€‹<code>java</code>â€‹</strong>â€‹ <strong>å¯¹è±¡è½¬åŒ–ä¸ºå­—èŠ‚æµæˆ–å­—ç¬¦æµçš„è¿‡ç¨‹</strong></p><p><strong>ä½œç”¨ï¼š</strong></p><p>ï¼ˆ1ï¼‰ä¾¿äºåœ¨ç½‘ç»œä¸Šè¿›è¡Œä¼ è¾“ï¼›</p><p>ï¼ˆ2ï¼‰å°† <code>java</code>â€‹ å­—èŠ‚åºåˆ—æ°¸ä¹…ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œé€šå¸¸æ”¾åœ¨æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥åºåˆ—åŒ–ä¹Ÿå¯ä»¥å«åšæŒä¹…åŒ–ã€‚</p><p>2.<strong>ååºåˆ—åŒ–ï¼šå°†å­—èŠ‚æµæˆ–å­—ç¬¦æµå¯¹è±¡è½¬åŒ–æˆ</strong> <strong>â€‹<code>java</code>â€‹</strong>â€‹ <strong>å¯¹è±¡çš„è¿‡ç¨‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ååºåˆ—åŒ–åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * å½“åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼ŒJVMä¼šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment"> * åœ¨ååºåˆ—åŒ–æ—¶ï¼ŒJVM åˆ›å»ºå¯¹è±¡å¹¶ä¸ä¼šè°ƒç”¨ä»»ä½•æ„é€ å‡½æ•°ï¼Œ</span></span><br><span class="line"><span class="comment"> * ä¸ºäº†ååºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦è®©æˆ‘ä»¬çš„ ClassName ç±»å®ç° Serializable æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">function</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;F:\\Tests\\data.obj&quot;</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">//åºåˆ—åŒ–è¿‡ç¨‹</span></span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">objectOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(filePath));</span><br><span class="line">        objectOutputStream.writeObject(<span class="keyword">new</span> <span class="title class_">ClassName</span>());</span><br><span class="line">        objectOutputStream.close();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//ååºåˆ—åŒ–è¿‡ç¨‹</span></span><br><span class="line"><span class="type">ObjectInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filePath));</span><br><span class="line"><span class="type">ClassName</span> <span class="variable">myClass</span> <span class="operator">=</span> (ClassName) inputStream.readObject();</span><br><span class="line">inputStream.close();</span><br><span class="line"> </span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException | ClassNotFoundException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¤‡æ³¨</strong>ï¼šJDK åºåˆ—åŒ–ã€ååºåˆ—åŒ–ç‰¹åˆ«ç‰¹åˆ«è€—å†…å­˜ã€‚</p><h4 id="Java-åˆ›å»ºå®ä¾‹å¯¹è±¡æ˜¯ä¸æ˜¯å¿…é¡»è¦é€šè¿‡æ„é€ å‡½æ•°-æ„é€ å™¨-æ„é€ æ–¹æ³•ï¼Ÿ"><a href="#Java-åˆ›å»ºå®ä¾‹å¯¹è±¡æ˜¯ä¸æ˜¯å¿…é¡»è¦é€šè¿‡æ„é€ å‡½æ•°-æ„é€ å™¨-æ„é€ æ–¹æ³•ï¼Ÿ" class="headerlink" title="Java åˆ›å»ºå®ä¾‹å¯¹è±¡æ˜¯ä¸æ˜¯å¿…é¡»è¦é€šè¿‡æ„é€ å‡½æ•°&#x2F;æ„é€ å™¨&#x2F;æ„é€ æ–¹æ³•ï¼Ÿ"></a>Java åˆ›å»ºå®ä¾‹å¯¹è±¡æ˜¯ä¸æ˜¯å¿…é¡»è¦é€šè¿‡æ„é€ å‡½æ•°&#x2F;æ„é€ å™¨&#x2F;æ„é€ æ–¹æ³•ï¼Ÿ</h4><table><thead><tr><th>åˆ›å»ºå¯¹è±¡æ–¹å¼</th><th>æ˜¯å¦è°ƒç”¨äº†æ„é€ å™¨</th></tr></thead><tbody><tr><td>newå…³é”®å­—</td><td>æ˜¯</td></tr><tr><td>Class.newInstance</td><td>æ˜¯</td></tr><tr><td>Constructor.newInstance</td><td>æ˜¯</td></tr><tr><td>Clone</td><td>å¦</td></tr><tr><td>ååºåˆ—åŒ–</td><td>å¦</td></tr></tbody></table><p><strong>ç­”æ¡ˆï¼š</strong> Java åˆ›å»ºå®ä¾‹å¯¹è±¡ï¼Œå¹¶ä¸ä¸€å®šå¿…é¡»è¦è°ƒç”¨æ„é€ å‡½æ•°&#x2F;æ„é€ å™¨&#x2F;æ„é€ æ–¹æ³•çš„ã€‚</p><h3 id="17-ã€æœ‰æ²¡æœ‰å¯èƒ½ä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡æœ‰ç›¸åŒçš„-hashcode"><a href="#17-ã€æœ‰æ²¡æœ‰å¯èƒ½ä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡æœ‰ç›¸åŒçš„-hashcode" class="headerlink" title="17 ã€æœ‰æ²¡æœ‰å¯èƒ½ä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡æœ‰ç›¸åŒçš„ hashcode"></a>17 ã€æœ‰æ²¡æœ‰å¯èƒ½ä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡æœ‰ç›¸åŒçš„ hashcode</h3><p>æœ‰å¯èƒ½.åœ¨äº§ç”Ÿ hash å†²çªæ—¶,ä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡å°±ä¼šæœ‰ç›¸åŒçš„ hashcode å€¼ã€‚å½“ hash å†²çªäº§ç”Ÿæ—¶,ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥å¤„ç†ï¼š</p><ul><li>æ‹‰é“¾æ³•ï¼šæ¯ä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ª next æŒ‡é’ˆï¼Œå¤šä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹å¯ä»¥ç”¨ next æŒ‡é’ˆæ„æˆä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œè¢«åˆ†é…åˆ°åŒä¸€ä¸ªç´¢å¼•ä¸Šçš„å¤šä¸ªèŠ‚ç‚¹å¯ä»¥ç”¨è¿™ä¸ªå•å‘é“¾è¡¨è¿›è¡Œå­˜å‚¨</li><li>å¼€æ”¾å®šå€æ³•ï¼šä¸€æ—¦å‘ç”Ÿäº†å†²çª,å°±å»å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºçš„æ•£åˆ—åœ°å€ï¼Œåªè¦æ•£åˆ—è¡¨è¶³å¤Ÿå¤§ï¼Œç©ºçš„æ•£åˆ—åœ°å€æ€»èƒ½æ‰¾åˆ°ï¼Œå¹¶å°†è®°å½•å­˜å…¥</li><li>å†å“ˆå¸Œï¼šåˆå«åŒå“ˆå¸Œæ³•ï¼Œæœ‰å¤šä¸ªä¸åŒçš„ Hash å‡½æ•°ã€‚å½“å‘ç”Ÿå†²çªæ—¶ï¼Œä½¿ç”¨ç¬¬äºŒä¸ªï¼Œç¬¬ä¸‰ä¸ªâ€¦.ç­‰å“ˆå¸Œå‡½æ•°è®¡ç®—åœ°å€ï¼Œç›´åˆ°æ— å†²çª</li></ul><h4 id="ä¸ºä»€ä¹ˆ-java-çš„æŒ‡é’ˆå‹ç¼©ï¼š"><a href="#ä¸ºä»€ä¹ˆ-java-çš„æŒ‡é’ˆå‹ç¼©ï¼š" class="headerlink" title="ä¸ºä»€ä¹ˆ java çš„æŒ‡é’ˆå‹ç¼©ï¼š"></a>ä¸ºä»€ä¹ˆ java çš„æŒ‡é’ˆå‹ç¼©ï¼š</h4><p>åœ¨ Java ä¸­ï¼ŒæŒ‡é’ˆå‹ç¼©ï¼ˆPointer Compressionï¼‰æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºå‡å°‘å¯¹è±¡æŒ‡é’ˆçš„å†…å­˜å ç”¨å’Œæé«˜å†…å­˜è®¿é—®æ•ˆç‡ã€‚</p><p>åœ¨ 32 ä½çš„ Java è™šæ‹Ÿæœºä¸­ï¼Œæ¯ä¸ªå¯¹è±¡å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰é€šå¸¸å ç”¨4å­—èŠ‚çš„å†…å­˜ç©ºé—´ã€‚ç„¶è€Œï¼Œåœ¨å®é™…çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¤§éƒ¨åˆ†çš„å †å¯¹è±¡çš„å†…å­˜åœ°å€èŒƒå›´å¹¶ä¸éœ€è¦ä½¿ç”¨æ•´ä¸ª 32 ä½ç©ºé—´ã€‚å› æ­¤ï¼ŒæŒ‡é’ˆå‹ç¼©çš„ç›®æ ‡æ˜¯é€šè¿‡ç¼©å°æŒ‡é’ˆçš„æœ‰æ•ˆä½æ•°æ¥å‡å°‘å†…å­˜æ¶ˆè€—ã€‚</p><p>æŒ‡é’ˆå‹ç¼©çš„å…·ä½“å®ç°æ–¹å¼æ˜¯é€šè¿‡å°†å †å¯¹è±¡çš„å†…å­˜åœ°å€ç©ºé—´åˆ’åˆ†ä¸ºå‡ ä¸ªåŒºåŸŸï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨å¯¹è±¡çš„æ•°æ®ï¼Œå¦ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨æŒ‡é’ˆã€‚æŒ‡é’ˆå‹ç¼©å°†æŒ‡é’ˆçš„æœ‰æ•ˆä½æ•°ç¼©å°ï¼Œä»è€Œå‡å°‘äº†æŒ‡é’ˆçš„å†…å­˜å ç”¨ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†æŒ‡é’ˆå¤§å°å‹ç¼©åˆ°3å­—èŠ‚æˆ–2å­—èŠ‚ã€‚</p><p>æŒ‡é’ˆå‹ç¼©çš„å¥½å¤„æ˜¯å¯ä»¥å‡å°‘å†…å­˜æ¶ˆè€—ï¼Œå¹¶ä¸”åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜å†…å­˜è®¿é—®æ•ˆç‡ã€‚è¾ƒå°çš„æŒ‡é’ˆå¤§å°æ„å‘³ç€å¯ä»¥åœ¨æ›´çŸ­çš„æ—¶é—´å†…è¯»å–æˆ–å†™å…¥æŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚æ­¤å¤–ï¼ŒæŒ‡é’ˆå‹ç¼©è¿˜å¯ä»¥å‡å°‘åƒåœ¾å›æ”¶å™¨çš„å·¥ä½œé‡ï¼Œæé«˜åƒåœ¾å›æ”¶çš„æ•ˆç‡ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŒ‡é’ˆå‹ç¼©åªåœ¨ 32 ä½çš„ Java è™šæ‹Ÿæœºä¸­æœ‰æ•ˆï¼Œå› ä¸ºåœ¨ 64 ä½çš„è™šæ‹Ÿæœºä¸­ï¼Œç”±äºåœ°å€ç©ºé—´çš„æ‰©å±•ï¼ŒæŒ‡é’ˆå¤§å°é€šå¸¸ä¸º 8 å­—èŠ‚ï¼Œå·²ç»è¶³å¤Ÿå­˜å‚¨å¤§é‡çš„å¯¹è±¡å¼•ç”¨ã€‚</p><h4 id="å“ˆå¸Œå†²çªçš„äº§ç”ŸåŸå› åŠè§£å†³æ–¹æ³•"><a href="#å“ˆå¸Œå†²çªçš„äº§ç”ŸåŸå› åŠè§£å†³æ–¹æ³•" class="headerlink" title="å“ˆå¸Œå†²çªçš„äº§ç”ŸåŸå› åŠè§£å†³æ–¹æ³•"></a>å“ˆå¸Œå†²çªçš„äº§ç”ŸåŸå› åŠè§£å†³æ–¹æ³•</h4><h5 id="å“ˆå¸Œå†²çªçš„äº§ç”Ÿ"><a href="#å“ˆå¸Œå†²çªçš„äº§ç”Ÿ" class="headerlink" title="å“ˆå¸Œå†²çªçš„äº§ç”Ÿ"></a>å“ˆå¸Œå†²çªçš„äº§ç”Ÿ</h5><p>å“ˆå¸Œè¡¨æ˜¯æ ¹æ®å…³é”®ç çš„å€¼è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ã€‚</p><p>å“ˆå¸Œæ³•åˆç§°æ•£åˆ—æ³•ã€æ‚å‡‘æ³•ä»¥åŠå…³é”®å­—åœ°å€è®¡ç®—æ³•ç­‰ï¼Œç›¸åº”çš„è¡¨ç§°ä¸ºå“ˆå¸Œè¡¨ã€‚</p><p>å“ˆå¸Œè¡¨ä¸­å…³é”®ç å°±æ˜¯æ•°ç»„çš„ç´¢å¼•ä¸‹æ ‡ï¼Œç„¶åé€šè¿‡ä¸‹æ ‡ç›´æ¥è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ã€‚ï¼ˆå“ˆå¸Œè¡¨å¯ä»¥ç”¨æ¥å¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å‡ºç°åœ¨é›†åˆé‡Œï¼‰</p><p>å“ˆå¸Œæ³•æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šé¦–å…ˆåœ¨å…ƒç´ çš„å…³é”®å­— k å’Œå…ƒç´ çš„å­˜å‚¨ä½ç½® p ä¹‹é—´å»ºç«‹ä¸€ä¸ªå¯¹åº”å…³ç³» f ï¼Œä½¿å¾— p &#x3D; f ( k ) ï¼Œfç§°ä¸ºå“ˆå¸Œå‡½æ•°ã€‚åˆ›å»ºå“ˆå¸Œè¡¨æ—¶ï¼ŒæŠŠå…³é”®å­—ä¸º k çš„å…ƒç´ ç›´æ¥å­˜å…¥åœ°å€ä¸º f ( k ) çš„å•å…ƒï¼›ä»¥åå½“æŸ¥æ‰¾å…³é”®å­—ä¸º k çš„å…ƒç´ æ—¶ï¼Œå†åˆ©ç”¨å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºè¯¥å…ƒç´ çš„å­˜å‚¨ä½ç½®p &#x3D; f ( k ) ï¼Œä»è€Œè¾¾åˆ°æŒ‰å…³é”®å­—ç›´æ¥å­˜å–å…ƒç´ çš„ç›®çš„ã€‚</p><p>å½“å…³é”®å­—é›†åˆå¾ˆå¤§æ—¶ï¼Œå…³é”®å­—å€¼ä¸åŒçš„å…ƒç´ å¯èƒ½ä¼šæ˜ è±¡åˆ°å“ˆå¸Œè¡¨çš„åŒä¸€åœ°å€ä¸Šï¼Œå³ k1 â‰  k2 ï¼Œä½† Hï¼ˆk1ï¼‰&#x3D; Hï¼ˆk2ï¼‰ï¼Œè¿™ç§ç°è±¡ç§°ä¸ºå†²çªï¼Œæ­¤æ—¶ç§° k1 å’Œ k2 ä¸ºåŒä¹‰è¯ã€‚å®é™…ä¸­ï¼Œå†²çªæ˜¯ä¸å¯é¿å…çš„ï¼Œåªèƒ½é€šè¿‡æ”¹è¿›å“ˆå¸Œå‡½æ•°çš„æ€§èƒ½æ¥å‡å°‘å†²çªã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå“ˆå¸Œæ³•ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸¤æ–¹é¢çš„å†…å®¹ï¼š</p><p>1ï¼‰å¦‚ä½•æ„é€ å“ˆå¸Œå‡½æ•°</p><p>2ï¼‰å¦‚ä½•å¤„ç†å†²çª</p><h5 id="äº§ç”Ÿå“ˆå¸Œå†²çªçš„å½±å“å› ç´ "><a href="#äº§ç”Ÿå“ˆå¸Œå†²çªçš„å½±å“å› ç´ " class="headerlink" title="äº§ç”Ÿå“ˆå¸Œå†²çªçš„å½±å“å› ç´ "></a><strong>äº§ç”Ÿå“ˆå¸Œå†²çªçš„å½±å“å› ç´ </strong></h5><p>è£…å¡«å› å­ï¼ˆ è£…å¡«å› å­ &#x3D; æ•°æ®æ€»æ•° &#x2F; å“ˆå¸Œè¡¨é•¿ ï¼‰ã€å“ˆå¸Œå‡½æ•°ã€å¤„ç†å†²çªçš„æ–¹æ³•</p><h5 id="å“ˆå¸Œå†²çªè§£å†³åŠæ³•"><a href="#å“ˆå¸Œå†²çªè§£å†³åŠæ³•" class="headerlink" title="å“ˆå¸Œå†²çªè§£å†³åŠæ³•"></a><strong>å“ˆå¸Œå†²çªè§£å†³åŠæ³•</strong></h5><h6 id="1ã€å¼€æ”¾å®šå€æ³•ï¼ˆå†æ•£åˆ—æ³•ï¼‰"><a href="#1ã€å¼€æ”¾å®šå€æ³•ï¼ˆå†æ•£åˆ—æ³•ï¼‰" class="headerlink" title="1ã€å¼€æ”¾å®šå€æ³•ï¼ˆå†æ•£åˆ—æ³•ï¼‰"></a>1ã€å¼€æ”¾å®šå€æ³•ï¼ˆå†æ•£åˆ—æ³•ï¼‰</h6><p>åŸºæœ¬æ€æƒ³ï¼šå½“å…³é”®å­— key çš„å“ˆå¸Œåœ°å€ p &#x3D; Hï¼ˆkeyï¼‰å‡ºç°å†²çªæ—¶ï¼Œä»¥ p ä¸ºåŸºç¡€ï¼Œäº§ç”Ÿå¦ä¸€ä¸ªå“ˆå¸Œåœ°å€ p1ï¼Œå¦‚æœ p1 ä»ç„¶å†²çªï¼Œå†ä»¥ p ä¸ºåŸºç¡€ï¼Œäº§ç”Ÿå¦ä¸€ä¸ªå“ˆå¸Œåœ°å€ p2 ï¼Œâ€¦ï¼Œç›´åˆ°æ‰¾å‡ºä¸€ä¸ªä¸å†²çªçš„å“ˆå¸Œåœ°å€ pi ï¼Œå°†ç›¸åº”å…ƒç´ å­˜å…¥å…¶ä¸­ã€‚</p><p>ï¼ˆ1ï¼‰çº¿æ€§æ¢æµ‹</p><p>æŒ‰é¡ºåºå†³å®šå€¼æ—¶ï¼Œå¦‚æœæŸæ•°æ®çš„å€¼å·²ç»å­˜åœ¨ï¼Œåˆ™åœ¨åŸæ¥å€¼çš„åŸºç¡€ä¸Šå¾€ååŠ ä¸€ä¸ªå•ä½ï¼Œç›´è‡³ä¸å‘ç”Ÿå“ˆå¸Œå†²çªã€‚</p><p>ï¼ˆ2ï¼‰å†å¹³æ–¹æ¢æµ‹</p><p>æŒ‰é¡ºåºå†³å®šå€¼æ—¶ï¼Œå¦‚æœæŸæ•°æ®çš„å€¼å·²ç»å­˜åœ¨ï¼Œåˆ™åœ¨åŸæ¥å€¼çš„åŸºç¡€ä¸Šå…ˆåŠ 1çš„å¹³æ–¹ä¸ªå•ä½ï¼Œè‹¥ä»ç„¶å­˜åœ¨åˆ™å‡ 1 çš„å¹³æ–¹ä¸ªå•ä½ã€‚éšä¹‹æ˜¯ 2 çš„å¹³æ–¹ï¼Œ3 çš„å¹³æ–¹ç­‰ç­‰ã€‚ç›´è‡³ä¸å‘ç”Ÿå“ˆå¸Œå†²çªã€‚</p><p>ï¼ˆ3ï¼‰ä¼ªéšæœºæ¢æµ‹</p><p>æŒ‰é¡ºåºå†³å®šå€¼æ—¶ï¼Œå¦‚æœæŸæ•°æ®å·²ç»å­˜åœ¨ï¼Œé€šè¿‡éšæœºå‡½æ•°éšæœºç”Ÿæˆä¸€ä¸ªæ•°ï¼Œåœ¨åŸæ¥å€¼çš„åŸºç¡€ä¸ŠåŠ ä¸Šéšæœºæ•°ï¼Œç›´è‡³ä¸å‘ç”Ÿå“ˆå¸Œå†²çªã€‚</p><h6 id="2ã€é“¾åœ°å€æ³•ï¼ˆæ‹‰é“¾æ³•ï¼šHashMap-çš„å“ˆå¸Œå†²çªè§£å†³æ–¹æ³•ï¼‰"><a href="#2ã€é“¾åœ°å€æ³•ï¼ˆæ‹‰é“¾æ³•ï¼šHashMap-çš„å“ˆå¸Œå†²çªè§£å†³æ–¹æ³•ï¼‰" class="headerlink" title="2ã€é“¾åœ°å€æ³•ï¼ˆæ‹‰é“¾æ³•ï¼šHashMap çš„å“ˆå¸Œå†²çªè§£å†³æ–¹æ³•ï¼‰"></a>2ã€é“¾åœ°å€æ³•ï¼ˆæ‹‰é“¾æ³•ï¼š<strong>HashMap çš„å“ˆå¸Œå†²çªè§£å†³æ–¹æ³•</strong>ï¼‰</h6><p>åŸºæœ¬æ€æƒ³ï¼šä»¥æ•°ç»„ä¸ºåŸºæœ¬å•å…ƒï¼Œå°†æ‰€æœ‰çš„å“ˆå¸Œåœ°å€ä¸º i çš„å…ƒç´ æ„æˆä¸€ä¸ªç§°ä¸ºåŒä¹‰è¯é“¾çš„å•é“¾è¡¨ï¼Œå¹¶å°†å•é“¾è¡¨çš„å¤´æŒ‡é’ˆå­˜åœ¨å“ˆå¸Œè¡¨çš„ç¬¬ i ä¸ªå•å…ƒä¸­ï¼Œå› è€ŒæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ä¸»è¦åœ¨åŒä¹‰è¯é“¾ä¸­è¿›è¡Œã€‚</p><p>é“¾åœ°å€æ³•é€‚ç”¨äºç»å¸¸è¿›è¡Œæ’å…¥å’Œåˆ é™¤çš„æƒ…å†µã€‚</p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><p>ï¼ˆ1ï¼‰æ‹‰é“¾æ³•å¤„ç†å†²çªç®€å•ï¼Œä¸”æ— å †ç§¯ç°è±¡ï¼Œå³éåŒä¹‰è¯å†³ä¸ä¼šå‘ç”Ÿå†²çªï¼Œå› æ­¤å¹³å‡æŸ¥æ‰¾é•¿åº¦è¾ƒçŸ­ï¼›</p><p>ï¼ˆ2ï¼‰ç”±äºæ‹‰é“¾æ³•ä¸­å„é“¾è¡¨ä¸Šçš„ç»“ç‚¹ç©ºé—´æ˜¯åŠ¨æ€ç”³è¯·çš„ï¼Œæ•…å®ƒæ›´é€‚åˆäºé€ è¡¨å‰æ— æ³•ç¡®å®šè¡¨é•¿çš„æƒ…å†µï¼›</p><p>ï¼ˆ3ï¼‰å¼€æ”¾å®šå€æ³•ä¸ºå‡å°‘å†²çªï¼Œè¦æ±‚è£…å¡«å› å­ Î± è¾ƒå°ï¼Œæ•…å½“ç»“ç‚¹è§„æ¨¡è¾ƒå¤§æ—¶ä¼šæµªè´¹å¾ˆå¤šç©ºé—´ã€‚è€Œæ‹‰é“¾æ³•ä¸­å¯å– Î± â‰¥ 1 ï¼Œä¸”ç»“ç‚¹è¾ƒå¤§æ—¶ï¼Œæ‹‰é“¾æ³•ä¸­å¢åŠ çš„æŒ‡é’ˆåŸŸå¯å¿½ç•¥ä¸è®¡ï¼Œå› æ­¤èŠ‚çœç©ºé—´ï¼›</p><p>ï¼ˆ4ï¼‰åœ¨ç”¨æ‹‰é“¾æ³•æ„é€ çš„æ•£åˆ—è¡¨ä¸­ï¼Œåˆ é™¤ç»“ç‚¹çš„æ“ä½œæ˜“äºå®ç°ã€‚åªè¦ç®€å•åœ°åˆ å»é“¾è¡¨ä¸Šç›¸åº”çš„ç»“ç‚¹å³å¯ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong></p><p>æŒ‡é’ˆå ç”¨è¾ƒå¤§ç©ºé—´æ—¶ï¼Œä¼šé€ æˆç©ºé—´æµªè´¹ï¼Œè‹¥ç©ºé—´ç”¨äºå¢å¤§æ•£åˆ—è¡¨è§„æ¨¡è¿›è€Œæé«˜å¼€æ”¾åœ°å€æ³•çš„æ•ˆç‡ã€‚</p><h6 id="3ã€å†å“ˆå¸Œæ³•"><a href="#3ã€å†å“ˆå¸Œæ³•" class="headerlink" title="3ã€å†å“ˆå¸Œæ³•"></a>3ã€å†å“ˆå¸Œæ³•</h6><p>åŸºæœ¬æ€æƒ³ï¼šåŒæ—¶æ„é€ å¤šä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°ï¼Œåœ¨å‘ç”Ÿå†²çªçš„æ—¶å€™å†ç”¨å¦å¤–ä¸€ä¸ªå“ˆå¸Œå‡½æ•°ç®—å‡ºå“ˆå¸Œå€¼ï¼Œç›´åˆ°ç®—å‡ºçš„å“ˆå¸Œå€¼ä¸åŒä¸ºæ­¢ã€‚</p><h6 id="4ã€å»ºç«‹å…¬å…±æº¢å‡ºåŒº"><a href="#4ã€å»ºç«‹å…¬å…±æº¢å‡ºåŒº" class="headerlink" title="4ã€å»ºç«‹å…¬å…±æº¢å‡ºåŒº"></a>4ã€å»ºç«‹å…¬å…±æº¢å‡ºåŒº</h6><p>åŸºæœ¬æ€æƒ³ï¼šå°†å“ˆå¸Œè¡¨åˆ†ä¸ºåŸºæœ¬è¡¨å’Œæº¢å‡ºè¡¨ä¸¤éƒ¨åˆ†ï¼Œå‡¡æ˜¯å’ŒåŸºæœ¬è¡¨å‘ç”Ÿå†²çªçš„å…ƒç´ ï¼Œä¸€å¾‹å¡«å…¥æº¢å‡ºè¡¨ã€‚æŸ¥è¡¨æ—¶ï¼Œå…ˆå»åŸºæœ¬è¡¨æŸ¥ï¼ŒæŸ¥ä¸åˆ°å†å»æº¢å‡ºåŒºæŸ¥æ‰¾ã€‚</p><h3 id="18ã€æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#18ã€æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="18ã€æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>18ã€æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li>æµ…æ‹·è´ï¼šè¢«å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡éƒ½å«æœ‰ä¸åŸæ¥çš„å¯¹è±¡ç›¸åŒçš„å€¼ï¼Œè€Œæ‰€æœ‰çš„å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ä»ç„¶æŒ‡å‘åŸæ¥çš„å¯¹è±¡ã€‚æ¢è¨€ä¹‹ï¼Œ<strong>æµ…æ‹·è´ä»…ä»…å¤åˆ¶æ‰€è€ƒè™‘çš„å¯¹è±¡ï¼Œè€Œä¸å¤åˆ¶å®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡</strong></li><li>æ·±æ‹·è´ï¼šè¢«å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡éƒ½å«æœ‰ä¸åŸæ¥çš„å¯¹è±¡ç›¸åŒçš„å€¼ï¼Œè€Œé‚£äº›å¼•ç”¨å…¶ä»–å¯¹è±¡çš„å˜é‡å°†æŒ‡å‘è¢«å¤åˆ¶è¿‡çš„æ–°å¯¹è±¡ï¼Œè€Œä¸å†æ˜¯åŸæœ‰çš„é‚£äº›è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚æ¢è¨€ä¹‹ï¼Œ<strong>æ·±æ‹·è´æŠŠè¦å¤åˆ¶çš„å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡éƒ½å¤åˆ¶äº†ä¸€é</strong></li></ul><h3 id="19ã€final-æœ‰å“ªäº›ç”¨æ³•"><a href="#19ã€final-æœ‰å“ªäº›ç”¨æ³•" class="headerlink" title="19ã€final æœ‰å“ªäº›ç”¨æ³•?"></a>19ã€final æœ‰å“ªäº›ç”¨æ³•?</h3><ul><li>è¢« final ä¿®é¥°çš„ç±»ä¸å¯ä»¥è¢«ç»§æ‰¿</li><li>è¢« final ä¿®é¥°çš„æ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™</li><li>è¢« final ä¿®é¥°çš„å˜é‡ä¸å¯ä»¥è¢«æ”¹å˜ã€‚å¦‚æœä¿®é¥°å¼•ç”¨ï¼Œé‚£ä¹ˆè¡¨ç¤ºå¼•ç”¨ä¸å¯å˜ï¼Œå¼•ç”¨æŒ‡å‘çš„å†…å®¹å¯å˜</li><li>è¢« final ä¿®é¥°çš„æ–¹æ³•ï¼ŒJVM ä¼šå°è¯•å°†å…¶å†…è”ï¼Œä»¥æé«˜è¿è¡Œæ•ˆç‡</li><li>è¢« final ä¿®é¥°çš„å¸¸é‡ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µä¼šå­˜å…¥å¸¸é‡æ± ä¸­</li></ul><p>é™¤æ­¤ä¹‹å¤–,ç¼–è¯‘å™¨å¯¹ final åŸŸè¦éµå®ˆçš„ä¸¤ä¸ªé‡æ’åºè§„åˆ™æ›´å¥½ï¼š</p><p>åœ¨æ„é€ å‡½æ•°å†…å¯¹ä¸€ä¸ª final åŸŸçš„å†™å…¥ï¼Œä¸éšåæŠŠè¿™ä¸ªè¢«æ„é€ å¯¹è±¡çš„å¼•ç”¨èµ‹å€¼ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´ä¸èƒ½é‡æ’åºï¼Œåˆæ¬¡è¯»ä¸€ä¸ªåŒ…å«finalåŸŸçš„å¯¹è±¡çš„å¼•ç”¨ï¼Œä¸éšååˆæ¬¡è¯»è¿™ä¸ª final åŸŸï¼Œè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´ä¸èƒ½é‡æ’åº.</p><h3 id="20ã€static-éƒ½æœ‰å“ªäº›ç”¨æ³•ï¼Ÿ"><a href="#20ã€static-éƒ½æœ‰å“ªäº›ç”¨æ³•ï¼Ÿ" class="headerlink" title="20ã€static éƒ½æœ‰å“ªäº›ç”¨æ³•ï¼Ÿ"></a>20ã€static éƒ½æœ‰å“ªäº›ç”¨æ³•ï¼Ÿ</h3><p>æ‰€æœ‰çš„äººéƒ½çŸ¥é“ static å…³é”®å­—è¿™ä¸¤ä¸ªåŸºæœ¬çš„ç”¨æ³•ï¼šé™æ€å˜é‡å’Œé™æ€æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¢« static æ‰€ä¿®é¥°çš„å˜é‡ &#x2F; æ–¹æ³•éƒ½å±äºç±»çš„é™æ€èµ„æºï¼Œç±»å®ä¾‹æ‰€å…±äº«.</p><p>é™¤äº†é™æ€å˜é‡å’Œé™æ€æ–¹æ³•ä¹‹å¤–ï¼Œstatic ä¹Ÿç”¨äºé™æ€å—ï¼Œå¤šç”¨äºåˆå§‹åŒ–æ“ä½œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> calss PreCache&#123;</span><br><span class="line"> <span class="keyword">static</span>&#123;</span><br><span class="line"> <span class="comment">//æ‰§è¡Œç›¸å…³æ“ä½œ</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤– static ä¹Ÿå¤šç”¨äºä¿®é¥°å†…éƒ¨ç±»,æ­¤æ—¶ç§°ä¹‹ä¸ºé™æ€å†…éƒ¨ç±»</p><p>æœ€åä¸€ç§ç”¨æ³•å°±æ˜¯é™æ€å¯¼åŒ…ï¼Œå³ <code>import static</code>â€‹ .import staticæ˜¯åœ¨  JDK 1.5 ä¹‹åå¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å®šå¯¼å…¥æŸä¸ªç±»ä¸­çš„é™æ€èµ„æº,å¹¶ä¸”ä¸éœ€è¦ä½¿ç”¨ç±»å,å¯ä»¥ç›´æ¥ä½¿ç”¨èµ„æºåï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line"> <span class="comment">//System.out.println(Math.sin(20));ä¼ ç»Ÿåšæ³•</span></span><br><span class="line"> System.out.println(sin(<span class="number">20</span>));</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="21ã€-3-0-1-0-3-è¿”å›å€¼æ˜¯ä»€ä¹ˆ"><a href="#21ã€-3-0-1-0-3-è¿”å›å€¼æ˜¯ä»€ä¹ˆ" class="headerlink" title="21ã€ 3 * 0.1  &#x3D;&#x3D;   0.3 è¿”å›å€¼æ˜¯ä»€ä¹ˆ"></a>21ã€ 3 * 0.1  <strong>&#x3D;&#x3D;</strong>   0.3 è¿”å›å€¼æ˜¯ä»€ä¹ˆ</h3><p>falseï¼Œå› ä¸ºæœ‰äº›æµ®ç‚¹æ•°ä¸èƒ½å®Œå…¨ç²¾ç¡®çš„è¡¨ç¤ºå‡ºæ¥</p><h3 id="22ã€a-a-b-ä¸-a-b-æœ‰ä»€ä¹ˆåŒºåˆ«å—"><a href="#22ã€a-a-b-ä¸-a-b-æœ‰ä»€ä¹ˆåŒºåˆ«å—" class="headerlink" title="22ã€a &#x3D; a + b ä¸ a + &#x3D; b æœ‰ä»€ä¹ˆåŒºåˆ«å—?"></a>22ã€a &#x3D; a + b ä¸ a + &#x3D; b æœ‰ä»€ä¹ˆåŒºåˆ«å—?</h3><p><code>+=</code>â€‹ æ“ä½œç¬¦ä¼šè¿›è¡Œéšå¼è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œæ­¤å¤„ a + &#x3D; b éšå¼çš„å°†åŠ æ“ä½œçš„ç»“æœç±»å‹å¼ºåˆ¶è½¬æ¢ä¸ºæŒæœ‰ç»“æœçš„ç±»å‹,è€Œ a &#x3D; a + b åˆ™ä¸ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">byte</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">127</span>;</span><br><span class="line"><span class="type">byte</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">127</span>;</span><br><span class="line">b = a + b; <span class="comment">// æŠ¥ç¼–è¯‘é”™è¯¯:cannot convert from int to byte</span></span><br><span class="line">b += a;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä»£ç æ˜¯å¦æœ‰é”™,æœ‰çš„è¯æ€ä¹ˆæ”¹ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">short</span> s1= <span class="number">1</span>;</span><br><span class="line">s1 = s1 + <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>æœ‰é”™è¯¯ã€‚short ç±»å‹åœ¨è¿›è¡Œè¿ç®—æ—¶ä¼šè‡ªåŠ¨æå‡ä¸º int ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ s1 + 1 çš„è¿ç®—ç»“æœæ˜¯ int ç±»å‹è€Œ s1 æ˜¯ short ç±»å‹ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šæŠ¥é”™</p><p>æ­£ç¡®å†™æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">short</span> s1= <span class="number">1</span>;</span><br><span class="line">s1 += <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p><code>+=</code>â€‹ æ“ä½œç¬¦ä¼šå¯¹å³è¾¹çš„è¡¨è¾¾å¼ç»“æœå¼ºè½¬åŒ¹é…å·¦è¾¹çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥æ²¡é”™</p><h3 id="23ã€try-catch-finallyï¼Œtry-é‡Œæœ‰-return-ï¼Œfinally-è¿˜æ‰§è¡Œä¹ˆï¼Ÿ"><a href="#23ã€try-catch-finallyï¼Œtry-é‡Œæœ‰-return-ï¼Œfinally-è¿˜æ‰§è¡Œä¹ˆï¼Ÿ" class="headerlink" title="23ã€try catch finallyï¼Œtry é‡Œæœ‰ return ï¼Œfinally è¿˜æ‰§è¡Œä¹ˆï¼Ÿ"></a>23ã€try catch finallyï¼Œtry é‡Œæœ‰ return ï¼Œfinally è¿˜æ‰§è¡Œä¹ˆï¼Ÿ</h3><p>æ‰§è¡Œï¼Œå¹¶ä¸” finally çš„æ‰§è¡Œæ—©äº try é‡Œé¢çš„ returnã€‚å¦‚æœ finally å—ä¸­å­˜åœ¨ return è¯­å¥ï¼Œå®ƒä¼šè¦†ç›– try å—æˆ– catch å—ä¸­çš„ return è¯­å¥ï¼Œå¹¶æˆä¸ºæœ€ç»ˆçš„è¿”å›å€¼ã€‚</p><p>ç»“è®ºï¼š</p><p>1ã€ä¸ç®¡æœ‰æœ¨æœ‰å‡ºç°å¼‚å¸¸ï¼Œfinally å—ä¸­ä»£ç éƒ½ä¼šæ‰§è¡Œï¼›</p><p>2ã€å½“ try å’Œ catch ä¸­æœ‰ return æ—¶ï¼Œfinally ä»ç„¶ä¼šæ‰§è¡Œï¼›</p><p>3ã€finally æ˜¯åœ¨ return åé¢çš„è¡¨è¾¾å¼è¿ç®—åæ‰§è¡Œçš„ï¼ˆæ­¤æ—¶å¹¶æ²¡æœ‰è¿”å›è¿ç®—åçš„å€¼ï¼Œè€Œæ˜¯å…ˆæŠŠè¦è¿”å›çš„å€¼ä¿å­˜èµ·æ¥ï¼Œç®¡ finally ä¸­çš„ä»£ç æ€ä¹ˆæ ·ï¼Œè¿”å›çš„å€¼éƒ½ä¸ä¼šæ”¹å˜ï¼Œä»ç„¶æ˜¯ä¹‹å‰ä¿å­˜çš„å€¼ï¼‰ï¼Œæ‰€ä»¥å‡½æ•°è¿”å›å€¼æ˜¯åœ¨ finally æ‰§è¡Œå‰ç¡®å®šçš„ï¼›</p><p>4ã€finally ä¸­æœ€å¥½ä¸è¦åŒ…å« returnï¼Œå¦åˆ™ç¨‹åºä¼šæå‰é€€å‡ºï¼Œè¿”å›å€¼ä¸æ˜¯ try æˆ– catch ä¸­ä¿å­˜çš„è¿”å›å€¼ã€‚</p><h3 id="24ã€Excption-ä¸-Error-åŒ…ç»“æ„"><a href="#24ã€Excption-ä¸-Error-åŒ…ç»“æ„" class="headerlink" title="24ã€Excption ä¸ Error åŒ…ç»“æ„"></a>24ã€Excption ä¸ Error åŒ…ç»“æ„</h3><p>Java å¯æŠ›å‡º ( Throwable ) çš„ç»“æ„åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼šè¢«æ£€æŸ¥çš„å¼‚å¸¸ ( CheckedException )ï¼Œè¿è¡Œæ—¶å¼‚å¸¸ (RuntimeException )ï¼Œé”™è¯¯( Error )</p><h4 id="1ã€è¿è¡Œæ—¶å¼‚å¸¸"><a href="#1ã€è¿è¡Œæ—¶å¼‚å¸¸" class="headerlink" title="1ã€è¿è¡Œæ—¶å¼‚å¸¸"></a>1ã€è¿è¡Œæ—¶å¼‚å¸¸</h4><p>å®šä¹‰ï¼šRuntimeException åŠå…¶å­ç±»éƒ½è¢«ç§°ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ã€‚</p><p>ç‰¹ç‚¹ï¼šJava ç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥å®ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç¨‹åºä¸­å¯èƒ½å‡ºç°è¿™ç±»å¼‚å¸¸æ—¶ï¼Œå€˜è‹¥æ—¢â€æ²¡æœ‰é€šè¿‡ throws å£°æ˜æŠ›å‡ºå®ƒâ€ï¼Œä¹Ÿâ€æ²¡æœ‰ç”¨ try-catchè¯­å¥æ•è·å®ƒâ€ï¼Œè¿˜æ˜¯ä¼šç¼–è¯‘é€šè¿‡ã€‚ä¾‹å¦‚ï¼Œé™¤æ•°ä¸ºé›¶æ—¶äº§ç”Ÿçš„ ArithmeticException å¼‚å¸¸ï¼Œæ•°ç»„è¶Šç•Œæ—¶äº§ç”Ÿçš„ IndexOutOfBoundsExceptionå¼‚å¸¸ï¼Œfail - fast æœºåˆ¶äº§ç”Ÿçš„ ConcurrentModificationException å¼‚å¸¸ï¼ˆjava.util åŒ…ä¸‹é¢çš„æ‰€æœ‰çš„é›†åˆç±»éƒ½æ˜¯å¿«é€Ÿå¤±è´¥çš„ï¼Œâ€œå¿«é€Ÿå¤±è´¥â€ä¹Ÿå°±æ˜¯ fail-fastï¼Œå®ƒæ˜¯ Java é›†åˆçš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶ã€‚å½“å¤šä¸ªçº¿ç¨‹å¯¹é›†åˆè¿›è¡Œç»“æ„ä¸Šçš„æ”¹å˜çš„æ“ä½œæ—¶ï¼Œæœ‰å¯èƒ½ä¼šäº§ç”Ÿfail-fastæœºåˆ¶ã€‚è®°ä½æ˜¯æœ‰å¯èƒ½ï¼Œè€Œä¸æ˜¯ä¸€å®šã€‚ä¾‹å¦‚ï¼šå‡è®¾å­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹ï¼ˆçº¿ç¨‹1ã€çº¿ç¨‹2ï¼‰ï¼Œçº¿ç¨‹ 1 é€šè¿‡ Iterator åœ¨éå†é›†åˆ A ä¸­çš„å…ƒç´ ï¼Œåœ¨æŸä¸ªæ—¶å€™çº¿ç¨‹ 2 ä¿®æ”¹äº†é›†åˆ A çš„ç»“æ„ï¼ˆæ˜¯ç»“æ„ä¸Šé¢çš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ç®€å•çš„ä¿®æ”¹é›†åˆå…ƒç´ çš„å†…å®¹ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ç¨‹åºå°±ä¼šæŠ›å‡ºConcurrentModificationException å¼‚å¸¸ï¼Œä»è€Œäº§ç”Ÿ fail-fast æœºåˆ¶ï¼Œè¿™ä¸ªé”™å«å¹¶å‘ä¿®æ”¹å¼‚å¸¸ã€‚Failsafeï¼Œjava.util.concurrent åŒ…ä¸‹é¢çš„æ‰€æœ‰çš„ç±»éƒ½æ˜¯å®‰å…¨å¤±è´¥çš„ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå·²ç»éå†çš„æ•°ç»„ä¸Šçš„å†…å®¹å˜åŒ–äº†ï¼Œè¿­ä»£å™¨ä¸ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚å¦‚æœæœªéå†çš„æ•°ç»„ä¸Šçš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™æœ‰å¯èƒ½åæ˜ åˆ°è¿­ä»£è¿‡ç¨‹ä¸­ã€‚è¿™å°±æ˜¯ ConcurrentHashMap è¿­ä»£å™¨å¼±ä¸€è‡´çš„è¡¨ç°ã€‚ConcurrentHashMap çš„å¼±ä¸€è‡´æ€§ä¸»è¦æ˜¯ä¸ºäº†æå‡æ•ˆç‡ï¼Œæ˜¯ä¸€è‡´æ€§ä¸æ•ˆç‡ä¹‹é—´çš„ä¸€ç§æƒè¡¡ã€‚è¦æˆä¸ºå¼ºä¸€è‡´æ€§ï¼Œå°±å¾—åˆ°å¤„ä½¿ç”¨é”ï¼Œç”šè‡³æ˜¯å…¨å±€é”ï¼Œè¿™å°±ä¸ Hashtable å’ŒåŒæ­¥çš„ HashMap ä¸€æ ·äº†ã€‚ï¼‰ç­‰ï¼Œéƒ½å±äºè¿è¡Œæ—¶å¼‚å¸¸ã€‚</p><p>å¸¸è§çš„äº”ç§è¿è¡Œæ—¶å¼‚å¸¸ï¼š</p><p>ClassCastExceptionï¼ˆç±»è½¬æ¢å¼‚å¸¸ï¼‰</p><p>IndexOutOfBoundsExceptionï¼ˆæ•°ç»„è¶Šç•Œï¼‰</p><p>NullPointerExceptionï¼ˆç©ºæŒ‡é’ˆå¼‚å¸¸ï¼‰</p><p>ArrayStoreExceptionï¼ˆæ•°æ®å­˜å‚¨å¼‚å¸¸ï¼Œæ“ä½œæ•°ç»„æ˜¯ç±»å‹ä¸ä¸€è‡´ï¼‰</p><p>BufferOverflowException</p><h4 id="2ã€è¢«æ£€æŸ¥å¼‚å¸¸"><a href="#2ã€è¢«æ£€æŸ¥å¼‚å¸¸" class="headerlink" title="2ã€è¢«æ£€æŸ¥å¼‚å¸¸"></a>2ã€è¢«æ£€æŸ¥å¼‚å¸¸</h4><p>å®šä¹‰ï¼šException ç±»æœ¬èº«ï¼Œä»¥åŠ Exception çš„å­ç±»ä¸­é™¤äº†â€è¿è¡Œæ—¶å¼‚å¸¸â€ä¹‹å¤–çš„å…¶å®ƒå­ç±»éƒ½å±äºè¢«æ£€æŸ¥å¼‚å¸¸ã€‚</p><p>ç‰¹ç‚¹ï¼šJava ç¼–è¯‘å™¨ä¼šæ£€æŸ¥å®ƒã€‚ æ­¤ç±»å¼‚å¸¸ï¼Œè¦ä¹ˆé€šè¿‡ throws è¿›è¡Œå£°æ˜æŠ›å‡ºï¼Œè¦ä¹ˆé€šè¿‡ try - catch è¿›è¡Œæ•è·å¤„ç†ï¼Œå¦åˆ™ä¸èƒ½é€šè¿‡ç¼–è¯‘ã€‚ä¾‹å¦‚ï¼ŒCloneNotSupportedException å°±å±äºè¢«æ£€æŸ¥å¼‚å¸¸ã€‚å½“é€šè¿‡ clone() æ¥å£å»å…‹éš†ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¯¥å¯¹è±¡å¯¹åº”çš„ç±»æ²¡æœ‰å®ç° Cloneable æ¥å£ï¼Œå°±ä¼šæŠ›å‡º CloneNotSupportedException å¼‚å¸¸ã€‚è¢«æ£€æŸ¥å¼‚å¸¸é€šå¸¸éƒ½æ˜¯å¯ä»¥æ¢å¤çš„ã€‚ å¦‚ï¼š</p><p>IOException</p><p>FileNotFoundException</p><p>SQLException</p><p>è¢«æ£€æŸ¥çš„å¼‚å¸¸é€‚ç”¨äºé‚£äº›ä¸æ˜¯å› ç¨‹åºå¼•èµ·çš„é”™è¯¯æƒ…å†µï¼Œæ¯”å¦‚ï¼šè¯»å–æ–‡ä»¶æ—¶æ–‡ä»¶ä¸å­˜åœ¨å¼•å‘çš„ FileNotFoundException ã€‚ç„¶è€Œï¼Œä¸è¢«æ£€æŸ¥çš„å¼‚å¸¸é€šå¸¸éƒ½æ˜¯ç”±äºç³Ÿç³•çš„ç¼–ç¨‹å¼•èµ·çš„ï¼Œæ¯”å¦‚ï¼šåœ¨å¯¹è±¡å¼•ç”¨æ—¶æ²¡æœ‰ç¡®ä¿å¯¹è±¡éç©ºè€Œå¼•èµ·çš„ NullPointerException ã€‚</p><h4 id="3ã€é”™è¯¯"><a href="#3ã€é”™è¯¯" class="headerlink" title="3ã€é”™è¯¯"></a>3ã€é”™è¯¯</h4><p>å®šä¹‰ï¼šError ç±»åŠå…¶å­ç±»ã€‚</p><p>ç‰¹ç‚¹ï¼šå’Œè¿è¡Œæ—¶å¼‚å¸¸ä¸€æ ·ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šå¯¹é”™è¯¯è¿›è¡Œæ£€æŸ¥ã€‚</p><p>å½“èµ„æºä¸è¶³ã€çº¦æŸå¤±è´¥ã€æˆ–æ˜¯å…¶å®ƒç¨‹åºæ— æ³•ç»§ç»­è¿è¡Œçš„æ¡ä»¶å‘ç”Ÿæ—¶ï¼Œå°±äº§ç”Ÿé”™è¯¯ã€‚ç¨‹åºæœ¬èº«æ— æ³•ä¿®å¤è¿™äº›é”™è¯¯çš„ã€‚ä¾‹å¦‚ï¼ŒVirtualMachineError å°±å±äºé”™è¯¯ã€‚å‡ºç°è¿™ç§é”™è¯¯ä¼šå¯¼è‡´ç¨‹åºç»ˆæ­¢è¿è¡Œã€‚</p><p>OutOfMemoryErrorã€ThreadDeathã€‚</p><p>Java è™šæ‹Ÿæœºè§„èŒƒè§„å®š JVM çš„å†…å­˜åˆ†ä¸ºäº†å¥½å‡ å—ï¼Œæ¯”å¦‚å †ï¼Œæ ˆï¼Œç¨‹åºè®¡æ•°å™¨ï¼Œæ–¹æ³•åŒºç­‰</p><h3 id="25ã€OOM-ä½ é‡åˆ°è¿‡å“ªäº›æƒ…å†µï¼ŒSOF-ä½ é‡åˆ°è¿‡å“ªäº›æƒ…å†µ"><a href="#25ã€OOM-ä½ é‡åˆ°è¿‡å“ªäº›æƒ…å†µï¼ŒSOF-ä½ é‡åˆ°è¿‡å“ªäº›æƒ…å†µ" class="headerlink" title="25ã€OOM ä½ é‡åˆ°è¿‡å“ªäº›æƒ…å†µï¼ŒSOF ä½ é‡åˆ°è¿‡å“ªäº›æƒ…å†µ"></a>25ã€OOM ä½ é‡åˆ°è¿‡å“ªäº›æƒ…å†µï¼ŒSOF ä½ é‡åˆ°è¿‡å“ªäº›æƒ…å†µ</h3><h4 id="OOMï¼š"><a href="#OOMï¼š" class="headerlink" title="OOMï¼š"></a><strong>OOM</strong>ï¼š</h4><h5 id="1ã€OutOfMemoryError-å¼‚å¸¸"><a href="#1ã€OutOfMemoryError-å¼‚å¸¸" class="headerlink" title="1ã€OutOfMemoryError å¼‚å¸¸"></a>1ã€OutOfMemoryError å¼‚å¸¸</h5><p>é™¤äº†ç¨‹åºè®¡æ•°å™¨å¤–ï¼Œè™šæ‹Ÿæœºå†…å­˜çš„å…¶ä»–å‡ ä¸ªè¿è¡Œæ—¶åŒºåŸŸéƒ½æœ‰å‘ç”Ÿ OutOfMemoryError ( OOM ) å¼‚å¸¸çš„å¯èƒ½ã€‚</p><p>Java Heap æº¢å‡ºï¼š</p><p>ä¸€èˆ¬çš„å¼‚å¸¸ä¿¡æ¯ï¼šjava.lang.OutOfMemoryError:Java heap spacessã€‚</p><p>java å †ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ï¼Œæˆ‘ä»¬åªè¦ä¸æ–­çš„åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”ä¿è¯ GC Roots åˆ°å¯¹è±¡ä¹‹é—´æœ‰å¯è¾¾è·¯å¾„æ¥é¿å…åƒåœ¾å›æ”¶æœºåˆ¶æ¸…é™¤è¿™äº›å¯¹è±¡ï¼Œå°±ä¼šåœ¨å¯¹è±¡æ•°é‡è¾¾åˆ°æœ€å¤§å †å®¹é‡é™åˆ¶åäº§ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚</p><p>å‡ºç°è¿™ç§å¼‚å¸¸ï¼Œä¸€èˆ¬æ‰‹æ®µæ˜¯å…ˆé€šè¿‡å†…å­˜æ˜ åƒåˆ†æå·¥å…· ( å¦‚ Eclipse Memory Analyzer ) å¯¹ dump å‡ºæ¥çš„å †è½¬å­˜å¿«ç…§è¿›è¡Œåˆ†æï¼Œé‡ç‚¹æ˜¯ç¡®è®¤å†…å­˜ä¸­çš„å¯¹è±¡æ˜¯å¦æ˜¯å¿…è¦çš„ï¼Œå…ˆåˆ†æ¸…æ˜¯å› ä¸ºå†…å­˜æ³„æ¼ ( Memory Leak ) è¿˜æ˜¯å†…å­˜æº¢å‡º ( Memory Overflow )ã€‚</p><p>å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œå¯è¿›ä¸€æ­¥é€šè¿‡å·¥å…·æŸ¥çœ‹æ³„æ¼å¯¹è±¡åˆ° GCRoots çš„å¼•ç”¨é“¾ã€‚äºæ˜¯å°±èƒ½æ‰¾åˆ°æ³„æ¼å¯¹è±¡æ˜¯é€šè¿‡æ€æ ·çš„è·¯å¾„ä¸ GC Roots ç›¸å…³è”å¹¶å¯¼è‡´åƒåœ¾æ”¶é›†å™¨æ— æ³•è‡ªåŠ¨å›æ”¶ã€‚</p><p>å¦‚æœä¸å­˜åœ¨æ³„æ¼ï¼Œé‚£å°±åº”è¯¥æ£€æŸ¥è™šæ‹Ÿæœºçš„å‚æ•°  ( -Xmx ä¸ -Xms ) çš„è®¾ç½®æ˜¯å¦é€‚å½“ã€‚</p><h5 id="2ã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º"><a href="#2ã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º" class="headerlink" title="2ã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º"></a>2ã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º</h5><p>å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æœ€å¤§æ·±åº¦ï¼Œå°†æŠ›å‡º StackOverflowError å¼‚å¸¸ã€‚</p><p>å¦‚æœè™šæ‹Ÿæœºåœ¨æ‰©å±•æ ˆæ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ï¼Œåˆ™æŠ›å‡º OutOfMemoryErrorå¼‚å¸¸</p><p>è¿™é‡Œéœ€è¦æ³¨æ„å½“æ ˆçš„å¤§å°è¶Šå¤§å¯åˆ†é…çš„çº¿ç¨‹æ•°å°±è¶Šå°‘ã€‚</p><h5 id="3ã€è¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º"><a href="#3ã€è¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º" class="headerlink" title="3ã€è¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º"></a>3ã€è¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º</h5><p>å¼‚å¸¸ä¿¡æ¯ï¼šjava.lang.OutOfMemoryError:PermGenspace</p><p>å¦‚æœè¦å‘è¿è¡Œæ—¶å¸¸é‡æ± ä¸­æ·»åŠ å†…å®¹ï¼Œæœ€ç®€å•çš„åšæ³•å°±æ˜¯ä½¿ç”¨ String.intern() è¿™ä¸ª Native æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯ï¼šå¦‚æœæ± ä¸­å·²ç»åŒ…å«ä¸€ä¸ªç­‰äºæ­¤ String çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›ä»£è¡¨æ± ä¸­è¿™ä¸ªå­—ç¬¦ä¸²çš„Stringå¯¹è±¡ï¼›å¦åˆ™ï¼Œå°†æ­¤ String å¯¹è±¡åŒ…å«çš„å­—ç¬¦ä¸²æ·»åŠ åˆ°å¸¸é‡æ± ä¸­ï¼Œå¹¶ä¸”è¿”å›æ­¤String å¯¹è±¡çš„å¼•ç”¨ã€‚ç”±äºå¸¸é‡æ± åˆ†é…åœ¨æ–¹æ³•åŒºå†…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ -XX:PermSize å’Œ -XX:MaxPermSize é™åˆ¶æ–¹æ³•åŒºçš„å¤§å°ï¼Œä»è€Œé—´æ¥é™åˆ¶å…¶ä¸­å¸¸é‡æ± çš„å®¹é‡ã€‚</p><h5 id="4ã€æ–¹æ³•åŒºæº¢å‡º"><a href="#4ã€æ–¹æ³•åŒºæº¢å‡º" class="headerlink" title="4ã€æ–¹æ³•åŒºæº¢å‡º"></a>4ã€æ–¹æ³•åŒºæº¢å‡º</h5><p>æ–¹æ³•åŒºç”¨äºå­˜æ”¾ Class çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç±»åã€è®¿é—®ä¿®é¥°ç¬¦ã€å¸¸é‡æ± ã€å­—æ®µæè¿°ã€æ–¹æ³•æè¿°ç­‰ã€‚ä¹Ÿæœ‰å¯èƒ½æ˜¯æ–¹æ³•åŒºä¸­ä¿å­˜çš„ class å¯¹è±¡æ²¡æœ‰è¢«åŠæ—¶å›æ”¶æ‰æˆ–è€…classä¿¡æ¯å ç”¨çš„å†…å­˜è¶…è¿‡äº†æˆ‘ä»¬é…ç½®ã€‚</p><p>å¼‚å¸¸ä¿¡æ¯ï¼šjava.lang.OutOfMemoryError:PermGenspace</p><p>æ–¹æ³•åŒºæº¢å‡ºä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„å†…å­˜æº¢å‡ºå¼‚å¸¸ï¼Œä¸€ä¸ªç±»å¦‚æœè¦è¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶ï¼Œåˆ¤å®šæ¡ä»¶æ˜¯å¾ˆè‹›åˆ»çš„ã€‚åœ¨ç»å¸¸åŠ¨æ€ç”Ÿæˆå¤§é‡ Class çš„åº”ç”¨ä¸­ï¼Œè¦ç‰¹åˆ«æ³¨æ„è¿™ç‚¹ã€‚</p><h4 id="SOFï¼ˆå †æ ˆæº¢å‡º-StackOverflowï¼‰ï¼š"><a href="#SOFï¼ˆå †æ ˆæº¢å‡º-StackOverflowï¼‰ï¼š" class="headerlink" title="SOFï¼ˆå †æ ˆæº¢å‡º StackOverflowï¼‰ï¼š"></a>SOFï¼ˆå †æ ˆæº¢å‡º StackOverflowï¼‰ï¼š</h4><p>StackOverflowError çš„å®šä¹‰ï¼šå½“åº”ç”¨ç¨‹åºé€’å½’å¤ªæ·±è€Œå‘ç”Ÿå †æ ˆæº¢å‡ºæ—¶ï¼ŒæŠ›å‡ºè¯¥é”™è¯¯ã€‚</p><p>å› ä¸ºæ ˆä¸€èˆ¬é»˜è®¤ä¸º 1 - 2 mï¼Œä¸€æ—¦å‡ºç°æ­»å¾ªç¯æˆ–è€…æ˜¯å¤§é‡çš„é€’å½’è°ƒç”¨ï¼Œåœ¨ä¸æ–­çš„å‹æ ˆè¿‡ç¨‹ä¸­ï¼Œé€ æˆæ ˆå®¹é‡è¶…è¿‡ 1 m è€Œå¯¼è‡´æº¢å‡ºã€‚</p><p>æ ˆæº¢å‡ºçš„åŸå› ï¼šé€’å½’è°ƒç”¨ï¼Œå¤§é‡å¾ªç¯æˆ–æ­»å¾ªç¯ï¼Œå…¨å±€å˜é‡æ˜¯å¦è¿‡å¤šï¼Œæ•°ç»„ã€Listã€mapæ•°æ®è¿‡å¤§ã€‚</p><h3 id="26ã€-ç®€è¿°çº¿ç¨‹ã€ç¨‹åºã€è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆ"><a href="#26ã€-ç®€è¿°çº¿ç¨‹ã€ç¨‹åºã€è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆ" class="headerlink" title="26ã€ ç®€è¿°çº¿ç¨‹ã€ç¨‹åºã€è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆ?"></a>26ã€ ç®€è¿°çº¿ç¨‹ã€ç¨‹åºã€è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆ?</h3><p><strong>çº¿ç¨‹</strong>ä¸è¿›ç¨‹ç›¸ä¼¼ï¼Œä½†çº¿ç¨‹æ˜¯ä¸€ä¸ªæ¯”è¿›ç¨‹æ›´å°çš„æ‰§è¡Œå•ä½ã€‚ä¸€ä¸ªè¿›ç¨‹åœ¨å…¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯ä»¥äº§ç”Ÿå¤šä¸ªçº¿ç¨‹ã€‚ä¸è¿›ç¨‹ä¸åŒçš„æ˜¯åŒç±»çš„å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€å—å†…å­˜ç©ºé—´å’Œä¸€ç»„ç³»ç»Ÿèµ„æºï¼Œæ‰€ä»¥ç³»ç»Ÿåœ¨äº§ç”Ÿä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ–æ˜¯åœ¨å„ä¸ªçº¿ç¨‹ä¹‹é—´ä½œåˆ‡æ¢å·¥ä½œæ—¶ï¼Œè´Ÿæ‹…è¦æ¯”è¿›ç¨‹å°å¾—å¤šï¼Œä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œçº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»é‡çº§è¿›ç¨‹ã€‚</p><p><strong>ç¨‹åº</strong>æ˜¯å«æœ‰æŒ‡ä»¤å’Œæ•°æ®çš„æ–‡ä»¶ï¼Œè¢«å­˜å‚¨åœ¨ç£ç›˜æˆ–å…¶ä»–çš„æ•°æ®å­˜å‚¨è®¾å¤‡ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ç¨‹åºæ˜¯é™æ€çš„ä»£ç ã€‚</p><p><strong>è¿›ç¨‹</strong>æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ç³»ç»Ÿè¿è¡Œç¨‹åºçš„åŸºæœ¬å•ä½ï¼Œå› æ­¤è¿›ç¨‹æ˜¯åŠ¨æ€çš„ã€‚ç³»ç»Ÿè¿è¡Œä¸€ä¸ªç¨‹åºå³æ˜¯ä¸€ä¸ªè¿›ç¨‹ä»åˆ›å»ºï¼Œè¿è¡Œåˆ°æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªæ‰§è¡Œä¸­çš„ç¨‹åºï¼Œå®ƒåœ¨è®¡ç®—æœºä¸­ä¸€ä¸ªæŒ‡ä»¤æ¥ç€ä¸€ä¸ªæŒ‡ä»¤åœ°æ‰§è¡Œç€ï¼ŒåŒæ—¶ï¼Œæ¯ä¸ªè¿›ç¨‹è¿˜å æœ‰æŸäº›ç³»ç»Ÿèµ„æºå¦‚ CPU æ—¶é—´ï¼Œå†…å­˜ç©ºé—´ï¼Œæ–‡ä»¶ï¼Œè¾“å…¥è¾“å‡ºè®¾å¤‡çš„ä½¿ç”¨æƒç­‰ç­‰ã€‚æ¢å¥è¯è¯´ï¼Œå½“ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå°†ä¼šè¢«æ“ä½œç³»ç»Ÿè½½å…¥å†…å­˜ä¸­ã€‚ çº¿ç¨‹æ˜¯è¿›ç¨‹åˆ’åˆ†æˆçš„æ›´å°çš„è¿è¡Œå•ä½ã€‚çº¿ç¨‹å’Œè¿›ç¨‹æœ€å¤§çš„ä¸åŒåœ¨äºåŸºæœ¬ä¸Šå„è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œå„çº¿ç¨‹åˆ™ä¸ä¸€å®šï¼Œå› ä¸ºåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹ææœ‰å¯èƒ½ä¼šç›¸äº’å½±å“ã€‚ä»å¦ä¸€è§’åº¦æ¥è¯´ï¼Œè¿›ç¨‹å±äºæ“ä½œç³»ç»Ÿçš„èŒƒç•´ï¼Œä¸»è¦æ˜¯åŒä¸€æ®µæ—¶é—´å†…ï¼Œå¯ä»¥åŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ç¨‹åºï¼Œè€Œçº¿ç¨‹åˆ™æ˜¯åœ¨åŒä¸€ç¨‹åºå†…å‡ ä¹åŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ç¨‹åºæ®µã€‚</p><h3 id="27ã€Java-åºåˆ—åŒ–ä¸­å¦‚æœæœ‰äº›å­—æ®µä¸æƒ³è¿›è¡Œåºåˆ—åŒ–ï¼Œæ€ä¹ˆåŠï¼Ÿ"><a href="#27ã€Java-åºåˆ—åŒ–ä¸­å¦‚æœæœ‰äº›å­—æ®µä¸æƒ³è¿›è¡Œåºåˆ—åŒ–ï¼Œæ€ä¹ˆåŠï¼Ÿ" class="headerlink" title="27ã€Java åºåˆ—åŒ–ä¸­å¦‚æœæœ‰äº›å­—æ®µä¸æƒ³è¿›è¡Œåºåˆ—åŒ–ï¼Œæ€ä¹ˆåŠï¼Ÿ"></a>27ã€Java åºåˆ—åŒ–ä¸­å¦‚æœæœ‰äº›å­—æ®µä¸æƒ³è¿›è¡Œåºåˆ—åŒ–ï¼Œæ€ä¹ˆåŠï¼Ÿ</h3><p>å¯¹äºä¸æƒ³è¿›è¡Œåºåˆ—åŒ–çš„å˜é‡ï¼Œä½¿ç”¨ transient å…³é”®å­—ä¿®é¥°ã€‚</p><p>transient å…³é”®å­—çš„ä½œç”¨æ˜¯ï¼šé˜»æ­¢å®ä¾‹ä¸­é‚£äº›ç”¨æ­¤å…³é”®å­—ä¿®é¥°çš„çš„å˜é‡åºåˆ—åŒ–ï¼›å½“å¯¹è±¡è¢«ååºåˆ—åŒ–æ—¶ï¼Œè¢« transient ä¿®é¥°çš„å˜é‡å€¼ä¸ä¼šè¢«æŒä¹…åŒ–å’Œæ¢å¤ã€‚transient åªèƒ½ä¿®é¥°å˜é‡ï¼Œä¸èƒ½ä¿®é¥°ç±»å’Œæ–¹æ³•ã€‚</p><h3 id="28ã€è¯´è¯´-Java-ä¸­-IO-æµ"><a href="#28ã€è¯´è¯´-Java-ä¸­-IO-æµ" class="headerlink" title="28ã€è¯´è¯´ Java ä¸­ IO æµ"></a>28ã€è¯´è¯´ Java ä¸­ IO æµ</h3><h4 id="Java-ä¸­-IO-æµåˆ†ä¸ºå‡ ç§"><a href="#Java-ä¸­-IO-æµåˆ†ä¸ºå‡ ç§" class="headerlink" title="Java ä¸­ IO æµåˆ†ä¸ºå‡ ç§?"></a>Java ä¸­ IO æµåˆ†ä¸ºå‡ ç§?</h4><ul><li>æŒ‰ç…§æµçš„æµå‘åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºè¾“å…¥æµå’Œè¾“å‡ºæµï¼›</li><li>æŒ‰ç…§æ“ä½œå•å…ƒåˆ’åˆ†ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºå­—èŠ‚æµå’Œå­—ç¬¦æµï¼›</li><li>æŒ‰ç…§æµçš„è§’è‰²åˆ’åˆ†ä¸ºèŠ‚ç‚¹æµå’Œå¤„ç†æµã€‚</li></ul><p>Java IO æµå…±æ¶‰åŠ 40 å¤šä¸ªç±»ï¼Œè¿™äº›ç±»çœ‹ä¸Šå»å¾ˆæ‚ä¹±ï¼Œä½†å®é™…ä¸Šå¾ˆæœ‰è§„åˆ™ï¼Œè€Œä¸”å½¼æ­¤ä¹‹é—´å­˜åœ¨éå¸¸ç´§å¯†çš„è”ç³»ï¼Œ Java IO æµçš„ 40 å¤šä¸ªç±»éƒ½æ˜¯ä»å¦‚ä¸‹ 4 ä¸ªæŠ½è±¡ç±»åŸºç±»ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ã€‚</p><p>InputStream &#x2F; Readerï¼šæ‰€æœ‰çš„è¾“å…¥æµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å…¥æµï¼Œåè€…æ˜¯å­—ç¬¦è¾“å…¥æµã€‚</p><p>OutputStream &#x2F; Writerï¼šæ‰€æœ‰è¾“å‡ºæµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å‡ºæµï¼Œåè€…æ˜¯å­—ç¬¦è¾“å‡ºæµã€‚</p><h3 id="29ã€-Java-IO-ä¸-NIO-çš„åŒºåˆ«ï¼ˆè¡¥å……ï¼‰"><a href="#29ã€-Java-IO-ä¸-NIO-çš„åŒºåˆ«ï¼ˆè¡¥å……ï¼‰" class="headerlink" title="29ã€ Java IO ä¸ NIO çš„åŒºåˆ«ï¼ˆè¡¥å……ï¼‰"></a>29ã€ Java IO ä¸ NIO çš„åŒºåˆ«ï¼ˆè¡¥å……ï¼‰</h3><p>NIO å³ New IOï¼Œè¿™ä¸ªåº“æ˜¯åœ¨ JDK1.4 ä¸­æ‰å¼•å…¥çš„ã€‚NIO å’Œ IO æœ‰ç›¸åŒçš„ä½œç”¨å’Œç›®çš„ï¼Œä½†å®ç°æ–¹å¼ä¸åŒï¼ŒNIO ä¸»è¦ç”¨åˆ°çš„æ˜¯å—ï¼Œæ‰€ä»¥ NIO çš„æ•ˆç‡è¦æ¯” IO é«˜å¾ˆå¤šã€‚åœ¨ Java API ä¸­æä¾›äº†ä¸¤å¥— NIOï¼Œä¸€å¥—æ˜¯é’ˆå¯¹æ ‡å‡†è¾“å…¥è¾“å‡º NIOï¼Œå¦ä¸€å¥—å°±æ˜¯ç½‘ç»œç¼–ç¨‹ NIOã€‚</p><h3 id="30ã€java-åå°„çš„ä½œç”¨äºåŸç†"><a href="#30ã€java-åå°„çš„ä½œç”¨äºåŸç†" class="headerlink" title="30ã€java åå°„çš„ä½œç”¨äºåŸç†"></a>30ã€java åå°„çš„ä½œç”¨äºåŸç†</h3><h4 id="1ã€å®šä¹‰ï¼š"><a href="#1ã€å®šä¹‰ï¼š" class="headerlink" title="1ã€å®šä¹‰ï¼š"></a>1ã€å®šä¹‰ï¼š</h4><p>åå°„æœºåˆ¶æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•ã€‚åœ¨ javaä¸­ï¼Œåªè¦ç»™å®šç±»çš„åå­—ï¼Œå°±å¯ä»¥é€šè¿‡åå°„æœºåˆ¶æ¥è·å¾—ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p><p><strong>è¿™ç§åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸º Java è¯­è¨€çš„åå°„æœºåˆ¶ã€‚</strong></p><h4 id="2ã€å“ªé‡Œä¼šç”¨åˆ°åå°„æœºåˆ¶ï¼Ÿ"><a href="#2ã€å“ªé‡Œä¼šç”¨åˆ°åå°„æœºåˆ¶ï¼Ÿ" class="headerlink" title="2ã€å“ªé‡Œä¼šç”¨åˆ°åå°„æœºåˆ¶ï¼Ÿ"></a>2ã€å“ªé‡Œä¼šç”¨åˆ°åå°„æœºåˆ¶ï¼Ÿ</h4><p>jdbc å°±æ˜¯å…¸å‹çš„åå°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&#x27;com.mysql.jdbc.Driver.class&#x27;</span>);<span class="comment">//åŠ è½½ MySQL çš„é©±åŠ¨ç±»</span></span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯åå°„ã€‚å¦‚ hibernateï¼Œstruts ç­‰æ¡†æ¶ä½¿ç”¨åå°„å®ç°çš„ã€‚</p><h4 id="3ã€åå°„çš„å®ç°æ–¹å¼ï¼š"><a href="#3ã€åå°„çš„å®ç°æ–¹å¼ï¼š" class="headerlink" title="3ã€åå°„çš„å®ç°æ–¹å¼ï¼š"></a>3ã€åå°„çš„å®ç°æ–¹å¼ï¼š</h4><p>ç¬¬ä¸€æ­¥ï¼šè·å– Class å¯¹è±¡ï¼Œæœ‰ 4 ä¸­æ–¹æ³•ï¼š</p><p>1ï¼‰Class.forName (â€œç±»çš„è·¯å¾„â€)ï¼›</p><p>2ï¼‰ç±»å.class</p><p>3ï¼‰å¯¹è±¡å.getClass()</p><p>4ï¼‰åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»ï¼Œå¯ä»¥è°ƒç”¨åŒ…è£…ç±»çš„ Type å±æ€§æ¥è·å¾—è¯¥åŒ…è£…ç±»çš„ Class å¯¹è±¡</p><h4 id="4ã€å®ç°-Java-åå°„çš„ç±»ï¼š"><a href="#4ã€å®ç°-Java-åå°„çš„ç±»ï¼š" class="headerlink" title="4ã€å®ç° Java åå°„çš„ç±»ï¼š"></a>4ã€å®ç° Java åå°„çš„ç±»ï¼š</h4><p>1ï¼‰Classï¼šè¡¨ç¤ºæ­£åœ¨è¿è¡Œçš„ Java åº”ç”¨ç¨‹åºä¸­çš„ç±»å’Œæ¥å£ã€‚æ³¨æ„ï¼š æ‰€æœ‰è·å–å¯¹è±¡çš„ä¿¡æ¯éƒ½éœ€è¦ Class ç±»æ¥å®ç°ã€‚</p><p>2ï¼‰Fieldï¼šæä¾›æœ‰å…³ç±»å’Œæ¥å£çš„å±æ€§ä¿¡æ¯ï¼Œä»¥åŠå¯¹å®ƒçš„åŠ¨æ€è®¿é—®æƒé™ã€‚</p><p>3ï¼‰Constructorï¼šæä¾›å…³äºç±»çš„å•ä¸ªæ„é€ æ–¹æ³•çš„ä¿¡æ¯ä»¥åŠå®ƒçš„è®¿é—®æƒé™</p><p>4ï¼‰Methodï¼šæä¾›ç±»æˆ–æ¥å£ä¸­æŸä¸ªæ–¹æ³•çš„ä¿¡æ¯</p><h4 id="5ã€åå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹ï¼š"><a href="#5ã€åå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹ï¼š" class="headerlink" title="5ã€åå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹ï¼š"></a>5ã€åå°„æœºåˆ¶çš„ä¼˜ç¼ºç‚¹ï¼š</h4><p><strong>ä¼˜ç‚¹ï¼š</strong></p><p>1ï¼‰èƒ½å¤Ÿè¿è¡Œæ—¶åŠ¨æ€è·å–ç±»çš„å®ä¾‹ï¼Œæé«˜çµæ´»æ€§</p><p>2ï¼‰ä¸åŠ¨æ€ç¼–è¯‘ç»“åˆ</p><p><strong>ç¼ºç‚¹ï¼š</strong></p><p>1ï¼‰ä½¿ç”¨åå°„æ€§èƒ½è¾ƒä½ï¼Œéœ€è¦è§£æå­—èŠ‚ç ï¼Œå°†å†…å­˜ä¸­çš„å¯¹è±¡è¿›è¡Œè§£æã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>1ã€é€šè¿‡ setAccessible ( true ) å…³é—­  JDK çš„å®‰å…¨æ£€æŸ¥æ¥æå‡åå°„é€Ÿåº¦ï¼›</p><p>2ã€å¤šæ¬¡åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹æ—¶ï¼Œæœ‰ç¼“å­˜ä¼šå¿«å¾ˆå¤š</p><p>3ã€ReflectASM å·¥å…·ç±»ï¼Œé€šè¿‡å­—èŠ‚ç ç”Ÿæˆçš„æ–¹å¼åŠ å¿«åå°„é€Ÿåº¦</p><p>2ï¼‰ç›¸å¯¹ä¸å®‰å…¨ï¼Œç ´åäº†å°è£…æ€§ï¼ˆ å› ä¸ºé€šè¿‡åå°„å¯ä»¥è·å¾—ç§æœ‰æ–¹æ³•å’Œå±æ€§ ï¼‰</p><h3 id="31ã€è¯´è¯´-Listï¼ŒSetï¼ŒMap-ä¸‰è€…çš„åŒºåˆ«ï¼Ÿ"><a href="#31ã€è¯´è¯´-Listï¼ŒSetï¼ŒMap-ä¸‰è€…çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="31ã€è¯´è¯´ Listï¼ŒSetï¼ŒMap ä¸‰è€…çš„åŒºåˆ«ï¼Ÿ"></a>31ã€è¯´è¯´ Listï¼ŒSetï¼ŒMap ä¸‰è€…çš„åŒºåˆ«ï¼Ÿ</h3><ul><li>Listï¼ˆå¯¹ä»˜é¡ºåºçš„å¥½å¸®æ‰‹ï¼‰ï¼šList æ¥å£å­˜å‚¨ä¸€ç»„ä¸å”¯ä¸€ï¼ˆå¯ä»¥æœ‰å¤šä¸ªå…ƒç´ å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼‰ï¼Œæœ‰åºçš„å¯¹è±¡</li><li>Setï¼ˆæ³¨é‡ç‹¬ä¸€æ— äºŒçš„æ€§è´¨ï¼‰ï¼šä¸å…è®¸é‡å¤çš„é›†åˆã€‚ä¸ä¼šæœ‰å¤šä¸ªå…ƒç´ å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ã€‚</li><li>Mapï¼ˆç”¨ Key æ¥æœç´¢çš„ä¸“å®¶ï¼‰ï¼šä½¿ç”¨é”®å€¼å¯¹å­˜å‚¨ã€‚Map ä¼šç»´æŠ¤ä¸ Key æœ‰å…³è”çš„å€¼ã€‚ä¸¤ä¸ª Key å¯ä»¥å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼Œä½† Key ä¸èƒ½é‡å¤ï¼Œå…¸å‹çš„ Key æ˜¯ String ç±»å‹ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ã€‚</li></ul><h3 id="32ã€Object-æœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•ï¼Ÿ"><a href="#32ã€Object-æœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•ï¼Ÿ" class="headerlink" title="32ã€Object æœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•ï¼Ÿ"></a>32ã€Object æœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•ï¼Ÿ</h3><p>java.lang.Object</p><p><strong>clone</strong> <strong>æ–¹æ³•</strong></p><p>ä¿æŠ¤æ–¹æ³•ï¼Œå®ç°å¯¹è±¡çš„æµ…å¤åˆ¶ï¼Œåªæœ‰å®ç°äº† Cloneable æ¥å£æ‰å¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦åˆ™æŠ›å‡º CloneNotSupportedException å¼‚å¸¸ï¼Œæ·±æ‹·è´ä¹Ÿéœ€è¦å®ç° Cloneableï¼ŒåŒæ—¶å…¶æˆå‘˜å˜é‡ä¸ºå¼•ç”¨ç±»å‹çš„ä¹Ÿéœ€è¦å®ç° Cloneableï¼Œç„¶åé‡å†™ clone æ–¹æ³•ã€‚</p><p><strong>finalize</strong> <strong>æ–¹æ³•</strong></p><p>è¯¥æ–¹æ³•å’Œåƒåœ¾æ”¶é›†å™¨æœ‰å…³ç³»ï¼Œåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶çš„æœ€åä¸€æ­¥å°±æ˜¯åˆ¤æ–­æ˜¯å¦é‡å†™äº†æ­¤æ–¹æ³•ã€‚</p><p><strong>equals</strong> <strong>æ–¹æ³•</strong></p><p>è¯¥æ–¹æ³•ä½¿ç”¨é¢‘ç‡éå¸¸é«˜ã€‚ä¸€èˆ¬ equals å’Œ &#x3D;&#x3D; æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯åœ¨ Object ä¸­ä¸¤è€…æ˜¯ä¸€æ ·çš„ã€‚å­ç±»ä¸€èˆ¬éƒ½è¦é‡å†™è¿™ä¸ªæ–¹æ³•ã€‚</p><p><strong>hashCode</strong> <strong>æ–¹æ³•</strong></p><p>è¯¥æ–¹æ³•ç”¨äºå“ˆå¸ŒæŸ¥æ‰¾ï¼Œé‡å†™äº† equals æ–¹æ³•ä¸€èˆ¬éƒ½è¦é‡å†™ hashCode æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨ä¸€äº›å…·æœ‰å“ˆå¸ŒåŠŸèƒ½çš„ Collection ä¸­ç”¨åˆ°ã€‚</p><p>ä¸€èˆ¬å¿…é¡»æ»¡è¶³ obj1.equals(obj2) &#x3D;&#x3D; true ã€‚å¯ä»¥æ¨å‡º obj1.hashCode() &#x3D;&#x3D; obj2.hashCode() ï¼Œä½†æ˜¯ hashCode ç›¸ç­‰ä¸ä¸€å®šå°±æ»¡è¶³ equalsã€‚ä¸è¿‡ä¸ºäº†æé«˜æ•ˆç‡ï¼Œåº”è¯¥å°½é‡ä½¿ä¸Šé¢ä¸¤ä¸ªæ¡ä»¶æ¥è¿‘ç­‰ä»·ã€‚</p><p>JDK 1.6ã€1.7  é»˜è®¤æ˜¯è¿”å›éšæœºæ•°ï¼›</p><p>JDK 1.8  é»˜è®¤æ˜¯é€šè¿‡å’Œå½“å‰çº¿ç¨‹æœ‰å…³çš„ä¸€ä¸ªéšæœºæ•° + ä¸‰ä¸ªç¡®å®šå€¼ï¼Œè¿ç”¨ Marsagliaâ€™s xorshift scheme éšæœºæ•°ç®—æ³•å¾—åˆ°çš„ä¸€ä¸ªéšæœºæ•°ã€‚</p><p><strong>wait</strong> <strong>æ–¹æ³•</strong></p><p>é…åˆ synchronized ä½¿ç”¨ï¼Œwait æ–¹æ³•å°±æ˜¯ä½¿å½“å‰çº¿ç¨‹ç­‰å¾…è¯¥å¯¹è±¡çš„é”ï¼Œå½“å‰çº¿ç¨‹å¿…é¡»æ˜¯è¯¥å¯¹è±¡çš„æ‹¥æœ‰è€…ï¼Œä¹Ÿå°±æ˜¯å…·æœ‰è¯¥å¯¹è±¡çš„é”ã€‚wait() æ–¹æ³•ä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°è·å¾—é”æˆ–è€…è¢«ä¸­æ–­ã€‚wait ( long timeout ) è®¾å®šä¸€ä¸ªè¶…æ—¶é—´éš”ï¼Œå¦‚æœåœ¨è§„å®šæ—¶é—´å†…æ²¡æœ‰è·å¾—é”å°±è¿”å›ã€‚</p><p>è°ƒç”¨è¯¥æ–¹æ³•åå½“å‰çº¿ç¨‹è¿›å…¥ç¡çœ çŠ¶æ€ï¼Œç›´åˆ°ä»¥ä¸‹äº‹ä»¶å‘ç”Ÿã€‚</p><ol><li>å…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥å¯¹è±¡çš„ notify æ–¹æ³•ï¼›</li><li>å…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥å¯¹è±¡çš„ notifyAll æ–¹æ³•ï¼›</li><li>å…¶ä»–çº¿ç¨‹è°ƒç”¨äº† interrupt ä¸­æ–­è¯¥çº¿ç¨‹ï¼›</li><li>æ—¶é—´é—´éš”åˆ°äº†ã€‚</li></ol><p>æ­¤æ—¶è¯¥çº¿ç¨‹å°±å¯ä»¥è¢«è°ƒåº¦äº†ï¼Œå¦‚æœæ˜¯è¢«ä¸­æ–­çš„è¯å°±æŠ›å‡ºä¸€ä¸ª InterruptedException å¼‚å¸¸ã€‚</p><p><strong>notify</strong> <strong>æ–¹æ³•</strong></p><p>é…åˆ synchronized ä½¿ç”¨ï¼Œè¯¥æ–¹æ³•å”¤é†’åœ¨è¯¥å¯¹è±¡ä¸Š<strong>ç­‰å¾…é˜Ÿåˆ—</strong>ä¸­çš„æŸä¸ªçº¿ç¨‹ï¼ˆåŒæ­¥é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹æ˜¯ç»™æŠ¢å  CPU çš„çº¿ç¨‹ï¼Œç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹æŒ‡çš„æ˜¯ç­‰å¾…å”¤é†’çš„çº¿ç¨‹ï¼‰ã€‚</p><p><strong>notifyAll</strong> <strong>æ–¹æ³•</strong></p><p>é…åˆ synchronized ä½¿ç”¨ï¼Œè¯¥æ–¹æ³•å”¤é†’åœ¨è¯¥å¯¹è±¡ä¸Šç­‰å¾…é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰çº¿ç¨‹ã€‚</p><p><strong>æ€»ç»“</strong></p><p>åªè¦æŠŠä¸Šé¢å‡ ä¸ªæ–¹æ³•ç†Ÿæ‚‰å°±å¯ä»¥äº†ï¼ŒtoString å’Œ getClass æ–¹æ³•å¯ä»¥ä¸ç”¨å»è®¨è®ºå®ƒä»¬ã€‚è¯¥é¢˜ç›®è€ƒå¯Ÿçš„æ˜¯å¯¹ Object çš„ç†Ÿæ‚‰ç¨‹åº¦ï¼Œå¹³æ—¶ç”¨çš„å¾ˆå¤šæ–¹æ³•å¹¶æ²¡çœ‹å…¶å®šä¹‰ä½†æ˜¯ä¹Ÿåœ¨ç”¨ï¼Œæ¯”å¦‚è¯´ï¼šwait() æ–¹æ³•ï¼Œequals() æ–¹æ³•ç­‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class Object is the root of the class hierarchy.Every class has Object as a</span><br><span class="line">superclass. All objects, including arrays, implement the methods of this class.</span><br></pre></td></tr></table></figure><p>å¤§è‡´æ„æ€ï¼šObject æ˜¯æ‰€æœ‰ç±»çš„æ ¹ï¼Œæ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼Œæ‰€æœ‰å¯¹è±¡åŒ…æ‹¬æ•°ç»„éƒ½å®ç°äº† Object çš„æ–¹æ³•ã€‚</p><h3 id="33ã€è·å–ä¸€ä¸ªç±»-Class-å¯¹è±¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#33ã€è·å–ä¸€ä¸ªç±»-Class-å¯¹è±¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="33ã€è·å–ä¸€ä¸ªç±» Class å¯¹è±¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a>33ã€è·å–ä¸€ä¸ªç±» Class å¯¹è±¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h3><p>ææ¸…æ¥šç±»å¯¹è±¡å’Œå®ä¾‹å¯¹è±¡ï¼Œä½†éƒ½æ˜¯å¯¹è±¡ã€‚</p><p>ç¬¬ä¸€ç§ï¼šé€šè¿‡ç±»å¯¹è±¡çš„ getClass() æ–¹æ³•è·å–ï¼Œç»†å¿ƒç‚¹çš„éƒ½çŸ¥é“ï¼Œè¿™ä¸ª getClass æ˜¯ Object ç±»é‡Œé¢çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">User user=<span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line"><span class="comment">//clazzå°±æ˜¯ä¸€ä¸ªUserçš„ç±»å¯¹è±¡</span></span><br><span class="line">Class&lt;?&gt; clazz=user.getClass()</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§ï¼šé€šè¿‡ç±»çš„é™æ€æˆå‘˜è¡¨ç¤ºï¼Œæ¯ä¸ªç±»éƒ½æœ‰éšå«çš„é™æ€æˆå‘˜ classã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//clazzå°±æ˜¯ä¸€ä¸ªUserçš„ç±»å¯¹è±¡</span></span><br><span class="line">Class&lt;?&gt; clazz=User.class;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰ç§ï¼šé€šè¿‡ Class ç±»çš„é™æ€æ–¹æ³• forName() æ–¹æ³•è·å–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;com.tian.User&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="34ã€ç”¨è¿‡-ArrayList-å—ï¼Ÿè¯´ä¸€ä¸‹å®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"><a href="#34ã€ç”¨è¿‡-ArrayList-å—ï¼Ÿè¯´ä¸€ä¸‹å®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="34ã€ç”¨è¿‡ ArrayList å—ï¼Ÿè¯´ä¸€ä¸‹å®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"></a>34ã€<strong>ç”¨è¿‡</strong> <strong>ArrayList</strong> å—ï¼Ÿè¯´ä¸€ä¸‹å®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h3><p>Java é›†åˆæ¡†æ¶ä¸­çš„ä¸€ç§å­˜æ”¾ç›¸åŒç±»å‹çš„å…ƒç´ æ•°æ®ï¼Œæ˜¯ä¸€ç§å˜é•¿çš„é›†åˆç±»ï¼ŒåŸºäºå®šé•¿æ•°ç»„å®ç°ï¼Œå½“åŠ å…¥æ•°æ®è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œä¼šå®è¡Œè‡ªåŠ¨æ‰©å®¹ï¼Œå³æ‰©å¤§æ•°ç»„å¤§å°ã€‚</p><p>åº•å±‚æ˜¯ä½¿ç”¨æ•°ç»„å®ç°ï¼Œæ·»åŠ å…ƒç´ ã€‚</p><p>å¦‚æœ add ( o ) ï¼Œæ·»åŠ åˆ°çš„æ˜¯æ•°ç»„çš„å°¾éƒ¨ï¼Œå¦‚æœè¦å¢åŠ çš„æ•°æ®é‡å¾ˆå¤§ï¼Œåº”è¯¥ä½¿ç”¨ ensureCapacity() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯é¢„å…ˆè®¾ç½® ArrayList çš„å¤§å°ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§æé«˜åˆå§‹åŒ–é€Ÿåº¦ã€‚</p><p>å¦‚æœä½¿ç”¨ add ( int , o ) ï¼Œæ·»åŠ åˆ°æŸä¸ªä½ç½®ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæŒªåŠ¨å¤§é‡çš„æ•°ç»„å…ƒç´ ï¼Œå¹¶ä¸”å¯èƒ½ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶ã€‚</p><p>é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œ ArrayListï¼Œä¼šå¼•å‘ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸æˆ–é”™è¯¯ã€‚</p><p>ArrayList å®ç°äº† Cloneable æ¥å£ï¼Œæ ‡è¯†ç€å®ƒå¯ä»¥è¢«å¤åˆ¶ã€‚æ³¨æ„ï¼šArrayList é‡Œé¢çš„ clone() å¤åˆ¶å…¶å®æ˜¯æµ…å¤åˆ¶ã€‚</p><p><strong>æœ‰æ•°ç»„äº†ä¸ºä»€ä¹ˆè¿˜è¦æä¸ª</strong> <strong>ArrayList</strong> <strong>å‘¢</strong></p><p>é€šå¸¸æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœåœ¨ä¸æ˜ç¡®è¦æ’å…¥å¤šå°‘æ•°æ®çš„æƒ…å†µä¸‹ï¼Œæ™®é€šæ•°ç»„å°±å¾ˆå°´å°¬äº†ï¼Œå› ä¸ºä½ ä¸çŸ¥é“éœ€è¦åˆå§‹åŒ–æ•°ç»„å¤§å°ä¸ºå¤šå°‘ï¼Œè€Œ ArrayList å¯ä»¥ä½¿ç”¨é»˜è®¤çš„å¤§å°ï¼Œå½“å…ƒç´ ä¸ªæ•°åˆ°è¾¾ä¸€å®šç¨‹åº¦åï¼Œä¼šè‡ªåŠ¨æ‰©å®¹ã€‚</p><p>å¯ä»¥è¿™ä¹ˆæ¥ç†è§£ï¼šæˆ‘ä»¬å¸¸è¯´çš„æ•°ç»„æ˜¯å®šæ­»çš„æ•°ç»„ï¼ŒArrayList å´æ˜¯åŠ¨æ€æ•°ç»„</p><h3 id="35ã€è¯´è¯´ä»€ä¹ˆæ˜¯-fail-fast-ï¼Ÿ"><a href="#35ã€è¯´è¯´ä»€ä¹ˆæ˜¯-fail-fast-ï¼Ÿ" class="headerlink" title="35ã€è¯´è¯´ä»€ä¹ˆæ˜¯ fail - fast ï¼Ÿ"></a>35ã€è¯´è¯´ä»€ä¹ˆæ˜¯ fail - fast ï¼Ÿ</h3><p>fail - fast æœºåˆ¶æ˜¯ Java é›†åˆï¼ˆCollectionï¼‰ä¸­çš„ä¸€ç§é”™è¯¯æœºåˆ¶ã€‚å½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿ fail - fast äº‹ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼šå½“æŸä¸€ä¸ªçº¿ç¨‹ A é€šè¿‡ iterator å»éå†æŸé›†åˆçš„è¿‡ç¨‹ä¸­ï¼Œè‹¥è¯¥é›†åˆçš„å†…å®¹è¢«å…¶ä»–çº¿ç¨‹æ‰€æ”¹å˜äº†ï¼Œé‚£ä¹ˆçº¿ç¨‹ A è®¿é—®é›†åˆæ—¶ï¼Œå°±ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ï¼Œäº§ç”Ÿ fail - fast äº‹ä»¶ã€‚è¿™é‡Œçš„æ“ä½œä¸»è¦æ˜¯æŒ‡ addã€remove å’Œ clearï¼Œå¯¹é›†åˆå…ƒç´ ä¸ªæ•°è¿›è¡Œä¿®æ”¹ã€‚</p><p>è§£å†³åŠæ³•ï¼šå»ºè®®ä½¿ç”¨â€œ java.util.concurrent åŒ…ä¸‹çš„ç±»â€ å»å–ä»£ â€œ java.util åŒ…ä¸‹çš„ç±»â€ã€‚</p><p>å¯ä»¥è¿™ä¹ˆç†è§£ï¼šåœ¨éå†ä¹‹å‰ï¼ŒæŠŠ modCount è®°ä¸‹æ¥ expectModCountï¼Œåé¢ expectModCount å»å’Œ modCount è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸ç›¸ç­‰äº†ï¼Œè¯æ˜å·²å¹¶å‘äº†ï¼Œè¢«ä¿®æ”¹äº†ï¼Œäºæ˜¯æŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚</p><h3 id="36ã€HashMap-ä¸­çš„-key-æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º-key-å—ï¼Ÿ"><a href="#36ã€HashMap-ä¸­çš„-key-æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º-key-å—ï¼Ÿ" class="headerlink" title="36ã€HashMap ä¸­çš„ key æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º key å—ï¼Ÿ"></a>36ã€HashMap ä¸­çš„ key æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»ä½œä¸º key å—ï¼Ÿ</h3><p>å¹³æ—¶å¯èƒ½å¤§å®¶ä½¿ç”¨çš„æœ€å¤šçš„å°±æ˜¯ä½¿ç”¨ String ä½œä¸º HashMap çš„ keyï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬æƒ³ä½¿ç”¨æŸä¸ªè‡ªå®šä¹‰ç±»ä½œä¸º HashMap çš„ keyï¼Œé‚£å°±éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>å¦‚æœç±»é‡å†™äº† equals æ–¹æ³•ï¼Œå®ƒä¹Ÿåº”è¯¥é‡å†™ hashCode æ–¹æ³•ã€‚</li><li>ç±»çš„æ‰€æœ‰å®ä¾‹éœ€è¦éµå¾ªä¸ equals å’Œ hashCode ç›¸å…³çš„è§„åˆ™ã€‚</li><li>å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰ä½¿ç”¨ equalsï¼Œä½ ä¸åº”è¯¥åœ¨ hashCode ä¸­ä½¿ç”¨å®ƒã€‚</li><li>å’±ä»¬è‡ªå®šä¹‰ key ç±»çš„æœ€ä½³å®è·µæ˜¯ä½¿ä¹‹ä¸ºä¸å¯å˜çš„ï¼Œè¿™æ ·ï¼ŒhashCode å€¼å¯ä»¥è¢«ç¼“å­˜èµ·æ¥ï¼Œæ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ä¸å¯å˜çš„ç±»ä¹Ÿå¯ä»¥ç¡®ä¿ hashCode å’Œ equals åœ¨æœªæ¥ä¸ä¼šæ”¹å˜ï¼Œè¿™æ ·å°±ä¼šè§£å†³ä¸å¯å˜ç›¸å…³çš„é—®é¢˜äº†ã€‚</li></ul><h3 id="37ã€HashMap-çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯-2-çš„-N-æ¬¡æ–¹å‘¢ï¼Ÿ"><a href="#37ã€HashMap-çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯-2-çš„-N-æ¬¡æ–¹å‘¢ï¼Ÿ" class="headerlink" title="37ã€HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„ N æ¬¡æ–¹å‘¢ï¼Ÿ"></a>37ã€HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„ N æ¬¡æ–¹å‘¢ï¼Ÿ</h3><p>ä¸ºäº†èƒ½è®© HashMap å­˜æ•°æ®å’Œå–æ•°æ®çš„æ•ˆç‡é«˜ï¼Œå°½å¯èƒ½åœ°å‡å°‘ hash å€¼çš„ç¢°æ’ï¼Œä¹Ÿå°±æ˜¯è¯´å°½é‡æŠŠæ•°æ®èƒ½å‡åŒ€çš„åˆ†é…ï¼Œæ¯ä¸ªé“¾è¡¨æˆ–è€…çº¢é»‘æ ‘é•¿åº¦å°½é‡ç›¸ç­‰ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆå¯èƒ½ä¼šæƒ³åˆ° % å–æ¨¡çš„æ“ä½œæ¥å®ç°ã€‚</p><p>ä¸‹é¢æ˜¯å›ç­”çš„é‡ç‚¹å“Ÿï¼š</p><p>å–ä½™ï¼ˆ%ï¼‰æ“ä½œä¸­å¦‚æœé™¤æ•°æ˜¯ 2 çš„å¹‚æ¬¡ï¼Œåˆ™ç­‰ä»·äºä¸å…¶é™¤æ•°å‡ä¸€çš„ä¸ï¼ˆ&amp;ï¼‰æ“ä½œï¼ˆä¹Ÿå°±æ˜¯è¯´ hash % length &#x3D;&#x3D; hash &amp; ( length - 1 ) çš„å‰ææ˜¯ length æ˜¯ 2 çš„ n æ¬¡æ–¹ï¼‰ã€‚å¹¶ä¸”ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶ä½æ“ä½œ &amp; ï¼Œç›¸å¯¹äº % èƒ½å¤Ÿæé«˜è¿ç®—æ•ˆç‡ã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ HashMap çš„é•¿åº¦éœ€è¦ 2 çš„ N æ¬¡æ–¹äº†</p><h3 id="38ã€HashMap-ä¸-ConcurrentHashMap-çš„å¼‚åŒ"><a href="#38ã€HashMap-ä¸-ConcurrentHashMap-çš„å¼‚åŒ" class="headerlink" title="38ã€HashMap ä¸ ConcurrentHashMap çš„å¼‚åŒ"></a>38ã€HashMap ä¸ ConcurrentHashMap çš„å¼‚åŒ</h3><ol><li>éƒ½æ˜¯ key - value å½¢å¼çš„å­˜å‚¨æ•°æ®ï¼›</li><li>HashMap æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒConcurrentHashMap æ˜¯ JUC ä¸‹çš„çº¿ç¨‹å®‰å…¨çš„ï¼›</li><li>HashMap åº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ + é“¾è¡¨ï¼ˆ JDK 1.8 ä¹‹å‰ï¼‰ã€‚JDK 1.8 ä¹‹åæ˜¯æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ã€‚å½“é“¾è¡¨ä¸­å…ƒç´ ä¸ªæ•°è¾¾åˆ° 8 çš„æ—¶å€™ï¼Œé“¾è¡¨çš„æŸ¥è¯¢é€Ÿåº¦ä¸å¦‚çº¢é»‘æ ‘å¿«ï¼Œé“¾è¡¨ä¼šè½¬ä¸ºçº¢é»‘æ ‘ï¼Œçº¢é»‘æ ‘æŸ¥è¯¢é€Ÿåº¦å¿«ï¼›</li><li>HashMap åˆå§‹æ•°ç»„å¤§å°ä¸º 16ï¼ˆé»˜è®¤ï¼‰ï¼Œå½“å‡ºç°æ‰©å®¹çš„æ—¶å€™ï¼Œä»¥ 0.75 * æ•°ç»„å¤§å°çš„æ–¹å¼è¿›è¡Œæ‰©å®¹ï¼›</li><li>ConcurrentHashMap åœ¨ JDK 1.8 ä¹‹å‰æ˜¯é‡‡ç”¨åˆ†æ®µé”æ¥ç°å®çš„ Segment + HashEntryï¼ŒSegment æ•°ç»„å¤§å°é»˜è®¤æ˜¯ 16ï¼Œ2 çš„ n æ¬¡æ–¹ï¼›JDK 1.8 ä¹‹åï¼Œé‡‡ç”¨ Node + CAS + Synchronizedæ¥ä¿è¯å¹¶å‘å®‰å…¨è¿›è¡Œå®ç°ã€‚</li></ol><h3 id="39ã€çº¢é»‘æ ‘æœ‰å“ªå‡ ä¸ªç‰¹å¾ï¼Ÿ"><a href="#39ã€çº¢é»‘æ ‘æœ‰å“ªå‡ ä¸ªç‰¹å¾ï¼Ÿ" class="headerlink" title="39ã€çº¢é»‘æ ‘æœ‰å“ªå‡ ä¸ªç‰¹å¾ï¼Ÿ"></a>39ã€çº¢é»‘æ ‘æœ‰å“ªå‡ ä¸ªç‰¹å¾ï¼Ÿ</h3><ul><li>æ¯ä¸ªèŠ‚ç‚¹æ˜¯é»‘è‰²æˆ–çº¢è‰²</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²</li><li>æ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ï¼ˆæŒ‡å‘ç©ºçš„å¶å­èŠ‚ç‚¹ï¼‰</li><li>å¦‚æœä¸€ä¸ªå¶å­èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆå…¶å­èŠ‚ç‚¹å¿…é¡»éƒ½æ˜¯é»‘è‰²çš„</li><li>ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„å­å­™èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸ŠåŒ…å«ç›¸åŒæ•°ç›®çš„é»‘èŠ‚ç‚¹</li></ul><h3 id="40ã€è¯´è¯´ä½ å¹³æ—¶æ˜¯æ€ä¹ˆå¤„ç†-Java-å¼‚å¸¸çš„"><a href="#40ã€è¯´è¯´ä½ å¹³æ—¶æ˜¯æ€ä¹ˆå¤„ç†-Java-å¼‚å¸¸çš„" class="headerlink" title="40ã€è¯´è¯´ä½ å¹³æ—¶æ˜¯æ€ä¹ˆå¤„ç† Java å¼‚å¸¸çš„"></a>40ã€<strong>è¯´è¯´ä½ å¹³æ—¶æ˜¯æ€ä¹ˆå¤„ç†</strong> <strong>Java</strong> å¼‚å¸¸çš„</h3><p>try - catch - finally</p><ul><li>try å—è´Ÿè´£ç›‘æ§å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç </li><li>catch å—è´Ÿè´£æ•è·å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œå¹¶è¿›è¡Œå¤„ç†</li><li>finally å—è´Ÿè´£æ¸…ç†å„ç§èµ„æºï¼Œä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ</li><li>å…¶ä¸­ try å—æ˜¯å¿…é¡»çš„ï¼Œcatch å’Œ finally è‡³å°‘å­˜åœ¨ä¸€ä¸ªæ ‡å‡†å¼‚å¸¸å¤„ç†æµç¨‹</li></ul><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨åˆ°è‡ªå®šä¹‰å¼‚å¸¸ï¼Œåœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œç¨‹åºå¾ˆå°‘ä¼šè‡ªå·±æŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºå¼‚å¸¸çš„ç±»åé€šå¸¸ä¹ŸåŒ…å«äº†è¯¥å¼‚å¸¸çš„æœ‰ç”¨ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨é€‰æ‹©æŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™ï¼Œåº”è¯¥é€‰æ‹©åˆé€‚çš„å¼‚å¸¸ç±»ï¼Œä»è€Œå¯ä»¥æ˜ç¡®åœ°æè¿°è¯¥å¼‚å¸¸æƒ…å†µï¼Œæ‰€ä»¥è¿™æ—¶å€™å¾€å¾€éƒ½æ˜¯è‡ªå®šä¹‰å¼‚å¸¸ã€‚</p><p>è‡ªå®šä¹‰å¼‚å¸¸é€šå¸¸æ˜¯é€šè¿‡ç»§æ‰¿ java.lang.Exception ç±»ï¼Œå¦‚æœæƒ³è‡ªå®šä¹‰ Runtime å¼‚å¸¸çš„è¯ï¼Œå¯ä»¥ç»§æ‰¿ java.lang.RuntimeException ç±»ï¼Œå®ç°ä¸€ä¸ªæ— å‚æ„é€ å’Œä¸€ä¸ªå¸¦å­—ç¬¦ä¸²å‚æ•°çš„æœ‰å‚æ„é€ æ–¹æ³•ã€‚</p><p>åœ¨ä¸šåŠ¡ä»£ç é‡Œï¼Œå¯ä»¥é’ˆå¯¹æ€§çš„ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸ã€‚æ¯”å¦‚è¯´ï¼šè¯¥ç”¨æˆ·ä¸å…·å¤‡æŸæŸæƒé™ã€ä½™é¢ä¸è¶³ç­‰</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaSE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•è®©è‡ªå·±æ—©ç¡</title>
      <link href="/posts/9905.html"/>
      <url>/posts/9905.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ç»™è‡ªå·±ä¸€ä¸ªå…¥ç¡è¿‡åº¦æœŸ"><a href="#ä¸€ã€ç»™è‡ªå·±ä¸€ä¸ªå…¥ç¡è¿‡åº¦æœŸ" class="headerlink" title="ä¸€ã€ç»™è‡ªå·±ä¸€ä¸ªå…¥ç¡è¿‡åº¦æœŸ"></a>ä¸€ã€ç»™è‡ªå·±ä¸€ä¸ªå…¥ç¡è¿‡åº¦æœŸ</h2><p>ç¡è§‰å‰ï¼Œä¸è¦çœ‹å¤ªåˆºæ¿€çš„ä¸œè¥¿ï¼Œä¸è¦ç©å¤ªç´§å¼ ï¼Œå¤ªæ¿€çƒˆçš„æ¸¸æˆã€‚åœ¨ç¡å‰è¦å¹³å¤å¥½æƒ…ç»ªï¼Œå¦‚æœä¸èƒ½ï¼Œå°±åšä¸€å†™æœ‰åŠ©äºç¡çœ æ´»åŠ¨ã€‚<br>ä¾‹å¦‚ï¼šä½ å¯ä»¥å»å¬å‡ é¦–æœ‰åŠ©äºç¡çœ çš„çº¯éŸ³ä¹ï¼Œè€Œä¸æ˜¯å¬æœ‰æ­Œè¯çš„æ­Œæ›²ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨å–œé©¬æ‹‰é›…ä¸Šå¬ä¹¦ï¼Œè®¾å®šäºŒååˆ†é’Ÿåè‡ªåŠ¨å…³é—­ï¼Œå¬ä¸ªäº”åˆ°ååˆ†é’Ÿå°±ç¡ç€äº†ã€‚</p><h2 id="äºŒã€ä¸æŠŠæ™šä¸Šå½“æˆå·¥ä½œæ—¶é—´"><a href="#äºŒã€ä¸æŠŠæ™šä¸Šå½“æˆå·¥ä½œæ—¶é—´" class="headerlink" title="äºŒã€ä¸æŠŠæ™šä¸Šå½“æˆå·¥ä½œæ—¶é—´"></a>äºŒã€ä¸æŠŠæ™šä¸Šå½“æˆå·¥ä½œæ—¶é—´</h2><p>æ‰€æœ‰çš„å·¥ä½œï¼Œéƒ½è¦å°½é‡åœ¨ç™½å¤©å®Œæˆï¼Œæ™šä¸Šçš„æ—¶é—´ï¼Œå…¶å®å¹¶æ²¡æœ‰æˆ‘ä»¬æƒ³è±¡çš„é‚£ä¹ˆå¤šï¼Œåƒä¸ªé¥­ï¼Œæ´—ä¸ªæ¾¡ï¼Œæ´—ä¸ªè¡£æœï¼Œå†ç©ä¼šæ‰‹æœºï¼Œä¸çŸ¥ä¸è§‰å°±å·²ç»åä¸€ç‚¹äº†ã€‚<br>æˆ‘ä»¬è¦å¯¹æ™šä¸Šçš„æ—¶é—´å¿ƒé‡Œæœ‰æ•°ï¼Œæ‰¾ä¸€ä¸ªæ—¶é—´ä½œä¸ºç¡è§‰æˆªç‚¹ï¼Œä¸ç®¡å‘ç”Ÿä»€ä¹ˆï¼Œéƒ½åŠ¡å¿…ä¿è¯åœ¨è¿™ä¸ªç‚¹ç¡è§‰ï¼Œé™¤éå·¥ä½œä¸åšç¬¬äºŒå¤©ä¼šè¢«<a href="https://www.zhihu.com/search?q=%E5%BC%80%E9%99%A4&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22:%22answer%22,%22sourceId%22:2785385480%7D">å¼€é™¤</a>ã€‚<br>å½“ä½ é•¿æœŸåšæŒä¸‹å»ï¼Œå°±ä¼šå½¢æˆä¸€ç§å›ºå®šçš„æ€ç»´ä¹ æƒ¯ï¼Œæ¯åˆ°è¿™ä¸ªç‚¹å°±ä¼šè§‰å¾—è‡ªå·±è¦ç¡è§‰äº†ã€‚</p><h2 id="ä¸‰ã€ç¡å‰åŠå°æ—¶ä¸ç¢°æ‰‹æœº"><a href="#ä¸‰ã€ç¡å‰åŠå°æ—¶ä¸ç¢°æ‰‹æœº" class="headerlink" title="ä¸‰ã€ç¡å‰åŠå°æ—¶ä¸ç¢°æ‰‹æœº"></a>ä¸‰ã€ç¡å‰åŠå°æ—¶ä¸ç¢°æ‰‹æœº</h2><p>ä½ å¯ä»¥åœ¨ç¡å‰åŠå°æ—¶è®¾ç½®ä¸€ä¸ªé—¹é’Ÿæˆ–è€…è®¾ç½®æ‰‹æœºè‡ªåŠ¨å…³æœºï¼Œç„¶åå°†æ‰‹æœºæ”¾åœ¨ç¦»ä½ å¾ˆè¿œçš„åœ°æ–¹ï¼Œæ§åˆ¶ä½ æƒ³ç»§ç»­ç©ä¸‹å»çš„æ¬²æœ›ã€‚</p><p>ä¹Ÿå¯ä»¥åœ¨åºŠä¸Šå‘å‘†ã€å†¥æƒ³ï¼Œè®©å¤§è„‘å¹³é™èˆ’ç¼“ä¸‹æ¥ï¼Œè¿™æ ·ä½ å°±ä¼šæ…¢æ…¢å…¥ç¡ã€‚</p><h2 id="å››ã€ç¡å‰ä¸èƒ¡æ€ä¹±æƒ³"><a href="#å››ã€ç¡å‰ä¸èƒ¡æ€ä¹±æƒ³" class="headerlink" title="å››ã€ç¡å‰ä¸èƒ¡æ€ä¹±æƒ³"></a>å››ã€ç¡å‰ä¸èƒ¡æ€ä¹±æƒ³</h2><p>ç¡è§‰å‰ä¸è¦èƒ¡æ€ä¹±æƒ³ï¼Œå®¹æ˜“æ‰°ä¹±å¿ƒæ™ºï¼Œæ‰°ä¹±å¤§è„‘</p><p>ç¡å‰æƒ³ä¸€äº›å¯¼è‡´å¿ƒæƒ…å¾ˆä¸å¥½ï¼Œæˆ–è€…å¤ªå…´å¥‹çš„äº‹æƒ…ï¼Œæƒ…ç»ªå¤ªè¿‡æ¿€åŠ¨ä¼šå¯¼è‡´å¿ƒæƒ…éš¾ä»¥å¹³é™ï¼Œé™¤äº†éš¾ä»¥å…¥ç¡å¤–ï¼Œè€Œä¸”è¿˜ä¼šæœ‰å¤šæ¢¦ã€ç¡ä¸å®‰ç¨³çš„çŠ¶å†µã€‚</p><p>æ‰€ä»¥ç¡å‰ä¸€å®šä¸è¦èƒ¡æ€ä¹±æƒ³ã€‚</p><h2 id="äº”ã€æ¯å¤©æ—©ç‚¹èµ·åºŠ"><a href="#äº”ã€æ¯å¤©æ—©ç‚¹èµ·åºŠ" class="headerlink" title="äº”ã€æ¯å¤©æ—©ç‚¹èµ·åºŠ"></a>äº”ã€æ¯å¤©æ—©ç‚¹èµ·åºŠ</h2><p>æƒ³è¦æ—©èµ·çš„è¯ï¼Œé¦–å…ˆæˆ‘ä»¬è¦æ—©ç¡ï¼Œç»™è‡ªå·±å®šä¸€ä¸ªæ—©èµ·çš„ç›®æ ‡ï¼Œé€¼ç€è‡ªå·±æ—©ç‚¹ç¡ã€‚å‡ å¤©ä¸‹æ¥å°±èƒ½å¤Ÿå…»æˆæ—©ç¡çš„ä¹ æƒ¯</p><p>æ—©ä¸Šèµ·å¾—æ—©ï¼Œå†åŠ ä¸Šå·¥ä½œå¿™ç¢Œäº†ä¸€å¤©ï¼Œæ™šä¸Šè‡ªç„¶ä¹Ÿä¼šæ„Ÿåˆ°ç‰¹åˆ«çš„ç´¯ï¼Œç‰¹åˆ«çš„å›°ï¼Œä¹Ÿå°±èƒ½å¤Ÿä¿ƒä½¿ä½ æ—©ç‚¹å…¥ç¡ã€‚</p><h2 id="å…­ã€ç™½å¤©ä¸è¦ç¡å¤ªå¤š"><a href="#å…­ã€ç™½å¤©ä¸è¦ç¡å¤ªå¤š" class="headerlink" title="å…­ã€ç™½å¤©ä¸è¦ç¡å¤ªå¤š"></a>å…­ã€ç™½å¤©ä¸è¦ç¡å¤ªå¤š</h2><p>æœ‰äº›äººçš„ç”Ÿç‰©é’Ÿæ˜¯å¤„äºä¸€ç§å®Œå…¨ç´Šä¹±çš„çŠ¶æ€ï¼Œç™½å¤©ç¡å¾ˆé•¿çš„æ—¶é—´ï¼Œæ™šä¸Šä¸ç¡ï¼Œç”šè‡³å®Œå…¨çš„æ˜¼å¤œé¢ å€’ã€‚è¿™ç§ä¸è‰¯çš„ä½œæ¯ä¹ æƒ¯å¯¹èº«ä½“å¥åº·çš„å½±å“å¾ˆå¤§ï¼Œæ ¹æœ¬æ²¡æœ‰åŠæ³•è®©äººå…»æˆæ—©ç¡æ—©èµ·çš„ä½œæ¯ä¹ æƒ¯ã€‚</p><p>å‡ºç°è¿™äº›é—®é¢˜è¦åŠæ—¶çš„è°ƒæ•´ï¼Œé¦–å…ˆå°±è¦ç¼©çŸ­ç™½å¤©ç¡è§‰çš„æ—¶é—´ï¼Œå¦‚æœä¸­åˆç‰¹åˆ«çš„å›°ï¼Œç¡åŠä¸ªå°æ—¶çš„åˆè§‰å°±å¯ä»¥äº†ï¼ŒåŠä¸ªå°æ—¶è¶³å¤Ÿè®©äººç²¾ç¥æ¢å¤ã€‚</p><p>å¦‚æœç¡å¾—æ—¶é—´è¿‡é•¿ï¼Œå°±ä¼šè¶Šç¡è¶Šå›°ï¼Œä¸€ç¡å°±æ˜¯å‡ ä¸ªå°æ—¶ã€‚</p><h2 id="ä¸ƒã€ä¸è¦å¼€ç€ç¯ç¡è§‰"><a href="#ä¸ƒã€ä¸è¦å¼€ç€ç¯ç¡è§‰" class="headerlink" title="ä¸ƒã€ä¸è¦å¼€ç€ç¯ç¡è§‰"></a>ä¸ƒã€ä¸è¦å¼€ç€ç¯ç¡è§‰</h2><p>ç°å®ç”Ÿæ´»ä¸­å¾ˆå¤šäººç¼ºä¹å®‰å…¨æ„Ÿï¼Œæ™šä¸Šæ€»æ˜¯å¼€ç€ç¯ç¡è§‰ï¼Œå®é™…ä¸Šæ­£æ˜¯å› ä¸ºè¿™æ ·çš„ç¡çœ ä¹ æƒ¯ï¼Œè®©è‡ªå·±è¿Ÿè¿Ÿæ²¡æœ‰åŠæ³•è°ƒæ•´ç”Ÿç‰©é’Ÿã€‚</p><p>å…‰çº¿æ˜¯ä¼šå½±å“åˆ°äººçš„ç”Ÿç‰©é’Ÿçš„ï¼Œä¼šè®©äººå…¥ç¡çš„æ—¶é—´å˜æ…¢ã€‚å½“ç„¶ï¼Œä¸ä»…ä¸èƒ½å¼€ç€ç¯ç¡è§‰ï¼Œä¹Ÿä¸èƒ½ç©æ‰‹æœºï¼Œä¸ç„¶æ‰‹æœºçš„å…‰çº¿ä¾ç„¶ä¼šå½±å“åˆ°äººçš„ç¡çœ ã€‚</p><h2 id="å…«ã€é«˜æ•ˆå®Œæˆå½“æ—¥çš„äº‹"><a href="#å…«ã€é«˜æ•ˆå®Œæˆå½“æ—¥çš„äº‹" class="headerlink" title="å…«ã€é«˜æ•ˆå®Œæˆå½“æ—¥çš„äº‹"></a>å…«ã€é«˜æ•ˆå®Œæˆå½“æ—¥çš„äº‹</h2><p>æ‰€è°“â€œä»Šæ—¥äº‹ï¼Œä»Šæ—¥æ¯•â€ï¼Œè¯´çš„å°±æ˜¯è®©æˆ‘ä»¬å½“å¤©å®Œæˆå½“å¤©çš„ä»»åŠ¡ï¼Œä¸è¦æ‹–æ‹–æ‹‰æ‹‰ã€‚å› ä¸ºæœ‰äº›äººæœ‰æ‹–å»¶ç—‡ï¼Œå–œæ¬¢æŠŠäº‹æƒ…æ‹–åˆ°å¾ˆæ™šå»åšï¼Œé‚£ä¹ˆä½ ç¡è§‰çš„æ—¶é—´è‡ªç„¶å°±ä¼šè¢«ä½ çš„æ‹–æ‹‰å æ®ä¸€å¤§éƒ¨åˆ†äº†ã€‚<br>æ‰€ä»¥ï¼Œé«˜æ•ˆç‡çš„å»å®Œæˆä»»åŠ¡ï¼Œæå‰æŠŠäº‹æƒ…åšå¥½ï¼Œä¸ºä½ çš„ç¡çœ ç•™å‡ºå¿…è¦çš„æ—¶é—´ï¼Œç›¸ä¿¡ä½ å¯ä»¥æ—©æ—©çš„è¿›å…¥æ¢¦ä¹¡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¹ æƒ¯å…»æˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åºŸæ‰ä¸€ä¸ªå¤§å­¦ç”Ÿ</title>
      <link href="/posts/46707.html"/>
      <url>/posts/46707.html</url>
      
        <content type="html"><![CDATA[<p>æ²¾æŸ“ä¸Šè¿™å‡ æ¡ï¼ˆå°¤å…¶æœ€å 1 æ¡ï¼‰ï¼ŒåŸºæœ¬ç®—æ˜¯çˆ¹å¦ˆç™½å…»ã€‚</p><ol><li>æ¥å—ç¢ç‰‡ä¿¡æ¯ï¼Œæ‹’ç»æ·±åº¦æ€è€ƒ</li><li>æ²‰è¿·äºè¿…é€Ÿè·å¾—æˆå°±æ„Ÿçš„äº‹</li><li>æ¯«æ— æ„ä¹‰çš„ç†¬å¤œä¸è‡ªæˆ‘é€æ”¯</li><li>æ— æ³•ä¸“æ³¨åšä¸€ä»¶äº‹</li><li>ä¸§å¤±ç›®æ ‡å’Œæ–¹å‘</li><li>æ½œæ„è¯†ä¸­è®¤ä¸ºäººç”Ÿè¿˜æ²¡çœŸæ­£å¼€å§‹ã€‚</li></ol><h2 id="1ã€æ¥å—ç¢ç‰‡ä¿¡æ¯ï¼Œæ‹’ç»æ·±åº¦æ€è€ƒ"><a href="#1ã€æ¥å—ç¢ç‰‡ä¿¡æ¯ï¼Œæ‹’ç»æ·±åº¦æ€è€ƒ" class="headerlink" title="1ã€æ¥å—ç¢ç‰‡ä¿¡æ¯ï¼Œæ‹’ç»æ·±åº¦æ€è€ƒ"></a>1ã€æ¥å—ç¢ç‰‡ä¿¡æ¯ï¼Œæ‹’ç»æ·±åº¦æ€è€ƒ</h2><p>æ¯å¤©ä¸åœåœ°åˆ·çŸ¥ä¹ã€åˆ·å¾®åšã€åˆ·æŠ–éŸ³ã€åˆ·æœ‹å‹åœˆï¼Œè¢«åŠ¨æ¥å—ä¿¡æ¯å¯†åº¦ä½çš„èµ„è®¯ï¼Œå¦‚å¨±ä¹å…«å¦ã€èŠ±è¾¹æ–°é—»ã€æ²™é›•è§†é¢‘ï¼Œç½‘ç»¼çƒ­å‰§ç­‰æ— é¡»åŠ¨è„‘çš„ä¸œè¥¿ã€‚</p><p>å¹¶ä¸”å¯¹è¿™äº›ç¢ç‰‡åŒ–çš„ä¿¡æ¯ï¼š<strong>åªçŒå…¥ï¼Œä¸è¾“å‡ºã€‚åŒæ¶æ·±åº¦æ€è€ƒï¼Œæ‹’ç»æ¢³ç†ä¸æ€»ç»“çŸ¥è¯†ï¼Œæ²¡æœ‰èƒ½å¤Ÿå†…åŒ–æˆä¸ºè‡ªå·±çš„ä»·å€¼ä½“ç³»ï¼Œå¹¶ä¸”è¾“å‡ºç‹¬ç‰¹çš„è§‚ç‚¹è§è§£ã€‚</strong></p><p><strong>ä»…å‡­è¿™æ¡ï¼Œæœ‰è¢«æˆ³ä¸­çš„è¯·åŒå‡»å±å¹•ï¼</strong></p><h2 id="2ã€æ²‰è¿·äºè¿…é€Ÿè·å¾—æˆå°±æ„Ÿçš„äº‹"><a href="#2ã€æ²‰è¿·äºè¿…é€Ÿè·å¾—æˆå°±æ„Ÿçš„äº‹" class="headerlink" title="2ã€æ²‰è¿·äºè¿…é€Ÿè·å¾—æˆå°±æ„Ÿçš„äº‹"></a>2ã€æ²‰è¿·äºè¿…é€Ÿè·å¾—æˆå°±æ„Ÿçš„äº‹</h2><p>éšä¾¿ä¸¾ä¸¤ä¸ªæ —å­ï¼šæ—¥å¤œæµ¸æ³¡åœ¨ç½‘æ¸¸ä¸­ï¼Œé€šè¿‡è™šæ‹Ÿçš„èƒœåˆ©èµ¢å¾—æˆå°±æ„Ÿï¼Œå¯»æ±‚æ›´é«˜æ®µä½æ¥è·å¾—è‡ªæˆ‘è®¤åŒã€‚äº¦æˆ–æ˜¯ <strong>ä¸åœé’»ç ”å¦‚ä½•æ±‚æ¬¢ï¼Œä»¥æš§æ˜§å¯¹è±¡çš„äººæ•°å½“åšè‡ªå·±çš„å‹‹ç« </strong> ã€‚</p><p>ä¹…è€Œä¹…ä¹‹ï¼Œå¯¹äº <strong>éœ€è¦é•¿æœŸæŠ•å…¥æ¥è·å¾—æ›´é«˜å›æŠ¥çš„äº‹æƒ…äº§ç”ŸåŒæ¶ã€‚</strong>  æ¯”å¦‚æ¯å¤©è¿åŠ¨ã€çœ‹ä¹¦å†™ä½œã€ä¸“ä¸šèƒ½åŠ›çš„æå‡ã€å¯¹æœªæ¥çš„è§„åˆ’ç­‰ç­‰ã€‚</p><h2 id="3ã€æ¯«æ— æ„ä¹‰çš„ç†¬å¤œä¸è‡ªæˆ‘é€æ”¯"><a href="#3ã€æ¯«æ— æ„ä¹‰çš„ç†¬å¤œä¸è‡ªæˆ‘é€æ”¯" class="headerlink" title="3ã€æ¯«æ— æ„ä¹‰çš„ç†¬å¤œä¸è‡ªæˆ‘é€æ”¯"></a>3ã€æ¯«æ— æ„ä¹‰çš„ç†¬å¤œä¸è‡ªæˆ‘é€æ”¯</h2><p>è§è¿‡å¤ªå¤šçš„äººï¼Œæ˜æ˜æ²¡æœ‰ä»€ä¹ˆäº‹ï¼Œæ‰‹æœºåˆ·ç€åˆ·ç€ï¼Œå°±åˆ°å‡Œæ™¨ä¸¤ç‚¹äº†ã€‚åˆ°äº†ç¬¬äºŒå¤©æ—©ä¸Šï¼Œ<strong>å¼€å§‹æŒ£æ‰åœ¨ã€Œæ‘†è„±å›°æ„å»ä¸Šè¯¾ã€ä¸ã€Œæ—·è¯¾ç»§ç»­ç¡å¤§è§‰ã€çš„ä¸¤éš¾é€‰æ‹©ä¸­ã€‚</strong></p><p>æœ€åæ¯«æ— æ‚¬å¿µé€‰æ‹©äº†åè€…ã€‚æ—¥å¤ä¸€æ—¥çš„ä¸è‰¯ä½œæ¯ä¸­ï¼Œæ„ˆå‘æ„å¿—æ¶ˆæ²‰ã€æ”¾çºµè‡ªå·±ï¼Œæœ€åä¸ç®¡åšä»€ä¹ˆäº‹ï¼Œéƒ½è§‰å¾—æä¸èµ·åŠ²æˆ–è€…æ—©æ—©æ”¾å¼ƒã€‚å› ä¸º<strong>å³æ—¶è¯±æƒ‘æ¯”åšæŒå®¹æ˜“å¾—å¤š</strong> ã€‚</p><h2 id="4ã€æ— æ³•ä¸“æ³¨åšä¸€ä»¶äº‹"><a href="#4ã€æ— æ³•ä¸“æ³¨åšä¸€ä»¶äº‹" class="headerlink" title="4ã€æ— æ³•ä¸“æ³¨åšä¸€ä»¶äº‹"></a>4ã€æ— æ³•ä¸“æ³¨åšä¸€ä»¶äº‹</h2><p><strong>çœ¼é«˜æ‰‹ä½æ˜¯å½“ä»£å¤§å­¦ç”Ÿçš„é€šç—…ã€‚</strong>  å›¾ä¹¦é¦†çœ‹ 15 åˆ†é’Ÿä¹¦ï¼Œå¼€å§‹æå‡ºæ‰‹æœºä¸åœåœ°åˆ·ã€‚åˆšåˆ°è¿åŠ¨åœºï¼Œå¼€å§‹æå‡ºæ‰‹æœºè‡ªæ‹ã€‚å­¦æœŸæœ«è¦è€ƒè¯•äº†ï¼Œå¤ä¹ ä¸ä¸‹å»å°±ç­‰ç€è£¸è€ƒâ€¦</p><p>æ˜å¤©çš„äº‹æ˜å¤©å†è¯´ï¼Œä¸‹å‘¨çš„äº‹ä¸‹å‘¨å†çœ‹ï¼Œåæ­£èƒ½æ‹–å¤šä¹…ç®—å¤šä¹…ï¼Œæœ€å¥½æ‹–åˆ°ä¸ç”¨å¹²ã€‚</p><h2 id="5ã€ä¸§å¤±ç›®æ ‡å’Œæ–¹å‘"><a href="#5ã€ä¸§å¤±ç›®æ ‡å’Œæ–¹å‘" class="headerlink" title="5ã€ä¸§å¤±ç›®æ ‡å’Œæ–¹å‘"></a>5ã€ä¸§å¤±ç›®æ ‡å’Œæ–¹å‘</h2><p>ä¸è®°å¾—æ˜å¤©ä¸Šä»€ä¹ˆè¯¾ã€ä¸åˆ¶å®šæœ¬å­¦æœŸçš„å­¦ä¹ è®¡åˆ’ã€ä¸å»äº†è§£ä¸“ä¸šæœªæ¥çš„å°±ä¸šæ–¹å‘ã€ä¸å»åŸ¹å…»è‡ªå·±çš„å…´è¶£çˆ±å¥½ï¼Œä¸å¯¹è‡ªå·±èŒä¸šç”Ÿæ¶¯åšå‡†å¤‡å’ŒæŠ•èµ„ã€‚</p><p><strong>æ´»ç€ï¼Œåªæ˜¯æƒ¯æ€§ä½¿ç„¶ã€‚</strong>  è¿‡ä¸€å¤©ç®—ä¸€å¤©ï¼Œåæ­£èº«è¾¹çš„äººéƒ½è¿™æ ·ï¼Œéšæ³¢é€æµç›´åˆ°å¤©è’åœ°è€ã€‚</p><h2 id="6ã€æ½œæ„è¯†ä¸­è®¤ä¸ºäººç”Ÿè¿˜æ²¡çœŸæ­£å¼€å§‹ã€‚"><a href="#6ã€æ½œæ„è¯†ä¸­è®¤ä¸ºäººç”Ÿè¿˜æ²¡çœŸæ­£å¼€å§‹ã€‚" class="headerlink" title="6ã€æ½œæ„è¯†ä¸­è®¤ä¸ºäººç”Ÿè¿˜æ²¡çœŸæ­£å¼€å§‹ã€‚"></a>6ã€æ½œæ„è¯†ä¸­è®¤ä¸ºäººç”Ÿè¿˜æ²¡çœŸæ­£å¼€å§‹ã€‚</h2><p> <strong>ã€Œæˆ‘è¿˜åªæ˜¯ä¸ªå­¦ç”Ÿï¼Œè¿˜ä¸ç”¨æƒ³å¤ªå¤šã€‚ã€è¿™æ ·çš„æ„è¯†å­˜åœ¨äºç»å¤§å¤šæ•°äººå½“ä¸­ã€‚</strong>  ä»è¿™ä¸ªæƒ³æ³•å¼€å§‹ï¼Œä¼šå»¶å±•å‡ºå¾ˆå¤šé”™è¯¯çš„æ¦‚å¿µã€‚</p><ul><li>æˆ‘è¿˜æœ‰å¤§æŠŠå¤§æŠŠçš„æ—¶é—´ã€‚</li><li>æœªæ¥å¤ªé¥è¿œï¼Œæ—¶é—´åˆ°äº†ä¸€åˆ‡è‡ªä¼šæ­¥ä¸Šæ­£è½¨ã€‚</li><li>è‡ªå·±æ‹¥æœ‰æ— é™çš„å¯èƒ½æ€§ã€‚</li><li>å¹»æƒ³ä»¥åä¸€å®šéå¸¸å‰å®³ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> æœˆæ¹–ç¬”è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯»ä¹¦æ€è€ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3. SpringBoot æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯</title>
      <link href="/posts/43922.html"/>
      <url>/posts/43922.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="1-æ•´åˆJunit"><a href="#1-æ•´åˆJunit" class="headerlink" title="1. æ•´åˆJunit"></a>1. æ•´åˆJunit</h1><p>ä¸€èˆ¬æ¥è¯´æ˜¯ä¸éœ€è¦è¿›è¡Œå¤„ç†çš„ ï¼Œå› ä¸ºåœ¨åˆ›å»ºSpringBoot å·¥ç¨‹æ—¶ ï¼Œä¼šè‡ªåŠ¨æ•´åˆ<code>junit</code>â€‹çš„</p><p>è¦è¯´æ€ä¹ˆé…ç½®çš„è¯ï¼Ÿä¹Ÿå¯ä»¥å†™ä¸€ä¸‹ç›¸å…³çš„é…ç½®ï¼šä»¥ä¸‹å°±æ˜¯SpringBoot æ•´åˆ Junit ç›¸å…³æ­¥éª¤</p><ol><li><p>å¯¼å…¥ç›¸å…³ä¾èµ–</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å†™ <code>@SpringBootTest</code>â€‹æ³¨è§£ ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>classes</code>â€‹ å±æ€§æŒ‡å®š<span data-type="text" style="color: var(--b3-font-color6);">å¼•å¯¼ç±»çš„å­—èŠ‚</span>ç å¯¹è±¡ã€‚å¦‚ <code>@SpringBootTest(classes = Springboot07TestApplication.class)</code>â€‹</p><p> <img src="https://i0.hdslb.com/bfs/article/875b4964ffbabf187fd55cebb053e787645325325.png" alt="image">â€‹</p></li><li><p>æµ‹è¯•ç»“æœæ˜¾ç¤ºï¼š</p><p> <img src="https://i0.hdslb.com/bfs/article/5fcb431bb7d30f6cd60054736a668602645325325.png" alt="image">â€‹</p></li></ol><h1 id="2-æ•´åˆMyBatis"><a href="#2-æ•´åˆMyBatis" class="headerlink" title="2. æ•´åˆMyBatis"></a>2. æ•´åˆMyBatis</h1><p>æ•´åˆæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆ›å»ºSpringBoot å·¥ç¨‹çš„æ—¶å€™ ï¼Œå‹¾é€‰SQL ä¸‹çš„ <code>MyBatis Framework</code>â€‹ å’Œ <code>MySQl Dirver</code>â€‹ ä¾èµ–</li><li>åœ¨ <code>application.yml</code>â€‹ æ–‡ä»¶ä¸­å†™å…¥æ•°æ®åº“è¿æ¥ä¿¡æ¯</li><li>ç¼–å†™ä»£ç å¹¶è¿›è¡Œæµ‹è¯•</li></ol><hr><p>ç›¸å…³ä¾èµ–å¦‚ä¸‹ï¼šè¿™é‡Œå¤åˆ¶æ‰€æœ‰ä¾èµ–çš„åŸå› æ˜¯å› ä¸ºæˆ‘åœ¨æ•´åˆçš„æ—¶å€™ ï¼Œå› ä¸ºä¾èµ–çš„åŸå› æŠ¥é”™äº†</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.north<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot-008-mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>springboot-008-mybatis<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">description</span>&gt;</span>springboot-008-mybatis<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.28<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>application.yml</code>â€‹æ–‡ä»¶ä¸­ç¼–å†™æ•°æ®åº“è¿æ¥ä¿¡æ¯</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?erverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure><p>ç¼–å†™<code>æ¥å£</code>â€‹è¿›è¡Œæ•°æ®æµ‹è¯• (è¿™é‡Œå†™çš„æ—¶å€™ ï¼Œæˆ‘å±…ç„¶è¿˜æŠŠSQLè¯­å¥ç»™å†™é”™äº†ğŸ˜‚ğŸ˜‚ğŸ˜‚)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> North</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2024/5/5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from tbl_book where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    Book <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>æµ‹è¯•ç±»</code>â€‹ä¸­è¿›è¡Œæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot008MybatisApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookDao.getById(<span class="number">2</span>);</span><br><span class="line">System.out.println(book);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/dece686f84007dd93a808b318ec283a2645325325.png" alt="image">â€‹</p><h1 id="3-æ•´åˆMyBatis-Plus"><a href="#3-æ•´åˆMyBatis-Plus" class="headerlink" title="3. æ•´åˆMyBatis-Plus"></a>3. æ•´åˆMyBatis-Plus</h1><blockquote><p>è¿™é‡Œè¯´ä¸€ä¸‹MyBatis-Plus ä¸ MyBatis çš„åŒºåˆ«</p><ul><li>å¯¼å…¥åæ ‡ä¸åŒ</li><li>æ•°æ®å±‚å®ç°ç®€åŒ–</li></ul></blockquote><p>â€</p><ul><li><p>æ•´åˆMyBatis-Plusä¾èµ–çš„æ­¥éª¤å¦‚ä¸‹</p><ul><li>åˆ›å»ºSpringBoot å·¥ç¨‹çš„æ—¶å€™ ï¼Œå‹¾é€‰SQL ä¸‹çš„ <code>MySQl Dirver</code>â€‹ ä¾èµ– ï¼Œå› ä¸ºMyBatis-Plusæ˜¯å›½äººå¼€å‘çš„å¹¶æ²¡æœ‰åœ¨å®˜æ–¹ä¸­æœ‰æ‰€æ˜¾ç¤º</li><li>æ‰‹å·¥æ·»åŠ MyBatis-Pluså¯¹åº”çš„starter</li><li>æ•°æ®å±‚æ¥å£ä½¿ç”¨<code>BaseMapper</code>â€‹ç®€åŒ–å¼€å‘</li></ul></li></ul><hr><p>æ‰‹å·¥æ·»åŠ MyBatis-Pluså¯¹åº”çš„starter</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-spring-boot3-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>application.yml</code>â€‹æ–‡ä»¶ä¸­ç¼–å†™æ•°æ®åº“è¿æ¥ä¿¡æ¯</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?erverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tbl_</span></span><br></pre></td></tr></table></figure><p>æ•°æ®å±‚æ¥å£ä½¿ç”¨<code>BaseMapper</code>â€‹ç®€åŒ–å¼€å‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> North</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2024/5/5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Book&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot010TestApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(bookMapper.selectById(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/0a270aa0320235dd7e9f44f9ee1f186f645325325.png" alt="image">â€‹</p><h1 id="4-æ•´åˆDruid"><a href="#4-æ•´åˆDruid" class="headerlink" title="4. æ•´åˆDruid"></a>4. æ•´åˆDruid</h1><p>â€</p><ul><li><p>æ•´åˆDruidçš„æ­¥éª¤</p><ul><li>æ•´åˆ<code>Druid</code>â€‹éœ€è¦å¯¼å…¥Druidå¯¹åº”çš„<code>starter</code>â€‹</li><li>æ ¹æ®Druidæä¾›çš„é…ç½®æ–¹å¼è¿›è¡Œé…ç½®</li></ul></li><li><p>æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯é€šç”¨æ–¹å¼</p><ul><li>å¯¼å…¥å¯¹åº”çš„<code>starter</code>â€‹</li><li>æ ¹æ®æä¾›çš„é…ç½®æ ¼å¼ ï¼Œé…ç½®éé»˜è®¤å€¼å¯¹åº”çš„é…ç½®é¡¹</li></ul></li></ul><hr><p>å¯¼å…¥Druidç›¸å…³çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid-spring-boot-starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®ymlæ–‡ä»¶ : <code>è¿™é‡Œæ³¨æ„ä¸‹ druid çš„ä½ç½®</code>â€‹</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?erverTimezone=UTC</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure><p>å…¶ä½™çš„æ­¥éª¤å’Œæ•´åˆMyBatisæ­¥éª¤æƒ³åŒ</p><p>ç»“æœæ¼”ç¤ºï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/df52c943cf96bc3c581144fe793df04c645325325.png" alt="image">â€‹</p><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBootåŸºç¡€ç¯‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2. åŸºç¡€é…ç½®</title>
      <link href="/posts/37010.html"/>
      <url>/posts/37010.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="1-é…ç½®æ–‡ä»¶æ ¼å¼"><a href="#1-é…ç½®æ–‡ä»¶æ ¼å¼" class="headerlink" title="1. é…ç½®æ–‡ä»¶æ ¼å¼"></a>1. é…ç½®æ–‡ä»¶æ ¼å¼</h1><h2 id="1-1-é…ç½®æ–‡ä»¶è‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±è§£å†³æ–¹æ¡ˆ"><a href="#1-1-é…ç½®æ–‡ä»¶è‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1.1 é…ç½®æ–‡ä»¶è‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±è§£å†³æ–¹æ¡ˆ"></a>1.1 é…ç½®æ–‡ä»¶è‡ªåŠ¨æç¤ºåŠŸèƒ½æ¶ˆå¤±è§£å†³æ–¹æ¡ˆ</h2><p><img src="https://i0.hdslb.com/bfs/article/2f6101c10c806765228ce6b31fb3ce8e645325325.png" alt="image">â€‹</p><h2 id="1-2-SpringBooté…ç½®æ–‡ä»¶åŠ è½½é¡ºåºï¼ˆäº†è§£ï¼‰"><a href="#1-2-SpringBooté…ç½®æ–‡ä»¶åŠ è½½é¡ºåºï¼ˆäº†è§£ï¼‰" class="headerlink" title="1.2 SpringBooté…ç½®æ–‡ä»¶åŠ è½½é¡ºåºï¼ˆäº†è§£ï¼‰"></a>1.2 SpringBooté…ç½®æ–‡ä»¶åŠ è½½é¡ºåºï¼ˆäº†è§£ï¼‰</h2><p>application.properties  &gt;  application.yml  &gt;  application.yaml</p><h2 id="1-3-æ³¨æ„äº‹é¡¹"><a href="#1-3-æ³¨æ„äº‹é¡¹" class="headerlink" title="1.3 æ³¨æ„äº‹é¡¹"></a>1.3 æ³¨æ„äº‹é¡¹</h2><p>SpringBootæ ¸å¿ƒé…ç½®æ–‡ä»¶åä¸º<span data-type="text" style="background-color: var(--b3-font-background6);">application</span></p><p>SpringBootå†…ç½®å±æ€§è¿‡å¤šï¼Œä¸”æ‰€æœ‰å±æ€§é›†ä¸­åœ¨ä¸€èµ·ä¿®æ”¹ï¼Œ<span data-type="text" style="background-color: var(--b3-font-background13);">åœ¨ä½¿ç”¨æ—¶ï¼Œé€šè¿‡æç¤ºé”® + å…³é”®å­—ä¿®æ”¹å±æ€§</span></p><p>ä¸åŒé…ç½®æ–‡ä»¶ä¸­ç›¸åŒé…ç½®æŒ‰ç…§åŠ è½½ä¼˜å…ˆçº§ç›¸äº’è¦†ç›– ï¼Œä¸åŒé…ç½®æ–‡ä»¶ä¸­ä¸å®¹é…ç½®å…¨éƒ¨ä¿ç•™</p><h1 id="2-yaml"><a href="#2-yaml" class="headerlink" title="2. yaml"></a>2. yaml</h1><h2 id="2-1-yaml-çš„ç®€å•è¯´æ˜"><a href="#2-1-yaml-çš„ç®€å•è¯´æ˜" class="headerlink" title="2.1 yaml çš„ç®€å•è¯´æ˜"></a>2.1 yaml çš„ç®€å•è¯´æ˜</h2><ul><li><p>YAMLï¼ˆYAML Ainâ€™t Markup Languageï¼‰ï¼Œä¸€ç§æ•°æ®åºåˆ—åŒ–æ ¼å¼</p></li><li><p>ä¼˜ç‚¹ï¼š</p><ul><li>å®¹æ˜“é˜…è¯»</li><li>å®¹æ˜“ä¸è„šæœ¬è¯­è¨€äº¤äº’</li><li>ä»¥æ•°æ®ä¸ºæ ¸å¿ƒï¼Œé‡æ•°æ®è½»æ ¼å¼</li></ul></li><li><p>YAMLæ–‡ä»¶æ‰©å±•å</p><ul><li><span data-type="text" style="background-color: var(--b3-font-background10);">.ymlï¼ˆä¸»æµï¼‰</span></li><li>.yaml</li></ul></li></ul><h2 id="2-2-yaml-è¯­æ³•è§„åˆ™"><a href="#2-2-yaml-è¯­æ³•è§„åˆ™" class="headerlink" title="2.2 yaml è¯­æ³•è§„åˆ™"></a>2.2 yaml è¯­æ³•è§„åˆ™</h2><ul><li>å¤§å°å†™æ•æ„Ÿ</li><li>å±æ€§å±‚çº§å…³ç³»ä½¿ç”¨å¤šè¡Œæè¿°ï¼Œæ¯è¡Œç»“å°¾ä½¿ç”¨å†’å·ç»“æŸ</li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œ<span data-type="text" style="background-color: var(--b3-font-background11);">åŒå±‚çº§å·¦ä¾§å¯¹é½ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ï¼ˆä¸å…è®¸ä½¿ç”¨Tabé”®ï¼‰</span></li><li><span data-type="text" style="background-color: var(--b3-font-background13);">å±æ€§å€¼å‰é¢æ·»åŠ ç©ºæ ¼</span>ï¼ˆå±æ€§åä¸å±æ€§å€¼ä¹‹é—´ä½¿ç”¨å†’å·+ç©ºæ ¼ä½œä¸ºåˆ†éš”ï¼‰</li><li><code>#</code>â€‹ è¡¨ç¤ºæ³¨é‡Š</li><li><span data-type="text" style="background-color: var(--b3-font-background11);">æ ¸å¿ƒè§„åˆ™ï¼šæ•°æ®å‰é¢è¦åŠ ç©ºæ ¼ä¸å†’å·éš”å¼€</span></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">enterprise:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">north</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">19</span></span><br><span class="line">  <span class="attr">subjects:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">java</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">å¤§æ•°æ®</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">å‰ç«¯</span></span><br></pre></td></tr></table></figure><h2 id="2-3-yaml-æ•°ç»„æ•°æ®"><a href="#2-3-yaml-æ•°ç»„æ•°æ®" class="headerlink" title="2.3 yaml æ•°ç»„æ•°æ®"></a>2.3 yaml æ•°ç»„æ•°æ®</h2><p>æ•°ç»„æ•°æ®åœ¨æ•°æ®ä¹¦å†™ä½ç½®çš„ä¸‹æ–¹ä½¿ç”¨å‡å·ä½œä¸ºæ•°æ®å¼€å§‹ç¬¦å·ï¼Œæ¯è¡Œä¹¦å†™ä¸€ä¸ªæ•°æ®ï¼Œå‡å·ä¸æ•°æ®é—´ç©ºæ ¼åˆ†éš”</p><h2 id="2-4-yaml-æ•°æ®è¯»å–"><a href="#2-4-yaml-æ•°æ®è¯»å–" class="headerlink" title="2.4 yaml æ•°æ®è¯»å–"></a>2.4 yaml æ•°æ®è¯»å–</h2><ul><li><p>ç¬¬ä¸€ç§ï¼šä½¿ç”¨@Valueè¯»å–å•ä¸ªæ•°æ®ï¼Œ<span data-type="text" style="background-color: var(--b3-font-background5);">å±æ€§åå¼•ç”¨æ–¹å¼ï¼š${ä¸€çº§å±æ€§å.äºŒçº§å±æ€§åâ€¦â€¦}</span></p><p><img src="https://i0.hdslb.com/bfs/article/3207157d7e860af41b606136831b720a645325325.png" alt="image">â€‹</p></li><li><p>ç¬¬äºŒç§ï¼šå°è£…å…¨éƒ¨æ•°æ®åˆ°Environmentå¯¹è±¡</p><p><img src="https://i0.hdslb.com/bfs/article/32d1bf01c758c3666b18ff51a7f5e23d645325325.png" alt="image">â€‹</p></li><li><p>ç¬¬ä¸‰ç§ï¼šè‡ªå®šä¹‰å¯¹è±¡å°è£…æŒ‡å®šæ•°æ®</p><p><img src="https://i0.hdslb.com/bfs/article/e9f340b978d3566e1788c6d0c6e58369645325325.png" alt="image">â€‹</p></li></ul><p>â€</p><p><img src="https://i0.hdslb.com/bfs/article/a31a4857a36789c8319e832515a7d782645325325.png" alt="image">â€‹</p><h2 id="2-5-è‡ªå®šä¹‰å¯¹è±¡å°è£…æ•°æ®è­¦å‘Šè§£å†³æ–¹æ¡ˆ"><a href="#2-5-è‡ªå®šä¹‰å¯¹è±¡å°è£…æ•°æ®è­¦å‘Šè§£å†³æ–¹æ¡ˆ" class="headerlink" title="2.5 è‡ªå®šä¹‰å¯¹è±¡å°è£…æ•°æ®è­¦å‘Šè§£å†³æ–¹æ¡ˆ"></a>2.5 è‡ªå®šä¹‰å¯¹è±¡å°è£…æ•°æ®è­¦å‘Šè§£å†³æ–¹æ¡ˆ</h2><p><img src="https://i0.hdslb.com/bfs/article/7891f0aee58b5b68e17add078a7b461b645325325.png" alt="image">â€‹</p><h2 id="2-6-çŸ¥è¯†ç‚¹å°ç»“"><a href="#2-6-çŸ¥è¯†ç‚¹å°ç»“" class="headerlink" title="2.6 çŸ¥è¯†ç‚¹å°ç»“"></a>2.6 çŸ¥è¯†ç‚¹å°ç»“</h2><p>è¯»å–æ•°æ®ä¸‰ç§æ ¼å¼</p><ol><li>@Valueï¼ˆç›´æ¥è¯»å–ï¼‰</li><li>Environmentï¼ˆå°è£…åè¯»å–ï¼‰</li><li>å®ä½“ç±»å°è£…å±æ€§ï¼ˆå°è£…åè¯»å–ï¼‰</li></ol><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBootåŸºç¡€ç¯‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1. SpringBoot å…¥é—¨</title>
      <link href="/posts/41190.html"/>
      <url>/posts/41190.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="1-SpringBoot-ç®€ä»‹"><a href="#1-SpringBoot-ç®€ä»‹" class="headerlink" title="1. SpringBoot ç®€ä»‹"></a>1. SpringBoot ç®€ä»‹</h1><p>SpringBootæ˜¯ç”±Pivotalå›¢é˜Ÿæä¾›çš„å…¨æ–°æ¡†æ¶ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¼€å‘åŸºäº<code>Springçš„ã€ç‹¬ç«‹çš„ã€ç”Ÿäº§çº§çš„åº”ç”¨ç¨‹åºã€‚</code>â€‹</p><p>å…¶ä¸­SpringBootçš„å®˜ç½‘æ˜¯ï¼š<a href="https://docs.spring.io/spring-boot/docs/2.3.10.RELEASE/reference/html/" title="Spring Boot Reference Documentation">Spring Boot Reference Documentation</a></p><hr><p>SpringBootçš„ä¸»è¦ç›®æ ‡æ˜¯ï¼š</p><ul><li><p>ä¸ºæ‰€æœ‰Springå¼€å‘æä¾›æ›´å¿«çš„å…¥é—¨ä½“éªŒ</p></li><li><p>å¼€ç®±å³ç”¨ï¼Œæä¾›äº†è‡ªåŠ¨é…ç½®</p></li><li><p>æä¾›ä¸€ç³»åˆ—å¤§å‹é¡¹ç›®é€šç”¨çš„éåŠŸèƒ½æ€§ç‰¹æ€§</p><ul><li>å¤–éƒ¨åŒ–é…ç½®ã€åµŒå…¥å¼æœåŠ¡å™¨ã€å®‰å…¨æ€§ã€å¥åº·æ£€æŸ¥ã€æŒ‡æ ‡</li></ul></li><li><p>å®Œå…¨ä¸éœ€è¦ä»£ç ç”Ÿæˆï¼Œä¹Ÿä¸éœ€è¦XMLé…ç½®</p></li></ul><hr><p>æ³¨æ„ï¼šSpringBoot å¹¶ä¸æ˜¯SpringåŠŸèƒ½ä¸Šçš„å¢å¼ºï¼Œè€Œæ˜¯æä¾›äº†ä¸€ç§å¿«é€Ÿä½¿ç”¨Springçš„æ–¹å¼ã€‚</p><h1 id="2-SpringBootå…¥é—¨"><a href="#2-SpringBootå…¥é—¨" class="headerlink" title="2. SpringBootå…¥é—¨"></a>2. SpringBootå…¥é—¨</h1><h2 id="2-1-å…¥é—¨æ¡ˆä¾‹å¼€å‘æ­¥éª¤"><a href="#2-1-å…¥é—¨æ¡ˆä¾‹å¼€å‘æ­¥éª¤" class="headerlink" title="2.1 å…¥é—¨æ¡ˆä¾‹å¼€å‘æ­¥éª¤"></a>2.1 å…¥é—¨æ¡ˆä¾‹å¼€å‘æ­¥éª¤</h2><p><span data-type="text" style="background-color: var(--b3-font-background6);">è¿™é‡Œå…ˆé‡‡ç”¨çš„æ˜¯æ‰‹åŠ¨åˆ›å»ºçš„æ–¹å¼</span></p><ol><li><p>æ–°å»ºMavené¡¹ç›®</p></li><li><p>å¼•å…¥ä¾èµ–</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºå¼•å¯¼ç±»</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.north;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> North</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2024/5/2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¼€å‘æ§åˆ¶å™¨ç±»</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.north.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> North</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2024/5/2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/books&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;user save&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello springboot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œè‡ªåŠ¨ç”Ÿæˆçš„Applicationç±»</p><p> <img src="https://i0.hdslb.com/bfs/article/a50ae307d7964be596f8fba4d95e307f645325325.png" alt="image">â€‹</p><p> <img src="https://i0.hdslb.com/bfs/article/0ace12973112f2079efc1ac8b1f426b4645325325.png" alt="image">â€‹</p></li></ol><hr><h2 id="2-2-é€šè¿‡ideaéª¨æ¶è¿›è¡Œåˆ›å»º"><a href="#2-2-é€šè¿‡ideaéª¨æ¶è¿›è¡Œåˆ›å»º" class="headerlink" title="2.2 é€šè¿‡ideaéª¨æ¶è¿›è¡Œåˆ›å»º"></a>2.2 é€šè¿‡ideaéª¨æ¶è¿›è¡Œåˆ›å»º</h2><p><img src="https://i0.hdslb.com/bfs/article/fc5af52c91b44373d04787ae9cf7cf69645325325.png" alt="image">â€‹</p><h2 id="2-3-åŸºäºSpringBootå®˜ç½‘è¿›è¡Œåˆ›å»º"><a href="#2-3-åŸºäºSpringBootå®˜ç½‘è¿›è¡Œåˆ›å»º" class="headerlink" title="2.3 åŸºäºSpringBootå®˜ç½‘è¿›è¡Œåˆ›å»º"></a>2.3 åŸºäºSpringBootå®˜ç½‘è¿›è¡Œåˆ›å»º</h2><p><a href="https://start.springboot.io/"><code>å®˜ç½‘åœ°å€</code></a>â€‹</p><p><img src="https://i0.hdslb.com/bfs/article/7f7a8a5273630ab460c6d30f2682e59b645325325.png" alt="image">â€‹</p><h1 id="3-æ€è€ƒï¼š"><a href="#3-æ€è€ƒï¼š" class="headerlink" title="3. æ€è€ƒï¼š"></a>3. æ€è€ƒï¼š</h1><ol><li><p>å…¥é—¨æ¡ˆä¾‹ä¸­æ²¡æœ‰å¼•å…¥spring-webmvcç­‰ä¾èµ–åŒ…ï¼Œæ²¡æœ‰é…ç½®TomcatæœåŠ¡å™¨ï¼Œä¸ºä»€ä¹ˆèƒ½æ­£å¸¸å¯åŠ¨ï¼Ÿ</p><ol><li><p>SpringBoot å†…éƒ¨é›†æˆçš„å«æœ‰tomcat</p><p> <img src="https://i0.hdslb.com/bfs/article/4207860e3a3680e297da2a4101881888645325325.png" alt="image">â€‹</p></li></ol></li><li><p>æ²¡æœ‰é…ç½®ç«¯å£å·ï¼Œä¸ºä»€ä¹ˆç«¯å£æ˜¯8080ï¼Ÿ</p><ol><li><span data-type="text" style="background-color: var(--b3-font-background8);">Tomcatç«¯å£å·é»˜è®¤é…ç½®ä¸º8080</span></li></ol></li></ol><h1 id="4-SpringBoot-å…¥é—¨æ€»ç»“-èµ·æ­¥ä¾èµ–"><a href="#4-SpringBoot-å…¥é—¨æ€»ç»“-èµ·æ­¥ä¾èµ–" class="headerlink" title="4. SpringBoot å…¥é—¨æ€»ç»“ - èµ·æ­¥ä¾èµ–"></a>4. SpringBoot å…¥é—¨æ€»ç»“ - èµ·æ­¥ä¾èµ–</h1><ul><li><p>starter</p><ul><li>SpringBootä¸­å¸¸è§é¡¹ç›®åç§°ï¼Œ<span data-type="text" style="color: var(--b3-font-color13);">å®šä¹‰äº†å½“å‰é¡¹ç›®ä½¿ç”¨çš„æ‰€æœ‰é¡¹ç›®åæ ‡ï¼Œä»¥è¾¾åˆ°å‡å°‘ä¾èµ–é…ç½®çš„ç›®çš„</span></li></ul></li><li><p>parent</p><ul><li><span data-type="text" style="background-color: var(--b3-font-background13);">æ‰€æœ‰SpringBooté¡¹ç›®è¦ç»§æ‰¿çš„é¡¹ç›®ï¼Œå®šä¹‰äº†è‹¥å¹²ä¸ªåæ ‡ç‰ˆæœ¬å·ï¼ˆä¾èµ–ç®¡ç†ï¼Œè€Œéä¾èµ–ï¼‰ï¼Œä»¥è¾¾åˆ°å‡å°‘ä¾èµ–å†²çªçš„ç›®çš„</span></li><li>spring-boot-starter-parentï¼ˆ2.5.0ï¼‰ä¸ spring-boot-starter-parentï¼ˆ2.4.6ï¼‰å…±è®¡57å¤„åæ ‡ç‰ˆæœ¬ä¸åŒ</li></ul></li></ul><p>â€</p><p>å®é™…å¼€å‘</p><ul><li>ä½¿ç”¨ä»»æ„åæ ‡æ—¶ï¼Œä»…ä¹¦å†™GAVä¸­çš„Gå’ŒAï¼ŒVç”±SpringBootæä¾›</li><li>å¦‚å‘ç”Ÿåæ ‡é”™è¯¯ï¼Œå†æŒ‡å®šversionï¼ˆè¦å°å¿ƒç‰ˆæœ¬å†²çªï¼‰</li></ul><p>â€</p><p>pomä¸­starterã€parentä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>starterï¼šå‡å°‘ä¾èµ–é…ç½®</li><li>parentï¼š å‡å°‘ä¾èµ–å†²çª</li></ul><p><img src="https://i0.hdslb.com/bfs/article/479e25dd1b075c308f049484de30acd0645325325.png" alt="image">â€‹</p><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBootåŸºç¡€ç¯‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬09ç«  è¿æ¥æ± </title>
      <link href="/posts/21772.html"/>
      <url>/posts/21772.html</url>
      
        <content type="html"><![CDATA[<p>â€</p><meta name="referrer" content="no-referrer"><h1 id="è¿æ¥æ± çš„ç†è§£"><a href="#è¿æ¥æ± çš„ç†è§£" class="headerlink" title="è¿æ¥æ± çš„ç†è§£"></a>è¿æ¥æ± çš„ç†è§£</h1><h2 id="ä¸ä½¿ç”¨è¿æ¥æ± æœ‰å•¥é—®é¢˜"><a href="#ä¸ä½¿ç”¨è¿æ¥æ± æœ‰å•¥é—®é¢˜" class="headerlink" title="ä¸ä½¿ç”¨è¿æ¥æ± æœ‰å•¥é—®é¢˜"></a>ä¸ä½¿ç”¨è¿æ¥æ± æœ‰å•¥é—®é¢˜</h2><p>Connectionå¯¹è±¡æ˜¯é‡é‡çº§å¯¹è±¡ï¼Œåˆ›å»ºConnectionå¯¹è±¡å°±æ˜¯å»ºç«‹ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œéå¸¸è€—è´¹èµ„æºã€‚ä¸€æ¬¡å®Œæ•´çš„æ•°æ®åº“æ“ä½œï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½è€—è´¹åœ¨è¿æ¥å¯¹è±¡çš„åˆ›å»ºã€‚<br>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šæ¯ä¸€æ¬¡è¯·æ±‚éƒ½åˆ›å»ºä¸€ä¸ªConnectionè¿æ¥å¯¹è±¡ï¼Œæ•ˆç‡è¾ƒä½ã€‚<br>ç¬¬äºŒä¸ªé—®é¢˜ï¼šè¿æ¥å¯¹è±¡çš„æ•°é‡æ— æ³•é™åˆ¶ã€‚å¦‚æœè¿æ¥å¯¹è±¡çš„æ•°é‡è¿‡é«˜ï¼Œä¼šå¯¼è‡´mysqlæ•°æ®åº“æœåŠ¡å™¨å´©æºƒã€‚</p><h2 id="ä½¿ç”¨è¿æ¥æ± æ¥è§£å†³ä»€ä¹ˆé—®é¢˜"><a href="#ä½¿ç”¨è¿æ¥æ± æ¥è§£å†³ä»€ä¹ˆé—®é¢˜" class="headerlink" title="ä½¿ç”¨è¿æ¥æ± æ¥è§£å†³ä»€ä¹ˆé—®é¢˜"></a>ä½¿ç”¨è¿æ¥æ± æ¥è§£å†³ä»€ä¹ˆé—®é¢˜</h2><p>æå‰åˆ›å»ºå¥½Nä¸ªè¿æ¥å¯¹è±¡ï¼Œå°†å…¶å­˜æ”¾åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼ˆè¿™ä¸ªé›†åˆå°±æ˜¯ä¸€ä¸ªç¼“å­˜ï¼‰ã€‚<br>ç”¨æˆ·è¯·æ±‚æ—¶ï¼Œéœ€è¦è¿æ¥å¯¹è±¡ç›´æ¥ä»è¿æ¥æ± ä¸­è·å–ï¼Œä¸éœ€è¦åˆ›å»ºè¿æ¥å¯¹è±¡ï¼Œå› æ­¤æ•ˆç‡è¾ƒé«˜ã€‚<br>å¦å¤–ï¼Œè¿æ¥å¯¹è±¡åªèƒ½ä»è¿æ¥æ± ä¸­è·å–ï¼Œå¦‚æœæ²¡æœ‰ç©ºé—²çš„è¿æ¥å¯¹è±¡ï¼Œåªèƒ½ç­‰å¾…ï¼Œè¿™æ ·è¿æ¥å¯¹è±¡åˆ›å»ºçš„æ•°é‡å°±å¾—åˆ°äº†æ§åˆ¶ã€‚</p><p>â€</p><h2 id="javax-sql-DataSource"><a href="#javax-sql-DataSource" class="headerlink" title="javax.sql.DataSource"></a>javax.sql.DataSource</h2><p>è¿æ¥æ± æœ‰å¾ˆå¤šï¼Œä¸è¿‡æ‰€æœ‰çš„è¿æ¥æ± éƒ½å®ç°äº† javax.sql.DataSource æ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ç¨‹åºå‘˜åœ¨ä½¿ç”¨è¿æ¥æ± çš„æ—¶å€™ï¼Œä¸ç®¡ä½¿ç”¨å“ªå®¶çš„è¿æ¥æ± äº§å“ï¼Œåªè¦é¢å‘javax.sql.DataSourceæ¥å£è°ƒç”¨æ–¹æ³•å³å¯ã€‚</p><p>å¦å¤–ï¼Œå®é™…ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å±äºæˆ‘ä»¬è‡ªå·±çš„è¿æ¥æ± ã€‚åªè¦å®ç°DataSourceæ¥å£å³å¯ã€‚</p><h2 id="è¿æ¥æ± çš„å±æ€§"><a href="#è¿æ¥æ± çš„å±æ€§" class="headerlink" title="è¿æ¥æ± çš„å±æ€§"></a>è¿æ¥æ± çš„å±æ€§</h2><p>å¯¹äºä¸€ä¸ªåŸºæœ¬çš„è¿æ¥æ± æ¥è¯´ï¼Œä¸€èˆ¬éƒ½åŒ…å«ä»¥ä¸‹å‡ ä¸ªå¸¸è§çš„å±æ€§ï¼š</p><ol><li>åˆå§‹åŒ–è¿æ¥æ•°ï¼ˆinitialSizeï¼‰ï¼šè¿æ¥æ± åˆå§‹åŒ–æ—¶åˆ›å»ºçš„è¿æ¥æ•°ã€‚</li><li>æœ€å¤§è¿æ¥æ•°ï¼ˆmaxActiveï¼‰ï¼šè¿æ¥æ± ä¸­æœ€å¤§çš„è¿æ¥æ•°ï¼Œä¹Ÿå°±æ˜¯è¿æ¥æ± æ‰€èƒ½å®¹çº³çš„æœ€å¤§è¿æ¥æ•°é‡ï¼Œå½“è¿æ¥æ± ä¸­çš„è¿æ¥æ•°é‡è¾¾åˆ°æ­¤å€¼æ—¶ï¼Œåç»­è¯·æ±‚ä¼šè¢«é˜»å¡å¹¶ç­‰å¾…è¿æ¥æ± ä¸­æœ‰è¿æ¥è¢«é‡Šæ”¾åå†å¤„ç†ã€‚</li><li>æœ€å°ç©ºé—²è¿æ¥æ•°é‡ï¼ˆminIdleï¼‰ï¼š æŒ‡è¿æ¥æ± ä¸­æœ€å°çš„ç©ºé—²è¿æ¥æ•°ï¼Œä¹Ÿå°±æ˜¯å³ä½¿å½“å‰æ²¡æœ‰è¯·æ±‚ï¼Œè¿æ¥æ± ä¸­è‡³å°‘ä¹Ÿè¦ä¿æŒä¸€å®šæ•°é‡çš„ç©ºé—²è¿æ¥ï¼Œä»¥ä¾¿åº”å¯¹é«˜å¹¶å‘è¯·æ±‚æˆ–çªå‘è¿æ¥è¯·æ±‚çš„æƒ…å†µã€‚</li><li>æœ€å¤§ç©ºé—²è¿æ¥æ•°é‡ï¼ˆmaxIdleï¼‰ï¼š æŒ‡è¿æ¥æ± ä¸­æœ€å¤§çš„ç©ºé—²è¿æ¥æ•°ï¼Œä¹Ÿå°±æ˜¯è¿æ¥æ± ä¸­æœ€å¤šå…è®¸ä¿æŒçš„ç©ºé—²è¿æ¥æ•°é‡ã€‚å½“è¿æ¥æ± ä¸­çš„ç©ºé—²è¿æ¥æ•°é‡è¾¾åˆ°äº†maxIdleè®¾å®šçš„å€¼åï¼Œå¤šä½™çš„ç©ºé—²è¿æ¥å°†ä¼šè¢«è¿æ¥æ± é‡Šæ”¾æ‰ã€‚</li><li>æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆmaxWaitï¼‰ï¼šå½“è¿æ¥æ± ä¸­çš„è¿æ¥æ•°é‡è¾¾åˆ°æœ€å¤§å€¼æ—¶ï¼Œåç»­è¯·æ±‚éœ€è¦ç­‰å¾…çš„æœ€å¤§æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li><li>è¿æ¥æœ‰æ•ˆæ€§æ£€æŸ¥ï¼ˆtestOnBorrowã€testOnReturnï¼‰ï¼šä¸ºäº†ç¡®ä¿è¿æ¥æ± ä¸­åªæœ‰å¯ç”¨çš„è¿æ¥ï¼Œä¸€äº›è¿æ¥æ± ä¼šå®šæœŸå¯¹è¿æ¥è¿›è¡Œæœ‰æ•ˆæ€§æ£€æŸ¥ï¼Œè¿™é‡Œçš„å±æ€§å°±æ˜¯é…ç½®è¿™äº›æ£€æŸ¥çš„é€‰é¡¹ã€‚</li><li>è¿æ¥çš„driverã€urlã€userã€passwordç­‰ã€‚</li></ol><p>ä»¥ä¸Šè¿™äº›å±æ€§æ˜¯è¿æ¥æ± ä¸­è¾ƒä¸ºå¸¸è§çš„ä¸€äº›å±æ€§ï¼Œä¸åŒçš„è¿æ¥æ± åœ¨å®ç°æ—¶å¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–çš„ä¸€äº›å±æ€§ï¼Œä¸è¿‡å¤§å¤šæ•°è¿æ¥æ± éƒ½åŒ…å«äº†ä»¥ä¸Šå‡ ä¸ªå±æ€§ï¼Œå¯¹äºä½¿ç”¨è€…æ¥è¯´éœ€è¦æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œçµæ´»é…ç½®ã€‚</p><p>â€</p><h1 id="å¸¸ç”¨çš„è¿æ¥æ± "><a href="#å¸¸ç”¨çš„è¿æ¥æ± " class="headerlink" title="å¸¸ç”¨çš„è¿æ¥æ± "></a>å¸¸ç”¨çš„è¿æ¥æ± </h1><p>å¸‚é¢ä¸Šå¸¸ç”¨çš„æ•°æ®åº“è¿æ¥æ± æœ‰è®¸å¤šï¼Œä»¥ä¸‹æ˜¯å…¶ä¸­å‡ ç§ï¼š</p><ol><li>DBCP<ol><li>2001å¹´è¯ç”Ÿï¼Œæœ€æ—©çš„è¿æ¥æ± ã€‚</li><li>Apache Software Foundationçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ã€‚</li><li>DBCPçš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†æ»¡è¶³TomcatæœåŠ¡å™¨å¯¹è¿æ¥æ± ç®¡ç†çš„éœ€æ±‚ã€‚</li></ol></li><li>c3p0<ol><li>2004å¹´è¯ç”Ÿ</li><li>c3p0æ˜¯ç”±Steve Waldmanäº2004å¹´æ¨å‡ºçš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€é«˜å¯é æ€§ã€æ˜“é…ç½®çš„æ•°æ®åº“è¿æ¥æ± ã€‚c3p0èƒ½å¤Ÿæä¾›è¿æ¥æ± çš„å®¹é”™èƒ½åŠ›ã€è‡ªåŠ¨é‡è¿ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯å’Œæ•°æ®é‡å¤§çš„åº”ç”¨ã€‚</li></ol></li><li>Druid<ol><li>2012å¹´è¯ç”Ÿ</li><li>Druidè¿æ¥æ± ç”±é˜¿é‡Œå·´å·´é›†å›¢å¼€å‘ï¼Œäº2011å¹´åº•å¼€å§‹å¯¹å¤–å…¬å¼€ï¼Œ2012å¹´æ­£å¼å‘å¸ƒã€‚Druidæ˜¯ä¸€ä¸ªå…·æœ‰é«˜æ€§èƒ½ã€é«˜å¯é æ€§ã€ä¸°å¯ŒåŠŸèƒ½çš„æ•°æ®åº“è¿æ¥æ± ï¼Œä¸ä»…å¯ä»¥åšè¿æ¥æ± ï¼Œè¿˜èƒ½åšç›‘æ§ã€åˆ†æå’Œç®¡ç†æ•°æ®åº“ï¼Œæ”¯æŒSQLé˜²ç«å¢™ã€ç»Ÿè®¡åˆ†æã€ç¼“å­˜å’Œè®¿é—®æ§åˆ¶ç­‰åŠŸèƒ½ã€‚</li></ol></li><li>HikariCP<ol><li>2012å¹´è¯ç”Ÿ</li><li>HikariCPæ˜¯ç”±Brett Wooldridgeäº2012å¹´åˆ›å»ºçš„å¼€æºé¡¹ç›®ï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯Javaè¯­è¨€ä¸‹æœ€å¿«çš„è¿æ¥æ± ä¹‹ä¸€ï¼Œå…·æœ‰å¿«é€Ÿå¯åŠ¨ã€ä½å»¶è¿Ÿã€ä½èµ„æºæ¶ˆè€—ç­‰ä¼˜ç‚¹ã€‚HikariCPè¿æ¥æ± é€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯å’Œäº‘ç«¯åº”ç”¨ã€‚</li><li>å¾ˆå•çº¯çš„ä¸€ä¸ªè¿æ¥æ± ï¼Œè¿™ä¸ªäº§å“åªåšè¿æ¥æ± åº”è¯¥åšçš„ï¼Œå…¶ä»–çš„ä¸åšã€‚æ‰€ä»¥æ€§èƒ½æ˜¯æè‡´çš„ã€‚ç›¸å¯¹äºDruidæ¥è¯´ï¼Œå®ƒæ›´åŠ è½»é‡çº§ã€‚</li><li>Druidè¿æ¥æ± åœ¨è¿æ¥ç®¡ç†ä¹‹å¤–æä¾›äº†æ›´å¤šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚SQLé˜²ç«å¢™ã€ç»Ÿè®¡åˆ†æã€ç¼“å­˜ã€è®¿é—®æ§åˆ¶ç­‰ï¼Œé€‚ç”¨äºåœ¨æ•°æ®åº“è®¿é—®è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è¿›è¡Œç»†ç²’åº¦æ§åˆ¶çš„åœºæ™¯</li><li>HikariCPåˆ™æ›´ä¾§é‡äºæ€§èƒ½æ–¹é¢çš„ä¼˜åŒ–ï¼Œå¯¹å„ç§æ•°æ®åº“çš„å…¼å®¹æ€§ä¹Ÿæ›´å¥½</li></ol></li><li>BoneCP<ol><li>2015å¹´è¯ç”Ÿ</li><li>BoneCPæ˜¯ä¸€æ¬¾Javaè¯­è¨€ä¸‹çš„é«˜æ€§èƒ½è¿æ¥æ± ï¼Œäº2015å¹´ç”±Dominik Gruntzåœ¨GitHubä¸Šå‘å¸ƒã€‚BoneCPå…·æœ‰åˆ†å¸ƒå¼äº‹åŠ¡ã€è¿æ¥ç©ºé—²æ£€æŸ¥ã€SQLè¯­å¥è·Ÿè¸ªå’Œæ€§èƒ½åˆ†æã€ç‰¹å®šç±»å‹çš„è¿æ¥æ± ç­‰ç‰¹ç‚¹ã€‚BoneCPè¿æ¥æ± é€‚ç”¨äºå¤§å‹åº”ç”¨ç³»ç»Ÿå’Œé«˜å¹¶å‘çš„è´Ÿè½½åœºæ™¯</li></ol></li></ol><p>â€</p><h1 id="è¿æ¥æ± çš„ä½¿ç”¨"><a href="#è¿æ¥æ± çš„ä½¿ç”¨" class="headerlink" title="è¿æ¥æ± çš„ä½¿ç”¨"></a>è¿æ¥æ± çš„ä½¿ç”¨</h1><h2 id="Druidçš„ä½¿ç”¨"><a href="#Druidçš„ä½¿ç”¨" class="headerlink" title="Druidçš„ä½¿ç”¨"></a>Druidçš„ä½¿ç”¨</h2><p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥Druidçš„jaråŒ…<br><img src="https://i0.hdslb.com/bfs/article/a5e3938f8b7e211da0433a4d7b2036f0645325325.png" alt="image.png"><br>ç¬¬äºŒæ­¥ï¼šé…ç½®æ–‡ä»¶<br>åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªå±æ€§èµ„æºæ–‡ä»¶ï¼šjdbc.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/jdbc</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">1234</span></span><br><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">5</span></span><br><span class="line"><span class="attr">minIdle</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">20</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ä»£ç ï¼Œä»è¿æ¥æ± ä¸­è·å–è¿æ¥å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯»å–å±æ€§é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> DruidConfig.class.getClassLoader().getResourceAsStream(<span class="string">&quot;jdbc.properties&quot;</span>);</span><br><span class="line"><span class="type">Properties</span> <span class="variable">props</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">props.load(in);</span><br><span class="line"><span class="comment">// åˆ›å»ºè¿æ¥æ± </span></span><br><span class="line"><span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> DruidDataSourceFactory.createDataSource(props);</span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> dataSource.getConnection();</span><br></pre></td></tr></table></figure><p>ç¬¬å››æ­¥ï¼šå…³é—­è¿æ¥<br>ä»ç„¶è°ƒç”¨Connectionçš„close()æ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªclose()æ–¹æ³•å¹¶ä¸æ˜¯çœŸæ­£çš„å…³é—­è¿æ¥ï¼Œåªæ˜¯å°†è¿æ¥å½’è¿˜åˆ°è¿æ¥æ± ï¼Œè®©å…¶ç§°ä¸ºç©ºé—²è¿æ¥å¯¹è±¡ã€‚è¿™æ ·å…¶ä»–çº¿ç¨‹å¯ä»¥ç»§ç»­ä½¿ç”¨è¯¥ç©ºé—²è¿æ¥ã€‚</p><p>â€</p><h2 id="HikariCPçš„ä½¿ç”¨"><a href="#HikariCPçš„ä½¿ç”¨" class="headerlink" title="HikariCPçš„ä½¿ç”¨"></a>HikariCPçš„ä½¿ç”¨</h2><p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥jaråŒ…<br>ç¬¬äºŒæ­¥ï¼šç¼–å†™é…ç½®æ–‡ä»¶<br>åœ¨ç±»çš„æ ¹è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªå±æ€§èµ„æºæ–‡ä»¶ï¼šjdbc2.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbcUrl</span>=<span class="string">jdbc:mysql://localhost:3306/jdbc</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">1234</span></span><br><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">minimumIdle</span>=<span class="string">5</span></span><br><span class="line"><span class="attr">maximumPoolSize</span>=<span class="string">20</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ä»£ç ï¼Œä»è¿æ¥æ± ä¸­è·å–è¿æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> HikariConfig.class.getClassLoader().getResourceAsStream(<span class="string">&quot;config.properties&quot;</span>);</span><br><span class="line">props.load(in);</span><br><span class="line"><span class="type">HikariConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HikariConfig</span>(props);</span><br><span class="line"><span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HikariDataSource</span>(config);</span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> dataSource.getConnection();</span><br></pre></td></tr></table></figure><p>ç¬¬å››æ­¥ï¼šå…³é—­è¿æ¥ï¼ˆè°ƒç”¨conn.close()ï¼Œå°†è¿æ¥å½’è¿˜åˆ°è¿æ¥æ± ï¼Œè¿æ¥å¯¹è±¡ä¸ºç©ºé—²çŠ¶æ€ã€‚ï¼‰</p><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬08ç«  DAO</title>
      <link href="/posts/54510.html"/>
      <url>/posts/54510.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="ä»€ä¹ˆæ˜¯DAO"><a href="#ä»€ä¹ˆæ˜¯DAO" class="headerlink" title="ä»€ä¹ˆæ˜¯DAO"></a>ä»€ä¹ˆæ˜¯DAO</h1><p>DAOæ˜¯ï¼šData Access Objectï¼Œç¿»è¯‘ä¸ºï¼šæ•°æ®è®¿é—®å¯¹è±¡ã€‚<br>ä¸€ç§JavaEEçš„è®¾è®¡æ¨¡å¼ï¼Œä¸“é—¨ç”¨æ¥åšæ•°æ®å¢åˆ æ”¹æŸ¥çš„ç±»ã€‚<br>åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šå°†æ•°æ®åº“çš„æ“ä½œå°è£…ä¸ºä¸€ä¸ªå•ç‹¬çš„DAOå»å®Œæˆï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ï¼šæé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œå¦å¤–ä¹Ÿå¯ä»¥é™ä½ç¨‹åºçš„è€¦åˆåº¦ï¼Œæé«˜æ‰©å±•åŠ›ã€‚<br>ä¾‹å¦‚ï¼šæ“ä½œç”¨æˆ·æ•°æ®çš„å«åšUserDaoï¼Œæ“ä½œå‘˜å·¥æ•°æ®çš„å«åšEmployeeDaoï¼Œæ“ä½œäº§å“æ•°æ®çš„å«åšProductDaoï¼Œæ“ä½œè®¢å•æ•°æ®çš„å«åšOrderDaoç­‰ã€‚</p><p>â€</p><h1 id="ä½¿ç”¨DAOæ”¹é€ å‘˜å·¥ä¿¡æ¯ç®¡ç†"><a href="#ä½¿ç”¨DAOæ”¹é€ å‘˜å·¥ä¿¡æ¯ç®¡ç†" class="headerlink" title="ä½¿ç”¨DAOæ”¹é€ å‘˜å·¥ä¿¡æ¯ç®¡ç†"></a>ä½¿ç”¨DAOæ”¹é€ å‘˜å·¥ä¿¡æ¯ç®¡ç†</h1><h2 id="å®šä¹‰Employeeå°è£…æ•°æ®"><a href="#å®šä¹‰Employeeå°è£…æ•°æ®" class="headerlink" title="å®šä¹‰Employeeå°è£…æ•°æ®"></a>å®šä¹‰Employeeå°è£…æ•°æ®</h2><p>Employeeç±»æ˜¯ä¸€ä¸ªJava Beanï¼Œä¸“é—¨ç”¨æ¥å°è£…å‘˜å·¥çš„ä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc.beans;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: Employee</span></span><br><span class="line"><span class="comment"> * Description:</span></span><br><span class="line"><span class="comment"> * Datetime: 2024/4/14 23:32</span></span><br><span class="line"><span class="comment"> * Author: è€æœ@åŠ¨åŠ›èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * Version: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line">    <span class="keyword">private</span> Double salary;</span><br><span class="line">    <span class="keyword">private</span> String hiredate;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Employee&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, job=&#x27;&quot;</span> + job + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, salary=&quot;</span> + salary +</span><br><span class="line">                <span class="string">&quot;, hiredate=&#x27;&quot;</span> + hiredate + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(Long id, String name, String job, Double salary, String hiredate, String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.job = job;</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">        <span class="built_in">this</span>.hiredate = hiredate;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getJob</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJob</span><span class="params">(String job)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.job = job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getSalary</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSalary</span><span class="params">(Double salary)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getHiredate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hiredate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHiredate</span><span class="params">(String hiredate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.hiredate = hiredate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€</p><h2 id="å®šä¹‰EmployeeDao"><a href="#å®šä¹‰EmployeeDao" class="headerlink" title="å®šä¹‰EmployeeDao"></a>å®šä¹‰EmployeeDao</h2><p>å®šä¹‰äº”ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«å®Œæˆäº”ä¸ªåŠŸèƒ½ï¼šæ–°å¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼ŒæŸ¥çœ‹ä¸€ä¸ªï¼ŒæŸ¥çœ‹æ‰€æœ‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.powernode.jdbc.beans.Employee;</span><br><span class="line"><span class="keyword">import</span> com.powernode.jdbc.utils.DbUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: EmployeeDao</span></span><br><span class="line"><span class="comment"> * Description:</span></span><br><span class="line"><span class="comment"> * Datetime: 2024/4/14 23:34</span></span><br><span class="line"><span class="comment"> * Author: è€æœ@åŠ¨åŠ›èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * Version: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeDao</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢å‘˜å·¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insert</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_employee(name,job,salary,hiredate,address) values(?,?,?,?,?)&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>, employee.getName());</span><br><span class="line">            ps.setString(<span class="number">2</span>, employee.getJob());</span><br><span class="line">            ps.setDouble(<span class="number">3</span>, employee.getSalary());</span><br><span class="line">            ps.setString(<span class="number">4</span>, employee.getHiredate());</span><br><span class="line">            ps.setString(<span class="number">5</span>, employee.getAddress());</span><br><span class="line">            count = ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(conn, ps, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹å‘˜å·¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_employee set name=?, job=?, salary=?, hiredate=?, address=? where id=?&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>, employee.getName());</span><br><span class="line">            ps.setString(<span class="number">2</span>, employee.getJob());</span><br><span class="line">            ps.setDouble(<span class="number">3</span>, employee.getSalary());</span><br><span class="line">            ps.setString(<span class="number">4</span>, employee.getHiredate());</span><br><span class="line">            ps.setString(<span class="number">5</span>, employee.getAddress());</span><br><span class="line">            ps.setLong(<span class="number">6</span>, employee.getId());</span><br><span class="line">            count = ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(conn, ps, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idåˆ é™¤å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id å‘˜å·¥id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 1è¡¨ç¤ºæˆåŠŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_employee where id = ?&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            ps.setLong(<span class="number">1</span>, id);</span><br><span class="line">            count = ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(conn, ps, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">selectById</span><span class="params">(Long id)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_employee where id = ?&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            ps.setLong(<span class="number">1</span>, id);</span><br><span class="line">            rs = ps.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                employee = <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">                employee.setId(id);</span><br><span class="line">                employee.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                employee.setJob(rs.getString(<span class="string">&quot;job&quot;</span>));</span><br><span class="line">                employee.setSalary(rs.getDouble(<span class="string">&quot;salary&quot;</span>));</span><br><span class="line">                employee.setHiredate(rs.getString(<span class="string">&quot;hiredate&quot;</span>));</span><br><span class="line">                employee.setAddress(rs.getString(<span class="string">&quot;address&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(conn, ps, rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> employee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å‘˜å·¥åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Employee&gt; employees = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_employee&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            rs = ps.executeQuery();</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">                employee.setId(rs.getLong(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                employee.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                employee.setJob(rs.getString(<span class="string">&quot;job&quot;</span>));</span><br><span class="line">                employee.setSalary(rs.getDouble(<span class="string">&quot;salary&quot;</span>));</span><br><span class="line">                employee.setHiredate(rs.getString(<span class="string">&quot;hiredate&quot;</span>));</span><br><span class="line">                employee.setAddress(rs.getString(<span class="string">&quot;address&quot;</span>));</span><br><span class="line">                employees.add(employee);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(conn, ps, rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> employees;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€</p><h1 id="BaseDaoçš„å°è£…"><a href="#BaseDaoçš„å°è£…" class="headerlink" title="BaseDaoçš„å°è£…"></a>BaseDaoçš„å°è£…</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.powernode.jdbc.utils.DbUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: BaseDao</span></span><br><span class="line"><span class="comment"> * Description: æœ€åŸºç¡€çš„Daoï¼Œæ‰€æœ‰çš„Daoåº”è¯¥å»ç»§æ‰¿è¯¥BaseDao</span></span><br><span class="line"><span class="comment"> * Datetime: 2024/4/15 11:08</span></span><br><span class="line"><span class="comment"> * Author: è€æœ@åŠ¨åŠ›èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * Version: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„æ‰§è¡Œinsert delete updateè¯­å¥çš„æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> params</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sql, Object... params)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è·å–è¿æ¥</span></span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line">            <span class="comment">// è·å–é¢„ç¼–è¯‘çš„æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// ç»™ ? å ä½ç¬¦ä¼ å€¼</span></span><br><span class="line">            <span class="keyword">if</span>(params != <span class="literal">null</span> &amp;&amp; params.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">// æœ‰å ä½ç¬¦ ?</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">                    ps.setObject(i + <span class="number">1</span>, params[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            count = ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(conn, ps, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„æŸ¥è¯¢è¯­å¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> params</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">executeQuery</span><span class="params">(Class&lt;T&gt; clazz, String sql, Object... params)</span>&#123;</span><br><span class="line">        List&lt;T&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è·å–è¿æ¥</span></span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line">            <span class="comment">// è·å–é¢„ç¼–è¯‘çš„æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// ç»™?ä¼ å€¼</span></span><br><span class="line">            <span class="keyword">if</span>(params != <span class="literal">null</span> &amp;&amp; params.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">                    ps.setObject(i + <span class="number">1</span>, params[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            rs = ps.executeQuery();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å–æŸ¥è¯¢ç»“æœé›†å…ƒæ•°æ®</span></span><br><span class="line">            <span class="type">ResultSetMetaData</span> <span class="variable">rsmd</span> <span class="operator">=</span> rs.getMetaData();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å–åˆ—æ•°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">columnCount</span> <span class="operator">=</span> rsmd.getColumnCount();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¤„ç†æŸ¥è¯¢ç»“æœé›†</span></span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                <span class="comment">// å°è£…beanå¯¹è±¡</span></span><br><span class="line">                <span class="type">T</span> <span class="variable">obj</span> <span class="operator">=</span> clazz.newInstance();</span><br><span class="line">                <span class="comment">// ç»™beanå¯¹è±¡å±æ€§èµ‹å€¼</span></span><br><span class="line">                <span class="comment">/*</span></span><br><span class="line"><span class="comment">                æ¯”å¦‚ç°åœ¨æœ‰ä¸€å¼ è¡¨ï¼št_userï¼Œç„¶åè¡¨ä¸­æœ‰ä¸¤ä¸ªå­—æ®µï¼Œä¸€ä¸ªæ˜¯ user_idï¼Œä¸€ä¸ªæ˜¯user_name</span></span><br><span class="line"><span class="comment">                ç°åœ¨javabeanæ˜¯Userç±»ï¼Œè¯¥ç±»ä¸­çš„å±æ€§åæ˜¯ï¼šuserId,username</span></span><br><span class="line"><span class="comment">                æ‰§è¡Œè¿™æ ·çš„SQLè¯­å¥ï¼šselect user_id as userId, user_name as username from t_user;</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= columnCount; i++) &#123;</span><br><span class="line">                    <span class="comment">// è·å–æŸ¥è¯¢ç»“æœé›†ä¸­çš„åˆ—çš„åå­—</span></span><br><span class="line">                    <span class="comment">// è¿™ä¸ªåˆ—çš„åå­—æ˜¯é€šè¿‡aså…³é”®å­—è¿›è¡Œäº†èµ·åˆ«åï¼Œè¿™ä¸ªåˆ—åå°±æ˜¯beançš„å±æ€§åã€‚</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">fieldName</span> <span class="operator">=</span> rsmd.getColumnLabel(i);</span><br><span class="line">                    <span class="comment">// è·å–å±æ€§Fieldå¯¹è±¡</span></span><br><span class="line">                    <span class="type">Field</span> <span class="variable">declaredField</span> <span class="operator">=</span> clazz.getDeclaredField(fieldName);</span><br><span class="line">                    <span class="comment">// æ‰“ç ´å°è£…</span></span><br><span class="line">                    declaredField.setAccessible(<span class="literal">true</span>);</span><br><span class="line">                    <span class="comment">// ç»™å±æ€§èµ‹å€¼</span></span><br><span class="line">                    declaredField.set(obj, rs.getObject(i));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å°†å¯¹è±¡æ·»åŠ åˆ°Listé›†åˆ</span></span><br><span class="line">                list.add(obj);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(conn, ps, rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿”å›Listé›†åˆ</span></span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> clazz</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sql</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> params</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; T <span class="title function_">queryOne</span><span class="params">(Class&lt;T&gt; clazz, String sql, Object... params)</span>&#123;</span><br><span class="line">        List&lt;T&gt; list = executeQuery(clazz, sql, params);</span><br><span class="line">        <span class="keyword">if</span>(list == <span class="literal">null</span> || list.size() == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬07ç«  JDBCå®ç°å‘˜å·¥ç®¡ç†</title>
      <link href="/posts/54431.html"/>
      <url>/posts/54431.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="æ•°æ®åº“è¡¨çš„å‡†å¤‡"><a href="#æ•°æ®åº“è¡¨çš„å‡†å¤‡" class="headerlink" title="æ•°æ®åº“è¡¨çš„å‡†å¤‡"></a>æ•°æ®åº“è¡¨çš„å‡†å¤‡</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_employee;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_employee(</span><br><span class="line">  id <span class="type">bigint</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  job <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  hiredate <span class="type">char</span>(<span class="number">10</span>),</span><br><span class="line">  salary <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>),</span><br><span class="line">  address <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_employee(name,job,hiredate,salary,address) <span class="keyword">values</span>(<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;é”€å”®å‘˜&#x27;</span>,<span class="string">&#x27;1999-10-11&#x27;</span>,<span class="number">5000.0</span>,<span class="string">&#x27;åŒ—äº¬æœé˜³&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_employee(name,job,hiredate,salary,address) <span class="keyword">values</span>(<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;ç¼–ç äººå‘˜&#x27;</span>,<span class="string">&#x27;1998-02-12&#x27;</span>,<span class="number">5000.0</span>,<span class="string">&#x27;åŒ—äº¬æµ·æ·€&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_employee(name,job,hiredate,salary,address) <span class="keyword">values</span>(<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="string">&#x27;é¡¹ç›®ç»ç†&#x27;</span>,<span class="string">&#x27;2000-08-11&#x27;</span>,<span class="number">5000.0</span>,<span class="string">&#x27;åŒ—äº¬å¤§å…´&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_employee(name,job,hiredate,salary,address) <span class="keyword">values</span>(<span class="string">&#x27;èµµå…­&#x27;</span>,<span class="string">&#x27;äº§å“ç»ç†&#x27;</span>,<span class="string">&#x27;2022-09-11&#x27;</span>,<span class="number">5000.0</span>,<span class="string">&#x27;åŒ—äº¬ä¸œåŸ&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_employee(name,job,hiredate,salary,address) <span class="keyword">values</span>(<span class="string">&#x27;é’±ä¸ƒ&#x27;</span>,<span class="string">&#x27;æµ‹è¯•å‘˜&#x27;</span>,<span class="string">&#x27;2024-12-11&#x27;</span>,<span class="number">5000.0</span>,<span class="string">&#x27;åŒ—äº¬è¥¿åŸ&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_employee;</span><br></pre></td></tr></table></figure><p><img src="https://i0.hdslb.com/bfs/article/edefad07ab249576741ed23c3b04d79f645325325.png" alt="image.png"></p><p>â€</p><h1 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h1><h2 id="æŸ¥çœ‹å‘˜å·¥åˆ—è¡¨"><a href="#æŸ¥çœ‹å‘˜å·¥åˆ—è¡¨" class="headerlink" title="æŸ¥çœ‹å‘˜å·¥åˆ—è¡¨"></a>æŸ¥çœ‹å‘˜å·¥åˆ—è¡¨</h2><p><img src="https://i0.hdslb.com/bfs/article/89f3c147f9e69308872957b66a1b234b645325325.png" alt="image.png"></p><p>â€</p><h2 id="æŸ¥çœ‹å‘˜å·¥è¯¦æƒ…"><a href="#æŸ¥çœ‹å‘˜å·¥è¯¦æƒ…" class="headerlink" title="æŸ¥çœ‹å‘˜å·¥è¯¦æƒ…"></a>æŸ¥çœ‹å‘˜å·¥è¯¦æƒ…</h2><p><img src="https://i0.hdslb.com/bfs/article/7bb5928b024917dd4cb88e03ee6f8ecf645325325.png" alt="image.png"></p><p>â€</p><h2 id="æ–°å¢å‘˜å·¥"><a href="#æ–°å¢å‘˜å·¥" class="headerlink" title="æ–°å¢å‘˜å·¥"></a>æ–°å¢å‘˜å·¥</h2><p><img src="https://i0.hdslb.com/bfs/article/63d320ddcfed4625a04e9e4ca0c31332645325325.png" alt="image.png"></p><p>â€</p><h2 id="ä¿®æ”¹å‘˜å·¥"><a href="#ä¿®æ”¹å‘˜å·¥" class="headerlink" title="ä¿®æ”¹å‘˜å·¥"></a>ä¿®æ”¹å‘˜å·¥</h2><p><img src="https://i0.hdslb.com/bfs/article/686be48091ef16856128cdb93bd33ede645325325.png" alt="image.png"></p><p>â€</p><h2 id="åˆ é™¤å‘˜å·¥"><a href="#åˆ é™¤å‘˜å·¥" class="headerlink" title="åˆ é™¤å‘˜å·¥"></a>åˆ é™¤å‘˜å·¥</h2><p><img src="https://i0.hdslb.com/bfs/article/9265097c570b2ff67163fb610b88f3e9645325325.png" alt="image.png"></p><p>â€</p><h2 id="é€€å‡ºç³»ç»Ÿ"><a href="#é€€å‡ºç³»ç»Ÿ" class="headerlink" title="é€€å‡ºç³»ç»Ÿ"></a>é€€å‡ºç³»ç»Ÿ</h2><p><img src="https://i0.hdslb.com/bfs/article/52186977bde65efcdf9e575d14b44d77645325325.png" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬06ç«  JDBCè°ƒç”¨å­˜å‚¨è¿‡ç¨‹</title>
      <link href="/posts/3731.html"/>
      <url>/posts/3731.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="åœ¨MySQLä¸­åˆ›å»ºå­˜å‚¨è¿‡ç¨‹"><a href="#åœ¨MySQLä¸­åˆ›å»ºå­˜å‚¨è¿‡ç¨‹" class="headerlink" title="åœ¨MySQLä¸­åˆ›å»ºå­˜å‚¨è¿‡ç¨‹"></a>åœ¨MySQLä¸­åˆ›å»ºå­˜å‚¨è¿‡ç¨‹</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> mypro(<span class="keyword">in</span> n <span class="type">int</span>, <span class="keyword">out</span> sum <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line"><span class="keyword">set</span> sum :<span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">repeat </span><br><span class="line">if n <span class="operator">%</span> <span class="number">2</span> <span class="operator">=</span> <span class="number">0</span> <span class="keyword">then</span> </span><br><span class="line">  <span class="keyword">set</span> sum :<span class="operator">=</span> sum <span class="operator">+</span> n;</span><br><span class="line"><span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">set</span> n :<span class="operator">=</span> n <span class="operator">-</span> <span class="number">1</span>;</span><br><span class="line">until n <span class="operator">&lt;=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">end</span> repeat;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><p>â€</p><h1 id="ä½¿ç”¨JDBCä»£ç è°ƒç”¨å­˜å‚¨è¿‡ç¨‹"><a href="#ä½¿ç”¨JDBCä»£ç è°ƒç”¨å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="ä½¿ç”¨JDBCä»£ç è°ƒç”¨å­˜å‚¨è¿‡ç¨‹"></a>ä½¿ç”¨JDBCä»£ç è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.powernode.jdbc.utils.DbUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.CallableStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Types;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: JDBCTest21</span></span><br><span class="line"><span class="comment"> * Description:</span></span><br><span class="line"><span class="comment"> * Datetime: 2024/4/12 17:42</span></span><br><span class="line"><span class="comment"> * Author: è€æœ@åŠ¨åŠ›èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * Version: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest21</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">CallableStatement</span> <span class="variable">cs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;&#123;call mypro(?, ?)&#125;&quot;</span>;</span><br><span class="line">            cs = conn.prepareCall(sql);</span><br><span class="line">            <span class="comment">// ç»™ç¬¬1ä¸ª ? ä¼ å€¼</span></span><br><span class="line">            cs.setInt(<span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line">            <span class="comment">// å°†ç¬¬2ä¸ª ? æ³¨å†Œä¸ºå‡ºå‚</span></span><br><span class="line">            cs.registerOutParameter(<span class="number">2</span>, Types.INTEGER);</span><br><span class="line">            <span class="comment">// æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line">            cs.execute();</span><br><span class="line">            <span class="comment">// é€šè¿‡å‡ºå‚è·å–ç»“æœ</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> cs.getInt(<span class="number">2</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;è®¡ç®—ç»“æœï¼š&quot;</span> + result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(conn, cs, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/f7888dc733cb06b387d4eb5c8c09c2ec645325325.png" alt="image.png"></p><p>â€</p><p>ç¨‹åºè§£è¯´ï¼š<br>ä½¿ç”¨JDBCä»£ç è°ƒç”¨å­˜å‚¨è¿‡ç¨‹éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>åŠ è½½MySQLçš„JDBCé©±åŠ¨ç¨‹åº</li></ol><p>ä½¿ç”¨ä»¥ä¸‹ä»£ç åŠ è½½MySQLçš„JDBCé©±åŠ¨ç¨‹åºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br></pre></td></tr></table></figure><ol start="2"><li>è¿æ¥åˆ°MySQLæ•°æ®åº“</li></ol><p>ä½¿ç”¨ä»¥ä¸‹ä»£ç è¿æ¥åˆ°MySQLæ•°æ®åº“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/mydb&quot;, &quot;user&quot;, &quot;password&quot;);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¿æ¥å­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§å®é™…æƒ…å†µä¿®æ”¹ï¼›ç¬¬äºŒä¸ªå‚æ•°ä¸ºç”¨æˆ·åï¼ŒæŒ‰ç…§å®é™…æƒ…å†µä¿®æ”¹ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå¯†ç ï¼ŒæŒ‰ç…§å®é™…æƒ…å†µä¿®æ”¹ã€‚</p><ol start="3"><li>åˆ›å»ºCallableStatementå¯¹è±¡</li></ol><p>ä½¿ç”¨ä»¥ä¸‹ä»£ç åˆ›å»ºCallableStatementå¯¹è±¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CallableStatement cstmt = conn.prepareCall(&quot;&#123;call mypro(?, ?)&#125;&quot;);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè°ƒç”¨å­˜å‚¨è¿‡ç¨‹çš„è¯­å¥ï¼ŒæŒ‰ç…§å®é™…æƒ…å†µä¿®æ”¹ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦è®¾å®šçš„å‚æ•°ã€‚</p><ol start="4"><li>è®¾ç½®è¾“å…¥å‚æ•°</li></ol><p>ä½¿ç”¨ä»¥ä¸‹ä»£ç è®¾ç½®è¾“å…¥å‚æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cstmt.setInt(1, n);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‚æ•°åœ¨è°ƒç”¨è¯­å¥ä¸­çš„ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å®é™…è¦ä¼ å…¥çš„å€¼ã€‚</p><ol start="5"><li>æ³¨å†Œè¾“å‡ºå‚æ•°</li></ol><p>ä½¿ç”¨ä»¥ä¸‹ä»£ç æ³¨å†Œè¾“å‡ºå‚æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cstmt.registerOutParameter(2, Types.INTEGER);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ³¨å†Œçš„å‚æ•°åœ¨è°ƒç”¨è¯­å¥ä¸­çš„ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å‡ºå‚æ•°çš„ç±»å‹ã€‚</p><ol start="6"><li>æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹</li></ol><p>ä½¿ç”¨ä»¥ä¸‹ä»£ç æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cstmt.execute();</span><br></pre></td></tr></table></figure><ol start="7"><li>è·å–è¾“å‡ºå‚æ•°å€¼</li></ol><p>ä½¿ç”¨ä»¥ä¸‹ä»£ç è·å–è¾“å‡ºå‚æ•°çš„å€¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int sum = cstmt.getInt(2);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¾“å‡ºå‚æ•°åœ¨è°ƒç”¨è¯­å¥ä¸­çš„ä½ç½®ã€‚</p><ol start="8"><li>å…³é—­è¿æ¥</li></ol><p>ä½¿ç”¨ä»¥ä¸‹ä»£ç å…³é—­è¿æ¥å’Œè¯­å¥å¯¹è±¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cstmt.close();</span><br><span class="line">conn.close();</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‚å½“ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹åã€å‚æ•°ä¼ é€’æ–¹å¼ã€å‚æ•°ç±»å‹ç­‰å†…å®¹ã€‚</p><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬05ç«  JDBCäº‹åŠ¡</title>
      <link href="/posts/4974.html"/>
      <url>/posts/4974.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡</h1><p>äº‹åŠ¡æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸šåŠ¡ï¼Œåœ¨è¿™ä¸ªä¸šåŠ¡ä¸­éœ€è¦å¤šæ¡DMLè¯­å¥å…±åŒè”åˆæ‰èƒ½å®Œæˆï¼Œè€Œäº‹åŠ¡å¯ä»¥ä¿è¯å¤šæ¡DMLè¯­å¥åŒæ—¶æˆåŠŸæˆ–è€…åŒæ—¶å¤±è´¥ï¼Œä»è€Œä¿è¯æ•°æ®çš„å®‰å…¨ã€‚ä¾‹å¦‚Aè´¦æˆ·å‘Bè´¦æˆ·è½¬è´¦ä¸€ä¸‡ï¼ŒAè´¦æˆ·å‡å»ä¸€ä¸‡(update)å’ŒBè´¦æˆ·åŠ ä¸Šä¸€ä¸‡(update)ï¼Œå¿…é¡»åŒæ—¶æˆåŠŸæˆ–è€…åŒæ—¶å¤±è´¥ï¼Œæ‰èƒ½ä¿è¯æ•°æ®æ˜¯æ­£ç¡®çš„ã€‚</p><p>å¦è¯·å‚è§è€æœå‘å¸ƒçš„2024ç‰ˆMySQLæ•™å­¦è§†é¢‘ã€‚åœ¨æœ¬å¥—æ•™ç¨‹ä¸­è¯¦ç»†è®²è§£äº†æ•°æ®åº“äº‹åŠ¡æœºåˆ¶ã€‚<br><img src="https://i0.hdslb.com/bfs/article/2221319beaf1722ebe32837b1121c266645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/3921163e518c65f4cc017954b7b33596645325325.png" alt="image.png"></p><p>â€</p><h1 id="ä½¿ç”¨è½¬è´¦æ¡ˆä¾‹æ¼”ç¤ºäº‹åŠ¡"><a href="#ä½¿ç”¨è½¬è´¦æ¡ˆä¾‹æ¼”ç¤ºäº‹åŠ¡" class="headerlink" title="ä½¿ç”¨è½¬è´¦æ¡ˆä¾‹æ¼”ç¤ºäº‹åŠ¡"></a>ä½¿ç”¨è½¬è´¦æ¡ˆä¾‹æ¼”ç¤ºäº‹åŠ¡</h1><h2 id="è¡¨å’Œæ•°æ®çš„å‡†å¤‡"><a href="#è¡¨å’Œæ•°æ®çš„å‡†å¤‡" class="headerlink" title="è¡¨å’Œæ•°æ®çš„å‡†å¤‡"></a>è¡¨å’Œæ•°æ®çš„å‡†å¤‡</h2><p>t_actè¡¨ï¼š<br><img src="https://i0.hdslb.com/bfs/article/e18955fc9fbd641b693ad91f7f5211e6645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/edc0cbc2e3331d32ec210d24927ed426645325325.png" alt="image.png"></p><p>â€</p><h2 id="å®ç°è½¬è´¦åŠŸèƒ½"><a href="#å®ç°è½¬è´¦åŠŸèƒ½" class="headerlink" title="å®ç°è½¬è´¦åŠŸèƒ½"></a>å®ç°è½¬è´¦åŠŸèƒ½</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.powernode.jdbc.utils.DbUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: JDBCTest19</span></span><br><span class="line"><span class="comment"> * Description: å®ç°è´¦æˆ·è½¬è´¦</span></span><br><span class="line"><span class="comment"> * Datetime: 2024/4/12 15:20</span></span><br><span class="line"><span class="comment"> * Author: è€æœ@åŠ¨åŠ›èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * Version: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest19</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è½¬è´¦é‡‘é¢</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">10000.0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps2</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–° act-001 è´¦æˆ·</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql1</span> <span class="operator">=</span> <span class="string">&quot;update t_act set balance = balance - ? where actno = ?&quot;</span>;</span><br><span class="line">            ps1 = conn.prepareStatement(sql1);</span><br><span class="line">            ps1.setDouble(<span class="number">1</span>, money);</span><br><span class="line">            ps1.setString(<span class="number">2</span>, <span class="string">&quot;act-001&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">count1</span> <span class="operator">=</span> ps1.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–° act-002è´¦æˆ·</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="string">&quot;update t_act set balance = balance + ? where actno = ?&quot;</span>;</span><br><span class="line">            ps2 = conn.prepareStatement(sql2);</span><br><span class="line">            ps2.setDouble(<span class="number">1</span>, money);</span><br><span class="line">            ps2.setString(<span class="number">2</span>, <span class="string">&quot;act-002&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">count2</span> <span class="operator">=</span> ps2.executeUpdate();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(<span class="literal">null</span>, ps1, <span class="literal">null</span>);</span><br><span class="line">            DbUtils.close(conn, ps1, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/c1f2a6f3fd404d5693ebbf7940662b31645325325.png" alt="image.png"></p><p>â€</p><h2 id="JDBCäº‹åŠ¡é»˜è®¤æ˜¯è‡ªåŠ¨æäº¤çš„"><a href="#JDBCäº‹åŠ¡é»˜è®¤æ˜¯è‡ªåŠ¨æäº¤çš„" class="headerlink" title="JDBCäº‹åŠ¡é»˜è®¤æ˜¯è‡ªåŠ¨æäº¤çš„"></a>JDBCäº‹åŠ¡é»˜è®¤æ˜¯è‡ªåŠ¨æäº¤çš„</h2><p>JDBCäº‹åŠ¡é»˜è®¤æƒ…å†µä¸‹æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œæ‰€è°“çš„è‡ªåŠ¨æäº¤æ˜¯æŒ‡ï¼šåªè¦æ‰§è¡Œä¸€æ¡DMLè¯­å¥åˆ™è‡ªåŠ¨æäº¤ä¸€æ¬¡ã€‚æµ‹è¯•ä¸€ä¸‹ï¼Œåœ¨ä»¥ä¸‹ä»£ç ä½ç½®æ·»åŠ æ–­ç‚¹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/8f3d95727162021fef5dc4974a37328e645325325.png" alt="image.png"><br>è®©ä»£ç æ‰§è¡Œåˆ°æ–­ç‚¹å¤„ï¼š<br><img src="https://i0.hdslb.com/bfs/article/76ffe330cb936ba5071321fd74e9f0ff645325325.png" alt="image.png"><br>è®©ç¨‹åºåœåœ¨æ­¤å¤„ï¼Œçœ‹çœ‹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼š<br><img src="https://i0.hdslb.com/bfs/article/1ae4a87f7a902ff6626f51e4b34c4bc7645325325.png" alt="image.png"><br>å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªè½¬è´¦çš„ä¸šåŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œact-001 è´¦æˆ·çš„ä½™é¢å·²ç»è¢«ä¿®æ”¹ä¸º 30000äº†ï¼Œä¸ºä»€ä¹ˆä¿®æ”¹ä¸º 30000äº†ï¼Œå› ä¸ºJDBCäº‹åŠ¡é»˜è®¤æƒ…å†µä¸‹æ˜¯è‡ªåŠ¨æäº¤ï¼Œåªè¦æ‰§è¡Œä¸€æ¡DMLè¯­å¥åˆ™è‡ªåŠ¨æäº¤ä¸€æ¬¡ã€‚è¿™ç§è‡ªåŠ¨æäº¤æ˜¯æå…¶å±é™©çš„ã€‚å¦‚æœåœ¨æ­¤æ—¶ç¨‹åºå‘ç”Ÿäº†å¼‚å¸¸ï¼Œact-002è´¦æˆ·çš„ä½™é¢æœªæˆåŠŸæ›´æ–°ï¼Œåˆ™é’±ä¼šä¸¢å¤±ä¸€ä¸‡ã€‚æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼šæµ‹è¯•å‰å…ˆå°†æ•°æ®æ¢å¤åˆ°èµ·åˆçš„æ—¶å€™<br><img src="https://i0.hdslb.com/bfs/article/1738d5d0a1c44ca9ada38da71545ed73645325325.png" alt="image.png"><br>åœ¨ä»¥ä¸‹ä»£ç ä½ç½®ï¼Œè®©å…¶å‘ç”Ÿå¼‚å¸¸ï¼š<br><img src="https://i0.hdslb.com/bfs/article/4b24ad1b2a71f1f770927286dcdec113645325325.png" alt="image.png"><br>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/a4be48bcd69d06757302c60beafc1304645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/6c9e98bfa75f355d85dafd8d71be6c68645325325.png" alt="image.png"><br>ç»è¿‡æµ‹è¯•å¾—çŸ¥ï¼Œä¸¢å¤±äº†ä¸€ä¸‡å…ƒã€‚</p><p>â€</p><h2 id="æ·»åŠ äº‹åŠ¡æ§åˆ¶"><a href="#æ·»åŠ äº‹åŠ¡æ§åˆ¶" class="headerlink" title="æ·»åŠ äº‹åŠ¡æ§åˆ¶"></a>æ·»åŠ äº‹åŠ¡æ§åˆ¶</h2><p>å¦‚ä½•è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œåˆ†ä¸‰æ­¥ï¼š<br>ç¬¬ä¸€æ­¥ï¼šå°†JDBCäº‹åŠ¡çš„è‡ªåŠ¨æäº¤æœºåˆ¶ä¿®æ”¹ä¸ºæ‰‹åŠ¨æäº¤ï¼ˆå³å¼€å¯äº‹åŠ¡ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conn.setAutoCommit(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼šå½“æ•´ä¸ªä¸šåŠ¡å®Œæ•´ç»“æŸåï¼Œæ‰‹åŠ¨æäº¤äº‹åŠ¡ï¼ˆå³æäº¤äº‹åŠ¡ï¼Œäº‹åŠ¡ç»“æŸï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conn.commit();</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼šåœ¨å¤„ç†ä¸šåŠ¡è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™è¿›å…¥catchè¯­å¥å—è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œæ‰‹åŠ¨å›æ»šäº‹åŠ¡ï¼ˆå³å›æ»šäº‹åŠ¡ï¼Œäº‹åŠ¡ç»“æŸï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conn.rollback();</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest19</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è½¬è´¦é‡‘é¢</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">10000.0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps2</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å¼€å¯äº‹åŠ¡ï¼ˆå…³é—­è‡ªåŠ¨æäº¤æœºåˆ¶ï¼‰</span></span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–° act-001 è´¦æˆ·</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql1</span> <span class="operator">=</span> <span class="string">&quot;update t_act set balance = balance - ? where actno = ?&quot;</span>;</span><br><span class="line">            ps1 = conn.prepareStatement(sql1);</span><br><span class="line">            ps1.setDouble(<span class="number">1</span>, money);</span><br><span class="line">            ps1.setString(<span class="number">2</span>, <span class="string">&quot;act-001&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">count1</span> <span class="operator">=</span> ps1.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            s.toString();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–° act-002è´¦æˆ·</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="string">&quot;update t_act set balance = balance + ? where actno = ?&quot;</span>;</span><br><span class="line">            ps2 = conn.prepareStatement(sql2);</span><br><span class="line">            ps2.setDouble(<span class="number">1</span>, money);</span><br><span class="line">            ps2.setString(<span class="number">2</span>, <span class="string">&quot;act-002&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">count2</span> <span class="operator">=</span> ps2.executeUpdate();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">            conn.commit();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// é‡åˆ°å¼‚å¸¸å›æ»šäº‹åŠ¡</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.rollback();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(<span class="literal">null</span>, ps1, <span class="literal">null</span>);</span><br><span class="line">            DbUtils.close(conn, ps1, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†æ•°æ®æ¢å¤å¦‚åˆï¼š<br><img src="https://i0.hdslb.com/bfs/article/174b53d21ef33da0b9bddc1fbcfb3331645325325.png" alt="image.png"><br>æ‰§è¡Œç¨‹åºï¼Œä»ç„¶ä¼šå‡ºç°å¼‚å¸¸ï¼š<br><img src="https://i0.hdslb.com/bfs/article/f14710ad2616096b579cc59ce64c35d2645325325.png" alt="image.png"><br>ä½†æ˜¯æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®æ˜¯å®‰å…¨çš„ï¼š<br><img src="https://i0.hdslb.com/bfs/article/a563f805b521f92d11ab22de6af6efe3645325325.png" alt="image.png"><br>å½“ç¨‹åºä¸å‡ºç°å¼‚å¸¸æ—¶ï¼š<br><img src="https://i0.hdslb.com/bfs/article/8ffbdc92b89a64879ec16b9dc8f68b4c645325325.png" alt="image.png"><br>æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼š<br><img src="https://i0.hdslb.com/bfs/article/fd51c976f31f674fbd27f667c279274d645325325.png" alt="image.png"><br>è¿™æ ·å°±é‡‡ç”¨äº†JDBCäº‹åŠ¡è§£å†³äº†æ•°æ®å®‰å…¨çš„é—®é¢˜ã€‚</p><p>â€</p><h1 id="è®¾ç½®JDBCäº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#è®¾ç½®JDBCäº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="è®¾ç½®JDBCäº‹åŠ¡éš”ç¦»çº§åˆ«"></a>è®¾ç½®JDBCäº‹åŠ¡éš”ç¦»çº§åˆ«</h1><p>å…³äºäº‹åŠ¡éš”ç¦»çº§åˆ«ç›¸å…³å†…å®¹å¦è¯·å‚è§ï¼šè€æœå‘å¸ƒçš„2024ç‰ˆMySQLæ•™ç¨‹ã€‚<br>è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ä¹Ÿæ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œåœ¨JDBCç¨‹åºä¸­åº”è¯¥å¦‚ä½•è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å‘¢ï¼Ÿä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest20</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DbUtils.getConnection();</span><br><span class="line">            conn.setTransactionIsolation(Connection.TRANSACTION_SERIALIZABLE);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DbUtils.close(conn, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬04ç«  SQLæ³¨å…¥</title>
      <link href="/posts/3186.html"/>
      <url>/posts/3186.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="SQLæ³¨å…¥é—®é¢˜"><a href="#SQLæ³¨å…¥é—®é¢˜" class="headerlink" title="SQLæ³¨å…¥é—®é¢˜"></a>SQLæ³¨å…¥é—®é¢˜</h1><p>SQLæ³¨å…¥é—®é¢˜è¯´çš„æ˜¯ï¼šç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯ä¸­å«æœ‰SQLè¯­å¥å…³é”®å­—ï¼Œå’Œç¨‹åºä¸­çš„SQLè¯­å¥è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¯¼è‡´ç¨‹åºä¸­çš„SQLè¯­å¥æ”¹å˜äº†åŸæ„ã€‚ï¼ˆSQLæ³¨å…¥é—®é¢˜æ˜¯ä¸€ç§ç³»ç»Ÿå®‰å…¨é—®é¢˜ï¼‰<br>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ¼”ç¤ºä¸€ä¸‹SQLæ³¨å…¥é—®é¢˜ã€‚ä»¥ç”¨æˆ·ç™»å½•ä¸ºä¾‹ã€‚ä½¿ç”¨è¡¨ï¼št_user<br>ä¸šåŠ¡æè¿°ï¼šç³»ç»Ÿå¯åŠ¨åï¼Œç»™å‡ºç™»å½•é¡µé¢ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç”¨æˆ·åå’Œå¯†ç å…¨éƒ¨æ­£ç¡®ï¼Œåˆ™ç™»å½•æˆåŠŸï¼Œåä¹‹ï¼Œåˆ™ç™»å½•å¤±è´¥ã€‚<br>åˆ†æä¸€ä¸‹è¦æ‰§è¡Œæ€æ ·çš„SQLè¯­å¥ï¼Ÿæ˜¯ä¸æ˜¯è¿™æ ·çš„ï¼Ÿ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_user <span class="keyword">where</span> name <span class="operator">=</span> ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å <span class="keyword">and</span> password <span class="operator">=</span> ç”¨æˆ·è¾“å…¥çš„å¯†ç ;</span><br></pre></td></tr></table></figure><p>å¦‚æœä»¥ä¸Šçš„SQLè¯­å¥èƒ½å¤ŸæŸ¥è¯¢åˆ°ç»“æœï¼Œè¯´æ˜ç”¨æˆ·åå’Œå¯†ç æ˜¯æ­£ç¡®çš„ï¼Œåˆ™ç™»å½•æˆåŠŸã€‚å¦‚æœæŸ¥ä¸åˆ°ï¼Œè¯´æ˜æ˜¯é”™è¯¯çš„ï¼Œåˆ™ç™»å½•å¤±è´¥ã€‚<br>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·ç™»å½•æ¡ˆä¾‹æ¼”ç¤ºSQLæ³¨å…¥é—®é¢˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è¾“å‡ºæ¬¢è¿é¡µé¢</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ¬¢è¿ä½¿ç”¨ç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œè¯·ç™»å½•ï¼&quot;</span>);</span><br><span class="line">        <span class="comment">// æ¥æ”¶ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;ç”¨æˆ·åï¼š&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loginName</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">        System.out.print(<span class="string">&quot;å¯†ç ï¼š&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loginPwd</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">        <span class="comment">// è¯»å–å±æ€§é…ç½®æ–‡ä»¶ï¼Œè·å–è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯ã€‚</span></span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="comment">// JDBCç¨‹åºéªŒè¯ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2.è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3.è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line">            <span class="comment">// 4.æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select realname from t_user where name = &#x27;&quot;</span>+loginName+<span class="string">&quot;&#x27; and password = &#x27;&quot;</span>+loginPwd+<span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">            rs = stmt.executeQuery(sql);</span><br><span class="line">            <span class="comment">// 5.å¤„ç†æŸ¥è¯¢ç»“æœé›†</span></span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123; <span class="comment">// å¦‚æœå¯ä»¥ç¡®å®šç»“æœé›†ä¸­æœ€å¤šåªæœ‰ä¸€æ¡è®°å½•çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ifè¯­å¥ï¼Œä¸ä¸€å®šéè¦ç”¨whileå¾ªç¯ã€‚</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">realname</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;realname&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;ç™»å½•æˆåŠŸï¼Œæ¬¢è¿æ‚¨&quot;</span> + realname);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·åä¸å­˜åœ¨æˆ–è€…å¯†ç é”™è¯¯ã€‚&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6.é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (stmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœç”¨æˆ·åå’Œå¯†ç æ­£ç¡®çš„è¯ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/9484f80eb3370e8b19add5e235389351645325325.png" alt="image.png"></p><p>å¦‚æœç”¨æˆ·åä¸å­˜åœ¨æˆ–è€…å¯†ç é”™è¯¯çš„è¯ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/4c7821c0b5119bd4c257062aa2d7dc6c645325325.png" alt="image.png"></p><p>æ¥ä¸‹æ¥ï¼Œè§è¯å¥‡è¿¹çš„æ—¶åˆ»ï¼Œå½“æˆ‘åˆ†åˆ«è¾“å…¥ä»¥ä¸‹çš„ç”¨æˆ·åå’Œå¯†ç æ—¶ï¼Œç³»ç»Ÿè¢«æ”»ç ´äº†ï¼š<br><img src="https://i0.hdslb.com/bfs/article/3611bfb1a9d258c83002d3fc9fe08137645325325.png" alt="image.png"><br>è¿™ç§ç°è±¡å°±å«åšï¼šSQLæ³¨å…¥ã€‚ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿä»¥ä¸Šçš„äº‹å„¿å‘¢ï¼ŸåŸå› æ˜¯ï¼šç”¨æˆ·æä¾›çš„ä¿¡æ¯ä¸­æœ‰SQLè¯­å¥å…³é”®å­—ï¼Œå¹¶ä¸”å’Œåº•å±‚çš„SQLå­—ç¬¦ä¸²è¿›è¡Œäº†æ‹¼æ¥ï¼Œå˜æˆäº†ä¸€ä¸ªå…¨æ–°çš„SQLè¯­å¥ã€‚<br>ä¾‹å¦‚ï¼šæœ¬æ¥ç¨‹åºæƒ³è¡¨è¾¾çš„æ˜¯è¿™æ ·çš„SQLï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> realname <span class="keyword">from</span> t_user <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;sunwukong&#x27;</span> <span class="keyword">and</span> password <span class="operator">=</span> <span class="string">&#x27;123&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç»“æœè¢«SQLæ³¨å…¥ä¹‹åï¼ŒSQLè¯­å¥å°±å˜æˆè¿™æ ·äº†ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> realname <span class="keyword">from</span> t_user <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;aaa&#x27;</span> <span class="keyword">and</span> password <span class="operator">=</span> <span class="string">&#x27;bbb&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;1&#x27;</span><span class="operator">=</span><span class="string">&#x27;1&#x27;</span>;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥æ‰§è¡Œä¸€ä¸‹è¿™æ¡SQLï¼Œçœ‹çœ‹ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ<br><img src="https://i0.hdslb.com/bfs/article/9dedc2e818e0d46113505598a7aba5c3645325325.png" alt="image.png"><br>æŠŠæ‰€æœ‰ç»“æœå…¨éƒ¨æŸ¥åˆ°äº†ï¼Œè¿™æ˜¯å› ä¸º â€˜1â€™&#x3D;â€™1â€™ æ˜¯æ’æˆç«‹çš„ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯ or è¿ç®—ç¬¦ï¼Œæ‰€ä»¥ or å‰é¢çš„æ¡ä»¶ç­‰äºæ˜¯æ²¡æœ‰çš„ã€‚è¿™æ ·å°±ä¼šæŠŠæ‰€æœ‰æ•°æ®å…¨éƒ¨æŸ¥åˆ°ã€‚è€Œåœ¨ç¨‹åºä¸­çš„åˆ¤æ–­é€»è¾‘æ˜¯åªè¦ç»“æœé›†ä¸­æœ‰æ•°æ®ï¼Œåˆ™è¡¨ç¤ºç™»å½•æˆåŠŸã€‚æ‰€ä»¥ä»¥ä¸Šçš„è¾“å…¥æ–¹å¼æœ€ç»ˆçš„ç»“æœå°±æ˜¯ç™»å½•æˆåŠŸã€‚ä½ è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœè¿™ä¸ªç³»ç»Ÿæ˜¯ä¸€ä¸ªé«˜çº§åˆ«ä¿å¯†ç³»ç»Ÿï¼Œåªæœ‰ç™»å½•æˆåŠŸçš„äººæ‰æœ‰æƒé™ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿæ˜¯ä¸æ˜¯æå…¶å±é™©äº†ã€‚</p><p>â€</p><h1 id="è§£å†³SQLæ³¨å…¥é—®é¢˜"><a href="#è§£å†³SQLæ³¨å…¥é—®é¢˜" class="headerlink" title="è§£å†³SQLæ³¨å…¥é—®é¢˜"></a>è§£å†³SQLæ³¨å…¥é—®é¢˜</h1><p>å¯¼è‡´SQLæ³¨å…¥çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿåªæœ‰æ‰¾åˆ°çœŸæ­£çš„åŸå› ï¼Œé—®é¢˜æ‰èƒ½å¾—åˆ°è§£å†³ã€‚</p><p>æœ€æ ¹æœ¬çš„åŸå› æ˜¯ï¼šStatementé€ æˆçš„ã€‚</p><p>Statementæ‰§è¡ŒåŸç†æ˜¯ï¼šå…ˆè¿›è¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Œå°†æ‹¼æ¥å¥½çš„SQLè¯­å¥å‘é€ç»™æ•°æ®åº“æœåŠ¡å™¨ï¼Œæ•°æ®åº“æœåŠ¡å™¨è¿›è¡ŒSQLè¯­å¥çš„ç¼–è¯‘ï¼Œç„¶åæ‰§è¡Œã€‚å› æ­¤ç”¨æˆ·æä¾›çš„ä¿¡æ¯ä¸­å¦‚æœå«æœ‰SQLè¯­å¥çš„å…³é”®å­—ï¼Œé‚£ä¹ˆè¿™äº›å…³é”®å­—æ­£å¥½å‚åŠ äº†SQLè¯­å¥çš„ç¼–è¯‘ï¼Œæ‰€ä»¥å¯¼è‡´åŸSQLè¯­å¥è¢«æ‰­æ›²ã€‚</p><p>å› æ­¤ï¼ŒJDBCä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ¥å£ï¼šPreparedStatementï¼Œæˆ‘ä»¬ç§°ä¸ºï¼šé¢„ç¼–è¯‘çš„æ•°æ®åº“æ“ä½œå¯¹è±¡ã€‚PreparedStatementæ˜¯Statementæ¥å£çš„å­æ¥å£ã€‚å®ƒä¿©æ˜¯ç»§æ‰¿å…³ç³»ã€‚</p><p>PreparedStatementæ‰§è¡ŒåŸç†æ˜¯ï¼šå…ˆå¯¹SQLè¯­å¥è¿›è¡Œé¢„å…ˆçš„ç¼–è¯‘ï¼Œç„¶åå†å‘SQLè¯­å¥æŒ‡å®šçš„ä½ç½®ä¼ å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šç”¨æˆ·æä¾›çš„ä¿¡æ¯ä¸­å³ä½¿å«æœ‰SQLè¯­å¥çš„å…³é”®å­—ï¼Œé‚£ä¹ˆè¿™ä¸ªä¿¡æ¯ä¹Ÿåªä¼šè¢«å½“åšä¸€ä¸ªå€¼ä¼ é€’ç»™SQLè¯­å¥ï¼Œç”¨æˆ·æä¾›çš„ä¿¡æ¯ä¸å†å‚ä¸SQLè¯­å¥çš„ç¼–è¯‘äº†ï¼Œè¿™æ ·å°±è§£å†³äº†SQLæ³¨å…¥é—®é¢˜ã€‚</p><p>ä½¿ç”¨PreparedStatementè§£å†³SQLæ³¨å…¥é—®é¢˜ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * PreparedStatementè§£å†³SQLæ³¨å…¥é—®é¢˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// è¾“å‡ºæ¬¢è¿é¡µé¢</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ¬¢è¿ä½¿ç”¨ç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œè¯·ç™»å½•ï¼&quot;</span>);</span><br><span class="line">        <span class="comment">// æ¥æ”¶ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;ç”¨æˆ·åï¼š&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loginName</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">        System.out.print(<span class="string">&quot;å¯†ç ï¼š&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loginPwd</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">        <span class="comment">// è¯»å–å±æ€§é…ç½®æ–‡ä»¶ï¼Œè·å–è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯ã€‚</span></span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="comment">// JDBCç¨‹åºéªŒè¯ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1.æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2.è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3.è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡ï¼ˆè·å–çš„æ˜¯é¢„ç¼–è¯‘çš„æ•°æ®åº“æ“ä½œå¯¹è±¡ï¼‰</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select realname from t_user where name=? and password=?&quot;</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            pstmt.setString(<span class="number">1</span>, loginName);</span><br><span class="line">            pstmt.setString(<span class="number">2</span>, loginPwd);</span><br><span class="line">            <span class="comment">// 4.æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            rs = pstmt.executeQuery();</span><br><span class="line">            <span class="comment">// 5.å¤„ç†æŸ¥è¯¢ç»“æœé›†</span></span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">realname</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;realname&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;ç™»å½•æˆåŠŸï¼Œæ¬¢è¿æ‚¨&quot;</span> + realname);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·åä¸å­˜åœ¨æˆ–è€…å¯†ç é”™è¯¯ã€‚&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6.é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®çš„è¯ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/f95f8aabea8092c46ab93c5c09ae1e95645325325.png" alt="image.png"></p><p>ç”¨æˆ·åå’Œå¯†ç é”™è¯¯çš„è¯ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/ae8c33fea5e51501e3042870b9f36829645325325.png" alt="image.png"></p><p>å°è¯•SQLæ³¨å…¥ï¼Œçœ‹çœ‹è¿˜èƒ½ä¸èƒ½ï¼Ÿ<br><img src="https://i0.hdslb.com/bfs/article/ee2b43bc9ec0060b4d94c26280962922645325325.png" alt="image.png"><br>é€šè¿‡æµ‹è¯•å¾—çŸ¥ï¼ŒSQLæ³¨å…¥é—®é¢˜å·²ç»è§£å†³äº†ã€‚<strong>æ ¹æœ¬åŸå› æ˜¯ï¼šbbbâ€™ or â€˜1â€™&#x3D;â€™1 è¿™ä¸ªå­—ç¬¦ä¸²ä¸­è™½ç„¶å«æœ‰SQLè¯­å¥çš„å…³é”®å­—ï¼Œä½†æ˜¯åªä¼šè¢«å½“åšæ™®é€šçš„å€¼ä¼ åˆ°SQLè¯­å¥ä¸­ï¼Œå¹¶æ²¡æœ‰å‚ä¸SQLè¯­å¥çš„ç¼–è¯‘</strong>ã€‚</p><p><strong>å…³äºä½¿ç”¨PreparedStatementè¦æ³¨æ„çš„æ˜¯ï¼š</strong></p><ul><li>å¸¦æœ‰å ä½ç¬¦ ? çš„SQLè¯­å¥æˆ‘ä»¬ç§°ä¸ºï¼šé¢„å¤„ç†SQLè¯­å¥ã€‚</li><li>å ä½ç¬¦ ? ä¸èƒ½ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·åŒ…è£¹ã€‚å¦‚æœåŒ…è£¹ï¼Œå ä½ç¬¦åˆ™ä¸å†æ˜¯å ä½ç¬¦ï¼Œæ˜¯ä¸€ä¸ªæ™®é€šçš„é—®å·å­—ç¬¦ã€‚</li><li>åœ¨æ‰§è¡ŒSQLè¯­å¥å‰ï¼Œå¿…é¡»ç»™æ¯ä¸€ä¸ªå ä½ç¬¦ ? ä¼ å€¼ã€‚</li><li>å¦‚ä½•ç»™å ä½ç¬¦ ? ä¼ å€¼ï¼Œé€šè¿‡ä»¥ä¸‹çš„æ–¹æ³•ï¼š<ul><li>pstmt.setXxx(ç¬¬å‡ ä¸ªå ä½ç¬¦, ä¼ ä»€ä¹ˆå€¼)</li><li>â€œç¬¬å‡ ä¸ªå ä½ç¬¦â€ï¼šä»1å¼€å§‹ã€‚ç¬¬1ä¸ªå ä½ç¬¦åˆ™æ˜¯1ï¼Œç¬¬2ä¸ªå ä½ç¬¦åˆ™æ˜¯2ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li><li>â€œä¼ ä»€ä¹ˆå€¼â€ï¼šå…·ä½“è¦çœ‹è°ƒç”¨çš„ä»€ä¹ˆæ–¹æ³•ï¼Ÿ<ul><li>å¦‚æœè°ƒç”¨pstmt.setStringæ–¹æ³•ï¼Œåˆ™ä¼ çš„å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li><li>å¦‚æœè°ƒç”¨pstmt.setIntæ–¹æ³•ï¼Œåˆ™ä¼ çš„å€¼å¿…é¡»æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚</li><li>ä»¥æ­¤ç±»æ¨â€¦â€¦</li></ul></li></ul></li></ul><p><strong>PreparedStatementå’ŒStatementéƒ½æ˜¯ç”¨äºæ‰§è¡ŒSQLè¯­å¥çš„æ¥å£ï¼Œå®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š</strong></p><ul><li>PreparedStatementé¢„ç¼–è¯‘SQLè¯­å¥ï¼ŒStatementç›´æ¥æäº¤SQLè¯­å¥ï¼›</li><li>PreparedStatementæ‰§è¡Œé€Ÿåº¦æ›´å¿«ï¼Œå¯ä»¥é¿å…SQLæ³¨å…¥æ”»å‡»ï¼›(PreparedStatementå¯¹äºåŒä¸€æ¡SQLè¯­å¥æ¥è¯´ï¼Œç¼–è¯‘ä¸€æ¬¡ï¼Œæ‰§è¡ŒNæ¬¡ã€‚è€ŒStatementæ˜¯æ¯æ¬¡éƒ½è¦è¿›è¡Œç¼–è¯‘çš„ã€‚å› æ­¤PreparedStatementæ•ˆç‡ç•¥å¾®é«˜ä¸€äº›ã€‚)</li><li>PreparedStatementä¼šåšç±»å‹æ£€æŸ¥ï¼Œæ˜¯ç±»å‹å®‰å…¨çš„ï¼›</li></ul><p>â€</p><h1 id="PreparedStatementçš„ä½¿ç”¨"><a href="#PreparedStatementçš„ä½¿ç”¨" class="headerlink" title="PreparedStatementçš„ä½¿ç”¨"></a>PreparedStatementçš„ä½¿ç”¨</h1><h2 id="æ–°å¢æ“ä½œ"><a href="#æ–°å¢æ“ä½œ" class="headerlink" title="æ–°å¢æ“ä½œ"></a>æ–°å¢æ“ä½œ</h2><p>éœ€æ±‚ï¼šå‘ emp è¡¨ä¸­æ’å…¥è¿™æ ·ä¸€æ¡è®°å½•ï¼š<br>empnoï¼š8888<br>enameï¼šå¼ ä¸‰<br>jobï¼šé”€å”®å‘˜<br>mgrï¼š7369<br>hiredateï¼š2024-01-01<br>salï¼š1000.0<br>commï¼š500.0<br>deptnoï¼š10</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3. è·å–é¢„ç¼–è¯‘çš„æ•°æ®æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into emp(empno,ename,sal,comm,job,mgr,hiredate,deptno) values(?,?,?,?,?,?,?,?)&quot;</span>;</span><br><span class="line">            <span class="comment">// é¢„ç¼–è¯‘SQLè¯­å¥</span></span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// ç»™ ? ä¼ å€¼</span></span><br><span class="line">            pstmt.setInt(<span class="number">1</span>, <span class="number">8888</span>);</span><br><span class="line">            pstmt.setString(<span class="number">2</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">            pstmt.setDouble(<span class="number">3</span>, <span class="number">10000.0</span>);</span><br><span class="line">            pstmt.setDouble(<span class="number">4</span>, <span class="number">500.0</span>);</span><br><span class="line">            pstmt.setString(<span class="number">5</span>, <span class="string">&quot;é”€å”®å‘˜&quot;</span>);</span><br><span class="line">            pstmt.setInt(<span class="number">6</span>, <span class="number">7369</span>);</span><br><span class="line">            <span class="type">LocalDate</span> <span class="variable">localDate</span> <span class="operator">=</span> LocalDate.parse(<span class="string">&quot;2024-01-01&quot;</span>);</span><br><span class="line">            pstmt.setDate(<span class="number">7</span>, java.sql.Date.valueOf(localDate));</span><br><span class="line">            pstmt.setInt(<span class="number">8</span>, <span class="number">10</span>);</span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> pstmt.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">1</span> == count) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆåŠŸæ›´æ–°&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡ç‚¹å­¦ä¹ å†…å®¹ï¼šå¦‚ä½•ç»™å ä½ç¬¦ ? ä¼ å€¼ã€‚<br>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/0eb9b231e616d399ceb1ebe2d8e9a1eb645325325.png" alt="image.png"></p><p>â€</p><h2 id="ä¿®æ”¹æ“ä½œ"><a href="#ä¿®æ”¹æ“ä½œ" class="headerlink" title="ä¿®æ”¹æ“ä½œ"></a>ä¿®æ”¹æ“ä½œ</h2><p>éœ€æ±‚ï¼šå°†å‘˜å·¥ç¼–å·ä¸º8888çš„å‘˜å·¥ï¼Œå§“åä¿®æ”¹ä¸ºæå››ï¼Œå²—ä½ä¿®æ”¹ä¸ºäº§å“ç»ç†ï¼Œæœˆè–ªä¿®æ”¹ä¸º5000.0ï¼Œå…¶ä»–ä¸å˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest05</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3. è·å–é¢„ç¼–è¯‘çš„æ•°æ®æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update emp set ename = ?, job = ?, sal = ? where empno = ?&quot;</span>;</span><br><span class="line">            <span class="comment">// é¢„ç¼–è¯‘SQLè¯­å¥</span></span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// ç»™ ? ä¼ å€¼</span></span><br><span class="line">            pstmt.setString(<span class="number">1</span>, <span class="string">&quot;æå››&quot;</span>);</span><br><span class="line">            pstmt.setString(<span class="number">2</span>, <span class="string">&quot;äº§å“ç»ç†&quot;</span>);</span><br><span class="line">            pstmt.setDouble(<span class="number">3</span>, <span class="number">5000.0</span>);</span><br><span class="line">            pstmt.setInt(<span class="number">4</span>, <span class="number">8888</span>);</span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> pstmt.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">1</span> == count) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆåŠŸæ›´æ–°&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/4cdb7e5a0421b90f5394ae9af1955b15645325325.png" alt="image.png"></p><p>â€</p><h2 id="åˆ é™¤æ“ä½œ"><a href="#åˆ é™¤æ“ä½œ" class="headerlink" title="åˆ é™¤æ“ä½œ"></a>åˆ é™¤æ“ä½œ</h2><p>éœ€æ±‚ï¼šå°†å‘˜å·¥ç¼–å·ä¸º8888çš„åˆ é™¤ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest06</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3. è·å–é¢„ç¼–è¯‘çš„æ•°æ®æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from emp where empno = ?&quot;</span>;</span><br><span class="line">            <span class="comment">// é¢„ç¼–è¯‘SQLè¯­å¥</span></span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// ç»™ ? ä¼ å€¼</span></span><br><span class="line">            pstmt.setInt(<span class="number">1</span>, <span class="number">8888</span>);</span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> pstmt.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">1</span> == count) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æˆåŠŸæ›´æ–°&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/5336074c48251e244601cec3f9e25295645325325.png" alt="image.png"></p><p>â€</p><h2 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h2><p>éœ€æ±‚ï¼šæŸ¥è¯¢å‘˜å·¥åå­—ä¸­ç¬¬äºŒä¸ªå­—æ¯æ˜¯ O çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest07</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3. è·å–é¢„ç¼–è¯‘çš„æ•°æ®æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select ename from emp where ename like ?&quot;</span>;</span><br><span class="line">            <span class="comment">// é¢„ç¼–è¯‘SQLè¯­å¥</span></span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// ç»™ ? ä¼ å€¼</span></span><br><span class="line">            pstmt.setString(<span class="number">1</span>, <span class="string">&quot;_O%&quot;</span>);</span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            rs = pstmt.executeQuery();</span><br><span class="line">            <span class="comment">// 5. å¤„ç†æŸ¥è¯¢ç»“æœé›†</span></span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">ename</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;ename&quot;</span>);</span><br><span class="line">                System.out.println(ename);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/58f42986b3d3081e4bafe679f6122db1645325325.png" alt="image.png"><br>é€šè¿‡è¿™ä¸ªä¾‹å­ä¸»è¦å‘Šè¯‰å¤§å®¶ï¼Œç¨‹åºä¸èƒ½è¿™æ ·å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select ename from emp where ename like &#x27;_?%&#x27;&quot;</span>;</span><br><span class="line">pstmt.setString(<span class="number">1</span>, <span class="string">&quot;O&quot;</span>);</span><br></pre></td></tr></table></figure><p>ç”±äºå ä½ç¬¦ ? è¢«å•å¼•å·åŒ…è£¹ï¼Œå› æ­¤è¿™ä¸ªå ä½ç¬¦æ˜¯æ— æ•ˆçš„ã€‚</p><p>â€</p><h2 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h2><p>å¯¹äºMySQLæ¥è¯´ï¼Œé€šç”¨çš„åˆ†é¡µSQLè¯­å¥ï¼š<br>å‡è®¾æ¯é¡µæ˜¾ç¤º3æ¡è®°å½•ï¼špageSize &#x3D; 3<br>ç¬¬1é¡µï¼šlimit 0, 3<br>ç¬¬2é¡µï¼šlimit 3, 3<br>ç¬¬3é¡µï¼šlimit 6, 3<br><em>*ç¬¬pageNoé¡µï¼šlimit (pageNo - 1)*â€‹**pageSize, pageSize</em>*<br>éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥å§“åï¼Œæ¯é¡µæ˜¾ç¤º3æ¡(pageSize)ï¼Œæ˜¾ç¤ºç¬¬2é¡µ(pageNo)ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest08</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¯é¡µæ˜¾ç¤ºè®°å½•æ¡æ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pageSize</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">        <span class="comment">// æ˜¾ç¤ºç¬¬å‡ é¡µ</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pageNo</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3. è·å–é¢„ç¼–è¯‘çš„æ•°æ®æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select ename from emp limit ?, ?&quot;</span>;</span><br><span class="line">            <span class="comment">// é¢„ç¼–è¯‘SQLè¯­å¥</span></span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// ç»™ ? ä¼ å€¼</span></span><br><span class="line">            pstmt.setInt(<span class="number">1</span>, (pageNo - <span class="number">1</span>) * pageSize);</span><br><span class="line">            pstmt.setInt(<span class="number">2</span>, pageSize);</span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            rs = pstmt.executeQuery();</span><br><span class="line">            <span class="comment">// 5. å¤„ç†æŸ¥è¯¢ç»“æœé›†</span></span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">ename</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;ename&quot;</span>);</span><br><span class="line">                System.out.println(ename);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/507d250946a5b5f58fd705f069ba8c08645325325.png" alt="image.png"></p><p>â€</p><h2 id="blobæ•°æ®çš„æ’å…¥å’Œè¯»å–"><a href="#blobæ•°æ®çš„æ’å…¥å’Œè¯»å–" class="headerlink" title="blobæ•°æ®çš„æ’å…¥å’Œè¯»å–"></a>blobæ•°æ®çš„æ’å…¥å’Œè¯»å–</h2><p>å‡†å¤‡ä¸€å¼ è¡¨ï¼št_imgï¼Œä¸‰ä¸ªå­—æ®µï¼Œä¸€ä¸ªidä¸»é”®ï¼Œä¸€ä¸ªå›¾ç‰‡åå­—nameï¼Œä¸€ä¸ªimgã€‚<br>å»ºè¡¨è¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `t_img` (</span><br><span class="line">  `id` <span class="type">bigint</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  `img` <span class="type">blob</span></span><br><span class="line">) engine<span class="operator">=</span>innodb;</span><br></pre></td></tr></table></figure><p>å‡†å¤‡ä¸€å¼ å›¾ç‰‡ï¼š<br><img src="https://i0.hdslb.com/bfs/article/26318cae1fc1f73a560d25c94492c426645325325.jpg" alt="dog.jpg"></p><p>éœ€æ±‚1ï¼šå‘t_img è¡¨ä¸­æ’å…¥ä¸€å¼ å›¾ç‰‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest09</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3. è·å–é¢„ç¼–è¯‘çš„æ•°æ®æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_img(img) values(?)&quot;</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// è·å–æ–‡ä»¶è¾“å…¥æµ</span></span><br><span class="line">            in = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d:/dog.jpg&quot;</span>);</span><br><span class="line">            pstmt.setBlob(<span class="number">1</span>, in);</span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> pstmt.executeUpdate();</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥äº†&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (in != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    in.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/d6b731061b2dcfe58fb1a07269b2defe645325325.png" alt="image.png"></p><p>éœ€æ±‚2ï¼šä»t_img è¡¨ä¸­è¯»å–ä¸€å¼ å›¾ç‰‡ã€‚ï¼ˆä»æ•°æ®åº“ä¸­è¯»å–ä¸€å¼ å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°ã€‚ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest10</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3. è·å–é¢„ç¼–è¯‘çš„æ•°æ®æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select img from t_img where id = ?&quot;</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            pstmt.setInt(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            rs = pstmt.executeQuery();</span><br><span class="line">            <span class="comment">// 5. å¤„ç†æŸ¥è¯¢ç»“æœé›†</span></span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                <span class="comment">// è·å–äºŒè¿›åˆ¶å¤§å¯¹è±¡</span></span><br><span class="line">                <span class="type">Blob</span> <span class="variable">img</span> <span class="operator">=</span> rs.getBlob(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">                <span class="comment">// è·å–è¾“å…¥æµ</span></span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">binaryStream</span> <span class="operator">=</span> img.getBinaryStream();</span><br><span class="line">                <span class="comment">// åˆ›å»ºè¾“å‡ºæµï¼Œè¯¥è¾“å‡ºæµè´Ÿè´£å†™åˆ°æœ¬åœ°</span></span><br><span class="line">                <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;d:/dog2.jpg&quot;</span>);</span><br><span class="line">                <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                <span class="type">int</span> <span class="variable">readCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> ((readCount = binaryStream.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                    out.write(bytes, <span class="number">0</span>, readCount);</span><br><span class="line">                &#125;</span><br><span class="line">                out.flush();</span><br><span class="line">                binaryStream.close();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæ¯•ä¹‹åï¼ŒæŸ¥çœ‹ä¸€ä¸‹å›¾ç‰‡å¤§å°æ˜¯å¦å’ŒåŸå›¾ç‰‡ç›¸åŒï¼Œæ‰“å¼€çœ‹çœ‹æ˜¯å¦å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚</p><p>â€</p><h1 id="JDBCæ‰¹å¤„ç†æ“ä½œ"><a href="#JDBCæ‰¹å¤„ç†æ“ä½œ" class="headerlink" title="JDBCæ‰¹å¤„ç†æ“ä½œ"></a>JDBCæ‰¹å¤„ç†æ“ä½œ</h1><p>å‡†å¤‡ä¸€å¼ å•†å“è¡¨ï¼št_product<br>å»ºè¡¨è¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_product(</span><br><span class="line">  id <span class="type">bigint</span> <span class="keyword">primary</span> key,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="ä¸ä½¿ç”¨æ‰¹å¤„ç†"><a href="#ä¸ä½¿ç”¨æ‰¹å¤„ç†" class="headerlink" title="ä¸ä½¿ç”¨æ‰¹å¤„ç†"></a>ä¸ä½¿ç”¨æ‰¹å¤„ç†</h2><p>ä¸ä½¿ç”¨æ‰¹å¤„ç†ï¼Œå‘ t_product è¡¨ä¸­æ’å…¥ä¸€ä¸‡æ¡å•†å“ä¿¡æ¯ï¼Œå¹¶è®°å½•è€—æ—¶ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NoBatchTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3. è·å–é¢„ç¼–è¯‘çš„æ•°æ®æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_product(id, name) values (?, ?)&quot;</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10000</span>; i++) &#123;</span><br><span class="line">                pstmt.setInt(<span class="number">1</span>, i);</span><br><span class="line">                pstmt.setString(<span class="number">2</span>, <span class="string">&quot;product&quot;</span> + i);</span><br><span class="line">                <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">                count += pstmt.executeUpdate();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥äº†&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ€»è€—æ—¶&quot;</span> + (end - begin) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/ef67d22fd7c7249ca284bb4ed9780b2e645325325.png" alt="image.png"></p><p>â€</p><h2 id="ä½¿ç”¨æ‰¹å¤„ç†"><a href="#ä½¿ç”¨æ‰¹å¤„ç†" class="headerlink" title="ä½¿ç”¨æ‰¹å¤„ç†"></a>ä½¿ç”¨æ‰¹å¤„ç†</h2><p>ä½¿ç”¨æ‰¹å¤„ç†ï¼Œå‘ t_product è¡¨ä¸­æ’å…¥ä¸€ä¸‡æ¡å•†å“ä¿¡æ¯ï¼Œå¹¶è®°å½•è€—æ—¶ï¼<br><strong>æ³¨æ„ï¼šå¯ç”¨æ‰¹å¤„ç†éœ€è¦åœ¨URLåé¢æ·»åŠ è¿™ä¸ªçš„å‚æ•°ï¼šrewriteBatchedStatements&#x3D;true</strong><br><img src="https://i0.hdslb.com/bfs/article/c4a0d4239851a5c477f95c6277d134dd645325325.png" alt="image.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BatchTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">// 3. è·å–é¢„ç¼–è¯‘çš„æ•°æ®æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_product(id, name) values (?, ?)&quot;</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10000</span>; i++) &#123;</span><br><span class="line">                pstmt.setInt(<span class="number">1</span>, i);</span><br><span class="line">                pstmt.setString(<span class="number">2</span>, <span class="string">&quot;product&quot;</span> + i);</span><br><span class="line">                pstmt.addBatch();</span><br><span class="line">            &#125;</span><br><span class="line">            count += pstmt.executeBatch().length;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥äº†&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span> (pstmt != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    pstmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ€»è€—æ—¶&quot;</span> + (end - begin) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/b6f09a5948a3a99fc6e66e283f8b8732645325325.png" alt="image.png"></p><p>åœ¨è¿›è¡Œå¤§æ•°æ®é‡æ’å…¥æ—¶ï¼Œæ‰¹å¤„ç†ä¸ºä»€ä¹ˆå¯ä»¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Ÿ</p><ol><li>å‡å°‘äº†ç½‘ç»œé€šä¿¡æ¬¡æ•°ï¼šJDBC æ‰¹å¤„ç†ä¼šå°†å¤šä¸ª SQL è¯­å¥ä¸€æ¬¡æ€§å‘é€ç»™æœåŠ¡å™¨ï¼Œå‡å°‘äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ¬¡æ•°ï¼Œä»è€Œæé«˜äº†æ•°æ®å†™å…¥çš„é€Ÿåº¦ï¼Œç‰¹åˆ«æ˜¯å¯¹äºè¿œç¨‹æœåŠ¡å™¨è€Œè¨€ï¼Œä¼˜åŒ–æ•ˆæœæ›´ä¸ºæ˜¾è‘—ã€‚</li><li>å‡å°‘äº†æ•°æ®åº“æ“ä½œæ¬¡æ•°ï¼šJDBC æ‰¹å¤„ç†ä¼šå°†å¤šä¸ª SQL è¯­å¥åˆå¹¶æˆä¸€æ¡ SQL è¯­å¥è¿›è¡Œæ‰§è¡Œï¼Œä»è€Œå‡å°‘äº†æ•°æ®åº“æ“ä½œçš„æ¬¡æ•°ï¼Œå‡è½»äº†æ•°æ®åº“çš„è´Ÿæ‹…ï¼Œå¤§å¤§æé«˜äº†æ•°æ®å†™å…¥çš„é€Ÿåº¦ã€‚</li></ol><p>â€</p><h1 id="DbUtilså·¥å…·ç±»çš„å°è£…"><a href="#DbUtilså·¥å…·ç±»çš„å°è£…" class="headerlink" title="DbUtilså·¥å…·ç±»çš„å°è£…"></a>DbUtilså·¥å…·ç±»çš„å°è£…</h1><p>JDBCç¼–ç¨‹å…­æ­¥ä¸­ï¼Œå¾ˆå¤šä»£ç æ˜¯é‡å¤å‡ºç°çš„ï¼Œå¯ä»¥ä¸ºè¿™äº›ä»£ç å°è£…ä¸€ä¸ªå·¥å…·ç±»ã€‚è®©JDBCä»£ç å˜çš„æ›´ç®€æ´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: DbUtils</span></span><br><span class="line"><span class="comment"> * Description: JDBCå·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> * Datetime: 2024/4/10 22:29</span></span><br><span class="line"><span class="comment"> * Author: è€æœ@åŠ¨åŠ›èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * Version: 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DbUtils</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String user;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// è¯»å–å±æ€§èµ„æºæ–‡ä»¶</span></span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        url = bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        user = bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        password = bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="comment">// æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(driver);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æ•°æ®åº“è¿æ¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é‡Šæ”¾èµ„æº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> conn è¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> stmt æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> rs ç»“æœé›†å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Connection conn, Statement stmt, ResultSet rs)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (stmt != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                stmt.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬03ç«  JDBCçš„æŸ¥è¯¢</title>
      <link href="/posts/12565.html"/>
      <url>/posts/12565.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="JDBCçš„æŸ¥è¯¢æ“ä½œ"><a href="#JDBCçš„æŸ¥è¯¢æ“ä½œ" class="headerlink" title="JDBCçš„æŸ¥è¯¢æ“ä½œ"></a>JDBCçš„æŸ¥è¯¢æ“ä½œ</h1><p>ResultSet æ˜¯ JDBC ï¼ˆJava æ•°æ®åº“è¿æ¥ï¼‰ API æä¾›çš„æ¥å£ï¼Œå®ƒç”¨äºè¡¨ç¤º SQL æŸ¥è¯¢çš„ç»“æœé›†ã€‚ResultSet å¯¹è±¡ä¸­åŒ…å«äº†æŸ¥è¯¢ç»“æœçš„æ‰€æœ‰è¡Œï¼Œå¯ä»¥é€šè¿‡ next() æ–¹æ³•é€è¡Œåœ°è·å–å¹¶å¤„ç†æ¯ä¸€è¡Œçš„æ•°æ®ã€‚å®ƒæœ€å¸¸ç”¨äºæ‰§è¡Œ SELECT è¯­å¥æŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†ã€‚</p><p>ResultSet çš„éå†æ˜¯åŸºäº JDBC çš„æµå¼å¤„ç†æœºåˆ¶çš„ï¼Œå³ä¸€è¡Œä¸€è¡Œåœ°è·å–ç»“æœï¼Œé¿å…å°†æ‰€æœ‰ç»“æœå…¨éƒ¨å–å‡ºåå†è¿›è¡Œå¤„ç†å¯¼è‡´å†…å­˜æº¢å‡ºé—®é¢˜ã€‚</p><p>åœ¨ä½¿ç”¨ ResultSet éå†æŸ¥è¯¢ç»“æœæ—¶ï¼Œä¸€èˆ¬ä¼šé‡‡ç”¨ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>æ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œè·å– ResultSet å¯¹è±¡ã€‚</li><li>ä½¿ç”¨ ResultSet çš„ next() æ–¹æ³•ç§»åŠ¨æ¸¸æ ‡æŒ‡å‘ç»“æœé›†çš„ä¸‹ä¸€è¡Œï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ›´å¤šçš„æ•°æ®è¡Œã€‚</li><li>å¦‚æœæœ‰æ›´å¤šçš„æ•°æ®è¡Œï¼Œåˆ™ä½¿ç”¨ ResultSet å¯¹è±¡æä¾›çš„ getXXX() æ–¹æ³•è·å–å½“å‰è¡Œçš„å„ä¸ªå­—æ®µï¼ˆXXX è¡¨ç¤ºä¸åŒçš„æ•°æ®ç±»å‹ï¼‰ã€‚ä¾‹å¦‚ï¼ŒgetLong(â€œidâ€) æ–¹æ³•ç”¨äºè·å–å½“å‰è¡Œçš„ id åˆ—å¯¹åº”çš„ Long ç±»å‹çš„å€¼ã€‚</li><li>å¤„ç†å½“å‰è¡Œçš„æ•°æ®ï¼Œä¾‹å¦‚å°†å…¶å­˜å…¥ Java å¯¹è±¡ä¸­ã€‚</li><li>é‡å¤æ‰§è¡Œæ­¥éª¤ 2~4ï¼Œç›´åˆ°ç»“æœé›†ä¸­çš„æ‰€æœ‰è¡Œéƒ½è¢«éå†å®Œæ¯•ã€‚</li><li>è°ƒç”¨ ResultSet çš„ close() æ–¹æ³•é‡Šæ”¾èµ„æºã€‚</li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨å®Œ ResultSet å¯¹è±¡ä¹‹åï¼Œéœ€è¦åŠæ—¶å…³é—­å®ƒï¼Œä»¥é‡Šæ”¾æ•°æ®åº“èµ„æºå¹¶é¿å…æ½œåœ¨çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚å¦åˆ™ï¼Œå¦‚æœåœ¨å¤šä¸ªçº¿ç¨‹ä¸­æ‰“å¼€äº†å¤šä¸ª ResultSet å¯¹è±¡ï¼Œå¹¶ä¸”æ²¡æœ‰æ­£ç¡®å…³é—­å®ƒä»¬çš„è¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“è¿æ¥è¿‡å¤šï¼Œä»è€Œå½±å“ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</p><p>â€</p><h2 id="é€šè¿‡åˆ—ç´¢å¼•è·å–æ•°æ®ï¼ˆä»¥Stringç±»å‹è·å–ï¼‰"><a href="#é€šè¿‡åˆ—ç´¢å¼•è·å–æ•°æ®ï¼ˆä»¥Stringç±»å‹è·å–ï¼‰" class="headerlink" title="é€šè¿‡åˆ—ç´¢å¼•è·å–æ•°æ®ï¼ˆä»¥Stringç±»å‹è·å–ï¼‰"></a>é€šè¿‡åˆ—ç´¢å¼•è·å–æ•°æ®ï¼ˆä»¥Stringç±»å‹è·å–ï¼‰</h2><p>éœ€æ±‚ï¼šè·å–t_userè¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼Œåœ¨æ§åˆ¶å°æ‰“å°è¾“å‡ºæ¯ä¸€è¡Œçš„æ•°æ®ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id,name,password,realname,gender,tel <span class="keyword">from</span> t_user;</span><br></pre></td></tr></table></figure><p>è¦æŸ¥è¯¢çš„æ•°æ®å¦‚ä¸‹å›¾ï¼š<br><img src="https://i0.hdslb.com/bfs/article/b4fdb4fe9fe96d1cfd8c719e2d026256645325325.png" alt="image.png"><br>ä»£ç å¦‚ä¸‹ï¼ˆé‡ç‚¹å…³æ³¨ç¬¬4æ­¥ ç¬¬5æ­¥ ç¬¬6æ­¥ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest09</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å±æ€§æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id,name,password,realname,gender,tel from t_user&quot;</span>;</span><br><span class="line">            rs = stmt.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5. å¤„ç†æŸ¥è¯¢ç»“æœé›†ï¼ˆè¿™é‡Œçš„å¤„ç†æ–¹å¼å°±æ˜¯ï¼šéå†æ‰€æœ‰æ•°æ®å¹¶è¾“å‡ºï¼‰</span></span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> rs.getString(<span class="number">1</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="number">2</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> rs.getString(<span class="number">3</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">realname</span> <span class="operator">=</span> rs.getString(<span class="number">4</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">gender</span> <span class="operator">=</span> rs.getString(<span class="number">5</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">tel</span> <span class="operator">=</span> rs.getString(<span class="number">6</span>);</span><br><span class="line">                System.out.println(id + <span class="string">&quot;\t&quot;</span> + name + <span class="string">&quot;\t&quot;</span> + pwd + <span class="string">&quot;\t&quot;</span> + realname + <span class="string">&quot;\t&quot;</span> + gender + <span class="string">&quot;\t&quot;</span> + tel);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/731c587365c91971600cbf585b0be049645325325.png" alt="image.png"></p><p>ä»£ç è§£è¯»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id,name,password,realname,gender,tel from t_user&quot;</span>;</span><br><span class="line">rs = stmt.executeQuery(sql);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œinsert delete updateè¯­å¥çš„æ—¶å€™ï¼Œè°ƒç”¨Statementæ¥å£çš„executeUpdate()æ–¹æ³•ã€‚<br>æ‰§è¡Œselectè¯­å¥çš„æ—¶å€™ï¼Œ<strong>è°ƒç”¨Statementæ¥å£çš„executeQuery()æ–¹æ³•</strong>ã€‚æ‰§è¡Œselectè¯­å¥åè¿”å›ç»“æœé›†å¯¹è±¡ï¼šResultSetã€‚</p><p>ä»£ç è§£è¯»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 5. å¤„ç†æŸ¥è¯¢ç»“æœé›†ï¼ˆè¿™é‡Œçš„å¤„ç†æ–¹å¼å°±æ˜¯ï¼šéå†æ‰€æœ‰æ•°æ®å¹¶è¾“å‡ºï¼‰</span></span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> rs.getString(<span class="number">1</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="number">2</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> rs.getString(<span class="number">3</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">realname</span> <span class="operator">=</span> rs.getString(<span class="number">4</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">gender</span> <span class="operator">=</span> rs.getString(<span class="number">5</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">tel</span> <span class="operator">=</span> rs.getString(<span class="number">6</span>);</span><br><span class="line">    System.out.println(id + <span class="string">&quot;\t&quot;</span> + name + <span class="string">&quot;\t&quot;</span> + pwd + <span class="string">&quot;\t&quot;</span> + realname + <span class="string">&quot;\t&quot;</span> + gender + <span class="string">&quot;\t&quot;</span> + tel);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>rs.next() å°†æ¸¸æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼Œå¦‚æœç§»åŠ¨åæŒ‡å‘çš„è¿™ä¸€è¡Œæœ‰æ•°æ®åˆ™è¿”å›trueï¼Œæ²¡æœ‰æ•°æ®åˆ™è¿”å›falseã€‚</strong></li><li><strong>whileå¾ªç¯ä½“å½“ä¸­çš„ä»£ç æ˜¯å¤„ç†å½“å‰æ¸¸æ ‡æŒ‡å‘çš„è¿™ä¸€è¡Œçš„æ•°æ®ã€‚ï¼ˆæ³¨æ„ï¼šæ˜¯å¤„ç†çš„ä¸€è¡Œæ•°æ®ï¼‰</strong></li><li><strong>rs.getString(int columnIndex) å…¶ä¸­ int columnIndex æ˜¯æŸ¥è¯¢ç»“æœçš„åˆ—ä¸‹æ ‡ï¼Œåˆ—ä¸‹æ ‡ä»1å¼€å§‹ï¼Œä»¥1é€’å¢ã€‚</strong></li></ul><p><img src="https://i0.hdslb.com/bfs/article/82e563fe2fbc0eeb18b58962415438a4645325325.png" alt="image.png"></p><ul><li><strong>rs.getString(â€¦) æ–¹æ³•åœ¨æ‰§è¡Œæ—¶ï¼Œä¸ç®¡åº•å±‚æ•°æ®åº“ä¸­çš„æ•°æ®ç±»å‹æ˜¯ä»€ä¹ˆï¼Œç»Ÿä¸€ä»¥å­—ç¬¦ä¸²Stringç±»å‹æ¥è·å–ã€‚</strong></li></ul><p>ä»£ç è§£è¯»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line"><span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        rs.close();</span><br><span class="line">    &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        stmt.close();</span><br><span class="line">    &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        conn.close();</span><br><span class="line">    &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ResultSetæœ€ç»ˆä¹Ÿæ˜¯éœ€è¦å…³é—­çš„ã€‚<strong>å…ˆå…³é—­ResultSetï¼Œå†å…³é—­Statementï¼Œæœ€åå…³é—­Connection</strong>ã€‚</p><p>â€</p><h2 id="é€šè¿‡åˆ—åè·å–æ•°æ®ï¼ˆä»¥Stringç±»å‹è·å–ï¼‰"><a href="#é€šè¿‡åˆ—åè·å–æ•°æ®ï¼ˆä»¥Stringç±»å‹è·å–ï¼‰" class="headerlink" title="é€šè¿‡åˆ—åè·å–æ•°æ®ï¼ˆä»¥Stringç±»å‹è·å–ï¼‰"></a>é€šè¿‡åˆ—åè·å–æ•°æ®ï¼ˆä»¥Stringç±»å‹è·å–ï¼‰</h2><p>è·å–å½“å‰è¡Œçš„æ•°æ®ï¼Œä¸ä»…å¯ä»¥é€šè¿‡åˆ—ä¸‹æ ‡è·å–ï¼Œè¿˜å¯ä»¥é€šè¿‡æŸ¥è¯¢ç»“æœçš„åˆ—åæ¥è·å–ï¼Œé€šå¸¸è¿™ç§æ–¹å¼æ˜¯è¢«æ¨èçš„ï¼Œå› ä¸ºå¯è¯»æ€§å¥½ã€‚<br>ä¾‹å¦‚è¿™æ ·çš„SQLï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id, name <span class="keyword">as</span> username, realname <span class="keyword">from</span> t_user;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœæ˜¯ï¼š<br><img src="https://i0.hdslb.com/bfs/article/893b39b5b97ad30ab8d1d71f270405d0645325325.png" alt="image.png"><br>æˆ‘ä»¬å¯ä»¥æŒ‰ç…§æŸ¥è¯¢ç»“æœçš„åˆ—åæ¥è·å–æ•°æ®ï¼š<br><img src="https://i0.hdslb.com/bfs/article/58ec4f06c3e04944fe35a4c97d3d3058645325325.png" alt="image.png"><br><strong>æ³¨æ„ï¼šæ˜¯æ ¹æ®æŸ¥è¯¢ç»“æœçš„åˆ—åï¼Œè€Œä¸æ˜¯è¡¨ä¸­çš„åˆ—åã€‚ä»¥ä¸ŠæŸ¥è¯¢çš„æ—¶å€™å°†å­—æ®µnameèµ·åˆ«åusernameäº†ï¼Œæ‰€ä»¥è¦æ ¹æ®usernameæ¥è·å–ï¼Œè€Œä¸èƒ½å†æ ¹æ®nameæ¥è·å–äº†ã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest10</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å±æ€§æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id,name as username,realname from t_user&quot;</span>;</span><br><span class="line">            rs = stmt.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5. å¤„ç†æŸ¥è¯¢ç»“æœé›†ï¼ˆè¿™é‡Œçš„å¤„ç†æ–¹å¼å°±æ˜¯ï¼šéå†æ‰€æœ‰æ•°æ®å¹¶è¾“å‡ºï¼‰</span></span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">realname</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;realname&quot;</span>);</span><br><span class="line">                System.out.println(id + <span class="string">&quot;\t&quot;</span> + name + <span class="string">&quot;\t&quot;</span> + realname);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/3e301755d6af6825224dd51b7bf59304645325325.png" alt="image.png"></p><p>å¦‚æœå°†ä¸Šé¢ä»£ç ä¸­<code>rs.getString(&quot;username&quot;)</code>ä¿®æ”¹ä¸º<code>rs.getString(&quot;name&quot;)</code>ï¼Œæ‰§è¡Œå°±ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š<br><img src="https://i0.hdslb.com/bfs/article/ba8f5b16c2fe5a9d0b3d36b855dee964645325325.png" alt="image.png"><br>æç¤ºnameåˆ—æ˜¯ä¸å­˜åœ¨çš„ã€‚æ‰€ä»¥ä¸€å®šæ˜¯æ ¹æ®æŸ¥è¯¢ç»“æœä¸­çš„åˆ—åæ¥è·å–ï¼Œè€Œä¸æ˜¯è¡¨ä¸­åŸå§‹çš„åˆ—åã€‚</p><p>â€</p><h2 id="ä»¥æŒ‡å®šçš„ç±»å‹è·å–æ•°æ®"><a href="#ä»¥æŒ‡å®šçš„ç±»å‹è·å–æ•°æ®" class="headerlink" title="ä»¥æŒ‡å®šçš„ç±»å‹è·å–æ•°æ®"></a>ä»¥æŒ‡å®šçš„ç±»å‹è·å–æ•°æ®</h2><p>å‰é¢çš„ç¨‹åºå¯ä»¥çœ‹åˆ°ï¼Œä¸ç®¡æ•°æ®åº“è¡¨ä¸­æ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹ï¼Œéƒ½ä»¥Stringç±»å‹è¿”å›ã€‚å½“ç„¶ï¼Œä¹Ÿèƒ½ä»¥æŒ‡å®šç±»å‹è¿”å›ã€‚<br>ä½¿ç”¨PowerDesignerå†è®¾è®¡ä¸€å¼ å•†å“è¡¨ï¼št_productï¼Œä½¿ç”¨Navicat for MySQLå·¥å…·å‡†å¤‡æ•°æ®å¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/9eca166933274fc7b59356ee4a61270a645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/2a917daf62b8432f740ccce8dbf2f568645325325.png" alt="image.png"></p><p>idä»¥longç±»å‹è·å–ï¼Œnameä»¥Stringç±»å‹è·å–ï¼Œpriceä»¥doubleç±»å‹è·å–ï¼Œcreate_timeä»¥java.sql.Dateç±»å‹è·å–ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest11</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å±æ€§æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id,name,price,create_time as createTime from t_product&quot;</span>;</span><br><span class="line">            rs = stmt.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5. å¤„ç†æŸ¥è¯¢ç»“æœé›†ï¼ˆè¿™é‡Œçš„å¤„ç†æ–¹å¼å°±æ˜¯ï¼šéå†æ‰€æœ‰æ•°æ®å¹¶è¾“å‡ºï¼‰</span></span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">long</span> <span class="variable">id</span> <span class="operator">=</span> rs.getLong(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                <span class="type">double</span> <span class="variable">price</span> <span class="operator">=</span> rs.getDouble(<span class="string">&quot;price&quot;</span>);</span><br><span class="line">                java.sql.<span class="type">Date</span> <span class="variable">createTime</span> <span class="operator">=</span> rs.getDate(<span class="string">&quot;createTime&quot;</span>);</span><br><span class="line">                <span class="comment">// ä»¥æŒ‡å®šç±»å‹è·å–åæ˜¯å¯ä»¥ç›´æ¥ç”¨çš„ï¼Œä¾‹å¦‚è·å–åˆ°ä»·æ ¼åï¼Œç»Ÿä¸€è®©ä»·æ ¼ä¹˜ä»¥2</span></span><br><span class="line">                System.out.println(id + <span class="string">&quot;\t&quot;</span> + name + <span class="string">&quot;\t&quot;</span> + price * <span class="number">2</span> + <span class="string">&quot;\t&quot;</span> + createTime);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/f3db3b8290dcf019b29959580fe47cef645325325.png" alt="image.png"></p><p>â€</p><h2 id="è·å–ç»“æœé›†çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆäº†è§£ï¼‰"><a href="#è·å–ç»“æœé›†çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆäº†è§£ï¼‰" class="headerlink" title="è·å–ç»“æœé›†çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆäº†è§£ï¼‰"></a>è·å–ç»“æœé›†çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆäº†è§£ï¼‰</h2><p>ResultSetMetaData æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç”¨äºæè¿° ResultSet ä¸­çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå³æŸ¥è¯¢ç»“æœé›†çš„ç»“æ„ä¿¡æ¯ï¼Œä¾‹å¦‚æŸ¥è¯¢ç»“æœé›†ä¸­åŒ…å«äº†å“ªäº›åˆ—ï¼Œæ¯ä¸ªåˆ—çš„æ•°æ®ç±»å‹ã€é•¿åº¦ã€æ ‡è¯†ç¬¦ç­‰ã€‚</p><p>ResultSetMetaData å¯ä»¥é€šè¿‡ ResultSet æ¥å£çš„ getMetaData() æ–¹æ³•è·å–ï¼Œä¸€èˆ¬åœ¨å¯¹ ResultSet è¿›è¡Œå…ƒæ•°æ®ä¿¡æ¯å¤„ç†æ—¶ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ ResultSetMetaData å¯¹è±¡è·å–æŸ¥è¯¢ç»“æœä¸­åˆ—çš„ä¿¡æ¯ï¼Œå¦‚åˆ—åã€åˆ—çš„ç±»å‹ã€åˆ—çš„é•¿åº¦ç­‰ã€‚é€šè¿‡ ResultSetMetaData æ¥å£çš„æ–¹æ³•ï¼Œå¯ä»¥å®ç°å¯¹æŸ¥è¯¢ç»“æœçš„åŸºæœ¬æè¿°ä¿¡æ¯æ“ä½œï¼Œä¾‹å¦‚è·å–æŸ¥è¯¢ç»“æœé›†ä¸­æœ‰å¤šå°‘åˆ—ã€åˆ—çš„ç±»å‹ã€åˆ—çš„æ ‡è¯†ç¬¦ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€æ®µé€šè¿‡ ResultSetMetaData è·å–æŸ¥è¯¢ç»“æœä¸­åˆ—çš„ä¿¡æ¯çš„ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSetMetaData;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest12</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å±æ€§æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id,name,price,create_time as createTime from t_product&quot;</span>;</span><br><span class="line">            rs = stmt.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å–å…ƒæ•°æ®ä¿¡æ¯</span></span><br><span class="line">            <span class="type">ResultSetMetaData</span> <span class="variable">rsmd</span> <span class="operator">=</span> rs.getMetaData();</span><br><span class="line">            <span class="type">int</span> <span class="variable">columnCount</span> <span class="operator">=</span> rsmd.getColumnCount();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= columnCount; i++) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;åˆ—åï¼š&quot;</span> + rsmd.getColumnName(i) + <span class="string">&quot;ï¼Œæ•°æ®ç±»å‹ï¼š&quot;</span> + rsmd.getColumnTypeName(i) +</span><br><span class="line">                                   <span class="string">&quot;ï¼Œåˆ—çš„é•¿åº¦ï¼š&quot;</span> + rsmd.getColumnDisplaySize(i));</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/ac81c6eabb3b1cc7d0a6e84d363656de645325325.png" alt="image.png"></p><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª Statement å¯¹è±¡ï¼Œç„¶åæ‰§è¡Œäº†ä¸€æ¡ SQL æŸ¥è¯¢è¯­å¥ï¼Œç”Ÿæˆäº†ä¸€ä¸ª ResultSet å¯¹è±¡ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ ResultSet å¯¹è±¡çš„ getMetaData() æ–¹æ³•è·å–äº† ResultSetMetaData å¯¹è±¡ï¼Œè¿›è€Œè·å–äº†æŸ¥è¯¢ç»“æœä¸­åˆ—çš„ä¿¡æ¯å¹¶è¿›è¡Œè¾“å‡ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿›è¡Œåˆ—ä¿¡æ¯çš„è·å–æ—¶ï¼Œåˆ—çš„ç¼–å·ä» 1 å¼€å§‹è®¡ç®—ã€‚è¯¥ç¤ºä¾‹ä»£ç å°†è·å–æŸ¥è¯¢ç»“æœé›†ä¸­æ‰€æœ‰åˆ—åã€æ•°æ®ç±»å‹ä»¥åŠé•¿åº¦ç­‰ä¿¡æ¯ã€‚</p><p>â€</p><h1 id="è·å–æ–°å¢è¡Œçš„ä¸»é”®å€¼"><a href="#è·å–æ–°å¢è¡Œçš„ä¸»é”®å€¼" class="headerlink" title="è·å–æ–°å¢è¡Œçš„ä¸»é”®å€¼"></a>è·å–æ–°å¢è¡Œçš„ä¸»é”®å€¼</h1><p>æœ‰å¾ˆå¤šè¡¨çš„ä¸»é”®å­—æ®µå€¼éƒ½æ˜¯è‡ªå¢çš„ï¼Œåœ¨æŸäº›ç‰¹æ®Šçš„ä¸šåŠ¡ç¯å¢ƒä¸‹ï¼Œå½“æˆ‘ä»¬æ’å…¥äº†æ–°æ•°æ®åï¼Œå¸Œæœ›èƒ½å¤Ÿè·å–åˆ°è¿™æ¡æ–°æ•°æ®çš„ä¸»é”®å€¼ï¼Œåº”è¯¥å¦‚ä½•è·å–å‘¢ï¼Ÿ<br>åœ¨ JDBC ä¸­ï¼Œå¦‚æœè¦è·å–æ’å…¥æ•°æ®åçš„ä¸»é”®å€¼ï¼Œå¯ä»¥ä½¿ç”¨ Statement æ¥å£çš„ executeUpdate() æ–¹æ³•çš„é‡è½½ç‰ˆæœ¬ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼Œç”¨äºæŒ‡å®šæ˜¯å¦éœ€è¦è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®å€¼ã€‚ç„¶åï¼Œé€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤è·å–æ’å…¥æ•°æ®åçš„ä¸»é”®å€¼ï¼š</p><ol><li>åœ¨æ‰§è¡Œ executeUpdate() æ–¹æ³•æ—¶æŒ‡å®šä¸€ä¸ªæ ‡å¿—ä½ï¼Œè¡¨ç¤ºéœ€è¦è¿”å›æ’å…¥çš„ä¸»é”®å€¼ã€‚</li><li>è°ƒç”¨ Statement å¯¹è±¡çš„ getGeneratedKeys() æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ’å…¥çš„ä¸»é”®å€¼çš„ ResultSet å¯¹è±¡ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest13</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å±æ€§æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_user(name,password,realname,gender,tel) values(&#x27;zhangsan&#x27;,&#x27;111&#x27;,&#x27;å¼ ä¸‰&#x27;,&#x27;ç”·&#x27;,&#x27;19856525352&#x27;)&quot;</span>;</span><br><span class="line">            <span class="comment">// ç¬¬ä¸€æ­¥</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql, Statement.RETURN_GENERATED_KEYS);</span><br><span class="line">            <span class="comment">// ç¬¬äºŒæ­¥</span></span><br><span class="line">            rs = stmt.getGeneratedKeys();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="number">1</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;æ–°å¢æ•°æ®è¡Œçš„ä¸»é”®å€¼ï¼š&quot;</span> + id);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/69d0993849deb5a53e185c3a2533ca8f645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/a70836c45247bf8769340ffa1406d1e6645325325.png" alt="image.png"><br>ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬å°† Statement.RETURN_GENERATED_KEYS ä¼ é€’ç»™ executeUpdate() æ–¹æ³•ï¼Œä»¥æŒ‡å®šéœ€è¦è·å–æ’å…¥çš„ä¸»é”®å€¼ã€‚ç„¶åï¼Œé€šè¿‡è°ƒç”¨ Statement å¯¹è±¡çš„ getGeneratedKeys() æ–¹æ³•è·å–åŒ…å«æ’å…¥çš„ä¸»é”®å€¼çš„ ResultSet å¯¹è±¡ï¼Œé€šè¿‡ ResultSet å¯¹è±¡è·å–ä¸»é”®å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨ Statement å¯¹è±¡çš„ getGeneratedKeys() æ–¹æ³•è·å–è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®å€¼æ—¶ï¼Œä¸»é”®å€¼çš„è·å–æ–¹å¼å…·æœ‰ä¸€å®šçš„å·®å¼‚ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„æ•°æ®åº“ç§ç±»å’Œç‰ˆæœ¬æ¥è¿›è¡Œè°ƒæ•´ã€‚</p><p>â€</p><h1 id="ä½¿ç”¨IDEAå·¥å…·ç¼–å†™JDBCç¨‹åº"><a href="#ä½¿ç”¨IDEAå·¥å…·ç¼–å†™JDBCç¨‹åº" class="headerlink" title="ä½¿ç”¨IDEAå·¥å…·ç¼–å†™JDBCç¨‹åº"></a>ä½¿ç”¨IDEAå·¥å…·ç¼–å†™JDBCç¨‹åº</h1><h2 id="åˆ›å»ºç©ºçš„å·¥ç¨‹å¹¶è®¾ç½®JDK"><a href="#åˆ›å»ºç©ºçš„å·¥ç¨‹å¹¶è®¾ç½®JDK" class="headerlink" title="åˆ›å»ºç©ºçš„å·¥ç¨‹å¹¶è®¾ç½®JDK"></a>åˆ›å»ºç©ºçš„å·¥ç¨‹å¹¶è®¾ç½®JDK</h2><p>åˆ›å»ºä¸€ä¸ªç©ºçš„å·¥ç¨‹ï¼šmypro<br><img src="https://i0.hdslb.com/bfs/article/19695e09a84248f2cb7c981db09b3479645325325.png" alt="image.png"></p><p>å·¥ç¨‹ç»“æ„ï¼š<br><img src="https://i0.hdslb.com/bfs/article/5e52c85f69652ccd554eee7d3dcfe484645325325.png" alt="image.png"></p><p>è®¾ç½®JDKä»¥åŠç¼–è¯‘å™¨ç‰ˆæœ¬ï¼š<br><img src="https://i0.hdslb.com/bfs/article/aee0725bca2bd8b288f220433bb9cc76645325325.png" alt="image.png"></p><p>â€</p><h2 id="åˆ›å»ºä¸€ä¸ªæ¨¡å—"><a href="#åˆ›å»ºä¸€ä¸ªæ¨¡å—" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ¨¡å—"></a>åˆ›å»ºä¸€ä¸ªæ¨¡å—</h2><p><img src="https://i0.hdslb.com/bfs/article/ce55bf6c5ba625c748882e02be4e90b6645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/23a7601b571ef52187978b60e8f172d3645325325.png" alt="image.png"></p><p>â€</p><h2 id="å°†é©±åŠ¨åŠ å…¥åˆ°CLASSPATH"><a href="#å°†é©±åŠ¨åŠ å…¥åˆ°CLASSPATH" class="headerlink" title="å°†é©±åŠ¨åŠ å…¥åˆ°CLASSPATH"></a>å°†é©±åŠ¨åŠ å…¥åˆ°CLASSPATH</h2><p>åœ¨æ¨¡å—jdbcä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•ï¼šlib<br><img src="https://i0.hdslb.com/bfs/article/edaa31664e24fc00ae64ccf05a5d9211645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/e777d023ecbc5a1cebac4e29eff30cfb645325325.png" alt="image.png"></p><p>å°†mysqlçš„é©±åŠ¨jaråŒ…æ‹·è´åˆ°libç›®å½•å½“ä¸­ï¼š<br><img src="https://i0.hdslb.com/bfs/article/1b22c405926ab895ed1942713eca4866645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/98b7cb46a95cc7d661082347fd7df053645325325.png" alt="image.png"></p><p>å°†jaråŒ…åŠ å…¥åˆ°classpathï¼š<br><img src="https://i0.hdslb.com/bfs/article/781fd0a4aa4900543c52eb118fb3a49b645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/3daf1242abf53b1890fb8b5c6a336725645325325.png" alt="image.png"></p><p>â€</p><h2 id="ç¼–å†™JDBCç¨‹åº"><a href="#ç¼–å†™JDBCç¨‹åº" class="headerlink" title="ç¼–å†™JDBCç¨‹åº"></a>ç¼–å†™JDBCç¨‹åº</h2><p>æ–°å»ºè½¯ä»¶åŒ…ï¼šcom.powernode.jdbc<br><img src="https://i0.hdslb.com/bfs/article/3b3dc2fe46e525de2e98557ee8b83f6c645325325.png" alt="image.png"></p><p>æ–°å»ºJDBCTest01ç±»ï¼š<br><img src="https://i0.hdslb.com/bfs/article/5a8f09bd0576e0bccbe145f04b2c0a33645325325.png" alt="image.png"></p><p>åœ¨JDBCTest01ç±»ä¸­ç¼–å†™mainæ–¹æ³•ï¼Œmainæ–¹æ³•ä¸­ç¼–å†™JDBCä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.powernode.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å±æ€§æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">        <span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;com.powernode.jdbc.jdbc&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id,name,password from t_user&quot;</span>;</span><br><span class="line">            rs = stmt.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">                System.out.println(id + <span class="string">&quot;,&quot;</span> + name + <span class="string">&quot;,&quot;</span> + pwd);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æä¾›é…ç½®æ–‡ä»¶ï¼Œåœ¨com.powernode.jdbcåŒ…ä¸‹æ–°å»ºjdbc.propertiesæ–‡ä»¶ï¼š<br><img src="https://i0.hdslb.com/bfs/article/3242e6b67adfea4bdff8c1f6ae969358645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/5ffacc9bbde9482ed43717182ecebcb4645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/78c85c61d7e7788c1d6e2a4f249e19df645325325.png" alt="image.png"></p><p>jdbc.propertiesæ–‡ä»¶ä¸­å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;useSSL=true&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="attr">user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/58c9847e7fe1a88fb47b1c0cc6478c7c645325325.png" alt="image.png"></p><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬02ç«  JDBCçš„æ–°å¢ä¿®æ”¹åˆ é™¤</title>
      <link href="/posts/62304.html"/>
      <url>/posts/62304.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="JDBCç¼–ç¨‹å…­æ­¥"><a href="#JDBCç¼–ç¨‹å…­æ­¥" class="headerlink" title="JDBCç¼–ç¨‹å…­æ­¥"></a>JDBCç¼–ç¨‹å…­æ­¥</h1><p>JDBCç¼–ç¨‹çš„æ­¥éª¤æ˜¯å¾ˆå›ºå®šçš„ï¼Œé€šå¸¸åŒ…å«ä»¥ä¸‹å…­æ­¥ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œé©±åŠ¨<ul><li>ä½œç”¨ä¸€ï¼šå°† JDBC é©±åŠ¨ç¨‹åºä»ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿä¸­åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</li><li>ä½œç”¨äºŒï¼šä½¿å¾— DriverManager å¯ä»¥é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æ¥ç®¡ç†è¯¥é©±åŠ¨ç¨‹åºçš„æ‰€æœ‰è¿æ¥æ“ä½œã€‚</li></ul></li><li>ç¬¬äºŒæ­¥ï¼šè·å–æ•°æ®åº“è¿æ¥<ul><li>è·å–java.sql.Connectionå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„åˆ›å»ºæ ‡å¿—ç€mysqlè¿›ç¨‹å’Œjvmè¿›ç¨‹ä¹‹é—´çš„é€šé“æ‰“å¼€äº†ã€‚</li></ul></li><li>ç¬¬ä¸‰æ­¥ï¼šè·å–æ•°æ®åº“æ“ä½œå¯¹è±¡<ul><li>è·å–java.sql.Statementå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£å°†SQLè¯­å¥å‘é€ç»™æ•°æ®åº“ï¼Œæ•°æ®åº“è´Ÿè´£æ‰§è¡Œè¯¥SQLè¯­å¥ã€‚</li></ul></li><li>ç¬¬å››æ­¥ï¼šæ‰§è¡ŒSQLè¯­å¥<ul><li>æ‰§è¡Œå…·ä½“çš„SQLè¯­å¥ï¼Œä¾‹å¦‚ï¼šinsert delete update selectç­‰ã€‚</li></ul></li><li>ç¬¬äº”æ­¥ï¼šå¤„ç†æŸ¥è¯¢ç»“æœé›†<ul><li>å¦‚æœä¹‹å‰çš„æ“ä½œæ˜¯DQLæŸ¥è¯¢è¯­å¥ï¼Œæ‰ä¼šæœ‰å¤„ç†æŸ¥è¯¢ç»“æœé›†è¿™ä¸€æ­¥ã€‚</li><li>æ‰§è¡ŒDQLè¯­å¥é€šå¸¸ä¼šè¿”å›æŸ¥è¯¢ç»“æœé›†å¯¹è±¡ï¼šjava.sql.ResultSetã€‚</li><li>å¯¹äºResultSetæŸ¥è¯¢ç»“æœé›†æ¥è¯´ï¼Œé€šå¸¸çš„æ“ä½œæ˜¯é’ˆå¯¹æŸ¥è¯¢ç»“æœé›†è¿›è¡Œç»“æœé›†çš„éå†ã€‚</li></ul></li><li>ç¬¬å…­æ­¥ï¼šé‡Šæ”¾èµ„æº<ul><li>é‡Šæ”¾èµ„æºå¯ä»¥é¿å…èµ„æºçš„æµªè´¹ã€‚åœ¨ JDBC ç¼–ç¨‹ä¸­ï¼Œæ¯æ¬¡ä½¿ç”¨å®Œ Connectionã€Statementã€ResultSet ç­‰èµ„æºåï¼Œéƒ½éœ€è¦æ˜¾å¼åœ°è°ƒç”¨å¯¹åº”çš„ close() æ–¹æ³•æ¥é‡Šæ”¾èµ„æºï¼Œé¿å…èµ„æºçš„æµªè´¹ã€‚</li><li>é‡Šæ”¾èµ„æºå¯ä»¥é¿å…å‡ºç°å†…å­˜æ³„éœ²é—®é¢˜ã€‚åœ¨ Java ä¸­ï¼Œå½“ä¸€ä¸ªå¯¹è±¡ä¸å†è¢«å¼•ç”¨æ—¶ï¼Œä¼šè¢« JVM çš„åƒåœ¾å›æ”¶æœºåˆ¶è¿›è¡Œå›æ”¶ã€‚ä½†æ˜¯åœ¨ JDBC ç¼–ç¨‹ä¸­ï¼Œå¦‚æœä¸æ˜¾å¼åœ°é‡Šæ”¾èµ„æºï¼Œé‚£ä¹ˆè¿™äº›èµ„æºå°±ä¸ä¼šè¢« JVM çš„åƒåœ¾å›æ”¶æœºåˆ¶è‡ªåŠ¨å›æ”¶ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„éœ²é—®é¢˜ã€‚</li></ul></li></ul><h1 id="æ•°æ®çš„å‡†å¤‡"><a href="#æ•°æ®çš„å‡†å¤‡" class="headerlink" title="æ•°æ®çš„å‡†å¤‡"></a>æ•°æ®çš„å‡†å¤‡</h1><p>ä½¿ç”¨PowerDesignerè®¾è®¡ç”¨æˆ·è¡¨t_userã€‚<br>ä½¿ç”¨Navicat for MySQLåˆ›å»ºæ•°æ®åº“ï¼Œåˆ›å»ºè¡¨ï¼Œæ’å…¥æ•°æ®ã€‚</p><h2 id="PowerDesignerä¸Navicat-for-MySQLçš„åŒºåˆ«"><a href="#PowerDesignerä¸Navicat-for-MySQLçš„åŒºåˆ«" class="headerlink" title="PowerDesignerä¸Navicat for MySQLçš„åŒºåˆ«"></a>PowerDesignerä¸Navicat for MySQLçš„åŒºåˆ«</h2><p>Navicat for MySQL æ˜¯ä¸€æ¬¾å¸¸ç”¨çš„ MySQL æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œæä¾›äº†ä¸°å¯Œçš„æ•°æ®åº“ç®¡ç†å’Œå¼€å‘å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œæ•°æ®åº“çš„è¿æ¥ã€æŸ¥è¯¢ã€ç®¡ç†ã€æ¨¡å‹è®¾è®¡ç­‰æ“ä½œï¼Œæ˜¯ MySQL å¼€å‘å’Œç®¡ç†çš„æ•ˆç‡å·¥å…·ã€‚</p><p>è€Œ PowerDesigner å·¥å…·åˆ™æ˜¯ä¸€æ¬¾ä¸“ä¸šçš„å»ºæ¨¡å·¥å…·ï¼Œå®ƒæ”¯æŒå¤šç§æ•°æ®åº“å’Œæ“ä½œç³»ç»Ÿï¼Œå¯ä»¥å®Œæˆæ•°æ®åº“è®¾è®¡ã€æ•°æ®å»ºæ¨¡ã€è¿‡ç¨‹å»ºæ¨¡ã€ä¼ä¸šä¸šåŠ¡å»ºæ¨¡ç­‰å·¥ä½œã€‚PowerDesigner å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜åœ¨æ•°æ®åº“è®¾è®¡å’Œå¼€å‘è¿‡ç¨‹ä¸­æ›´å¥½åœ°ç†è§£å’Œç®¡ç†æ•°æ®ï¼Œä¾¿äºååŒå¼€å‘å’Œé¡¹ç›®ç®¡ç†ã€‚å„ç§æ•°æ®åº“æŠ€æœ¯çš„å»ºæ¨¡å½¢å¼éƒ½å¯ä»¥å®ç°ï¼Œæœ‰å•ä¸ªæ•°æ®åº“å»ºæ¨¡åˆ°å¤šä¸ªæ•°æ®åº“å»ºæ¨¡å’Œä¸šåŠ¡å»ºæ¨¡ç­‰é«˜çº§åŠŸèƒ½ï¼Œ<strong>éå¸¸é€‚ç”¨äºå¤§å‹é¡¹ç›®ä¸­çš„æ•°æ®åº“è®¾è®¡å’Œå»ºæ¨¡</strong>ã€‚åŒæ—¶ï¼ŒPowerDesigner è¿˜æ”¯æŒ UMLï¼ŒJava ç­‰ç¼–ç¨‹è¯­è¨€çš„å»ºæ¨¡ï¼Œå¯ä»¥ä¸å¼€å‘è¯­è¨€æ— ç¼æ•´åˆã€‚</p><p>å› æ­¤ï¼ŒNavicat for MySQL å’Œ PowerDesigner çš„åŠŸèƒ½æ˜¯ä¸åŒçš„ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€è¦æ¥é€‰ç”¨ã€‚å¦‚æœåªæ˜¯é’ˆå¯¹ MySQL çš„æ•°æ®åº“è¿æ¥ã€æŸ¥è¯¢ã€ç®¡ç†ç­‰æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ Navicat for MySQL å·¥å…·ï¼Œè€Œå¦‚æœéœ€è¦è¿›è¡Œæ›´å¤æ‚çš„æ•°æ®åº“è®¾è®¡ã€å»ºæ¨¡å’Œæ•´åˆç­‰å·¥ä½œï¼Œå¯ä»¥ä½¿ç”¨ PowerDesigner å·¥å…·æ¥å®ç°ã€‚<strong>å¦‚æœä½¿ç”¨ MySQL æ•°æ®åº“è¿›è¡Œå¼€å‘ï¼Œä½¿ç”¨ Navicat for MySQL å’Œ PowerDesigner è¿™ä¸¤ä¸ªå·¥å…·ç›¸äº’é…åˆï¼Œå¯ä»¥æé«˜å¼€å‘æ•ˆç‡å’Œæ•°æ®ç®¡ç†è´¨é‡</strong>ã€‚</p><p>â€</p><h2 id="PowerDesignerå·¥å…·çš„å®‰è£…"><a href="#PowerDesignerå·¥å…·çš„å®‰è£…" class="headerlink" title="PowerDesignerå·¥å…·çš„å®‰è£…"></a>PowerDesignerå·¥å…·çš„å®‰è£…</h2><p>æ¥è¿™é‡Œä¸‹è½½è¯¥å·¥å…·ï¼šé“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1lRWC069K8GE-8rxr259ArQ?pwd=2009">https://pan.baidu.com/s/1lRWC069K8GE-8rxr259ArQ?pwd=2009</a> æå–ç ï¼š2009<br>åŒå‡»å®‰è£…åŒ…ï¼š<br><img src="https://i0.hdslb.com/bfs/article/59ff4f18376fe8615946501cfe414bfa645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/e875c51a8782c83233fdbff304406687645325325.png" alt="image.png"></p><p>æ¬¢è¿é¡µï¼š<br><img src="https://i0.hdslb.com/bfs/article/d5dc9f04d74b6e08511b080db0e27e1e645325325.png" alt="image.png"></p><p>é€‰æ‹©è¯•ç”¨15å¤©ï¼š<br><img src="https://i0.hdslb.com/bfs/article/de9cb7373aa22f1fe151bdac38fe13af645325325.png" alt="image.png"></p><p>é€‰æ‹©é¦™æ¸¯ï¼Œä»¥åŠæ¥å—ï¼š<br><img src="https://i0.hdslb.com/bfs/article/9b29d2810b3c968acc560cf54451dd14645325325.png" alt="image.png"></p><p>è®¾ç½®å®‰è£…ä½ç½®ï¼š<br><img src="https://i0.hdslb.com/bfs/article/43e14baec6ea10904ee16d548b0c10b2645325325.png" alt="image.png"></p><p>é€‰æ‹©ä½ è¦å®‰è£…çš„ï¼ˆé»˜è®¤å°±è¡Œï¼‰ï¼š<br><img src="https://i0.hdslb.com/bfs/article/9ca3e912b6f48e5f2abfdca671f84049645325325.png" alt="image.png"></p><p>é€‰æ‹©è¦å®‰è£…çš„ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼ˆé»˜è®¤å³å¯ï¼‰ï¼š<br><img src="https://i0.hdslb.com/bfs/article/f57a2a82c77b76ba89d7b6472226e9dc645325325.png" alt="image.png"></p><p>æ·»åŠ å›¾æ ‡ï¼š<br><img src="https://i0.hdslb.com/bfs/article/629909da6e54971e3904b1e9e1283637645325325.png" alt="image.png"></p><p>å®‰è£…æ¦‚è§ˆä¿¡æ¯ï¼š<br><img src="https://i0.hdslb.com/bfs/article/a69575590d0fd3bc82cbfcc4dc6363d9645325325.png" alt="image.png"></p><p>å®‰è£…ä¸­ï¼š<br><img src="https://i0.hdslb.com/bfs/article/d1aaca262974a2d120f5f65f812d8b80645325325.png" alt="image.png"></p><p>å®‰è£…å®Œæˆï¼š<br><img src="https://i0.hdslb.com/bfs/article/d65524eadccc9051190d4ffac385f066645325325.png" alt="image.png"></p><p>å¦‚ä½•ç ´è§£ï¼Ÿçœ‹åˆ°è¿™ä¸ªæ–‡ä»¶äº†å—ï¼Ÿ<br>â€‹<img src="https://i0.hdslb.com/bfs/article/fd3324327224fb57703f1077882872e3645325325.png" alt="image.png"><br>æŠŠè¿™ä¸ªæ–‡ä»¶æ‹·è´åˆ°è¿™ä¸ªå®‰è£…ç›®å½•å½“ä¸­ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/0361377076226fbd0e26dd1892f883c8645325325.png" alt="image.png"><br>ä¼šè‡ªåŠ¨æé†’ä½ æ›¿æ¢ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/6a20ab8f8d030586f497945c2c56eeb1645325325.png" alt="image.png"><br>æ›¿æ¢å³å¯å®Œæˆç ´è§£ï¼ï¼ï¼ï¼  </p><h2 id="ä½¿ç”¨PowerDesignerè¿›è¡Œç‰©ç†æ•°æ®å»ºæ¨¡"><a href="#ä½¿ç”¨PowerDesignerè¿›è¡Œç‰©ç†æ•°æ®å»ºæ¨¡" class="headerlink" title="ä½¿ç”¨PowerDesignerè¿›è¡Œç‰©ç†æ•°æ®å»ºæ¨¡"></a>ä½¿ç”¨PowerDesignerè¿›è¡Œç‰©ç†æ•°æ®å»ºæ¨¡</h2><p>æ‰“å¼€PowerDesignerï¼š<br><img src="https://i0.hdslb.com/bfs/article/2d441c57bf9be95d09b9cd3055750ab2645325325.png" alt="image.png"></p><p>ç‚¹å‡»â€œCreate Modelâ€¦â€æ¥åˆ›å»ºPDMï¼ˆPhysical Data Modelï¼Œç‰©ç†æ•°æ®æ¨¡å‹ï¼‰ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/4a3ddd514516ccf2a0a946f8f38f8587645325325.png" alt="image.png">  </p><p><strong>ä»€ä¹ˆæ˜¯ç‰©ç†æ•°æ®æ¨¡å‹PDMï¼Ÿ</strong><br>â€‹<code>ç‰©ç†æ•°æ®æ¨¡å‹ï¼ˆPhysical Data Modelï¼ŒPDMï¼‰æ˜¯æ•°æ®ç®¡ç†é¢†åŸŸä¸­è¡¨ç¤ºæ•°æ®åº“é€»è¾‘è®¾è®¡åï¼Œé€šè¿‡ç‰©ç†è®¾è®¡æœ€ç»ˆè½¬åŒ–ä¸ºå®é™…æ•°æ®ç»“æ„çš„è¿‡ç¨‹ï¼Œå³åœ¨é€»è¾‘æ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œæ•°æ®å­˜å‚¨ç»“æ„çš„è®¾è®¡ã€‚PDM æ˜¯ä¸€ä¸ªè¯¦ç»†çš„æ•°æ®åº“è®¾è®¡è®¡åˆ’ï¼Œå®ƒæè¿°äº†å¦‚ä½•åœ¨å…³ç³»æ•°æ®åº“ä¸­å­˜å‚¨æ•°æ®ã€‚ç‰©ç†æ•°æ®æ¨¡å‹åŒ…å«äº†æ‰€æœ‰æ•°æ®è¡¨ï¼Œåˆ—ã€é”®å’Œç´¢å¼•ä»¥åŠç‰©ç†å­˜å‚¨çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ•°æ®ç±»å‹ã€å­—æ®µå®½åº¦ã€é»˜è®¤å€¼ã€ç»Ÿè®¡ä¿¡æ¯ç­‰ã€‚æ­¤å¤–ï¼ŒPDM è¿˜æè¿°äº†å¦‚ä½•å°†æ•°æ®è¡¨å­˜å‚¨åœ¨æ–‡ä»¶æˆ–è¡¨ç©ºé—´ä¸­ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å»ºç«‹å®é™…çš„æ•°æ®åº“ç³»ç»Ÿã€‚é€šå¸¸ï¼ŒPDM åŒ…å«äº†å®Œæ•´çš„ ER æ¨¡å‹ï¼Œæ•°æ®è¡¨å’Œå…³ç³»çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ•°æ®çš„ä¸»é”®ã€å¤–é”®ã€å”¯ä¸€é”®ã€ç´¢å¼•ã€çº¦æŸæ¡ä»¶ç­‰ã€‚ç‰©ç†æ•°æ®æ¨¡å‹å¯ä»¥ä½¿ç”¨å„ç§å»ºæ¨¡å·¥å…·æ¥æ‰‹å·¥åˆ›å»ºæˆ–è‡ªåŠ¨ç”Ÿæˆã€‚åœ¨æ•°æ®åº“è®¾è®¡é˜¶æ®µï¼Œç”Ÿæˆ PDM æ˜¯éå¸¸é‡è¦çš„ä¸€æ­¥ï¼Œæ˜¯å°†é€»è¾‘è®¾è®¡è½¬æ¢ä¸ºå®é™…å®ç°çš„é‡è¦æ­¥éª¤ä¹‹ä¸€ã€‚å®ƒå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜åœ¨å®ç°æ—¶æ›´åŠ æ¸…æ™°åœ°äº†è§£æ•°æ®çš„å­˜å‚¨ç»“æ„ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿åç»­çš„æ•°æ®åº“ç®¡ç†å’Œç»´æŠ¤å·¥ä½œã€‚</code>â€‹</p><p>åˆ›å»ºå®Œæˆåæ˜¯è¿™æ ·çš„ï¼š<br><img src="https://i0.hdslb.com/bfs/article/85a3d531d246adfb64dadef8981cd329645325325.png" alt="image.png"><br>æ³¨æ„ï¼šå³ä¾§çš„å°æ ¼å­æ˜¯å¯ä»¥æ”¾å¤§å’Œç¼©å°çš„ã€‚çœ‹ç€åƒæ˜¯å¾ˆå¤§çš„ä¸€å¼ ç½‘ã€‚åœ¨æ¯ä¸ªæ ¼å­å½“ä¸­å¯ä»¥å®¹çº³å¤šä¸ªè¡¨ã€‚å¹¶ä¸”åœ¨è¿™å¼ ç½‘ä¸Šå¯ä»¥æ¸…æ™°çš„çœ‹åˆ°è¡¨ä¸è¡¨çš„å…³ç³»ã€‚ï¼ˆä¸€å¯¹å¤šï¼Œä¸€å¯¹ä¸€ï¼Œå¤šå¯¹å¤šç­‰ã€‚ï¼‰</p><p>è®°å¾—ä¿å­˜ï¼Œctrl+sä¿å­˜æ—¶ä¼šç”Ÿæˆä¸€ä¸ªxxx.pdmæ–‡ä»¶ï¼Œä»¥åå¦‚æœè¦ä¿®æ”¹è®¾è®¡ï¼ŒåŒå‡»è¿™ä¸ªxxx.pdmæ–‡ä»¶å³å¯æ‰“å¼€ï¼Œè¿›è¡Œç¼–è¾‘ï¼š<br><img src="https://i0.hdslb.com/bfs/article/b2b280d6f2a9ab2ec094baf7fb914a70645325325.png" alt="image.png"><br>ä¿å­˜åçš„æ–‡ä»¶ï¼š<br><img src="https://i0.hdslb.com/bfs/article/938224ef8c83b53899954a82708895e9645325325.png" alt="image.png"></p><p>å¼€å§‹è¿›è¡Œè¡¨çš„è®¾è®¡ï¼Œè¿™é‡Œä¸æé‚£ä¹ˆå¤æ‚ï¼Œå…ˆåˆ›å»ºä¸€å¼ è¡¨å³å¯ï¼št_userï¼Œç”¨æˆ·è¡¨ï¼š<br><img src="https://i0.hdslb.com/bfs/article/933c6587708eba28bba8b536e189af48645325325.png" alt="image.png"></p><p>åŒå‡»åï¼Œå¼¹å‡ºè®¾è®¡çª—å£ï¼š<br><img src="https://i0.hdslb.com/bfs/article/221c72bf3e67a2fcdeb816a3f48ff3f2645325325.png" alt="image.png"></p><p>è®¾è®¡è¡¨åï¼š<br><img src="https://i0.hdslb.com/bfs/article/e5953e51f1aeb7d1b5b8bb34c0af1cf5645325325.png" alt="image.png"><br>æ³¨æ„ï¼š</p><ol><li>Nameï¼šç”¨æ¥è®¾ç½®æ˜¾ç¤ºçš„è¡¨å</li><li>Codeï¼šç”¨æ¥è®¾ç½®æ•°æ®åº“ä¸­çœŸå®åˆ›å»ºçš„è¡¨å</li><li>Commentï¼šå¯¹è¡¨çš„æ³¨é‡Šè¯´æ˜</li></ol><p>è®¾è®¡å­—æ®µï¼š<br><img src="https://i0.hdslb.com/bfs/article/e08994f78b8086e398bcf5fad74c8628645325325.png" alt="image.png"><br>æŠŠæ¯ä¸ªå­—æ®µè®¾è®¡å¥½ï¼ŒåŒ…æ‹¬ï¼šå­—æ®µåï¼Œæ•°æ®ç±»å‹ï¼Œé•¿åº¦ï¼Œçº¦æŸç­‰ã€‚</p><p>è®¾è®¡å®Œæˆåï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/db69285c638a35fa1931db46dd72e466645325325.png" alt="image.png">  </p><h2 id="ä½¿ç”¨PowerDesignerå¯¼å‡ºå»ºè¡¨è¯­å¥"><a href="#ä½¿ç”¨PowerDesignerå¯¼å‡ºå»ºè¡¨è¯­å¥" class="headerlink" title="ä½¿ç”¨PowerDesignerå¯¼å‡ºå»ºè¡¨è¯­å¥"></a>ä½¿ç”¨PowerDesignerå¯¼å‡ºå»ºè¡¨è¯­å¥</h2><p><img src="https://i0.hdslb.com/bfs/article/b4ff34c9a6c8ffb6ae3d9ea885fee4a5645325325.png" alt="image.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*==============================================================*/</span></span><br><span class="line"><span class="comment">/* Table: t_user                                                */</span></span><br><span class="line"><span class="comment">/*==============================================================*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user</span><br><span class="line">(</span><br><span class="line">   id                   <span class="type">bigint</span> <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†&#x27;</span>,</span><br><span class="line">   name                 <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">   password             <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">   realname             <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">   gender               <span class="type">char</span>(<span class="number">2</span>),</span><br><span class="line">   tel                  <span class="type">char</span>(<span class="number">11</span>),</span><br><span class="line">   <span class="keyword">primary</span> key (id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t_user comment <span class="string">&#x27;ç”¨æˆ·è¡¨å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€‚&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€</p><h2 id="ä½¿ç”¨Navicat-for-MySQLåˆå§‹åŒ–æ•°æ®"><a href="#ä½¿ç”¨Navicat-for-MySQLåˆå§‹åŒ–æ•°æ®" class="headerlink" title="ä½¿ç”¨Navicat for MySQLåˆå§‹åŒ–æ•°æ®"></a>ä½¿ç”¨Navicat for MySQLåˆå§‹åŒ–æ•°æ®</h2><h3 id="å»ºåº“"><a href="#å»ºåº“" class="headerlink" title="å»ºåº“"></a>å»ºåº“</h3><p>ä½¿ç”¨Navicat for MySQLåˆ›å»ºä¸€ä¸ªMySQLæ•°æ®åº“ï¼Œèµ·åï¼šjdbc<br>â€‹<img src="https://i0.hdslb.com/bfs/article/a1d6b375b4acea6e2fda019c8dd40834645325325.png" alt="image.png"><br>â€‹<img src="https://i0.hdslb.com/bfs/article/6069c19a4ca5cbe59ae10142b0cae75b645325325.png" alt="image.png">  </p><h3 id="å»ºè¡¨"><a href="#å»ºè¡¨" class="headerlink" title="å»ºè¡¨"></a>å»ºè¡¨</h3><p>æ‰§è¡Œjdbc.sqlè„šæœ¬ï¼š<br><img src="https://i0.hdslb.com/bfs/article/8a9d9a371a5d9623259ee3bed5deed01645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/ec639a9a020f301cf4eb2b2adb4e7ba7645325325.png" alt="image.png"></p><p>æœ€ç»ˆåˆ›å»ºçš„è¡¨ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/4bf705fdc2ae5250c524d6bd6024b506645325325.png" alt="image.png">  </p><h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><p><img src="https://i0.hdslb.com/bfs/article/1c64059950a81011cec2874df051256e645325325.png" alt="image.png"><br>æ³¨æ„ï¼šè¿™é‡Œæˆ‘å°†ä¸»é”®è®¾ç½®ä¸ºäº†è‡ªå¢ï¼šauto_incrementã€‚å…¶å®è¿™ä¸ªä¹Ÿå¯ä»¥åœ¨PowerDesignerä¸­è®¾è®¡æ—¶æŒ‡å®šè‡ªå¢ï¼šå‹¾é€‰ä¸Šå®ƒå³å¯ã€‚<br>â€‹<img src="https://i0.hdslb.com/bfs/article/3c246b7cda3b9bdc88b288956963a019645325325.png" alt="image.png">  </p><h1 id="JDBCå®Œæˆæ–°å¢æ“ä½œ"><a href="#JDBCå®Œæˆæ–°å¢æ“ä½œ" class="headerlink" title="JDBCå®Œæˆæ–°å¢æ“ä½œ"></a>JDBCå®Œæˆæ–°å¢æ“ä½œ</h1><p>æ–°å¢æ“ä½œå°±æ˜¯è®©æ•°æ®åº“æ‰§è¡Œinsertè¯­å¥ã€‚é€šè¿‡è¿™ä¸ªæ“ä½œæ¥å­¦ä¹ ä¸€ä¸‹JDBCç¼–ç¨‹çš„æ¯ä¸€æ­¥ã€‚åˆšå¼€å§‹ç¼–å†™JDBCä»£ç çš„æ—¶å€™ï¼Œå»ºè®®ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå…ˆä¸å€ŸåŠ©ä»»ä½•IDEã€‚</p><h2 id="JDBCç¼–ç¨‹ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œé©±åŠ¨"><a href="#JDBCç¼–ç¨‹ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œé©±åŠ¨" class="headerlink" title="JDBCç¼–ç¨‹ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œé©±åŠ¨"></a>JDBCç¼–ç¨‹ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œé©±åŠ¨</h2><p>æ³¨å†Œé©±åŠ¨æœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p><ol><li>å°† JDBC é©±åŠ¨ç¨‹åºä»ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿä¸­åŠ è½½åˆ°å†…å­˜ã€‚</li><li>è®© DriverManager å¯ä»¥é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æ¥ç®¡ç†è¯¥é©±åŠ¨ç¨‹åºçš„æ‰€æœ‰è¿æ¥æ“ä½œã€‚</li></ol><p>APIå¸®åŠ©æ–‡æ¡£ï¼š<br><img src="https://i0.hdslb.com/bfs/article/9e850babe4634131321e42a8ac134f8a645325325.png" alt="image.png"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            <span class="type">Driver</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">com</span>.mysql.cj.jdbc.Driver(); <span class="comment">// åˆ›å»ºMySQLé©±åŠ¨å¯¹è±¡</span></span><br><span class="line">            DriverManager.registerDriver(driver); <span class="comment">// å®Œæˆé©±åŠ¨æ³¨å†Œ</span></span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šæ³¨å†Œé©±åŠ¨è°ƒç”¨çš„æ˜¯java.sql.DriverManagerçš„registerDriver()æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•çš„ä½¿ç”¨è¦å‚é˜…JDKçš„APIå¸®åŠ©æ–‡æ¡£ã€‚</strong><br><strong>æ€è€ƒ1ï¼šä¸ºä»€ä¹ˆä»¥ä¸Šä»£ç ä¸­newçš„æ—¶å€™ï¼Œåé¢ç±»åè¦å¸¦ä¸ŠåŒ…åå‘¢ï¼Ÿ</strong><br><strong>æ€è€ƒ2ï¼šä»¥ä¸Šä»£ç ä¸­å“ªäº›æ˜¯JDBCæ¥å£ï¼Œå“ªäº›æ˜¯JDBCæ¥å£çš„å®ç°ï¼Ÿ</strong>   </p><h2 id="JDBCç¼–ç¨‹ç¬¬äºŒæ­¥ï¼šè·å–è¿æ¥"><a href="#JDBCç¼–ç¨‹ç¬¬äºŒæ­¥ï¼šè·å–è¿æ¥" class="headerlink" title="JDBCç¼–ç¨‹ç¬¬äºŒæ­¥ï¼šè·å–è¿æ¥"></a>JDBCç¼–ç¨‹ç¬¬äºŒæ­¥ï¼šè·å–è¿æ¥</h2><p>è·å–java.sql.Connectionå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„åˆ›å»ºæ ‡å¿—ç€mysqlè¿›ç¨‹å’Œjvmè¿›ç¨‹ä¹‹é—´çš„é€šé“æ‰“å¼€äº†ã€‚</p><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>APIå¸®åŠ©æ–‡æ¡£ï¼š<br><img src="https://i0.hdslb.com/bfs/article/cb7c6ba4342c5237ca36b0a972c0ffb0645325325.png" alt="image.png"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            <span class="type">Driver</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">com</span>.mysql.cj.jdbc.Driver(); <span class="comment">// åˆ›å»ºMySQLé©±åŠ¨å¯¹è±¡</span></span><br><span class="line">            DriverManager.registerDriver(driver); <span class="comment">// å®Œæˆé©±åŠ¨æ³¨å†Œ</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;è¿æ¥å¯¹è±¡ï¼š&quot;</span> + conn);</span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/88fbdac6b281167f09b50e1c698296ae645325325.png" alt="image.png"><br>çœ‹åˆ°ä»¥ä¸Šçš„è¾“å‡ºç»“æœï¼Œè¡¨ç¤ºæ•°æ®åº“å·²ç»è¿æ¥æˆåŠŸäº†ã€‚</p><p>é€šè¿‡ä»¥ä¸Šç¨‹åºçš„è¾“å‡ºç»“æœå¾—çŸ¥ï¼šcom.mysql.cj.jdbc.ConnectionImplæ˜¯java.sql.Connectionæ¥å£çš„å®ç°ç±»ï¼Œå¤§å®¶å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ¢æˆOracleæ•°æ®åº“çš„è¯ï¼Œè¿™ä¸ªå®ç°ç±»çš„ç±»åæ˜¯ä¸æ˜¯å°±ä¼šæ¢ä¸€ä¸ªå‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚ä¸è¿‡å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯ä¸éœ€è¦å…³å¿ƒå…·ä½“å®ç°ç±»çš„ï¼Œå› ä¸ºåç»­çš„ä»£ç éƒ½æ˜¯ç›´æ¥é¢å‘java.sql.Connectionæ¥å£æ¥è°ƒç”¨æ–¹æ³•çš„ã€‚é¢å‘æ¥å£ç¼–ç¨‹åœ¨è¿™é‡Œä½“ç°çš„æ·‹æ¼“å°½è‡´ã€‚ç¡®å®é™ä½äº†è€¦åˆåº¦ã€‚</p><p>ä»¥ä¸Šç¨‹åºä¸­æ¼”ç¤ºäº†è¿æ¥æ•°æ®åº“éœ€è¦æä¾›ä¸‰ä¸ªä¿¡æ¯ï¼šurlï¼Œç”¨æˆ·åï¼Œå¯†ç ã€‚å…¶ä¸­ç”¨æˆ·åå’Œå¯†ç å®¹æ˜“ç†è§£ã€‚urlæ˜¯ä»€ä¹ˆï¼Ÿ  </p><h3 id="ä»€ä¹ˆæ˜¯URL"><a href="#ä»€ä¹ˆæ˜¯URL" class="headerlink" title="ä»€ä¹ˆæ˜¯URL"></a>ä»€ä¹ˆæ˜¯URL</h3><p>URL æ˜¯ç»Ÿä¸€èµ„æºå®šä½ç¬¦ (Uniform Resource Locator) çš„ç¼©å†™ï¼Œæ˜¯äº’è”ç½‘ä¸Šæ ‡è¯†ã€å®šä½ã€è®¿é—®èµ„æºçš„å­—ç¬¦ä¸²ã€‚å®ƒå¯ä»¥ç”¨æ¥æŒ‡å®šäº’è”ç½‘ä¸Šå„ç§ç±»å‹çš„èµ„æºçš„ä½ç½®ï¼Œå¦‚ç½‘é¡µã€å›¾ç‰‡ã€è§†é¢‘ç­‰ã€‚</p><p>URL é€šå¸¸ç”±åè®®ã€æœåŠ¡å™¨åã€æœåŠ¡å™¨ç«¯å£ã€è·¯å¾„å’ŒæŸ¥è¯¢å­—ç¬¦ä¸²ç»„æˆã€‚å…¶ä¸­ï¼š</p><ul><li>åè®®æ˜¯è§„å®šäº†è®¿é—®èµ„æºæ‰€é‡‡ç”¨çš„é€šä¿¡åè®®ï¼Œä¾‹å¦‚ HTTPã€HTTPSã€FTP ç­‰ï¼›</li><li>æœåŠ¡å™¨åæ˜¯èµ„æºæ‰€åœ¨çš„æœåŠ¡å™¨ä¸»æœºåæˆ– IP åœ°å€ï¼Œå¯ä»¥æ˜¯åŸŸåæˆ– IP åœ°å€ï¼›</li><li>æœåŠ¡å™¨ç«¯å£æ˜¯èµ„æºæ‰€åœ¨çš„æœåŠ¡å™¨çš„ç«¯å£å·ï¼›</li><li>è·¯å¾„æ˜¯èµ„æºæ‰€åœ¨çš„æœåŠ¡å™¨ä¸Šçš„è·¯å¾„ã€æ–‡ä»¶åç­‰ä¿¡æ¯ï¼›</li><li>æŸ¥è¯¢å­—ç¬¦ä¸²æ˜¯å‘æœåŠ¡å™¨æäº¤çš„å‚æ•°ä¿¡æ¯ï¼Œç”¨æ¥å®šä½æ›´å…·ä½“çš„èµ„æºã€‚</li></ul><p>URL åœ¨äº’è”ç½‘ä¸­å¹¿æ³›åº”ç”¨ï¼Œæ¯”å¦‚åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ URL æ¥è®¿é—®ç½‘é¡µæˆ–ä¸‹è½½æ–‡ä»¶ï¼Œåœ¨ç½‘ç«™å¼€å‘ä¸­ä½¿ç”¨ URL æ¥è®¿é—® API æ¥å£æˆ–æ–‡ä»¶ï¼Œåœ¨ç§»åŠ¨åº”ç”¨å’Œæ¡Œé¢åº”ç”¨ä¸­ä½¿ç”¨ URL æ¥è®¿é—®åº”ç”¨å†…éƒ¨çš„é¡µé¢æˆ–åŠŸèƒ½ï¼Œåœ¨æœç´¢å¼•æ“ä¸­ä½¿ç”¨ URL æ¥çˆ¬å–ç½‘é¡µå†…å®¹ç­‰ç­‰ã€‚</p><p>æ€»ä¹‹ï¼ŒURL æ˜¯äº’è”ç½‘ä¸Šæ‰€æœ‰èµ„æºçš„å”¯ä¸€è¯†åˆ«æ ‡è¯†ï¼Œæ˜¯äº’è”ç½‘é€šä¿¡çš„åŸºç¡€å’Œæ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚  </p><h3 id="JDBCè¿æ¥MySQLæ—¶çš„URLæ ¼å¼"><a href="#JDBCè¿æ¥MySQLæ—¶çš„URLæ ¼å¼" class="headerlink" title="JDBCè¿æ¥MySQLæ—¶çš„URLæ ¼å¼"></a>JDBCè¿æ¥MySQLæ—¶çš„URLæ ¼å¼</h3><p>JDBC URL æ˜¯åœ¨ä½¿ç”¨ JDBC è¿æ¥æ•°æ®åº“æ—¶çš„ä¸€ä¸ª URL å­—ç¬¦ä¸²ï¼Œå®ƒç”¨æ¥æ ‡è¯†è¦è¿æ¥çš„æ•°æ®åº“çš„ä½ç½®ã€è®¤è¯ä¿¡æ¯å’Œå…¶ä»–é…ç½®å‚æ•°ç­‰ã€‚JDBC URL çš„æ ¼å¼å¯ä»¥å› æ•°æ®åº“ç±»å‹è€Œå¼‚ï¼Œä½†é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>åè®®ï¼šè¡¨ç¤ºè¦ä½¿ç”¨çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰çš„ç±»å‹ï¼Œå¦‚ <code>jdbc:mysql</code> è¡¨ç¤ºè¦ä½¿ç”¨ MySQL æ•°æ®åº“ï¼Œ<code>jdbc:postgresql</code> è¡¨ç¤ºè¦ä½¿ç”¨ PostgreSQL æ•°æ®åº“ã€‚</li><li>ä¸»æœºåœ°å€å’Œç«¯å£å·ï¼šè¡¨ç¤ºè¦è¿æ¥çš„æ•°æ®åº“æ‰€åœ¨çš„æœåŠ¡å™¨çš„ IP åœ°å€æˆ–åŸŸåï¼Œä»¥åŠæ•°æ®åº“æ‰€åœ¨æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£å·ã€‚</li><li>æ•°æ®åº“åç§°ï¼šè¡¨ç¤ºè¦è¿æ¥çš„æ•°æ®åº“çš„åç§°ã€‚</li><li>å…¶ä»–å¯é€‰å‚æ•°ï¼šè¿™äº›å‚æ•°åŒ…æ‹¬è¿æ¥çš„è¶…æ—¶æ—¶é—´ã€ä½¿ç”¨çš„å­—ç¬¦é›†ã€è¿æ¥æ± ç›¸å…³é…ç½®ç­‰ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œè¿æ¥ MySQL æ•°æ®åº“çš„ JDBC URL çš„æ ¼å¼ä¸€èˆ¬å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:mysql://&lt;host&gt;:&lt;port&gt;/&lt;database_name&gt;?&lt;connection_parameters&gt;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><ul><li><code>&lt;host&gt;</code> æ˜¯ MySQL æ•°æ®åº“æœåŠ¡å™¨çš„ä¸»æœºåæˆ– IP åœ°å€ï¼›</li><li><code>&lt;port&gt;</code> æ˜¯ MySQL æœåŠ¡å™¨çš„ç«¯å£å·ï¼ˆé»˜è®¤ä¸º 3306ï¼‰ï¼›</li><li><code>&lt;database_name&gt;</code> æ˜¯è¦è¿æ¥çš„æ•°æ®åº“åç§°ï¼›</li><li><code>&lt;connection_parameters&gt;</code> åŒ…æ‹¬è¿æ¥çš„é¢å¤–å‚æ•°ï¼Œä¾‹å¦‚ç”¨æˆ·åã€å¯†ç ã€å­—ç¬¦é›†ç­‰ã€‚</li></ul><p>JDBC URL æ˜¯è¿æ¥æ•°æ®åº“çš„å…³é”®ï¼Œé€šè¿‡ JDBC URLï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ç‰¹å®šçš„ JDBC é©±åŠ¨ç¨‹åºä¸æ•°æ®åº“æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œä»è€Œå®ç°ä¸æ•°æ®åº“çš„äº¤äº’ã€‚åœ¨å¼€å‘ Web åº”ç”¨å’Œæ¡Œé¢åº”ç”¨æ—¶ï¼Œä½¿ç”¨ JDBC URL å¯ä»¥è½»æ¾åœ°è¿æ¥å’Œæ“ä½œå„ç§ç±»å‹çš„æ•°æ®åº“ï¼Œä¾‹å¦‚ MySQLã€PostgreSQLã€Oracle ç­‰ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¸¸è§çš„JDBC MySQL URLï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:mysql://localhost:3306/jdbc</span><br></pre></td></tr></table></figure><p><code>jdbc:mysql://</code>â€‹æ˜¯åè®®<br>â€‹<code>localhost</code>â€‹è¡¨ç¤ºè¿æ¥æœ¬åœ°ä¸»æœºçš„MySQLæ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥å†™ä½œ<code>127.0.0.1</code>â€‹<br>â€‹<code>3306</code>â€‹æ˜¯MySQLæ•°æ®åº“çš„ç«¯å£å·<br>â€‹<code>jdbc</code>â€‹æ˜¯æ•°æ®åº“å®ä¾‹å  </p><h3 id="MySQL-URLä¸­çš„å…¶å®ƒå¸¸ç”¨é…ç½®"><a href="#MySQL-URLä¸­çš„å…¶å®ƒå¸¸ç”¨é…ç½®" class="headerlink" title="MySQL URLä¸­çš„å…¶å®ƒå¸¸ç”¨é…ç½®"></a>MySQL URLä¸­çš„å…¶å®ƒå¸¸ç”¨é…ç½®</h3><p>åœ¨ JDBC MySQL URL ä¸­ï¼Œå¸¸ç”¨çš„é…ç½®å‚æ•°æœ‰ï¼š</p><ul><li><code>serverTimezone</code>ï¼šMySQL æœåŠ¡å™¨æ—¶åŒºï¼Œé»˜è®¤ä¸º UTCï¼Œå¯ä»¥é€šè¿‡è¯¥å‚æ•°æ¥æŒ‡å®šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„æ—¶åŒºï¼›</li></ul><p>åœ¨ JDBC URL ä¸­è®¾ç½® <code>serverTimezone</code> çš„ä½œç”¨æ˜¯æŒ‡å®šæ•°æ®åº“æœåŠ¡å™¨çš„æ—¶åŒºã€‚è¿™ä¸ªæ—¶åŒºä¿¡æ¯ä¼šå½±å“ JDBC é©±åŠ¨åœ¨å¤„ç†æ—¥æœŸæ—¶é—´ç›¸å…³æ•°æ®ç±»å‹æ—¶å¦‚ä½•å°†å…¶æ˜ å°„åˆ°æœåŠ¡å™¨ä¸Šçš„æ—¥æœŸæ—¶é—´å€¼ã€‚<br>å¦‚æœä¸è®¾ç½® <code>serverTimezone</code>ï¼Œåˆ™ JDBC é©±åŠ¨ç¨‹åºé»˜è®¤å°†ä½¿ç”¨æœ¬åœ°æ—¶åŒºï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯æœºå™¨ä¸Šçš„ç³»ç»Ÿæ—¶åŒºï¼Œæ¥å¤„ç†æ—¥æœŸæ—¶é—´æ•°æ®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæœåŠ¡å™¨çš„æ—¶åŒºå’Œå®¢æˆ·ç«¯æœºå™¨çš„æ—¶åŒºä¸åŒï¼Œé‚£ä¹ˆå¤„ç†æ—¥æœŸæ—¶é—´æ•°æ®æ—¶å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œä»è€Œå¯¼è‡´æ•°æ®é”™è¯¯æˆ–ä¸ä¸€è‡´ã€‚<br>ä¾‹å¦‚ï¼Œå‡è®¾æœåŠ¡å™¨ä½äºç¾å›½åŠ å·ï¼Œè€Œå®¢æˆ·ç«¯ä½äºä¸­å›½ä¸Šæµ·ï¼Œå¦‚æœä¸è®¾ç½® <code>serverTimezone</code> å‚æ•°ï¼Œåœ¨å®¢æˆ·ç«¯æ‰§è¡Œç±»ä¼¼ä¸‹é¢çš„æŸ¥è¯¢ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> order_date <span class="operator">=</span> <span class="string">&#x27;2022-11-11&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç”±äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä½¿ç”¨äº†ä¸åŒçš„æ—¶åŒºï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯å®¢æˆ·ç«¯æœ¬åœ°çš„æ—¶åŒºï¼Œé‚£ä¹ˆå®é™…æŸ¥è¯¢çš„æ—¶é—´å°±æ˜¯å®¢æˆ·ç«¯æœ¬åœ°æ—¶é—´å¯¹åº”çš„æ—¶é—´ï¼Œè€Œä¸æ˜¯æœåŠ¡å™¨çš„æ—¶é—´ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æŸ¥è¯¢ç»“æœä¸æ­£ç¡®ï¼Œå› ä¸ºæœåŠ¡å™¨ä¸Šçš„æ—¶é—´å¯èƒ½æ˜¯æ¯”å®¢æˆ·ç«¯æ…¢æˆ–è€…å¿«äº†å¤šä¸ªå°æ—¶ã€‚<br>é€šè¿‡åœ¨ JDBC URL ä¸­è®¾ç½® <code>serverTimezone</code> å‚æ•°ï¼Œå¯ä»¥æ˜ç¡®å‘Šè¯‰ JDBC é©±åŠ¨ç¨‹åºä½¿ç”¨å“ªä¸ªæ—¶åŒºæ¥å¤„ç†æ—¥æœŸæ—¶é—´å€¼ï¼Œä»è€Œé¿å…è¿™ç§é—®é¢˜ã€‚åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå¦‚æœæŠŠæ—¶åŒºè®¾ç½®ä¸º <code>America/Los_Angeles</code>ï¼ˆå³åŠ å·çš„æ—¶åŒºï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:mysql://localhost:3306/mydatabase?user=myusername&amp;password=mypassword&amp;serverTimezone=America/Los_Angeles</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆä¸Šé¢çš„æŸ¥è¯¢å°±ä¼šåœ¨æ•°æ®åº“æœåŠ¡å™¨ä¸Šä»¥åŠ å·çš„æ—¶é—´æ¥æ‰§è¡Œï¼Œç»“æœæ›´åŠ å‡†ç¡®ã€‚</p><ul><li><code>useSSL</code>ï¼šæ˜¯å¦ä½¿ç”¨ SSL è¿›è¡Œè¿æ¥ï¼Œé»˜è®¤ä¸º trueï¼›</li></ul><p><code>useSSL</code> å‚æ•°ç”¨äºé…ç½®æ˜¯å¦ä½¿ç”¨ SSLï¼ˆSecure Sockets Layerï¼‰å®‰å…¨ä¼ è¾“åè®®æ¥åŠ å¯† JDBC å’Œ MySQL æ•°æ®åº“æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ã€‚å…¶è®¾ç½®ä¸º <code>true</code> è¡¨ç¤ºä½¿ç”¨ SSL è¿æ¥ï¼Œè®¾ç½®ä¸º <code>false</code> è¡¨ç¤ºä¸ä½¿ç”¨ SSL è¿æ¥ã€‚å…¶åŒºåˆ«å¦‚ä¸‹ï¼š<br>å½“è®¾ç½®ä¸º <code>true</code> æ—¶ï¼ŒJDBC é©±åŠ¨ç¨‹åºå°†ä½¿ç”¨ SSL åŠ å¯†åè®®æ¥ä¿éšœå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡å®‰å…¨ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šä½¿ç”¨ SSL åŠ å¯†åå†ä¼ è¾“ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«çªƒå¬ã€ç¯¡æ”¹ç­‰å®‰å…¨é—®é¢˜å‡ºç°ã€‚å½“ç„¶ï¼Œä¹Ÿè¦æ±‚æœåŠ¡å™¨ç«¯å¿…é¡»æ”¯æŒ SSLï¼Œå¦åˆ™ä¼šè¿æ¥å¤±è´¥ã€‚<br>å½“è®¾ç½®ä¸º <code>false</code> æ—¶ï¼ŒJDBC é©±åŠ¨ç¨‹åºä¼šä»¥æ˜æ–‡æ–¹å¼ä¼ è¾“æ•°æ®ï¼Œè¿™ç§æ–¹å¼ä¸‹ï¼Œè™½ç„¶æ•°æ®ä¼ è¾“çš„é€Ÿåº¦ä¼šæ›´å¿«ï¼Œä½†ä¹Ÿä¼šå­˜åœ¨è¢«æ¶æ„æ”»å‡»è€…æˆªè·å’Œçªƒå¬æ•°æ®çš„é£é™©ã€‚å› æ­¤ï¼Œåœ¨ä¸å®‰å…¨çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œæˆ–æ˜¯è¦æ±‚æ•°æ®ä¼ è¾“å®‰å…¨æ€§è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨ SSL åŠ å¯†è¿æ¥ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ SSL è¿æ¥ä¼šå¯¹ç³»ç»Ÿèµ„æºå’Œæ€§èƒ½æ¶ˆè€—æœ‰ä¸€å®šçš„å½±å“ï¼Œç‰¹åˆ«æ˜¯å½“è¿æ¥æ•°è¾ƒå¤šæ—¶ï¼Œå¯¹ CPU å’Œå†…å­˜å‹åŠ›éƒ½æ¯”è¾ƒå¤§ã€‚å› æ­¤ï¼Œåœ¨æ€§èƒ½å’Œå®‰å…¨ä¹‹é—´éœ€è¦æƒè¡¡ï¼Œæ ¹æ®å®é™…åº”ç”¨åœºæ™¯åˆç†è®¾ç½® <code>useSSL</code> å‚æ•°ã€‚</p><ul><li>useUnicodeï¼šæ˜¯å¦ä½¿ç”¨Unicodeç¼–ç è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œé»˜è®¤æ˜¯trueå¯ç”¨</li></ul><p><code>useUnicode</code>æ˜¯ JDBC é©±åŠ¨ç¨‹åºè¿æ¥æ•°æ®åº“æ—¶çš„ä¸€ä¸ªå‚æ•°ï¼Œç”¨äºå‘Šè¯‰é©±åŠ¨ç¨‹åºåœ¨ä¼ è¾“æ•°æ®æ—¶æ˜¯å¦ä½¿ç”¨ Unicode ç¼–ç ã€‚Unicode æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­çš„ä¸€ç§å­—ç¬¦ç¼–ç æ–¹æ¡ˆï¼Œå¯ä»¥ç”¨äºè¡¨ç¤ºå…¨çƒå„ç§è¯­è¨€ä¸­çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬ ASCII ç ã€ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰ã€‚å› æ­¤ï¼Œä½¿ç”¨ Unicode ç¼–ç å¯ä»¥ç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­èƒ½å¤Ÿæ­£ç¡®ã€å®Œæ•´åœ°å‘ˆç°å„ç§è¯­è¨€çš„å­—ç¬¦ã€‚<br>å…·ä½“åœ°è¯´ï¼Œå¦‚æœè®¾ç½® <code>useUnicode=true</code>ï¼ŒJDBC é©±åŠ¨ç¨‹åºä¼šåœ¨ä¼ è¾“æ•°æ®æ—¶ä½¿ç”¨ Unicode ç¼–ç ã€‚è¿™æ„å‘³ç€ï¼Œæ— è®ºæ•°æ®æºä¸­ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆç¼–ç æ–¹æ¡ˆï¼Œéƒ½ä¼šå…ˆå°†æ•°æ®è½¬æ¢ä¸º Unicode ç¼–ç è¿›è¡Œä¼ è¾“ï¼Œç¡®ä¿æ•°æ®èƒ½å¤Ÿè·¨å¹³å°ã€è·¨æ•°æ®åº“æ­£ç¡®ä¼ è¾“ã€‚å½“ä»æ•°æ®åº“ä¸­è·å–æ•°æ®æ—¶ï¼Œé©±åŠ¨ç¨‹åºä¼šæ ¹æ® <code>characterEncoding</code> å‚æ•°æŒ‡å®šçš„å­—ç¬¦é›†ç¼–ç å°†æ•°æ®è½¬æ¢ä¸ºæŒ‡å®šç¼–ç æ ¼å¼ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºæ­£ç¡®å¤„ç†æ•°æ®ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè®¾ç½® <code>useUnicode=false</code>ï¼Œåˆ™è¡¨ç¤ºä½¿ç”¨å½“å‰å¹³å°é»˜è®¤çš„å­—ç¬¦é›†è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´åœ¨è·¨å¹³å°æˆ–è·¨æ•°æ®åº“æ—¶å‡ºç°å­—ç¬¦ç¼–ç ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå› æ­¤é€šå¸¸å»ºè®®åœ¨è¿›è¡Œæ•°æ®ä¼ è¾“æ—¶å¯ç”¨ Unicode ç¼–ç ã€‚<br>ç»¼ä¸Šæ‰€è¿°ï¼Œè®¾ç½® <code>useUnicode</code> å‚æ•°å¯ä»¥ç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ­£ç¡®å‘ˆç°å„ç§å­—ç¬¦é›†ç¼–ç ã€‚å¯¹äºåº”ç”¨ç¨‹åºå¤„ç†å¤šè¯­è¨€ç¯å¢ƒæ•°æ®çš„åœºæ™¯ï¼Œå¯ç”¨ <code>useUnicode</code> å‚æ•°å°¤ä¸ºé‡è¦ã€‚</p><ul><li><code>characterEncoding</code>ï¼šè¿æ¥ä½¿ç”¨çš„å­—ç¬¦ç¼–ç ï¼Œé»˜è®¤ä¸º UTF-8ï¼›</li></ul><p><code>characterEncoding</code> å‚æ•°ç”¨äºè®¾ç½® MySQL æœåŠ¡å™¨å’Œ JDBC é©±åŠ¨ç¨‹åºä¹‹é—´è¿›è¡Œå­—ç¬¦é›†è½¬æ¢æ—¶ä½¿ç”¨çš„å­—ç¬¦é›†ç¼–ç ã€‚å…¶è®¾ç½®ä¸º <code>UTF-8</code> è¡¨ç¤ºä½¿ç”¨ UTF-8 ç¼–ç è¿›è¡Œå­—ç¬¦é›†è½¬æ¢ï¼Œè®¾ç½®ä¸º <code>GBK</code> è¡¨ç¤ºä½¿ç”¨ GBK ç¼–ç è¿›è¡Œå­—ç¬¦é›†è½¬æ¢ã€‚å…¶åŒºåˆ«å¦‚ä¸‹ï¼š<br>UTF-8 ç¼–ç æ˜¯ä¸€ç§å¯å˜é•¿åº¦çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥è¡¨ç¤ºä¸–ç•Œä¸Šçš„æ‰€æœ‰å­—ç¬¦ï¼ŒåŒ…æ‹¬ ASCIIã€Unicode å’Œä¸é—´æ–­ç©ºæ ¼ç­‰å­—ç¬¦ï¼Œæ˜¯ä¸€ç§é€šç”¨çš„ç¼–ç æ–¹å¼ã€‚UTF-8 ç¼–ç åœ¨å›½é™…åŒ–åº”ç”¨ä¸­è¢«å¹¿æ³›ä½¿ç”¨ï¼Œå¹¶ä¸”å…¶ä½¿ç”¨çš„å­—èŠ‚æ•°è¾ƒå°‘ï¼Œæœ‰åˆ©äºæé«˜æ•°æ®ä¼ è¾“çš„æ•ˆç‡å’ŒèŠ‚çº¦å­˜å‚¨ç©ºé—´ã€‚<br>GBK ç¼–ç æ˜¯ä¸€ç§å›ºå®šé•¿åº¦çš„ç¼–ç æ–¹å¼ï¼Œåªèƒ½è¡¨ç¤ºæ±‰å­—å’Œéƒ¨åˆ†ç¬¦å·ï¼Œä¸èƒ½è¡¨ç¤ºä¸–ç•Œä¸Šçš„æ‰€æœ‰å­—ç¬¦ã€‚GBK ç¼–ç é€šå¸¸åªç”¨äºä¸­æ–‡ç¯å¢ƒä¸­ï¼Œå› ä¸ºåœ¨è‹±æ–‡å’Œæ•°å­—ç­‰å­—ç¬¦ä¸­ä¼šå‡ºç°ä¹±ç æƒ…å†µã€‚<br>å› æ­¤ï¼Œåœ¨ MySQL ä¸­ä½¿ç”¨ <code>UTF-8</code> ç¼–ç ä½œä¸ºå­—ç¬¦é›†ç¼–ç çš„ä¼˜åŠ¿åœ¨äºèƒ½å¤Ÿæ”¯æŒä¸–ç•Œä¸Šçš„æ‰€æœ‰å­—ç¬¦ï¼Œè€Œä¸”åœ¨å›½é™…åŒ–åº”ç”¨ä¸­ä½¿ç”¨å¹¿æ³›ï¼Œå¯¹äºä¸åŒè¯­è¨€å’Œåœ°åŒºçš„ç”¨æˆ·éƒ½èƒ½å¤Ÿæä¾›è‰¯å¥½çš„æ”¯æŒã€‚è€Œä½¿ç”¨ <code>GBK</code> ç¼–ç åˆ™ä¸»è¦åœ¨äºé€‚ç”¨äºä¸­æ–‡ç¯å¢ƒä¸­çš„æ•°æ®å­˜å‚¨å’Œä¼ è¾“ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨é€‰æ‹©ç¼–ç æ–¹å¼æ—¶éœ€è¦è€ƒè™‘åˆ°åº”ç”¨æœ¬èº«çš„å®é™…éœ€è¦å’Œæ•°æ®çš„ç‰¹æ€§ï¼Œæ ¹æ®å…·ä½“æƒ…å†µè¿›è¡Œé€‰æ‹©ï¼Œé¿å…å‡ºç°å­—ç¬¦é›†ç¼–ç é”™è¯¯çš„é—®é¢˜ã€‚åŒæ—¶ï¼Œè¿˜è¦ç¡®ä¿ MySQL æœåŠ¡å™¨ã€JDBC é©±åŠ¨ç¨‹åºå’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„å­—ç¬¦é›†ç¼–ç ä¸€è‡´ï¼Œé¿å…å‡ºç°å­—ç¬¦é›†è½¬æ¢é”™è¯¯çš„é—®é¢˜ã€‚</p><p><strong>æ³¨æ„ï¼šuseUnicodeå’ŒcharacterEncodingæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p><ul><li><strong>useUnicodeè®¾ç½®çš„æ˜¯æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦ä½¿ç”¨Unicodeç¼–ç æ–¹å¼ã€‚</strong></li><li><strong>characterEncodingè®¾ç½®çš„æ˜¯æ•°æ®è¢«ä¼ è¾“åˆ°æœåŠ¡å™¨ä¹‹åï¼ŒæœåŠ¡å™¨é‡‡ç”¨å“ªä¸€ç§å­—ç¬¦é›†è¿›è¡Œç¼–ç ã€‚</strong></li></ul><p>ä¾‹å¦‚ï¼Œè¿æ¥ MySQL æ•°æ®åº“çš„ JDBC URL å¯ä»¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;useSSL=true&amp;characterEncoding=utf-8</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ¼”ç¤ºçš„æ˜¯ä½¿ç”¨æœ¬åœ° MySQL æ•°æ®åº“ï¼Œä½¿ç”¨Unicodeç¼–ç è¿›è¡Œæ•°æ®ä¼ è¾“ï¼ŒæœåŠ¡å™¨æ—¶åŒºä¸º Asia&#x2F;Shanghaiï¼Œå¯ç”¨ SSL è¿æ¥ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°æ•°æ®åä½¿ç”¨ UTF-8 ç¼–ç ã€‚</p><p>â€</p><h2 id="JDBCç¼–ç¨‹ç¬¬ä¸‰æ­¥ï¼šè·å–æ•°æ®åº“æ“ä½œå¯¹è±¡"><a href="#JDBCç¼–ç¨‹ç¬¬ä¸‰æ­¥ï¼šè·å–æ•°æ®åº“æ“ä½œå¯¹è±¡" class="headerlink" title="JDBCç¼–ç¨‹ç¬¬ä¸‰æ­¥ï¼šè·å–æ•°æ®åº“æ“ä½œå¯¹è±¡"></a>JDBCç¼–ç¨‹ç¬¬ä¸‰æ­¥ï¼šè·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</h2><p>æ•°æ®åº“æ“ä½œå¯¹è±¡æ˜¯è¿™ä¸ªæ¥å£ï¼šjava.sql.Statementã€‚è¿™ä¸ªå¯¹è±¡è´Ÿè´£å°†SQLè¯­å¥å‘é€ç»™æ•°æ®åº“æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°SQLåè¿›è¡Œç¼–è¯‘ï¼Œç„¶åæ‰§è¡ŒSQLã€‚</p><p>APIå¸®åŠ©æ–‡æ¡£å¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/63350001fa5e303e7c57034956bda6dc645325325.png" alt="image.png"></p><p>è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            <span class="type">Driver</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">com</span>.mysql.cj.jdbc.Driver(); <span class="comment">// åˆ›å»ºMySQLé©±åŠ¨å¯¹è±¡</span></span><br><span class="line">            DriverManager.registerDriver(driver); <span class="comment">// å®Œæˆé©±åŠ¨æ³¨å†Œ</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;useSSL=true&amp;characterEncoding=utf-8&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">            System.out.println(<span class="string">&quot;æ•°æ®åº“æ“ä½œå¯¹è±¡stmt = &quot;</span> + stmt);</span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/250e71005b390c3988b62b59f72fd356645325325.png" alt="image.png"></p><p>åŒæ ·å¯ä»¥çœ‹åˆ°ï¼šjava.sql.Statementæ¥å£åœ¨MySQLé©±åŠ¨ä¸­çš„å®ç°ç±»æ˜¯ï¼šcom.mysql.cj.jdbc.StatementImplã€‚ä¸è¿‡æˆ‘ä»¬åŒæ ·æ˜¯ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªå…·ä½“çš„å®ç°ç±»ã€‚å› ä¸ºåç»­çš„ä»£ç ä»ç„¶æ˜¯é¢å‘Statementæ¥å£å†™ä»£ç çš„ã€‚</p><p>å¦å¤–ï¼Œè¦çŸ¥é“çš„æ˜¯é€šè¿‡ä¸€ä¸ªConnectionå¯¹è±¡æ˜¯å¯ä»¥åˆ›å»ºå¤šä¸ªStatementå¯¹è±¡çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            <span class="type">Driver</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">com</span>.mysql.cj.jdbc.Driver(); <span class="comment">// åˆ›å»ºMySQLé©±åŠ¨å¯¹è±¡</span></span><br><span class="line">            DriverManager.registerDriver(driver); <span class="comment">// å®Œæˆé©±åŠ¨æ³¨å†Œ</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;useSSL=true&amp;characterEncoding=utf-8&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">            System.out.println(<span class="string">&quot;æ•°æ®åº“æ“ä½œå¯¹è±¡stmt = &quot;</span> + stmt);</span><br><span class="line"></span><br><span class="line">            <span class="type">Statement</span> <span class="variable">stmt2</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line">            System.out.println(<span class="string">&quot;æ•°æ®åº“æ“ä½œå¯¹è±¡stmt2 = &quot;</span> + stmt2);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/aea724f46349c7794128a6e0bbe141f5645325325.png" alt="image.png"></p><p>â€</p><h2 id="JDBCç¼–ç¨‹ç¬¬å››æ­¥ï¼šæ‰§è¡ŒSQL"><a href="#JDBCç¼–ç¨‹ç¬¬å››æ­¥ï¼šæ‰§è¡ŒSQL" class="headerlink" title="JDBCç¼–ç¨‹ç¬¬å››æ­¥ï¼šæ‰§è¡ŒSQL"></a>JDBCç¼–ç¨‹ç¬¬å››æ­¥ï¼šæ‰§è¡ŒSQL</h2><p>å½“è·å–åˆ°Statementå¯¹è±¡åï¼Œè°ƒç”¨è¿™ä¸ªæ¥å£ä¸­çš„ç›¸å…³æ–¹æ³•å³å¯æ‰§è¡ŒSQLè¯­å¥ã€‚</p><p>APIå¸®åŠ©æ–‡æ¡£å¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/bea1d141aef96981c908ab60d67d5e97645325325.png" alt="image.png"></p><p><strong>è¯¥æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªSQLè¯­å¥ï¼Œåªè¦å°†insertè¯­å¥ä¼ é€’è¿‡æ¥å³å¯ã€‚å½“æ‰§è¡ŒexecuteUpdate(sql)æ–¹æ³•æ—¶ï¼ŒJDBCä¼šå°†sqlè¯­å¥å‘é€ç»™æ•°æ®åº“æœåŠ¡å™¨ï¼Œæ•°æ®åº“æœåŠ¡å™¨å¯¹SQLè¯­å¥è¿›è¡Œç¼–è¯‘ï¼Œç„¶åæ‰§è¡ŒSQLã€‚</strong><br><strong>è¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯intç±»å‹ï¼Œè¿”å›å€¼çš„å«ä¹‰æ˜¯ï¼šå½±å“äº†æ•°æ®åº“è¡¨å½“ä¸­å‡ æ¡è®°å½•ã€‚ä¾‹å¦‚ï¼šè¿”å›1è¡¨ç¤º1æ¡æ•°æ®æ’å…¥æˆåŠŸï¼Œè¿”å›2è¡¨ç¤º2æ¡æ•°æ®æ’å…¥æˆåŠŸï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœä¸€æ¡ä¹Ÿæ²¡æœ‰æ’å…¥ï¼Œåˆ™è¿”å›0ã€‚</strong><br><strong>è¯¥æ–¹æ³•é€‚åˆæ‰§è¡Œçš„SQLè¯­å¥æ˜¯DMLï¼ŒåŒ…æ‹¬ï¼šinsert delete updateã€‚</strong></p><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            <span class="type">Driver</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">com</span>.mysql.cj.jdbc.Driver(); <span class="comment">// åˆ›å»ºMySQLé©±åŠ¨å¯¹è±¡</span></span><br><span class="line">            DriverManager.registerDriver(driver); <span class="comment">// å®Œæˆé©±åŠ¨æ³¨å†Œ</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;useSSL=true&amp;characterEncoding=utf-8&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_user(name,password,realname,gender,tel) values(&#x27;tangsanzang&#x27;,&#x27;123&#x27;,&#x27;å”ä¸‰è—&#x27;,&#x27;ç”·&#x27;,&#x27;12566568956&#x27;)&quot;</span>; <span class="comment">// sqlè¯­å¥æœ€åçš„åˆ†å·&#x27;;&#x27;å¯ä»¥ä¸å†™ã€‚</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥äº†&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/456e11b4b54510e9f8a0905ce523251a645325325.png" alt="image.png"><br>æ•°æ®åº“è¡¨å˜åŒ–äº†ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/67839fd3dea40580c7702e04e4d9ca4a645325325.png" alt="image.png">  </p><h2 id="JDBCç¼–ç¨‹ç¬¬å…­æ­¥ï¼šé‡Šæ”¾èµ„æº"><a href="#JDBCç¼–ç¨‹ç¬¬å…­æ­¥ï¼šé‡Šæ”¾èµ„æº" class="headerlink" title="JDBCç¼–ç¨‹ç¬¬å…­æ­¥ï¼šé‡Šæ”¾èµ„æº"></a>JDBCç¼–ç¨‹ç¬¬å…­æ­¥ï¼šé‡Šæ”¾èµ„æº</h2><p>ç¬¬äº”æ­¥å»å“ªé‡Œäº†ï¼Ÿç¬¬äº”æ­¥æ˜¯å¤„ç†æŸ¥è¯¢ç»“æœé›†ï¼Œä»¥ä¸Šæ“ä½œä¸æ˜¯selectè¯­å¥ï¼Œæ‰€ä»¥ç¬¬äº”æ­¥ç›´æ¥è·³è¿‡ï¼Œç›´æ¥å…ˆçœ‹ä¸€ä¸‹ç¬¬å…­æ­¥é‡Šæ”¾èµ„æºã€‚ã€åé¢å­¦ä¹ æŸ¥è¯¢è¯­å¥çš„æ—¶å€™ï¼Œå†è¯¦ç»†çœ‹ç¬¬äº”æ­¥ã€‘</p><h3 id="ä¸ºä»€ä¹ˆè¦é‡Šæ”¾èµ„æº"><a href="#ä¸ºä»€ä¹ˆè¦é‡Šæ”¾èµ„æº" class="headerlink" title="ä¸ºä»€ä¹ˆè¦é‡Šæ”¾èµ„æº"></a>ä¸ºä»€ä¹ˆè¦é‡Šæ”¾èµ„æº</h3><p>åœ¨ JDBC ç¼–ç¨‹ä¸­ï¼Œå»ºç«‹æ•°æ®åº“è¿æ¥ã€åˆ›å»º Statement å¯¹è±¡ç­‰æ“ä½œéƒ½éœ€è¦ç”³è¯·ç³»ç»Ÿèµ„æºï¼Œä¾‹å¦‚æ‰“å¼€ç½‘ç»œç«¯å£ã€ç”³è¯·å†…å­˜ç­‰ã€‚ä¸ºäº†é¿å…å ç”¨è¿‡å¤šçš„ç³»ç»Ÿèµ„æºå’Œé¿å…å‡ºç°å†…å­˜æ³„æ¼ç­‰é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä½¿ç”¨å®Œèµ„æºååŠæ—¶é‡Šæ”¾å®ƒä»¬ã€‚</p><h3 id="é‡Šæ”¾èµ„æºçš„åŸåˆ™"><a href="#é‡Šæ”¾èµ„æºçš„åŸåˆ™" class="headerlink" title="é‡Šæ”¾èµ„æºçš„åŸåˆ™"></a>é‡Šæ”¾èµ„æºçš„åŸåˆ™</h3><p>åŸåˆ™1ï¼šåœ¨finallyè¯­å¥å—ä¸­é‡Šæ”¾</p><ul><li>å»ºè®®åœ¨finallyè¯­å¥å—ä¸­é‡Šæ”¾ï¼Œå› ä¸ºç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœå‡ºç°äº†å¼‚å¸¸ï¼Œfinallyè¯­å¥å—ä¸­çš„ä»£ç æ˜¯ä¸€å®šä¼šæ‰§è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šæˆ‘ä»¬éœ€è¦ä¿è¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ç®¡æ˜¯å¦å‡ºç°äº†å¼‚å¸¸ï¼Œæœ€åçš„å…³é—­æ˜¯ä¸€å®šè¦æ‰§è¡Œçš„ã€‚å½“ç„¶äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Java7çš„æ–°ç‰¹æ€§ï¼šTry-with-resourcesã€‚Try-with-resources æ˜¯ Java 7 å¼•å…¥çš„æ–°ç‰¹æ€§ã€‚å®ƒç®€åŒ–äº†èµ„æºç®¡ç†çš„ä»£ç å®ç°ï¼Œå¯ä»¥è‡ªåŠ¨é‡Šæ”¾èµ„æºï¼Œå‡å°‘äº†ä»£ç å‡ºé”™çš„å¯èƒ½æ€§ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æä¾›æ›´å¥½çš„ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li></ul><p>åŸåˆ™2ï¼šé‡Šæ”¾æœ‰é¡ºåº</p><ul><li>ä»å°åˆ°å¤§ä¾æ¬¡é‡Šæ”¾ï¼Œåˆ›å»ºçš„æ—¶å€™ï¼Œå…ˆåˆ›å»ºConnectionï¼Œå†åˆ›å»ºStatementã€‚é‚£ä¹ˆå…³é—­çš„æ—¶å€™ï¼Œå…ˆå…³é—­Statementï¼Œå†å…³é—­Connectionã€‚</li></ul><p>åŸåˆ™3ï¼šåˆ†åˆ«è¿›è¡Œtryâ€¦catchâ€¦</p><ul><li>å…³é—­çš„æ—¶å€™è°ƒç”¨close()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æœ‰å¼‚å¸¸éœ€è¦å¤„ç†ï¼Œå»ºè®®åˆ†åˆ«å¯¹é½tryâ€¦catchâ€¦è¿›è¡Œå¼‚å¸¸æ•è·ã€‚å¦‚æœåªç¼–å†™ä¸€ä¸ªtryâ€¦catchâ€¦è¿›è¡Œä¸€å—æ•è·ï¼Œåœ¨å…³é—­è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªå…³é—­å¤±è´¥ï¼Œä¼šå½±å“ä¸‹ä¸€ä¸ªèµ„æºçš„å…³é—­ã€‚</li></ul><p>â€</p><h3 id="ä»£ç å¦‚ä½•å®ç°"><a href="#ä»£ç å¦‚ä½•å®ç°" class="headerlink" title="ä»£ç å¦‚ä½•å®ç°"></a>ä»£ç å¦‚ä½•å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            <span class="type">Driver</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">com</span>.mysql.cj.jdbc.Driver(); <span class="comment">// åˆ›å»ºMySQLé©±åŠ¨å¯¹è±¡</span></span><br><span class="line">            DriverManager.registerDriver(driver); <span class="comment">// å®Œæˆé©±åŠ¨æ³¨å†Œ</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;useSSL=true&amp;characterEncoding=utf-8&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_user(name,password,realname,gender,tel) values(&#x27;tangsanzang&#x27;,&#x27;123&#x27;,&#x27;å”ä¸‰è—&#x27;,&#x27;ç”·&#x27;,&#x27;12566568956&#x27;)&quot;</span>; <span class="comment">// sqlè¯­å¥æœ€åçš„åˆ†å·&#x27;;&#x27;å¯ä»¥ä¸å†™ã€‚</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥äº†&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€</p><h1 id="æ³¨å†Œé©±åŠ¨çš„å¸¸ç”¨æ–¹å¼"><a href="#æ³¨å†Œé©±åŠ¨çš„å¸¸ç”¨æ–¹å¼" class="headerlink" title="æ³¨å†Œé©±åŠ¨çš„å¸¸ç”¨æ–¹å¼"></a>æ³¨å†Œé©±åŠ¨çš„å¸¸ç”¨æ–¹å¼</h1><p>ä¸Šé¢åœ¨æ³¨å†Œé©±åŠ¨çš„æ—¶å€™ï¼Œæ‰§è¡Œäº†è¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java.sql.<span class="type">Driver</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">com</span>.mysql.cj.jdbc.Driver();</span><br><span class="line">java.sql.DriverManager.registerDriver(driver);</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼æ˜¯è‡ªå·±newé©±åŠ¨å¯¹è±¡ï¼Œç„¶åè°ƒç”¨DriverManagerçš„registerDriver()æ–¹æ³•æ¥å®Œæˆé©±åŠ¨æ³¨å†Œï¼Œè¿˜æœ‰å¦ä¸€ç§æ–¹å¼ï¼Œå¹¶ä¸”è¿™ç§æ–¹å¼æ˜¯å¸¸ç”¨çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼å¸¸ç”¨ï¼Ÿ</p><ul><li>ç¬¬ä¸€ï¼šä»£ç å°‘äº†å¾ˆå¤šã€‚</li><li>ç¬¬äºŒï¼šè¿™ç§æ–¹å¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†<code>com.mysql.cj.jdbc.Driver</code>ç±»åé…ç½®åˆ°å±æ€§æ–‡ä»¶å½“ä¸­ã€‚</li></ul><p>å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæ‰¾ä¸€ä¸‹<code>com.mysql.cj.jdbc.Driver</code>çš„æºç ï¼š<br><img src="https://i0.hdslb.com/bfs/article/57a77526f8f48d82d9c66c2c12e0a9a8645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/226addf6184c7b3112827e990ab2b7dd645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/86299a0b2aa74e0ec5479baa40879db0645325325.png" alt="image.png"></p><p>é€šè¿‡æºç ä¸éš¾å‘ç°ï¼Œåœ¨<code>com.mysql.cj.jdbc.Driver</code>ç±»ä¸­æœ‰ä¸€ä¸ªé™æ€ä»£ç å—ï¼Œåœ¨è¿™ä¸ªé™æ€ä»£ç å—ä¸­è°ƒç”¨äº†<code>java.sql.DriverManager.registerDriver(new Driver());</code>å®Œæˆäº†é©±åŠ¨çš„æ³¨å†Œã€‚è€Œ<code>Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</code>ä»£ç çš„ä½œç”¨å°±æ˜¯è®©<code>com.mysql.cj.jdbc.Driver</code>ç±»å®ŒæˆåŠ è½½ï¼Œæ‰§è¡Œå®ƒçš„é™æ€ä»£ç å—ã€‚</p><p>ç¼–å†™ä»£ç æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;useSSL=true&amp;characterEncoding=utf-8&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_user(name,password,realname,gender,tel) values(&#x27;tangsanzang&#x27;,&#x27;123&#x27;,&#x27;å”ä¸‰è—&#x27;,&#x27;ç”·&#x27;,&#x27;12566568956&#x27;)&quot;</span>; <span class="comment">// sqlè¯­å¥æœ€åçš„åˆ†å·&#x27;;&#x27;å¯ä»¥ä¸å†™ã€‚</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥äº†&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/013260e01c3dd3ee756b34890bd7c292645325325.png" alt="image.png"></p><p>æ•°æ®åº“è¡¨ä¸­æ•°æ®ä¹Ÿæ–°å¢äº†ï¼š<br><img src="https://i0.hdslb.com/bfs/article/350a20cdf5442756ee30c1316e6c79e3645325325.png" alt="image.png"></p><p>â€</p><h1 id="JDBC-4-0åä¸ç”¨æ‰‹åŠ¨æ³¨å†Œé©±åŠ¨ï¼ˆäº†è§£ï¼‰"><a href="#JDBC-4-0åä¸ç”¨æ‰‹åŠ¨æ³¨å†Œé©±åŠ¨ï¼ˆäº†è§£ï¼‰" class="headerlink" title="JDBC 4.0åä¸ç”¨æ‰‹åŠ¨æ³¨å†Œé©±åŠ¨ï¼ˆäº†è§£ï¼‰"></a>JDBC 4.0åä¸ç”¨æ‰‹åŠ¨æ³¨å†Œé©±åŠ¨ï¼ˆäº†è§£ï¼‰</h1><p>ä»JDBC 4.0ï¼ˆ<strong>ä¹Ÿå°±æ˜¯Java6</strong>ï¼‰ç‰ˆæœ¬å¼€å§‹ï¼Œé©±åŠ¨çš„æ³¨å†Œä¸éœ€è¦å†æ‰‹åŠ¨å®Œæˆï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨å®Œæˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;useSSL=true&amp;characterEncoding=utf-8&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_user(name,password,realname,gender,tel) values(&#x27;tangsanzang&#x27;,&#x27;123&#x27;,&#x27;å”ä¸‰è—&#x27;,&#x27;ç”·&#x27;,&#x27;12566568956&#x27;)&quot;</span>; <span class="comment">// sqlè¯­å¥æœ€åçš„åˆ†å·&#x27;;&#x27;å¯ä»¥ä¸å†™ã€‚</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥äº†&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/037a8d954dd9597b78c7b21cb1f1f506645325325.png" alt="image.png"></p><p>æ•°æ®åº“è¡¨ä¸­æ•°æ®ä¹Ÿæ·»åŠ äº†ä¸€æ¡ï¼š<br><img src="https://i0.hdslb.com/bfs/article/5937ca6d6b5ea77781c2656820db6bb5645325325.png" alt="image.png"><br><strong>æ³¨æ„ï¼šè™½ç„¶å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸éœ€è¦è¿›è¡Œæ‰‹åŠ¨æ³¨å†Œé©±åŠ¨äº†ï¼Œä½†åœ¨å®é™…çš„å¼€å‘ä¸­æœ‰äº›æ•°æ®åº“é©±åŠ¨ç¨‹åºä¸æ”¯æŒè‡ªåŠ¨å‘ç°åŠŸèƒ½ï¼Œä»ç„¶éœ€è¦æ‰‹åŠ¨æ³¨å†Œã€‚æ‰€ä»¥å»ºè®®å¤§å®¶è¿˜æ˜¯åˆ«çœç•¥äº†ã€‚</strong></p><p>â€</p><h1 id="åŠ¨æ€é…ç½®è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯"><a href="#åŠ¨æ€é…ç½®è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯" class="headerlink" title="åŠ¨æ€é…ç½®è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯"></a>åŠ¨æ€é…ç½®è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯</h1><p>ä¸ºäº†ç¨‹åºçš„é€šç”¨æ€§ï¼Œä¸ºäº†åˆ‡æ¢æ•°æ®åº“çš„æ—¶å€™ä¸éœ€è¦ä¿®æ”¹Javaç¨‹åºï¼Œä¸ºäº†ç¬¦åˆOCPå¼€é—­åŸåˆ™ï¼Œå»ºè®®å°†è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯é…ç½®åˆ°å±æ€§æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;useSSL=true&amp;characterEncoding=utf-8</span></span><br><span class="line"><span class="attr">user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨IOæµè¯»å–å±æ€§æ–‡ä»¶ï¼ŒåŠ¨æ€è·å–è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å±æ€§æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_user(name,password,realname,gender,tel) values(&#x27;tangsanzang&#x27;,&#x27;123&#x27;,&#x27;å”ä¸‰è—&#x27;,&#x27;ç”·&#x27;,&#x27;12566568956&#x27;)&quot;</span>; <span class="comment">// sqlè¯­å¥æœ€åçš„åˆ†å·&#x27;;&#x27;å¯ä»¥ä¸å†™ã€‚</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ’å…¥äº†&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/5c5a71f04babfab8eff38cf666d60d6d645325325.png" alt="image.png"></p><p>æ•°æ®åº“è¡¨ä¸­ä¹Ÿä¼šæ–°å¢ä¸€æ¡è®°å½•ï¼š<br><img src="https://i0.hdslb.com/bfs/article/89712eacdb3aa86272c573dd6966c33c645325325.png" alt="image.png"></p><p>ä»¥åè¦è¿æ¥å…¶ä»–æ•°æ®åº“ï¼Œåªè¦ä¿®æ”¹å±æ€§æ–‡ä»¶ä¸­çš„é…ç½®å³å¯ã€‚</p><p>â€</p><h1 id="è·å–è¿æ¥çš„å…¶ä»–æ–¹å¼ï¼ˆäº†è§£ï¼‰"><a href="#è·å–è¿æ¥çš„å…¶ä»–æ–¹å¼ï¼ˆäº†è§£ï¼‰" class="headerlink" title="è·å–è¿æ¥çš„å…¶ä»–æ–¹å¼ï¼ˆäº†è§£ï¼‰"></a>è·å–è¿æ¥çš„å…¶ä»–æ–¹å¼ï¼ˆäº†è§£ï¼‰</h1><p>ä¸Šé¢æˆ‘ä»¬è®²åˆ°äº†ç¬¬ä¸€ç§è·å–è¿æ¥çš„æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);</span><br></pre></td></tr></table></figure><p>é™¤äº†ä»¥ä¸Šçš„è¿™ç§æ–¹å¼ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸¤ç§æ–¹å¼ï¼Œé€šè¿‡APIå¸®åŠ©æ–‡æ¡£å¯ä»¥çœ‹åˆ°ï¼š<br><img src="https://i0.hdslb.com/bfs/article/7bbce6542f2760163f5080581711d87f645325325.png" alt="image.png"></p><p>â€</p><h2 id="getConnection-String-url"><a href="#getConnection-String-url" class="headerlink" title="getConnection(String url)"></a>getConnection(String url)</h2><p>è¿™ç§æ–¹å¼å‚æ•°åªæœ‰ä¸€ä¸ªurlï¼Œé‚£ç”¨æˆ·åå’Œå¯†ç æ”¾åœ¨å“ªé‡Œå‘¢ï¼Ÿå¯ä»¥æ”¾åˆ°urlå½“ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest05</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?user=root&amp;password=123456&quot;</span>;</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;è¿æ¥å¯¹è±¡ï¼š&quot;</span> + conn);</span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException|ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/5880f19cd1d1f896aa7eb037af0cf4a8645325325.png" alt="image.png"></p><p>â€</p><h2 id="getConnection-String-url-Properties-info"><a href="#getConnection-String-url-Properties-info" class="headerlink" title="getConnection(String url, Properties info)"></a>getConnection(String url, Properties info)</h2><p>è¿™ç§æ–¹å¼æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯urlï¼Œä¸€ä¸ªæ˜¯Propertieså¯¹è±¡ã€‚</p><ul><li>urlï¼šå¯ä»¥å•çº¯æä¾›ä¸€ä¸ªurlåœ°å€</li><li>infoï¼šå¯ä»¥å°†urlçš„å‚æ•°å­˜æ”¾åˆ°è¯¥å¯¹è±¡ä¸­</li></ul><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest06</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc&quot;</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="type">Properties</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            info.setProperty(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">            info.setProperty(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">            info.setProperty(<span class="string">&quot;useUnicode&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">            info.setProperty(<span class="string">&quot;serverTimezone&quot;</span>, <span class="string">&quot;Asia/Shanghai&quot;</span>);</span><br><span class="line">            info.setProperty(<span class="string">&quot;useSSL&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">            info.setProperty(<span class="string">&quot;characterEncoding&quot;</span>, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> DriverManager.getConnection(url, info);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;è¿æ¥å¯¹è±¡ï¼š&quot;</span> + conn);</span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException|ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/a3be8c4512e4ae7f3e333d14e1deae49645325325.png" alt="image.png"></p><p>ä»¥ä¸Šè¿™ä¸¤ç§æ–¹å¼ä½œä¸ºäº†è§£ï¼Œä¸æ˜¯é‡ç‚¹ã€‚</p><p>â€</p><h1 id="JDBCå®Œæˆä¿®æ”¹æ“ä½œ"><a href="#JDBCå®Œæˆä¿®æ”¹æ“ä½œ" class="headerlink" title="JDBCå®Œæˆä¿®æ”¹æ“ä½œ"></a>JDBCå®Œæˆä¿®æ”¹æ“ä½œ</h1><p>ä¿®æ”¹æ“ä½œå°±æ˜¯æ‰§è¡Œupdateè¯­å¥ã€‚ä»ç„¶è°ƒç”¨Statementæ¥å£çš„executeUpdate(sql)æ–¹æ³•å³å¯ã€‚<br>ä¸šåŠ¡è¦æ±‚ï¼šå°†nameæ˜¯tangsanzangçš„çœŸå®å§“åä¿®æ”¹ä¸ºå”åƒ§ã€‚<br>ä¿®æ”¹å‰çš„æ•°æ®ï¼š<br><img src="https://i0.hdslb.com/bfs/article/32f83cb3d90269bc1b91280da1365289645325325.png" alt="image.png"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest07</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å±æ€§æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_user set realname=&#x27;å”åƒ§&#x27; where name=&#x27;tangsanzang&#x27;&quot;</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ›´æ–°äº†&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/a49abc8c2c7e3f7e5ae7582be0630e50645325325.png" alt="image.png"></p><p>æ›´æ–°åçš„æ•°æ®ï¼š<br><img src="https://i0.hdslb.com/bfs/article/6974bdd51e88fd575356f524e205876e645325325.png" alt="image.png"></p><p>â€</p><h1 id="JDBCå®Œæˆåˆ é™¤æ“ä½œ"><a href="#JDBCå®Œæˆåˆ é™¤æ“ä½œ" class="headerlink" title="JDBCå®Œæˆåˆ é™¤æ“ä½œ"></a>JDBCå®Œæˆåˆ é™¤æ“ä½œ</h1><p>åˆ é™¤æ“ä½œå°±æ˜¯æ‰§è¡Œdeleteè¯­å¥ã€‚ä»ç„¶è°ƒç”¨Statementæ¥å£çš„executeUpdate(sql)æ–¹æ³•å³å¯ã€‚<br>ä¸šåŠ¡è¦æ±‚ï¼šå°†idæ˜¯15ï¼Œ16ï¼Œ17çš„æ•°æ®åˆ é™¤ã€‚<br>åˆ é™¤å‰çš„æ•°æ®ï¼š<br><img src="https://i0.hdslb.com/bfs/article/6974bdd51e88fd575356f524e205876e645325325.png" alt="image.png"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCTest08</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// é€šè¿‡ä»¥ä¸‹ä»£ç è·å–å±æ€§æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="type">ResourceBundle</span> <span class="variable">bundle</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. è·å–è¿æ¥</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. è·å–æ•°æ®åº“æ“ä½œå¯¹è±¡</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. æ‰§è¡ŒSQLè¯­å¥</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_user where id in(15, 16, 17)&quot;</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> stmt.executeUpdate(sql);</span><br><span class="line">            System.out.println(<span class="string">&quot;åˆ é™¤äº†&quot;</span> + count + <span class="string">&quot;æ¡è®°å½•&quot;</span>);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span>(SQLException | ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 6. é‡Šæ”¾èµ„æº</span></span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/f111b68a7d96ea5d252820f194a0c48d645325325.png" alt="image.png"></p><p>åˆ é™¤åçš„æ•°æ®ï¼š<br><img src="https://i0.hdslb.com/bfs/article/482282970addcf62ca8949732a53c83d645325325.png" alt="image.png"></p><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬01ç«  JDBCæ¦‚è¿°</title>
      <link href="/posts/13311.html"/>
      <url>/posts/13311.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="ä»€ä¹ˆæ˜¯JDBC"><a href="#ä»€ä¹ˆæ˜¯JDBC" class="headerlink" title="ä»€ä¹ˆæ˜¯JDBC"></a>ä»€ä¹ˆæ˜¯JDBC</h1><p>JDBCï¼ˆJava DataBase Connectivityï¼‰å°±æ˜¯Javaæ•°æ®åº“è¿æ¥ï¼Œè¯´ç™½äº†å°±æ˜¯ç”¨Javaè¯­è¨€æ¥æ“ä½œæ•°æ®åº“ã€‚åŸæ¥æˆ‘ä»¬æ“ä½œæ•°æ®åº“æ˜¯åœ¨æ§åˆ¶å°ä½¿ç”¨SQLè¯­å¥æ¥æ“ä½œæ•°æ®åº“ï¼ŒJDBCæ˜¯ç”¨Javaè¯­è¨€å‘æ•°æ®åº“å‘é€SQLè¯­å¥ã€‚<br><img src="https://i0.hdslb.com/bfs/article/a0c9aaf54a19db3b9443c718b5a40b35645325325.png" alt="å›¾ç‰‡1.png"></p><p>â€</p><h1 id="JDBCåŸç†"><a href="#JDBCåŸç†" class="headerlink" title="JDBCåŸç†"></a>JDBCåŸç†</h1><p>æ—©æœŸSUNå…¬å¸çš„å¤©æ‰ä»¬æƒ³ç¼–å†™ä¸€å¥—å¯ä»¥è¿æ¥å¤©ä¸‹æ‰€æœ‰æ•°æ®åº“çš„APIï¼Œä½†æ˜¯å½“ä»–ä»¬åˆšåˆšå¼€å§‹æ—¶å°±å‘ç°è¿™æ˜¯ä¸å¯å®Œæˆçš„ä»»åŠ¡ï¼Œå› ä¸ºå„ä¸ªå‚å•†çš„æ•°æ®åº“æœåŠ¡å™¨å·®å¼‚å¤ªå¤§äº†ã€‚åæ¥SUNå¼€å§‹ä¸æ•°æ®åº“å‚å•†ä»¬è®¨è®ºï¼Œæœ€ç»ˆå¾—å‡ºçš„ç»“è®ºæ˜¯ï¼Œç”±SUNæä¾›ä¸€å¥—è®¿é—®æ•°æ®åº“çš„è§„èŒƒï¼ˆå°±æ˜¯ä¸€ç»„æ¥å£ï¼‰ï¼Œå¹¶æä¾›è¿æ¥æ•°æ®åº“çš„åè®®æ ‡å‡†ï¼Œç„¶åå„ä¸ªæ•°æ®åº“å‚å•†ä¼šéµå¾ªSUNçš„è§„èŒƒæä¾›ä¸€å¥—è®¿é—®è‡ªå·±å…¬å¸æ•°æ®åº“æœåŠ¡å™¨çš„APIã€‚SUNæä¾›çš„è§„èŒƒå‘½åä¸ºJDBCï¼Œè€Œå„ä¸ªå‚å•†æä¾›çš„ï¼Œéµå¾ªäº†JDBCè§„èŒƒçš„ï¼Œå¯ä»¥è®¿é—®è‡ªå·±æ•°æ®åº“çš„APIè¢«ç§°ä¹‹ä¸ºé©±åŠ¨ï¼<br><img src="https://i0.hdslb.com/bfs/article/b7d67a00f104cb642d7a7965231eaa5e645325325.png" alt="å›¾ç‰‡2.png"><br>JDBCæ˜¯æ¥å£ï¼Œè€ŒJDBCé©±åŠ¨æ‰æ˜¯æ¥å£çš„å®ç°ï¼Œæ²¡æœ‰é©±åŠ¨æ— æ³•å®Œæˆæ•°æ®åº“è¿æ¥ï¼æ¯ä¸ªæ•°æ®åº“å‚å•†éƒ½æœ‰è‡ªå·±çš„é©±åŠ¨ï¼Œç”¨æ¥è¿æ¥è‡ªå·±å…¬å¸çš„æ•°æ®åº“ã€‚<br>å½“ç„¶è¿˜æœ‰ç¬¬ä¸‰æ–¹å…¬å¸ä¸“é—¨ä¸ºæŸä¸€æ•°æ®åº“æä¾›é©±åŠ¨ï¼Œè¿™æ ·çš„é©±åŠ¨å¾€å¾€ä¸æ˜¯å¼€æºå…è´¹çš„ï¼</p><p>â€</p><h1 id="æ¨¡æ‹ŸJDBCæ¥å£"><a href="#æ¨¡æ‹ŸJDBCæ¥å£" class="headerlink" title="æ¨¡æ‹ŸJDBCæ¥å£"></a>æ¨¡æ‹ŸJDBCæ¥å£</h1><h2 id="æ¥å£åœ¨å¼€å‘ä¸­çš„ä½œç”¨"><a href="#æ¥å£åœ¨å¼€å‘ä¸­çš„ä½œç”¨" class="headerlink" title="æ¥å£åœ¨å¼€å‘ä¸­çš„ä½œç”¨"></a>æ¥å£åœ¨å¼€å‘ä¸­çš„ä½œç”¨</h2><p>Javaä¸­æ¥å£çš„ä½œç”¨ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li>å®šä¹‰æ ‡å‡†ï¼šæ¥å£å¯ä»¥ç”¨äºå®šä¹‰æ ‡å‡†ï¼Œè§„èŒƒåº”è¯¥å¦‚ä½•å®ŒæˆæŸä¸ªä»»åŠ¡æˆ–åº”è¯¥å…·æœ‰å“ªäº›å±æ€§ã€æ–¹æ³•ç­‰ã€‚</li><li>éšè—å®ç°ï¼šæ¥å£éš”ç¦»äº†ç±»çš„å®ç°å’Œå¤–ç•Œçš„é€»è¾‘ä½¿ç”¨ï¼Œä½¿å¾—å¤–éƒ¨æ— è®ºæ˜¯è®¿é—®æ¥å£çš„å¸¸é‡æˆ–æ˜¯æ¥å£çš„æ–¹æ³•éƒ½ä¸éœ€è¦å…³å¿ƒæ¥å£çš„å®ç°ã€‚</li><li>å®ç°å¤šæ€ï¼šä¸€ä¸ªç±»å®ç°å¤šä¸ªæ¥å£ï¼Œåœ¨å®ç°æ¥å£çš„è¿‡ç¨‹ä¸­ï¼Œç±»ä¾¿ä¼šå…·æœ‰æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å®é™…åº”ç”¨ä¸­æ–¹ä¾¿çš„å®ç°å¤šæ€çš„æ•ˆæœã€‚</li><li>æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼šé€šè¿‡æ¥å£å¯ä»¥ä¸ºé¡¹ç›®æä¾›æ›´å¥½çš„æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼Œæ¥å£å®šä¹‰äº†ä¸€ä¸ªå…±åŒçš„æ ‡å‡†ï¼Œä½¿å¾—æ–°çš„ç±»å¯ä»¥å¾ˆå®¹æ˜“åœ°åŠ å…¥åˆ°å·²æœ‰çš„ç³»ç»Ÿä¸­ï¼Œè€Œä¸”ä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„ä»£ç ã€‚</li></ol><p>æ€»çš„æ¥è¯´ï¼ŒJavaä¸­çš„æ¥å£å¯ä»¥è®©æˆ‘ä»¬é€šè¿‡è§„èŒƒæ¥ç¼–å†™æ›´åŠ æ ‡å‡†å’Œçµæ´»çš„ä»£ç ï¼Œä½¿å¾—ä»£ç æ˜“äºç»´æŠ¤å’Œæ‰©å±•ï¼Œå¹¶é€šè¿‡å¤šæ€çš„ç‰¹æ€§æ¥æé«˜ä»£ç çš„é‡ç”¨æ€§å’Œå¯è¯»æ€§ã€‚<strong>Javaæ¥å£åœ¨ä½¿ç”¨åœºæ™¯ä¸­ï¼Œä¸€å®šæ˜¯å­˜åœ¨ä¸¤ä¸ªè§’è‰²çš„ï¼Œä¸€ä¸ªæ˜¯æ¥å£çš„è°ƒç”¨è€…ï¼Œä¸€ä¸ªæ˜¯æ¥å£çš„å®ç°è€…ï¼Œæ¥å£çš„å‡ºç°è®©è°ƒç”¨è€…å’Œå®ç°è€…è§£è€¦åˆäº†ã€‚</strong></p><p>â€</p><h2 id="ç¼–å†™ç¨‹åºæ¨¡æ‹ŸJDBCæ¥å£"><a href="#ç¼–å†™ç¨‹åºæ¨¡æ‹ŸJDBCæ¥å£" class="headerlink" title="ç¼–å†™ç¨‹åºæ¨¡æ‹ŸJDBCæ¥å£"></a>ç¼–å†™ç¨‹åºæ¨¡æ‹ŸJDBCæ¥å£</h2><p><strong>æ¥å£çš„åˆ¶å®šè€…</strong>ï¼šSUNå…¬å¸è´Ÿè´£åˆ¶å®šçš„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SUNå…¬å¸è´Ÿè´£åˆ¶å®šJDBCæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">JDBC</span> &#123;</span><br><span class="line">    <span class="comment">// è´Ÿè´£è¿æ¥æ•°æ®åº“çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getConnection</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ¥å£çš„å®ç°è€…</strong>ï¼šå„å¤§æ•°æ®åº“å‚å•†åˆ†åˆ«å¯¹JDBCæ¥å£è¿›è¡Œå®ç°ï¼Œå®ç°ç±»è¢«ç§°ä¸º<strong>é©±åŠ¨</strong><br>MySQLæ•°æ®åº“å‚å•†å¯¹JDBCæ¥å£çš„å®ç°ï¼šMySQLé©±åŠ¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySQLDriver</span> <span class="keyword">implements</span> <span class="title class_">JDBC</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸MySQLæ•°æ®åº“è¿æ¥å»ºç«‹æˆåŠŸï¼Œæ‚¨æ­£åœ¨æ“ä½œMySQLæ•°æ®åº“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Oracleæ•°æ®åº“å‚å•†å¯¹JDBCæ¥å£çš„å®ç°ï¼šOracleé©±åŠ¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OracleDriver</span> <span class="keyword">implements</span> <span class="title class_">JDBC</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸Oracleæ•°æ®åº“è¿æ¥å»ºç«‹æˆåŠŸï¼Œæ‚¨æ­£åœ¨æ“ä½œOracleæ•°æ®åº“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ¥å£çš„è°ƒç”¨è€…</strong>ï¼šè¦æ“ä½œæ•°æ®åº“çš„Javaç¨‹åºå‘˜ï¼ˆæˆ‘ä»¬ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">JDBC</span> <span class="variable">jdbc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MySQLDriver</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åªéœ€è¦é¢å‘æ¥å£ç¼–ç¨‹å³å¯ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„å®ç°ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“æ˜¯å“ªä¸ªå‚å•†çš„æ•°æ®åº“</span></span><br><span class="line">        jdbc.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯æ“ä½œMySQLæ•°æ®åº“ï¼Œå¦‚æœè¦æ“ä½œOracleæ•°æ®åº“çš„è¯ï¼Œéœ€è¦new OracleDriver()ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">JDBC</span> <span class="variable">jdbc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OracleDriver</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åªéœ€è¦é¢å‘æ¥å£ç¼–ç¨‹å³å¯ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„å®ç°ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“æ˜¯å“ªä¸ªå‚å•†çš„æ•°æ®åº“</span></span><br><span class="line">        jdbc.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯èƒ½ä½ ä¼šè¯´ï¼Œæœ€ç»ˆè¿˜æ˜¯ä¿®æ”¹äº†javaä»£ç ï¼Œä¸ç¬¦åˆOCPåŸåˆ™å‘€ï¼Œå¦‚æœä½ æƒ³è¾¾åˆ°OCPï¼Œé‚£å¯ä»¥å°†åˆ›å»ºå¯¹è±¡çš„ä»»åŠ¡äº¤ç»™åå°„æœºåˆ¶ï¼Œå°†ç±»åé…ç½®åˆ°æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ï¼š<br>é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">MySQLDriver</span></span><br></pre></td></tr></table></figure><p>Javaä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">String</span> <span class="variable">driverClassName</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;jdbc&quot;</span>).getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> Class.forName(driverClassName);</span><br><span class="line">        <span class="type">JDBC</span> <span class="variable">jdbc</span> <span class="operator">=</span> (JDBC)c.newInstance();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åªéœ€è¦é¢å‘æ¥å£ç¼–ç¨‹å³å¯ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„å®ç°ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“æ˜¯å“ªä¸ªå‚å•†çš„æ•°æ®åº“</span></span><br><span class="line">        jdbc.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆé€šè¿‡ä¿®æ”¹jdbc.propertiesé…ç½®æ–‡ä»¶å³å¯åšåˆ°æ•°æ®åº“çš„åˆ‡æ¢ã€‚è¿™æ ·å°±å®Œå…¨åšåˆ°äº†è°ƒç”¨è€…å’Œå®ç°è€…çš„è§£è€¦åˆã€‚è°ƒç”¨è€…ä¸éœ€è¦å…³å¿ƒå®ç°è€…ï¼Œå®ç°è€…ä¹Ÿä¸éœ€è¦å…³å¿ƒè°ƒç”¨è€…ã€‚åŒæ–¹éƒ½æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ã€‚è¿™å°±æ˜¯JDBCçš„æœ¬è´¨ï¼šå®ƒå°±æ˜¯ä¸€å¥—æ¥å£ã€‚</p><p>â€</p><h1 id="é…ç½®CLASSPATH"><a href="#é…ç½®CLASSPATH" class="headerlink" title="é…ç½®CLASSPATH"></a>é…ç½®CLASSPATH</h1><p>ç»è¿‡ä¸Šé¢å†…å®¹çš„è®²è§£ï¼Œå¤§å®¶åº”è¯¥çŸ¥é“JDBCå¼€å‘æœ‰ä¸‰ä¸ªè§’è‰²çš„å‚ä¸ï¼š</p><ul><li>æˆ‘ä»¬ï¼ˆå¯¹æ•°æ®åº“ä¸­æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„Javaç¨‹åºå‘˜ï¼‰</li><li>JDBCæ¥å£çš„åˆ¶å®šè€…</li><li>JDBCæ¥å£çš„å®ç°è€…ï¼ˆé©±åŠ¨ï¼‰</li></ul><p>ä»¥ä¸Šä¸‰è€…å‡‘é½äº†æˆ‘ä»¬æ‰èƒ½è¿›è¡ŒJDBCçš„å¼€å‘ã€‚å®ƒä»¬ä¸‰ä¸ªéƒ½åœ¨å“ªé‡Œå‘¢ï¼Ÿâ€œæˆ‘ä»¬â€å°±ä¸ç”¨å¤šè¯´äº†ï¼Œå†™æ“ä½œæ•°æ®åº“çš„ä»£ç å°±è¡Œäº†ã€‚JDBCæ¥å£åœ¨å“ªï¼ˆæ¥å£çš„classæ–‡ä»¶åœ¨å“ªï¼‰ï¼ŸJDBCæ¥å£å®ç°ç±»åœ¨å“ªï¼ˆé©±åŠ¨åœ¨å“ªï¼‰ï¼Ÿ</p><p>â€</p><h2 id="JDBCæ¥å£åœ¨å“ª"><a href="#JDBCæ¥å£åœ¨å“ª" class="headerlink" title="JDBCæ¥å£åœ¨å“ª"></a>JDBCæ¥å£åœ¨å“ª</h2><p>JDBCæ¥å£åœ¨JDKä¸­ã€‚å¯¹åº”çš„åŒ…æ˜¯ï¼š<strong>java.sql.*;</strong><br>JDBC APIå¸®åŠ©æ–‡æ¡£å°±åœ¨JDKçš„å¸®åŠ©æ–‡æ¡£å½“ä¸­ã€‚<br><img src="https://i0.hdslb.com/bfs/article/4732038afad163e891eb10138b1e5a77645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/850a044518789ca3d23c5e540022beb5645325325.png" alt="image.png"></p><p>â€</p><h2 id="é©±åŠ¨åœ¨å“ª"><a href="#é©±åŠ¨åœ¨å“ª" class="headerlink" title="é©±åŠ¨åœ¨å“ª"></a>é©±åŠ¨åœ¨å“ª</h2><p>é©±åŠ¨æ˜¯JDBCæ¥å£çš„å®ç°ç±»ï¼Œè¿™äº›å®ç°ç±»æ˜¯å„å¤§æ•°æ®åº“å‚å®¶è‡ªå·±å®ç°çš„ï¼Œæ‰€ä»¥è¿™äº›å®ç°ç±»çš„å°±éœ€è¦å»æ•°æ®åº“å‚å•†ç›¸å…³çš„ç½‘ç«™ä¸Šä¸‹è½½äº†ã€‚é€šå¸¸è¿™äº›å®ç°ç±»è¢«å…¨éƒ¨æ”¾åˆ°ä¸€ä¸ªxxx.jaråŒ…ä¸­ã€‚ä¸‹é¢æ¼”ç¤ºä¸€ä¸‹mysqlçš„é©±åŠ¨å¦‚ä½•ä¸‹è½½ã€ä¸‹è½½mysqlçš„é©±åŠ¨jaråŒ…ã€‘ï¼š<br>æ‰“å¼€é¡µé¢ï¼š<a href="https://dev.mysql.com/downloads/connector/j/">https://dev.mysql.com/downloads/connector/j/</a><br><img src="https://i0.hdslb.com/bfs/article/d3a834bf0c89feb6b572552eac7e1ede645325325.png" alt="image.png"><br>ä¸‹è½½åï¼š<br><img src="https://i0.hdslb.com/bfs/article/559bc7dd2a9e6b5e076033c95c118762645325325.png" alt="image.png"><br>è§£å‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/0b41409fa9e561167b392c858c0511ff645325325.png" alt="image.png"><br>ä¸Šå›¾ä¸­çš„â€œmysql-connector-j-8.2.0.jarâ€å°±æ˜¯mysqlæ•°æ®åº“çš„é©±åŠ¨ï¼Œ8.2.0è¿™ä¸ªç‰ˆæœ¬é€‚ç”¨äºç›®å‰æœ€æ–°ç‰ˆæœ¬çš„mysqlæ•°æ®åº“ã€‚å¯ä»¥ä½¿ç”¨è§£å‹å·¥å…·æ‰“å¼€è¿™ä¸ªjaråŒ…ï¼Œçœ‹çœ‹é‡Œé¢æ˜¯ä»€ä¹ˆï¼Ÿ<br><img src="https://i0.hdslb.com/bfs/article/c3b5a4ef74d42da4f1b1f47b8a5becb4645325325.png" alt="image.png"><br>å¯ä»¥çœ‹åˆ°è¿™ä¸ªjaråŒ…ä¸­éƒ½æ˜¯xxx.classæ–‡ä»¶ï¼Œè¿™å°±æ˜¯JDBCæ¥å£çš„å®ç°ç±»ã€‚è¿™ä¸ªjaråŒ…å°±æ˜¯è¿æ¥mysqlæ•°æ®åº“çš„é©±åŠ¨ã€‚å¦‚æœæ˜¯oracleçš„é©±åŠ¨å°±éœ€è¦å»oracleçš„å®˜ç½‘ä¸‹è½½äº†ã€‚è¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><p>â€</p><h2 id="å¦‚æœä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å¼€å‘"><a href="#å¦‚æœä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å¼€å‘" class="headerlink" title="å¦‚æœä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å¼€å‘"></a>å¦‚æœä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å¼€å‘</h2><p>å¦‚æœä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å¼€å‘ï¼Œä¸ä½¿ç”¨é›†æˆå¼€å‘ç¯å¢ƒçš„è¯ï¼Œä»¥ä¸Šçš„jaråŒ…å°±éœ€è¦æ‰‹åŠ¨é…ç½®åˆ°ç¯å¢ƒå˜é‡CLASSPATHå½“ä¸­ï¼Œé…ç½®å¦‚ä¸‹ï¼š<br>å¦‚æœjaråŒ…æ”¾åœ¨è¿™é‡Œï¼š<br><img src="https://i0.hdslb.com/bfs/article/f3042185c1065ef44c61d16412116970645325325.png" alt="image.png"><br>å°±éœ€è¦è¿™æ ·é…ç½®ç¯å¢ƒå˜é‡CLASSPATHï¼š<br><img src="https://i0.hdslb.com/bfs/article/86eee9a9993fc824a2aeab76950db127645325325.png" alt="image.png"><br>æ³¨æ„é…ç½®è·¯å¾„ä¸­çš„å½“å‰è·¯å¾„â€œ.â€æ˜¯ä¸èƒ½çœç•¥çš„ã€‚</p><p>â€</p><h2 id="å¦‚æœä½¿ç”¨IDEAå·¥å…·å¼€å‘"><a href="#å¦‚æœä½¿ç”¨IDEAå·¥å…·å¼€å‘" class="headerlink" title="å¦‚æœä½¿ç”¨IDEAå·¥å…·å¼€å‘"></a>å¦‚æœä½¿ç”¨IDEAå·¥å…·å¼€å‘</h2><p>å¦‚æœæ˜¯é‡‡ç”¨é›†æˆå¼€å‘å·¥å…·ï¼Œä¾‹å¦‚IDEAï¼Œå°±ä¸éœ€è¦æ‰‹åŠ¨é…ç½®CLASSPATHäº†ï¼Œåªéœ€è¦å°†jaråŒ…æ”¾åˆ°IDEAä¸­ï¼ˆå®é™…ä¸Šæ”¾åˆ°IDEAå·¥å…·ä¸­çš„è¿‡ç¨‹å°±æ˜¯ç­‰åŒäºåœ¨é…ç½®CLASSPATHï¼‰</p><p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºlibç›®å½•ï¼Œå°†jaråŒ…æ‹·è´åˆ°libç›®å½•<br><img src="https://i0.hdslb.com/bfs/article/d304421a8b300180d6990dae8374f098645325325.png" alt="å›¾ç‰‡3.png"></p><p>ç¬¬äºŒæ­¥ï¼šæŠŠlibåŒ…å¼•å…¥é¡¹ç›®ç¯å¢ƒ<br><img src="https://i0.hdslb.com/bfs/article/e3ffb17081fb17cf9f95f4102c0864ca645325325.png" alt="å›¾ç‰‡4.png"><br><img src="https://i0.hdslb.com/bfs/article/437fc137af9123b4292d7e50b5860d06645325325.png" alt="å›¾ç‰‡5.png"></p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬9ç«  shellç¼–ç¨‹</title>
      <link href="/posts/25470.html"/>
      <url>/posts/25470.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="tip info faa-horizontal animated"><p>æœˆè¾‰ç´ æ´ï¼Œé’è¡«å„’å£«åœ¨é™ˆå¹³å®‰èº«ä¾§ï¼Œä¸€èµ·è·Ÿéšå°‘å¹´å‰è¡Œå‡ºæ‹³ï¼Œäº¦æ˜¯æ‚ ç„¶ã€‚é™ˆå¹³å®‰èµ°å®Œä¸€è¶Ÿæ‹³æ¡©åï¼Œè½»è½»åœä¸‹è„šæ­¥ï¼Œä¸å†ç»ƒæ‹³ã€‚ä»–æ²¡æœ‰è½¬å¤´æœ›å»ï¼Œå°±é‚£ä¹ˆçœ‹ç€è¿œæ–¹ï¼Œé™ˆå¹³å®‰åŒè¢–å†æ— æ˜¥é£è¦ç»•ã€‚ä»–çŸ¥é“ã€‚é½å…ˆç”Ÿï¼ŒçœŸçš„èµ°äº†</p></div><a href="https://www.bilibili.com/video/BV1Nb421a7TV/?spm_id_from=333.999.list.card_archive.click">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/20240815134316.png"></a><h1 id="Linuxç³»ç»Ÿç»“æ„"><a href="#Linuxç³»ç»Ÿç»“æ„" class="headerlink" title="Linuxç³»ç»Ÿç»“æ„"></a>Linuxç³»ç»Ÿç»“æ„</h1><p>Linuxæ“ä½œç³»ç»Ÿæ˜¯ä¸€ç§å¼€æ”¾æºä»£ç çš„ç±»UNIXæ“ä½œç³»ç»Ÿï¼Œå®ƒçš„ç»“æ„åˆ†ä¸ºå†…æ ¸ã€Shellå’Œåº”ç”¨ç¨‹åºä¸‰ä¸ªå±‚æ¬¡ã€‚</p><ol><li>å†…æ ¸å±‚</li></ol><p>å†…æ ¸æ˜¯Linuxç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ƒè´Ÿè´£ç®¡ç†ç³»ç»Ÿå„ç§ç¡¬ä»¶è®¾å¤‡ã€æ–‡ä»¶ç³»ç»Ÿã€å†…å­˜ç®¡ç†å’Œè¿›ç¨‹ç®¡ç†ç­‰æ ¸å¿ƒä»»åŠ¡ã€‚Linuxå†…æ ¸è®¾è®¡äº†è‰¯å¥½çš„æ¨¡å—åŒ–ç»“æ„ï¼Œå¯ä»¥åŠ¨æ€åœ°åŠ è½½å’Œå¸è½½å†…æ ¸æ¨¡å—ï¼Œè¿™ä½¿å¾—å†…æ ¸å¯ä»¥å…¼å®¹å„ç§ä¸åŒçš„ç¡¬ä»¶è®¾å¤‡å’Œå¤–å›´è®¾å¤‡ã€‚</p><ol start="2"><li>Shellå±‚</li></ol><p>Shellæ˜¯Linuxç³»ç»Ÿçš„å‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œå®ƒè´Ÿè´£å°†ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤è§£é‡Šå¹¶æ‰§è¡Œã€‚Linuxç³»ç»Ÿä¸Šæœ‰å¤šç§Shellï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯Bash Shellã€‚Bash Shell æä¾›äº†å„ç§ä¸°å¯Œçš„åŠŸèƒ½å’Œå¤„ç†èƒ½åŠ›ï¼Œå¦‚é€šé…ç¬¦ã€é‡å®šå‘ã€ç®¡é“ã€å˜é‡ç­‰ç­‰ã€‚</p><ol start="3"><li>åº”ç”¨å±‚</li></ol><p>åº”ç”¨å±‚æ˜¯Linuxç³»ç»Ÿä¸Šçš„å„ç§åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ï¼ŒåŒ…æ‹¬æ–‡æœ¬ç¼–è¾‘å™¨ã€å›¾å½¢ç•Œé¢ã€WebæœåŠ¡å™¨ã€é‚®ä»¶æœåŠ¡å™¨ã€æ•°æ®åº“æœåŠ¡å™¨ç­‰ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œåº”ç”¨ç¨‹åºé€šå¸¸ä»¥å¼€æ”¾æºä»£ç æ–¹å¼å‘ˆç°ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±å­¦ä¹ å’Œä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚è‡ªå·±ç¼–å†™ã€ä¿®æ”¹æˆ–æ‰©å±•ã€‚<br>â€‹<img src="https://i0.hdslb.com/bfs/article/3c959939646668e8bbc14c043b81f40f645325325.png" alt="image.png">â€‹</p><h1 id="éƒ½æœ‰å“ªäº›shell"><a href="#éƒ½æœ‰å“ªäº›shell" class="headerlink" title="éƒ½æœ‰å“ªäº›shell"></a>éƒ½æœ‰å“ªäº›shell</h1><p>Shellè¢«ç¿»è¯‘ä¸ºâ€œå£³â€ã€‚åœ¨Linuxå†…æ ¸å¤–é¢åŒ…äº†ä¸€ä¸ªå£³ã€‚<br>Shellæ˜¯ä¸€ç§ç”¨äºä¸æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’çš„å‘½ä»¤è¡Œè§£é‡Šå™¨ã€‚å®ƒæ˜¯ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œå¯ä»¥é€šè¿‡ç¼–å†™ä¸€ç³»åˆ—çš„å‘½ä»¤å’Œè„šæœ¬æ¥æ‰§è¡Œæ“ä½œç³»ç»Ÿçš„åŠŸèƒ½å’Œä»»åŠ¡ã€‚<br>æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­ç¼–å†™çš„å‘½ä»¤éƒ½æ˜¯Shellå‘½ä»¤ã€‚ä¾‹å¦‚ï¼šlsã€grepâ€¦â€¦ç­‰ã€‚</p><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¸¸è§çš„ShellåŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li>Bourne Shellï¼ˆ&#x2F;bin&#x2F;shï¼‰ï¼šæ˜¯Unixç³»ç»Ÿæœ€æ—©çš„shellç¨‹åºï¼Œç”±å²è’‚å¤«Â·ä¼¯æ©æ–¯ï¼ˆSteve Bourneï¼‰ç¼–å†™ã€‚è¯¥shellç¨‹åºæ˜¯è®¸å¤šLinuxå‘è¡Œç‰ˆä¸­é»˜è®¤ä½¿ç”¨çš„ç¨‹åºã€‚</li><li>Bourne-Again SHellï¼ˆ&#x2F;bin&#x2F;bashï¼‰ï¼šæ˜¯GNUé¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯Bourne Shellçš„å¢å¼ºç‰ˆï¼Œç›®å‰åœ¨å¤§éƒ¨åˆ†Linuxå‘è¡Œç‰ˆä¸­æ˜¯é»˜è®¤çš„shellç¨‹åºã€‚</li><li>C Shell ï¼ˆ&#x2F;bin&#x2F;cshï¼‰ï¼šæ˜¯Bill Joyç¼–å†™çš„ä¸€ä¸ªå…·æœ‰é¢å‘å¯¹è±¡è®¾è®¡ç†å¿µçš„shellç¨‹åºï¼Œå®ƒé‡‡ç”¨ä¸Cè¯­è¨€ç›¸ä¼¼çš„è¯­æ³•å’Œæ§åˆ¶ç»“æ„ã€‚C Shellä¸­çš„å‘½ä»¤æç¤ºç¬¦ä¸º%å·ã€‚</li><li>TENEX C Shellï¼ˆ&#x2F;bin&#x2F;tcshï¼‰ï¼šæ˜¯C Shellçš„å¢å¼ºç‰ˆï¼Œå®ƒå¯¹å†å²å‘½ä»¤å’Œåˆ«åç­‰æ–¹é¢è¿›è¡Œäº†æ”¹è¿›ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒC Shellä¸­çš„æ‰€æœ‰ç‰¹æ€§ã€‚TENEX C Shellä¸­çš„å‘½ä»¤æç¤ºç¬¦ä¹Ÿä¸º%å·ã€‚</li><li>Korn Shellï¼ˆ&#x2F;bin&#x2F;kshï¼‰ï¼šæ˜¯ç”±David Kornç¼–å†™çš„shellç¨‹åºï¼Œå®ƒæ˜¯Bourne Shellå’ŒC Shellçš„ç»“åˆï¼Œæ‹¥æœ‰ä¸¤ç§ä¸åŒçš„å·¥ä½œæ¨¡å¼ï¼šäº¤äº’æ¨¡å¼å’Œæ‰¹å¤„ç†æ¨¡å¼ã€‚</li><li>Z Shellï¼ˆ&#x2F;bin&#x2F;zshï¼‰ï¼šæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„shellç¨‹åºï¼Œå®ƒæ˜¯Bourne Shellçš„å¢å¼ºç‰ˆï¼Œå…·æœ‰ç¼©å†™ã€è‡ªåŠ¨å®Œæˆã€å¥æ³•é«˜äº®ç­‰åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒKorn Shellã€C Shellä»¥åŠBourne Shellçš„è¯­æ³•å’Œå‘½ä»¤ã€‚</li></ol><p>æ¯ç§Shelléƒ½æœ‰å…¶ç‰¹å®šçš„è¯­æ³•å’ŒåŠŸèƒ½ï¼Œä½†å®ƒä»¬é€šå¸¸éƒ½å…·æœ‰å…±åŒçš„åŸºæœ¬åŠŸèƒ½ï¼Œå¦‚å˜é‡æ“ä½œã€æ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥å’Œå‘½ä»¤æ‰§è¡Œç­‰ã€‚</p><p>Shellè„šæœ¬åœ¨è‡ªåŠ¨åŒ–ä»»åŠ¡ã€ç³»ç»Ÿç®¡ç†ã€æ‰¹å¤„ç†ä½œä¸šç­‰æ–¹é¢éå¸¸æœ‰ç”¨ã€‚å¼€å‘äººå‘˜å’Œç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨Shellè„šæœ¬æ¥ç¼–å†™ä¸€ç³»åˆ—çš„å‘½ä»¤å’Œé€»è¾‘ï¼Œä»¥ä¾¿è‡ªåŠ¨åŒ–æ‰§è¡Œå¸¸è§çš„ä»»åŠ¡å’Œæ“ä½œã€‚</p><p>åœ¨CentOSä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>chsh</code>å‘½ä»¤åˆ‡æ¢é»˜è®¤Shellã€‚<code>chsh</code>å‘½ä»¤å…è®¸æ‚¨æ›´æ”¹ç”¨æˆ·çš„ç™»å½•Shellã€‚ä»¥ä¸‹æ˜¯åˆ‡æ¢Shellçš„æ­¥éª¤ï¼š</p><ol><li>æŸ¥çœ‹å·²å®‰è£…çš„Shellã€‚</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/shells</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ”¹Shellã€‚</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /bin/sh</span><br></pre></td></tr></table></figure><ol start="3"><li>é‡æ–°ç™»å½•åï¼šæ£€æŸ¥Shellæ˜¯å¦å·²æ›´æ”¹ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $SHELL</span><br></pre></td></tr></table></figure><h1 id="shellçš„åŸºç¡€è¯­æ³•"><a href="#shellçš„åŸºç¡€è¯­æ³•" class="headerlink" title="shellçš„åŸºç¡€è¯­æ³•"></a>shellçš„åŸºç¡€è¯­æ³•</h1><p>shellè„šæœ¬å¯ä»¥ç¼–å†™åœ¨ä¸€ä¸ªxxx.shç»“å°¾çš„æ–‡ä»¶ä¸­ï¼Œxxx.shæ–‡ä»¶æˆ‘ä»¬ç§°ä¸ºshellè„šæœ¬æ–‡ä»¶ã€‚<br>shellè„šæœ¬æ–‡ä»¶æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç±»ä¼¼äºwindowsç¯å¢ƒä¸­çš„xxx.exe æˆ– xxx.bat ç­‰æ–‡ä»¶ã€‚</p><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><p>å•è¡Œæ³¨é‡Šæ˜¯ä¸€è¡Œæ–‡æœ¬ï¼Œå®ƒä»¥äº•å·ï¼ˆ#ï¼‰å¼€å¤´ï¼Œä»è¯¥å­—ç¬¦å¼€å§‹ä¸€ç›´å»¶ä¼¸åˆ°è¯¥è¡Œçš„ç»“æŸã€‚åœ¨æ­¤è¡Œå†…ï¼Œä»»ä½•å†…å®¹éƒ½ä¼šè¢« Shell è§£é‡Šå™¨å¿½ç•¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿™æ˜¯ä¸€è¡Œæ³¨é‡Š</span></span><br><span class="line">echo &quot;Hello, World!&quot;  # è¿™æ˜¯ä¸€è¡Œå¸¦æœ‰æ³¨é‡Šçš„ä»£ç </span><br></pre></td></tr></table></figure><p>Shell è„šæœ¬ä¹Ÿæ”¯æŒå¤šè¡Œæ³¨é‡Šï¼Œè¿™ç§æ³¨é‡Šä¹Ÿè¢«ç§°ä¸ºå—æ³¨é‡Šã€‚å—æ³¨é‡Šåœ¨è„šæœ¬ä¸­å¯ä»¥ç”¨äºåˆ†ç»„ä¸€ç³»åˆ—ä»£ç ï¼Œæˆ–å°†ä¸€æ®µä»£ç ç½®äºæœªè¢«æ‰§è¡Œçš„çŠ¶æ€ã€‚åœ¨ Bash Shell ä¸­ï¼Œå—æ³¨é‡Šé€šå¸¸ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">: &#x27;</span><br><span class="line">è¿™é‡Œæ˜¯æ³¨é‡Šå†…å®¹ã€‚</span><br><span class="line">å¯ä»¥æ˜¯å¤šè¡Œï¼Œç›´åˆ°ä¸‹é¢ä¸€è¡Œçš„å•ç‹¬å¼•å·ä¸ºæ­¢ã€‚</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œè¯´æ˜è¿™ç§å—æ³¨é‡Šçš„ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">: &#x27;</span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªå¤šè¡Œæ³¨é‡Šå—ã€‚</span><br><span class="line">æˆ‘ä»¬å°†åœ¨è¿™é‡Œæ·»åŠ ä¸€äº›æ³¨é‡Šï¼Œå¹¶å°†ä¸€äº›ä»£ç æ”¾åœ¨è¿™é‡Œï¼Œä»¥é˜²å®ƒä»¬è¢«æ‰§è¡Œã€‚</span><br><span class="line"></span><br><span class="line">echo &quot;Hello, World!&quot;</span><br><span class="line">&#x27;</span><br><span class="line"></span><br><span class="line">echo &quot;è¿™è¡Œæ˜¯è¢«æ‰§è¡Œçš„ã€‚&quot;</span><br></pre></td></tr></table></figure><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå¤šè¡Œæ³¨é‡Šå—ï¼Œè¯¥å—åŒ…å«æˆ‘ä»¬æƒ³è¦æ·»åŠ çš„æ³¨é‡Šå’Œæœªè¢«æ‰§è¡Œçš„ä»£ç ã€‚é€šè¿‡ä½¿ç”¨è¿™ç§æ–¹å¼æ·»åŠ æ³¨é‡Šï¼Œæˆ‘ä»¬å¯ä»¥è®©è„šæœ¬æ›´å…·å¯è¯»æ€§ã€‚</p><p>æ³¨æ„ï¼šç¬¬ä¸€è¡Œä»£ç çš„ä½œç”¨æ˜¯å‘ŠçŸ¥ç³»ç»Ÿé‡‡ç”¨bashè§£é‡Šå™¨æ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚å¯ä»¥çœç•¥ï¼Œå¦‚æœçœç•¥ä¼šé»˜è®¤ä½¿ç”¨å½“å‰ä¼šè¯çš„shellè§£é‡Šå™¨ã€‚</p><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><p>å½“æˆ‘ä»¬åœ¨Linuxæ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨å‘½ä»¤è¡Œç¯å¢ƒæ—¶ï¼ŒShellå˜é‡æ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚å®ƒä»¬å¯ä»¥ç”¨æ¥å­˜å‚¨å’Œæ“ä½œæ•°æ®ï¼Œä»è€Œè®©æˆ‘ä»¬æ›´åŠ æ–¹ä¾¿åœ°ç®¡ç†æ–‡ä»¶ã€ç¨‹åºå’Œç³»ç»Ÿã€‚<br>åœ¨Linuxä¸­ï¼Œæœ‰ä¸‰ç§ç±»å‹çš„Shellå˜é‡ï¼ŒåŒ…æ‹¬ï¼š</p><ol><li>ç¯å¢ƒå˜é‡</li><li>æœ¬åœ°å˜é‡</li><li>ç‰¹æ®Šå˜é‡</li></ol><h3 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h3><p>ç¯å¢ƒå˜é‡æ˜¯Linuxæ“ä½œç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„å˜é‡ç±»å‹ä¹‹ä¸€ã€‚å®ƒä»¬æ˜¯åœ¨Shellä¼šè¯å¤–è®¾ç½®çš„ï¼Œå¯ä»¥ç”±å¤šä¸ªè„šæœ¬å’Œè¿›ç¨‹å…±äº«ã€‚åœ¨Linuxä¸­ï¼Œç¯å¢ƒå˜é‡æ²¡æœ‰å›ºå®šçš„å€¼ï¼Œè€Œæ˜¯åœ¨éœ€è¦æ—¶é€šè¿‡è„šæœ¬æˆ–å‘½ä»¤è¿›è¡Œè®¾ç½®æˆ–æ›´æ–°ã€‚ï¼ˆ<strong>ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸€èˆ¬åœ¨&#x2F;etc&#x2F;profileæ–‡ä»¶ä¸­è®¾ç½®ã€‚</strong> ï¼‰<br>è¦æŸ¥çœ‹å½“å‰æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printenv</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env</span><br></pre></td></tr></table></figure><p>è¦è®¾ç½®ä¸€ä¸ªæ–°çš„ç¯å¢ƒå˜é‡ï¼Œè¯·ä½¿ç”¨â€œexportâ€å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export MY_VAR=&quot;Hello World&quot;</span><br></pre></td></tr></table></figure><p>è¦ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œåœ¨å˜é‡åç§°å‰å¿…é¡»åŠ ä¸Š$ç¬¦å·ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $MY_VAR</span><br></pre></td></tr></table></figure><h3 id="æœ¬åœ°å˜é‡"><a href="#æœ¬åœ°å˜é‡" class="headerlink" title="æœ¬åœ°å˜é‡"></a>æœ¬åœ°å˜é‡</h3><p>åœ¨Shellè„šæœ¬ä¸­ï¼Œå˜é‡çš„å‘½åéµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p><ol><li>å˜é‡åç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆã€‚</li><li>ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚</li><li>åŒºåˆ†å¤§å°å†™ã€‚</li><li>ç­‰å·ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</li><li>ä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ä½œä¸ºå˜é‡åï¼Œå¦‚$, &amp;, !, (, ), *ç­‰ã€‚</li></ol><p>shellå˜é‡åå‘½åè§„èŒƒï¼š</p><ol><li>ç¯å¢ƒå˜é‡ä¸€èˆ¬æ˜¯å…¨éƒ¨å¤§å†™ï¼Œå•è¯å’Œå•è¯ä¹‹é—´é‡‡ç”¨ä¸‹åˆ’çº¿åˆ†å‰²ï¼šJAVA_HOME, CATALINA_HOME</li><li>æœ¬åœ°å˜é‡ä¸€èˆ¬æ˜¯å°å†™ã€‚</li></ol><p>æœ¬åœ°å˜é‡æ˜¯ä¸€ç§ä¸´æ—¶å˜é‡ï¼Œåœ¨Shellä¼šè¯ä¸­è®¾ç½®å’Œä½¿ç”¨ã€‚ä¸ç¯å¢ƒå˜é‡ä¸åŒï¼Œæœ¬åœ°å˜é‡ä»…é™äºå½“å‰Shellä¼šè¯ï¼Œä¸ä¼šè¢«å…¶ä»–è„šæœ¬æˆ–å‘½ä»¤ä½¿ç”¨ã€‚è®¾ç½®æœ¬åœ°å˜é‡å¯ä»¥ä½¿ç”¨â€œ&#x3D;â€å·æ“ä½œç¬¦ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MY_VAR=&quot;Hello World&quot;</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼äºç¯å¢ƒå˜é‡ï¼Œåœ¨ä½¿ç”¨æœ¬åœ°å˜é‡æ—¶ï¼Œå˜é‡åç§°å‰å¿…é¡»åŠ ä¸Š$ç¬¦å·ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $MY_VAR</span><br></pre></td></tr></table></figure><h3 id="ç‰¹æ®Šå˜é‡"><a href="#ç‰¹æ®Šå˜é‡" class="headerlink" title="ç‰¹æ®Šå˜é‡"></a>ç‰¹æ®Šå˜é‡</h3><p>ç‰¹æ®Šå˜é‡æ˜¯åœ¨Shellä¸­é¢„å®šä¹‰çš„å˜é‡åç§°ï¼Œå…·æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚è¿™äº›å˜é‡ä¸å½“å‰Shellä¼šè¯æœ‰å…³ï¼Œå¯ä»¥ç”¨äºè®¸å¤šä¸åŒçš„ç”¨é€”ï¼ŒåŒ…æ‹¬æ–‡ä»¶å’Œç›®å½•æ“ä½œã€å‘½ä»¤å†å²è®°å½•å’Œå¤„ç†è„šæœ¬å‚æ•°ç­‰ç­‰ã€‚<br>ä»¥ä¸‹æ˜¯å¸¸è§çš„ä¸€äº›ç‰¹æ®Šå˜é‡ï¼š</p><ul><li><code>$0</code>: å½“å‰è„šæœ¬çš„æ–‡ä»¶å</li><li><code>$1, $2...</code>: è„šæœ¬å‚æ•°åˆ—è¡¨ä¸­çš„ç¬¬1ä¸ªã€ç¬¬2ä¸ªå‚æ•°ç­‰ç­‰  (ä¾‹å¦‚ï¼š.&#x2F;first.sh abc defï¼Œåœ¨æ‰§è¡Œè¿™ä¸ªè„šæœ¬æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°abcï¼Œç¬¬äºŒä¸ªå‚æ•°defã€‚)</li><li><code>$#</code>: è„šæœ¬å‚æ•°çš„æ•°é‡</li><li><code>$*</code>: æ‰€æœ‰è„šæœ¬å‚æ•°çš„åˆ—è¡¨ï¼ˆå°†æ‰€æœ‰çš„å‚æ•°ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼šâ€zhangsan lisi wangwuâ€ï¼‰</li><li><code>$@</code>: æ‰€æœ‰è„šæœ¬å‚æ•°çš„åˆ—è¡¨ï¼ˆå°†æ¯ä¸€ä¸ªå‚æ•°ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å­—ç¬¦ä¸²ï¼šâ€zhangsanâ€ â€œlisiâ€ â€œwangwuâ€ï¼‰</li><li><code>$$</code>: å½“å‰è„šæœ¬çš„è¿›ç¨‹IDå·</li><li><code>$?</code>: ä¸Šä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œä¸€ä¸ªæ•°å€¼ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">echo &quot;The name of this script is: $0&quot;</span><br><span class="line">echo &quot;The first parameter is: $1&quot;</span><br><span class="line">echo &quot;The total number of parameters is: $#&quot;</span><br><span class="line">echo &quot;All parameters are: $@&quot;</span><br><span class="line">echo &quot;The current process ID is: $$&quot;</span><br><span class="line">echo &quot;The last exit status was: $?&quot;</span><br></pre></td></tr></table></figure><p>æ­¤è„šæœ¬å°†è¾“å‡ºæœ‰å…³è„šæœ¬æœ¬èº«å’Œå‚æ•°çš„ä¿¡æ¯ã€‚<br>æ€»ç»“ï¼š<br>åœ¨Linuxä¸­ï¼ŒShellå˜é‡æ˜¯éå¸¸é‡è¦å’Œæœ‰ç”¨çš„ä¸€éƒ¨åˆ†ã€‚ä½¿ç”¨ç¯å¢ƒå˜é‡ã€æœ¬åœ°å˜é‡å’Œç‰¹æ®Šå˜é‡å¯ä»¥è®©æˆ‘ä»¬æ›´åŠ ç²¾ç¡®åœ°æ§åˆ¶å’Œç®¡ç†æˆ‘ä»¬çš„Linuxç³»ç»Ÿã€‚æŒæ¡è¿™äº›å˜é‡ç±»å‹åŠå…¶ç”¨æ³•ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´åŠ é«˜æ•ˆåœ°ç¼–å†™Shellè„šæœ¬å¹¶æé«˜æˆ‘ä»¬çš„æ—¥å¸¸å·¥ä½œæ•ˆç‡ã€‚</p><p> <strong>$? è¿™ä¸ªç‰¹æ®Šå˜é‡çš„ç”¨æ³•</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ls -l /etc/passwd</span><br><span class="line">if [ $? -eq 0 ]; then</span><br><span class="line">  echo &quot;ls command succeeded&quot;</span><br><span class="line">else</span><br><span class="line">  echo &quot;ls command failed&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå˜é‡å¯ä»¥ç”¨æ¥è·å–ä¸Šä¸€æ¡å‘½ä»¤çš„æ‰§è¡Œç»“æœæ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ‰§è¡Œç»“æœæ˜¯0è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–å€¼è¡¨ç¤ºå¤±è´¥ï¼ï¼ï¼</p><h2 id="æ§åˆ¶è¯­å¥"><a href="#æ§åˆ¶è¯­å¥" class="headerlink" title="æ§åˆ¶è¯­å¥"></a>æ§åˆ¶è¯­å¥</h2><p>Shellç¼–ç¨‹ä¸­ï¼Œæ§åˆ¶è¯­å¥å¯ç”¨äºæ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹å’Œæ‰§è¡Œæ¬¡æ•°ï¼Œä¸»è¦åŒ…æ‹¬æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯ã€‚<br>æ¡ä»¶åˆ¤æ–­ä¸»è¦é€šè¿‡ifè¯­å¥æ¥å®ç°ï¼Œifè¯­å¥ç”¨äºæ£€æŸ¥æŒ‡å®šæ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œå¹¶æ ¹æ®æ¡ä»¶çš„çœŸæˆ–å‡æ¥æ‰§è¡Œç›¸åº”çš„è¯­å¥å—ã€‚<br>å¾ªç¯ä¸»è¦é€šè¿‡forå¾ªç¯ã€whileå¾ªç¯å’Œuntilå¾ªç¯æ¥å®ç°ã€‚å¾ªç¯è¯­å¥ç”¨äºåå¤æ‰§è¡ŒæŸäº›è¯­å¥å—ï¼Œç›´åˆ°æ»¡è¶³æŒ‡å®šæ¡ä»¶ä¸ºæ­¢ã€‚</p><h3 id="shellä¸­çš„ä¸­æ‹¬å·"><a href="#shellä¸­çš„ä¸­æ‹¬å·" class="headerlink" title="shellä¸­çš„ä¸­æ‹¬å·"></a>shellä¸­çš„ä¸­æ‹¬å·</h3><p>ä¸­æ‹¬å·æœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼š</p><ol><li>ç”¨äºæ¯”è¾ƒæ“ä½œç¬¦ï¼šç”¨äºæ¯”è¾ƒä¸¤ä¸ªå€¼çš„å¤§å°æˆ–è€…åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ã€‚ä¾‹å¦‚ï¼š</li></ol><ul><li><code>-eq</code>: åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼ˆequal toï¼‰ï¼Œä¾‹å¦‚<code>[ $a -eq $b ]</code></li><li><code>-ne</code>: åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ç›¸ç­‰ï¼ˆnot equal toï¼‰ï¼Œä¾‹å¦‚<code>[ $a -ne $b ]</code></li><li><code>-lt</code>: åˆ¤æ–­å·¦è¾¹çš„å€¼æ˜¯å¦å°äºå³è¾¹çš„å€¼ï¼ˆless thanï¼‰ï¼Œä¾‹å¦‚<code>[ $a -lt $b ]</code></li><li><code>-gt</code>: åˆ¤æ–­å·¦è¾¹çš„å€¼æ˜¯å¦å¤§äºå³è¾¹çš„å€¼ï¼ˆgreater thanï¼‰ï¼Œä¾‹å¦‚<code>[ $a -gt $b ]</code></li><li><code>-le</code>: åˆ¤æ–­å·¦è¾¹çš„å€¼æ˜¯å¦å°äºç­‰äºå³è¾¹çš„å€¼ï¼ˆless than or equal toï¼‰ï¼Œä¾‹å¦‚<code>[ $a -le $b ]</code></li><li><code>-ge</code>: åˆ¤æ–­å·¦è¾¹çš„å€¼æ˜¯å¦å¤§äºç­‰äºå³è¾¹çš„å€¼ï¼ˆgreater than or equal toï¼‰ï¼Œä¾‹å¦‚<code>[ $a -ge $b ]</code></li></ul><p>åœ¨Shellä¸­ï¼Œæ¯”è¾ƒæ“ä½œç¬¦å¯ä»¥ç”¨äºä¸­æ‹¬å·[]ä¸­ï¼Œä¾‹å¦‚:<code>[ $a -eq $b ]</code>ã€‚åœ¨æ¯”è¾ƒæ—¶ï¼Œè¦æ³¨æ„ä¸¤ä¸ªå€¼ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼åˆ†éš”ï¼Œå¦åˆ™ä¼šå‡ºç°è¯­æ³•é”™è¯¯ã€‚</p><ol start="2"><li>ç”¨äºæµ‹è¯•è¡¨è¾¾å¼ï¼šç”¨äºæµ‹è¯•æŸä¸ªè¡¨è¾¾å¼æ˜¯å¦æˆç«‹ã€‚ä¾‹å¦‚ï¼š</li></ol><ul><li><code>-f</code>: åˆ¤æ–­æŸä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå¸¸è§„æ–‡ä»¶ï¼ˆregular fileï¼‰ï¼Œä¾‹å¦‚<code>[ -f file.txt ]</code></li><li><code>-d</code>: åˆ¤æ–­æŸä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªç›®å½•ï¼ˆdirectoryï¼‰ï¼Œä¾‹å¦‚<code>[ -d dir ]</code></li><li><code>-z</code>: åˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼ˆzero lengthï¼‰ï¼Œä¾‹å¦‚<code>[ -z &quot;$str&quot; ]</code></li><li><code>-n</code>: åˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦éç©ºï¼ˆnot zero lengthï¼‰ï¼Œä¾‹å¦‚<code>[ -n &quot;$str&quot; ]</code></li><li><code>-e</code>: åˆ¤æ–­æŸä¸ªæ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨ï¼ˆexistï¼‰ï¼Œä¾‹å¦‚<code>[ -e file.txt ]</code></li></ul><p>åœ¨Shellä¸­ï¼Œæµ‹è¯•è¡¨è¾¾å¼ä¹Ÿå¯ä»¥ç”¨äºä¸­æ‹¬å·[]ä¸­ï¼Œä¾‹å¦‚:<code>[ -f file.txt ]</code>ã€‚åœ¨å¤šæ•°Linuxå‘è¡Œç‰ˆä¸­ï¼Œæµ‹è¯•è¡¨è¾¾å¼å¯ä»¥ç”¨ä¸­æ‹¬å·[]æˆ–è€…testå‘½ä»¤å®ç°ï¼Œä¾‹å¦‚:<code>test -f file.txt</code>ç­‰ä»·äº<code>[ -f file.txt ]</code>ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸­æ‹¬å·ä¸­çš„ç©ºæ ¼å¾ˆé‡è¦ï¼Œç©ºæ ¼ç¼ºå°‘ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ã€‚å¦å¤–ï¼Œåœ¨ä½¿ç”¨ä¸­æ‹¬å·[]æ—¶ï¼Œè¦æ³¨æ„å˜é‡ç”¨åŒå¼•å·æ‹¬èµ·æ¥ï¼Œé¿å…ç©ºå€¼å¼•èµ·çš„è¯­æ³•é”™è¯¯ã€‚</p><h3 id="ifè¯­å¥è¯¦è§£"><a href="#ifè¯­å¥è¯¦è§£" class="headerlink" title="ifè¯­å¥è¯¦è§£"></a>ifè¯­å¥è¯¦è§£</h3><p>ifè¯­å¥ç”¨äºæ£€æŸ¥æŒ‡å®šæ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œå¹¶æ ¹æ®æ¡ä»¶åˆ¤æ–­çš„ç»“æœæ‰§è¡Œä¸åŒçš„è¯­å¥å—ã€‚ifè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">if condition </span><br><span class="line">then</span><br><span class="line">  command1</span><br><span class="line">  command2</span><br><span class="line">  ...</span><br><span class="line">elif condition2 </span><br><span class="line">then</span><br><span class="line">  command3</span><br><span class="line">  command4</span><br><span class="line">  ...</span><br><span class="line">else</span><br><span class="line">  command5</span><br><span class="line">  command6</span><br><span class="line">  ...</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>condition</code>æ˜¯è¦æ£€æŸ¥çš„æ¡ä»¶ï¼Œå¯ä»¥æ˜¯å‘½ä»¤ã€å˜é‡ã€è¡¨è¾¾å¼ç­‰ä»»ä½•Shellè¯­æ³•ï¼Œ<code>then</code>è¡¨ç¤ºæ¡ä»¶æˆç«‹è¦æ‰§è¡Œçš„è¯­å¥å—ï¼Œå¦‚æœæœ‰å¤šä¸ªæ¡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨<code>elif</code>è¯­å¥æ¥æ·»åŠ å¤šä¸ªæ¡ä»¶ï¼Œæ¯ä¸ªæ¡ä»¶ä½¿ç”¨<code>then</code>åˆ†åˆ«è¡¨ç¤ºè¦æ‰§è¡Œçš„è¯­å¥å—ï¼Œå¦‚æœæ‰€æœ‰æ¡ä»¶éƒ½ä¸æˆç«‹ï¼Œåˆ™æ‰§è¡Œ<code>else</code>åˆ†æ”¯ä¸­çš„è¯­å¥å—ã€‚<br>ifè¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åˆ¤æ–­æ¯ä¸ªæ¡ä»¶ï¼Œå¦‚æœæ¡ä»¶æˆç«‹ï¼Œåˆ™æ‰§è¡Œå¯¹åº”çš„è¯­å¥å—ï¼Œæ‰§è¡Œå®Œåè·³å‡ºifè¯­å¥ã€‚<br>æ¡ˆä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ -f file.txt ] </span><br><span class="line">then</span><br><span class="line">  echo &quot;file.txt exists.&quot;</span><br><span class="line">elif [ -d dir ] </span><br><span class="line">then</span><br><span class="line">  echo &quot;dir exists.&quot;</span><br><span class="line">else</span><br><span class="line">  echo &quot;file.txt and dir not found.&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h3 id="forå¾ªç¯è¯¦è§£"><a href="#forå¾ªç¯è¯¦è§£" class="headerlink" title="forå¾ªç¯è¯¦è§£"></a>forå¾ªç¯è¯¦è§£</h3><p>forå¾ªç¯ç”¨äºéå†æŒ‡å®šåˆ—è¡¨æˆ–å€¼çš„é›†åˆï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„è¯­å¥å—ã€‚forå¾ªç¯è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">for var in list</span><br><span class="line">do</span><br><span class="line">  command1</span><br><span class="line">  command2</span><br><span class="line">  ...</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>var</code>æ˜¯ä¸€ä¸ªä¸´æ—¶çš„å˜é‡åï¼Œç”¨äºå­˜å‚¨å½“å‰å¾ªç¯çš„å€¼ï¼Œ<code>list</code>æ˜¯ä¸€ä¸ªå€¼æˆ–è€…å¤šä¸ªå¸¦æœ‰ç©ºæ ¼æˆ–æ¢è¡Œç¬¦åˆ†éš”çš„å€¼ç»„æˆçš„åˆ—è¡¨ã€‚åœ¨æ¯ä¸€æ¬¡å¾ªç¯è¿­ä»£æ—¶ï¼Œ<code>var</code>ä¼šè¢«<code>list</code>åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå€¼æ‰€æ›¿æ¢ï¼Œç›´åˆ°<code>list</code>ä¸­çš„æ‰€æœ‰å€¼éƒ½è¢«å¤„ç†å®Œä¸ºæ­¢ã€‚</p><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for i in 1 2 3 4 5</span><br><span class="line">do</span><br><span class="line">  echo &quot;The value of i is: $i&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h3 id="whileå¾ªç¯è¯¦è§£"><a href="#whileå¾ªç¯è¯¦è§£" class="headerlink" title="whileå¾ªç¯è¯¦è§£"></a>whileå¾ªç¯è¯¦è§£</h3><p>whileå¾ªç¯ç”¨äºä¸æ–­æ‰§è¡Œè¯­å¥å—ï¼Œç›´åˆ°æ»¡è¶³æŒ‡å®šæ¡ä»¶ä¸ºæ­¢ã€‚whileå¾ªç¯è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">while condition</span><br><span class="line">do</span><br><span class="line">  command1</span><br><span class="line">  command2</span><br><span class="line">  ...</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>condition</code>æ˜¯è¦æ£€æŸ¥çš„æ¡ä»¶ï¼Œå¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œåˆ™æ‰§è¡Œ<code>do</code>è¯­å¥å—ä¸­çš„å‘½ä»¤ï¼Œæ‰§è¡Œå®Œåå†å›åˆ°<code>while</code>è¯­å¥ä¸­æ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¾ç„¶ä¸ºçœŸï¼Œå¦‚æœæ¡ä»¶ä»ä¸ºçœŸï¼Œåˆ™ç»§ç»­æ‰§è¡Œå‘½ä»¤å—ï¼Œå¦åˆ™è·³å‡ºå¾ªç¯ã€‚</p><p>æ³¨æ„ï¼šåœ¨shellç¼–ç¨‹ä¸­ $((â€¦)) è¢«ç§°ä¸ºç®—æœ¯æ‰©å±•è¿ç®—ç¬¦ï¼Œåšæ•°å­¦è¿ç®—çš„ï¼Œå¹¶ä¸”å°†è¿ç®—ç»“æœè¿”å›ã€‚$(â€¦)è¿ç®—ç¬¦ä¼šå°†ç»“æœç›´æ¥è¿”å›ã€‚ä¾‹å¦‚ï¼š</p><ul><li>$((j+1))ï¼Œå¦‚æœjæ˜¯5çš„è¯ï¼Œç»“æœå°±ä¼šè¿”å›6 ï¼ˆæ³¨æ„ï¼Œä½¿ç”¨è¿™ä¸ªè¿ç®—ç¬¦çš„æ—¶å€™ï¼Œæ‹¬å·é‡Œé¢ä¸èƒ½æœ‰ç©ºæ ¼ï¼‰</li><li>$(echo â€œhello worldâ€)ï¼Œä¼šå°†â€hello worldâ€æ‰“å°ï¼Œç„¶åå†å°†â€hello worldâ€å­—ç¬¦ä¸²è¿”å›ã€‚</li></ul><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">j=0</span><br><span class="line">while [ $j -lt 5 ]</span><br><span class="line">do</span><br><span class="line">  echo &quot;The value of j is: $j&quot;</span><br><span class="line">  j=$((j+1))</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h3 id="untilå¾ªç¯è¯¦è§£"><a href="#untilå¾ªç¯è¯¦è§£" class="headerlink" title="untilå¾ªç¯è¯¦è§£"></a>untilå¾ªç¯è¯¦è§£</h3><p>untilå¾ªç¯ç”¨äºä¸æ–­æ‰§è¡Œè¯­å¥å—ï¼Œç›´åˆ°æ»¡è¶³æŒ‡å®šæ¡ä»¶ä¸ºæ­¢ã€‚å’Œwhileå¾ªç¯ä¸åŒçš„æ˜¯ï¼Œç›´åˆ°æŒ‡å®šæ¡ä»¶ä¸ºå‡æ—¶æ‰ä¼šåœæ­¢å¾ªç¯ã€‚untilå¾ªç¯è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">until condition</span><br><span class="line">do</span><br><span class="line">  command1</span><br><span class="line">  command2</span><br><span class="line">  ...</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>condition</code>æ˜¯è¦æ£€æŸ¥çš„æ¡ä»¶ï¼Œå¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œåˆ™æ‰§è¡Œ<code>do</code>è¯­å¥å—ä¸­çš„å‘½ä»¤ï¼Œæ‰§è¡Œå®Œåå†å›åˆ°<code>until</code>è¯­å¥ä¸­æ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¾ç„¶ä¸ºå‡ï¼Œå¦‚æœæ¡ä»¶ä»ä¸ºå‡ï¼Œåˆ™ç»§ç»­æ‰§è¡Œå‘½ä»¤å—ï¼Œå¦åˆ™è·³å‡ºå¾ªç¯ã€‚</p><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">k=0</span><br><span class="line">until [ $k -ge 5 ]</span><br><span class="line">do</span><br><span class="line">  echo &quot;The value of k is: $k&quot;</span><br><span class="line">  k=$((k+1))</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h3 id="breakå’Œcontinueè¯­å¥"><a href="#breakå’Œcontinueè¯­å¥" class="headerlink" title="breakå’Œcontinueè¯­å¥"></a>breakå’Œcontinueè¯­å¥</h3><p>breakå’Œcontinueæ˜¯æ§åˆ¶å¾ªç¯çš„ä¸¤ä¸ªé‡è¦å…³é”®å­—ã€‚</p><ul><li>breakè¯­å¥ç”¨äºè·³å‡ºå½“å‰å¾ªç¯å—ï¼Œä¾‹å¦‚åœ¨forå¾ªç¯å’Œwhileå¾ªç¯ä¸­ä½¿ç”¨è¯¥è¯­å¥æ—¶ï¼Œå¯ä»¥è·³å‡ºå½“å‰å¾ªç¯å¹¶åœæ­¢è¿­ä»£ã€‚breakè¯­å¥å¯ä»¥åµŒå¥—åœ¨å¤šé‡å¾ªç¯ä¸­ï¼Œç”¨äºè·³å‡ºå†…å±‚å¾ªç¯å’Œå¤–å±‚å¾ªç¯ï¼Œå…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">while condition</span><br><span class="line">do</span><br><span class="line">  command1</span><br><span class="line">  command2</span><br><span class="line">  if condition2 </span><br><span class="line">then</span><br><span class="line">    break</span><br><span class="line">  fi</span><br><span class="line">  command3</span><br><span class="line">  ...</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå¦‚æœåœ¨æ‰§è¡Œ<code>command2</code>æ—¶ï¼Œæ¡ä»¶<code>condition2</code>æˆç«‹ï¼Œé‚£ä¹ˆä¼šæ‰§è¡Œ<code>break</code>è¯­å¥ï¼Œè·³å‡ºå¾ªç¯å—å¹¶åœæ­¢è¿­ä»£ã€‚</p><ul><li>continueè¯­å¥ç”¨äºè·³è¿‡æœ¬æ¬¡å¾ªç¯è¿­ä»£ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡çš„è¿­ä»£ã€‚åœ¨forå¾ªç¯å’Œwhileå¾ªç¯ä¸­ä½¿ç”¨è¯¥è¯­å¥æ—¶ï¼Œå¯ä»¥ç”¨äºè·³è¿‡æœ¬æ¬¡è¿­ä»£ï¼Œæ‰§è¡Œä¸‹ä¸€æ¬¡è¿­ä»£ã€‚å…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">while condition</span><br><span class="line">do</span><br><span class="line">  command1</span><br><span class="line">  command2</span><br><span class="line">  if condition2</span><br><span class="line">  then</span><br><span class="line">    continue</span><br><span class="line">  fi</span><br><span class="line">  command3</span><br><span class="line">  ...</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå¦‚æœåœ¨æ‰§è¡Œ<code>command2</code>æ—¶ï¼Œæ¡ä»¶<code>condition2</code>æˆç«‹ï¼Œé‚£ä¹ˆä¼šæ‰§è¡Œ<code>continue</code>è¯­å¥ï¼Œè·³è¿‡æœ¬æ¬¡è¿­ä»£ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚</p><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for l in 1 2 3 4 5</span><br><span class="line">do</span><br><span class="line">  if [ $l -eq 3 ] </span><br><span class="line">then</span><br><span class="line">    continue</span><br><span class="line">  fi</span><br><span class="line">  echo &quot;The value of l is: $l&quot;</span><br><span class="line">  if [ $l -eq 4 ] </span><br><span class="line">then</span><br><span class="line">    break</span><br><span class="line">  fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="ä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ</h3><p>åœ¨Shellç¼–ç¨‹ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç§å¯é‡ç”¨çš„ä»£ç å—ï¼Œå¯ä»¥æé«˜ç¨‹åºçš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚é€šè¿‡å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥æŠŠä¸€æ®µä»£ç å°è£…èµ·æ¥ï¼Œèµ‹äºˆå…¶ä¸€ä¸ªåç§°ï¼Œå¯ä»¥åœ¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†åå¤è°ƒç”¨ã€‚<br>Shellè„šæœ¬ä¸­çš„å‡½æ•°éå¸¸çµæ´»ï¼Œå¯ä»¥ä½¿ç”¨å„ç§Shellè¯­å¥å’Œå‘½ä»¤æ¥ç¼–å†™ï¼Œå¦‚ifè¯­å¥ã€forå¾ªç¯ã€whileå¾ªç¯ç­‰ã€‚</p><h3 id="å®šä¹‰å‡½æ•°"><a href="#å®šä¹‰å‡½æ•°" class="headerlink" title="å®šä¹‰å‡½æ•°"></a>å®šä¹‰å‡½æ•°</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹å‡½æ•°çš„å®šä¹‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function say_hello() &#123;</span><br><span class="line">  echo &quot;Hello, world!&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°åä¸º<code>say_hello</code>ï¼Œå®ƒçš„æ‰§è¡Œç»“æœæ˜¯è¾“å‡º<code>Hello, world!</code>å­—ç¬¦ä¸²ã€‚å‡½æ•°å®šä¹‰çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function_name() &#123;</span><br><span class="line">    commands</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨functionå…³é”®å­—æ¥å®šä¹‰å‡½æ•°æ˜¯å¯é€‰çš„ã€‚å½“ä½¿ç”¨functionå…³é”®å­—æ—¶ï¼Œè¦æ³¨æ„ä¸è¦åŠ ç©ºæ ¼ï¼Œå¦åˆ™ä¼šå‡ºç°è¯­æ³•é”™è¯¯ã€‚å‡½æ•°ä½“ä¸­å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„å‘½ä»¤å’Œè¯­å¥ã€‚</p><h3 id="è°ƒç”¨å‡½æ•°"><a href="#è°ƒç”¨å‡½æ•°" class="headerlink" title="è°ƒç”¨å‡½æ•°"></a>è°ƒç”¨å‡½æ•°</h3><p>æˆåŠŸå®šä¹‰ä¸€ä¸ªå‡½æ•°åï¼Œå¯ä»¥åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹è°ƒç”¨å®ƒã€‚åªéœ€è¦ä½¿ç”¨å‡½æ•°çš„åç§°ï¼Œå†åŠ ä¸Šä¸€å¯¹å°æ‹¬å·ï¼Œå³å¯è°ƒç”¨å‡½æ•°ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">say_hello</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ç¤ºä¾‹å°†ä¼šè°ƒç”¨å‡½æ•°<code>say_hello</code>ï¼Œæ‰§è¡Œå‡½æ•°ä½“ä¸­çš„å‘½ä»¤ï¼Œè¾“å‡º<code>Hello, world!</code>å­—ç¬¦ä¸²ã€‚</p><p>â€</p><h3 id="ä¼ é€’å‚æ•°"><a href="#ä¼ é€’å‚æ•°" class="headerlink" title="ä¼ é€’å‚æ•°"></a>ä¼ é€’å‚æ•°</h3><p>Shellå‡½æ•°ä¹Ÿæ”¯æŒä¼ é€’å‚æ•°ã€‚åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥æŠŠå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œè®©å‡½æ•°ä½¿ç”¨è¿™äº›å‚æ•°æ¥å®Œæˆç‰¹å®šçš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function greet() &#123;</span><br><span class="line">  echo &quot;Hello, $1 $2&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">greet &quot;John&quot; &quot;Doe&quot;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>greet</code>çš„å‡½æ•°ï¼Œå®ƒè¾“å…¥å‚æ•°$1å’Œ$2ï¼Œå¹¶æŠŠè¿™äº›å‚æ•°ç”¨äºè¾“å‡ºå­—ç¬¦ä¸²<code>Hello, $1 $2</code>ã€‚æˆ‘ä»¬è°ƒç”¨<code>greet</code>å‡½æ•°ï¼Œå¹¶æŠŠå‚æ•°â€Johnâ€å’Œâ€Doeâ€ä¼ é€’ç»™å®ƒï¼Œæœ€ç»ˆè¾“å‡º<code>Hello, John Doe</code>å­—ç¬¦ä¸²ã€‚</p><p>åœ¨å‡½æ•°ä¸­ï¼Œå‚æ•°å¯ä»¥ä½¿ç”¨$1ã€$2ã€$3ç­‰å ä½ç¬¦æ¥å¼•ç”¨ã€‚$1è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ$2è¡¨ç¤ºç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>â€</p><h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºäº†å¦‚ä½•å®šä¹‰å’Œè°ƒç”¨Shellä¸­çš„å‡½æ•°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®šä¹‰å‡½æ•°say_hello</span></span><br><span class="line">say_hello() &#123;</span><br><span class="line">  echo &quot;Hello, world!&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è°ƒç”¨å‡½æ•°say_hello</span></span><br><span class="line">say_hello</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®šä¹‰å‡½æ•°greet</span></span><br><span class="line">greet() &#123;</span><br><span class="line">  echo &quot;Hello, $1 $2&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è°ƒç”¨å‡½æ•°greet</span></span><br><span class="line">greet &quot;John&quot; &quot;Doe&quot;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸Šè¿°ä»£ç åï¼Œä¼šè¾“å‡ºå¦‚ä¸‹ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello, world!</span><br><span class="line">Hello, John Doe</span><br></pre></td></tr></table></figure><p>â€</p><h1 id="å®ç°æ•°æ®åº“è‡ªåŠ¨å¤‡ä»½"><a href="#å®ç°æ•°æ®åº“è‡ªåŠ¨å¤‡ä»½" class="headerlink" title="å®ç°æ•°æ®åº“è‡ªåŠ¨å¤‡ä»½"></a>å®ç°æ•°æ®åº“è‡ªåŠ¨å¤‡ä»½</h1><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨Shellç¼–å†™çš„è‡ªåŠ¨å¤‡ä»½æ•°æ®åº“çš„è„šæœ¬ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹å’Œè°ƒæ•´ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®å¤‡ä»½ç›®å½•</span></span><br><span class="line">backupDir=&quot;/home/backup&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®éœ€è¦å¤‡ä»½çš„æ•°æ®åº“åç§°å’Œç”¨æˆ·åã€å¯†ç </span></span><br><span class="line">dbUser=&quot;root&quot;</span><br><span class="line">dbPass=&quot;123456&quot;</span><br><span class="line">dbName=&quot;database_name&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®å¤‡ä»½æ–‡ä»¶åï¼ŒåŒ…æ‹¬æ—¥æœŸå’Œæ—¶é—´</span></span><br><span class="line">backupFile=&quot;$backupDir/$&#123;dbName&#125;_$(date +%Y%m%d_%H%M%S).sql&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰§è¡Œå¤‡ä»½å‘½ä»¤</span></span><br><span class="line">mysqldump -u$dbUser -p$dbPass $dbName &gt; $backupFile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©å¤‡ä»½æ–‡ä»¶</span></span><br><span class="line">gzip -f $backupFile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤7å¤©å‰çš„å¤‡ä»½æ–‡ä»¶</span></span><br><span class="line">find $backupDir -mtime +7 -type f -name &quot;$&#123;dbName&#125;*.sql.gz&quot; -delete</span><br></pre></td></tr></table></figure><p>è„šæœ¬çš„å®ç°æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>é¦–å…ˆè®¾ç½®å¤‡ä»½ç›®å½•å’Œè¦å¤‡ä»½çš„æ•°æ®åº“çš„ç”¨æˆ·åã€å¯†ç å’Œåç§°ã€‚</li><li>ç„¶åï¼Œè®¾ç½®å¤‡ä»½æ–‡ä»¶åï¼Œè¿™é‡Œä½¿ç”¨äº†å½“å‰æ—¥æœŸå’Œæ—¶é—´æ¥å‘½åå¤‡ä»½æ–‡ä»¶ã€‚</li><li>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨mysqldumpå‘½ä»¤å¤‡ä»½æ•°æ®åº“å¹¶å°†ç»“æœé‡å®šå‘åˆ°å¤‡ä»½æ–‡ä»¶ä¸­ã€‚</li><li>å¤‡ä»½å®Œæˆåï¼Œä½¿ç”¨gzipå‘½ä»¤å°†å¤‡ä»½æ–‡ä»¶å‹ç¼©ã€‚</li><li>æœ€åï¼Œä½¿ç”¨findå‘½ä»¤åˆ é™¤7å¤©å‰çš„å¤‡ä»½æ–‡ä»¶ï¼Œä»¥é¿å…å ç”¨è¿‡å¤šç£ç›˜ç©ºé—´ã€‚</li></ol><p>å°†è¿™ä¸ªè„šæœ¬ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¦‚backup_db.shï¼Œå¹¶æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x backup_db.sh</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç¼–è¾‘crontabæ–‡ä»¶ï¼Œå¯ä»¥å°†è¿™ä¸ªè„šæœ¬è®¾ç½®ä¸ºå®šæœŸè‡ªåŠ¨è¿è¡Œï¼Œæ¯”å¦‚æ¯å¤©æ‰§è¡Œä¸€æ¬¡å¤‡ä»½ã€‚æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸‹é¢çš„ä¸€è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 0 * * * /path/to/backup_db.sh</span><br><span class="line"></span><br><span class="line">#  20 12 * * * /path/to/backup_db.sh è¡¨ç¤ºæ¯å¤©12:20ä¼šæ‰§è¡Œä¸€æ¬¡è„šæœ¬ã€‚</span><br></pre></td></tr></table></figure><p>ä¿å­˜å¹¶é€€å‡ºcrontabæ–‡ä»¶ï¼Œè¿™æ ·åœ¨æ¯å¤©åˆå¤œ0ç‚¹è¿›è¡Œè‡ªåŠ¨å¤‡ä»½ã€‚å¦‚æœéœ€è¦è°ƒæ•´è‡ªåŠ¨å¤‡ä»½çš„æ—¶é—´ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹crontabæ–‡ä»¶ä¸­çš„æ—¶é—´å­—æ®µã€‚</p><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬8ç«  å°†webåº”ç”¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘</title>
      <link href="/posts/12250.html"/>
      <url>/posts/12250.html</url>
      
        <content type="html"><![CDATA[<h1 id="è´­ä¹°é˜¿é‡Œäº‘æœåŠ¡å™¨"><a href="#è´­ä¹°é˜¿é‡Œäº‘æœåŠ¡å™¨" class="headerlink" title="è´­ä¹°é˜¿é‡Œäº‘æœåŠ¡å™¨"></a>è´­ä¹°é˜¿é‡Œäº‘æœåŠ¡å™¨</h1><h2 id="æ³¨å†Œé˜¿é‡Œäº‘è´¦å·"><a href="#æ³¨å†Œé˜¿é‡Œäº‘è´¦å·" class="headerlink" title="æ³¨å†Œé˜¿é‡Œäº‘è´¦å·"></a>æ³¨å†Œé˜¿é‡Œäº‘è´¦å·</h2><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690343104889-d5a79aa1-5531-4dfe-931a-570d733b5c8f-20240817114001-ley59qi.png" alt="image.png"><br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690343146432-07d1d822-cd26-4cf3-8ee9-484874ba6719-20240817114001-26h7080.png" alt="image.png"><br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690343197479-24cb1df5-a491-4a71-9714-44a962d9be8c-20240817114002-n2hzrua.png" alt="image.png"></p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690343625845-10aa1357-7fda-47c5-9652-e5220a0ac73e-20240817114002-c2xpyd1.png" alt="æ— æ ‡é¢˜.png"><br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690343675300-2cfe0d16-a96c-4b60-8d57-fecb721ace09-20240817114002-vu3nv5w.png" alt="æ— æ ‡é¢˜.png"></p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690343325117-185ea4fc-b679-4aae-8647-d4c367302092-20240817114002-4y76j33.png" alt="image.png"><br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690343356484-04f7b7bb-e782-45cf-8ffe-7697e7a5ebcc-20240817114002-o9249v7.png" alt="image.png"><br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690343392778-7d97b811-4745-48f9-ae4d-ca1366cbb79d-20240817114002-13lvsc2.png" alt="image.png">â€‹</p><p><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690343411255-1f702ec7-ebc5-46a2-b0c2-50d7989722ee-20240817114002-znkm1mu.png" alt="image.png"><br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690343713493-c69a8008-66d8-4616-bb1d-81e3870bd057-20240817114002-2jt9yau.png" alt="æ— æ ‡é¢˜.png"><br>åˆ°æ­¤ï¼Œé˜¿é‡Œäº‘è´¦å·æ³¨å†ŒæˆåŠŸï¼Œå¹¶ä¸”è¿›è¡Œäº†ä¸ªäººçš„å®åè®¤è¯ã€‚å¯ä»¥å¼€å§‹ä½¿ç”¨é˜¿é‡Œäº‘äº†ã€‚</p><h2 id="è´­ä¹°é˜¿é‡Œäº‘æœåŠ¡å™¨-1"><a href="#è´­ä¹°é˜¿é‡Œäº‘æœåŠ¡å™¨-1" class="headerlink" title="è´­ä¹°é˜¿é‡Œäº‘æœåŠ¡å™¨"></a>è´­ä¹°é˜¿é‡Œäº‘æœåŠ¡å™¨</h2><p>é˜¿é‡Œäº‘é¦–é¡µ<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690348330933-ca4785ce-cbcb-44db-a188-01f873af5ecb-20240817114002-1j0of0y.png" alt="image.png"><br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690348444343-4f42456f-efd1-4d54-892e-e659869660aa-20240817114002-g4d15h0.png" alt="image.png">â€‹</p><p>è¿™é‡Œå¯ä»¥é€‰æ‹©å…è´¹è¯•ç”¨ï¼Œä¹Ÿå¯ä»¥ç«‹å³è´­ä¹°ï¼Œæ ¹æ®è‡ªå·±æƒ…å†µè€Œå®šï¼Œæˆ‘è¿™é‡Œé‡‡ç”¨å…è´¹è¯•ç”¨ï¼š<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690350761704-8bd038aa-c4dc-4757-88de-45078a0e8f7e-20240817114002-c7hi322.png" alt="image.png"><br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690350817138-da4afa6d-0682-48a1-8f9b-795b90d7f5c4-20240817114002-gvaikkt.png" alt="image.png"><br>åˆ›å»ºçš„å®ä¾‹æ˜¯è¿™æ ·çš„ï¼šä½ éœ€è¦è®°ä½è¿™ä¸ªå…¬ç½‘IPã€‚<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690440018470-f457bd16-6d75-4809-81d1-6fe40b14197c-20240817114003-q3pan8n.png" alt="image.png"><br>ç®¡ç†å‘˜ï¼šrootï¼Œæ–°å»ºçš„å®ä¾‹éœ€è¦è®¾ç½®å¯†ç ï¼š<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690440075999-32ec9939-c3ad-4723-84a2-023391ccac84-20240817114003-glxpvhw.png" alt="image.png">â€‹</p><h2 id="ä½¿ç”¨xshell-xftpè¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨"><a href="#ä½¿ç”¨xshell-xftpè¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨" class="headerlink" title="ä½¿ç”¨xshell&#x2F;xftpè¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨"></a>ä½¿ç”¨xshell&#x2F;xftpè¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨</h2><p>é»˜è®¤æƒ…å†µä¸‹é˜¿é‡Œäº‘æœåŠ¡å™¨çš„â€œå¯†ç è®¤è¯â€æ˜¯æ²¡æœ‰å¼€å¯çš„ã€‚éœ€è¦é€šè¿‡ä¿®æ”¹ç›¸å…³é…ç½®ï¼Œæ¥å¼€å¯â€œå¯†ç è®¤è¯â€ã€‚<br>åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨å®ä¾‹ä¸­æ‰¾åˆ°å¦‚ä¸‹å›¾çš„VNCè¿æ¥ï¼š<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690447058866-5c65c41d-b349-4357-af13-90e89ccbe1e0-20240817114003-nc1bap3.png" alt="image.png"><br>ç„¶åè¾“å…¥ç”¨æˆ·årootå’Œå¯†ç ã€‚ç™»å½•æˆåŠŸä¹‹åæ‰¾åˆ°è¯¥æ–‡ä»¶ï¼š&#x2F;etc&#x2F;ssh&#x2F;sshd_config<br>ä½¿ç”¨vimç¼–è¾‘sshd_configæ–‡ä»¶ä¸­çš„â€œpasswordAuthcationâ€ï¼Œå°†noä¿®æ”¹ä¸ºyesã€‚<br>é‡å¯sshdæœåŠ¡ï¼šservice sshd restart<br>æ­¤æ—¶é‡‡ç”¨xshell&#x2F;xftpå°±å¯ä»¥ä½¿ç”¨å¯†ç çš„æ–¹å¼è¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨äº†ã€‚</p><h1 id="ä½¿ç”¨å®å¡”é¢æ¿å®‰è£…è½¯ä»¶åŠéƒ¨ç½²é¡¹ç›®"><a href="#ä½¿ç”¨å®å¡”é¢æ¿å®‰è£…è½¯ä»¶åŠéƒ¨ç½²é¡¹ç›®" class="headerlink" title="ä½¿ç”¨å®å¡”é¢æ¿å®‰è£…è½¯ä»¶åŠéƒ¨ç½²é¡¹ç›®"></a>ä½¿ç”¨å®å¡”é¢æ¿å®‰è£…è½¯ä»¶åŠéƒ¨ç½²é¡¹ç›®</h1><p>åœ¨centosæ“ä½œç³»ç»Ÿä¸Šå®‰è£…å®å¡”é¢æ¿ï¼ˆè¿™ä¸ªå®‰è£…è„šæœ¬å¯ä»¥åœ¨å®å¡”é¢æ¿å®˜ç½‘è·å–ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh https://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh ed8484bec</span><br></pre></td></tr></table></figure><p>å®å¡”é¢æ¿å®‰è£…æˆåŠŸåï¼Œä¼šæœ‰å¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å¤–ç½‘é¢æ¿åœ°å€: https://39.105.26.215:10710/718e1e35</span><br><span class="line">å†…ç½‘é¢æ¿åœ°å€: https://172.25.179.225:10710/718e1e35</span><br><span class="line">username: uck3itew</span><br><span class="line">password: 3268d738</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šå®å¡”é¢æ¿åœ°å€å¾—çŸ¥ä½¿ç”¨çš„ç«¯å£æ˜¯10710ï¼Œæ‰€ä»¥éœ€è¦åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šå¼€æ”¾è¯¥ç«¯å£ï¼ˆé…ç½®å®‰å…¨ç»„ï¼‰ï¼š<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690447528154-624e070d-f9df-4f37-9df1-38b7cdaa2a7d-20240817114003-qlvqnjy.png" alt="image.png"><br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690447563332-1e2f5a47-74ec-48b4-8614-c94f842b852a-20240817114003-s4nl4bd.png" alt="image.png">â€‹</p><p>è®¿é—®å®å¡”é¢æ¿ï¼š<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690451476044-defdafe4-6d95-4f77-8b06-947843b73c5c-20240817114003-fte9cut.png" alt="image.png"><br>è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç™»å½•å®å¡”é¢æ¿ï¼š<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690451497475-950766c3-36b9-4504-b2a4-8da094d2150b-20240817114003-cv6bvpx.png" alt="image.png">â€‹</p><p>æ³¨å†Œå®å¡”è´¦å·å¹¶ç»‘å®šï¼š<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690451542486-fa1ac9d0-cedc-455a-9b88-4c26e7fece9e-20240817114003-lul1ibt.png" alt="image.png"><br>å®å¡”Linuxé¢æ¿çš„å·¦ä¾§èœå•ä¸­æ‰¾ï¼šè½¯ä»¶å•†åº—<br>æœç´¢tomcatï¼Œå®‰è£…tomcat9ï¼Œä¼šè‡ªåŠ¨å…³è”å®‰è£…JDK8ã€‚<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690523617851-3b8906ad-6031-434b-bdee-665d53a8bf58-20240817114003-4eigltr.png" alt="image.png"><br>JDK8ä¹Ÿæœ‰äº†ï¼š<br>â€‹<img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690523670400-7b23a16f-6588-46b3-bc2d-5f0e32be4877-20240817114003-9pxv0cy.png" alt="image.png">â€‹</p><p>æœç´¢mysqlï¼Œå®‰è£…mysqlã€‚<br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690523637808-4afe8111-f9f4-4cfc-9e0b-066ef72f0958-20240817114004-l1uw6cu.png" alt="image.png"></p><p><strong>æ³¨æ„ï¼šé˜¿é‡Œäº‘æœåŠ¡å™¨æœ‰ä¸¤ä¸ªé˜²ç«å¢™ï¼Œä¸€ä¸ªæ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨è‡ªå¸¦çš„é˜²ç«å¢™ï¼Œåœ¨å®‰å…¨ç»„ä¸­è¿›è¡Œæ”¾è¡Œè®¾ç½®ã€‚é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸­å®‰è£…çš„centosæ“ä½œç³»ç»Ÿä¹Ÿä¼šæœ‰ä¸€ä¸ªé˜²ç«å¢™ï¼Œè¦è®¿é—®tomcatæœåŠ¡å™¨çš„è¯ï¼Œcentosæ“ä½œç³»ç»Ÿä¸­çš„é˜²ç«å¢™ä¹Ÿè¦æ”¾è¡Œ8080ç«¯å£ï¼šè¿™ä¸ªéœ€è¦åœ¨å®å¡”ä¸­è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹ï¼š</strong><br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690530429125-a95b0733-5b1e-452e-8212-ae9298c3bc59-20240817114004-za6m6sm.png" alt="image.png"><br>è¿™æ ·tomcatæœåŠ¡å™¨å°±å¯ä»¥è®¿é—®äº†ï¼š<br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690530464412-e3190370-3280-4ce2-a5b6-0d34acbda71d-20240817114004-0kp39c4.png" alt="image.png"></p><p>â€</p><p>mysqlæ•°æ®åº“çš„3306ç«¯å£åŒæ ·éœ€è¦åœ¨å®å¡”ä¸­æ”¾è¡Œã€‚è¿™æ ·mysqlæ•°æ®åº“æ‰å¯ä»¥è¿æ¥ï¼š<br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690532202584-6d04c3be-1bc3-4da7-bcfe-406b48777c66-20240817114004-4u8zljx.png" alt="image.png"><br>ä½¿ç”¨navicat for mysqlè¿æ¥mysqlæ•°æ®åº“ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š<br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690532666748-f6316f71-8754-4ac4-a75d-2bb197984760-20240817114004-r1kke1a.png" alt="image.png"></p><p>è§£å†³åŠæ³•ï¼š<br>ç¬¬ä¸€æ­¥ï¼šrootèº«ä»½ç™»å½•mysql<br>ç¬¬äºŒæ­¥ï¼šuse mysql;<br>ç¬¬ä¸‰æ­¥ï¼šupdate user set host&#x3D;â€™%â€™ where user&#x3D;â€™rootâ€™;<br>ç¬¬å››éƒ¨ï¼šflush privileges;</p><p>ç„¶åä½¿ç”¨navicat for mysqlå°±å¯ä»¥è¿æ¥mysqlæ•°æ®åº“äº†ï¼š<br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690535601577-7c6bd592-8002-432b-9730-6a79cc77ef34-20240817114004-psjslb3.png" alt="image.png"></p><p>åˆå§‹åŒ–æ•°æ®åº“ï¼šå°†æå‰å‡†å¤‡å¥½çš„oa.sqlæ–‡ä»¶åˆå§‹åŒ–åˆ°æ•°æ®åº“å½“ä¸­ã€‚è¡¨empè¡¨ã€‚ç¡®ä¿è¡¨ä¸­æœ‰æ•°æ®ã€‚<br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690540767390-21091cce-de43-4d05-8101-5693b51c5067-20240817114004-9m0s8pm.png" alt="image.png"></p><p>â€</p><p>å°†waråŒ…æ”¾åˆ°tomcatæœåŠ¡å™¨çš„webappsç›®å½•ä¸‹ï¼Œå¯åŠ¨tomcatæœåŠ¡å™¨ä¹‹åwaråŒ…è‡ªåŠ¨è§£å‹ã€‚<br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690540783249-d2c54a01-a5db-494e-9716-b154d27d5bd4-20240817114004-uk2079h.png" alt="image.png"></p><p>å¯åŠ¨tomcatæœåŠ¡å™¨ï¼Œåœ¨æµè§ˆå™¨ä¸Šè®¿é—®ï¼š<br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/network-asset-1690540746702-82a3d5e9-937e-444d-9127-fd448c9ef7ff-20240817114004-aa6wi6o.png" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬7ç«  è½¯ä»¶çš„å®‰è£…ä¸å¸è½½</title>
      <link href="/posts/58716.html"/>
      <url>/posts/58716.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="tip info faa-horizontal animated"><p>ç¤¼æ•°åœ¨ç®€åœ¨é†‡æ­£ï¼Œä¸åœ¨ç¹å¤šä¸åœ¨è¡¨</p></div><a href="https://www.bilibili.com/video/BV1Nb421a7TV/?spm_id_from=333.999.list.card_archive.click">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/20240815134316.png"></a><h1 id="è½¯ä»¶å®‰è£…æ–¹å¼æ¦‚è¿°"><a href="#è½¯ä»¶å®‰è£…æ–¹å¼æ¦‚è¿°" class="headerlink" title="è½¯ä»¶å®‰è£…æ–¹å¼æ¦‚è¿°"></a>è½¯ä»¶å®‰è£…æ–¹å¼æ¦‚è¿°</h1><p>CentOSå®‰è£…è½¯ä»¶çš„æ–¹å¼ä¸»è¦åŒ…æ‹¬ï¼š</p><ul><li>æºç å®‰è£…</li><li>rpmå®‰è£…ï¼ˆäºŒè¿›åˆ¶å®‰è£…ï¼‰</li><li>yumå®‰è£…ï¼ˆåœ¨çº¿å®‰è£…ï¼‰</li></ul><h2 id="æºç å®‰è£…ï¼š"><a href="#æºç å®‰è£…ï¼š" class="headerlink" title="æºç å®‰è£…ï¼š"></a>æºç å®‰è£…ï¼š</h2><p>æºç åŒ…æ˜¯æŒ‡Cç­‰è¯­è¨€æ‰€å¼€å‘çš„æºä»£ç æ–‡ä»¶çš„ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œé€šå¸¸å‹ç¼©ä¸º.tar.gzæˆ–.tar.bz2ã€‚æºç é€šå¸¸éœ€è¦ç¼–è¯‘å™¨å°†å…¶ç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚gccç¼–è¯‘å™¨ã€‚<br>ä¼˜ç‚¹ï¼š<br>ï¼ˆ1ï¼‰å¼€æºï¼Œæœ‰èƒ½åŠ›è€…å¯ä»¥ä¿®æ”¹æºä»£ç ï¼›ç‰¹åˆ«æ˜¯è¦å¯¹æŸä¸ªè½¯ä»¶ï¼Œä»å¤´å¼€å‘æ—¶ï¼Œå°±ç‰¹åˆ«éœ€è¦å¯¹æºç è¿›è¡Œè§£è¯»åˆ†æã€‚<br>ï¼ˆ2ï¼‰å¯è‡ªç”±é€‰æ‹©æ‰€éœ€åŠŸèƒ½ï¼›<br>ï¼ˆ3ï¼‰å¸è½½æ–¹ä¾¿ï¼Œç›´æ¥åˆ é™¤ç›®å½•å³å¯ã€‚<br>ï¼ˆ4ï¼‰å¯¹äºå­¦ä¹ è€…è€Œè¨€ï¼Œæºç å®‰è£…æ›´æœ‰åˆ©äºå­¦ä¹ è€…å‘ç°è½¯ä»¶ç¯å¢ƒå’Œå·¥å…·ä¹‹é—´æ‰€ä¾èµ–çš„å…³ç³»ã€‚<br>ç¼ºç‚¹ï¼š<br>ï¼ˆ1ï¼‰å®‰è£…éº»çƒ¦ï¼Œéœ€è¦è‡ªè¡Œè§£å†³å·¥å…·ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚<br>ï¼ˆ2ï¼‰æŸäº›è½¯ä»¶ç¼–è¯‘è¿‡ç¨‹è€—è´¹çš„æ—¶é—´è¾ƒé•¿ï¼Œæˆ‘æ›¾å‘ç”Ÿè¿‡ç¼–è¯‘ä¸¤ä¸‰å¤©çš„æƒ…å†µã€‚å°¤å…¶æ˜¯åœ¨ä¸åˆé€‚çš„ç¡¬ä»¶ä¸Šï¼Œå®‰è£…å¤§å‹è½¯ä»¶æ—¶ï¼Œæœ€å®¹æ˜“æŠ˜ç£¨äººï¼Œç”šè‡³è¦è€ƒè™‘ç³»ç»Ÿä¸ç¡¬ä»¶çš„å…¼å®¹æ€§ã€é…ç½®ç­‰é—®é¢˜ï¼Œç³»ç»Ÿæœ¬èº«æœ‰ç¼ºé™·ï¼Œé‚£å°±æ›´è¦å‘½äº†ï¼Œæœ‰æ—¶éœ€å…ˆä¿®è¡¥ç³»ç»Ÿbugã€ä¸»è¦æ˜¯åŠŸèƒ½ä¸é½å…¨ï¼Œæ®‹ç¼ºæƒ…å†µå±…å¤šã€‘<br>ï¼ˆ3ï¼‰å¤§å‹è½¯ä»¶ç¼–è¯‘ï¼Œå¯¹æ–°æ‰‹æ¥è¯´è¾ƒä¸ºéº»çƒ¦ï¼Œæ‰€æŠ¥é”™è¯¯å¾€å¾€è¶…è¿‡æ‰€èƒ½è§£å†³çš„èŒƒå›´ï¼Œæ’é”™è¿‡ç¨‹æœ‰å¯èƒ½ä¼šæŠŠç³»ç»Ÿç»™æå´©æºƒã€‚</p><h2 id="rpmå®‰è£…ï¼š"><a href="#rpmå®‰è£…ï¼š" class="headerlink" title="rpmå®‰è£…ï¼š"></a>rpmå®‰è£…ï¼š</h2><p>RPMåŒ…ï¼šç”±Red Hatå…¬å¸å¼€å‘çš„åŒ…ç®¡ç†ç³»ç»Ÿï¼Œè½¯ä»¶çš„å®‰è£…ã€å‡çº§ã€å¸è½½éƒ½éå¸¸ç®€å•å’Œæ–¹ä¾¿ã€‚ç›®å‰å¾ˆå¤šLinuxå‘è¡Œç‰ˆéƒ½åœ¨ä½¿ç”¨è¿™ç§åŒ…ç®¡ç†æœºåˆ¶ï¼ŒåŒ…æ‹¬CentOSã€Redhatã€Fedoraç­‰ã€‚è½¯ä»¶åŒ…æ–‡ä»¶åç¼€æ˜¯â€.rpmâ€ã€‚</p><p>DPKGåŒ…ï¼šç”±Debian Linuxå¼€å‘å‡ºæ¥çš„åŒ…ç®¡ç†æœºåˆ¶ï¼Œä¸»è¦åº”ç”¨åœ¨Debianå’ŒUnbuntuç³»ç»Ÿä¸­ã€‚è½¯ä»¶åŒ…æ–‡ä»¶åç¼€æ˜¯â€.debâ€ã€‚<br>ä¼˜ç‚¹ï¼š<br>ï¼ˆ1ï¼‰åŒ…å®‰è£…ä¸ç®¡ç†ç®€å•ï¼Œå¾€å¾€ä»…é€šè¿‡å‡ ä¸ªå‘½ä»¤å³å¯å®ç°åŒ…çš„å®‰è£…ã€å‡çº§ã€æŸ¥è¯¢å’Œå¸è½½ã€‚<br>ï¼ˆ2ï¼‰é€šå¸¸å®‰è£…é€Ÿåº¦è¦æ¯”æºç å®‰è£…å¿«å¾ˆå¤šï¼›<br>ç¼ºç‚¹ï¼š<br>ï¼ˆ1ï¼‰äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œçœ‹ä¸åˆ°æºç äº†ï¼Œä¿®æ”¹å’Œåˆ†ææºç å·²ä¸å¤ªå¯èƒ½ã€‚<br>ï¼ˆ2ï¼‰æ¨¡å—åŠŸèƒ½å·²ç»è¢«å®šåˆ¶ï¼Œç”¨æˆ·åŠŸèƒ½é€‰æ‹©è¿œä¸å¦‚æºç çµæ´»ï¼›<br>ï¼ˆ3ï¼‰æœ‰æ—¶ä¹Ÿéœ€è¦è§£å†³ä¾èµ–æ€§çš„é—®é¢˜ï¼Œæ­¤æ—¶è§£å†³ä¾èµ–æ€§æœ‰ä¸€å®šçš„å›°éš¾ã€‚</p><h2 id="yumå®‰è£…ï¼š"><a href="#yumå®‰è£…ï¼š" class="headerlink" title="yumå®‰è£…ï¼š"></a>yumå®‰è£…ï¼š</h2><p>yumè½¯ä»¶ä»“åº“æ˜¯ä¸ºäº†è¿›ä¸€æ­¥ç®€åŒ–RPMç®¡ç†è½¯ä»¶çš„éš¾åº¦ä»¥åŠè‡ªåŠ¨åˆ†ææ‰€éœ€è½¯ä»¶åŒ…åŠå…¶ä¾èµ–å…³ç³»çš„æŠ€æœ¯ã€‚<br>yumçš„å…³é”®ä¹‹å¤„æ˜¯è¦æœ‰å¯é çš„respositoryï¼ˆä¿è¯èƒ½å¤Ÿè¿æ¥äº’è”ç½‘ï¼Œè¿˜éœ€è¦ä¿è¯å®ƒæ˜¯ä¸€ä¸ªäº’è”ç½‘ä¸Šæ­£å¸¸å¯ç”¨çš„ä»“åº“ï¼‰ã€‚<br>å®ƒèƒ½å¤Ÿä»æŒ‡å®šæœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½rpmåŒ…å¹¶å®‰è£…ã€‚yumèƒ½å¤Ÿè‡ªåŠ¨è§£å†³è½¯ä»¶ä¾èµ–æ€§é—®é¢˜ï¼Œä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ã€‚</p><h1 id="yumå®‰è£…ä¸å¸è½½çš„ç›¸å…³å‘½ä»¤"><a href="#yumå®‰è£…ä¸å¸è½½çš„ç›¸å…³å‘½ä»¤" class="headerlink" title="yumå®‰è£…ä¸å¸è½½çš„ç›¸å…³å‘½ä»¤"></a>yumå®‰è£…ä¸å¸è½½çš„ç›¸å…³å‘½ä»¤</h1><p>å®‰è£…å‘½ä»¤ï¼šyum -y  install  è½¯ä»¶å<br>å‡çº§å‘½ä»¤ï¼šyum -y  install  è½¯ä»¶å<br>å‡çº§æ‰€æœ‰è½¯ä»¶ï¼šyum -y  install<br>å¸è½½å‘½ä»¤ï¼šyum  remove  è½¯ä»¶å<br>åˆ—å‡ºå¯å®‰è£…çš„è½¯ä»¶åŒ…ï¼šyum list<br>åˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼šyum list installed<br>æŸ¥è¯¢æŸä¸ªè½¯ä»¶åŒ…ï¼šyum  list  è½¯ä»¶å<br>æ ¹æ®å…³é”®å­—æœç´¢è½¯ä»¶åŒ…ï¼šyum search  Keyword<br>æ¸…é™¤ç¼“å­˜ï¼šyum clean all</p><h1 id="JDKçš„å®‰è£…ä¸é…ç½®"><a href="#JDKçš„å®‰è£…ä¸é…ç½®" class="headerlink" title="JDKçš„å®‰è£…ä¸é…ç½®"></a>JDKçš„å®‰è£…ä¸é…ç½®</h1><ol><li>ä»yumä»“åº“ä¸­æœç´¢jdkï¼šyum search jdk</li><li>å®‰è£…jdkï¼šyum -y install java-17-openjdk-devel.x86_64</li><li>çœ‹çœ‹jdkçš„å®‰è£…ç›®å½•ï¼š<ol><li>which java</li><li>ls -l &#x2F;usr&#x2F;bin&#x2F;java</li><li>ls -l &#x2F;etc&#x2F;alternatives&#x2F;java</li></ol></li><li>åœ¨&#x2F;etc&#x2F;profileæ–‡ä»¶ä¸­é…ç½®ç¯å¢ƒå˜é‡ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-17.0.6.0.10-3.el9.x86_64</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure><ol start="5"><li>ç”Ÿæ•ˆï¼šsource &#x2F;etc&#x2F;profile</li></ol><h1 id="TomcatæœåŠ¡å™¨çš„å®‰è£…ä¸é…ç½®"><a href="#TomcatæœåŠ¡å™¨çš„å®‰è£…ä¸é…ç½®" class="headerlink" title="TomcatæœåŠ¡å™¨çš„å®‰è£…ä¸é…ç½®"></a>TomcatæœåŠ¡å™¨çš„å®‰è£…ä¸é…ç½®</h1><ol><li>Tomcatæ˜¯Javaè¯­è¨€å®ç°çš„ï¼Œå› æ­¤ä½¿ç”¨TomcatæœåŠ¡å™¨çš„å‰ææ˜¯ï¼šå·²ç»å®‰è£…å¹¶é…ç½®äº†Javaç¯å¢ƒã€‚</li><li>ä¸‹è½½Tomcat<ol><li>å®˜ç½‘ï¼š<a href="https://tomcat.apache.org/">https://tomcat.apache.org/</a></li><li>ä¸‹è½½tomcat10</li></ol></li></ol><p><img src="https://i0.hdslb.com/bfs/article/cf227920b07af432de6ce6b802a4fd7c645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/835019c44a573cbe1365c56a6530bd30645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/e8a13f7cd01ba5b5cbd93bb5c322f5bb645325325.png" alt="image.png"></p><ol start="3"><li>ä½¿ç”¨FTPå·¥å…·å°†ä»¥ä¸Šå‹ç¼©åŒ…ä¸Šä¼ åˆ°CentOSã€‚</li></ol><p><img src="https://i0.hdslb.com/bfs/article/965c05ff50cef1ae7cfebb5934da0591645325325.png" alt="image.png">â€‹</p><ol start="4"><li>è§£å‹åˆ°å½“å‰ç›®å½•ä¸‹</li></ol><p><img src="https://i0.hdslb.com/bfs/article/911b0f474bef2c516542dde512ea4f11645325325.png" alt="image.png"></p><ol start="5"><li>ç¬¬ä¸‰æ–¹è½¯ä»¶ä¸€èˆ¬å­˜æ”¾åœ¨&#x2F;usr&#x2F;localç›®å½•ä¸‹ï¼Œä½¿ç”¨mvå‘½ä»¤tomcatç§»åŠ¨åˆ°è¯¥ç›®å½•ä¸‹</li></ol><p><img src="https://i0.hdslb.com/bfs/article/1d94d3451686da8244cf7656574678ef645325325.png" alt="image.png"></p><ol start="6"><li>ä¸ºäº†æ–¹ä¾¿é…ç½®ç¯å¢ƒå˜é‡ï¼Œå°†ç›®å½•åé‡å‘½å</li></ol><p><img src="https://i0.hdslb.com/bfs/article/3d1ed93d6fd8846069aa0caa0a0f7b1b645325325.png" alt="image.png"><br>ç°åœ¨TomcatæœåŠ¡å™¨çš„æ ¹è·¯å¾„æ˜¯ï¼š&#x2F;usr&#x2F;local&#x2F;tomcat10</p><ol start="7"><li>é…ç½®ç¯å¢ƒå˜é‡</li></ol><p><img src="https://i0.hdslb.com/bfs/article/c9d7c952fef8d498ae91e7b4ae964b79645325325.png" alt="image.png"><br>è®©ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š<br><img src="https://i0.hdslb.com/bfs/article/502b20f5b525e32af865d9be374a24f6645325325.png" alt="image.png"></p><ol start="8"><li>å¯åŠ¨Tomcat</li></ol><p><img src="https://i0.hdslb.com/bfs/article/8f420eff7e9e7b9c185f4e9f18ddd239645325325.png" alt="image.png"></p><ol start="9"><li>æŸ¥çœ‹æœåŠ¡å™¨IPåœ°å€</li></ol><p><img src="https://i0.hdslb.com/bfs/article/7122ea2e9b990476170225fc4f66d900645325325.png" alt="image.png">â€‹</p><ol start="10"><li>å…³é—­é˜²ç«å¢™</li></ol><p><img src="https://i0.hdslb.com/bfs/article/e0d5ad84e30231a034b0ec331ea87c0c645325325.png" alt="image.png"></p><ol start="11"><li>æ‰“å¼€windowsä¸Šçš„æµè§ˆå™¨ï¼Œè¾“å…¥åœ°å€è®¿é—®</li></ol><p><img src="https://i0.hdslb.com/bfs/article/5edd097889f042c462702444b6a79d38645325325.png" alt="image.png"></p><ol start="12"><li>å…³é—­tomcatæœåŠ¡å™¨</li></ol><p><img src="https://i0.hdslb.com/bfs/article/47e09d4846ac1048babc51c5e20a25cf645325325.png" alt="image.png"><br>æœåŠ¡å™¨å…³é—­ä¹‹åï¼Œé‡æ–°æ‰“å¼€ä¸€ä¸ªå…¨æ–°çš„æµè§ˆå™¨ï¼Œå†æ¬¡è¾“å…¥è®¿é—®åœ°å€ï¼Œä¼šå‘ç°æ— æ³•è®¿é—®äº†ã€‚</p><h1 id="MySQLçš„å®‰è£…ä¸é…ç½®"><a href="#MySQLçš„å®‰è£…ä¸é…ç½®" class="headerlink" title="MySQLçš„å®‰è£…ä¸é…ç½®"></a>MySQLçš„å®‰è£…ä¸é…ç½®</h1><h2 id="MySQL8çš„å®‰è£…"><a href="#MySQL8çš„å®‰è£…" class="headerlink" title="MySQL8çš„å®‰è£…"></a>MySQL8çš„å®‰è£…</h2><p>ä»¥ä¸‹æ˜¯åœ¨CentOS Streamç³»ç»Ÿä¸Šå®‰è£…MySQL8çš„æ­¥éª¤ï¼š</p><ol><li>æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…</li></ol><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°CentOS Streamç³»ç»Ÿä¸Šçš„è½¯ä»¶åŒ…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf update</span><br></pre></td></tr></table></figure><p>å®‰è£…MySQL8éœ€è¦æ›´æ–°ç³»ç»Ÿä¸Šçš„è½¯ä»¶åŒ…æ˜¯å› ä¸ºMySQL8éœ€è¦ä½¿ç”¨ä¸€äº›è¾ƒæ–°çš„ä¾èµ–åº“å’Œå·¥å…·ï¼Œè€ŒCentOS Streamé»˜è®¤çš„è½¯ä»¶åŒ…ç‰ˆæœ¬å¯èƒ½è¾ƒæ—§ï¼Œæ— æ³•æ»¡è¶³MySQL8çš„è¦æ±‚ã€‚æ›´æ–°ç³»ç»Ÿä¸Šçš„è½¯ä»¶åŒ…å¯ä»¥ç¡®ä¿ç³»ç»Ÿä¸­çš„ä¾èµ–åº“å’Œå·¥å…·ç‰ˆæœ¬ä¸MySQL8çš„è¦æ±‚ç›¸åŒ¹é…ï¼Œä»è€Œä¿è¯MySQL8çš„æ­£å¸¸è¿è¡Œã€‚</p><p>dnfå’Œyuméƒ½æ˜¯CentOSä¸­çš„åŒ…ç®¡ç†å™¨ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯å®‰è£…ã€å‡çº§ã€åˆ é™¤è½¯ä»¶åŒ…ä»¥åŠè§£å†³è½¯ä»¶åŒ…ä¾èµ–å…³ç³»ã€‚å®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><ul><li>è¯­æ³•ä¸åŒï¼šdnfå‘½ä»¤çš„è¯­æ³•æ›´åŠ ç®€æ´ï¼Œè€Œyumå‘½ä»¤çš„è¯­æ³•ç›¸å¯¹è¾ƒé•¿ã€‚</li><li>æ€§èƒ½ä¸åŒï¼šdnfå‘½ä»¤åœ¨å¤„ç†è½¯ä»¶åŒ…æ—¶çš„æ€§èƒ½æ¯”yumå‘½ä»¤æ›´å¥½ï¼Œå› ä¸ºdnfä½¿ç”¨äº†æ›´é«˜æ•ˆçš„ç®—æ³•ã€‚</li><li>ä¾èµ–å…³ç³»å¤„ç†ä¸åŒï¼šdnfå‘½ä»¤åœ¨å¤„ç†è½¯ä»¶åŒ…ä¾èµ–å…³ç³»æ—¶æ›´åŠ æ™ºèƒ½ï¼Œèƒ½å¤Ÿè‡ªåŠ¨é€‰æ‹©æœ€ä½³çš„ä¾èµ–å…³ç³»è§£å†³æ–¹æ¡ˆã€‚</li><li>ä½¿ç”¨çš„åº“ä¸åŒï¼šdnfå‘½ä»¤ä½¿ç”¨äº†æ›´åŠ ç°ä»£åŒ–çš„libdnfåº“ï¼Œè€Œyumå‘½ä»¤ä½¿ç”¨äº†è¾ƒè€çš„yumåº“ã€‚</li><li>å¯ç”¨æ’ä»¶ä¸åŒï¼šdnfå‘½ä»¤æ”¯æŒæ›´å¤šçš„æ’ä»¶ï¼Œå¯ä»¥å®ç°æ›´å¤šçš„åŠŸèƒ½ã€‚</li></ul><p>æ€»çš„æ¥è¯´ï¼Œdnfå‘½ä»¤æ˜¯yumå‘½ä»¤çš„å‡çº§ç‰ˆæœ¬ï¼Œå®ƒåœ¨æ€§èƒ½ã€ä¾èµ–å…³ç³»å¤„ç†å’Œå¯ç”¨æ’ä»¶ç­‰æ–¹é¢éƒ½æ›´åŠ ä¼˜ç§€ã€‚</p><ol start="2"><li>æ·»åŠ MySQL Yumå­˜å‚¨åº“</li></ol><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†MySQL Yumå­˜å‚¨åº“æ·»åŠ åˆ°ç³»ç»Ÿä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf install https://dev.mysql.com/get/mysql80-community-release-el9-5.noarch.rpm</span><br></pre></td></tr></table></figure><p>MySQL Yumå­˜å‚¨åº“æ€ä¹ˆè·å–ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šä»mysqlå®˜ç½‘è·å–<br><img src="https://i0.hdslb.com/bfs/article/b9979c669acbb193ee8368f04a02c422645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/a43f968361cb845aa9a8cd1c10b9d52c645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/1b2523d13be9b530a9db5ba97510a62f645325325.png" alt="image.png"></p><ol start="3"><li>å¯¼å…¥mysqlå…¬é’¥</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022</span><br></pre></td></tr></table></figure><ol start="4"><li>å®‰è£…MySQL 8</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf install mysql-community-server</span><br></pre></td></tr></table></figure><ol start="5"><li>å¯åŠ¨MySQLæœåŠ¡</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure><ol start="5"><li>è®¾ç½®MySQLå¼€æœºè‡ªå¯</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable mysqld</span><br></pre></td></tr></table></figure><ol start="6"><li>æŸ¥çœ‹rootè´¦æˆ·çš„ä¸´æ—¶å¯†ç </li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &#x27;temporary password&#x27; /var/log/mysqld.log</span><br></pre></td></tr></table></figure><ol start="7"><li>é…ç½®MySQLå®‰å…¨è®¾ç½®</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§æç¤ºè¾“å…¥å¯†ç å¹¶å›ç­”é—®é¢˜ï¼Œå®Œæˆå®‰å…¨è®¾ç½®ã€‚</p><ol start="8"><li>ç™»å½•MySQL</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œæ‚¨å°±å¯ä»¥åœ¨CentOS Streamç³»ç»Ÿä¸Šå®‰è£…å¹¶ä½¿ç”¨MySQL 8äº†ã€‚</p><h2 id="MySQL8è®¾ç½®å­—ç¬¦é›†"><a href="#MySQL8è®¾ç½®å­—ç¬¦é›†" class="headerlink" title="MySQL8è®¾ç½®å­—ç¬¦é›†"></a>MySQL8è®¾ç½®å­—ç¬¦é›†</h2><ol><li>æŸ¥çœ‹MySQL8å­—ç¬¦é›†</li></ol><p>åœ¨MySQLå‘½ä»¤è¡Œç•Œé¢ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#x27;%character%&#x27;;</span><br></pre></td></tr></table></figure><p>å¯ä»¥æŸ¥çœ‹MySQLçš„å­—ç¬¦é›†è®¾ç½®ã€‚<br><img src="https://i0.hdslb.com/bfs/article/337fc05522623269980cfc3e03262527645325325.png" alt="image.png"></p><ol start="2"><li>å¦‚æœå­—ç¬¦é›†ä¸æ˜¯utf8ï¼Œå¯ä»¥åœ¨&#x2F;etc&#x2F;my.cnfæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œåœ¨[mysqld]ä¸‹é¢æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š&#x2F;etc&#x2F;my.cnfæ˜¯mysqlçš„é…ç½®æ–‡ä»¶ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8mb4</span><br><span class="line">collation-server=utf8mb4_general_ci</span><br></pre></td></tr></table></figure><p>ä¿å­˜å¹¶é€€å‡ºã€‚</p><ol start="3"><li>é‡å¯MySQLæœåŠ¡</li></ol><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure><ol start="4"><li>å†æ¬¡æŸ¥çœ‹MySQL8çš„å­—ç¬¦é›†æ˜¯å¦ä¸ºutf8</li></ol><h2 id="åœ¨MySQL8ä¸­ä¸ºJavaç¨‹åºå‘˜åˆ›å»ºä¸“å±çš„MySQLç”¨æˆ·"><a href="#åœ¨MySQL8ä¸­ä¸ºJavaç¨‹åºå‘˜åˆ›å»ºä¸“å±çš„MySQLç”¨æˆ·" class="headerlink" title="åœ¨MySQL8ä¸­ä¸ºJavaç¨‹åºå‘˜åˆ›å»ºä¸“å±çš„MySQLç”¨æˆ·"></a>åœ¨MySQL8ä¸­ä¸ºJavaç¨‹åºå‘˜åˆ›å»ºä¸“å±çš„MySQLç”¨æˆ·</h2><p>é¦–å…ˆï¼Œä»¥rootç”¨æˆ·èº«ä»½ç™»å½•MySQLï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ï¼Œä¾‹å¦‚é¡¹ç›®æ˜¯oaé¡¹ç›®ï¼Œä¸€èˆ¬åˆ›å»ºä¸€ä¸ªæ•°æ®åº“å«åšoaï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database oa;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·å¹¶è®¾ç½®å¯†ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;java_dev&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;java_DEV123&#x27;;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œä¸ºè¯¥ç”¨æˆ·æˆäºˆå¼€å‘è€…ä¸“æœ‰çš„æƒé™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, ALTER, INDEX, REFERENCES ON oa.* TO &#x27;java_dev&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œåˆ·æ–°æƒé™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå…³é—­centosçš„é˜²ç«å¢™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼ŒJavaç¨‹åºå‘˜å¯ä»¥ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è¿æ¥åˆ°MySQLå¹¶æ‹¥æœ‰å¼€å‘è€…ä¸“æœ‰çš„æƒé™ã€‚</p><h1 id="WEBåº”ç”¨çš„éƒ¨ç½²"><a href="#WEBåº”ç”¨çš„éƒ¨ç½²" class="headerlink" title="WEBåº”ç”¨çš„éƒ¨ç½²"></a>WEBåº”ç”¨çš„éƒ¨ç½²</h1><p>åœ¨è¿›è¡Œä»¥ä¸‹çš„webåº”ç”¨éƒ¨ç½²æ—¶ï¼Œè¯·ç¡®ä¿ä»¥ä¸Šçš„JDK17ã€Tomcat10ã€MySQL8å·²ç»å®‰è£…æˆåŠŸã€‚</p><ol><li>åˆå§‹åŒ–æ•°æ®åº“<ol><li>è¿™é‡Œä½¿ç”¨navicat for mysqlå·¥å…·ã€‚</li><li>å…ˆåœ¨navicat for mysqlå·¥å…·ä¸­åˆ›å»ºè¿æ¥ã€‚</li><li>å¦‚æœé¡¹ç›®åå«åšoaï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ªæ•°æ®åº“oaã€‚</li><li>æ‰§è¡Œsqlè„šæœ¬æ–‡ä»¶ï¼ˆoa.sqlï¼‰å®Œæˆæ•°æ®åˆå§‹åŒ–ã€‚</li></ol></li><li>å°†é¡¹ç›®ä¸­è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯è¿›è¡Œä¿®æ”¹ï¼Œä¾‹å¦‚ï¼šurlã€usernameã€passwordç­‰ä¿¡æ¯ã€‚</li></ol><p><img src="https://i0.hdslb.com/bfs/article/385306e91a41b204a1be1a16596ac56e645325325.png" alt="image.png"></p><ol start="3"><li>åœ¨IDEAå½“ä¸­ï¼Œä½¿ç”¨mavenå°†é¡¹ç›®ä»¥warçš„å½¢å¼æ‰“åŒ…ã€‚</li></ol><p><img src="https://i0.hdslb.com/bfs/article/b309f7459876612d28209429a6d912af645325325.png" alt="image.png">â€‹</p><ol start="4"><li>å°†waråŒ…ä¸Šä¼ åˆ°Tomcatçš„webappsç›®å½•ä¸‹ã€‚</li></ol><p><img src="https://i0.hdslb.com/bfs/article/7cc7286946ed79f3b22f3a9dcdde1116645325325.png" alt="image.png"></p><ol start="5"><li>å¯åŠ¨TomcatæœåŠ¡å™¨ï¼ŒwaråŒ…è‡ªåŠ¨è§£å‹ã€‚warè§£å‹ä¹‹åçš„ç›®å½•å°±æ˜¯webåº”ç”¨ã€‚</li></ol><p><img src="https://i0.hdslb.com/bfs/article/fcfcd461b9e74618c914f37917a2bc3d645325325.png" alt="image.png"></p><ol start="6"><li>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥è®¿é—®åœ°å€è®¿é—®ã€‚</li></ol><p><img src="https://i0.hdslb.com/bfs/article/ec41d9aa6f8488ff849680f94f81f39c645325325.png" alt="image.png"></p><ol start="7"><li>å®æ—¶æŸ¥çœ‹TomcatæœåŠ¡å™¨åå°æ—¥å¿—</li></ol><p>åˆ‡æ¢åˆ°CATALINA_HOME&#x2F;logsç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹tomcatæœåŠ¡å™¨æ—¥å¿—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f catalina.out</span><br></pre></td></tr></table></figure><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬6ç«  æ–‡ä»¶æƒé™</title>
      <link href="/posts/33643.html"/>
      <url>/posts/33643.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="tip sync faa-horizontal animated"><p>é…’èƒ½çº¢åŒé¢Šï¼Œæ„èƒ½é›ªç™½å¤´</p></div><a href="https://www.bilibili.com/video/BV1Nb421a7TV/?spm_id_from=333.999.list.card_archive.click">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/20240815134316.png"></a><h1 id="æ–‡ä»¶æƒé™æ¦‚è¿°"><a href="#æ–‡ä»¶æƒé™æ¦‚è¿°" class="headerlink" title="æ–‡ä»¶æƒé™æ¦‚è¿°"></a>æ–‡ä»¶æƒé™æ¦‚è¿°</h1><p>Linuxä¸ºäº†ä¿è¯ç³»ç»Ÿä¸­æ¯ä¸ªæ–‡ä»¶çš„å®‰å…¨ï¼Œå¼•å…¥äº†æ–‡ä»¶æƒé™æœºåˆ¶ã€‚é’ˆå¯¹äºç³»ç»Ÿä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶Linuxéƒ½å¯ä»¥æä¾›ç²¾ç¡®çš„æƒé™æ§åˆ¶ã€‚å®ƒå¯ä»¥åšåˆ°<strong>ä¸åŒçš„ç”¨æˆ·</strong>å¯¹<strong>åŒä¸€ä¸ªæ–‡ä»¶</strong>å…·æœ‰ä¸åŒçš„æ“ä½œæƒåˆ©ã€‚è€Œé€šå¸¸è¿™ä¸ªæƒåˆ©åŒ…æ‹¬ä»¥ä¸‹3ä¸ªï¼š</p><ul><li>è¯»çš„æƒåˆ©ï¼ˆReadï¼Œç®€ç§°rï¼‰</li><li>å†™çš„æƒåˆ©ï¼ˆWriteï¼Œç®€ç§°wï¼‰</li><li>æ‰§è¡Œçš„æƒåˆ©ï¼ˆeXecuteï¼Œç®€ç§°xï¼‰</li></ul><p>å…·ä½“çš„æƒé™å€¼ï¼šrwxï¼ˆè¯»ã€å†™ã€æ‰§è¡Œï¼‰ã€‚è¿™ä¸ªæˆ‘ä»¬å·²ç»çŸ¥é“äº†ã€‚ä½†æ˜¯ä¸Šé¢è¿˜æåˆ°äº†â€œ<strong>ä¸åŒçš„ç”¨æˆ·</strong>å¯¹åŒä¸€ä¸ªæ–‡ä»¶å¯ä»¥æœ‰ä¸åŒçš„æƒé™â€ä¸­â€œ<strong>ä¸åŒçš„ç”¨æˆ·</strong>â€æŒ‡çš„æ˜¯å“ªäº›ç”¨æˆ·å‘¢ï¼Ÿæ‰€ä»¥è¿™ä¸ªæ–‡ä»¶çš„ç”¨æˆ·ä¹Ÿæ˜¯åŒ…æ‹¬3ç±»ç”¨æˆ·ï¼š</p><ul><li>æ–‡ä»¶æ‹¥æœ‰è€…ï¼ˆUserï¼Œç®€ç§°Uï¼‰ï¼šè¯¥æ–‡ä»¶çš„åˆ›å»ºäºº</li><li>åŒç»„ç”¨æˆ·ï¼ˆGroupï¼Œç®€ç§°Gï¼‰ï¼šå’Œåˆ›å»ºäººåœ¨åŒä¸€ç»„çš„ç”¨æˆ·</li><li>å…¶ä»–ç»„ç”¨æˆ·ï¼ˆOtherï¼Œç®€ç§°Oï¼‰ï¼šå’Œåˆ›å»ºäººä¸åœ¨åŒä¸€ç»„çš„ç”¨æˆ·</li></ul><p>è¿™å°±æ˜¯éå¸¸è‘—åçš„UGOæ¨¡å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæ–‡ä»¶çš„æƒé™åŒ…æ‹¬ä¸‰ç»„ï¼š</p><ul><li>ç¬¬ä¸€ç»„Uï¼šæˆ‘ä»¬å¯ä»¥ç»™æ–‡ä»¶çš„åˆ›å»ºè€…è®¾ç½®rwxæƒé™ã€‚</li><li>ç¬¬äºŒç»„Gï¼šæˆ‘ä»¬å¯ä»¥ç»™æ–‡ä»¶åˆ›å»ºè€…çš„åŒç»„äººå‘˜è®¾ç½®rwxæƒé™ã€‚</li><li>ç¬¬ä¸‰ç»„Oï¼šæˆ‘ä»¬å¯ä»¥ç»™å’Œæ–‡ä»¶åˆ›å»ºè€…ä¸åœ¨åŒä¸€ç»„çš„äººå‘˜è®¾ç½®rwxæƒé™ã€‚</li></ul><h1 id="æŸ¥çœ‹æ–‡ä»¶æƒé™"><a href="#æŸ¥çœ‹æ–‡ä»¶æƒé™" class="headerlink" title="æŸ¥çœ‹æ–‡ä»¶æƒé™"></a>æŸ¥çœ‹æ–‡ä»¶æƒé™</h1><p>é‡‡ç”¨â€œls -lâ€å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„å…·ä½“æƒé™ï¼Œå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/f5b514a18f238130fffc141afb644e35645325325.png" alt="image.png"><br>æƒé™ä¿¡æ¯åœ¨å“ªé‡Œå‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š<br><img src="https://i0.hdslb.com/bfs/article/a11625b7780947085f660bac2fa2b939645325325.png" alt="image.png"><br>æ¯ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•é‡‡ç”¨ls -læŸ¥çœ‹ä¹‹åï¼Œç¬¬ä¸€ä¸ªå­—æ®µæè¿°äº†æ–‡ä»¶ç±»å‹+æ–‡ä»¶çš„æƒé™ã€‚ç¬¬ä¸€ä¸ªå­—æ®µå…±10ä¸ªå­—ç¬¦ï¼š</p><ul><li>ç¬¬1ä¸ªå­—ç¬¦ï¼šä»£è¡¨æ–‡ä»¶çš„ç±»å‹ï¼Œ- ä»£è¡¨æ–‡ä»¶ï¼Œdä»£è¡¨ç›®å½•<ul><li>å…¶å®Linuxä¸­æ–‡ä»¶çš„ç±»å‹æœ‰7ç§ï¼š<ul><li><ul><li>ä»£è¡¨æ™®é€šæ–‡ä»¶</li></ul></li><li>d ä»£è¡¨ç›®å½•</li><li>l ä»£è¡¨é“¾æ¥ï¼ˆè½¯é“¾æ¥ï¼šå¿«æ·æ–¹å¼ï¼‰</li><li>b å—è®¾å¤‡ï¼ˆç¡¬ç›˜ï¼Œè½¯ç›˜ç­‰å­˜å‚¨è®¾å¤‡ï¼‰</li><li>c å­—ç¬¦è®¾å¤‡ï¼ˆé€šå¸¸ä»¥å­—èŠ‚æµçš„æ–¹å¼è®¿é—®ï¼‰</li><li>p ç®¡é“æ–‡ä»¶ï¼ˆä¸»è¦ç”¨äºè¿›ç¨‹é—´é€šè®¯ï¼‰</li><li>s å¥—æ¥å­—æ–‡ä»¶ï¼ˆä¸»è¦ç”¨äºç½‘ç»œé€šè®¯ï¼‰</li></ul></li></ul></li><li>ç¬¬2,3,4ä¸ªå­—ç¬¦ï¼šä»£è¡¨æ–‡ä»¶åˆ›å»ºè€…å¯¹è¯¥æ–‡ä»¶çš„æƒé™ã€‚</li><li>ç¬¬5,6,7ä¸ªå­—ç¬¦ï¼šä»£è¡¨ä¸æ–‡ä»¶åˆ›å»ºè€…åœ¨åŒä¸€ç»„çš„ç”¨æˆ·å¯¹è¯¥æ–‡ä»¶çš„æƒé™ã€‚</li><li>ç¬¬8,9,10 ä¸ªå­—ç¬¦ï¼šä»£è¡¨å…¶ä»–ç»„äººå‘˜å¯¹è¯¥æ–‡ä»¶çš„æƒé™ã€‚</li></ul><p>å…³äºæ–‡ä»¶æƒé™çš„9ä¸ªå­—ç¬¦ä¸­åŒ…å«å››ç§å­—ç¬¦ï¼Œåˆ†åˆ«æ˜¯ï¼šrã€wã€xã€-ï¼Œä»–ä»¬ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼š</p><ul><li>rï¼šè¯»æƒé™</li><li>wï¼šå†™æƒé™</li><li>xï¼šæ‰§è¡Œæƒé™</li><li>-ï¼šæ— æƒé™</li></ul><h1 id="åŸºäºUGOè®¾ç½®æ–‡ä»¶æƒé™"><a href="#åŸºäºUGOè®¾ç½®æ–‡ä»¶æƒé™" class="headerlink" title="åŸºäºUGOè®¾ç½®æ–‡ä»¶æƒé™"></a>åŸºäºUGOè®¾ç½®æ–‡ä»¶æƒé™</h1><p>ä¿®æ”¹æƒé™çš„å‘½ä»¤æ˜¯chmodï¼Œå¦‚æœé‡‡ç”¨UGOæ–¹å¼ä¿®æ”¹æƒé™çš„è¯ï¼Œå¤§è‡´è¯­æ³•æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod g+w Hello.java</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod g+w, o+w Hello.java</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod g-w, o-w Hello.java</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æŸ¥çœ‹HelloWorld.javaæ–‡ä»¶çš„æƒé™ï¼š<br><img src="https://i0.hdslb.com/bfs/article/835364501f703009850b87e07f8b4643645325325.png" alt="image.png"><br>æ–‡ä»¶æ‹¥æœ‰è€…ï¼šè¯»å’Œå†™<br>åŒç»„äººå‘˜ï¼šè¯»<br>å…¶ä»–ç»„äººå‘˜ï¼šè¯»<br>æˆ‘ä»¬å°†æ–‡ä»¶æ‹¥æœ‰è€…çš„å†™æƒé™åˆ é™¤ï¼š<br><img src="https://i0.hdslb.com/bfs/article/b883c060bb9df94b97f2708316c92082645325325.png" alt="image.png"><br>æˆ‘ä»¬å°è¯•ä½¿ç”¨vimå‘½ä»¤ç¼–è¾‘HelloWorld.javaæ–‡ä»¶ï¼Œå½“ä½ ä½¿ç”¨vimç¼–è¾‘æ—¶ï¼š<br><img src="https://i0.hdslb.com/bfs/article/487bd57386ef157420e510080e2eebe8645325325.png" alt="image.png"><br>å‘ç°è¯¥æ–‡ä»¶æ˜¯åªè¯»çš„ï¼Œä¸æ”¯æŒç¼–è¾‘ã€‚<br>æˆ‘ä»¬å†æŠŠå†™çš„æƒé™åŠ ä¸Šï¼š<br><img src="https://i0.hdslb.com/bfs/article/e32c31a0ad614ade03962bb302470179645325325.png" alt="image.png"><br>å†ä½¿ç”¨vimå‘½ä»¤æ‰“å¼€è¯¥æ–‡ä»¶ï¼š<br><img src="https://i0.hdslb.com/bfs/article/fadcac75778a71f94b97a0c34cc4eee6645325325.png" alt="image.png"><br>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ—¶å€™æ–‡ä»¶å¯ä»¥ç¼–è¾‘äº†ã€‚</p><p><strong>æ³¨æ„ï¼šåœ¨æµ‹è¯•åŒç»„äººå‘˜çš„æƒé™æ—¶ï¼Œä¸€å®šè¦æ³¨æ„åˆ›å»ºè€…åˆ›å»ºæ–‡ä»¶ä¹‹åï¼Œæ–‡ä»¶æ‰€å¯¹åº”çš„ç»„æ˜¯å¦ä¿®æ”¹äº†ã€‚æ€ä¹ˆä¿®æ”¹æ–‡ä»¶æ‰€å±ç»„ï¼šchgrp dev Test.javaï¼ˆå°†Test.javaæ–‡ä»¶æ‰€å±ç»„ä¿®æ”¹ä¸ºdevï¼‰</strong></p><h1 id="åŸºäº421è®¾ç½®æ–‡ä»¶æƒé™"><a href="#åŸºäº421è®¾ç½®æ–‡ä»¶æƒé™" class="headerlink" title="åŸºäº421è®¾ç½®æ–‡ä»¶æƒé™"></a>åŸºäº421è®¾ç½®æ–‡ä»¶æƒé™</h1><p>421é‡‡ç”¨æ•°å­—æ¥è¡¨ç¤ºä¸åŒçš„æƒé™ã€‚</p><ul><li>4ä»£è¡¨è¯»</li><li>2ä»£è¡¨å†™</li><li>1ä»£è¡¨æ‰§è¡Œ</li></ul><p>ä¾‹å¦‚ï¼šå¦‚æœè®©ä¸€ä¸ªç”¨æˆ·è¯»ã€å†™ã€æ‰§è¡Œæƒé™éƒ½æœ‰çš„è¯ï¼Œå°±æ˜¯4 + 2 + 1 &#x3D; 7ï¼Œé‚£ä¹ˆ7è¿™ä¸ªæ•°å­—å°±ä»£è¡¨rwxçš„æƒé™éƒ½å…·å¤‡ã€‚å¦‚æœæ˜¯5å°±è¡¨ç¤º4+1çš„ç»„åˆï¼Œè¡¨ç¤ºæœ‰rå’Œxçš„æƒé™ã€‚å¦‚æœæ˜¯6å°±è¡¨ç¤º4+2çš„ç»„åˆï¼Œè¡¨ç¤ºæœ‰rå’Œwçš„æƒé™ã€‚å¦‚æœæ˜¯0å°±è¡¨ç¤ºæ— ä»»ä½•æƒé™ã€‚<br>é€šè¿‡421è¿™å‡ ä¸ªæ•°å­—çš„ä¸åŒç»„åˆæ¥è¡¨ç¤ºä¸åŒçš„æƒé™ï¼Œé‚£ä¹ˆå®ƒæœ‰å¤šå°‘ç§ä¸åŒçš„ç»„åˆå‘¢ï¼š</p><ul><li>0ï¼šæ— æƒé™</li><li>1ï¼šx</li><li>4ï¼šr</li><li>5ï¼šr + x</li><li>6ï¼šr + w</li><li>7ï¼šr + w + x</li></ul><p>ä¹Ÿå°±æ˜¯è¯´ä¸€å…±6ä¸ªæ•°å­—ï¼š0 1 4 5 6 7<br>é‚£ä¹ˆé‡‡ç”¨421æ–¹å¼è®¾ç½®æƒé™åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Œæ¯”å¦‚ï¼šå¦‚ä½•ç»™æ–‡ä»¶æ‹¥æœ‰è€…è®¾ç½®æƒé™ï¼Œå¦‚ä½•ç»™åŒç»„äººå‘˜è®¾ç½®æƒé™ï¼Œå¦‚ä½•ç»™å…¶ä»–ç»„äººå‘˜è®¾ç½®æƒé™ï¼Ÿè¯­æ³•æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod ä¸‰ä¸ªæ•°å­— æ–‡ä»¶å</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼šchmod 755 HelloWorld.java<br>ç¬¬ä¸€ä¸ªæ•°å­—7æ˜¯æ–‡ä»¶æ‹¥æœ‰è€…çš„æƒé™ï¼Œç¬¬äºŒä¸ªæ•°å­—5æ˜¯åŒç»„äººå‘˜çš„æƒé™ï¼Œç¬¬ä¸‰ä¸ªæ•°å­—5æ˜¯å…¶ä»–ç»„äººå‘˜çš„æƒé™ã€‚<br>ä¹Ÿå°±æ˜¯è¯´æ–‡ä»¶æ‹¥æœ‰è€…çš„æƒé™æ˜¯rwxï¼ŒåŒç»„äººå‘˜æ˜¯r-xï¼Œå…¶ä»–ç»„äººå‘˜æ˜¯ï¼šr-x<br>â€‹<img src="https://i0.hdslb.com/bfs/article/1158297bae1e367f42e8e2da7f7dd85d645325325.png" alt="image.png"><br>å†å¦‚ï¼šchmod 700 HelloWorld.java<br>è¡¨ç¤ºæ–‡ä»¶æ‹¥æœ‰è€…æƒé™ï¼šrwxï¼ŒåŒç»„äººå‘˜æ— æƒé™ï¼Œå…¶ä»–ç»„äººå‘˜æ— æƒé™<br>â€‹<img src="https://i0.hdslb.com/bfs/article/be21ded0bb220a6977de7f6ad5d1a91f645325325.png" alt="image.png">â€‹</p><h1 id="chownä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…"><a href="#chownä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…" class="headerlink" title="chownä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…"></a>chownä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…</h1><p>åœ¨ Linux ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>chown</code> å‘½ä»¤æ¥ä¿®æ”¹æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…å’Œæ‰€å±ç»„ã€‚<code>chown</code> å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown [é€‰é¡¹]... [æ‰€æœ‰è€…][:[æ‰€å±ç»„]] æ–‡ä»¶...</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>æ‰€æœ‰è€…</code> å’Œ <code>æ‰€å±ç»„</code> å¯ä»¥æ˜¯ç”¨æˆ·åæˆ–ç”¨æˆ· IDã€ç»„åæˆ–ç»„ IDï¼Œå¦‚æœçœç•¥ <code>:</code> å’Œ <code>æ‰€å±ç»„</code>ï¼Œåˆ™é»˜è®¤ä¸ºä¿®æ”¹æ–‡ä»¶çš„æ‰€æœ‰è€…ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨é€‰é¡¹ï¼š</p><ul><li><code>-R</code>ï¼šé€’å½’ä¿®æ”¹ï¼ŒåŒ…æ‹¬å­ç›®å½•å’Œæ–‡ä»¶ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œå°† <code>/home/user/file.txt</code> æ–‡ä»¶çš„æ‰€æœ‰è€…ä¿®æ”¹ä¸º <code>root</code> ç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown root /home/user/file.txt</span><br></pre></td></tr></table></figure><p>å°† <code>/home/user/dir/</code> ç›®å½•åŠå…¶å­ç›®å½•å’Œæ–‡ä»¶çš„æ‰€æœ‰è€…éƒ½ä¿®æ”¹ä¸º <code>userA</code> ç”¨æˆ·ï¼Œæ‰€å±ç»„ä¿®æ”¹ä¸º <code>groupA</code> ç»„ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R userA:groupA /home/user/dir/</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œåœ¨ä½¿ç”¨ <code>chown</code>â€‹ å‘½ä»¤æ—¶ï¼Œéœ€è¦æœ‰è¶³å¤Ÿçš„æƒé™æ‰èƒ½ä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…å’Œæ‰€å±ç»„ã€‚ä¸€èˆ¬éœ€è¦ä½¿ç”¨ <code>sudo</code>â€‹ å‘½ä»¤æˆ–ä½¿ç”¨å…·æœ‰ç›¸åº”æƒé™çš„ç”¨æˆ·æ¥æ‰§è¡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬5ç«  Linuxç”¨æˆ·ç®¡ç†</title>
      <link href="/posts/41490.html"/>
      <url>/posts/41490.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="tip cogs faa-horizontal animated"><p>ä»Šäººè§è¿‡æ˜”å¹´æœˆï¼Œä»Šæœˆæ›¾ç»ç…§æ•…äººï¼Œéƒ½æ›¾è§è¿‡å¥¹å•Š</p></div><a href="https://www.bilibili.com/video/BV1Nb421a7TV/?spm_id_from=333.999.list.card_archive.click">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/20240815134316.png"></a><p>Linuxç³»ç»Ÿä¸­è¶…çº§ç”¨æˆ·æ˜¯rootï¼Œé€šè¿‡è¶…çº§ç”¨æˆ·rootå¯ä»¥åˆ›å»ºå…¶å®ƒçš„æ™®é€šç”¨æˆ·ï¼ŒLinuxæ˜¯ä¸€ä¸ªæ”¯æŒå¤šç”¨æˆ·çš„æ“ä½œç³»ç»Ÿã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¸€èˆ¬ä¼šåˆ†é…ç»™å¼€å‘äººå‘˜ä¸“å±çš„è´¦æˆ·ï¼Œè¿™ä¸ªè´¦æˆ·åªæ‹¥æœ‰éƒ¨åˆ†æƒé™ï¼Œå¦‚æœæƒé™å¤ªé«˜ï¼Œæ“ä½œçš„èŒƒå›´è¿‡å¤§ï¼Œä¸€äº›è¯¯æ“ä½œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œæˆ–è€…æ•°æ®ä¸å®‰å…¨ï¼Œæ‰€ä»¥å¤šç”¨æˆ·æœºåˆ¶å°±æ˜¯ä¸€ç§ç³»ç»Ÿå®‰å…¨ç­–ç•¥ã€‚<br>åœ¨Linuxç³»ç»Ÿä¸­ä»»ä½•ä¸€ä¸ªç”¨æˆ·éƒ½å¯¹åº”ï¼šä¸€ä¸ªç”¨æˆ·å + ä¸€ä¸ªå£ä»¤ã€‚ç”¨æˆ·ä½¿ç”¨ç³»ç»Ÿæ—¶éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå£ä»¤è¿›è¡Œç™»å½•ï¼Œç™»å½•æˆåŠŸåå°±å¯ä»¥è¿›å…¥è‡ªå·±çš„ä¸»ç›®å½•ï¼ˆä¸»ç›®å½•å°±æ˜¯è‡ªå·±çš„å·¥ä½œç›®å½•ï¼‰ã€‚<br>ç”¨æˆ·è´¦å·ç®¡ç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸‰æ–¹é¢ï¼š</p><ul><li>ç”¨æˆ·ç»„çš„ç®¡ç†</li><li>ç”¨æˆ·çš„ç®¡ç†</li><li>ä¸ºç”¨æˆ·ä¸»ç›®å½•ä¹‹å¤–çš„ç›®å½•æˆæƒ</li></ul><h1 id="ç”¨æˆ·ç»„çš„ç®¡ç†"><a href="#ç”¨æˆ·ç»„çš„ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç»„çš„ç®¡ç†"></a>ç”¨æˆ·ç»„çš„ç®¡ç†</h1><p>æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œç³»ç»Ÿå¯ä»¥å¯¹ä¸€ä¸ªç”¨æˆ·ç»„ä¸­çš„æ‰€æœ‰ç”¨æˆ·è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚<br>ç”¨æˆ·ç»„çš„ç®¡ç†æ¶‰åŠç”¨æˆ·ç»„çš„æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤ã€‚<br>ç”¨æˆ·ç»„çš„æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤å®é™…ä¸Šå°±æ˜¯å¯¹&#x2F;etc&#x2F;groupæ–‡ä»¶çš„æ›´æ–°ã€‚<br><strong>ä½¿ç”¨rootè´¦æˆ·æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„ç”¨æˆ·ç»„æœ‰å“ªäº›</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/group</span><br></pre></td></tr></table></figure><p><img src="https://i0.hdslb.com/bfs/article/9102b0922b937561007620b1f6e784c4645325325.png" alt="image.png"><br>æ¯ä¸€ä¸ªç”¨æˆ·ç»„å››éƒ¨åˆ†ç»„æˆï¼šç»„åï¼šå¯†ç æ ‡è¯†ï¼šGIDï¼šè¯¥ç”¨æˆ·ç»„ä¸­çš„ç”¨æˆ·åˆ—è¡¨<br><strong>æŸ¥çœ‹å½“å‰ç™»å½•çš„è´¦æˆ·å±äºå“ªä¸€ç»„</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groups</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹æŸä¸ªç”¨æˆ·å±äºå“ªä¸€ç»„</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# groups root</span><br></pre></td></tr></table></figure><p><img src="https://i0.hdslb.com/bfs/article/6680e5c5266ec4331e674b4535af8d92645325325.png" alt="image.png">â€‹</p><h2 id="ç”¨æˆ·ç»„çš„æ·»åŠ "><a href="#ç”¨æˆ·ç»„çš„æ·»åŠ " class="headerlink" title="ç”¨æˆ·ç»„çš„æ·»åŠ "></a>ç”¨æˆ·ç»„çš„æ·»åŠ </h2><p>è¯­æ³•ï¼šgroupadd [é€‰é¡¹] ç»„å<br>å¸¸ç”¨é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>-g     å¯ä»¥é€šè¿‡è¿™ä¸ªé€‰é¡¹æ¥æŒ‡å®šæ–°ç”¨æˆ·ç»„çš„æ ‡è¯†å·ï¼ˆGIDï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd dev1</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd -g 101 dev2</span><br></pre></td></tr></table></figure><p>å…¶ä¸­101æ˜¯dev2è¿™ä¸ªç»„çš„ç»„å·ã€‚</p><h2 id="ç”¨æˆ·ç»„çš„ä¿®æ”¹"><a href="#ç”¨æˆ·ç»„çš„ä¿®æ”¹" class="headerlink" title="ç”¨æˆ·ç»„çš„ä¿®æ”¹"></a>ç”¨æˆ·ç»„çš„ä¿®æ”¹</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod -g 102 dev2</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†dev2ä¿®æ”¹ä¸ºdev3</span></span><br><span class="line">groupmod -n dev3 dev2</span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆ·ç»„çš„åˆ é™¤"><a href="#ç”¨æˆ·ç»„çš„åˆ é™¤" class="headerlink" title="ç”¨æˆ·ç»„çš„åˆ é™¤"></a>ç”¨æˆ·ç»„çš„åˆ é™¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ç”¨æˆ·ç»„dev3</span></span><br><span class="line">groupdel dev3</span><br></pre></td></tr></table></figure><h1 id="ç”¨æˆ·çš„ç®¡ç†"><a href="#ç”¨æˆ·çš„ç®¡ç†" class="headerlink" title="ç”¨æˆ·çš„ç®¡ç†"></a>ç”¨æˆ·çš„ç®¡ç†</h1><p>ç”¨æˆ·ç®¡ç†å·¥ä½œä¸»è¦æ¶‰åŠåˆ°ç”¨æˆ·çš„æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤ã€‚</p><h2 id="æ·»åŠ ç”¨æˆ·"><a href="#æ·»åŠ ç”¨æˆ·" class="headerlink" title="æ·»åŠ ç”¨æˆ·"></a>æ·»åŠ ç”¨æˆ·</h2><p>æ·»åŠ ç”¨æˆ·å°±æ˜¯åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªæ–°è´¦å·ï¼Œç„¶åä¸ºæ–°è´¦å·åˆ†é…ç”¨æˆ·ç»„ã€ä¸»ç›®å½•ç­‰èµ„æºã€‚<br>è¯­æ³•ï¼šuseradd [é€‰é¡¹] ç”¨æˆ·å<br>é€‰é¡¹ï¼š</p><ul><li>-d    æŒ‡å®šæ–°ç”¨æˆ·çš„ä¸»ç›®å½•</li><li>-g    æŒ‡å®šæ–°ç”¨æˆ·å±äºå“ªä¸ªç»„ï¼ˆä¸»ç»„ï¼‰</li><li>-G    å¯ä»¥ç»™æ–°ç”¨æˆ·æ·»åŠ é™„åŠ ç»„</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# useradd lisi</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå½“æ–°å»ºç”¨æˆ·æ—¶ï¼Œæ²¡æœ‰æŒ‡å®šç»„ï¼Œä¹Ÿæ²¡æœ‰æŒ‡å®šå·¥ä½œç›®å½•æ—¶ï¼š</p><ul><li>é»˜è®¤çš„ç»„åï¼šå’Œè‡ªå·±ç”¨æˆ·åä¸€æ ·</li><li>é»˜è®¤çš„ä¸»ç›®å½•ï¼š&#x2F;home&#x2F;ç”¨æˆ·å</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# useradd -d /usr/zhangsan zhangsan</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost usr]# useradd -d /usr/lisi -g dev -G test lisi</span><br></pre></td></tr></table></figure><p>æ·»åŠ lisiç”¨æˆ·ï¼Œè¯¥ç”¨æˆ·çš„ä¸»ç›®å½•&#x2F;usr&#x2F;lisiï¼Œæ‰€å±ä¸»ç»„devï¼ˆå¼€å‘ç»„ï¼‰ï¼Œé™„åŠ ç»„testï¼ˆæµ‹è¯•ç»„ï¼‰</p><h2 id="è®¾ç½®å¯†ç "><a href="#è®¾ç½®å¯†ç " class="headerlink" title="è®¾ç½®å¯†ç "></a>è®¾ç½®å¯†ç </h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd lisi</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¢åŠ ç”¨æˆ·å°±æ˜¯åœ¨&#x2F;etc&#x2F;passwdæ–‡ä»¶ä¸­ä¸ºæ–°ç”¨æˆ·å¢åŠ ä¸€æ¡è®°å½•ï¼ŒåŒæ—¶æ›´æ–°å…¶ä»–ç³»ç»Ÿæ–‡ä»¶å¦‚&#x2F;etc&#x2F;shadow, &#x2F;etc&#x2F;groupç­‰ã€‚<br>é€šè¿‡æŸ¥çœ‹&#x2F;etc&#x2F;passwdæ–‡ä»¶å¯ä»¥çœ‹åˆ°ç³»ç»Ÿä¸­æœ‰å“ªäº›ç”¨æˆ·ï¼Œä¾‹å¦‚æ‰§è¡Œï¼šcat &#x2F;etc&#x2F;passwd<br>â€‹<img src="https://i0.hdslb.com/bfs/article/ab5e5a7df7d75bcfeec5f33536ed72e6645325325.png" alt="image.png"><br>ä»¥ä¸Šä¿¡æ¯æè¿°äº†ä»€ä¹ˆï¼Ÿ<br>â€‹<img src="https://i0.hdslb.com/bfs/article/42be5f14200fa04018b88408212c9972645325325.png" alt="image.png"><br>å¯†ç ä¼šå•ç‹¬å­˜å‚¨åœ¨&#x2F;etc&#x2F;shadowæ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚æ‰§è¡Œï¼šcat &#x2F;etc&#x2F;shadow<br>â€‹<img src="https://i0.hdslb.com/bfs/article/ad96809c9242c8bd0bd6b1b5e1ed6239645325325.png" alt="image.png"><br>å¯ä»¥çœ‹åˆ°è¿™ä¸ªå¯†ç æ˜¯é€šè¿‡æŸç§ç®—æ³•è¿›è¡ŒåŠ å¯†çš„ã€‚</p><h2 id="åˆ‡æ¢ç”¨æˆ·"><a href="#åˆ‡æ¢ç”¨æˆ·" class="headerlink" title="åˆ‡æ¢ç”¨æˆ·"></a>åˆ‡æ¢ç”¨æˆ·</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# su bjpowernode</span><br></pre></td></tr></table></figure><p><img src="https://i0.hdslb.com/bfs/article/41dd2fb26f93499cc90c717c2e567bb2645325325.png" alt="image.png"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[bjpowernode@localhost root]$ su root</span><br><span class="line">å¯†ç ï¼š </span><br><span class="line">[root@localhost ~]# </span><br></pre></td></tr></table></figure><p><img src="https://i0.hdslb.com/bfs/article/25d639cc26b1140f9a64e090b9fb9f12645325325.png" alt="image.png"><br>æ³¨æ„ï¼šä»æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ°é«˜çº§ç”¨æˆ·éœ€è¦å¯†ç ã€‚å¯†ç è¾“å…¥æ—¶ä¸å›æ˜¾ã€‚<br>æ³¨æ„ï¼šåˆ‡æ¢åˆ°æ™®é€šç”¨æˆ·ä¹‹åï¼Œè¯¥æ™®é€šç”¨æˆ·é»˜è®¤åªå¯¹è‡ªå·±çš„â€œä¸»ç›®å½•â€æœ‰æƒé™ï¼Œä¸»ç›®å½•ä¹‹å¤–çš„ç›®å½•æ˜¯æ²¡æœ‰æƒé™çš„ã€‚</p><h2 id="ä¿®æ”¹ç”¨æˆ·"><a href="#ä¿®æ”¹ç”¨æˆ·" class="headerlink" title="ä¿®æ”¹ç”¨æˆ·"></a>ä¿®æ”¹ç”¨æˆ·</h2><p>ä¿®æ”¹ç”¨æˆ·å°±æ˜¯å¯¹ç”¨æˆ·åï¼Œç”¨æˆ·ä¸»ç›®å½•ï¼Œç”¨æˆ·ç»„ç­‰è¿›è¡Œä¿®æ”¹ã€‚<br>è¯­æ³•ï¼šusermod [é€‰é¡¹] ç”¨æˆ·å</p><ul><li>-d    æŒ‡å®šæ–°ç”¨æˆ·çš„ä¸»ç›®å½•</li><li>-g    æŒ‡å®šæ–°ç”¨æˆ·å±äºå“ªä¸ªç»„ï¼ˆä¸»ç»„ï¼‰</li><li>-G    å¯ä»¥ç»™æ–°ç”¨æˆ·æ·»åŠ é™„åŠ ç»„</li><li>-l     æŒ‡å®šæ–°çš„ç”¨æˆ·åï¼ˆå°å†™çš„è‰¾è·¯ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -l zhangsi zhangsan</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-m é€‰é¡¹å¾ˆé‡è¦ï¼Œå½“æœ‰äº†è¿™ä¸ªé€‰é¡¹ä¹‹åï¼Œç›®å½•ä¸å­˜åœ¨æ—¶ä¼šæ–°å»ºè¯¥ç›®å½•ã€‚</span></span><br><span class="line">usermod -d /usr/zhangsan2 -m zhangsan</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -g dev1 zhangsan</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -L zhangsan</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -U zhangsan</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤ç”¨æˆ·"><a href="#åˆ é™¤ç”¨æˆ·" class="headerlink" title="åˆ é™¤ç”¨æˆ·"></a>åˆ é™¤ç”¨æˆ·</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel -r zhangsan</span><br></pre></td></tr></table></figure><p>-r é€‰é¡¹çš„ä½œç”¨æ˜¯è¿åŒè¯¥ç”¨æˆ·ä¸»ç›®å½•ä¸€å—åˆ é™¤ã€‚</p><h1 id="ä¸ºç”¨æˆ·ä¸»ç›®å½•ä¹‹å¤–çš„ç›®å½•æˆæƒ"><a href="#ä¸ºç”¨æˆ·ä¸»ç›®å½•ä¹‹å¤–çš„ç›®å½•æˆæƒ" class="headerlink" title="ä¸ºç”¨æˆ·ä¸»ç›®å½•ä¹‹å¤–çš„ç›®å½•æˆæƒ"></a>ä¸ºç”¨æˆ·ä¸»ç›®å½•ä¹‹å¤–çš„ç›®å½•æˆæƒ</h1><p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç›®å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /java</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼šç»™ç›®å½•æˆæƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-Rè¡¨ç¤ºé€’å½’è®¾ç½®æƒé™ï¼Œè¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„å­ç›®å½•ä»¥åŠå­æ–‡ä»¶</span></span><br><span class="line">chmod -R 775 /java</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºç»„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd dev</span><br></pre></td></tr></table></figure><p>ç¬¬å››æ­¥ï¼šæŠŠç›®å½•èµ‹äºˆç»„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chgrp -R dev /java</span><br></pre></td></tr></table></figure><p>ç¬¬äº”æ­¥ï¼šåˆ›å»ºç”¨æˆ·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd xiaoming</span><br></pre></td></tr></table></figure><p>ç¬¬å…­æ­¥ï¼šè®¾ç½®å¯†ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd xiaoming</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸ƒæ­¥ï¼šç»™ç”¨æˆ·æ·»åŠ é™„åŠ ç»„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -G dev xiaoming</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤©ç©ºä¹‹åŸ</title>
      <link href="/posts/29f0725f.html"/>
      <url>/posts/29f0725f.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><p>é¢˜è®°-æˆ‘ä»¬éƒ½æ˜¯æ˜­é˜³ï¼Œç”Ÿå‘½ä¸­å´æ²¡æœ‰ç±³å½©ã€ä¹ç‘¶ã€ç®€è–‡ã€‚</p><p>å…¶å®é¢˜è®°é‡Œæ²¡æ‰“ï¼Œæ€•ç ´åæ°›å›´ï¼Œæˆ‘è¿˜æƒ³æ‰“ä¸Šç”šè‡³æ²¡æœ‰ç½—æœ¬ã€CCç”šè‡³å°äº”ç­‰äººã€‚å°±åƒä½œè€…å¾®åšé‡Œè¯´çš„ï¼Œä½ ä»¬æœ‰éšå«éšåˆ°é™ªä½ å–é…’çš„äººä¹ˆï¼Œè‡³å°‘æˆ‘æ²¡æœ‰ã€‚ä½œè€…ä»¥ç¬¬ä¸€äººç§°çš„å†™ä½œæ‰‹æ³•ï¼Œå¾ˆå®¹æ˜“è®©æˆ‘ä»¬å¸¦å…¥åˆ°æ˜­é˜³çš„æƒ…æ„Ÿä¸­å»ï¼Œå°±åƒæˆ‘é¢˜è®°è¯´çš„ï¼Œæˆ‘ä»¬éƒ½æ˜¯æ˜­é˜³ï¼Œç”Ÿå‘½ä¸­å´æ²¡æœ‰ç±³å½©ã€ä¹ç‘¶ã€ç®€è–‡è¿™ç§è§†æˆ‘ä»¬ä¸ºç”Ÿå‘½çš„å¥³äººã€‚å¯äººç”Ÿæ˜¯ä¸€é“å•é€‰é¢˜ï¼Œæœ€åæ˜­é˜³é€‰æ‹©äº†ç±³å½©ï¼Œè¾œè´Ÿäº†ä¹ç‘¶å’Œç®€è–‡ã€‚æˆ‘æ²¡æœ‰ï¼Œä½ æœ‰ï¼Œå´è¾œè´Ÿäº†ï¼Œè¿™å¤§æ¦‚å°±æ˜¯æˆ‘ä»¬æœ€æ„éš¾å¹³çš„åœ°æ–¹ã€‚</p><p>ä¸€ä¹ç‘¶ã€‚</p><p>ä¹ç‘¶æ˜¯è¿™éƒ¨å°è¯´æœ€ä½å¼€é«˜èµ°çš„ä¸€ä¸ªè§’è‰²ï¼Œä¹Ÿæ˜¯æœ€æ‚²æƒ…çš„è§’è‰²ã€‚(ä¹‹æ‰€ä»¥ä¸å«å¥¹è‚–ç‘¶ï¼Œæ˜¯å› ä¸ºä¹ç‘¶æ‰æ˜¯å’Œæ˜­é˜³é¬¼æ··ä¸¤å¹´çš„å°é€æ˜ï¼Œæ‰æ˜¯æŠŠæ˜­é˜³å½“æˆå…¨éƒ¨ä¸–ç•Œçš„ä¸€ä¸ªå°éº»çƒ¦ã€‚æ”¹åæˆ‘è§‰å¾—æ›´å¤šçš„æ„æ€æ˜¯è¦å’Œè¿‡å»é‚£ä¸ªå‚»å‚»çˆ±ç€æ˜­é˜³çš„ä¹ç‘¶å‘Šåˆ«çš„)ã€‚ä¹ç‘¶ä¹Ÿæ˜¯æˆ‘æœ€å–œæ¬¢çš„è§’è‰²ã€‚æˆ‘å¤šå¸Œæœ›ç¬¬ä¸€ç« ä¹ç‘¶ç”Ÿä¸‹å­©å­æ”¾å¼ƒå½“å¤§è…•çš„æ¢¦ï¼Œæ˜­é˜³ä¸ºäº†å­©å­å’Œå¥¹åœ¨ä¸€èµ·ï¼Œæ•…äº‹ç»“æŸã€‚é‚£æ—¶å€™ç±³å½©æ²¡æœ‰å’Œæ˜­é˜³çº ç¼ åœ¨ä¸€èµ·ï¼Œä»¥åå’Œå°æµ·é¾Ÿåœ¨ä¸€èµ·ï¼Œæ¥æ‰‹æ¯äº²ç±³å›½ç”Ÿæ„ï¼Œå¹³æ·¡çš„è¿‡ä¸€è¾ˆå­ï¼Œä¹Ÿä¸é”™ã€‚è–‡è–‡ç®€å¯èƒ½å°±æ‚²å‰§äº›ï¼Œä¸è¿‡è®²äº†é‚£ä¹ˆå¤šæ•…äº‹ï¼Œæœ€åç»“å±€æ—¶è–‡è–‡ç®€ä¸ä¹Ÿä¸€æ ·è¿œèµ°ç±³å›½äº†ä¹ˆã€‚ä»ç¬¬ä¸€3ç« å¼€å§‹è–‡è–‡ç®€å°±å·²ç»å—ä¼¤äº†ï¼Œè¿™ä¸ªæ²¡åŠæ³•ï¼Œé‚£ä¸ªçƒˆç«ä¸€æ ·çš„å¥³å­ä¸è‚¯æ”¾è¿‡è‡ªå·±ã€‚å¥½äº†æ‰¯è¿œäº†ï¼Œå›æ¥è¯´ä¹ç‘¶ã€‚æˆ‘ä¹‹æ‰€ä»¥è¯´ä¹ç‘¶æ˜¯æœ€æ‚²æƒ…çš„ï¼Œä¸ä»…ä»…æ˜¯å¥¹ä»æ¥æ²¡å¾—åˆ°æ˜­é˜³çš„çˆ±ï¼Œè¿˜è¢«æ˜­é˜³å–å¤šäº†ç¡äº†(å¯èƒ½ä¸€è¾¹ç¡ä¸€è¾¹è¿˜å–Šç€ç®€è–‡)ï¼Œè¿˜ä¸­å¥–äº†ï¼Œè¿˜æ‰“èƒäº†ã€‚è€Œæ˜¯ä½œè€…å¯èƒ½ä»ä¸€å¼€å§‹æ²¡æƒ³å†™è¿™ä¹ˆä¸€ä¸ªè§’è‰²ï¼Œå¼€ç¯‡ä¹ç‘¶æ˜¯ä»¥ä¸€ä¸ªæ··å§çš„ç‚®å‹çš„å½¢è±¡å‡ºç°çš„ï¼Œè¯»å®Œå…¨ç¯‡å›å¤´å†çœ‹æ˜­é˜³å¼€ç¯‡å¯¹å¥¹æœ‰å¤šæ±¡è”‘ï¼Œæˆ‘å°±è§‰å¾—æœ‰å¤šå‰²è£‚ï¼Œç”Ÿå‘½ä¸­é‚£ä¹ˆé‡è¦çš„çº¢é¢œçŸ¥å·±å±…ç„¶ä»¥ç‚®å‹å½¢è±¡å‡ºç°ã€‚å…¶å®å¼€ç¯‡è¿™é‡Œå‡ºç°å‡ ä¸ªé€»è¾‘BUGï¼Œå¼€ç¯‡æ˜­é˜³å¯¹ä¹ç‘¶çš„æ„Ÿè§‰æ˜¯ç‚®å‹ï¼Œæ˜¯å› ä¸ºé•¿çš„å¥½çœ‹ç¡çš„ï¼Œä¸€å£ä¸€ä¸ªä»¥ååˆ«è”ç³»äº†ã€‚åæ¥å‘¢ï¼ŒæŠŠä¹ç‘¶å½“å¦¹å¦¹ï¼ŒæŠ›å¼ƒè®¢å©šå¯¹è±¡ï¼Œä¼¤çˆ¶æ¯çš„å¿ƒä¹Ÿè¦å›æ¥å¸®å¥¹ï¼Œè¿˜ä¸ºå¥¹å€Ÿäº†100Wã€‚è¯•é—®å¤§å®¶ä½ ä»¬ä¸ºäº†ç‚®å‹èƒ½åšåˆ°è¿™åœ°æ­¥ä¹ˆã€‚æ˜­é˜³å¯¹ä¹ç‘¶çš„æ„Ÿæƒ…åº”è¯¥æ˜¯å¼€ç¯‡ä¹‹å‰ä¸¤å¹´é¬¼æ··å…»æˆçš„ï¼Œè€Œä¸æ˜¯ä»¥æ‰“èƒä¸ºèµ·ç‚¹ã€‚è¿˜æœ‰è¯´æ–¹åœ†æ˜¯è¿™åº§åŸå¸‚å”¯ä¸€çš„æœ‹å‹ã€‚é‚£ç½—æœ¬å’ŒCCå°±ä¸ä¹æ„äº†ï¼Œæ˜­é˜³ï¼Œä½ å¿˜äº†æ¡¥æ´å­å”±æ­Œçš„ç½—æœ¬äº†ä¹ˆã€‚ä½ å¿˜äº†æ— æ•°æ¬¡ç…§é¡¾å–å¤šçš„ä½ çš„CCäº†ä¹ˆã€‚å¥½äº†åˆæ‰¯è¿œäº†ï¼Œç»§ç»­è¯´ä¹ç‘¶ã€‚ä¹ç‘¶å¯èƒ½æ˜¯å…¨ç¯‡æ´»çš„æœ€æ˜ç™½çš„ä¸€ä¸ªäººäº†ï¼Œåªæœ‰å¥¹æ˜¯ç”Ÿæ´»ä¸­çš„é«˜æ‰‹ï¼Œæ˜Ÿé€”å¥¹å¾ˆå¦è¡ï¼Œå°±ç®—ä¹‹åå«ç»™äº†æ›¹å…¬å­ä¹Ÿæ²¡è¿‡çš„ä¸å¥½ï¼Œå¥¹ä¹‹æ‰€ä»¥åœ¨æ„Ÿæƒ…ä¸­æ²¡åšå¥½é«˜æ‰‹ï¼Œåªæ˜¯å¥¹è‡ªå·±ä¸€ç›´ä¸æ„¿æ„èµ°å‡ºæ¥è€Œå·²ï¼Œæ¢å¥è¯è¯´æ˜¯å¯¹æ˜­é˜³çˆ±çš„æ·±æ²‰ã€‚ä¹ç‘¶è¿™ä¸ªè§’è‰²ä¸°æ»¡å®åœ¨ä¸€æ¬¡æ¬¡åŠ æˆä¸­ä½“ç°çš„ï¼Œæ¯”å¦‚è¢«æ˜­é˜³æ€‚æ¿å·çƒŸã€è§†ç½—æœ¬ä¸ºå“¥å“¥ï¼Œçˆ±ä¸Šæ˜­é˜³ç­‰ç­‰ã€‚ä¸ç®¡å¦‚ä½•ï¼Œä½œè€…è¿˜æ˜¯å¡‘é€ å‡ºè¿™ä¹ˆä¸€ä¸ªè®©æˆ‘ä»¬åˆçˆ±åˆå¿ƒç–¼çš„å¤æ€ªç²¾çµçš„ä¹ç‘¶ï¼Œè§†æ˜­é˜³ä¸ºå…¨éƒ¨ä¸–ç•Œçš„ä¹ç‘¶ã€‚æˆ‘çŒœä¹ç‘¶ä¸è®©æ˜­é˜³å»å¥¹çš„å©šç¤¼ç°åœºå¯èƒ½æ˜¯æ€•å¥¹å¿ä¸ä½å†²ä¸‹å»æ±‚å©šæ˜­é˜³å§ã€‚è¿˜æœ‰æ‹çš„é‚£ä¸ªç”µå½±ï¼Œæ€€é‡Œç”·ä¸»çš„å­©å­æ­»äº†ï¼Œæœ€åæ´»åœ¨ç”·ä¸»å¿ƒé‡Œï¼Œæ‹æ‘„å®Œä¹ç‘¶é‚£åœºå¤§å“­ï¼Œæˆ‘æƒ³ä¹ç‘¶æ˜¯æ„¿æ„è¿™ä¸æ˜¯ç”µå½±è€Œæ˜¯ç”Ÿæ´»å§ã€‚ä½œè€…æ€»è¯´ç±³å½©ä¸èƒ½è¢«è¾œè´Ÿæ˜¯å¯æ€œçš„å­©å­ï¼Œæ¯äº²æŠ›å¼ƒï¼Œçˆ¶äº²å»ä¸–ã€‚å¯ä¹ç‘¶å‘¢ï¼Œçˆ¶äº²æŠ›å¼ƒï¼Œæ¯äº²åæ–‡æè¿‡ä¹Ÿæˆå®¶äº†ï¼Œæ²¡äººç–¼æ²¡äººçˆ±ï¼Œåªæœ‰ä¹ç‘¶ä¸€ä¸ªäººå­¤è‹¦ä¼¶ä»ƒçš„ç”Ÿæ´»ï¼Œè¿˜è¢«åªæƒ³ç€çº¢çš„å‰ç”·å‹æŠ›å¼ƒï¼Œè°åˆä¸æ˜¯ä¸èƒ½è¾œè´Ÿçš„å°å¯æ€œå‘¢ï¼Ÿåªè®¸å¥¹æˆ¿å®¢å¤§å°å§å¯æ€œä¹ˆï¼Œä¸€ééçš„æï¼Œåˆæœ‰è°æƒ³åˆ°æˆ‘ä»¬ä¸€ç›´ä¿æŒå¾®ç¬‘çš„ä¹ç‘¶æœ‰å¤šè‹¦ã€‚</p><p>å¦‚æœç•™ä¸‹å­©å­ï¼Œå¦‚æœæ”¾å¼ƒå¤§è…•çš„æ¢¦ï¼Œå¦‚æœç›¸ä¿¡æ˜­é˜³èƒ½å…»å¾—èµ·å¥¹ä»¬çš„å­©å­ï¼Œå¦‚æœæ—©ä¸€äº›è¡¨è¾¾å¿ƒæ„ï¼Œæœ‰å¤ªå¤šçš„å¦‚æœã€‚é‚£æ ·ä¹ç‘¶å°±ä¼šæ˜¯æœ€å¹¸ç¦çš„äººã€‚ä¹Ÿä¸ç¡ç€çš„æ—¶å€™å‡è£…æ­»äº†å‡ å›äº†ã€‚æ„éš¾å¹³ã€‚</p><p>äºŒã€ç®€è–‡</p><p>è–‡è–‡ç®€æ˜¯ä¸€ä¸ªçº¯ç²¹çš„å¥³äººï¼Œæ˜¯ç«ä¸€æ ·çš„å¥³äººã€‚æ˜¯æœ‰ç€å¼ºçƒˆç²¾ç¥æ´ç™–çš„å¥³äººã€‚å¥¹è¯´å¥¹çš„äººç”Ÿä¸å¯èƒ½å®Œç¾äº†ï¼Œå¥¹å°±å‘å¥¹çš„è½¦ä¸€æ ·å¸¦ç€ä¼¤ç—•ï¼Œæé†’è‡ªå·±ï¼Œæƒ©ç½šè‡ªå·±ã€‚è¿™é‡Œå…ˆè¯´å¥¹ä¸ºä»€ä¹ˆå’Œæ˜­é˜³åˆ†æ‰‹ã€‚å…¶å®å…¨ç¯‡ä½œè€…ç»™äº†å¾ˆå¤šæš—ç¤ºï¼Œæ–¹åœ†å‡ºè½¨æ—¶å€™æ‰æ‰‹ï¼Œè–‡è–‡ç®€æ— åŠ¨äºè¡·ï¼Œå¹¶ä¸”è¯´å¥¹æ‰‹ä¸Šä¹Ÿæœ‰ä¼¤ç—•ã€‚å¥¹å’Œæ˜­é˜³è¯´è¿‡æˆ‘ä»æ²¡æƒ³è¿‡è¦èƒŒå›ä½ ï¼Œè¿˜æœ‰ä¸€æ®µè–‡è–‡ç®€åšæ¢¦æ—¶å€™è¿˜å–Šå¥¹ç²¾ç¥æ²¡æœ‰èƒŒå›(å¤§æ¦‚æ˜¯è¿™ä¸ªæ„æ€å§)ï¼Œæœ‰ä¸€æ®µè–‡è–‡ç®€å’Œå‘æ™¨äº‰åµï¼Œçªç„¶è¯´è¦æˆ‘æŠŠäº‹æƒ…éƒ½è¯´å‡ºæ¥ä¹ˆï¼Œå‘æ™¨ç«‹é©¬æ€‚äº†ï¼Œè¿˜æœ‰ä¸€æ®µæ˜­é˜³å·çœ‹å‘æ™¨ç®€è–‡çš„çŸ­ä¿¡æ˜¯è¿™æ ·çš„(â€œå‘æ™¨ï¼Œä½ å¾ˆæ¶å¿ƒï¼Œä½ çŸ¥é“å—ï¼Ÿå°±å†²ä½ å¯¹æˆ‘å’Œæ˜­é˜³åšçš„ä¸€åˆ‡ï¼Œä½ å°±æ¶å¿ƒï¼â€¦â€¦æˆ‘å·²ç»æ˜¯è¿™ä¸ªæ ·å­äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯è±ä¸å‡ºå»çš„ï¼Œä½ æœ€å¥½ä»æˆ‘çš„è§†çº¿é‡Œæ»šçš„è¶Šè¿œè¶Šå¥½ã€‚â€)æœ€åé“¶è¡Œç»ç†è¯´æ–¹åœ†è¯´è¿‡å‘æ™¨å¯¹ä¸èµ·è–‡è–‡ç®€å’Œæ˜­é˜³ã€‚è¿˜æœ‰ä¸€æ®µè–‡è–‡ç®€è¯´æ˜­é˜³æœç„¶å’Œåˆ«çš„å¥³çš„é¬¼æ··ï¼Œè¿˜è¯´å¥¹åœ¨ç¾å›½å¤šä¹ˆå¤šä¹ˆè¾›è‹¦ã€‚è¿˜æœ‰å‘æ™¨å‡ºå›½ä¸€æ®µæ—¶é—´ã€‚é‚£ä¹ˆç­”æ¡ˆå¾ˆæ˜æ˜¾ï¼Œå‘æ™¨å‡ºå›½é™ªè–‡è–‡ç®€å»äº†ï¼Œé€ è°£æ˜­é˜³å‡ºè½¨ï¼ŒçŒé†‰ä¹Ÿå¥½ä¸‹Yä¹Ÿå¥½æ€ä¹ˆä¹Ÿå¥½ï¼Œç¡äº†è–‡è–‡ç®€ä¸€æ¬¡(æˆ‘è§‰å¾—å‘æ™¨å¯èƒ½å°±ç¡é‚£ä¹ˆä¸€æ¬¡ï¼Œä¹‹åè–‡è–‡ç®€åŒæ„å’Œå‘æ™¨äº¤å¾€ä¹Ÿæ˜¯è–‡è–‡ç®€äº²çœ¼çœ‹è§æ˜­é˜³è¯´ç±³å½©æ˜¯è‡ªå·±å¥³æœ‹å‹ä¹‹åï¼ŒåŒæ˜­é˜³ä¸€æ ·ä¸æƒ³è¡¨ç°å¤ªä¸å ªè€Œåšå‡ºçš„ä¸¾åŠ¨ï¼Œå¥¹å¿ƒé‡Œç›´åˆ°ç»“å±€ä¹Ÿä¸€ç›´çˆ±ç€æ˜­é˜³ï¼Œè¿™æ ·ä¸€ä¸ªå¼ºçƒˆç²¾ç¥æ´ç™–çš„å¥³äººæ€ä¹ˆä¼šå’Œå‘æ™¨åŒå±…ã€‚å‘æ™¨æœºå…³ç®—å°½ä¹Ÿæ²¡èƒ½å¾—åˆ°ç®€è–‡ï¼Œæœ€åæ‰å’Œç®€è–‡åˆ†æ‰‹æ‰¾é‚£ä¸ªè°)ã€‚é†’æ¥çš„è–‡è–‡ç®€è§‰å¾—è‡ªå·±å¯¹ä¸èµ·æ˜­é˜³(æˆ–è€…è‡ªå·±ç²¾ç¥ä¸­å®Œç¾çš„çˆ±æƒ…)å‰²è…•è‡ªæ€ï¼Œè™½ç„¶æ•‘è¿‡æ¥äº†ä½†æ˜¯å¥¹ä¸è‚¯åŸè°…è‡ªå·±å’Œæ˜­é˜³åˆ†æ‰‹äº†ã€‚è¿™ä¹Ÿæ˜¯æ•…äº‹çš„å¼€ç¯‡ã€‚å…¶å®è–‡è–‡ç®€æˆ‘è§‰å¾—æ˜¯é™¤äº†ä¹ç‘¶ç¬¬äºŒè‹¦æƒ…çš„ã€‚é‚£ä¹ˆå®Œç¾åˆšçƒˆçš„ä¸€ä¸ªå¥³å­ï¼Œå´é‡åˆ°å‘æ™¨è¿™æ ·çš„å°äººã€‚é”™è¿‡äº†ä¸æ˜­é˜³çš„å®Œç¾çˆ±æƒ…ã€‚å¥¹ç©¿ç€ä¸€ä»¶ç™½è‰²Tæ¤ï¼ŒæƒŠè‰³äº†æˆ‘ä¸€æ•´ä¸ªå¤å¤©ã€‚è¿™æ˜¯æ˜­é˜³å¯¹å¥¹æœ€åçš„å›å¿†ï¼Œå´ç»ˆç©¶æ˜¯é”™è¿‡äº†ã€‚æˆ‘çœ‹å®Œå°è¯´é€›äº†é€›ä½œè€…å¾®åšè¿˜æœ‰çŸ¥ä¹å…³äºè¿™æœ¬å°è¯´çš„è¯„ä»·ï¼Œä¸å°‘äººè¯´ç®€è–‡èƒ½ä¸æ˜­é˜³ä¸€èµ·æ­»ï¼Œæ·‹æ±½æ²¹å’Œè·³æŠ¤åŸæ²³é‚£ä¸¤æ®µã€‚å…¶å®æˆ‘æƒ³è¯´ä¹ç‘¶å’Œç±³å½©ä¹Ÿä¸€å®šåšå¾—åˆ°ã€‚å¥¹ä»¬å¯¹æ˜­é˜³çš„çˆ±å®Œå…¨ä¸é€Šè‰²ä¸è–‡è–‡ç®€ï¼Œä¹ç‘¶ç”µå½±é‡Œçš„åŸå¢“ï¼Œè«å­çŸ³è¯´æ¼äº†è¯´ç±³å½©ä¸é¡¾è‡ªå·±çš„æ€§å‘½ï¼Œä¹Ÿæ— æ€¨æ— æ‚”(æˆ‘è§‰å¾—è¿™æ®µåº”è¯¥æ˜¯ç±³å½©ç”Ÿå®å®éš¾äº§ï¼Œä¸é¡¾è‡ªå·±æ€§å‘½ä¹Ÿæƒ³ç»™æ˜­é˜³ä¸€ä¸ªå­©å­)ã€‚ä½†æ˜¯è¿™ç§é•œå¤´ä¸€å®šè¦ç»™ç®€è–‡ã€‚å¥¹æ˜¯é‚£ä¹ˆåˆšçƒˆï¼Œå¥¹ä¸è‚¯åŸè°…è‡ªå·±çš„è¿‡é”™ï¼Œæ´»ç€æ¯ä¸€å¤©éƒ½æ˜¯å¯¹è‡ªå·±çš„æŠ˜ç£¨ï¼Œé‚£ä¹ˆæ­»äº†ï¼Œæˆ–è€…ä¸ºäº†æ˜­é˜³æ­»ã€é™ªç€æ˜­é˜³æ­»ï¼Œå¯¹å¥¹æ¥è¯´éƒ½æ˜¯ä¸€ç§å®Œç¾çš„ç»“å±€ï¼Œåªæ˜¯ä½œè€…ä¹Ÿå¿ƒç–¼è¿™ä¸ªå¼ºé¢œæ¬¢ç¬‘çš„å¥³å­ï¼Œæœ€åä¹Ÿç»™äº†å¥¹ä¸€ä¸ªè¿˜ç®—ç¾å¥½çš„ç»“å±€ã€‚</p><p>å¦‚æœæ²¡æœ‰çˆ¶æ¯åå¯¹ï¼Œå¦‚æœæ²¡æœ‰å‘æ™¨è¿™ä¸ªå°äººï¼Œå¦‚æœè–‡è–‡ç®€èƒ½åŸè°…è‡ªå·±å’Œæ˜­é˜³å¥½å¥½æ²Ÿé€šï¼Œå¦‚æœæ–¹åœ†å©šç¤¼æ˜­é˜³æ²¡è¯´ç±³å½©æ˜¯è‡ªå·±å¥³å‹ã€‚æœ‰å¤ªå¤šçš„å¦‚æœï¼Œé‚£æ ·è–‡è–‡ç®€ä¹Ÿä¼šæ˜¯æœ€å¹¸ç¦çš„å¥³äººã€‚ä¹Ÿä¸ç”¨æœ€åè¿œèµ°ç±³å›½äº†ã€‚æ„éš¾å¹³ã€‚</p><p>ä¸‰ã€ç±³å½©</p><p>æˆ¿å®¢å¤§å°å§åšä¸ºå¤©å‘½å¥³ä¸»è§’åº”è¯¥æ˜¯æœ€å¹¸ç¦çš„ä¸€ä¸ªäº†ï¼Œè¿™ä¸ªä¸ç”¨æ„éš¾å¹³äº†ã€‚ä»æœ€åˆæ‰“æ‰“é—¹é—¹ï¼Œåˆ°çˆ±ä¸Šæ˜­é˜³ï¼Œå†åˆ°å„ç§çŸ›ç›¾ï¼Œå†åˆ°è½é­„å›å¾å·ç»“å©š(è¯è¯´è¿™æ®µçœŸçš„ä¸ºäº†æƒ¨è€Œæƒ¨å•Šï¼Œæœ‰é‚£ä¹ˆç©·ä¹ˆï¼ŒæŠ•èµ„é‚£èŠ±åº—å¤šé’±å‘¢ã€‚çªç„¶å°±å‡ ä¸‡éƒ½æ²¡æœ‰äº†ï¼Œä½œè€…ä¹ŸçœŸæ˜¯çš„ã€‚)å†åˆ°å©šç¤¼ä¸­æ˜­é˜³è·‘äº†å»çœ‹å‰å¥³å‹ï¼Œç›´åˆ°æœ€åæœ‰äº†å­©å­ã€‚æŒºå¥½çš„ï¼Œä¸€è·¯é£é£é›¨é›¨ï¼Œç»“å±€æ˜¯ç¾å¥½çš„å°±å¥½ã€‚è¯´ä¸ªæœ‰æ„æ€çš„äº‹ï¼Œæˆ‘çœ‹åˆ°ç±³å½©ç¬¬ä¸€æ¬¡å’Œæ˜­é˜³åœ¨ä¸€èµ·çš„æ—¶å€™æˆ‘å‘ç°è¿›åº¦æ‰20%ï¼Œæˆ‘å°±è§‰å¾—äº‹æƒ…æ²¡é‚£ä¹ˆç®€å•ã€‚äººç”Ÿçœ‹å°è¯´10å¤šå¹´ç¬¬ä¸€æ¬¡ç›´æ¥å»çœ‹äº†ç»“å±€ï¼Œæˆ‘å½“æ—¶æƒ³ç»“å±€æ˜­é˜³å’Œç±³å½©åœ¨ä¸€èµ·æˆ‘å°±ç»§ç»­çœ‹ï¼Œä¸åœ¨ä¸€èµ·æˆ‘å°±ä¸çœ‹äº†ã€‚è¿˜å¥½ç»“å±€æ˜¯å¥½çš„ï¼Œæˆ‘æ‰ç»§ç»­çœ‹ã€‚å¯è§ä½œè€…è¿™å°è¯´æœ‰å¤šè™ã€‚æœ‰å¾ˆå¤šäººè¯´ç±³å½©ä¸çˆ±æ˜­é˜³ï¼Œå¥¹ä¸çˆ±æ˜­é˜³ä¼šé¡¶ç€æ‰€æœ‰äººåå¯¹å’Œæ˜­é˜³åœ¨ä¸€èµ·ä¹ˆï¼Œä¼šä¸ºäº†å¥¹åƒé‚£ä¹ˆå¤šé†‹ä¹ˆï¼Œä¼šå’Œæ˜­é˜³å›å¾å·åšä¸€ä¸ªå°åŠ©ç†ä¹ˆã€‚å¹³å¹³æ·¡æ·¡æ˜¯æ˜­é˜³çš„æ¢¦æƒ³ä¸æ˜¯ç±³å½©çš„ã€‚å¤§å°å§è§’è‰²ä¹‹æ‰€ä»¥è®©äººå–œæ¬¢ï¼Œæ˜¯å¥¹å®Œç¾çš„å‡ºåœºï¼Œå®Œç¾çš„å½¢è±¡ï¼Œä½œè€…æŠŠå¥¹æå†™çš„çœŸå°±åƒä¸é—®ä¿—ä¸–çš„ä»™å­ã€‚å¥¹æ²¡æœ‰ç”·å¥³æ„Ÿæƒ…ç»ç†ï¼Œæ²¡å–œæ¬¢è¿‡é™¤äº†æ˜­é˜³ä»¥å¤–çš„åˆ«äººï¼Œæ‰€ä»¥å¯¹æ„Ÿæƒ…çš„è¡¨è¾¾ä¸Šæ˜¾å¾—å¾ˆç”Ÿç–ï¼Œå¾ˆå¤šæ—¶å€™æ²¡æœ‰ä¹ç‘¶çš„æ— å¾®ä¸è‡³ã€‚ä½†è¿™ä¹Ÿæ˜¯è®©æˆ‘ä»¬ç€è¿·çš„åœ°æ–¹ï¼Œä¸€ä¸ªä¸ç†å°˜ä¸–çš„ä»™å­çªç„¶ä¸ºäº†ä½ ä¸‹å‡¡ç¬¨æ‰‹ç¬¨è„šçš„é€‚åº”ä½ çš„ä¸€åˆ‡ï¼Œæƒ³æƒ³å°±å¾ˆæ¢¦å¹»ã€‚æ‰€ä»¥å¤§å°å§ä¸èƒ½è¾œè´Ÿï¼Œå¤§å°å§ä¼—ä¸‡æ‰€å½’å’Œæ˜­é˜³åœ¨ä¸€èµ·äº†ã€‚(å¤§å°å§å‘å°±æƒ¹äººå¿ƒç–¼ã€‚ä¹ç‘¶å’Œè–‡è–‡ç®€å°±æ˜¯æ´»è¯¥ï¼Œæˆ‘åˆé…¸äº†ä¸å¥½æ„æ€)ã€‚</p><p>å››å¹´å‰ä½ æ˜¯æˆ‘çš„æˆ¿å®¢ï¼Œå››å¹´åä½ æ˜¯æˆ‘çš„å¦»å­ã€‚ç¥æ¸£é˜³å’Œæˆ¿å®¢å¤§å°å§å¹¸ç¦å§ã€‚</p><p>å››ï¼Œæ–¹åœ†å’Œé¢œå¦å¤«å¦‡</p><p>æ–¹åœ†åšä¸ºæœ¬ä¹¦æœ€é«˜å¼€ä½èµ°çš„è§’è‰²ï¼Œæˆ‘è§‰å¾—æœ€åæ´—ç™½ä¹Ÿæ²¡ä»€ä¹ˆä½œç”¨ã€‚ç®€è–‡å’Œæ˜­é˜³åˆ†æ‰‹æ–¹åœ†æ˜¯ç½ªé­ç¥¸é¦–ä¹‹ä¸€ï¼Œå·æ‹æ˜­é˜³ç»™å‘æ™¨ï¼Œè®©å‘æ™¨æŒç»­ä¸æ–­çš„ç»™ç®€è–‡çœ‹ç…§ç‰‡ã€‚è¿˜åè¿‡å¤´æ¥æœ‰æ¨¡æœ‰æ ·çš„è¯´æ˜­é˜³è¿‡çš„ä¸å¥½ä¸ä¸Šè¿›ã€‚æˆ‘å‘¸ï¼Œæ¶å¿ƒã€‚æ˜­é˜³åšä¸ºç”·ä¸»ï¼Œå¦‚æœæ²¡å’Œç®€è–‡åˆ†æ‰‹ï¼Œä»¥ä¹¦é‡Œæ˜­é˜³çš„è¶…èƒ½åŠ›ï¼Œä½ æ–¹åœ†æ˜¯ä¸ªå±å•Šã€‚è‡³äºæœ€åçš„èƒŒå›ç±³å½©ï¼Œæˆ‘è§‰å¾—æ›´åƒæ˜¯å°ä¸‘çš„é—¹å‰§ã€‚å¦å¤–åœ¨é¢œå¦å’Œæ–¹åœ†ç¦»å©šä¹‹åæœ‰å‡ æ¬¡å’Œæ˜­é˜³æ¬²è¨€åˆæ­¢çš„å¯¹è¯ä¸­ï¼Œåº”è¯¥æ˜¯å¥¹ä¹ŸçŸ¥é“æ–¹åœ†çš„æ‰€ä½œæ‰€ä¸ºã€‚è¿˜æ‹¿æ˜­é˜³å½“å¼Ÿå¼Ÿï¼Œæ‹¿ç®€è–‡å½“é—ºèœœã€‚æˆ‘ä¹Ÿåªèƒ½æ˜¯å‘µå‘µäº†ã€‚å¥½äº†å°±è¿™æ ·å§ï¼Œé…è§’è€Œå·²ä¸æ„¿æ„å¤šè¯´ï¼Œå°±åƒå‘æ™¨æˆ‘æ ¹æœ¬ä¸å†™ä»–ï¼Œä»–ä¸é…ã€‚</p><p>äº”ã€ç½—æœ¬å’ŒCCä»¥åŠå¥³æ•™å¸ˆ</p><p>è¿™å°±æ˜¯ä¸€åœºé”™è¯¯çš„å…¸èŒƒï¼Œç½—æœ¬é€‰æ‹©å’Œå‰ä»»ç»“æœé”™è¿‡äº†ã€‚å¥³æ•™å¸ˆé€‰æ‹©å’Œå‰ä»»ï¼Œæœ€åä¹Ÿå›å°å±±æ‘äº†ã€‚æ‰€ä»¥è¿™é‡Œå‘Šè¯‰æˆ‘ä»¬ï¼Œä¸èƒ½å’Œå‰ä»»å’Œå¥½ï¼Œè¦å‘å‰çœ‹ã€‚æœ€åç½—æœ¬å’Œå¥³æ­Œæ‰‹ï¼ŒCCé—ªå©šäº†ï¼Œå¥³æ•™å¸ˆé™ªèµ°äº†ä¸€ä¸ªä¹‹åæ‰¾ä¸ªäºŒå©šçš„æ•™å¸ˆã€‚æ— å…³çˆ±æƒ…ï¼Œå´ä¹Ÿæ˜¯ä¸é”™çš„ç»“å±€ï¼Œä¸æ˜¯ä¹ˆã€‚å°±åƒæ˜¯æ¿çˆ¹ä¹Ÿæ˜¯æœ‰æ•…äº‹çš„äººï¼Œæœ€åé€‰æ‹©äº†æ˜­é˜³å¦ˆå¦ˆï¼Œè¿‡çš„ä¸ä¹Ÿä¸€æ ·æŒºå¥½ä¹ˆã€‚çˆ±æƒ…æ˜¯çˆ±æƒ…ï¼Œç”Ÿæ´»æ˜¯ç”Ÿæ´»ã€‚</p><p>å…­ã€æ˜­é˜³</p><p>å…¶å®æˆ‘ä»¬å°±æ˜¯ä¸€ä¸ªåˆä¸€ä¸ªçš„æ˜­é˜³ï¼Œè™½ç„¶æ²¡æœ‰ä»–æœ‰è¶…èƒ½åŠ›ï¼Œè®©é‚£ä¹ˆå¤šå¥³æ€§çˆ±ä¸Šä»–ï¼Œè®©é’±æ¥çš„é‚£ä¹ˆå®¹æ˜“ã€‚å¯æ˜¯æˆ‘ä»¬ä¹Ÿæ˜¯è‹¦æµ·ä¸­æ²‰æµ®çš„äººã€‚ä¸è¯´äº†ï¼Œè¯»è¿‡æ‰€æœ‰é¸¡æ±¤ä¹Ÿä¸ä¸€å®šè¿‡å¥½ä¸€ç”Ÿã€‚å¦‚äººé¥®æ°´ï¼Œå†·æš–è‡ªçŸ¥ã€‚è¯´å°è¯´é‡Œäººç‰©è¡Œï¼ŒåŠå¤§å®¶æˆ‘å¼ ä¸å¼€å˜´ è¯´ç‚¹æ‹œå¹´è¯å§ï¼Œç¥å¤§å®¶éƒ½èƒ½è¿‡çš„å¹¸ç¦ã€‚</p><p>æœ€åï¼Œé™„ä¸Šä¸€é¦–è¾›å¼ƒç–¾çš„è¯ï¼Œè‡ªå·±ç†è§£ã€‚</p><p>ä¸‘å¥´å„¿Â·ä¹¦åšå±±é“ä¸­å£ [å®‹]è¾›å¼ƒç–¾</p><p>å°‘å¹´ä¸è¯†æ„æ»‹å‘³ï¼Œçˆ±ä¸Šå±‚æ¥¼ã€‚çˆ±ä¸Šå±‚æ¥¼ï¼Œä¸ºèµ‹æ–° è¯å¼ºè¯´æ„ã€‚</p><p>è€Œä»Šè¯†å°½æ„æ»‹å‘³ï¼Œæ¬²è¯´è¿˜ä¼‘ã€‚æ¬²è¯´è¿˜ä¼‘ï¼Œå´é“å¤© å‡‰å¥½ä¸ªç§‹ã€‚</p><p><img src="https://gitee.com/NorthCJ/heart/raw/master/x-6.jpg" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> æœˆæ¹–ç¬”è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é˜…è¯»å°è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tag Plugins Plus çš„æ—¥å¸¸ä½¿ç”¨</title>
      <link href="/posts/17639.html"/>
      <url>/posts/17639.html</url>
      
        <content type="html"><![CDATA[<h2 id="è¡Œå†…æ–‡æœ¬æ ·å¼-text"><a href="#è¡Œå†…æ–‡æœ¬æ ·å¼-text" class="headerlink" title="è¡Œå†…æ–‡æœ¬æ ·å¼ text"></a>è¡Œå†…æ–‡æœ¬æ ·å¼ text</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> å¸¦ &#123;% u ä¸‹åˆ’çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">2.</span> å¸¦ &#123;% emp ç€é‡å· %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">3.</span> å¸¦ &#123;% wavy æ³¢æµªçº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">4.</span> å¸¦ &#123;% del åˆ é™¤çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">5.</span> é”®ç›˜æ ·å¼çš„æ–‡æœ¬ &#123;% kbd command %&#125; + &#123;% kbd D %&#125;</span><br><span class="line"><span class="bullet">6.</span> å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š&#123;% psw è¿™é‡Œæ²¡æœ‰éªŒè¯ç  %&#125;</span><br></pre></td></tr></table></figure><ol><li>å¸¦ <u>ä¸‹åˆ’çº¿</u> çš„æ–‡æœ¬</li><li>å¸¦ <emp>ç€é‡å·</emp> çš„æ–‡æœ¬</li><li>å¸¦ <wavy>æ³¢æµªçº¿</wavy> çš„æ–‡æœ¬</li><li>å¸¦ <del>åˆ é™¤çº¿</del> çš„æ–‡æœ¬</li><li>é”®ç›˜æ ·å¼çš„æ–‡æœ¬ <kbd>command</kbd> + <kbd>D</kbd></li><li>å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š<psw>è¿™é‡Œæ²¡æœ‰éªŒè¯ç </psw></li></ol><h2 id="è¡Œå†…æ–‡æœ¬-span"><a href="#è¡Œå†…æ–‡æœ¬-span" class="headerlink" title="è¡Œå†…æ–‡æœ¬ span"></a>è¡Œå†…æ–‡æœ¬ span</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% span red, çº¢è‰² %&#125;ã€&#123;% span yellow, é»„è‰² %&#125;ã€&#123;% span green, ç»¿è‰² %&#125;ã€&#123;% span cyan, é’è‰² %&#125;ã€&#123;% span blue, è“è‰² %&#125;ã€&#123;% span gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% span center logo large, Volantis %&#125;</span><br><span class="line">&#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><p>å½©è‰²æ–‡å­— ï¼šåœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<span class='p red'>çº¢è‰²</span>ã€<span class='p yellow'>é»„è‰²</span>ã€<span class='p green'>ç»¿è‰²</span>ã€<span class='p cyan'>é’è‰²</span>ã€<span class='p blue'>è“è‰²</span>ã€<span class='p gray'>ç°è‰²</span></p><h2 id="æ®µè½æ–‡æœ¬-p"><a href="#æ®µè½æ–‡æœ¬-p" class="headerlink" title="æ®µè½æ–‡æœ¬ p"></a>æ®µè½æ–‡æœ¬ p</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% p red, çº¢è‰² %&#125;ã€&#123;% p yellow, é»„è‰² %&#125;ã€&#123;% p green, ç»¿è‰² %&#125;ã€&#123;% p cyan, é’è‰² %&#125;ã€&#123;% p blue, è“è‰² %&#125;ã€&#123;% p gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% p center logo large, Volantis %&#125;</span><br><span class="line">&#123;% p center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨-note"><a href="#å¼•ç”¨-note" class="headerlink" title="å¼•ç”¨ note"></a>å¼•ç”¨ note</h2><h3 id="simpleæ ·å¼"><a href="#simpleæ ·å¼" class="headerlink" title="simpleæ ·å¼"></a>simpleæ ·å¼</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><h3 id="modernæ ·å¼"><a href="#modernæ ·å¼" class="headerlink" title="modernæ ·å¼"></a>modernæ ·å¼</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><h3 id="flatæ ·å¼"><a href="#flatæ ·å¼" class="headerlink" title="flatæ ·å¼"></a>flatæ ·å¼</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><h3 id="disabledæ ·å¼"><a href="#disabledæ ·å¼" class="headerlink" title="disabledæ ·å¼"></a>disabledæ ·å¼</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><h3 id="no-iconæ ·å¼"><a href="#no-iconæ ·å¼" class="headerlink" title="no-iconæ ·å¼"></a>no-iconæ ·å¼</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue no-icon %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink no-icon %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red no-icon %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple no-icon %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green no-icon %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue no-icon flat"><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink no-icon flat"><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red no-icon flat"><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple no-icon flat"><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green no-icon flat"><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><h2 id="ä¸Šæ ‡æ ‡ç­¾-tip"><a href="#ä¸Šæ ‡æ ‡ç­¾-tip" class="headerlink" title="ä¸Šæ ‡æ ‡ç­¾ tip"></a>ä¸Šæ ‡æ ‡ç­¾ tip</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip %&#125;default&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip info %&#125;info&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip success %&#125;success&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip error %&#125;error&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip warning %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bolt %&#125;bolt&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban %&#125;ban&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip home %&#125;home&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip sync %&#125;sync&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip cogs %&#125;cogs&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip key %&#125;key&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bell %&#125;bell&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip fa-atom %&#125;è‡ªå®šä¹‰font awesomeå›¾æ ‡&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><div class="tip "><p>default</p></div><div class="tip info"><p>info</p></div><div class="tip success"><p>success</p></div><div class="tip error"><p>error</p></div><div class="tip warning"><p>warning</p></div><div class="tip bolt"><p>bolt</p></div><div class="tip ban"><p>ban</p></div><div class="tip home"><p>home</p></div><div class="tip sync"><p>sync</p></div><div class="tip cogs"><p>cogs</p></div><div class="tip key"><p>key</p></div><div class="tip bell"><p>bell</p></div><div class="tip fa-atom"><p>è‡ªå®šä¹‰font awesomeå›¾æ ‡</p></div><h2 id="åŠ¨æ€æ ‡ç­¾-anima"><a href="#åŠ¨æ€æ ‡ç­¾-anima" class="headerlink" title="åŠ¨æ€æ ‡ç­¾ anima"></a>åŠ¨æ€æ ‡ç­¾ anima</h2><h3 id="å½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»"><a href="#å½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»" class="headerlink" title="å½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»"></a>å½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div><h3 id="è°ƒæ•´åŠ¨ç”»é€Ÿåº¦"><a href="#è°ƒæ•´åŠ¨ç”»é€Ÿåº¦" class="headerlink" title="è°ƒæ•´åŠ¨ç”»é€Ÿåº¦"></a>è°ƒæ•´åŠ¨ç”»é€Ÿåº¦</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated faa-fast %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated faa-slow %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><div class="tip warning faa-horizontal animated faa-fast"><p>warning</p></div><div class="tip ban faa-flash animated faa-slow"><p>ban</p></div><h3 id="å½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»"><a href="#å½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»" class="headerlink" title="å½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»"></a>å½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated-hover %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated-hover %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><div class="tip warning faa-horizontal animated-hover"><p>warning</p></div><div class="tip ban faa-flash animated-hover"><p>ban</p></div><h3 id="å½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»"><a href="#å½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»" class="headerlink" title="å½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»"></a>å½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-horizontal&quot;</span>&gt;</span></span>warning<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-flash&quot;</span>&gt;</span></span>ban<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">warning</p></div><div class="tip ban faa-parent animated-hover"><p class="faa-flash">ban</p></div><h2 id="å¤é€‰åˆ—è¡¨-checkbox"><a href="#å¤é€‰åˆ—è¡¨-checkbox" class="headerlink" title="å¤é€‰åˆ—è¡¨ checkbox"></a>å¤é€‰åˆ—è¡¨ checkbox</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% checkbox checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% checkbox red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% checkbox green checked, ç»¿è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox yellow checked, é»„è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox cyan checked, é’è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox blue checked, è“è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox plus green checked, å¢åŠ  %&#125;</span><br><span class="line">&#123;% checkbox minus yellow checked, å‡å°‘ %&#125;</span><br><span class="line">&#123;% checkbox times red checked, å‰ %&#125;</span><br></pre></td></tr></table></figure><div class='checkbox'><input type="checkbox" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç»¿è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>é»„è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>é’è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>è“è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>å¢åŠ </p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>å‡å°‘</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>å‰</p>            </div><h2 id="å•é€‰åˆ—è¡¨-radio"><a href="#å•é€‰åˆ—è¡¨-radio" class="headerlink" title="å•é€‰åˆ—è¡¨ radio"></a>å•é€‰åˆ—è¡¨ radio</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% radio checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% radio red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% radio green, ç»¿è‰² %&#125;</span><br><span class="line">&#123;% radio yellow, é»„è‰² %&#125;</span><br><span class="line">&#123;% radio cyan, é’è‰² %&#125;</span><br><span class="line">&#123;% radio blue, è“è‰² %&#125;</span><br></pre></td></tr></table></figure><p>å‚æ•°é…ç½®</p><ol><li>é¢œè‰²: red,yellow,green,cyan,blue,gray</li><li>é€‰ä¸­çŠ¶æ€: checked</li></ol><div class='checkbox'><input type="radio" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="radio" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green'><input type="radio" />            <p>ç»¿è‰²</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>é»„è‰²</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>é’è‰²</p>            </div><div class='checkbox blue'><input type="radio" />            <p>è“è‰²</p>            </div><h2 id="æ—¶é—´è½´-timeline"><a href="#æ—¶é—´è½´-timeline" class="headerlink" title="æ—¶é—´è½´ timeline"></a>æ—¶é—´è½´ timeline</h2><table><thead><tr><th align="left">å‚æ•°</th><th align="left">è§£é‡Š</th></tr></thead><tbody><tr><td align="left">title</td><td align="left">æ ‡é¢˜&#x2F;æ—¶é—´çº¿</td></tr><tr><td align="left">color</td><td align="left"><code>timeline</code>é¢œè‰²:default(ç•™ç©º) &#x2F; blue &#x2F; pink &#x2F; red &#x2F; purple &#x2F; orange &#x2F; green</td></tr></tbody></table><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´è½´æ ·å¼,blue %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-07-24 [<span class="string">2.6.6 -&gt; 3.0</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å¦‚æœæœ‰ <span class="code">`hexo-lazyload-image`</span> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <span class="code">`lazyload.isSPA: true`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> 2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <span class="code">`use_cdn: true`</span> åˆ™éœ€è¦åˆ é™¤ã€‚</span><br><span class="line"><span class="bullet">3.</span> 2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</span><br><span class="line"><span class="bullet">4.</span> 2.x ç‰ˆæœ¬çš„ç½®é¡¶ <span class="code">`top: true`</span> æ”¹ä¸ºäº† <span class="code">`pin: true`</span>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <span class="code">`layout: page`</span> çš„é¡µé¢ã€‚</span><br><span class="line"><span class="bullet">5.</span> å¦‚æœä½¿ç”¨äº† <span class="code">`hexo-offline`</span> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-05-15 [<span class="string">2.6.3 -&gt; 2.6.6</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6</span>) --&gt;</span><br><span class="line"></span><br><span class="line">ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-04-20 [<span class="string">2.6.2 -&gt; 2.6.3</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å…¨å±€æœç´¢ <span class="code">`seotitle`</span> å¹¶æ›¿æ¢ä¸º <span class="code">`seo_title`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<span class="code">`group: group_name`</span> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <span class="code">`group_name`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <span class="code">`short_title`</span> å…¶æ¬¡æ˜¯ <span class="code">`title`</span>ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>æ—¶é—´è½´æ ·å¼</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-07-24 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases">2.6.6 -&gt; 3.0</a></p></div></div><div class='timeline-item-content'><ol><li>å¦‚æœæœ‰ <code>hexo-lazyload-image</code> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <code>lazyload.isSPA: true</code>ã€‚</li><li>2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <code>use_cdn: true</code> åˆ™éœ€è¦åˆ é™¤ã€‚</li><li>2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</li><li>2.x ç‰ˆæœ¬çš„ç½®é¡¶ <code>top: true</code> æ”¹ä¸ºäº† <code>pin: true</code>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <code>layout: page</code> çš„é¡µé¢ã€‚</li><li>å¦‚æœä½¿ç”¨äº† <code>hexo-offline</code> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-05-15 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6">2.6.3 -&gt; 2.6.6</a></p></div></div><div class='timeline-item-content'><p>ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-04-20 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3">2.6.2 -&gt; 2.6.3</a></p></div></div><div class='timeline-item-content'><ol><li>å…¨å±€æœç´¢ <code>seotitle</code> å¹¶æ›¿æ¢ä¸º <code>seo_title</code>ã€‚</li><li>group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<code>group: group_name</code> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <code>group_name</code>ã€‚</li><li>group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <code>short_title</code> å…¶æ¬¡æ˜¯ <code>title</code>ã€‚</li></ol></div></div></div><h2 id="è¡Œå†…å›¾ç‰‡"><a href="#è¡Œå†…å›¾ç‰‡" class="headerlink" title="è¡Œå†…å›¾ç‰‡"></a>è¡Œå†…å›¾ç‰‡</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ &#123;% inlineimage https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/5150.gif %&#125; ä¸€æ®µè¯ã€‚</span><br><span class="line"></span><br><span class="line">è¿™åˆæ˜¯ &#123;% inlineimage https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/5150.gif, height=40px %&#125; ä¸€æ®µè¯ã€‚</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ <img no-lazy class="inline" src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/5150.gif" style="height:1.5em"/> ä¸€æ®µè¯ã€‚</p><p>è¿™åˆæ˜¯ <img no-lazy class="inline" src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/5150.gif" style="height:40px;"/> ä¸€æ®µè¯ã€‚</p><h2 id="è§†é¢‘-video"><a href="#è§†é¢‘-video" class="headerlink" title="è§†é¢‘ video"></a>è§†é¢‘ video</h2><h3 id="100-å®½åº¦"><a href="#100-å®½åº¦" class="headerlink" title="100%å®½åº¦"></a>100%å®½åº¦</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br></pre></td></tr></table></figure><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>### 50%å®½åº¦<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 2 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><div class="videos" col='2'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div><h3 id="25-å®½åº¦"><a href="#25-å®½åº¦" class="headerlink" title="25%å®½åº¦"></a>25%å®½åº¦</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 4 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><div class="videos" col='4'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div><h2 id="æŠ˜å æ¡†-folding"><a href="#æŠ˜å æ¡†-folding" class="headerlink" title="æŠ˜å æ¡† folding"></a>æŠ˜å æ¡† folding</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† %&#125;</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, æŸ¥çœ‹ä»£ç æµ‹è¯• %&#125;</span><br><span class="line">å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> haha</span><br><span class="line"><span class="bullet">-</span> hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, æŸ¥çœ‹åµŒå¥—æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding blue, æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;height:24px&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><details class="folding-tag" ><summary> æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg"></p>              </div>            </details><details class="folding-tag" cyan open><summary> æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† </summary>              <div class='content'>              <p>è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</p>              </div>            </details><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç æµ‹è¯• </summary>              <div class='content'>              <p>å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</p>              </div>            </details><details class="folding-tag" yellow><summary> æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details class="folding-tag" red><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯• </summary>              <div class='content'>              <details class="folding-tag" blue><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 </summary>              <div class='content'>              <details class="folding-tag" ><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png' style='height:24px'></span></p>              </div>            </details>              </div>            </details>              </div>            </details><h2 id="åˆ†æ -tab"><a href="#åˆ†æ -tab" class="headerlink" title="åˆ†æ  tab"></a>åˆ†æ  tab</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab ç¬¬ä¸€ä¸ªTab --&gt;</span><br><span class="line"><span class="strong">**tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab ç‚¸å¼¹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**åå­—+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="test4"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test4-1">ç¬¬ä¸€ä¸ªTab</button><button type="button" class="tab " data-href="test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button><button type="button" class="tab " data-href="test4-3"><i class="fas fa-bomb"></i>ç‚¸å¼¹</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p></div><div class="tab-item-content" id="test4-2"><p><strong>åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—</strong></p></div><div class="tab-item-content" id="test4-3"><p><strong>åå­—+icon</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h2 id="è¯—è¯æ ‡ç­¾-poem"><a href="#è¯—è¯æ ‡ç­¾-poem" class="headerlink" title="è¯—è¯æ ‡ç­¾ poem"></a>è¯—è¯æ ‡ç­¾ poem</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% poem æ°´è°ƒæ­Œå¤´,è‹è½¼ %&#125;</span><br><span class="line">ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚</span><br><span class="line">æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚</span><br><span class="line">ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ</span><br><span class="line">æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚</span><br><span class="line">èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</span><br><span class="line"></span><br><span class="line">è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚</span><br><span class="line">ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ</span><br><span class="line">äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚</span><br><span class="line">ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</span><br><span class="line">&#123;% endpoem %&#125;</span><br></pre></td></tr></table></figure><div class='poem'><div class='poem-title'>æ°´è°ƒæ­Œå¤´</div><div class='poem-author'>è‹è½¼</div><p>ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚<br>æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚<br>ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ<br>æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚<br>èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</p><p>è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚<br>ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ<br>äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚<br>ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</p></div><h2 id="è¿›åº¦æ¡-progress"><a href="#è¿›åº¦æ¡-progress" class="headerlink" title="è¿›åº¦æ¡ progress"></a>è¿›åº¦æ¡ progress</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress 10 red è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 30 yellow è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 50 green è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 70 cyan è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 90 blue è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 100 gray è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br></pre></td></tr></table></figure><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-cyan"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue"  style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterflyä¸»é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ npm å®‰è£… Tag Plugins Plus</title>
      <link href="/posts/49186.html"/>
      <url>/posts/49186.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ’ä»¶å®‰è£…"><a href="#æ’ä»¶å®‰è£…" class="headerlink" title="æ’ä»¶å®‰è£…"></a>æ’ä»¶å®‰è£…</h2><p>å®‰è£…æ’ä»¶,åœ¨åšå®¢æ ¹ç›®å½•<code>[Blogroot]</code>ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-tag-plugins-plus --save</span><br></pre></td></tr></table></figure><p>è€ƒè™‘åˆ°hexoè‡ªå¸¦çš„markdownæ¸²æŸ“æ’ä»¶<code>hexo-renderer-marked</code>ä¸å¤–æŒ‚æ ‡ç­¾è¯­æ³•çš„å…¼å®¹æ€§è¾ƒå·®ï¼Œå»ºè®®æ‚¨å°†å…¶æ›¿æ¢æˆ<a href="https://www.npmjs.com/package/hexo-renderer-kramed">hexo-renderer-kramed</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ é…ç½®ä¿¡æ¯"><a href="#æ·»åŠ é…ç½®ä¿¡æ¯" class="headerlink" title="æ·»åŠ é…ç½®ä¿¡æ¯"></a>æ·»åŠ é…ç½®ä¿¡æ¯</h2><p>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶<code>_config.yml</code>æˆ–è€…ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ä¸­æ·»åŠ </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tag-plugins-plus</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/615e2dec/</span></span><br><span class="line"><span class="attr">tag_plugins:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># å¼€å…³</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#è¿‡æ»¤å™¨ä¼˜å…ˆæƒ</span></span><br><span class="line">  <span class="attr">issues:</span> <span class="literal">false</span> <span class="comment">#issuesæ ‡ç­¾ä¾èµ–æ³¨å…¥å¼€å…³</span></span><br><span class="line">  <span class="attr">link:</span></span><br><span class="line">    <span class="attr">placeholder:</span> <span class="string">/img/link.png</span> <span class="comment">#link_cardæ ‡ç­¾é»˜è®¤çš„å›¾æ ‡å›¾ç‰‡</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br><span class="line">    <span class="attr">anima:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css</span> <span class="comment">#åŠ¨ç”»æ ‡ç­¾animaçš„ä¾èµ–</span></span><br><span class="line">    <span class="attr">jquery:</span> <span class="string">https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js</span> <span class="comment">#issuesæ ‡ç­¾ä¾èµ–</span></span><br><span class="line">    <span class="attr">issues:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/issues.js</span> <span class="comment">#issuesæ ‡ç­¾ä¾èµ–</span></span><br><span class="line">    <span class="attr">iconfont:</span> <span class="string">//at.alicdn.com/t/font_2032782_8d5kxvn09md.js</span> <span class="comment">#å‚çœ‹https://akilar.top/posts/d2ebecef/</span></span><br><span class="line">    <span class="attr">carousel:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js</span></span><br><span class="line">    <span class="attr">tag_plugins_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css</span></span><br></pre></td></tr></table></figure><h2 id="å‚æ•°é‡Šä¹‰"><a href="#å‚æ•°é‡Šä¹‰" class="headerlink" title="å‚æ•°é‡Šä¹‰"></a>å‚æ•°é‡Šä¹‰</h2><table><thead><tr><th align="left">å‚æ•°</th><th align="left">å¤‡é€‰å€¼&#x2F;ç±»å‹</th><th align="left">é‡Šä¹‰</th></tr></thead><tbody><tr><td align="left">enable</td><td align="left">true&#x2F;false</td><td align="left">ã€å¿…é€‰ã€‘æ§åˆ¶å¼€å…³</td></tr><tr><td align="left">priority</td><td align="left">number</td><td align="left">ã€å¯é€‰ã€‘è¿‡æ»¤å™¨ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå°ï¼Œæ‰§è¡Œè¶Šæ—©ï¼Œé»˜è®¤ä¸º10ï¼Œé€‰å¡«</td></tr><tr><td align="left">issues</td><td align="left">true&#x2F;false</td><td align="left">ã€å¯é€‰ã€‘issuesæ ‡ç­¾æ§åˆ¶å¼€å…³ï¼Œé»˜è®¤ä¸ºfalse</td></tr><tr><td align="left">link.placeholder</td><td align="left">ã€å¿…é€‰ã€‘linkå¡ç‰‡å¤–æŒ‚æ ‡ç­¾çš„é»˜è®¤å›¾æ ‡</td><td align="left"></td></tr><tr><td align="left">CDN.anima</td><td align="left">URL</td><td align="left">ã€å¯é€‰ã€‘åŠ¨ç”»æ ‡ç­¾animaçš„ä¾èµ–</td></tr><tr><td align="left">CDN.jquery</td><td align="left">URL</td><td align="left">ã€å¯é€‰ã€‘issuesæ ‡ç­¾ä¾èµ–</td></tr><tr><td align="left">CDN.issues</td><td align="left">URL</td><td align="left">ã€å¯é€‰ã€‘issuesæ ‡ç­¾ä¾èµ–</td></tr><tr><td align="left">CDN.iconfont</td><td align="left">URL</td><td align="left">ã€å¯é€‰ã€‘iconfontæ ‡ç­¾symbolæ ·å¼å¼•å…¥ï¼Œå¦‚æœä¸æƒ³å¼•å…¥ï¼Œåˆ™è®¾ä¸ºfalse</td></tr><tr><td align="left">CDN.carousel</td><td align="left">URL</td><td align="left">ã€å¯é€‰ã€‘carouselæ—‹è½¬ç›¸å†Œæ ‡ç­¾é¼ æ ‡æ‹–åŠ¨ä¾èµ–ï¼Œå¦‚æœä¸æƒ³å¼•å…¥åˆ™è®¾ä¸ºfalse</td></tr><tr><td align="left">CDN.tag_plugins_css</td><td align="left">URL</td><td align="left">ã€å¯é€‰ã€‘å¤–æŒ‚æ ‡ç­¾æ ·å¼çš„CSSä¾èµ–ï¼Œä¸ºé¿å…CDNç¼“å­˜å»¶è¿Ÿï¼Œå»ºè®®å°†@latestæ”¹ä¸ºå…·ä½“ç‰ˆæœ¬å·</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterflyä¸»é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬4ç«  æ–‡ä»¶å†…å®¹æŸ¥çœ‹</title>
      <link href="/posts/13783.html"/>
      <url>/posts/13783.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="tip success faa-horizontal animated"><p> é‚£ä¸ªè€ä¹¦ç”Ÿè¯´ï¼Œæˆ‘ä»¬æ´»åœ¨ä¸€ä¸ªå¾ˆå¤æ‚çš„ä¸–é“é‡Œï¼Œå¾ˆå¤šäººçš„è¨€è¡Œï¼Œå“ªæ€•æ˜¯å­¦é—®æé«˜çš„è¯»ä¹¦äººï¼Œè¿˜æ˜¯ä¼šè‡ªç›¸çŸ›ç›¾ï¼Œæˆ‘ä»¬çœ‹å¤šäº†æ²¡ç”šé“ç†çš„äº‹æƒ…ï¼Œéš¾å…ä¼šé—®ï¼Œæ˜¯ä¸æ˜¯ä¹¦ä¸Šçš„é“ç†ï¼Œæ˜¯é”™çš„ï¼Œæˆ–è€…è¯´ï¼Œæ˜¯é‚£äº›é“ç†è¿˜æ²¡æœ‰è¯´é€ï¼Œæ²¡æœ‰è¯´å…¨ã€‚â€<br>â€œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬è¯¥æ€ä¹ˆçœ‹å¾…è¿™ä¸ªè®¸å¤šå˜´ä¸Šè®²é“ç†ã€åšäº‹æ²¡é“ç†çš„ä¸–ç•Œï¼ŸåŠæ³•æ˜¯æœ‰çš„ï¼Œä¸€ç§æ˜¯æ´»å¾—çº¯ç²¹ï¼Œæˆ‘æ‹³å¤´å¾ˆç¡¬ï¼Œå‰‘æœ¯å¾ˆå¼ºï¼Œé“æ³•å¾ˆå¼ºï¼Œå°±ç”¨è¿™äº›æ¥æ‰“ç ´ä¸€äº›ä¸œè¥¿ã€‚å¤æ‚é—®é¢˜ç»™ç®€å•è§£å†³æ‰ï¼Œåªè¦æˆ‘å¼€å¿ƒå°±å¥½ã€‚å¤©åœ°æœ‰è§„çŸ©çº¦æŸæˆ‘ï¼Œæˆ‘ä¾¿ä¸€æ‹³æ‰“ç ´ï¼Œä¸–é—´æœ‰å¤§é“å‹æˆ‘ï¼Œæˆ‘æœ‰ä¸€å‰‘ç ´ä¸‡æ³•ã€‚å“ªæ€•æš‚æ—¶åšåˆ°å¦‚æ­¤é…£ç•…æ·‹æ¼“ï¼Œå¯æ€»æ˜¯å¦‚æ­¤æƒ³ï¼Œåšå®šä¸ç§»ï¼Œä¸€ç›´æœè¿™ä¸ªæ–¹å‘èµ°åœ¨é“è·¯ä¸Šã€‚è¿™ç§äººå¯ä»¥æœ‰ï¼Œä½†æ˜¯ä¸èƒ½äººäººå¦‚æ­¤çš„ã€‚â€ä¸€ç§æ˜¯æ´»å¾—å¾ˆèªæ˜ï¼Œæ€ä¹ˆçœå¿ƒçœåŠ›æ€ä¹ˆæ¥ï¼Œè§„çŸ©äºŒå­—ï¼Œå°±æ˜¯ç”¨æ¥é’»æ¼æ´çš„</p></div><a href="https://www.bilibili.com/video/BV1Nb421a7TV/?spm_id_from=333.999.list.card_archive.click">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/20240815134316.png"></a><p>æŸ¥çœ‹æ–‡ä»¶å†…å®¹çš„å¸¸è§å‘½ä»¤</p><ul><li>cat</li><li>more å’Œ less</li><li>head å’Œ tail</li><li>nl</li><li>tailf</li></ul><h1 id="catå‘½ä»¤"><a href="#catå‘½ä»¤" class="headerlink" title="catå‘½ä»¤"></a>catå‘½ä»¤</h1><p>è¯­æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æ³•ï¼šcat [é€‰é¡¹]... [æ–‡ä»¶]...</span><br><span class="line"></span><br><span class="line">å¸¸ç”¨é€‰é¡¹ï¼š</span><br><span class="line">  -n, å¯¹è¾“å‡ºçš„æ‰€æœ‰è¡Œç¼–å·</span><br><span class="line">  -b, å¯¹è¾“å‡ºçš„æ‰€æœ‰è¡Œç¼–å·ï¼ˆä¸å«ç©ºç™½è¡Œï¼‰</span><br><span class="line">  -t, å°†åˆ¶è¡¨ç¬¦(tab)æ˜¾ç¤ºä¸º^I</span><br><span class="line">  -e, åœ¨æ¯è¡Œç»“æŸå¤„æ˜¾ç¤º&quot;$&quot;</span><br><span class="line">  -s, å½“è¿ç»­ç©ºç™½è¡Œæ•°é‡å¤§äº1æ—¶ï¼Œåˆå¹¶ä¸º1ä¸ªç©ºç™½è¡Œ</span><br></pre></td></tr></table></figure><p><strong>catå‘½ä»¤ä¼šä¸€æ¬¡æ€§å°†æ–‡ä»¶çš„å®Œæ•´å†…å®¹å…¨éƒ¨æ˜¾ç¤ºå‡ºæ¥ï¼Œä¸é€‚åˆå¤§æ–‡ä»¶ã€‚</strong></p><p>æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat HelloWorld.java</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰å†…å®¹ï¼Œå¹¶ä¸”æ·»åŠ è¡Œå·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -n HelloWorld.java</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰å†…å®¹ï¼Œæ·»åŠ è¡Œå·ï¼Œä½†ç©ºç™½è¡Œä¸åŠ è¡Œå·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -b HelloWorld.java</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰å†…å®¹ï¼Œå°†åˆ¶è¡¨ç¬¦æ˜¾ç¤ºä¸º^I</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -t HelloWorld.java</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰å†…å®¹ï¼Œåœ¨æ¯è¡Œç»“æŸå¤„æ˜¾ç¤ºâ€$â€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -e HelloWorld.java</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰å†…å®¹ï¼Œåˆå¹¶å¤šä¸ªè¿ç»­çš„ç©ºç™½è¡Œä¸º1ä¸ªç©ºç™½è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -s HelloWorld.java</span><br></pre></td></tr></table></figure><p>ä¸€æ¬¡æŸ¥çœ‹å¤šä¸ªæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat a.txt b.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨catåˆå¹¶æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat a.txt b.txt &gt; c.txt</span><br></pre></td></tr></table></figure><p>åŠ ä¸Šè¡Œå·ä¹‹åè¾“å‡ºåˆ°å¦ä¸€ä¸ªæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -n HelloWorld.java &gt; HelloWorld2.java</span><br></pre></td></tr></table></figure><p>æ¸…ç©ºæ–‡ä»¶å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /dev/null &gt; HelloWorld.java</span><br></pre></td></tr></table></figure><h1 id="moreå‘½ä»¤"><a href="#moreå‘½ä»¤" class="headerlink" title="moreå‘½ä»¤"></a>moreå‘½ä»¤</h1><p>moreå‘½ä»¤å’Œcatå‘½ä»¤çš„ç›¸åŒç‚¹å’Œä¸åŒç‚¹ï¼š</p><ul><li>ç›¸åŒç‚¹ï¼šmoreå’Œcatåœ¨å¼€å§‹è¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œéƒ½æ˜¯ä¸€æ¬¡æ€§çš„å°†æ–‡ä»¶å…¨éƒ¨å†…å®¹è£…è½½åˆ°ç¼“å­˜ä¸­ã€‚</li><li>ä¸åŒç‚¹ï¼šcatæ˜¯ä¸€æ¬¡æ€§çš„å…¨éƒ¨è¾“å‡ºæ‰“å°ã€‚moreå¯ä»¥è¿›è¡Œéƒ¨åˆ†æ‰“å°ï¼ˆä¸€å±ä¸€å±çš„æ‰“å°ï¼‰ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æ³•ï¼š</span><br><span class="line"> more [é€‰é¡¹] &lt;æ–‡ä»¶&gt;...</span><br><span class="line"></span><br><span class="line">å¸¸ç”¨é€‰é¡¹ï¼š</span><br><span class="line"> -&lt;number&gt;  æ¯ä¸ªå±å¹•çš„è¡Œæ•°</span><br><span class="line"> +&lt;number&gt;  ä»è¡Œå·å¼€å§‹æ˜¾ç¤ºæ–‡ä»¶</span><br><span class="line"> +/&lt;pattern&gt;  ä»åŒ¹é…çš„ä½ç½®å‰ä¸¤è¡Œå¼€å§‹æ˜¾ç¤ºå†…å®¹</span><br><span class="line"> -p  ä»¥æ¸…é™¤åŸå†…å®¹çš„æ–¹å¼è¿›è¡Œç¿»é¡µã€‚</span><br><span class="line"> </span><br><span class="line">å¸¸ç”¨æ“ä½œï¼š</span><br><span class="line">  å›è½¦é”®        ã€æ˜¾ç¤ºä¸‹ä¸€è¡Œã€‘</span><br><span class="line">  ç©ºæ ¼é”®        ã€æ˜¾ç¤ºä¸‹ä¸€é¡µã€‘</span><br><span class="line">  ctrl + b     ã€æ˜¾ç¤ºä¸Šä¸€é¡µã€‘</span><br><span class="line">  =            ã€æ˜¾ç¤ºè¡Œå·ã€‘</span><br><span class="line">  :f           ã€æ˜¾ç¤ºæ–‡ä»¶åçš„åŒæ—¶æ˜¾ç¤ºè¡Œå·ã€‘</span><br><span class="line">  q            ã€é€€å‡ºmoreå‘½ä»¤ã€‘</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰æ—¥å¿—æ–‡ä»¶ï¼šlog.txtï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">2021.10.1 zhangsan</span><br><span class="line">2021.10.2 lisi</span><br><span class="line">2021.10.3 wangwu</span><br><span class="line">2021.10.4 zhaoliu</span><br><span class="line">2021.10.5 admin</span><br><span class="line">2021.10.6 zhangsan</span><br><span class="line">2021.10.7 lisi</span><br><span class="line">2021.10.8 wangwu</span><br><span class="line">2021.10.9 zhaoliu</span><br><span class="line">2021.10.10 qianqi</span><br><span class="line">2021.10.11 zhouyu</span><br><span class="line">2021.10.12 huanggai</span><br><span class="line">2021.10.13 zhugeliang</span><br><span class="line">2021.10.14 simayi</span><br><span class="line">2021.10.15 maimaiti</span><br><span class="line">2021.10.16 erdaye</span><br><span class="line">2021.10.17 sandaye</span><br><span class="line">2021.10.18 zhangsan</span><br><span class="line">2021.10.19 lisi</span><br><span class="line">2021.10.20 wangwu</span><br><span class="line">2021.10.21 zhaoliu</span><br><span class="line">2021.10.22 qianqi</span><br><span class="line">2021.10.23 zhoubapi</span><br><span class="line">2021.10.24 doudizhu</span><br><span class="line">2021.10.25 nongmin</span><br><span class="line">2021.10.26 sunwukong</span><br><span class="line">2021.10.27 zhubajie</span><br><span class="line">2021.10.28 shaseng</span><br><span class="line">2021.10.29 wujing</span><br><span class="line">2021.10.30 baigujing</span><br><span class="line">2021.10.31 java</span><br><span class="line">2021.11.1 oracle</span><br><span class="line">2021.11.2 mysql</span><br><span class="line">2021.11.3 jdbc</span><br><span class="line">2021.11.4 servlet</span><br><span class="line">2021.11.5 jsp</span><br><span class="line">2021.11.6 spring</span><br><span class="line">2021.11.7 mybatis</span><br><span class="line">2021.11.8 springmvc</span><br><span class="line">2021.11.9 web</span><br><span class="line">2021.11.10 html</span><br><span class="line">2021.11.11 css</span><br><span class="line">2021.11.12 java</span><br><span class="line">2021.11.13 sun</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹1ï¼šä»ç¬¬3è¡Œèµ·ï¼ŒæŸ¥çœ‹æ–‡ä»¶å†…å®¹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more +3 log.txt</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹2ï¼šæ¯å±æ˜¾ç¤º4æ¡è®°å½•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more -4 log.txt</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹3ï¼šä»æ–‡ä»¶ä¸­æŸ¥æ‰¾â€javaâ€å­—ç¬¦ä¸²çš„è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more +/java log.txt</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹4ï¼šæŸ¥çœ‹è¿›ç¨‹ï¼Œæ¯5æ¡ä¸ºä¸€å±ï¼Œç¿»å±æ—¶æ¸…ç©ºåŸå†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | more -5 -p</span><br></pre></td></tr></table></figure><h1 id="lesså‘½ä»¤"><a href="#lesså‘½ä»¤" class="headerlink" title="lesså‘½ä»¤"></a>lesså‘½ä»¤</h1><p>less å·¥å…·ä¹Ÿæ˜¯å¯¹æ–‡ä»¶æˆ–å…¶å®ƒè¾“å‡ºè¿›è¡Œåˆ†é¡µæ˜¾ç¤ºçš„å·¥å…·ï¼Œåº”è¯¥è¯´æ˜¯linuxæ­£ç»ŸæŸ¥çœ‹æ–‡ä»¶å†…å®¹çš„å·¥å…·ï¼ŒåŠŸèƒ½æå…¶å¼ºå¤§ã€‚less çš„ç”¨æ³•æ¯”èµ· more æ›´åŠ çš„æœ‰å¼¹æ€§ã€‚ä½¿ç”¨less æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ [pageup] [pagedown] ç­‰æŒ‰é”®çš„åŠŸèƒ½æ¥å¾€å‰å¾€åç¿»çœ‹æ–‡ä»¶ï¼Œæ›´å®¹æ˜“ç”¨æ¥æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ less ä¸­å¯ä»¥æ‹¥æœ‰æ›´å¤šçš„æœç´¢åŠŸèƒ½ã€‚</p><h2 id="lesså‘½ä»¤ç”¨æ³•"><a href="#lesså‘½ä»¤ç”¨æ³•" class="headerlink" title="lesså‘½ä»¤ç”¨æ³•"></a>lesså‘½ä»¤ç”¨æ³•</h2><p>æœ‰è¿™æ ·çš„ä¸€ä¸ªæ–‡ä»¶ï¼šusernames.txt</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">ZHANGSAN</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">ZHANGSAN</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br><span class="line">zhangsan</span><br><span class="line">lisi</span><br><span class="line">wangwu</span><br><span class="line">zhaoliu</span><br><span class="line">sunwukong</span><br><span class="line">zhubajie</span><br><span class="line">wusong</span><br><span class="line">linchong</span><br><span class="line">huanggai</span><br><span class="line">songjiang</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æ³•ï¼šless [é€‰é¡¹] æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">å¸¸ç”¨é€‰é¡¹ï¼š</span><br><span class="line">-g  åªæ ‡å¿—å½“å‰æœç´¢åˆ°çš„å…³é”®è¯æ‰€åœ¨è¡Œ</span><br><span class="line">-I  å¿½ç•¥æœç´¢æ—¶çš„å¤§å°å†™ï¼ˆæ³¨æ„ï¼šæ˜¯å¤§å†™Iï¼‰</span><br><span class="line">-m  æ˜¾ç¤ºç±»ä¼¼moreå‘½ä»¤çš„ç™¾åˆ†æ¯”</span><br><span class="line">-N  æ˜¾ç¤ºæ¯è¡Œçš„è¡Œå·</span><br><span class="line">+num ä»ç¬¬numè¡Œå¼€å§‹æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">å¸¸ç”¨æ“ä½œï¼š</span><br><span class="line">/å­—ç¬¦ä¸²ï¼šå‘ä¸‹æœç´¢â€œå­—ç¬¦ä¸²â€çš„åŠŸèƒ½</span><br><span class="line">?å­—ç¬¦ä¸²ï¼šå‘ä¸Šæœç´¢â€œå­—ç¬¦ä¸²â€çš„åŠŸèƒ½</span><br><span class="line"></span><br><span class="line">nï¼šé‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰</span><br><span class="line">Nï¼šåå‘é‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰</span><br><span class="line"></span><br><span class="line">y  å‘å‰æ»šåŠ¨ä¸€è¡Œ</span><br><span class="line">å›è½¦é”® å‘åæ»šåŠ¨ä¸€è¡Œ</span><br><span class="line"></span><br><span class="line">u  å‘å‰æ»šåŠ¨åŠé¡µ</span><br><span class="line">d  å‘åæ»šåŠ¨åŠé¡µ</span><br><span class="line"></span><br><span class="line">b  å‘å‰ç¿»ä¸€é¡µ</span><br><span class="line">ç©ºæ ¼é”® å‘åç¿»ä¸€é¡µ</span><br><span class="line"></span><br><span class="line">g  ç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œ</span><br><span class="line">G  ç§»åŠ¨åˆ°æœ€åä¸€è¡Œ</span><br><span class="line"></span><br><span class="line">= æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼ˆç¬¬å‡ è¡Œï¼Œå…±å¤šå°‘è¡Œï¼Œå†…å®¹çš„å­—èŠ‚æ•°é‡ç­‰ï¼‰</span><br><span class="line"></span><br><span class="line">v  ä½¿ç”¨vimç¼–è¾‘å™¨è¿›è¡Œç¼–è¾‘</span><br><span class="line"></span><br><span class="line">q  é€€å‡ºless å‘½ä»¤</span><br><span class="line"></span><br><span class="line">[pagedown] å‘ä¸‹ç¿»åŠ¨ä¸€é¡µ</span><br><span class="line">[pageup] å‘ä¸Šç¿»åŠ¨ä¸€é¡µ</span><br></pre></td></tr></table></figure><h2 id="lesså‘½ä»¤æ ‡è®°å…´è¶£ç‚¹"><a href="#lesså‘½ä»¤æ ‡è®°å…´è¶£ç‚¹" class="headerlink" title="lesså‘½ä»¤æ ‡è®°å…´è¶£ç‚¹"></a>lesså‘½ä»¤æ ‡è®°å…´è¶£ç‚¹</h2><p>åœ¨æ„Ÿå…´è¶£çš„ä½ç½®æ·»åŠ æ ‡è®°ï¼š</p><ul><li>å…ˆæŒ‰mé”® (set mark)</li><li>è¾“å…¥æ ‡è®°åç§°ï¼Œä¾‹å¦‚æ ‡è®°åå­—ä¸ºï¼šx</li></ul><p>éœ€è¦å›åˆ°æ„Ÿå…´è¶£çš„ä½ç½®æ—¶ï¼š</p><ul><li>å…ˆæŒ‰ â€˜ é”® (goto mark)</li><li>è¾“å…¥æ ‡è®°åç§° x</li></ul><h2 id="lesså‘½ä»¤å®æ—¶ç›‘æ§æ–‡ä»¶åŠ¨æ€å˜åŒ–"><a href="#lesså‘½ä»¤å®æ—¶ç›‘æ§æ–‡ä»¶åŠ¨æ€å˜åŒ–" class="headerlink" title="lesså‘½ä»¤å®æ—¶ç›‘æ§æ–‡ä»¶åŠ¨æ€å˜åŒ–"></a>lesså‘½ä»¤å®æ—¶ç›‘æ§æ–‡ä»¶åŠ¨æ€å˜åŒ–</h2><p>ç¬¬ä¸€æ­¥ï¼šåœ¨çª—å£1ä¸­æ‰§è¡Œï¼šless +F log.txt<br>ç¬¬äºŒæ­¥ï¼šåœ¨çª—å£2ä¸­æ‰§è¡Œï¼šps -ef &gt;&gt; log.txt</p><p>æ³¨æ„ï¼šåœ¨ç›‘æ§çš„è¿‡ç¨‹ä¸­ï¼ŒæŒ‰ ctrl + cæ˜¯ç»ˆæ­¢ç›‘æ§ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨lesså‘½ä»¤çš„ç›¸å…³æ“ä½œã€‚æŒ‰å¤§å†™Fï¼Œå†æ¬¡è¿›å…¥ç›‘æ§æ¨¡å¼ã€‚</p><p><strong>æ³¨æ„ï¼šlog.txtæ˜¯ä¸€ä¸ªæ–‡ä»¶åã€‚åªæœ‰æœºå™¨è‡ªåŠ¨å†™å…¥æˆ–é€šè¿‡è¾“å‡ºé‡å®šå‘å†™å…¥çš„æ‰å¯ä»¥è¢«ç›‘æ§ã€‚</strong></p><h2 id="lesså‘½ä»¤æŸ¥çœ‹å¤šä¸ªæ–‡ä»¶"><a href="#lesså‘½ä»¤æŸ¥çœ‹å¤šä¸ªæ–‡ä»¶" class="headerlink" title="lesså‘½ä»¤æŸ¥çœ‹å¤šä¸ªæ–‡ä»¶"></a>lesså‘½ä»¤æŸ¥çœ‹å¤šä¸ªæ–‡ä»¶</h2><p>less log.txt Â log2.txt</p><ul><li>è¾“å…¥:n è·³è½¬åˆ°log2.txt</li><li>è¾“å…¥:p è·³è½¬åˆ°log.txt</li></ul><h2 id="lesså‘½ä»¤ç»“åˆç®¡é“ä¸€èµ·ä½¿ç”¨"><a href="#lesså‘½ä»¤ç»“åˆç®¡é“ä¸€èµ·ä½¿ç”¨" class="headerlink" title="lesså‘½ä»¤ç»“åˆç®¡é“ä¸€èµ·ä½¿ç”¨"></a>lesså‘½ä»¤ç»“åˆç®¡é“ä¸€èµ·ä½¿ç”¨</h2><p>ps -ef | less -N</p><h1 id="headå‘½ä»¤"><a href="#headå‘½ä»¤" class="headerlink" title="headå‘½ä»¤"></a>headå‘½ä»¤</h1><p>headå‘½ä»¤ï¼šæ˜¾ç¤ºæ–‡ä»¶å¤´éƒ¨å†…å®¹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æ³•ï¼šhead [é€‰é¡¹]... [æ–‡ä»¶]...</span><br><span class="line">å°†æ¯ä¸ªæŒ‡å®šæ–‡ä»¶çš„å‰ 10 è¡Œè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚</span><br><span class="line">å¦‚æœæŒ‡å®šäº†å¤šäºä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨æ¯å—è¾“å‡ºä¹‹å‰é™„åŠ æ–‡ä»¶åç§°ä½œä¸ºå¤´éƒ¨ã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">  -c è¾“å‡ºå‰å‡ ä¸ªå­—ç¬¦</span><br><span class="line">  -n æŒ‡å®šè¡Œæ•°</span><br><span class="line">  -q ä¸æ˜¾ç¤ºåŒ…å«ç»™å®šæ–‡ä»¶åçš„æ–‡ä»¶å¤´</span><br></pre></td></tr></table></figure><p>å‰ä¸‰è¡Œï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/628ddc5a1ed65c779e50866123428caa645325325.png" alt="image.png">â€‹</p><p>å‰9ä¸ªå­—ç¬¦ï¼š<br><img src="https://i0.hdslb.com/bfs/article/748711647931e13cff80dc91b53d6f4d645325325.png" alt="image.png"></p><p>æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶çš„å‰3è¡Œï¼š<br><img src="https://i0.hdslb.com/bfs/article/bb0346a3d0198ebdcac9c465ebd06d91645325325.png" alt="image.png"></p><p>ä¸å¸¦æ–‡ä»¶åæ ‡è¯†ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/9306c129fd2e0990617f91ed4e3cae37645325325.png" alt="image.png">â€‹</p><h1 id="tailå‘½ä»¤"><a href="#tailå‘½ä»¤" class="headerlink" title="tailå‘½ä»¤"></a>tailå‘½ä»¤</h1><p>tailå‘½ä»¤ï¼šæ˜¾ç¤ºæ–‡ä»¶å°¾éƒ¨å†…å®¹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æ³•ï¼štail [é€‰é¡¹]... [æ–‡ä»¶]...</span><br><span class="line">æ˜¾ç¤ºæ¯ä¸ªæŒ‡å®šæ–‡ä»¶çš„æœ€å 10 è¡Œå¹¶è¾“å‡ºè‡³æ ‡å‡†è¾“å‡ºã€‚</span><br><span class="line">è‹¥æŒ‡å®šäº†å¤šäºä¸€ä¸ªæ–‡ä»¶ï¼Œç¨‹åºä¼šåœ¨æ¯æ®µè¾“å‡ºçš„å¼€å§‹æ·»åŠ ç›¸åº”æ–‡ä»¶åä½œä¸ºå¤´ã€‚</span><br><span class="line"></span><br><span class="line">å‚æ•°ï¼š</span><br><span class="line">  -c  è¾“å‡ºæœ€åå‡ ä¸ªå­—ç¬¦</span><br><span class="line">  -f  éšæ–‡ä»¶å¢é•¿å³æ—¶è¾“å‡ºæ–°å¢æ•°æ®</span><br><span class="line">  -n  æŒ‡å®šè¡Œæ•°</span><br><span class="line">  -q  ä¸è¾“å‡ºæ–‡ä»¶åçš„å¤´</span><br></pre></td></tr></table></figure><p>é»˜è®¤æ˜¾ç¤ºæ–‡ä»¶æœ«å°¾çš„å10è¡Œï¼š<br><img src="https://i0.hdslb.com/bfs/article/760058922835ae0392df1576d65ade3b645325325.png" alt="image.png"></p><p>æŒ‡å®šè¡Œæ•°ï¼š<br><img src="https://i0.hdslb.com/bfs/article/191c8af1d9290476ca1931a4720a28d3645325325.png" alt="image.png"></p><p>ä¸€æ¬¡æŸ¥çœ‹å¤šä¸ªæ–‡ä»¶ï¼š<br><img src="https://i0.hdslb.com/bfs/article/810017a175a1b00e675bb995c0c31fa6645325325.png" alt="image.png"></p><p>ä¸æ˜¾ç¤ºæ–‡ä»¶åï¼š<br><img src="https://i0.hdslb.com/bfs/article/fc767b2a3c8dae29f4b833f37fc6f05b645325325.png" alt="image.png"></p><p>â€</p><p>ç›‘æ§æ–‡ä»¶å˜åŒ–ï¼š<br>åœ¨çª—å£1ä¸­ï¼š<br><img src="https://i0.hdslb.com/bfs/article/441f2777dfe4b4710fd363dea857e958645325325.png" alt="image.png"><br>åœ¨çª—å£2ä¸­ï¼š<br><img src="https://i0.hdslb.com/bfs/article/779dfa184751d98175a0e53afb5c68f1645325325.png" alt="image.png"><br>å¯ä»¥çœ‹åˆ°çª—å£1å‘ç”Ÿäº†å˜åŒ–ï¼š<br><img src="https://i0.hdslb.com/bfs/article/6071d01c59041ed2e73c44d58ec9559e645325325.png" alt="image.png"></p><p><img src="https://i0.hdslb.com/bfs/article/6f8ef8bf0b97285769d5171855ac5b6b645325325.jpg" alt="æ ‡å¤´.jpg"></p><h1 id="nlå‘½ä»¤"><a href="#nlå‘½ä»¤" class="headerlink" title="nlå‘½ä»¤"></a>nlå‘½ä»¤</h1><p>nlå‘½ä»¤æ˜¯æ¯”è¾ƒä¸“ä¸šçš„æ˜¾ç¤ºè¡Œå·çš„å‘½ä»¤ã€‚<br>ç”¨æ³•å¦‚ä¸‹ï¼š</p><ul><li>nl -b a æ‰€æœ‰è¡Œæ·»åŠ è¡Œå·ï¼ŒåŒ…æ‹¬ç©ºç™½è¡Œï¼›</li><li>nl -b t ç»™è¡Œæ·»åŠ è¡Œå·ï¼Œä¸åŒ…æ‹¬ç©ºç™½è¡Œï¼ˆé»˜è®¤è¡Œä¸ºï¼Œå’Œç›´æ¥ä½¿ç”¨ nl ä¸€æ ·æ•ˆæœï¼‰ï¼›</li><li>nl -n ln è¡Œå·åœ¨è‡ªå·±æ ä½å·¦ä¾§æ˜¾ç¤ºï¼›</li><li>nl -n rn è¡Œå·åœ¨è‡ªå·±æ ä½çš„å³ä¾§æ˜¾ç¤º ï¼›</li><li>nl -n rz æ˜¾ç¤ºè¡Œå·ï¼Œè¡Œå·æ ä½ä¸æ»¡æ—¶ï¼Œè‡ªåŠ¨è¡¥0 ï¼›</li><li>nl -w è¡Œå·æ ä½çš„å ç”¨çš„ä½æ•°ã€‚</li></ul><p>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logout</span><span class="params">()</span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;system log out!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl HelloWorld.java</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/04c9bdd7d809c9789377ce87a6dc823f645325325.png" alt="image.png"><br>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šæ˜¾ç¤ºæ‰€æœ‰è¡Œçš„è¡Œå·ï¼ŒåŒ…æ‹¬ç©ºç™½è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl -b a HelloWorld.java</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/25dc25ddd1d20ebca19d4da68bf966de645325325.png" alt="image.png"><br>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šæ˜¾ç¤ºè¡Œå·ï¼Œä¸åŒ…æ‹¬ç©ºç™½è¡Œã€‚ï¼ˆ<strong>è¿™æ˜¯ä¸€ç§é»˜è®¤çš„æ–¹å¼ï¼Œå’Œâ€œnl HelloWorld.javaâ€æ•ˆæœä¸€æ ·</strong>ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl -b t HelloWorld.java</span><br></pre></td></tr></table></figure><p><img src="https://i0.hdslb.com/bfs/article/1ef677fe70db18fd0897c29c520f6933645325325.png" alt="image.png"><br>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šè¡Œå·åœ¨è¡Œå·æ ä½å·¦ä¾§æ˜¾ç¤º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl -n ln HelloWorld.java</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/8e1840ff081f533bf9e318767b2cf531645325325.png" alt="image.png"></p><p>â€</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šè¡Œå·åœ¨è¡Œå·æ ä½å³ä¾§æ˜¾ç¤º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl -n rn HelloWorld.java</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/dbf9bb157d15142016b8bd4077b6809b645325325.png" alt="image.png"><br>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šè¡Œå·æ ä½è‡ªåŠ¨è¡¥0</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl -n rz HelloWorld.java</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/847b7ade0b93be536ce415b83f03fd25645325325.png" alt="image.png"><br>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šè®¾ç½®æ ä½çš„å­—ç¬¦æ•°é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl -n rz -w 3 HelloWorld.java</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/5ebac309050845fa419ae66204fbdfb9645325325.png" alt="image.png"></p><p>â€</p><h1 id="tailfå‘½ä»¤"><a href="#tailfå‘½ä»¤" class="headerlink" title="tailfå‘½ä»¤"></a>tailfå‘½ä»¤</h1><p>ä¸tail -fä¸åŒçš„æ˜¯ï¼Œå¦‚æœæ–‡ä»¶ä¸å¢é•¿ï¼Œå®ƒä¸ä¼šå»è®¿é—®ç£ç›˜æ–‡ä»¶ã€‚tailfç‰¹åˆ«é€‚åˆé‚£äº›ä¾¿æºæœºä¸Šè·Ÿè¸ªæ—¥å¿—æ–‡ä»¶ï¼Œå› ä¸ºå®ƒèƒ½çœç”µï¼Œå› ä¸ºå‡å°‘äº†ç£ç›˜è®¿é—®ã€‚tailfå‘½ä»¤ä¸æ˜¯ä¸ªè„šæœ¬ï¼Œè€Œæ˜¯ä¸€ä¸ªç”¨Cä»£ç ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ï¼ŒæŸäº›Linuxå®‰è£…ä¹‹åæ²¡æœ‰è¿™ä¸ªå‘½ä»¤ã€‚<br>CentOSç³»ç»Ÿæ˜¯ä¸æ”¯æŒè¯¥å‘½ä»¤çš„ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ·»åŠ è¿™ä¸ªå‘½ä»¤ï¼š<br>ç¬¬ä¸€æ­¥ï¼šcdå‘½ä»¤åˆ‡æ¢åˆ°&#x2F;usr&#x2F;localç›®å½•ä¸‹ï¼Œæ–°å»ºtailf.cæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* tailf.c -- tail a log file and then follow it </span></span><br><span class="line"><span class="comment"> * Created: Tue Jan  9 15:49:21 1996 by faith@acm.org </span></span><br><span class="line"><span class="comment"> * Copyright 1996, 2003 Rickard E. Faith (faith@acm.org) </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a </span></span><br><span class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;), </span></span><br><span class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation </span></span><br><span class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense, </span></span><br><span class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the </span></span><br><span class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions: </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included </span></span><br><span class="line"><span class="comment"> * in all copies or substantial portions of the Software. </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR </span></span><br><span class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, </span></span><br><span class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL </span></span><br><span class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR </span></span><br><span class="line"><span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, </span></span><br><span class="line"><span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR </span></span><br><span class="line"><span class="comment"> * OTHER DEALINGS IN THE SOFTWARE. </span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> * less -F and tail -f cause a disk access every five seconds.  This </span></span><br><span class="line"><span class="comment"> * program avoids this problem by waiting for the file size to change. </span></span><br><span class="line"><span class="comment"> * Hence, the file is not accessed, and the access time does not need to be </span></span><br><span class="line"><span class="comment"> * flushed back to disk.  This is sort of a &quot;stealth&quot; tail. </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line">  </span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;malloc.h&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/stat.h&gt;</span>  </span></span><br><span class="line"><span class="comment">//#include &quot;nls.h&quot;  </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _(s) s  </span></span><br><span class="line">  </span><br><span class="line"><span class="type">static</span> <span class="type">size_t</span> <span class="title function_">filesize</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *filename)</span>  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">stat</span> <span class="title">sb</span>;</span>  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> (!stat(filename, &amp;sb)) <span class="keyword">return</span> sb.st_size;  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">tailf</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *filename, <span class="type">int</span> lines)</span>  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="type">char</span> **buffer;  </span><br><span class="line">    <span class="type">int</span>  head = <span class="number">0</span>;  </span><br><span class="line">    <span class="type">int</span>  tail = <span class="number">0</span>;  </span><br><span class="line">    FILE *str;  </span><br><span class="line">    <span class="type">int</span>  i;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> (!(str = fopen(filename, <span class="string">&quot;r&quot;</span>))) &#123;  </span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, _(<span class="string">&quot;Cannot open \&quot;%s\&quot; for read\n&quot;</span>), filename);  </span><br><span class="line">    perror(<span class="string">&quot;&quot;</span>);  </span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    buffer = <span class="built_in">malloc</span>(lines * <span class="keyword">sizeof</span>(*buffer));  </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; lines; i++) buffer[i] = <span class="built_in">malloc</span>(BUFSIZ + <span class="number">1</span>);  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">while</span> (fgets(buffer[tail], BUFSIZ, str)) &#123;  </span><br><span class="line">    <span class="keyword">if</span> (++tail &gt;= lines) &#123;  </span><br><span class="line">        tail = <span class="number">0</span>;  </span><br><span class="line">        head = <span class="number">1</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> (head) &#123;  </span><br><span class="line">    <span class="keyword">for</span> (i = tail; i &lt; lines; i++) <span class="built_in">fputs</span>(buffer[i], <span class="built_in">stdout</span>);  </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; tail; i++)     <span class="built_in">fputs</span>(buffer[i], <span class="built_in">stdout</span>);  </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">    <span class="keyword">for</span> (i = head; i &lt; tail; i++)  <span class="built_in">fputs</span>(buffer[i], <span class="built_in">stdout</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">    fflush(<span class="built_in">stdout</span>);  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; lines; i++) <span class="built_in">free</span>(buffer[i]);  </span><br><span class="line">    <span class="built_in">free</span>(buffer);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span>  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="type">char</span>       buffer[BUFSIZ];  </span><br><span class="line">    <span class="type">size_t</span>     osize, nsize;  </span><br><span class="line">    FILE       *str;  </span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *filename;  </span><br><span class="line">    <span class="type">int</span>        count;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">//setlocale(LC_ALL, &quot;&quot;);  </span></span><br><span class="line">    <span class="comment">//bindtextdomain(PACKAGE, LOCALEDIR);  </span></span><br><span class="line">    <span class="comment">//textdomain(PACKAGE);  </span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;  </span><br><span class="line">    <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, _(<span class="string">&quot;Usage: tailf logfile\n&quot;</span>));  </span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">1</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    filename = argv[<span class="number">1</span>];  </span><br><span class="line">  </span><br><span class="line">    tailf(filename, <span class="number">10</span>);  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">for</span> (osize = filesize(filename);;) &#123;  </span><br><span class="line">    nsize = filesize(filename);  </span><br><span class="line">    <span class="keyword">if</span> (nsize != osize) &#123;  </span><br><span class="line">        <span class="keyword">if</span> (!(str = fopen(filename, <span class="string">&quot;r&quot;</span>))) &#123;  </span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, _(<span class="string">&quot;Cannot open \&quot;%s\&quot; for read\n&quot;</span>), filename);  </span><br><span class="line">        perror(argv[<span class="number">0</span>]);  </span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">if</span> (!fseek(str, osize, SEEK_SET))  </span><br><span class="line">                <span class="keyword">while</span> ((count = fread(buffer, <span class="number">1</span>, <span class="keyword">sizeof</span>(buffer), str)) &gt; <span class="number">0</span>)  </span><br><span class="line">                    fwrite(buffer, <span class="number">1</span>, count, <span class="built_in">stdout</span>);  </span><br><span class="line">        fflush(<span class="built_in">stdout</span>);  </span><br><span class="line">        fclose(str);  </span><br><span class="line">        osize = nsize;  </span><br><span class="line">    &#125;  </span><br><span class="line">    usleep(<span class="number">250000</span>);     <span class="comment">/* 250mS */</span>  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€</p><p>ç¬¬äºŒæ­¥ï¼šé¦–å…ˆç¡®ä¿å½“å‰ç›®å½•åœ¨&#x2F;usr&#x2F;localä¸‹ï¼Œå¦‚æœä¸åœ¨è¯¥ç›®å½•ä¸‹ï¼Œè¯·ä½¿ç”¨cdå‘½ä»¤åˆ‡æ¢åˆ°&#x2F;usr&#x2F;localã€‚ç„¶åç¼–è¯‘cè¯­è¨€ç¨‹åºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost local]# gcc -o /usr/bin/tailf tailf.c</span><br></pre></td></tr></table></figure><p><img src="https://i0.hdslb.com/bfs/article/b1fa90aa92220a0587e00e2d5a40988c645325325.png" alt="image.png"><br>å‡ºç°ä»¥ä¸Šæç¤ºä¿¡æ¯è¡¨ç¤ºå½“å‰ç³»ç»Ÿä¸­æ²¡æœ‰gccç¼–è¯‘å™¨ï¼Œéœ€è¦å®‰è£…ï¼Œè¾“å…¥yè¡¨ç¤ºåŒæ„å®‰è£…ï¼Œå†æœ‰æç¤ºï¼Œåˆ™ç»§ç»­è¾“å…¥yå³å¯ã€‚<br>ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•tailfå‘½ä»¤æ˜¯å¦å¯ç”¨ï¼Œç›´æ¥è¾“å…¥tailfä¼šå‡ºç°ä»¥ä¸‹æç¤ºï¼Œè¡¨ç¤ºtailfå‘½ä»¤å¯ä»¥ä½¿ç”¨äº†ã€‚<br><img src="https://i0.hdslb.com/bfs/article/9ddcc52eb101633f4b848009c71d5167645325325.png" alt="image.png"><br>tailfå‘½ä»¤å’Œâ€œtail -fâ€ä¸€ä¸ªæ•ˆæœï¼Œéƒ½æ˜¯ç”¨æ¥å®æ—¶ç›‘æ§æ–‡ä»¶å˜åŠ¨çš„ã€‚åªä¸è¿‡tailfæ˜¯ä¸“ä¸šçš„åªè´Ÿè´£ç›‘æ§æ—¥å¿—æ–‡ä»¶å˜åŒ–çš„ä¸€ä¸ªå‘½ä»¤ã€‚æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚<br>æ—¥å¿—æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬1è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬2è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬3è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬4è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬5è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬6è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬7è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬8è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬10è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬11è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬12è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬13è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬14è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬15è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬16è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬17è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬18è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬19è¡Œ</span><br><span class="line">æ—¥å¿—ä¿¡æ¯ç¬¬20è¡Œ</span><br></pre></td></tr></table></figure><p>â€</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tailf localhost.log</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/e1ae18eccfb0e162eb8a5a2a63dcd731645325325.png" alt="image.png"><br>å¯ä»¥å†å¼€å¯ä¸€ä¸ªæ–°çš„å‘½ä»¤çª—å£ï¼Œç„¶åå‘æ—¥å¿—æ–‡ä»¶ä¸­è¿½åŠ å†…å®¹ï¼Œå¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/4c0db171d43bdbd042374a938184a785645325325.png" alt="image.png"><br>è¿™æ—¶å¯ä»¥çœ‹åˆ°tailfå‘½ä»¤çª—å£å¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/2b8fdd7597e9bf29955ec9dd68ee0c2b645325325.png" alt="image.png"></p><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬3ç«  ç³»ç»Ÿå‘½ä»¤</title>
      <link href="/posts/33222.html"/>
      <url>/posts/33222.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="tip info faa-horizontal animated"><p>å”¯æœ‰è¯»ç¬¬ä¸€æµçš„ä¹¦ï¼Œæ‰æœ‰å¸Œæœ›å½“ç¬¬äºŒæµçš„äººã€‚è¯»ä¹¦ä¸€äº‹ï¼Œä¸å¯æ±‚å…¨ï¼Œè´ªå¤šåš¼ä¸çƒ‚ï¼Œä»¥ç²¾è¯»ä¸ºä¸Šï¼Œç»†åš¼æ…¢å’½ï¼ŒçœŸæ­£æŠŠä¸€æœ¬ç»å…¸çš„ç²¾å¦™ï¼Œå…¨éƒ¨åƒè¿›è‚šå­é‡Œï¼Œå°†é‚£äº›ç¾å¥½çš„æ„è±¡ã€çœŸçŸ¥ç¼è§çš„é“ç†ã€éšåŒ¿äºå¥ç« ä¹‹é—´çš„ç²¾æ°”ç¥ï¼Œä¸€ä¸€åŒ–ä¸ºå·±ç”¨ï¼Œè¿™æ‰å«è¯»ä¹¦ï¼Œå¦åˆ™åªæ˜¯ç¿»ä¹¦ï¼Œç¿»è¿‡åƒä¸‡å·ï¼Œæ’‘æ­»ä¹Ÿæ˜¯ä¸ªä¸¤è„šä¹¦æŸœ</p></div><a href="https://www.bilibili.com/video/BV1Nb421a7TV/?spm_id_from=333.999.list.card_archive.click">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/20240815134316.png"></a><h1 id="ç³»ç»Ÿå½“å‰æ—¶é—´"><a href="#ç³»ç»Ÿå½“å‰æ—¶é—´" class="headerlink" title="ç³»ç»Ÿå½“å‰æ—¶é—´"></a>ç³»ç»Ÿå½“å‰æ—¶é—´</h1><p>dateå‘½ä»¤ï¼š<br><img src="https://i0.hdslb.com/bfs/article/ac61633c6ae8381cbdba4e4e1a365039645325325.png" alt="image.png"></p><h1 id="åˆ‡æ¢ç”¨æˆ·"><a href="#åˆ‡æ¢ç”¨æˆ·" class="headerlink" title="åˆ‡æ¢ç”¨æˆ·"></a>åˆ‡æ¢ç”¨æˆ·</h1><p>su ç”¨æˆ·å<br><img src="https://i0.hdslb.com/bfs/article/195d2457c60523f3e492a6aa6de711eb645325325.png" alt="image.png"></p><p><strong>sudo å‘½ä»¤</strong>ï¼šè¡¨ç¤ºä½¿ç”¨è¶…çº§ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå¦‚æœä½ å½“å‰ä¸æ˜¯ç®¡ç†å‘˜ï¼Œå¸Œæœ›ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡ŒæŸä¸ªå‘½ä»¤æ—¶ï¼Œä½¿ç”¨sudoï¼Œéœ€è¦è¾“å…¥è¶…çº§ç®¡ç†å‘˜çš„å¯†ç ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/8ae892174264e9a3695a0773ea27906b645325325.png" alt="image.png">â€‹</p><h1 id="echoå‘½ä»¤"><a href="#echoå‘½ä»¤" class="headerlink" title="echoå‘½ä»¤"></a>echoå‘½ä»¤</h1><h2 id="è¾“å‡ºå­—ç¬¦ä¸²"><a href="#è¾“å‡ºå­—ç¬¦ä¸²" class="headerlink" title="è¾“å‡ºå­—ç¬¦ä¸²"></a>è¾“å‡ºå­—ç¬¦ä¸²</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;Hello, world!&quot;</span><br></pre></td></tr></table></figure><p>è¿™å°†ä¼šè¾“å‡º <code>Hello, world!</code> å’Œä¸€ä¸ªæ¢è¡Œç¬¦ã€‚<br><img src="https://i0.hdslb.com/bfs/article/53e1d0ba3a68e17f6455809eea3930b8645325325.png" alt="image.png"></p><h2 id="è¾“å‡ºå˜é‡"><a href="#è¾“å‡ºå˜é‡" class="headerlink" title="è¾“å‡ºå˜é‡"></a>è¾“å‡ºå˜é‡</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name=&quot;John&quot;</span><br><span class="line">echo &quot;My name is $name&quot;</span><br></pre></td></tr></table></figure><p>è¿™å°†ä¼šè¾“å‡º <code>My name is John</code> å’Œä¸€ä¸ªæ¢è¡Œç¬¦ã€‚åœ¨è¾“å‡ºå­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨ <code>$</code> ç¬¦å·åŠ ä¸Šå˜é‡åå³å¯ã€‚<br><img src="https://i0.hdslb.com/bfs/article/2166f1455c5c0ac2125a191be7d06fae645325325.png" alt="image.png"></p><h2 id="è¾“å‡ºå¤šè¡Œ"><a href="#è¾“å‡ºå¤šè¡Œ" class="headerlink" title="è¾“å‡ºå¤šè¡Œ"></a>è¾“å‡ºå¤šè¡Œ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;line 1</span><br><span class="line">line 2</span><br><span class="line">line 3&quot;</span><br></pre></td></tr></table></figure><p>è¿™å°†ä¼šè¾“å‡ºä¸‰è¡Œæ–‡æœ¬ï¼Œæ¯è¡Œä¸€æ¡ã€‚<br><img src="https://i0.hdslb.com/bfs/article/e4619d8953584dd006d02f0eb32a3200645325325.png" alt="image.png"></p><h2 id="è¾“å‡ºç‰¹æ®Šå­—ç¬¦"><a href="#è¾“å‡ºç‰¹æ®Šå­—ç¬¦" class="headerlink" title="è¾“å‡ºç‰¹æ®Šå­—ç¬¦"></a>è¾“å‡ºç‰¹æ®Šå­—ç¬¦</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e &quot;Line 1\nLine 2\tTable&quot;</span><br></pre></td></tr></table></figure><p>è¿™å°†ä¼šè¾“å‡ºä¸¤è¡Œæ–‡æœ¬ï¼Œç¬¬ä¸€è¡Œåæ¥ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œç¬¬äºŒè¡Œä¸­çš„ <code>Table</code>â€‹å‰æœ‰ä¸€ä¸ªåˆ¶è¡¨ç¬¦ã€‚<br>â€‹<img src="https://i0.hdslb.com/bfs/article/cb233822092d2cb40786e120435620c9645325325.png" alt="image.png">â€‹</p><h1 id="sortå‘½ä»¤"><a href="#sortå‘½ä»¤" class="headerlink" title="sortå‘½ä»¤"></a>sortå‘½ä»¤</h1><p>sortå‘½ä»¤å¯ä»¥å¯¹æ–‡ä»¶ä¸­çš„å†…å®¹ä»¥â€œè¡Œâ€ä¸ºå•ä½è¿›è¡Œå‡åºå’Œé™åºæ’åˆ—ï¼š<br>a.txt æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<br>![image.png](</p><p>å‡åºï¼š<br><img src="https://i0.hdslb.com/bfs/article/6f4c739cf1cc27940d492f0c4efad14f645325325.png" alt="image.png"></p><p>é™åºï¼š<br><img src="https://i0.hdslb.com/bfs/article/5f45d05deabeea99c14d5db1b8691493645325325.png" alt="image.png"></p><p>å°†æ–‡ä»¶ä¸­çš„å†…å®¹å½“åšæ•°å­—è¿›è¡Œæ’åºï¼ˆä¸å†å½“åšå­—ç¬¦ä¸²ï¼‰ï¼š<br>a.txtæ–‡ä»¶å†…å®¹ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/e6c4438adc4d9726f246697f506ac3d0645325325.png" alt="image.png"><br>å½“åšæ•°å­—è¿›è¡Œæ’åºï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/c2eb0b177073d226c72d9585e8106221645325325.png" alt="image.png">â€‹</p><h1 id="diffå‘½ä»¤"><a href="#diffå‘½ä»¤" class="headerlink" title="diffå‘½ä»¤"></a>diffå‘½ä»¤</h1><p>diffå‘½ä»¤å¯ä»¥ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„ä¸åŒä¹‹å¤„ï¼š</p><p>a.txtæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/d05dd81c7f9486b03f2a6ac7b89eaa8b645325325.png" alt="image.png"></p><p>b.txtæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/551da25f8afd5d1af0c227642d309461645325325.png" alt="image.png"></p><p>æ¯”è¾ƒa.txtå’Œb.txtæ–‡ä»¶ä¹‹é—´çš„åŒºåˆ«ï¼š<br><img src="https://i0.hdslb.com/bfs/article/f5b1f81910c8a1c9afdccc785f1cd689645325325.png" alt="image.png"></p><p>ä»¥ä¸Šçš„æ¯”è¾ƒç»“æœä¸­ï¼š1c1æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ3c3,4æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ<br>c è¡¨ç¤º changeï¼Œæ”¹å˜çš„æ„æ€ã€‚<br>1c1è¡¨ç¤ºï¼šç¬¬ä¸€ä¸ªæ–‡ä»¶çš„ç¬¬1è¡Œ å’Œ ç¬¬äºŒä¸ªæ–‡ä»¶çš„ç¬¬1è¡Œ å‘ç”Ÿäº†æ”¹å˜ã€‚<br>3c3,4è¡¨ç¤ºï¼šç¬¬ä¸€ä¸ªæ–‡ä»¶çš„ç¬¬3è¡Œ å’Œ ç¬¬äºŒä¸ªæ–‡ä»¶çš„ç¬¬3,4è¡Œä¸åŒï¼Œå‘ç”Ÿäº†æ”¹å˜ã€‚</p><h1 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h1><h2 id="è¾“å‡ºé‡å®šå‘"><a href="#è¾“å‡ºé‡å®šå‘" class="headerlink" title="è¾“å‡ºé‡å®šå‘"></a>è¾“å‡ºé‡å®šå‘</h2><blockquote><p>ï¼šä»¥è¦†ç›–çš„å½¢å¼å†™åˆ°æ–‡ä»¶ä¸­ã€‚</p><blockquote><p>ï¼šä»¥è¿½åŠ çš„å½¢å¼å†™åˆ°æ–‡ä»¶ä¸­ã€‚<br>å‡¡æ˜¯åœ¨æ§åˆ¶å°ä¸Šèƒ½å¤Ÿæ‰“å°å‡ºæ¥çš„ï¼Œç»Ÿä¸€éƒ½å¯ä»¥é‡å®šå‘ï¼Œå¯ä»¥å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°çš„è¡Œä¸ºé‡å®šå‘åˆ°æ–‡ä»¶æˆ–å…¶å®ƒè®¾å¤‡ã€‚ä¾‹å¦‚ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/921b645640b61541559c85634e447dc3645325325.png" alt="image.png"><br>å°† ls -alçš„æ‰§è¡Œç»“æœé‡å®šå‘åˆ° ls.txt æ–‡ä»¶ä¸­ã€‚<br>ls.txtæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/8ebb0775396b5b111250293fa4dadd8f645325325.png" alt="image.png"><br>ä»¥ä¸Šæ–¹å¼æ˜¯é‡‡ç”¨è¦†ç›–çš„æ–¹å¼ï¼Œæ‰€è°“è¦†ç›–æ–¹å¼æŒ‡çš„æ˜¯ï¼Œæ¯ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼Œéƒ½ä¼šæŠŠ ls.txt æ–‡ä»¶å…¨éƒ¨æ¸…ç©ºï¼Œç„¶åé‡æ–°å†™å…¥ã€‚<br>å¦‚æœè¦ä»¥è¿½åŠ çš„æ–¹å¼ï¼Œåˆ™éœ€è¦ä½¿ç”¨ &gt;&gt; ï¼Œè¿™ä¸ªå¯ä»¥è‡ªè¡Œæµ‹è¯•ä¸€ä¸‹ã€‚</p></blockquote></blockquote><h2 id="è¾“å…¥é‡å®šå‘"><a href="#è¾“å…¥é‡å®šå‘" class="headerlink" title="è¾“å…¥é‡å®šå‘"></a>è¾“å…¥é‡å®šå‘</h2><p>&lt;ï¼šå°†æ–‡ä»¶å†…å®¹è¾“å…¥ç»™æŸä¸ªå‘½ä»¤ï¼Œè¿™æ˜¯ä¸€ç§é»˜è®¤çš„è¡Œä¸ºï¼Œé€šå¸¸ &lt; æ˜¯å¯ä»¥çœç•¥çš„ã€‚ä¾‹å¦‚ï¼š<br>a.txtæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/5692a23ede05eae65d8b8cfbb82a7a5e645325325.png" alt="image.png"><br>å°† a.txt æ–‡ä»¶ä¸­çš„å†…å®¹è¾“å…¥ç»™ sortå‘½ä»¤ï¼š<br><img src="https://i0.hdslb.com/bfs/article/9b9fc69ce16a4b582589ee78dd591d45645325325.png" alt="image.png"></p><p>&lt;&lt;ï¼šå¯ä»¥æ¥æ”¶é”®ç›˜çš„è¾“å…¥ï¼Œä¾‹å¦‚ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/464515490743cb3718030ac6960537f9645325325.png" alt="image.png"><br>EOFæ˜¯ä¸€ä¸ªç»“æŸç¬¦ï¼Œéšæ„çš„ï¼Œå½“é”®ç›˜è¾“å…¥EOFä¹‹åï¼Œé”®ç›˜è¾“å…¥åˆ™è‡ªåŠ¨ç»“æŸï¼Œç„¶åsortå‘½ä»¤å°†é”®ç›˜è¾“å…¥çš„å†…å®¹è¿›è¡Œæ’åºã€‚</p><h1 id="grepå‘½ä»¤"><a href="#grepå‘½ä»¤" class="headerlink" title="grepå‘½ä»¤"></a>grepå‘½ä»¤</h1><p>åœ¨æŸæ®µå†…å®¹ä¸­æœç´¢<br>ä¾‹å¦‚ï¼š grep 0 a.txt ï¼ˆåœ¨a.txtä¸­æœç´¢0ï¼‰</p><p><code>grep</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤è¡Œæ–‡æœ¬æœç´¢å·¥å…·ï¼Œç”¨äºåœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾åŒ¹é…çš„å­—ç¬¦ä¸²æˆ–æ¨¡å¼ï¼Œå¹¶å°†åŒ¹é…è¡Œä½œä¸ºè¾“å‡ºã€‚ä»¥ä¸‹æ˜¯ <code>grep</code> å‘½ä»¤çš„ç”¨æ³•è¯¦è§£ï¼š</p><p>åŸºæœ¬ç”¨æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &#x27;pattern&#x27; file</span><br></pre></td></tr></table></figure><ul><li><code>&#39;pattern&#39;</code> è¡¨ç¤ºè¦åŒ¹é…çš„å­—ç¬¦ä¸²æˆ–æ¨¡å¼ã€‚</li><li><code>file</code> è¡¨ç¤ºè¦æœç´¢çš„æ–‡ä»¶åã€‚å¦‚æœä¸æŒ‡å®šæ–‡ä»¶åï¼Œåˆ™ <code>grep</code> å‘½ä»¤ä¼šä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–æ•°æ®ï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥å¹¶åŒ¹é…å­—ç¬¦ä¸²ã€‚</li></ul><p>æœç´¢å¤šä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep &#x27;pattern&#x27; file1 file2</span><br><span class="line">grep &#x27;pattern&#x27; *.txt</span><br></pre></td></tr></table></figure><ul><li><code>file1</code> å’Œ <code>file2</code> è¡¨ç¤ºè¦æœç´¢çš„å¤šä¸ªæ–‡ä»¶åã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ <code>*.txt</code> æœç´¢æ‰€æœ‰æ‰©å±•åä¸º <code>.txt</code> çš„æ–‡ä»¶ã€‚</li></ul><p>é€’å½’æœç´¢ç›®å½•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r &#x27;pattern&#x27; dir</span><br></pre></td></tr></table></figure><ul><li><code>-r</code> è¡¨ç¤ºé€’å½’æœç´¢ç›®å½•ã€‚</li><li><code>dir</code> è¡¨ç¤ºè¦æœç´¢çš„ç›®å½•ã€‚</li></ul><p>æ˜¾ç¤ºåŒ¹é…è¡Œå‰çš„å‡ è¡Œæˆ–åçš„å‡ è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -A 2 &#x27;pattern&#x27; file    # æ˜¾ç¤ºåŒ¹é…è¡Œå2è¡Œ</span><br><span class="line">grep -B 2 &#x27;pattern&#x27; file    # æ˜¾ç¤ºåŒ¹é…è¡Œå‰2è¡Œ</span><br><span class="line">grep -C 2 &#x27;pattern&#x27; file    # æ˜¾ç¤ºåŒ¹é…è¡Œå‰åå„2è¡Œ</span><br></pre></td></tr></table></figure><ul><li><code>-A</code> è¡¨ç¤ºæ˜¾ç¤ºåŒ¹é…è¡Œåçš„å‡ è¡Œã€‚</li><li><code>-B</code> è¡¨ç¤ºæ˜¾ç¤ºåŒ¹é…è¡Œå‰çš„å‡ è¡Œã€‚</li><li><code>-C</code> è¡¨ç¤ºåŒæ—¶æ˜¾ç¤ºåŒ¹é…è¡Œå‰åçš„å‡ è¡Œã€‚è¿™ä¸‰ä¸ªé€‰é¡¹åé¢å¿…é¡»è·Ÿä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºè¦æ˜¾ç¤ºçš„è¡Œæ•°ã€‚</li></ul><p>åŒæ—¶è¾“å‡ºåŒ¹é…ç»“æœçš„è¡Œå·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n &#x27;pattern&#x27; file</span><br></pre></td></tr></table></figure><ul><li><code>-n</code> è¡¨ç¤ºåªè¾“å‡ºåŒ¹é…ç»“æœæ‰€åœ¨çš„è¡Œå·ã€‚</li></ul><p>å¿½ç•¥å¤§å°å†™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -i &#x27;pattern&#x27; file</span><br></pre></td></tr></table></figure><ul><li><code>-i</code> è¡¨ç¤ºå¿½ç•¥å¤§å°å†™ã€‚</li></ul><p>æ‰¾å‡ºä¸åŒ¹é…çš„è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v &#x27;pattern&#x27; file</span><br></pre></td></tr></table></figure><ul><li><code>-v</code> è¾“å‡ºä¸åŒ¹é…æ¨¡å¼çš„è¡Œã€‚</li></ul><p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E &#x27;pattern&#x27; file</span><br></pre></td></tr></table></figure><ul><li><code>-E</code>â€‹ è¡¨ç¤ºä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚</li></ul><h1 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“ |"></a>ç®¡é“ |</h1><p>å°†å‰é¢å‘½ä»¤çš„è¾“å‡ºä½œä¸ºåé¢å‘½ä»¤çš„è¾“å…¥ï¼Œå¯ä»¥å åŠ ï¼Œä¾‹å¦‚ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/447e8c686ee3c8a2198ddfbb7b88d5e9645325325.png" alt="image.png">â€‹</p><h1 id="æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹"><a href="#æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹"></a>æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹</h1><p>ps [å‘½ä»¤å‚æ•°]</p><p>å¸¸ç”¨å‚æ•°ï¼š<br>-e :æ˜¾ç¤ºå½“å‰æ‰€æœ‰è¿›ç¨‹<br>-f :æ˜¾ç¤º UID,PPID,C ä¸ STIME æ ä½ä¿¡æ¯</p><p><img src="https://i0.hdslb.com/bfs/article/fc861966f94e9e0543641fa67e1ecc73645325325.png" alt="image.png"></p><p>UIDï¼šè¯¥è¿›ç¨‹çš„æ‰€å±ç”¨æˆ·<br>PIDï¼šè¿›ç¨‹id<br>PPIDï¼šçˆ¶è¿›ç¨‹id<br>Cï¼šCPUä½¿ç”¨ç™¾åˆ†æ¯”<br>STIMEï¼šå¯åŠ¨æ—¶é—´<br>TTYï¼šå¯åŠ¨è¯¥è¿›ç¨‹çš„ç»ˆç«¯è®¾å¤‡æ˜¯å“ªä¸ª<br>TIMEï¼šè€—è´¹çš„CPUæ—¶é—´<br>CMDï¼šè¯¥è¿›ç¨‹å¯¹åº”çš„å‘½ä»¤</p><p>â€</p><h1 id="sleepå‘½ä»¤"><a href="#sleepå‘½ä»¤" class="headerlink" title="sleepå‘½ä»¤"></a>sleepå‘½ä»¤</h1><p>åœ¨ Linux ä¸­ï¼Œ<code>sleep</code> æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å‘½ä»¤ï¼Œç”¨äºæš‚åœç¨‹åºçš„æ‰§è¡Œä¸€æ®µæ—¶é—´ã€‚<code>sleep</code> å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sleep NUMBER[SUFFIX]</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>NUMBER</code> ä¸ºéœ€è¦æš‚åœçš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼›<code>SUFFIX</code> åˆ™å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š</p><ul><li><code>s</code> ï¼šç§’ï¼ˆé»˜è®¤ï¼‰ï¼›</li><li><code>m</code> ï¼šåˆ†ï¼›</li><li><code>h</code> ï¼šå°æ—¶ï¼›</li><li><code>d</code> ï¼šæ—¥ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æš‚åœ 3 ç§’</span></span><br><span class="line">sleep 3</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æš‚åœ 1 åˆ†é’Ÿ</span></span><br><span class="line">sleep 1m</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æš‚åœ 2 å°æ—¶</span></span><br><span class="line">sleep 2h</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æš‚åœ 1 å¤©</span></span><br><span class="line">sleep 1d</span><br></pre></td></tr></table></figure><p>å¯åŠ¨sleepè¿›ç¨‹ï¼Œæš‚åœ1å¤©ï¼š<br><img src="https://i0.hdslb.com/bfs/article/c87876037465906bdf6cc2eae436437f645325325.png" alt="image.png"><br>å¯åŠ¨sleepè¿›ç¨‹ï¼Œåœ¨åå°æš‚åœ1å¤©ï¼š<br><img src="https://i0.hdslb.com/bfs/article/f8ca3cad697cf455be759a4362b2b3f7645325325.png" alt="image.png"><br>5277æ˜¯è¿™ä¸ªsleepè¿›ç¨‹çš„idã€‚</p><p>â€</p><h1 id="killè¿›ç¨‹"><a href="#killè¿›ç¨‹" class="headerlink" title="killè¿›ç¨‹"></a>killè¿›ç¨‹</h1><p>kill è¿›ç¨‹å·<br>kill -9 è¿›ç¨‹å·ï¼ˆå¼ºè¡Œæ€æ­»ï¼‰<br>killall è¿›ç¨‹å</p><p>æ‰¾åˆ°è¿›ç¨‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/71110f3e2f6b398b63247b0c887fa32f645325325.png" alt="image.png"></p><p>æ€æ­»è¿›ç¨‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/717e8b9e27caf7da3f3446d5dd061ddc645325325.png" alt="image.png"></p><p>æ€æ­»æ‰€æœ‰çš„sleepè¿›ç¨‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/e1749d06116b8f446f2991785c2e5157645325325.png" alt="image.png"></p><p>â€</p><h1 id="topå‘½ä»¤"><a href="#topå‘½ä»¤" class="headerlink" title="topå‘½ä»¤"></a>topå‘½ä»¤</h1><p><code>top</code> å‘½ä»¤æ˜¯ç”¨äºæŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„ç³»ç»Ÿè¿›ç¨‹ä¿¡æ¯çš„å‘½ä»¤ã€‚å®ƒä¼š<strong>å®æ—¶</strong>åŠ¨æ€åœ°æ˜¾ç¤ºç³»ç»Ÿèµ„æºçš„ä½¿ç”¨æƒ…å†µï¼Œå¦‚ CPU å ç”¨ç‡ã€å†…å­˜ä½¿ç”¨æƒ…å†µã€è¿›ç¨‹æƒ…å†µç­‰ã€‚é€šå¸¸ç”¨äºç³»ç»Ÿç›‘æ§å’Œæ€§èƒ½è°ƒä¼˜ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/c6f82c8f109fe009c786f161164df1db645325325.png" alt="image.png"></p><p>åƒµå°¸è¿›ç¨‹ï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œåƒµå°¸è¿›ç¨‹ (Zombie Process) æ˜¯æŒ‡ä¸€ä¸ªå·²ç»æ‰§è¡Œç»“æŸçš„è¿›ç¨‹ï¼Œä½†å…¶è¿›ç¨‹æè¿°ç¬¦ä»ç„¶ç•™åœ¨è¿›ç¨‹åˆ—è¡¨ä¸­ï¼Œå®ƒä¸å†æ‰§è¡Œä»»ä½•å…¶ä»–æ“ä½œï¼Œä½†ä»ç„¶å ç”¨ä¸€å®šå†…å­˜ç©ºé—´ã€‚<br>äº¤æ¢åˆ†åŒºï¼ˆSwapï¼‰ï¼Œä¹Ÿç§°è™šæ‹Ÿå­˜å‚¨å™¨ï¼Œæ˜¯ä¸€ç§åœ¨è®¡ç®—æœºå†…å­˜ä¸è¶³æ—¶ï¼Œä¸ºäº†å¢åŠ å†…å­˜æ‰€é‡‡ç”¨çš„ä¸€ç§æŠ€æœ¯ã€‚å½“ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠæš‚æ—¶ä¸éœ€è¦çš„å†…å­˜æ•°æ®å’Œç¨‹åºä¿¡æ¯é€šè¿‡äº¤æ¢æœºåˆ¶å­˜å‚¨åˆ°ç¡¬ç›˜ä¸Šçš„äº¤æ¢åˆ†åŒºä¸­ï¼Œä»¥èŠ‚çœå†…å­˜çš„ä½¿ç”¨ï¼Œä»è€Œä¿è¯å…±äº«å†…å­˜çš„è¿›ç¨‹æ­£å¸¸è¿è¡Œã€‚</p><p>qï¼šé€€å‡ºtopå‘½ä»¤ã€‚</p><p>â€</p><h1 id="freeå‘½ä»¤"><a href="#freeå‘½ä»¤" class="headerlink" title="freeå‘½ä»¤"></a>freeå‘½ä»¤</h1><p><code>free</code>å‘½ä»¤å¯ä»¥ç”¨äºæŸ¥çœ‹ç‰©ç†å†…å­˜å’Œäº¤æ¢åˆ†åŒºçš„ä½¿ç”¨æƒ…å†µã€‚ä¸‹é¢æ˜¯ä¸€æ¡å¯èƒ½çš„ <code>free</code> å‘½ä»¤çš„è¾“å‡ºç»“æœçš„ç¤ºä¾‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/670f00f44993a55e716b795683581250645325325.png" alt="image.png"></p><h1 id="uptimeå‘½ä»¤"><a href="#uptimeå‘½ä»¤" class="headerlink" title="uptimeå‘½ä»¤"></a>uptimeå‘½ä»¤</h1><p>æ˜¾ç¤ºç³»ç»Ÿè¿è¡Œæ—¶é—´ï¼š<br><img src="https://i0.hdslb.com/bfs/article/32c86fb2b8ae6e0e29fc902e8ee22c25645325325.png" alt="image.png"></p><p>â€</p><h1 id="dfå‘½ä»¤"><a href="#dfå‘½ä»¤" class="headerlink" title="dfå‘½ä»¤"></a>dfå‘½ä»¤</h1><p><code>df</code> å‘½ä»¤æ˜¯ Linux ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç£ç›˜ç©ºé—´ä½¿ç”¨æƒ…å†µæŸ¥è¯¢å‘½ä»¤ï¼Œç”¨äºæ˜¾ç¤ºå½“å‰æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´ä½¿ç”¨çŠ¶å†µï¼Œä»¥åŠæ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹ã€ç£ç›˜å¤§å°ã€å·²ç”¨ç©ºé—´ã€å¯ç”¨ç©ºé—´ã€ä½¿ç”¨å æ¯”ç­‰ä¿¡æ¯ã€‚<code>df</code>å‘½ä»¤æ˜¯ â€œdisk freeâ€ çš„ç¼©å†™ã€‚<br><img src="https://i0.hdslb.com/bfs/article/cd5a3f2c3eb72c572a7a306487d808f8645325325.png" alt="image.png"><br>å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œåº”è¯¥é‡ç‚¹å…³æ³¨ä»¥ä¸Šçº¢æ¡†ä¸­çš„å†…å®¹ï¼Œå·²ç”¨ç©ºé—´è¶…è¿‡80%åˆ™éœ€è¦é‡ç‚¹æ³¨æ„ï¼Œä»¥é˜²ç£ç›˜å·²æ»¡å¯¼è‡´æ•°æ®æ— æ³•å†™å…¥è€Œä¸¢å¤±ã€‚</p><p>â€</p><h1 id="duå‘½ä»¤"><a href="#duå‘½ä»¤" class="headerlink" title="duå‘½ä»¤"></a>duå‘½ä»¤</h1><p><code>du</code>å‘½ä»¤æ˜¯ Linux ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç£ç›˜ç©ºé—´å ç”¨æŸ¥è¯¢å‘½ä»¤ï¼Œç”¨äºæ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ã€‚<code>du</code>å‘½ä»¤æ˜¯ â€œdisk usageâ€ çš„ç¼©å†™ï¼š<br><img src="https://i0.hdslb.com/bfs/article/74f2cae0173a56ba3dc45ab2f01c3444645325325.png" alt="image.png"><br>4è¡¨ç¤ºå ç”¨4ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚</p><h1 id="é‡å¯"><a href="#é‡å¯" class="headerlink" title="é‡å¯"></a>é‡å¯</h1><p>reboot</p><p>â€</p><h1 id="å…³æœº"><a href="#å…³æœº" class="headerlink" title="å…³æœº"></a>å…³æœº</h1><p>shutdown -h now<br>poweroff</p><p><code>shutdown -h now</code> å’Œ <code>poweroff</code> éƒ½æ˜¯ç”¨äºå…³æœºçš„ Linux å‘½ä»¤ï¼Œå®ƒä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p><ol><li><code>shutdown -h now</code> å‘½ä»¤ä¼šå‘ç³»ç»Ÿå‘é€ä¿¡å·ï¼Œé€šçŸ¥æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹åœæ­¢è¿è¡Œï¼Œå¹¶ä¿å­˜å½“å‰çš„çŠ¶æ€ï¼Œç„¶åå…³é—­ç³»ç»Ÿã€‚é€šå¸¸ä¼šåœ¨å…³æœºå‰å‘æ‰€æœ‰ç”¨æˆ·å‘é€é€šçŸ¥æ¶ˆæ¯ã€‚</li><li><code>poweroff</code> å‘½ä»¤ç›¸è¾ƒäº <code>shutdown -h now</code> æ›´ä¸ºå¼ºåˆ¶ï¼Œå®ƒä¼šç«‹å³å…³é—­ç³»ç»Ÿç”µæºï¼Œä¸ä¼šç­‰å¾…æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ç»“æŸã€‚ä½¿ç”¨ <code>poweroff</code> å‘½ä»¤æ—¶éœ€è¦ç‰¹åˆ«å°å¿ƒï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šä¸¢å¤±å°šæœªä¿å­˜çš„æ•°æ®ã€‚</li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<code>shutdown -h now</code> å‘½ä»¤ä¼šé€æ­¥å…³é—­è¿›ç¨‹ï¼Œå…è®¸ç¨‹åºé‡Šæ”¾èµ„æºå¹¶ä¿å­˜æ•°æ®ï¼›è€Œ <code>poweroff</code> å‘½ä»¤åˆ™ä¼šç«‹å³å…³é—­ç³»ç»Ÿç”µæºï¼Œå¯èƒ½ä¼šä¸¢å¤±ä¸€äº›å°šæœªä¿å­˜çš„æ•°æ®ã€‚å› æ­¤ï¼Œåœ¨æ­£å¸¸å…³æœºçš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨ <code>shutdown -h now</code> å‘½ä»¤ï¼›åªæœ‰åœ¨æ„å¤–æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ç³»ç»Ÿå‡ºç°ä¸¥é‡æ•…éšœç­‰æƒ…å†µï¼Œæ‰åº”è¯¥ä½¿ç”¨ <code>poweroff</code> å‘½ä»¤ã€‚</p><p>â€</p><h1 id="ifconfigå‘½ä»¤"><a href="#ifconfigå‘½ä»¤" class="headerlink" title="ifconfigå‘½ä»¤"></a>ifconfigå‘½ä»¤</h1><p>æŸ¥çœ‹ç½‘å¡çš„ipåœ°å€ã€‚åœ¨windowså½“ä¸­æ˜¯ï¼šipconfigã€‚åœ¨linuxå½“ä¸­æ˜¯ifconfigã€‚<br><img src="https://i0.hdslb.com/bfs/article/28c5b8f117a0c7857142204ef5f00fe2645325325.png" alt="image.png"></p><p>â€</p><h1 id="pingå‘½ä»¤"><a href="#pingå‘½ä»¤" class="headerlink" title="pingå‘½ä»¤"></a>pingå‘½ä»¤</h1><p>æŸ¥çœ‹è®¡ç®—æœºä¹‹é—´æ˜¯å¦å¯ä»¥æ­£å¸¸é€šä¿¡<br>è¯­æ³•ï¼š</p><ul><li>ping ipåœ°å€</li><li>ping åŸŸå</li></ul><p><img src="https://i0.hdslb.com/bfs/article/b939877ab678fe6f50a645d00e34b49c645325325.png" alt="image.png"></p><p><img src="https://i0.hdslb.com/bfs/article/e04f3b3d286276e2cc4f798e9f780b9e645325325.png" alt="image.png"></p><p>â€</p><h1 id="curlå‘½ä»¤"><a href="#curlå‘½ä»¤" class="headerlink" title="curlå‘½ä»¤"></a>curlå‘½ä»¤</h1><p>æ¨¡æ‹Ÿç”¨æˆ·è®¿é—®ï¼Œæ¨¡æ‹Ÿæµè§ˆå™¨è¡Œä¸ºã€‚</p><ul><li>ä¾‹å¦‚ï¼šcurl <a href="http://www.baidu.com/">http://www.baidu.com</a> ï¼ˆå¯ä»¥ç›´æ¥æŸ¥çœ‹ç™¾åº¦é¦–é¡µçš„å‰ç«¯ä»£ç ã€‚ï¼‰</li></ul><p><code>curl</code> å‘½ä»¤æ˜¯ Linux ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç”¨äºå‘é€ HTTP è¯·æ±‚çš„å·¥å…·ã€‚å®ƒæ”¯æŒå„ç§åè®®ï¼ŒåŒ…æ‹¬ HTTPã€HTTPSã€FTPã€IMAPã€SMTP ç­‰ï¼Œå¯ä»¥ç”¨äºä»ç½‘ç»œä¸­è·å–æ•°æ®ã€ä¸Šä¼ æ–‡ä»¶ç­‰ã€‚</p><p><code>curl</code> å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl [options] &lt;URL&gt;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>URL</code> è¡¨ç¤ºè¦è¯·æ±‚çš„ç›®æ ‡åœ°å€ã€‚</p><p><code>curl</code> å‘½ä»¤çš„å¸¸ç”¨é€‰é¡¹å¦‚ä¸‹ï¼š</p><ul><li><code>-i</code> ï¼šæ˜¾ç¤ºå“åº”å¤´ä¿¡æ¯ã€‚</li><li><code>-I</code> ï¼šåªæ˜¾ç¤ºå“åº”å¤´ä¿¡æ¯ï¼Œä¸æ˜¾ç¤ºå“åº”ä½“ã€‚</li><li><code>-X</code> ï¼šè®¾ç½®è¯·æ±‚æ–¹æ³•ï¼ŒåŒ…æ‹¬ GETã€POSTã€PUTã€DELETE ç­‰ã€‚</li><li><code>-d</code> ï¼šè®¾ç½®è¯·æ±‚ä½“æ•°æ®ï¼ˆPOST è¯·æ±‚ï¼‰ã€‚</li><li><code>-H</code> ï¼šè®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯ã€‚</li><li><code>-o/-O</code> ï¼šä¸‹è½½æ–‡ä»¶ï¼Œå¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚</li><li><code>-u</code> ï¼šè®¾ç½®è®¤è¯ä¿¡æ¯ã€‚</li><li><code>-A</code> ï¼šè®¾ç½® User-Agentã€‚</li><li><code>-s</code> ï¼šé™é»˜æ¨¡å¼ï¼Œä¸è¾“å‡ºè¿›åº¦ä¿¡æ¯ã€‚</li></ul><p>ä»¥ä¸‹æ˜¯ <code>curl</code> å‘½ä»¤çš„ä¸€äº›ä½¿ç”¨ç¤ºä¾‹ï¼š</p><ol><li>è¯·æ±‚ä¸€ä¸ª URL å¹¶è¾“å‡ºå“åº”ä¿¡æ¯ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl www.example.com</span><br></pre></td></tr></table></figure><ol start="2"><li>å‘é€ POST è¯·æ±‚ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST -d &quot;name=john&amp;age=30&quot; www.example.com/submit</span><br></pre></td></tr></table></figure><ol start="3"><li>ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -O www.example.com/test.zip</span><br></pre></td></tr></table></figure><ol start="4"><li>è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H &quot;User-Agent: Mozilla/5.0&quot; www.example.com</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹ï¼Œ<code>curl</code> å‘½ä»¤æ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„å·¥å…·ï¼Œå¯ä»¥ç”¨äºä»ç½‘ç»œä¸­è·å–æ•°æ®ã€ä¸Šä¼ æ–‡ä»¶ç­‰ï¼Œå¹¶ä¸”æ”¯æŒå¤šç§åè®®å’Œè¯·æ±‚æ–¹å¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…ä½¿ç”¨ <code>curl</code> å‘½ä»¤æ—¶ï¼Œè¿˜éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µè®¾ç½®ç›¸åº”çš„é€‰é¡¹å’Œå‚æ•°ã€‚</p><p>â€</p><h1 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h1><p>ä¸‹è½½èµ„æºï¼Œè¯­æ³•ï¼šwget èµ„æºåœ°å€<br>ä¸‹è½½tomcat ï¼šwget <a href="https://dlcdn.apache.org/tomcat/tomcat-10/v10.1.20/bin/apache-tomcat-10.1.20.tar.gz">https://dlcdn.apache.org/tomcat/tomcat-10/v10.1.20/bin/apache-tomcat-10.1.20.tar.gz</a></p><p><img src="https://i0.hdslb.com/bfs/article/5b884430cefadd738baab4f10480f22a645325325.png" alt="image.png"></p><p>ä¸‹è½½ç»“æœï¼š<br><img src="https://i0.hdslb.com/bfs/article/7aa9c0f4a48d1a70171f02a65248d667645325325.png" alt="image.png"></p><p>â€</p><h1 id="netstatæŸ¥çœ‹ç½‘ç»œè¿æ¥çŠ¶æ€åŠç«¯å£"><a href="#netstatæŸ¥çœ‹ç½‘ç»œè¿æ¥çŠ¶æ€åŠç«¯å£" class="headerlink" title="netstatæŸ¥çœ‹ç½‘ç»œè¿æ¥çŠ¶æ€åŠç«¯å£"></a>netstatæŸ¥çœ‹ç½‘ç»œè¿æ¥çŠ¶æ€åŠç«¯å£</h1><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œnetstatæœ€å¸¸ç”¨çš„æ“ä½œæ˜¯æŸ¥çœ‹ç½‘ç»œè¿æ¥æƒ…å†µã€‚é€šè¿‡ä½¿ç”¨netstatå‘½ä»¤ï¼Œå¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿäº†è§£å½“å‰ç³»ç»Ÿä¸Šçš„æ‰€æœ‰ç½‘ç»œè¿æ¥ï¼ŒåŒ…æ‹¬æ­£åœ¨ç›‘å¬çš„ç«¯å£ã€å»ºç«‹çš„è¿æ¥ã€è¿æ¥çŠ¶æ€ç­‰ä¿¡æ¯ã€‚è¿™å¯¹äºæ’æŸ¥ç½‘ç»œé—®é¢˜å’Œç›‘æ§ç³»ç»ŸçŠ¶æ€éå¸¸æœ‰ç”¨ã€‚å¦å¤–ï¼Œnetstatè¿˜å¯ä»¥ç”¨äºæ£€æŸ¥ç½‘ç»œå®‰å…¨ï¼Œä¾‹å¦‚æŸ¥çœ‹å“ªäº›ç«¯å£æ­£åœ¨è¢«å ç”¨ï¼Œæ˜¯å¦æœ‰ä¸å®‰å…¨çš„è¿æ¥ç­‰ã€‚</p><p>ä»¥ä¸‹æ˜¯netstatå‘½ä»¤çš„å¸¸ç”¨å‚æ•°å’Œç”¨æ³•ï¼š</p><ol><li>æŸ¥çœ‹æ‰€æœ‰çš„ç½‘ç»œè¿æ¥çŠ¶æ€ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -a</span><br><span class="line">netstat -an æ·»åŠ -nå‚æ•°çš„ç›®çš„æ˜¯ï¼šä¸å°†ç«¯å£å’ŒIPåœ°å€è½¬æ¢ä¸ºåç§°ï¼Œè€Œæ˜¯ç›´æ¥æ˜¾ç¤ºæ•°å­—æ ¼å¼çš„IPåœ°å€å’Œç«¯å£å·</span><br></pre></td></tr></table></figure><p><strong>LISTENING çŠ¶æ€</strong>ï¼šè¡¨ç¤ºè¯¥ç«¯å£å·²å ç”¨ï¼Œæ­£åœ¨ç›‘å¬ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥ã€‚<br><strong>CONNECTEDçŠ¶æ€</strong>ï¼šè¡¨ç¤ºç½‘ç»œè¿æ¥å·²å»ºç«‹ï¼Œä½†å¹¶æ²¡æœ‰å¼€å§‹æ•°æ®ä¼ è¾“ã€‚<br><strong>ESTABLISHED çŠ¶æ€</strong>ï¼šè¡¨ç¤ºç½‘ç»œå·²è¿æ¥ï¼Œæ•°æ®æ­£åœ¨ä¼ è¾“ä¸­ã€‚<br><strong>TIME_WAIT çŠ¶æ€</strong>ï¼šè¡¨ç¤ºè¿æ¥å·²ç»è¢«ç»ˆæ­¢ï¼Œåœ¨åŒæ–¹éƒ½å®Œæˆæ•°æ®ä¼ è¾“åï¼Œè¯¥è¿æ¥ä¼šè¿›å…¥<code>TIME_WAIT</code>çŠ¶æ€ï¼Œå¹¶ç­‰å¾…ä¸€æ®µæ—¶é—´åå…³é—­ã€‚</p><ol start="2"><li>æŸ¥çœ‹<strong>æ‰€æœ‰å¤„äºç›‘å¬çŠ¶æ€</strong>çš„è¿æ¥ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -l</span><br></pre></td></tr></table></figure><ol start="3"><li>æŸ¥çœ‹æ‰€æœ‰TCPè¿æ¥çŠ¶æ€ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -t</span><br></pre></td></tr></table></figure><ol start="4"><li>æŸ¥çœ‹æ‰€æœ‰UDPè¿æ¥çŠ¶æ€ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -u</span><br></pre></td></tr></table></figure><ol start="5"><li>æŸ¥çœ‹æ‰€æœ‰å¤„äºCONNECTEDçŠ¶æ€çš„è¿æ¥ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -o</span><br></pre></td></tr></table></figure><ol start="6"><li>æŸ¥çœ‹æŒ‡å®šç«¯å£çš„ç½‘ç»œè¿æ¥çŠ¶æ€ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -an | grep ç«¯å£å·</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼ŒæŸ¥çœ‹80ç«¯å£çš„ç½‘ç»œè¿æ¥çŠ¶æ€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -an | grep :80</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬2ç«  ç£ç›˜ä¸æ–‡ä»¶ç®¡ç†</title>
      <link href="/posts/15060.html"/>
      <url>/posts/15060.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="tip info faa-horizontal animated"><p>å°‘å¹´çš„è‚©è†€ï¼Œå°±è¯¥è¿™æ ·æ‰å¯¹å˜›ï¼Œä»€ä¹ˆå®¶å›½ä»‡æ¨ï¼Œæµ©ç„¶æ­£æ°”çš„ï¼Œéƒ½ä¸è¦æ€¥ï¼Œå…ˆæŒ‘èµ·æ¸…é£æ˜æœˆã€æ¨æŸ³ä¾ä¾å’Œè‰é•¿èºé£ï¼Œå°‘å¹´éƒçš„è‚©å¤´ï¼Œæœ¬å°±åº”å½“æ»¡æ˜¯ç¾å¥½çš„äº‹ç‰©å•Š</p></div><a href="https://www.bilibili.com/video/BV1Nb421a7TV/?spm_id_from=333.999.list.card_archive.click">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/20240815134316.png"></a><h1 id="ç£ç›˜ç®¡ç†"><a href="#ç£ç›˜ç®¡ç†" class="headerlink" title="ç£ç›˜ç®¡ç†"></a>ç£ç›˜ç®¡ç†</h1><h2 id="windowså’ŒLinuxç£ç›˜ç®¡ç†çš„åŒºåˆ«"><a href="#windowså’ŒLinuxç£ç›˜ç®¡ç†çš„åŒºåˆ«" class="headerlink" title="windowså’ŒLinuxç£ç›˜ç®¡ç†çš„åŒºåˆ«"></a>windowså’ŒLinuxç£ç›˜ç®¡ç†çš„åŒºåˆ«</h2><h3 id="windowsèµ„æºç®¡ç†æ–¹å¼"><a href="#windowsèµ„æºç®¡ç†æ–¹å¼" class="headerlink" title="windowsèµ„æºç®¡ç†æ–¹å¼"></a>windowsèµ„æºç®¡ç†æ–¹å¼</h3><p><img src="https://i0.hdslb.com/bfs/article/a21d17262069dc999747d412e1e75776645325325.png" alt="image.png"></p><ul><li>ç³»ç»Ÿä¸€èˆ¬å®‰è£…åœ¨Cç›˜</li><li>Cç›˜ä¸‹çš„â€Windowsâ€ç›®å½•æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒ</li><li>Cç›˜ä¸‹çš„â€Program Filesâ€ç›®å½•ä¸‹å®‰è£…è½¯ä»¶</li><li>Cç›˜ä¸‹çš„â€ç”¨æˆ·â€ç›®å½•æ˜¯æ‰€æœ‰çš„ç”¨æˆ·ï¼ŒåŒ…æ‹¬è¶…çº§ç®¡ç†å‘˜ä¹Ÿåœ¨å…¶ä¸­</li><li>windowsæ“ä½œç³»ç»Ÿåˆ†ä¸ºCç›˜ã€Dç›˜ã€Eç›˜ç­‰ï¼Œæ¯ä¸ªç£ç›˜ä¸‹é‡‡ç”¨æ–‡æ¡£æ ‘çš„å½¢å¼ç»„ç»‡æ–‡ä»¶</li></ul><h3 id="Linuxèµ„æºç®¡ç†æ–¹å¼"><a href="#Linuxèµ„æºç®¡ç†æ–¹å¼" class="headerlink" title="Linuxèµ„æºç®¡ç†æ–¹å¼"></a>Linuxèµ„æºç®¡ç†æ–¹å¼</h3><p><img src="https://i0.hdslb.com/bfs/article/cab02e653fe467bc918337a044807a37645325325.png" alt="image.png"><br>linuxæ“ä½œç³»ç»Ÿé‡‡ç”¨ä¸€ä¸ªæ–‡æ¡£æ ‘æ¥ç»„ç»‡æ‰€æœ‰çš„èµ„æºã€‚<br>è¿™æ£µæ ‘çš„æ ¹ç›®å½•çš„åå­—å«åšï¼š&#x2F;<br>&#x2F; æ˜¯ä¸€ä¸ªç›®å½•åå­—ï¼Œæ˜¯linuxæ“ä½œç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶çš„æ ¹ã€‚<br>&#x2F; ç›®å½•ä¸‹åˆæœ‰å¾ˆå¤šå…¶ä»–çš„å­ç›®å½•ï¼Œæ¯”å¦‚ï¼šdev home lib â€¦..</p><p>æ¯”è¾ƒé‡è¦çš„å‡ ä¸ªç›®å½•æ¦‚è¿°ï¼š</p><ol><li>&#x2F;binç›®å½•ï¼šåŒ…å«ä¸€äº›å¸¸ç”¨çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚catã€lsã€mkdirã€rmç­‰ã€‚è¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶åœ¨ç³»ç»Ÿè¿è¡Œæ—¶å§‹ç»ˆå¯ç”¨ï¼Œå¯ä»¥è¢«ä»»ä½•ç”¨æˆ·è¿è¡Œã€‚</li><li>&#x2F;etcç›®å½•ï¼šåŒ…å«äº†ç³»ç»Ÿçš„å¤§å¤šæ•°é…ç½®æ–‡ä»¶ï¼Œå¦‚ç½‘ç»œé…ç½®ã€ç”¨æˆ·ç™»å½•ä¿¡æ¯ã€è½¯ä»¶åŒ…å®‰è£…é…ç½®ç­‰ã€‚å¤§å¤šæ•°åº”ç”¨ç¨‹åºåœ¨å®‰è£…åéƒ½ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºè‡ªå·±çš„å­ç›®å½•ï¼Œä»¥ä¾¿å­˜å‚¨è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚</li><li>&#x2F;homeç›®å½•ï¼šåŒ…å«Linuxç³»ç»Ÿç”¨æˆ·çš„å®¶ç›®å½•ï¼Œæ¯ä¸ªç”¨æˆ·çš„æ•°æ®å’Œä¸ªäººæ–‡ä»¶éƒ½å­˜æ”¾åœ¨è¿™é‡Œã€‚</li><li>&#x2F;libç›®å½•ï¼šåŒ…å«ä¸€äº›å…±äº«åº“æ–‡ä»¶ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡è¿™äº›å…±äº«åº“æ–‡ä»¶è°ƒç”¨ç³»ç»Ÿçš„åŠŸèƒ½ï¼Œå¦‚libc.soï¼Œæ˜¯Cè¯­è¨€å‡½æ•°åº“çš„å…±äº«åº“ã€‚</li><li>&#x2F;rootç›®å½•ï¼šæ˜¯ç³»ç»Ÿç®¡ç†è€…ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰çš„å®¶ç›®å½•ã€‚</li><li>&#x2F;tmpç›®å½•ï¼šæ˜¯ç³»ç»Ÿä¸­çš„ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥åœ¨è¿™é‡Œåˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œæ–‡ä»¶ç³»ç»Ÿä¼šå®šæœŸæ¸…ç©ºè¯¥ç›®å½•ï¼Œä»¥é˜²æ­¢æ–‡ä»¶æ»ç•™ã€‚</li><li>&#x2F;usrç›®å½•ï¼šåŒ…å«ç³»ç»Ÿå¯åŠ¨åï¼Œæ‰€æœ‰ç”¨æˆ·èƒ½è®¿é—®çš„åº”ç”¨ç¨‹åºå’Œæ•°æ®æ–‡ä»¶ã€‚</li><li>&#x2F;var ç›®å½•ï¼šåŒ…å«å¯å˜æ•°æ®çš„æ–‡ä»¶ã€‚åŒ…æ‹¬æ—¥å¿—ã€æ•°æ®åº“ã€WebæœåŠ¡å™¨ã€é‚®ä»¶é˜Ÿåˆ—ç­‰æ–‡ä»¶ã€‚å®ƒæ˜¯ä¸€ä¸ªç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•ï¼Œå¦‚æœåœ¨å…¶ä»–ç›®å½•æœ‰å¯å˜æ•°æ®çš„è¯ï¼Œå®ƒä»¬éƒ½åº”å½“è¢«é“¾æ¥åˆ° &#x2F;var ä¸­ã€‚</li></ol><h2 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h2><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥è¯¥å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰æ‰€åœ¨ä½ç½®ï¼Œä¾‹å¦‚ï¼š<br><img src="https://i0.hdslb.com/bfs/article/2d5d514b5970307b876fdee0c380a772645325325.png" alt="image.png"><br>å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰æ‰€åœ¨ä½ç½®æ˜¯æ ¹ç›®å½•ã€‚</p><h2 id="manå’Œâ€“help"><a href="#manå’Œâ€“help" class="headerlink" title="manå’Œâ€“help"></a>manå’Œâ€“help</h2><h3 id="manå‘½ä»¤"><a href="#manå‘½ä»¤" class="headerlink" title="manå‘½ä»¤"></a>manå‘½ä»¤</h3><p>manå‘½ä»¤å¯ä»¥æŸ¥çœ‹æŸä¸ªå‘½ä»¤çš„å…·ä½“ç”¨æ³•ï¼Œä¾‹å¦‚ï¼šman pwdã€‚å¦‚æœä¸€ä¸ªå‘½ä»¤å…·ä½“çš„ç”¨æ³•ä½ ä¸çŸ¥é“çš„è¯ï¼Œé—®é‚£ä¸ªç”·äººå°±è¡Œäº†ã€‚<br>manå‘½ä»¤æ€ä¹ˆè¿›è¡Œç¿»é¡µï¼Ÿç©ºæ ¼<br>manå‘½ä»¤æ€ä¹ˆé€€å‡ºï¼Ÿq</p><h3 id="â€“helpå‚æ•°"><a href="#â€“helpå‚æ•°" class="headerlink" title="â€“helpå‚æ•°"></a>â€“helpå‚æ•°</h3><p>â€“helpï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ä¸€ä¸ªå‘½ä»¤çš„å¸®åŠ©ï¼Œä¸€æ¬¡æ€§åˆ—å‡ºã€‚ç”¨æ³•ï¼štouch â€“help</p><h2 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h2><h3 id="ls-1"><a href="#ls-1" class="headerlink" title="ls"></a>ls</h3><p>lså‘½ä»¤æ˜¯listçš„æ„æ€ï¼šåˆ—å‡ºï¼Œåˆ—è¡¨ç­‰ã€‚<br>é€šè¿‡lså‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„å­ç›®å½•å’Œå­æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š<br><img src="https://i0.hdslb.com/bfs/article/218c1b3c044ba85d97e12e898a6a20b7645325325.png" alt="image.png"></p><h3 id="ls-a"><a href="#ls-a" class="headerlink" title="ls -a"></a>ls -a</h3><p>aæ˜¯allçš„æ„æ€ï¼Œè¡¨ç¤ºæ‰€æœ‰ã€‚<br>åˆ—å‡ºåŒ…å«éšè—æ–‡ä»¶åœ¨å†…çš„æ‰€æœ‰çš„æ–‡ä»¶ã€‚ï¼ˆåœ¨Linuxæ“ä½œç³»ç»Ÿä¸­éšè—æ–‡ä»¶çš„æ–‡ä»¶åé€šå¸¸ä»¥â€.â€å¼€å§‹ï¼‰<br>â€‹<img src="https://i0.hdslb.com/bfs/article/43eb43580ff8ad5ce4a3a8fe524d627e645325325.png" alt="image.png">â€‹</p><h3 id="ls-l"><a href="#ls-l" class="headerlink" title="ls -l"></a>ls -l</h3><p>-l å‚æ•°è¡¨ç¤ºä½¿ç”¨é•¿æ ¼å¼è¾“å‡ºï¼šlong format<br>è¾“å‡ºç»“æœä¸­æ¯ä¸€åˆ—çš„å«ä¹‰å¦‚ä¸‹ï¼š<br><img src="https://i0.hdslb.com/bfs/article/ebcbe2e619c8c230daa4b7a5b3d76998645325325.png" alt="image.png"></p><p>æ³¨æ„æƒé™éƒ¨åˆ†ï¼š<br><img src="https://i0.hdslb.com/bfs/article/f417d6df4b5430c52c17d36549003b2b645325325.png" alt="image.png"></p><p>ls -l å¯ä»¥ç®€å†™ä¸ºï¼šll</p><h3 id="ls-al"><a href="#ls-al" class="headerlink" title="ls -al"></a>ls -al</h3><p>ls -alç­‰åŒäºï¼šls -a + ls -lçš„åŠŸèƒ½ã€‚<br>å¯ä»¥ç®€å†™ä¸ºï¼šll -a</p><h3 id="ll-a-home-powernode"><a href="#ll-a-home-powernode" class="headerlink" title="ll -a &#x2F;home&#x2F;powernode"></a>ll -a &#x2F;home&#x2F;powernode</h3><p>å¯ä»¥æŒ‡å®šæŸ¥çœ‹æŸä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶è¯¦æƒ…ã€‚</p><h2 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h2><p>cdå‘½ä»¤ï¼šchange directory<br>cdå‘½ä»¤ç”¨æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd è·¯å¾„å</span><br></pre></td></tr></table></figure><p>cd .. å›åˆ°ä¸Šçº§ç›®å½•</p><p>cd ..&#x2F;.. å›åˆ°ä¸Šçº§ç›®å½•çš„ä¸Šçº§ç›®å½•</p><p>cd ~ å›åˆ°ä¸»ç›®å½•</p><p>cd &#x2F; å›åˆ°æ ¹ç›®å½•</p><p>cd &#x2F;home&#x2F;powernode åˆ‡æ¢åˆ° &#x2F;home&#x2F;powernodeç›®å½•ä¸‹</p><p>cd abc åˆ‡æ¢åˆ°å½“å‰ç›®å½•ä¸‹çš„abcç›®å½•ä¸­</p><ul><li>è¿™é‡Œçš„abcæ²¡æœ‰ä»¥ &#x2F; å¼€å§‹ï¼Œè¡¨ç¤ºè¿™ä¸ªè·¯å¾„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œç›¸å¯¹è·¯å¾„æŒ‡çš„æ˜¯ä»å½“å‰æ‰€åœ¨ç›®å½•ä½œä¸ºèµ·ç‚¹å¼€å§‹æ‰¾ã€‚</li><li>ä»¥ &#x2F; å¼€å§‹çš„è·¯å¾„è¢«ç§°ä¸ºç»å¯¹è·¯å¾„ã€‚</li><li>cd å‘½ä»¤åé¢æ—¢å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ã€‚åªè¦è·¯å¾„æ­£ç¡®å³å¯ã€‚</li></ul><h2 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h2><p>æ¸…å±</p><h1 id="æ–‡ä»¶ç®¡ç†"><a href="#æ–‡ä»¶ç®¡ç†" class="headerlink" title="æ–‡ä»¶ç®¡ç†"></a>æ–‡ä»¶ç®¡ç†</h1><h2 id="æ–°å»ºç›®å½•"><a href="#æ–°å»ºç›®å½•" class="headerlink" title="æ–°å»ºç›®å½•"></a>æ–°å»ºç›®å½•</h2><p>mkdir abc ï¼ˆmkdiræ˜¯æ–°å»ºç›®å½•çš„å‘½ä»¤ï¼Œabcæ˜¯ä¸€ä¸ªç›®å½•åï¼‰<br>mkdir -p a&#x2F;b&#x2F;c ï¼ˆ-på‚æ•°è¡¨ç¤ºï¼Œä¸€æ¬¡åˆ›å»ºå¤šé‡ç›®å½•ï¼‰<br>mkdir -p a&#x2F;kk&#x2F;ff ï¼ˆè™½ç„¶aå·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯ä¸ä¼šæŠ¥é”™ï¼Œç›´æ¥åœ¨aç›®å½•ä¸‹æ–°å»ºkkç›®å½•ï¼Œkkç›®å½•ä¸‹æ–°å»ºffç›®å½•ã€‚ï¼‰</p><h2 id="æ–°å»ºæ–‡ä»¶"><a href="#æ–°å»ºæ–‡ä»¶" class="headerlink" title="æ–°å»ºæ–‡ä»¶"></a>æ–°å»ºæ–‡ä»¶</h2><p>touch æ–‡ä»¶åï¼Œä¾‹å¦‚ï¼štouch Hello.java è¡¨ç¤ºåœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶Hello.java<br>touch a.txt b.txt c.txt ä¸€æ¬¡æ€§åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæ–°å»ºå¤šä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶åä¹‹é—´é‡‡ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><h2 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h2><p>ç”¨æ³•ï¼šrm æ–‡ä»¶å</p><p>rm a.txtï¼ˆåˆ é™¤å½“å‰ç›®å½•ä¸‹çš„a.txtæ–‡ä»¶ï¼‰ã€‚è¿™ç§æ–¹å¼ä¼šè¯¢é—®ï¼Œæ˜¯å¦åˆ é™¤ï¼Œè¾“å…¥yè¡¨ç¤ºåˆ é™¤ï¼Œè¾“å…¥nè¡¨ç¤ºä¸åˆ é™¤ã€‚</p><p>ä¸æƒ³è®©ç³»ç»Ÿè¯¢é—®ä½ æ˜¯å¦åˆ é™¤ï¼Œæ€ä¹ˆè¿›è¡Œå¼ºè¡Œåˆ é™¤å‘¢ï¼Ÿ -f å‚æ•°å¯ä»¥åšåˆ°ã€‚</p><ul><li>rm -f a.txtï¼ˆå¼ºè¡Œåˆ é™¤a.txtæ–‡ä»¶ï¼Œä¸è¯¢é—®ï¼‰</li></ul><p>åˆ é™¤å¤šä¸ªæ–‡ä»¶</p><ul><li>rm -f b.txt c.txt ï¼ˆåˆ é™¤b.txtå’Œc.txtæ–‡ä»¶ï¼‰</li><li>rm -f *.javaï¼ˆåˆ é™¤æ‰€æœ‰.javaç»“å°¾çš„æ–‡ä»¶ï¼Œæ¨¡ç³ŠåŒ¹é…çš„æ–¹å¼ã€‚ï¼‰</li></ul><h2 id="åˆ é™¤ç›®å½•"><a href="#åˆ é™¤ç›®å½•" class="headerlink" title="åˆ é™¤ç›®å½•"></a>åˆ é™¤ç›®å½•</h2><p>åˆ é™¤ç›®å½•çš„æ—¶å€™ï¼Œå¿…é¡»æ·»åŠ -rå‚æ•°ï¼Œè¿™ä¸ª-rè¡¨ç¤ºåˆ é™¤ä¸€ä¸ªç›®å½•ï¼Œæˆ–è€…é€’å½’åˆ é™¤ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•ä»¥åŠå­æ–‡ä»¶ã€‚<br>rm -r xï¼ˆåˆ é™¤å½“å‰ç›®å½•ä¸‹çš„xç›®å½•ï¼Œä»¥åŠxç›®å½•ä¸‹æ‰€æœ‰çš„å­ç›®å½•ï¼‰ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼éœ€è¦ç”¨æˆ·è‡ªå·±è¾“å…¥yè¿›è¡Œç¡®è®¤åˆ é™¤ã€‚<br>rm -rf x ï¼ˆå¼ºè¡Œåˆ é™¤xç›®å½•ä»¥åŠxç›®å½•ä¸‹æ‰€æœ‰çš„å­ç›®å½•ï¼Œå¹¶ä¸”ä¸è¯¢é—®ã€‚åŒ…æ‹¬å­æ–‡ä»¶ä¹Ÿå…¨éƒ¨åˆ é™¤ã€‚ï¼‰</p><h2 id="æ–‡ä»¶æ‹·è´"><a href="#æ–‡ä»¶æ‹·è´" class="headerlink" title="æ–‡ä»¶æ‹·è´"></a>æ–‡ä»¶æ‹·è´</h2><p>cp a.txt aa.txtï¼ˆå¤åˆ¶å½“å‰ç›®å½•ä¸‹çš„a.txtæ–‡ä»¶ï¼Œç²˜è´´åˆ°å½“å‰ç›®å½•ä¸‹å¹¶ä¸”ç”Ÿæˆæ–°æ–‡ä»¶aa.txtï¼‰</p><p>è¯­æ³•å¦‚ä¸‹ï¼š</p><ul><li>cp file1 file2</li><li>file1å°±æ˜¯è¢«æ‹·è´çš„æ–‡ä»¶</li><li>file2å°±æ˜¯ç²˜è´´ä¹‹åçš„æ–‡ä»¶</li><li>file1å’Œfile2å¯ä»¥æ·»åŠ è·¯å¾„ã€‚</li><li>cp è¢«æ‹·è´æ–‡ä»¶çš„è·¯å¾„ ç²˜è´´åˆ°å“ªé‡Œçš„è·¯å¾„</li></ul><p>cp Hello2.java a&#x2F;Hello3.java</p><h2 id="ç›®å½•æ‹·è´"><a href="#ç›®å½•æ‹·è´" class="headerlink" title="ç›®å½•æ‹·è´"></a>ç›®å½•æ‹·è´</h2><p>cp ç›®å½•å1 ç›®å½•å2</p><ul><li>ç›®å½•å1 æ˜¯æ‹·è´æº</li><li>ç›®å½•å2 æ˜¯æ‹·è´åˆ°å“ªé‡Œ</li></ul><p>-rf ï¼ˆ-ré€’å½’æ‹·è´ï¼Œ-få¼ºè¡Œæ‹·è´ï¼‰</p><p>cp -rf a abcï¼ˆå°†å½“å‰ç›®å½•ä¸‹çš„aç›®å½•æ‹·è´åˆ°å½“å‰ç›®å½•ä¸‹çš„abcç›®å½•å½“ä¸­ï¼‰</p><p>cp -rf &#x2F;home&#x2F;powernode&#x2F;a &#x2F;home&#x2F;powernode&#x2F;x ï¼ˆå°†&#x2F;home&#x2F;powernode&#x2F;aç›®å½•æ‹·è´åˆ°&#x2F;home&#x2F;powernode&#x2F;xç›®å½•ä¸‹ï¼‰</p><h2 id="ç§»åŠ¨"><a href="#ç§»åŠ¨" class="headerlink" title="ç§»åŠ¨"></a>ç§»åŠ¨</h2><p>mv Hello.java xï¼ˆå°†å½“å‰ç›®å½•ä¸‹çš„Hello.javaæ–‡ä»¶ç§»åŠ¨åˆ°xç›®å½•ä¸‹ï¼‰</p><p>mv &#x2F;home&#x2F;bjpowernode&#x2F;Hello2.java &#x2F;home&#x2F;bjpowernode&#x2F;x ï¼ˆå°†&#x2F;home&#x2F;bjpowernode&#x2F;Hello2.java ç§»åŠ¨åˆ° &#x2F;home&#x2F;bjpowernode&#x2F;xç›®å½•ä¸‹ï¼‰</p><p>mv x fï¼ˆå°†xç›®å½•ç§»åŠ¨åˆ°fç›®å½•ä¸‹ï¼‰</p><h2 id="æ–‡ä»¶æœç´¢"><a href="#æ–‡ä»¶æœç´¢" class="headerlink" title="æ–‡ä»¶æœç´¢"></a>æ–‡ä»¶æœç´¢</h2><p>åœ¨CentOSä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è¿›è¡Œæ–‡ä»¶æœç´¢ï¼š</p><ol><li>findå‘½ä»¤ï¼šä½¿ç”¨findå‘½ä»¤å¯ä»¥åœ¨æŒ‡å®šç›®å½•ä¸‹æœç´¢æ–‡ä»¶ã€‚å¯ä»¥ä½¿ç”¨ä¸åŒçš„é€‰é¡¹æ¥æŒ‡å®šæœç´¢çš„æ–‡ä»¶ç±»å‹ã€å¤§å°ã€ä¿®æ”¹æ—¶é—´ç­‰æ¡ä»¶ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /usr/local -name &quot;catalina.out&quot;</span><br></pre></td></tr></table></figure><ol start="2"><li>whereiså‘½ä»¤ï¼šä½¿ç”¨whereiså‘½ä»¤å¯ä»¥åœ¨ç³»ç»Ÿä¸­æœç´¢æŒ‡å®šçš„å‘½ä»¤çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis startup.sh</span><br></pre></td></tr></table></figure><ol start="3"><li>whichå‘½ä»¤ï¼šä½¿ç”¨whichå‘½ä»¤ä¹Ÿå¯ä»¥åœ¨ç³»ç»Ÿä¸­æœç´¢æŒ‡å®šçš„å‘½ä»¤çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which command</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶çš„inodeå·"><a href="#æ–‡ä»¶çš„inodeå·" class="headerlink" title="æ–‡ä»¶çš„inodeå·"></a>æ–‡ä»¶çš„inodeå·</h2><p>åœ¨Linuxæ“ä½œç³»ç»Ÿä¸­ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æœ‰è‡ªå·±çš„èº«ä»½è¯å·ï¼šinodeå·ï¼ˆindex nodeï¼šç´¢å¼•èŠ‚ç‚¹å·ï¼‰<br>æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰è‡ªå·±çš„inodeå·ï¼Œå¹¶ä¸”ä¸ä¼šé‡å¤ï¼Œåœ¨Linuxæ“ä½œç³»ç»Ÿä¸­é€šè¿‡inodeæ¥åŒºåˆ†ä¸¤ä¸ªæ–‡ä»¶ã€‚<br>æŸ¥çœ‹æ–‡ä»¶çš„inodeå·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -i HelloWorld.java</span><br></pre></td></tr></table></figure><p><img src="https://i0.hdslb.com/bfs/article/4abf40fe4336fb8ee6aa82c371e5fc77645325325.png" alt="image.png">â€‹</p><h1 id="è½¯é“¾æ¥ä¸ç¡¬é“¾æ¥"><a href="#è½¯é“¾æ¥ä¸ç¡¬é“¾æ¥" class="headerlink" title="è½¯é“¾æ¥ä¸ç¡¬é“¾æ¥"></a>è½¯é“¾æ¥ä¸ç¡¬é“¾æ¥</h1><h2 id="è½¯é“¾æ¥"><a href="#è½¯é“¾æ¥" class="headerlink" title="è½¯é“¾æ¥"></a>è½¯é“¾æ¥</h2><p>è½¯é“¾æ¥ç±»ä¼¼äºwindowsæ“ä½œç³»ç»Ÿä¸­çš„å¿«æ·æ–¹å¼ã€‚</p><p>è½¯é“¾æ¥çš„ä½œç”¨ï¼šæ–¹ä¾¿æ“ä½œã€‚å¿«æ·ã€‚ã€‚ã€‚æœ‰äº›ç»å¸¸è¢«æ“ä½œçš„æ–‡ä»¶ï¼Œè—çš„å¾ˆæ·±ï¼Œæ¯ä¸€æ¬¡æ‰¾å¾ˆéº»çƒ¦ï¼Œæ€ä¹ˆåŠï¼Œå¯ä»¥ç»™è¿™äº›ç»å¸¸æ“ä½œçš„æ–‡ä»¶åˆ›å»ºè½¯é“¾æ¥ã€‚é€šè¿‡è½¯é“¾æ¥å¿«æ·çš„æ“ä½œç›®æ ‡æ–‡ä»¶ã€‚</p><p>æ€ä¹ˆåˆ›å»ºè½¯é“¾æ¥å‘¢ï¼ˆåœ¨linuxå½“ä¸­æ€ä¹ˆåˆ›å»ºå¿«æ·æ–¹å¼å‘¢ï¼‰ï¼Ÿ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s HelloWorld.java HelloWorld.java2</span><br></pre></td></tr></table></figure><ul><li>è¡¨ç¤ºç»™hello.javaæ–‡ä»¶åˆ›å»ºä¸€ä¸ªhello2.javaçš„å¿«æ·æ–¹å¼ï¼ˆè½¯é“¾æ¥ï¼‰</li><li>hello.javaæ˜¯ç›®æ ‡æ–‡ä»¶ã€‚hello2.javaæ–‡ä»¶æ˜¯è½¯é“¾æ¥ï¼Œå±äºå¿«æ·æ–¹å¼</li></ul><p>è½¯é“¾æ¥å’Œç›®æ ‡æ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸¤ä¸ªæ–‡ä»¶ï¼Œåœ¨è½¯é“¾æ¥ä¸­å­˜å‚¨çš„æ˜¯ç›®æ ‡æ–‡ä»¶çš„è·¯å¾„ã€‚è½¯é“¾æ¥å…³è”çš„ç›®æ ‡æ–‡ä»¶å¦‚æœè¢«åˆ é™¤ï¼Œè½¯é“¾æ¥è¿™ä¸ªå¿«æ·æ–¹å¼ä¹Ÿå°±å¤±æ•ˆäº†ã€‚<br>å¯ä»¥é€šè¿‡æŸ¥çœ‹inodeå·ï¼Œæ¥è¯æ˜è½¯é“¾æ¥æ˜¯ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/128750097ccb31a72d0938dd08818365645325325.png" alt="image.png">â€‹</p><h2 id="ç¡¬é“¾æ¥"><a href="#ç¡¬é“¾æ¥" class="headerlink" title="ç¡¬é“¾æ¥"></a>ç¡¬é“¾æ¥</h2><p>æ€ä¹ˆåˆ›å»ºç¡¬é“¾æ¥ï¼Ÿï¼ˆæŠŠè½¯é“¾æ¥åˆ›å»ºè¿‡ç¨‹ä¸­çš„ -s å»æ‰å°±æ˜¯åˆ›å»ºç¡¬é“¾æ¥çš„è¯­æ³•ã€‚ï¼‰</p><p>åˆ›å»ºç¡¬é“¾æ¥çš„è¯­æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln HelloWorld.java HelloWorld.java2</span><br></pre></td></tr></table></figure><p>é€šè¿‡æµ‹è¯•å¾—çŸ¥ï¼šinodeå·ä¸€è‡´ï¼Œè¯´æ˜åˆ›å»ºçš„ç¡¬é“¾æ¥å’ŒåŸæ–‡ä»¶æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ã€‚<br><img src="https://i0.hdslb.com/bfs/article/b0b7bbdf6e0bae52be886703723318df645325325.png" alt="image.png"></p><p>é€šè¿‡æ“ä½œç¡¬é“¾æ¥ï¼Œç›®æ ‡æ–‡ä»¶ä¼šæ”¹å˜å—ï¼Ÿæ“ä½œç›®æ ‡æ–‡ä»¶ï¼Œç¡¬é“¾æ¥ä¼šæ”¹å˜å—ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šå½“ç„¶ä¼šã€‚</p><p>ç¡¬é“¾æ¥çš„ç‰¹ç‚¹ï¼š</p><ul><li>ä¸»è¦æ˜¯ç”¨æ¥åšï¼šé‡è¦æ–‡ä»¶å¤‡ä»½ã€‚</li><li>ç›®æ ‡æ–‡ä»¶åˆ é™¤ä¹‹åï¼Œç¡¬é“¾æ¥åªè¦åœ¨ï¼Œæ–‡ä»¶å…¶å®å°±æ²¡æœ‰è¢«åˆ é™¤ã€‚æˆ–è€…è¯´ç¡¬é“¾æ¥åˆ é™¤ä¹‹åï¼Œç›®æ ‡æ–‡ä»¶è¿˜åœ¨ã€‚æ€»ç»“ä¸€å¥è¯ï¼šç›®æ ‡æ–‡ä»¶æˆ–è€…ç¡¬é“¾æ¥åªè¦æœ‰ä¸€ä¸ªå­˜åœ¨ï¼Œæ–‡ä»¶å°±æ²¡æœ‰è¢«çœŸæ­£çš„åˆ é™¤ã€‚</li><li>ç¡¬é“¾æ¥æœºåˆ¶å’Œå¤åˆ¶ç²˜è´´è¿˜ä¸ä¸€æ ·ï¼Œå¤åˆ¶ç²˜è´´ä¹‹åçš„æ–‡ä»¶ï¼Œä¿®æ”¹å…¶ä¸­ä¹‹ä¸€ï¼Œå¦ä¸€ä¸ªä¸ä¼šå˜ï¼Œä½†æ˜¯ç¡¬é“¾æ¥å°±ä¸ä¸€æ ·äº†ã€‚</li></ul><h1 id="æ–‡ä»¶å‹ç¼©ä¸è§£å‹ç¼©"><a href="#æ–‡ä»¶å‹ç¼©ä¸è§£å‹ç¼©" class="headerlink" title="æ–‡ä»¶å‹ç¼©ä¸è§£å‹ç¼©"></a>æ–‡ä»¶å‹ç¼©ä¸è§£å‹ç¼©</h1><p>taræ˜¯åœ¨linuxç³»ç»Ÿå½“ä¸­å®Œæˆå‹ç¼©å’Œè§£å‹ç¼©çš„å‘½ä»¤ã€‚<br>å‹ç¼©åçš„æ–‡ä»¶åˆè¢«ç§°ä¸º<strong>å½’æ¡£æ–‡ä»¶</strong>ã€‚</p><h2 id="tarå‘½ä»¤è¯¦è§£"><a href="#tarå‘½ä»¤è¯¦è§£" class="headerlink" title="tarå‘½ä»¤è¯¦è§£"></a>tarå‘½ä»¤è¯¦è§£</h2><p>tarå‘½ä»¤è¯­æ³•æ ¼å¼ï¼š tar å‚æ•° è¦å‹ç¼©çš„æˆ–è§£å‹çš„æ–‡ä»¶æˆ–ç›®å½•<br>tarå‘½ä»¤çš„å¸¸ç”¨å‚æ•°ï¼š</p><ul><li>zï¼šæŒ‡å®šæ˜¯å¦ä½¿ç”¨gzipå‹ç¼©æ–¹å¼å‹ç¼©ã€‚ï¼ˆæ‰©å±•åé€šå¸¸ä¸ºï¼štar.gzã€‚ç‰¹ç‚¹ï¼šé€Ÿåº¦æœ€å¿«ï¼‰</li><li>jï¼šæ˜¯å¦éœ€è¦ç”¨ bzip2 å‹ç¼©æ–¹å¼å‹ç¼©ã€‚ï¼ˆæ‰©å±•åé€šå¸¸ä¸ºï¼štar.bz2ã€‚ç‰¹ç‚¹ï¼šä½“ç§¯æœ€å°ï¼‰</li><li>cï¼šåˆ›å»ºå‹ç¼©ï¼ˆcreateï¼‰</li><li>xï¼šè§£å‹ç¼©</li><li>vï¼šæ˜¯å¦åœ¨å‹ç¼©çš„è¿‡ç¨‹ä¸­æ˜¾ç¤ºæ–‡ä»¶</li><li>fï¼šæŒ‡å®šå½’æ¡£æ–‡ä»¶åï¼ˆfileï¼‰ã€‚få‚æ•°åé¢å¿…é¡»ç´§è·Ÿæ–‡ä»¶åï¼Œä¸èƒ½åœ¨få‚æ•°åé¢å†åŠ å…¶ä»–å‚æ•°ã€‚</li><li>tï¼šæŸ¥çœ‹ tarfile é‡Œé¢çš„æ–‡ä»¶</li><li>Cï¼šæŒ‡å®šè§£å‹åˆ°çš„å…·ä½“ç›®å½•ã€‚æ³¨æ„æ˜¯å¤§å†™Cã€‚</li></ul><p>æ³¨æ„ï¼šcã€xã€tï¼Œè¿™ä¸‰ä¸ªå‚æ•°ä¸èƒ½å…±å­˜ï¼Œåªèƒ½å‡ºç°ä¸€ä¸ªã€‚</p><h2 id="å‹ç¼©"><a href="#å‹ç¼©" class="headerlink" title="å‹ç¼©"></a>å‹ç¼©</h2><p>å‹ç¼©ä¸€ä¸ªæ–‡ä»¶</p><ul><li>tar -zcvf mytxt.tar.gz log1.txt</li></ul><p>å‹ç¼©å¤šä¸ªæ–‡ä»¶</p><ul><li>tar -zcvf mytxt2.tar.gz log1.txt log2.txt log3.txt</li><li>tar -zcvf mytxt3.tar.gz *.txt</li></ul><p>å‹ç¼©ç›®å½•</p><ul><li>tar -zcvf mytxt4.tar.gz test ã€å°†testç›®å½•å‹ç¼©ä¸ºmytxt4.tar.gzã€‘</li></ul><h2 id="æŸ¥çœ‹å½’æ¡£æ–‡ä»¶"><a href="#æŸ¥çœ‹å½’æ¡£æ–‡ä»¶" class="headerlink" title="æŸ¥çœ‹å½’æ¡£æ–‡ä»¶"></a>æŸ¥çœ‹å½’æ¡£æ–‡ä»¶</h2><ul><li>tar -tf mytxt.tar.gz</li></ul><h2 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h2><p>tar -zxvf mytxt.tar.gz ã€è§£å‹åˆ°å½“å‰ç›®å½•ä¸‹ã€‘<br>tar -zxvf mytxt.tar.gz -C testã€å°†mytxt.tar.gzå‹ç¼©åŒ…è§£å‹åˆ°testç›®å½•ã€‘</p><h1 id="æ–‡ä»¶ç¼–è¾‘vi-vim"><a href="#æ–‡ä»¶ç¼–è¾‘vi-vim" class="headerlink" title="æ–‡ä»¶ç¼–è¾‘vi &amp; vim"></a>æ–‡ä»¶ç¼–è¾‘vi &amp; vim</h1><h2 id="viä¸vimæ¦‚è¿°"><a href="#viä¸vimæ¦‚è¿°" class="headerlink" title="viä¸vimæ¦‚è¿°"></a>viä¸vimæ¦‚è¿°</h2><p>vi å’Œ vim éƒ½æ˜¯åœ¨ Linux å’Œ Unix ä¸­å¸¸ç”¨çš„åŸºäºå­—ç¬¦ç»ˆç«¯çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚<br>vi æ˜¯ Unix æ—©æœŸæä¾›çš„æ ‡å‡†å‘½ä»¤è¡Œä¸‹çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ˜¯ä¸€æ¬¾éå¸¸å¼ºå¤§ã€é«˜æ•ˆçš„ç¼–è¾‘å™¨ï¼Œå¯ä»¥å¯¹æ–‡æœ¬è¿›è¡Œå¿«é€Ÿä¿®æ”¹å’Œç¼–è¾‘ï¼Œå…·æœ‰å¸¸è§ç¼–è¾‘å™¨çš„åŸºæœ¬åŠŸèƒ½ã€‚<br>vimï¼ˆVi Improvedï¼‰æ˜¯åœ¨viåŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›å’Œæ‰©å±•çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå®ƒä¿ç•™äº†viçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå¹¶æ·»åŠ äº†è®¸å¤šæ–°åŠŸèƒ½ï¼Œå¦‚åŸºæœ¬çš„ GUI ç•Œé¢ã€è¯­æ³•é«˜äº®ã€å¤šçº§æ’¤é”€&#x2F;é‡åšã€å¯¹é½ã€æ’ä»¶æ”¯æŒç­‰ç­‰ã€‚å¯ä»¥è¯´ vim æ˜¯å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¹‹ä¸€ï¼Œè¢«ä¼—å¤šçš„å¼€å‘è€…ã€ç®¡ç†å‘˜ã€å†™ä½œäººå‘˜å’Œçˆ±å¥½è€…ä½¿ç”¨ã€‚<br>é€šè¿‡ vi å’Œ vim å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä¸­æ‰“å¼€å¹¶ç¼–è¾‘æ–‡æœ¬æ–‡ä»¶ï¼Œè¿›è¡Œå„ç§ä¿®æ”¹å’Œç¼–è¾‘ï¼Œä¿å­˜åé€€å‡ºï¼Œæ˜¯ Linux å’Œ Unix ç³»ç»Ÿä¸­éå¸¸åŸºç¡€ã€å¸¸ç”¨çš„ä¸€ç§æ–‡æœ¬ç¼–è¾‘æ–¹å¼ã€‚<br>æ€»ä¹‹ï¼Œvi å’Œ vim å‡æ˜¯ä¸€æ¬¾ Linux å’Œ Unix ä¸­å¸¸ç”¨çš„åŸºäºå­—ç¬¦ç»ˆç«¯çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå…¶ä¸­ vim æ˜¯åœ¨ vi åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›å’Œæ‰©å±•çš„ç‰ˆæœ¬ã€‚</p><p>åœ¨ CentOS ä¸­ï¼Œç³»ç»Ÿé»˜è®¤å®‰è£…çš„æ˜¯ vim ç¼–è¾‘å™¨ï¼Œä½†æ˜¯ä¸ºäº†å…¼å®¹ vi ç¼–è¾‘å™¨çš„ä½¿ç”¨ä¹ æƒ¯ï¼ŒCentOS å°† vim çš„æ‰§è¡Œæ–‡ä»¶å‘½åä¸º viã€‚å› æ­¤ï¼Œå®é™…ä¸Šåœ¨ CentOS ä¸­ä½¿ç”¨ vi å’Œ vim æ˜¯ç­‰ä»·çš„ï¼Œéƒ½æ˜¯ä½¿ç”¨ vim ç¼–è¾‘å™¨è¿›è¡Œæ–‡æœ¬ç¼–è¾‘ã€‚</p><h2 id="vi-ç¼–è¾‘å™¨ä½¿ç”¨"><a href="#vi-ç¼–è¾‘å™¨ä½¿ç”¨" class="headerlink" title="vi ç¼–è¾‘å™¨ä½¿ç”¨"></a>vi ç¼–è¾‘å™¨ä½¿ç”¨</h2><p>ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨viç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶ï¼Œè¯­æ³•ï¼švi æ–‡ä»¶çš„è·¯å¾„</p><ul><li>vi Hello.javaï¼ˆæ‰“å¼€å½“å‰è·¯å¾„ä¸‹çš„Hello.javaï¼‰</li><li>vi &#x2F;home&#x2F;bjpowernode&#x2F;Hello.javaï¼ˆæ‰“å¼€&#x2F;home&#x2F;bjpowernodeç›®å½•ä¸‹çš„Hello.javaæ–‡ä»¶ã€‚ï¼‰</li></ul><p>ç¬¬äºŒæ­¥ï¼šç¼–è¾‘æ–‡ä»¶ï¼ˆviç¼–è¾‘å™¨ä¸ºç”¨æˆ·å‡†å¤‡äº†ä¸¤ä¸ªæ¨¡å¼ï¼‰</p><ul><li>ç¬¬ä¸€ä¸ªæ¨¡å¼ï¼šå‘½ä»¤è¡Œæ¨¡å¼ã€‚ï¼ˆæ­¤æ—¶é”®å…¥çš„éƒ½æ˜¯å‘½ä»¤ï¼‰</li><li>ç¬¬äºŒä¸ªæ¨¡å¼ï¼šç¼–è¾‘æ¨¡å¼ã€‚ï¼ˆæ­¤æ—¶é”®å…¥çš„å†…å®¹éƒ½ä¼šå†™å…¥æ–‡ä»¶ï¼‰</li><li>è¿›å…¥viç¼–è¾‘å™¨æ—¶æ˜¯å‘½ä»¤æ¨¡å¼ï¼šé”®å…¥iå‘½ä»¤è¿›å…¥ç¼–è¾‘æ¨¡å¼</li><li>ä»ç¼–è¾‘æ¨¡å¼å›åˆ°å‘½ä»¤æ¨¡å¼ï¼šæŒ‰ä¸€ä¸‹escé”®</li></ul><p>ç¬¬ä¸‰æ­¥ï¼šä¿å­˜ã€‚åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><ul><li>:wq Â è¿™æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥ä¿å­˜å¹¶é€€å‡ºã€‚</li><li>:q! è¿™æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥å¼ºè¡Œé€€å‡ºviç¼–è¾‘å™¨ï¼Œå¹¶ä¸”ä¸ä¿å­˜ã€‚</li></ul><p>æ³¨æ„ï¼šviç¼–è¾‘å™¨æ‰“å¼€çš„æ–‡ä»¶å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨æ–°å»ºã€‚</p><h2 id="viç¼–è¾‘å™¨å¸¸ç”¨å‘½ä»¤"><a href="#viç¼–è¾‘å™¨å¸¸ç”¨å‘½ä»¤" class="headerlink" title="viç¼–è¾‘å™¨å¸¸ç”¨å‘½ä»¤"></a>viç¼–è¾‘å™¨å¸¸ç”¨å‘½ä»¤</h2><p>ddï¼šåˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œ<br>yyï¼šå¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œåˆ°ç¼“å†²åŒº<br>pï¼šç²˜è´´ç¼“å†²åŒºä¸­çš„å†…å®¹<br>ggï¼šå…‰æ ‡å›åˆ°æ–‡ä»¶ç¬¬ä¸€è¡Œ<br>GGï¼šå…‰æ ‡å›åˆ°æ–‡ä»¶æœ€åä¸€è¡Œ<br>^ ï¼šå…‰æ ‡ç§»åŠ¨è‡³å½“å‰è¡Œçš„è¡Œé¦–<br>$ ï¼šå…‰æ ‡ç§»åŠ¨è‡³å½“å‰è¡Œçš„è¡Œå°¾<br>&#x2F;å…³é”®å­—ï¼šæŒ‰æ–œæ &#x2F;é”®ï¼Œå¯ä»¥è¾“å…¥æƒ³æœç´¢çš„å­—ç¬¦ï¼Œç„¶åç¡®å®šè¿›è¡Œæœç´¢ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æŸ¥æ‰¾çš„å…³é”®å­—ä¸æ˜¯æƒ³è¦çš„ï¼Œå¯ä»¥ä¸€ç›´æŒ‰ n é”®å¾€åæŸ¥æ‰¾åˆ°æƒ³è¦çš„å…³é”®å­—ä¸ºæ­¢<br>oå‘½ä»¤ï¼šåœ¨ä¸‹ä¸€è¡Œæ’å…¥ã€‚<br>xå‘½ä»¤ï¼šå‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼Œxå‘½ä»¤ä¼šåˆ é™¤å•ä¸ªå­—ç¬¦ã€‚<br>aå‘½ä»¤ï¼šåœ¨å…‰æ ‡åé¢æ’å…¥ã€‚</p><h1 id="nanoç¼–è¾‘å™¨"><a href="#nanoç¼–è¾‘å™¨" class="headerlink" title="nanoç¼–è¾‘å™¨"></a>nanoç¼–è¾‘å™¨</h1><p>nanoç¼–è¾‘å™¨ç›¸å¯¹äºviç¼–è¾‘å™¨æ¥è¯´å‡ºç°çš„è¾ƒæ™šï¼Œ1999å¹´è¯ç”Ÿã€‚viç¼–è¾‘å™¨æ—¶1976å¹´è¯ç”Ÿã€‚nanoç¼–è¾‘å™¨æ›´åŠ ç®€å•ä¸€äº›ã€‚<br>ä»¥ä¸‹æ˜¯nanoå¸¸ç”¨çš„å¿«æ·é”®ï¼Œè¿™äº›å¿«æ·é”®å¤šæ•°æ˜¯æ— æ³•åœ¨windowsç¯å¢ƒä¸‹ä½¿ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨xshellä¸­æ— æ³•ä½¿ç”¨ï¼Œå› ä¸ºå’Œwindowså¾ˆå¤šå¿«æ·é”®æ˜¯å†²çªçš„ï¼Œåœ¨linuxç¯å¢ƒä¸­å¯ä»¥ç”¨ï¼š</p><ol><li>æ‰“å¼€æ–‡ä»¶ï¼šnano Test.java</li><li>ä¿å­˜æ–‡ä»¶ï¼šctrl + o</li><li>é€€å‡ºnanoï¼šctrl + x</li><li>é€‰ä¸­å¤šä¸ªå­—ç¬¦ï¼šshift + å·¦æ–¹å‘&#x2F;å³æ–¹å‘</li><li>å‰ªåˆ‡ï¼šctrl + k</li><li>ç²˜è´´ï¼šctrl + u</li><li>æœç´¢ï¼šctrl + w</li><li>æ›¿æ¢ï¼šctrl + \</li><li>å¤åˆ¶é€‰ä¸­çš„ï¼šalt + 6</li><li>æ’¤é”€ï¼šalt + u</li><li>é‡åšï¼šalt + e</li></ol>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬1ç«  ç¯å¢ƒå‡†å¤‡</title>
      <link href="/posts/1210.html"/>
      <url>/posts/1210.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="tip info faa-horizontal animated"><p>è‡ªç”±çœ‹ä¼¼æ¡æ¡æ¡†æ¡†ä½†æ˜¯æ€»æœ‰ä¸€ç¬”å‡ºå¤´ï¼Œç‰¢ç¬¼çœ‹ç€é€é£å´è¢«ç½©ä½äº†å¤´</p></div><a href="https://www.bilibili.com/video/BV1Nb421a7TV/?spm_id_from=333.999.list.card_archive.click">    <img style="border: 1.5px solid #cbcbcb !important; max-width: 90%;"        src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/20240815134316.png"></a><h1 id="Linux-æ¦‚è¿°"><a href="#Linux-æ¦‚è¿°" class="headerlink" title="Linux æ¦‚è¿°"></a>Linux æ¦‚è¿°</h1><h2 id="å¸¸è§çš„æ“ä½œç³»ç»Ÿ"><a href="#å¸¸è§çš„æ“ä½œç³»ç»Ÿ" class="headerlink" title="å¸¸è§çš„æ“ä½œç³»ç»Ÿ"></a>å¸¸è§çš„æ“ä½œç³»ç»Ÿ</h2><p>æ“ä½œç³»ç»Ÿå¯ä»¥åˆ†ä¸ºå¤šç§ç±»å‹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ç§ï¼š</p><ol><li><p>Windows æ“ä½œç³»ç»Ÿï¼šç”±å¾®è½¯å…¬å¸å¼€å‘çš„æ“ä½œç³»ç»Ÿï¼Œå¹¿æ³›åº”ç”¨äºä¸ªäººç”µè„‘ã€æœåŠ¡å™¨ã€æ¸¸æˆæœºç­‰è®¾å¤‡ä¸­ã€‚</p></li><li><p>win xp</p></li><li><p>win7&#x2F;win8&#x2F;win10&#x2F;win11 ç­‰</p></li><li><p>Unix æ“ä½œç³»ç»Ÿï¼ˆ1960 å¹´ä»£è¯ç”Ÿï¼‰ï¼šç”±è´å°”å®éªŒå®¤å¼€å‘çš„ä¸€ç±»æ“ä½œç³»ç»Ÿï¼Œä¸»è¦åº”ç”¨äºæœåŠ¡å™¨ã€å·¥ä½œç«™ã€è¶…çº§è®¡ç®—æœºç­‰é¢†åŸŸï¼Œå…·æœ‰ç¨³å®šã€å®‰å…¨ç­‰ç‰¹ç‚¹ã€‚</p></li><li><p>Solarisï¼šSUN å…¬å¸å¼€å‘</p></li><li><p>AIXï¼šIBM å¼€å‘</p></li><li><p>HP-UXï¼šæƒ æ™®å…¬å¸å¼€å‘</p></li><li><p>macOSï¼šè‹¹æœå…¬å¸å¼€å‘ï¼Œä¸»è¦åº”ç”¨äºè‹¹æœå…¬å¸çš„ç”µè„‘å’Œç¬”è®°æœ¬ç”µè„‘ä¸Š</p></li><li><p>â€¦â€¦</p></li><li><p>Linux æ“ä½œç³»ç»Ÿï¼ˆ1991 å¹´è¯ç”Ÿï¼‰ï¼š<strong>Linux æ“ä½œç³»ç»Ÿæ˜¯ä¸€ç§å¼€æºçš„ã€å…è´¹çš„ã€ç±» UNIX æ“ä½œç³»ç»Ÿï¼Œç”¨äºæœåŠ¡å™¨ã€å·¥ä½œç«™ã€è¶…çº§è®¡ç®—æœºç­‰é¢†åŸŸã€‚</strong></p></li><li><p>Debianï¼šä¸€ç§æµè¡Œçš„ç¨³å®š Linux æ“ä½œç³»ç»Ÿ</p></li><li><p>Ubuntuï¼šåŸºäº Debian æ„å»ºçš„ä¸€ç§æµè¡Œçš„ Linux æ¡Œé¢æ“ä½œç³»ç»Ÿ</p></li><li><p>Red Hatï¼šä¸€ç§å•†ä¸š Linux æ“ä½œç³»ç»Ÿï¼Œç”± Red Hat å…¬å¸å¼€å‘</p></li><li><p>CentOSï¼šé€šè¿‡é‡æ–°ç¼–è¯‘ Red Hat è€Œå¾—åˆ°çš„ Linux æ“ä½œç³»ç»Ÿï¼Œå…è´¹ä¸”æºä»£ç å¼€æ”¾</p></li><li><p>Fedoraï¼šç”± Red Hat å…¬å¸èµåŠ©çš„åŸºäºå¼€æºçš„ Linux æ¡Œé¢å’ŒæœåŠ¡å™¨æ“ä½œç³»ç»Ÿ</p></li><li><p>â€¦â€¦</p></li><li><p>Chrome OS æ“ä½œç³»ç»Ÿï¼šç”± Google å…¬å¸å¼€å‘çš„åŸºäº Chrome æµè§ˆå™¨çš„æ“ä½œç³»ç»Ÿï¼Œä¸»è¦åº”ç”¨äº Chromebook ç¬”è®°æœ¬ç”µè„‘ä¸Šã€‚</p></li><li><p>Android æ“ä½œç³»ç»Ÿï¼šç”± Google å…¬å¸å¼€å‘çš„æ“ä½œç³»ç»Ÿï¼Œä¸»è¦åº”ç”¨äºæ‰‹æœºã€å¹³æ¿ç”µè„‘ç­‰ç§»åŠ¨è®¾å¤‡ä¸­ã€‚</p></li><li><p>iOS æ“ä½œç³»ç»Ÿï¼šç”±è‹¹æœå…¬å¸å¼€å‘çš„æ“ä½œç³»ç»Ÿï¼Œä¸»è¦åº”ç”¨äº iPhoneã€iPad ç­‰ç§»åŠ¨è®¾å¤‡ä¸­ã€‚</p></li><li><p>HarmonyOS é¸¿è’™ä¹Ÿæ˜¯ä¸€ç§æ“ä½œç³»ç»Ÿï¼Œç”±åä¸ºå…¬å¸è‡ªä¸»å¼€å‘ã€‚</p></li></ol><p>â€</p><p>æ€»ä¹‹ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿåœ¨ä¸åŒçš„é¢†åŸŸå’Œè®¾å¤‡ä¸­æœ‰å„è‡ªçš„åº”ç”¨ï¼Œé’ˆå¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„æ“ä½œç³»ç»Ÿè¿›è¡Œåº”ç”¨å’Œå¼€å‘ã€‚</p><h2 id="Linux-å‘å±•å²"><a href="#Linux-å‘å±•å²" class="headerlink" title="Linux å‘å±•å²"></a>Linux å‘å±•å²</h2><p>Linux æ“ä½œç³»ç»Ÿçš„å†å²å¯ä»¥è¿½æº¯åˆ° 1991 å¹´ï¼Œå½“æ—¶ Linus Torvaldsï¼ˆæ—çº³æ–¯Â·æ‰˜ç“¦å…¹ï¼‰ æ˜¯ä¸€åèŠ¬å…°èµ«å°”è¾›åŸºå¤§å­¦çš„å­¦ç”Ÿï¼Œå¹¶ä¸”å¯¹ MINIXï¼Œä¸€ç§ç±» UNIX æ“ä½œç³»ç»Ÿï¼Œæ„Ÿåˆ°ä¸æ»¡æ„ã€‚ä»–å¼€å§‹ç¼–å†™è‡ªå·±çš„æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œæœ€ç»ˆå‘å¸ƒäº†ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå‘½åä¸º Linuxã€‚ä»æ­¤ï¼ŒLinux è¿™ä¸ªå¼€æºã€è‡ªç”±å’Œå¯å®šåˆ¶åŒ–çš„æ“ä½œç³»ç»Ÿå†…æ ¸å°±å¼€å§‹äº†å®ƒçš„å‘å±•ä¹‹æ—…ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/0600441c59d3f76a09e43bd835c9db14645325325.png" alt="image.png"></p><p>ä»¥ä¸‹æ˜¯ Linux æ“ä½œç³»ç»Ÿçš„å‘å±•å²ä¸­ä¸€äº›é‡è¦çš„æ—¶é—´èŠ‚ç‚¹å’Œé‡Œç¨‹ç¢‘ï¼š</p><ul><li>1991 å¹´ï¼šLinus Torvalds å‘å¸ƒ Linux å†…æ ¸çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚</li><li>1992 å¹´ï¼šå¤§é‡çš„ç¨‹åºå‘˜å’Œå¼€å‘è€…å¼€å§‹å‚ä¸åˆ° Linux çš„å¼€å‘ä¸­ï¼Œè¿™ä½¿å¾— Linux å¼€å§‹è¿…é€Ÿå‘å±•ï¼Œä¸æ–­å£®å¤§ã€‚</li><li>1993 å¹´ï¼šDebianï¼ˆç¬¬ä¸€ä¸ªç¤¾åŒºé©±åŠ¨çš„ Linux å‘è¡Œç‰ˆï¼‰å‡ºç°ã€‚</li><li>1994 å¹´ï¼šRed Hatï¼ˆæœ€è‘—åçš„å•†ä¸š Linux å‘è¡Œç‰ˆï¼‰æˆç«‹ã€‚Linux ç¤¾åŒºä¹Ÿåˆ¶å®šäº†ç¬¬ä¸€ä¸ª Linux æ ‡å‡†åŸºå‡†ï¼ˆLinux Standard Base 1.0ï¼‰ã€‚</li><li>1995 å¹´ï¼šKDE å’Œ GNOME ä¸¤ä¸ªæ¡Œé¢ç¯å¢ƒè¯ç”Ÿã€‚è¿™æ ‡å¿—ç€ Linux å¼€å§‹å…³æ³¨æ¡Œé¢åº”ç”¨ä»¥åŠç”¨æˆ·å‹å¥½åº¦ã€‚</li><li>1996 å¹´ï¼šApache æœåŠ¡å™¨æˆä¸ºä¸»æµ Web æœåŠ¡å™¨ã€‚</li><li>2003 å¹´ï¼šSuSE æˆä¸º Novell å…¬å¸çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ˜¯ Linux å·¨å¤´ä¸­ç¬¬ä¸€å®¶è¢«æ”¶è´­çš„å…¬å¸ã€‚</li><li>2008 å¹´ï¼šGoogle å‘å¸ƒåŸºäº Linux çš„ Android æ“ä½œç³»ç»Ÿã€‚</li><li>2011 å¹´ï¼šLinux å†…æ ¸ 3.0 å‘å¸ƒï¼Œè¯¥ç‰ˆæœ¬å…·æœ‰æ›´å¥½çš„æ€§èƒ½ã€æ”¯æŒæ–°çš„ç¡¬ä»¶æŠ€æœ¯å’Œæ–‡ä»¶ç³»ç»Ÿã€‚</li><li>2015 å¹´ï¼šå¾®è½¯å®£å¸ƒæ”¯æŒ Linuxï¼Œå¹¶å°†ä¸€äº› Linux å·¥å…·æ•´åˆåˆ°ä»–ä»¬çš„æ“ä½œç³»ç»Ÿ Windows 10 ä¸­ã€‚</li><li>2018 å¹´ï¼šRed Hat è¢« IBM æ”¶è´­ï¼Œè¯¥äº¤æ˜“æ˜¯è¿„ä»Šä¸ºæ­¢ Linux ç¤¾åŒºä¸­æœ€å¤§çš„äº¤æ˜“ä¹‹ä¸€ã€‚</li><li>2020 å¹´ï¼šLinux å†…æ ¸ 5.10 å‘å¸ƒï¼Œå…·æœ‰æ”¹è¿›çš„æ€§èƒ½ã€æ–°çš„å®‰å…¨åŠŸèƒ½å’Œæ›´å¥½çš„ç¡¬ä»¶æ”¯æŒã€‚</li></ul><p>æ€»ä¹‹ï¼ŒLinux æ“ä½œç³»ç»Ÿçš„å‘å±•å²å……æ»¡äº†è®¸å¤šä»¤äººæƒŠå¹çš„é‡Œç¨‹ç¢‘ã€‚å®ƒå·²æˆä¸ºäº†ä¾›åº”å•†å’Œå¼€å‘è€…çš„é¦–é€‰æ“ä½œç³»ç»Ÿï¼Œå…¨ä¸–ç•Œå„ä¸ªç»„ç»‡å’Œæœºæ„éƒ½åœ¨ä½¿ç”¨ Linux ä»¥åŠåŸºäº Linux çš„è§£å†³æ–¹æ¡ˆã€‚</p><h1 id="å®‰è£…-VMware"><a href="#å®‰è£…-VMware" class="headerlink" title="å®‰è£… VMware"></a>å®‰è£… VMware</h1><p>å®‰è£… VMware 17ã€‚é€šè¿‡è¿™ä¸ªè½¯ä»¶å¯ä»¥æ–°å»ºè™šæ‹Ÿæœºã€‚ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨è™šæ‹Ÿæœºä¸Šå®‰è£…æ“ä½œç³»ç»Ÿ CentOSã€‚<br><strong>ç¬¬ä¸€æ­¥ï¼šåŒå‡»å®‰è£…</strong><br><img src="https://i0.hdslb.com/bfs/article/418d1c9390372740c2c5dd43289fd9d8645325325.png" alt="image.png"><br>å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹å¼¹çª—ï¼šå¼¹çª—åé‡å¯å³å¯ã€‚<br><img src="https://i0.hdslb.com/bfs/article/89fce349dad95e6373fecce3efa51bd6645325325.png" alt="image.png"></p><p><img src="https://i0.hdslb.com/bfs/article/0f0aa028d1afe1e23c2d03aacb7f79cb645325325.png" alt="image.png"><br><strong>ç¬¬äºŒæ­¥ï¼šç‚¹å‡»ä¸Šå›¾ä¸‹ä¸€æ­¥ï¼Œé€‰æ‹©æ¥å—åè®®</strong><br><img src="https://i0.hdslb.com/bfs/article/06bd4feb2a4a50b841938d2fd37a671c645325325.png" alt="image.png"></p><p><strong>ç¬¬ä¸‰æ­¥ï¼šç‚¹å‡»ä¸Šå›¾ä¸‹ä¸€æ­¥</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/e29715a407f4c516e094800d7e60787d645325325.png" alt="image.png"><br><strong>ç¬¬å››æ­¥ï¼šç‚¹å‡»ä¸Šå›¾ä¸‹ä¸€æ­¥</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/aed23e36108fa75d4f3d3761191a92bc645325325.png" alt="image.png">â€‹</p><p><strong>ç¬¬äº”æ­¥ï¼šç‚¹å‡»ä¸Šå›¾ä¸‹ä¸€æ­¥</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/9307bbfbb5fd8dbc2738a8ffe3f0a1a7645325325.png" alt="image.png"><br><strong>ç¬¬å…­æ­¥ï¼šç‚¹å‡»ä¸Šå›¾ä¸‹ä¸€æ­¥</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/bf07742f2de72cb626c005a499affa86645325325.png" alt="image.png">â€‹</p><p><strong>ç¬¬ä¸ƒæ­¥ï¼šç‚¹å‡»å®‰è£…</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/44ec549e37e50c2042e9ebd26d77c54b645325325.png" alt="image.png"><br>â€‹<img src="https://i0.hdslb.com/bfs/article/5365fd9449914e70a62d38ea328e60ec645325325.png" alt="image.png">â€‹</p><p><strong>ç¬¬å…«æ­¥ï¼šç‚¹å‡»å®Œæˆï¼Œæ¡Œé¢ä¸Šå›¾æ ‡</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/1fd771fbbd16cbfe3668628b5d0daf0b645325325.png" alt="image.png"><br>åˆ°æ­¤è™šæ‹Ÿæœºè¿™ä¸ªè½¯ä»¶å°±å®‰è£…æˆåŠŸäº†ï¼ï¼ï¼ï¼<br><strong>æ³¨æ„ï¼šè¯¥è½¯ä»¶éœ€è¦è¾“å…¥å¯†é’¥ï¼Œå¤§å®¶è‡ªå·±æƒ³åŠæ³•è·å–ï¼Œè¿™ä¸ªå¾ˆå®¹æ˜“çš„ã€‚</strong></p><p>â€</p><h1 id="æ–°å»ºè™šæ‹Ÿæœº"><a href="#æ–°å»ºè™šæ‹Ÿæœº" class="headerlink" title="æ–°å»ºè™šæ‹Ÿæœº"></a>æ–°å»ºè™šæ‹Ÿæœº</h1><p>è™šæ‹Ÿæœºè½¯ä»¶å®‰è£…æˆåŠŸä¹‹åï¼Œå°±å¯ä»¥æ–°å»ºè™šæ‹Ÿæœºäº†ã€‚ä¸€ä¸ªè™šæ‹Ÿæœºè½¯ä»¶å¯ä»¥åˆ›å»ºå¤šä¸ªè™šæ‹Ÿæœºï¼Œä¸€ä¸ªè™šæ‹Ÿæœºå°±ä»£è¡¨ä¸€å°æ–°çš„ç”µè„‘ã€‚æ–°å»ºè™šæ‹Ÿæœºçš„è¿‡ç¨‹å°±ç›¸å½“äºå»ç”µè„‘å•†åŸè´­ä¹°ç”µè„‘æ˜¯ä¸€æ ·çš„ã€‚<br><strong>ç¬¬ä¸€æ­¥ï¼šåŒå‡»æ¡Œé¢å›¾æ ‡ï¼Œæ‰“å¼€è™šæ‹Ÿæœºè½¯ä»¶ï¼Œç‚¹å‡»ä¸‹å›¾ä¸­çš„åˆ›å»ºæ–°çš„è™šæ‹Ÿæœº</strong><br><img src="https://i0.hdslb.com/bfs/article/bdee02991d08bd7a67798d8d2d3e9b2d645325325.png" alt="image.png"><br><strong>ç¬¬äºŒæ­¥ï¼šé€‰æ‹©è‡ªå®šä¹‰å®‰è£…ã€‚äº†è§£æ›´è¯¦ç»†çš„è¿‡ç¨‹</strong><br><img src="https://i0.hdslb.com/bfs/article/cbb05a69d5a80b69a63d9bac2c307dc2645325325.png" alt="image.png"></p><p><strong>ç¬¬ä¸‰æ­¥ï¼šé€‰æ‹©ç¡¬ä»¶å…¼å®¹æ€§ï¼ˆé»˜è®¤é€‰é¡¹å³å¯ï¼‰</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/cde8612c6cb95fb0262f6d47c6e87b52645325325.png" alt="image.png">â€‹</p><p><strong>ç¬¬å››æ­¥ï¼šç¨åå®‰è£…æ“ä½œç³»ç»Ÿï¼Œåªåˆ›å»ºä¸€å°è£¸æœº</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/aadeabeec21608fac44c8906b9dd42d0645325325.png" alt="image.png"><br><strong>ç¬¬äº”æ­¥ï¼šé€‰æ‹©æ“ä½œç³»ç»Ÿç±»å‹</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/2958b55f6672ffc24cbe6ac34fc2a2e7645325325.png" alt="image.png">â€‹</p><p><strong>ç¬¬å…­æ­¥ï¼šç»™ä½ çš„ç”µè„‘èµ·ä¸ªåå­—ï¼Œè¿˜æœ‰å®ƒæ”¾åœ¨å“ªé‡Œ</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/e4adee7574cfdc2f80aa791e3fe9fce2645325325.png" alt="image.png"><br><strong>ç¬¬ä¸ƒæ­¥ï¼šè®¾ç½®ç”µè„‘çš„ CPU æ•°é‡</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/2d35a35909d79ec8fa05fd6fbe6b7d5d645325325.png" alt="image.png">â€‹</p><p><strong>ç¬¬å…«æ­¥ï¼šè®¾ç½®å†…å­˜å¤§å°</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/1bfb502cf4d68d681c7f2757fef16a6c645325325.png" alt="image.png">â€‹</p><p><strong>ç¬¬ä¹æ­¥ï¼šæŒ‡å®šç½‘ç»œè¿æ¥æ–¹å¼ä¸º NAT</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/f6000e113ea97e584a2c0ae16f664d5d645325325.png" alt="image.png">â€‹</p><p>åœ¨åˆ›å»ºè™šæ‹Ÿæœºæ—¶ï¼Œç½‘ç»œè¿æ¥æ¨¡å¼æœ‰æ¡¥æ¥æ¨¡å¼å’Œ NAT æ¨¡å¼ï¼Œåº”è¯¥æ ¹æ®ä¸ªäººå®é™…éœ€æ±‚æ¥é€‰æ‹©ã€‚</p><ul><li>æ¡¥æ¥æ¨¡å¼ï¼šè™šæ‹Ÿæœºä¼šç›´æ¥æ¥å…¥å®¿ä¸»æœºç½‘ç»œä¸­ï¼Œç›¸å½“äºè™šæ‹Ÿæœºç›¸å½“äºç½‘ç»œä¸­çš„ä¸€ä¸ªæ™®é€šè®¡ç®—æœºï¼Œæœ‰è‡ªå·±çš„ ip åœ°å€å’Œ MAC åœ°å€ï¼Œå¯ä»¥è®¿é—®ç½‘ç»œä¸Šå…¶ä»–çš„è®¾å¤‡ã€‚é€‚ç”¨äºéœ€è¦è™šæ‹Ÿæœºä¸å®¿ä¸»æœºå¤„äºåŒä¸€ç½‘æ®µçš„åœºæ™¯ï¼Œå¦‚æµ‹è¯•ã€ç½‘ç»œåº”ç”¨å¼€å‘ç­‰ã€‚</li><li>NAT æ¨¡å¼ï¼šè™šæ‹Ÿæœºé€šè¿‡è™šæ‹ŸåŒ–çš„ NAT ç½‘ç»œä¸å®¿ä¸»æœºè¿æ¥ï¼Œå®¿ä¸»æœºå‘è™šæ‹Ÿæœºæä¾›ç½‘ç»œè®¿é—®èƒ½åŠ›ï¼Œè™šæ‹Ÿæœºä¹‹é—´ä¸èƒ½ç›¸äº’è®¿é—®ã€‚NAT æ¨¡å¼é€‚ç”¨äºè™šæ‹Ÿæœºéœ€è¦è®¿é—®å¤–éƒ¨ç½‘ç»œï¼Œä½†åªæœ‰ä¸€ä¸ªå…¬å…± IP åœ°å€çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</li></ul><p>æ€»ä¹‹ï¼Œæ ¹æ®ä¸ªäººå®é™…éœ€æ±‚æ¥é€‰æ‹©é€‚åˆè‡ªå·±çš„ç½‘ç»œè¿æ¥æ¨¡å¼ï¼Œæœ‰éœ€è¦è™šæ‹Ÿæœºä¸å®¿ä¸»æœºå¤„äºåŒä¸€ç½‘æ®µçš„æƒ…å†µé€‰æ¡¥æ¥æ¨¡å¼ï¼Œæœ‰éœ€è¦è™šæ‹Ÿæœºè®¿é—®å¤–éƒ¨ç½‘ç»œçš„æƒ…å†µé€‰ NAT æ¨¡å¼ã€‚</p><p>â€</p><p><strong>ç¬¬åæ­¥ï¼šé€‰æ‹© IO æ§åˆ¶å™¨ç±»å‹ï¼ˆé»˜è®¤å³å¯ï¼‰</strong><br><img src="https://i0.hdslb.com/bfs/article/966c115674837a63dd101d7e4655b54a645325325.png" alt="image.png"><br><strong>ç¬¬åä¸€æ­¥ï¼šé€‰æ‹©ç¡¬ç›˜ç±»å‹ï¼ˆé»˜è®¤å³å¯ï¼‰</strong><br><img src="https://i0.hdslb.com/bfs/article/ef5d14bc9b26dfea3b81dc6bd7054bc7645325325.png" alt="image.png"></p><p><strong>ç¬¬åäºŒæ­¥ï¼šé€‰æ‹©åˆ›å»ºæ–°çš„è™šæ‹Ÿç£ç›˜</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/c92a40511576da222a5f0b8b743ab355645325325.png" alt="image.png"><br><strong>ç¬¬åä¸‰æ­¥ï¼šæŒ‡å®šç¡¬ç›˜å®¹é‡</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/80a62f56840d5e84f9132ef937adf1e6645325325.png" alt="image.png">â€‹</p><p><strong>ç¬¬åå››æ­¥ï¼šæŒ‡å®šç¡¬ç›˜å¯¹åº”çš„æ–‡ä»¶</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/4516e3b090a1f12f50b7a47a5e57e9dd645325325.png" alt="image.png"><br><strong>ç¬¬åäº”æ­¥ï¼šå·²å‡†å¤‡å¥½ï¼ŒæŸ¥çœ‹ç”µè„‘çš„é…ç½®ï¼Œæ„Ÿè§‰ä¸è¡Œçš„è¯ï¼Œå¯ä»¥ç‚¹å‡»ä¸‹å›¾è‡ªå®šä¹‰ç¡¬ä»¶è¿›è¡Œä¿®æ”¹é…ç½®ã€‚</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/d04e086cca89a465521cbffafb169dd8645325325.png" alt="image.png">â€‹</p><p><strong>ç¬¬åå…­æ­¥ï¼šç‚¹å‡»å®Œæˆ</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/e59f5d8fc2e2e9693313413b1d1b5abd645325325.png" alt="image.png"><br>åˆ°æ­¤ä¸ºæ­¢ç›¸å½“äºä½ å·²ç»è´­ä¹°äº†ä¸€å°æ–°ç”µè„‘äº†ï¼Œåªä¸è¿‡è¿™ä¸ªç”µè„‘ä¸­è¿˜æ²¡æœ‰ä»»ä½•æ“ä½œç³»ç»Ÿï¼Œåªæ˜¯ä¸€å°è£¸æœºã€‚æ¥ä¸‹æ¥ä½ éœ€è¦å®‰è£…æ“ä½œç³»ç»Ÿã€‚</p><p>â€</p><h1 id="å®‰è£…æ“ä½œç³»ç»Ÿ"><a href="#å®‰è£…æ“ä½œç³»ç»Ÿ" class="headerlink" title="å®‰è£…æ“ä½œç³»ç»Ÿ"></a>å®‰è£…æ“ä½œç³»ç»Ÿ</h1><p>å®‰è£…æ“ä½œç³»ç»Ÿä¹‹å‰ï¼Œä½ éœ€è¦å…ˆä¸‹è½½è¿™ä¸ªæ“ä½œç³»ç»Ÿçš„é•œåƒæ–‡ä»¶ï¼š<br><img src="https://i0.hdslb.com/bfs/article/caeeae28baf93594cacaefdea3ec7c9d645325325.png" alt="image.png"><br>è¿™ä¸ªæ–‡ä»¶å…¶å®å°±ç›¸å½“äºç°å®ç”Ÿæ´»ä¸­çš„ç³»ç»Ÿç›˜ï¼ˆå…‰ç›˜ï¼‰ã€‚æŠŠè¿™ä¸ªæ–‡ä»¶æ”¾åˆ°è™šæ‹Ÿæœºçš„ DVD å½“ä¸­ï¼š<br><img src="https://i0.hdslb.com/bfs/article/79f0da39c65b647ac36b39f53fd1f67d645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/57722227cc95e80b6e94c0a5f30ac2fc645325325.png" alt="image.png"></p><p>ç‚¹å‡»ç¡®å®šï¼Œå¦‚ä¸‹å›¾ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/796518e5ed7879cf7f17927e6c877c41645325325.png" alt="image.png"><br>æ¥ä¸‹æ¥ç‚¹å‡»ï¼šå¼€å¯æ­¤è™šæ‹Ÿæœºï¼ˆç›¸å½“äºç°å®ç”Ÿæ´»ä¸­ç”µè„‘é€šç”µï¼‰ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/56ced699a338c3550c682192f83d1828645325325.png" alt="image.png"><br>æŒ‰ç…§ä¸‹é¢ä¸€æ­¥ä¸€æ­¥å®‰è£…æ“ä½œç³»ç»Ÿï¼š<br>æŒ‰ä¸Šä¸‹é”®ï¼Œç§»åŠ¨åˆ°ï¼šInstall CentOS Stream 9ï¼Œç„¶åå›è½¦ã€‚<br><strong>æ³¨æ„ï¼šä»è™šæ‹Ÿæœºä¸­é‡Šæ”¾é¼ æ ‡çš„ç»„åˆé”®æ˜¯ ctrl + alt</strong><br>â€‹<img src="https://i0.hdslb.com/bfs/article/f1ec35985453268fcce11092fcd95403645325325.png" alt="image.png">â€‹</p><p>æ­£åœ¨å®‰è£…ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/8ca013afd3a6bc2c25f480adbf121117645325325.png" alt="image.png"><br>è¯­è¨€é€‰æ‹©ï¼šç®€ä½“ä¸­æ–‡ï¼Œè‹±æ–‡ä¸é”™çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨è‹±æ–‡ï¼Œéƒ½å¯ä»¥<br>â€‹<img src="https://i0.hdslb.com/bfs/article/db4e3ba5fcb7202690dfa36123d5e1fa645325325.png" alt="image.png">â€‹</p><p>æ¥ä¸‹æ¥ï¼Œè¦å¤„ç†ä¸‰ä»¶äº‹ï¼š<br>ç¬¬ä¸€ä¸ªï¼šå®‰è£…ç›®çš„åœ°<br>ç¬¬äºŒä¸ªï¼šè®¾ç½® root å¯†ç <br>ç¬¬ä¸‰ä¸ªï¼šè½¯ä»¶é€‰æ‹©<br>â€‹<img src="https://i0.hdslb.com/bfs/article/aaa40337c5366defcfdab1d2c1f1c1d2645325325.png" alt="image.png"><br>å®‰è£…ç›®çš„åœ°ï¼Œé»˜è®¤å³å¯ï¼Œç‚¹å‡»å®Œæˆï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/562c9dc47af820381c4d9fd93e27db3a645325325.png" alt="image.png"><br>è®¾ç½® root å¯†ç æ—¶å…è®¸ root è¿œç¨‹ SSH ç™»å½•ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/e795fcd5028d7bebf2e9a2d859c1f99b645325325.png" alt="image.png">â€‹</p><p>è½¯ä»¶é€‰æ‹©ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/92834c5b2b42508caeb1870dcb369817645325325.png" alt="image.png"><br>ç‚¹å‡»å¼€å§‹å®‰è£…ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/a670b8cc72b9e6ee5123a3e41fcc3531645325325.png" alt="image.png">â€‹</p><p>å®‰è£…ä¸­ï¼Œè¯·ç¨åï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/aa13b35606e774c550a58407c3d3b995645325325.png" alt="image.png"><br>å®‰è£…å®Œæˆåï¼Œç‚¹å‡»å³ä¸‹è§’çš„é‡å¯ç³»ç»Ÿå³å¯ï¼ï¼ï¼</p><p>â€</p><h1 id="é…ç½®æ“ä½œç³»ç»Ÿ"><a href="#é…ç½®æ“ä½œç³»ç»Ÿ" class="headerlink" title="é…ç½®æ“ä½œç³»ç»Ÿ"></a>é…ç½®æ“ä½œç³»ç»Ÿ</h1><p>ç‚¹å‡»ä¸‹å›¾çš„å¼€å§‹é…ç½®ï¼š<br><img src="https://i0.hdslb.com/bfs/article/8de23f9097da076bcab851f55890129e645325325.png" alt="image.png"><br>è®¾ç½®å®šä½æœåŠ¡ï¼Œè¿™å±äºéšç§ï¼Œå¯ä»¥æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥å…³é—­ï¼š<br><img src="https://i0.hdslb.com/bfs/article/594150724a0851d621ff02c85a6fb978645325325.png" alt="image.png"></p><p>è®¾ç½®åœ¨çº¿è´¦å·ï¼Œè¿™é‡Œè·³è¿‡ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/e3bfe296cf034e033bbaef33fe9d5dad645325325.png" alt="image.png">â€‹</p><p>è¿™æ˜¯å¼€å¯é™¤äº† root ç®¡ç†å‘˜ä¹‹å¤–ï¼Œå¼€å¯çš„å…¶ä»–è´¦æˆ·ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/1ae2e3c1563197bf4744fa5bfe14020c645325325.png" alt="image.png"><br>è®¾ç½®å¯†ç ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/4d91a5fa9e1acbe937db0ad1cf4979b5645325325.png" alt="image.png">â€‹</p><p>å®Œæˆï¼Œç‚¹å‡»å¼€å§‹ä½¿ç”¨ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/65839dd9cc15cb99ce25effda3c75cb8645325325.png" alt="image.png"><br>è®°å¾—æŸ¥çœ‹ä¸€ä¸‹ç½‘ç»œæ˜¯å¦æ­£å¸¸ï¼š<br>â€‹<img src="https://i0.hdslb.com/bfs/article/a7134a6a611fd21ddae08bb531159e32645325325.png" alt="image.png">â€‹</p><p>â€</p><h1 id="xshell-çš„å®‰è£…ä¸ä½¿ç”¨"><a href="#xshell-çš„å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="xshell çš„å®‰è£…ä¸ä½¿ç”¨"></a>xshell çš„å®‰è£…ä¸ä½¿ç”¨</h1><p>Xshell æ˜¯ä¸€æ¬¾ç”¨äºåœ¨æœ¬åœ°è®¡ç®—æœºä¸Šè¿œç¨‹è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›è¡Œå‘½ä»¤æ“ä½œï¼Œæ–‡ä»¶ç®¡ç†ç­‰åŠŸèƒ½çš„ SSH å®¢æˆ·ç«¯è½¯ä»¶ã€‚<br><strong>åœ¨ Xshell ä¸­ç¼–å†™ Linux å‘½ä»¤å’Œåœ¨ Linux ç³»ç»Ÿä¸­çš„ç»ˆç«¯ä¸Šç¼–å†™å‘½ä»¤æ˜¯ä¸€æ ·çš„ã€‚</strong></p><h2 id="xshell-çš„å®‰è£…"><a href="#xshell-çš„å®‰è£…" class="headerlink" title="xshell çš„å®‰è£…"></a>xshell çš„å®‰è£…</h2><p>ç¬¬ä¸€æ­¥ï¼šåŒå‡»å®‰è£…<br><img src="https://i0.hdslb.com/bfs/article/164bf5ffe84da1dc61f29d1fec053fcb645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/838930d10ee65b4b5b02785c01a41354645325325.png" alt="image.png"></p><p>ç¬¬äºŒæ­¥ï¼šç‚¹å‡»ä¸‹ä¸€æ­¥<br><img src="https://i0.hdslb.com/bfs/article/fa8d9d758d176d0109cb928055219303645325325.png" alt="image.png"></p><p>ç¬¬ä¸‰æ­¥ï¼šæ¥å—è®¸å¯è¯åè®®<br><img src="https://i0.hdslb.com/bfs/article/dd15c89aa6420360f97b331d73a52697645325325.png" alt="image.png"></p><p>â€</p><p>ç¬¬å››æ­¥ï¼šé€‰æ‹©å®‰è£…ä½ç½®<br><img src="https://i0.hdslb.com/bfs/article/67b3d7f13e9d2e04099f3dfbb69a4565645325325.png" alt="image.png"></p><p>ç¬¬äº”æ­¥ï¼šé€‰æ‹©ç¨‹åºæ–‡ä»¶å¤¹<br><img src="https://i0.hdslb.com/bfs/article/fde19a4ae0e9ec47905f7097f3c90534645325325.png" alt="image.png"></p><p>â€</p><p>ç¬¬å…­æ­¥ï¼šå®‰è£…<br><img src="https://i0.hdslb.com/bfs/article/74b29bc311d3f719550cf02bbd061d15645325325.png" alt="image.png"></p><p>â€</p><p>ç¬¬ä¸ƒæ­¥ï¼šå®Œæˆ<br><img src="https://i0.hdslb.com/bfs/article/afffe266d3d47682ba134d5bfafd8294645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/aa43772c7283d1f46bf4c013122675bb645325325.png" alt="image.png"></p><p>â€</p><h2 id="xshell-çš„ä½¿ç”¨"><a href="#xshell-çš„ä½¿ç”¨" class="headerlink" title="xshell çš„ä½¿ç”¨"></a>xshell çš„ä½¿ç”¨</h2><p>ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨ç»ˆç«¯çš„ ifconfig å‘½ä»¤æŸ¥çœ‹æœåŠ¡å™¨çš„ IP åœ°å€ï¼š<br><img src="https://i0.hdslb.com/bfs/article/bd1ac7dc9bbbad651a3d68c28164e975645325325.png" alt="image.png"></p><p>ç¬¬äºŒæ­¥ï¼šæ–°å»ºä¼šè¯<br>â€‹<img src="https://i0.hdslb.com/bfs/article/2dd7eec2859a92b3fe3ba00c5fd5ed44645325325.png" alt="image.png">â€‹</p><p>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®è¿æ¥å±æ€§<br>â€‹<img src="https://i0.hdslb.com/bfs/article/03e79c75f2be5541e34104151ef671be645325325.png" alt="image.png">â€‹</p><p>ç¬¬å››æ­¥ï¼šè®¾ç½®ç”¨æˆ·èº«ä»½éªŒè¯<br>â€‹<img src="https://i0.hdslb.com/bfs/article/0bdc9de48caa966607a751cddca21706645325325.png" alt="image.png">â€‹</p><p>ç¬¬äº”æ­¥ï¼šè®¾ç½®å¤–è§‚<br>â€‹<img src="https://i0.hdslb.com/bfs/article/e13136516c69d91891ff01e998195b74645325325.png" alt="image.png">â€‹</p><p>ç¬¬å…­æ­¥ï¼šæ¥å—å¹¶ä¿å­˜ï¼ˆå®‰å…¨è­¦å‘Šï¼‰<br>â€‹<img src="https://i0.hdslb.com/bfs/article/c1408068556888ddcb9d6478d910e8a0645325325.png" alt="image.png">â€‹</p><p>ä½¿ç”¨ xshell å°±åƒåœ¨ä½¿ç”¨ç»ˆç«¯æ˜¯ä¸€æ ·çš„ã€‚</p><p>â€</p><h1 id="xftp-çš„å®‰è£…ä¸ä½¿ç”¨"><a href="#xftp-çš„å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="xftp çš„å®‰è£…ä¸ä½¿ç”¨"></a>xftp çš„å®‰è£…ä¸ä½¿ç”¨</h1><p>Xftp æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ Windows ç¯å¢ƒä¸‹çš„ FTP å®¢æˆ·ç«¯è½¯ä»¶ï¼Œç”¨äºåœ¨æœ¬åœ°è®¡ç®—æœºä¸è¿œç¨‹ FTP æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ–‡ä»¶ä¼ è¾“ã€‚</p><h2 id="xftp-çš„å®‰è£…"><a href="#xftp-çš„å®‰è£…" class="headerlink" title="xftp çš„å®‰è£…"></a>xftp çš„å®‰è£…</h2><p>ç¬¬ä¸€æ­¥ï¼šåŒå‡»å®‰è£…åŒ…<br><img src="https://i0.hdslb.com/bfs/article/d9d322c759d6a7ed12f24f0cbee6ff34645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/787cd0f97c61957866bf8aa78574169a645325325.png" alt="image.png"></p><p>ç¬¬äºŒæ­¥ï¼šæ¥å—åè®®<br><img src="https://i0.hdslb.com/bfs/article/4e8b9775d8ac3ac1d672dcdeb0f09a48645325325.png" alt="image.png"></p><p>â€</p><p>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®å®‰è£…ä½ç½®<br><img src="https://i0.hdslb.com/bfs/article/c4132c6c9fa7cab6877e1ce4ff910d90645325325.png" alt="image.png"></p><p>ç¬¬å››æ­¥ï¼šé€‰æ‹©ç¨‹åºæ–‡ä»¶å¤¹<br><img src="https://i0.hdslb.com/bfs/article/498575fc2cfa8ae7d4ee7cbb9e62f35e645325325.png" alt="image.png"></p><p>â€</p><p>ç¬¬äº”æ­¥ï¼šå®Œæˆ<br><img src="https://i0.hdslb.com/bfs/article/968430fbf8dcc02acf2edf3c6f6b8ca1645325325.png" alt="image.png"></p><p>â€</p><h2 id="xftp-çš„ä½¿ç”¨"><a href="#xftp-çš„ä½¿ç”¨" class="headerlink" title="xftp çš„ä½¿ç”¨"></a>xftp çš„ä½¿ç”¨</h2><p>ç¬¬ä¸€æ­¥ï¼šæ–°å»ºä¼šè¯<br><img src="https://i0.hdslb.com/bfs/article/1ad03b167d459966dfcc6f4b2b0c11cf645325325.png" alt="image.png"><br><img src="https://i0.hdslb.com/bfs/article/18b452fa26d80ab228b99f3c4d6519c5645325325.png" alt="image.png"></p><p>â€</p><p>ç¬¬äºŒæ­¥ï¼šæ¥å—å¹¶ä¿å­˜<br><img src="https://i0.hdslb.com/bfs/article/555ba54f90c8aaa12aafc2174de3774e645325325.png" alt="image.png"></p><p>ç¬¬ä¸‰æ­¥ï¼šæ‹–æ‹½ä¸Šä¼ <br><img src="https://i0.hdslb.com/bfs/article/9503e983e6151777553c6a6d6b51d3c1645325325.png" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEAå®‰è£…åçš„è®¾ç½®</title>
      <link href="/posts/5109.html"/>
      <url>/posts/5109.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h2 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h2><p><img src="https://i0.hdslb.com/bfs/article/550ed5f2d7d4a3e4486d6af342e9331d645325325.png">â€‹</p><h2 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h2><p><img src="https://i0.hdslb.com/bfs/article/ee854b4088f0c221272f7498c445703a645325325.png">â€‹</p><h2 id="ç¬¬ä¸‰éƒ¨"><a href="#ç¬¬ä¸‰éƒ¨" class="headerlink" title="ç¬¬ä¸‰éƒ¨"></a>ç¬¬ä¸‰éƒ¨</h2><p><img src="https://i0.hdslb.com/bfs/article/f91ae7aeac3307075e94b5fe05ceba11645325325.png">â€‹</p><h2 id="ç¬¬å››æ­¥"><a href="#ç¬¬å››æ­¥" class="headerlink" title="ç¬¬å››æ­¥"></a>ç¬¬å››æ­¥</h2><p><img src="https://i0.hdslb.com/bfs/article/396d5c4d3338f61b445b8cfeaf7bbc55645325325.png">â€‹</p>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¯ä»¶å®‰è£… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK 1.8 çš„å®‰è£…</title>
      <link href="/posts/47295.html"/>
      <url>/posts/47295.html</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸‹è½½åœ°å€"><a href="#ä¸‹è½½åœ°å€" class="headerlink" title="ä¸‹è½½åœ°å€"></a>ä¸‹è½½åœ°å€</h1><p>åœ°å€ï¼š<a href="https://www.oracle.com/java/technologies/javase/javase9-archive-downloads.html">https://www.oracle.com/java/technologies/javase/javase9-archive-downloads.html</a></p><h1 id="jdkï¼Ÿjreï¼Ÿjvmï¼Ÿ"><a href="#jdkï¼Ÿjreï¼Ÿjvmï¼Ÿ" class="headerlink" title="jdkï¼Ÿjreï¼Ÿjvmï¼Ÿ"></a>jdkï¼Ÿjreï¼Ÿjvmï¼Ÿ</h1><ul><li>Java development kit javaå¼€å‘å·¥å…·åŒ…  jdk</li><li>Java Runtime Environment  javaè¿è¡Œç¯å¢ƒ  jre</li><li>Java Virtual Machine  javaè™šæ‹Ÿæœº  jvm</li></ul><h1 id="jdkå®‰è£…æ–¹æ³•ï¼šä»¥ä¸‹å¯ä»¥ç”¨æ¥å¤åˆ¶ç²˜è´´"><a href="#jdkå®‰è£…æ–¹æ³•ï¼šä»¥ä¸‹å¯ä»¥ç”¨æ¥å¤åˆ¶ç²˜è´´" class="headerlink" title="jdkå®‰è£…æ–¹æ³•ï¼šä»¥ä¸‹å¯ä»¥ç”¨æ¥å¤åˆ¶ç²˜è´´"></a>jdkå®‰è£…æ–¹æ³•ï¼šä»¥ä¸‹å¯ä»¥ç”¨æ¥å¤åˆ¶ç²˜è´´</h1><h2 id="1-æ–°å»ºç³»ç»Ÿå˜é‡ï¼šJAVA-HOME"><a href="#1-æ–°å»ºç³»ç»Ÿå˜é‡ï¼šJAVA-HOME" class="headerlink" title="1.æ–°å»ºç³»ç»Ÿå˜é‡ï¼šJAVA_HOME"></a>1.æ–°å»ºç³»ç»Ÿå˜é‡ï¼šJAVA_HOME</h2><p>è·¯å¾„å–jdkè·¯å¾„</p><p><strong>E:\xxx\jdk1.8</strong></p><h2 id="2-åœ¨ç³»ç»Ÿå˜é‡Pathåé¢è¿½åŠ "><a href="#2-åœ¨ç³»ç»Ÿå˜é‡Pathåé¢è¿½åŠ " class="headerlink" title="2.åœ¨ç³»ç»Ÿå˜é‡Pathåé¢è¿½åŠ "></a>2.åœ¨ç³»ç»Ÿå˜é‡Pathåé¢è¿½åŠ </h2><p>%JAVA_HOME%\bin</p><p>%JAVA_HOME%\jre\bin</p><h2 id="3-æ·»åŠ classpath"><a href="#3-æ·»åŠ classpath" class="headerlink" title="3. æ·»åŠ classpath"></a>3. æ·»åŠ classpath</h2><p>CLASSPATH</p><p>.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar</p><h2 id="4-éªŒè¯"><a href="#4-éªŒè¯" class="headerlink" title="4. éªŒè¯"></a>4. éªŒè¯</h2><ul><li>javac -version</li><li>javac 1.8.0_241</li></ul><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¯ä»¶å®‰è£… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VM æ³¨å†Œä½¿ç”¨</title>
      <link href="/posts/32514.html"/>
      <url>/posts/32514.html</url>
      
        <content type="html"><![CDATA[<h2 id="VMware-Workstation-17-Pro-å¯†é’¥"><a href="#VMware-Workstation-17-Pro-å¯†é’¥" class="headerlink" title="VMware Workstation 17 Pro å¯†é’¥"></a>VMware Workstation 17 Pro å¯†é’¥</h2><ul><li>4A4RR-813DK-M81A9-4U35H-06KND</li><li>NZ4RR-FTK5H-H81C1-Q30QH-1V2LA</li><li>JU090-6039P-08409-8J0QH-2YR7F</li><li>4Y09U-AJK97-089Z0-A3054-83KLA</li><li>4C21U-2KK9Q-M8130-4V2QH-CF810</li><li>MC60H-DWHD5-H80U9-6V85M-8280D</li><li>ZA30U-DXF84-4850Q-UMMXZ-W6K8F</li><li>AC590-2XW97-48EFZ-TZPQE-MYHEA</li><li>YF39K-DLFE5-H856Z-6NWZE-XQ2XD</li><li>AC15R-FNZ16-H8DWQ-WFPNV-M28E2</li><li>CZ1J8-A0D82-489LZ-ZMZQT-P3KX6</li><li>YA11K-6YE8H-H89ZZ-EXM59-Y6AR0</li></ul><h2 id="VMware-Workstation16-å¯†é’¥ï¼š"><a href="#VMware-Workstation16-å¯†é’¥ï¼š" class="headerlink" title="VMware Workstation16 å¯†é’¥ï¼š"></a>VMware Workstation16 å¯†é’¥ï¼š</h2><ul><li>ZF3R0-FHED2-M80TY-8QYGC-NPKYF</li><li>YF390-0HF8P-M81RQ-2DXQE-M2UT6</li><li>ZF71R-DMX85-08DQY-8YMNC-PPHV8</li></ul><h2 id="VMware-Workstation-Pro-15-æ¿€æ´»è®¸å¯è¯ï¼š"><a href="#VMware-Workstation-Pro-15-æ¿€æ´»è®¸å¯è¯ï¼š" class="headerlink" title="VMware Workstation Pro 15 æ¿€æ´»è®¸å¯è¯ï¼š"></a>VMware Workstation Pro 15 æ¿€æ´»è®¸å¯è¯ï¼š</h2><ul><li>UY758-0RXEQ-M81WP-8ZM7Z-Y3HDA</li><li>VF750-4MX5Q-488DQ-9WZE9-ZY2D6</li><li>UU54R-FVD91-488PP-7NNGC-ZFAX6</li><li>YC74H-FGF92-081VZ-R5QNG-P6RY4</li><li>YC34H-6WWDK-085MQ-JYPNX-NZRA2</li></ul><h2 id="VMware-Workstation-Pro-14-æ¿€æ´»è®¸å¯è¯ï¼š"><a href="#VMware-Workstation-Pro-14-æ¿€æ´»è®¸å¯è¯ï¼š" class="headerlink" title="VMware Workstation Pro 14 æ¿€æ´»è®¸å¯è¯ï¼š"></a>VMware Workstation Pro 14 æ¿€æ´»è®¸å¯è¯ï¼š</h2><ul><li>FF31K-AHZD1-H8ETZ-8WWEZ-WUUVA</li><li>CV7T2-6WY5Q-48EWP-ZXY7X-QGUWD</li></ul><h2 id="VMware-Workstation-Pro-12-æ¿€æ´»è®¸å¯è¯ï¼š"><a href="#VMware-Workstation-Pro-12-æ¿€æ´»è®¸å¯è¯ï¼š" class="headerlink" title="VMware Workstation Pro 12 æ¿€æ´»è®¸å¯è¯ï¼š"></a>VMware Workstation Pro 12 æ¿€æ´»è®¸å¯è¯ï¼š</h2><ul><li>5A02H-AU243-TZJ49-GTC7K-3C61N</li><li>VF5XA-FNDDJ-085GZ-4NXZ9-N20E6</li><li>UC5MR-8NE16-H81WY-R7QGV-QG2D8</li><li>ZG1WH-ATY96-H80QP-X7PEX-Y30V4</li><li>AA3E0-0VDE1-0893Z-KGZ59-QGAVF</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è™šæ‹Ÿæœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®‰è£…</title>
      <link href="/posts/41070.html"/>
      <url>/posts/41070.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="1-å¸è½½æ—§ç‰ˆ"><a href="#1-å¸è½½æ—§ç‰ˆ" class="headerlink" title="1.å¸è½½æ—§ç‰ˆ"></a>1.å¸è½½æ—§ç‰ˆ</h1><p>é¦–å…ˆå¦‚æœç³»ç»Ÿä¸­å·²ç»å­˜åœ¨æ—§çš„Dockerï¼Œåˆ™å…ˆå¸è½½ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker \</span><br><span class="line">    docker-client \</span><br><span class="line">    docker-client-latest \</span><br><span class="line">    docker-common \</span><br><span class="line">    docker-latest \</span><br><span class="line">    docker-latest-logrotate \</span><br><span class="line">    docker-logrotate \</span><br><span class="line">    docker-engine \</span><br><span class="line">    docker-selinux </span><br></pre></td></tr></table></figure><h1 id="2-é…ç½®Dockerçš„yumåº“"><a href="#2-é…ç½®Dockerçš„yumåº“" class="headerlink" title="2.é…ç½®Dockerçš„yumåº“"></a>2.é…ç½®Dockerçš„yumåº“</h1><p>é¦–å…ˆè¦å®‰è£…ä¸€ä¸ªyumå·¥å…·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œé…ç½®Dockerçš„yumæºï¼ˆå·²æ›´æ–°ä¸ºé˜¿é‡Œäº‘æºï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"><span class="built_in">sudo</span> sed -i <span class="string">&#x27;s+download.docker.com+mirrors.aliyun.com/docker-ce+&#x27;</span> /etc/yum.repos.d/docker-ce.repo</span><br></pre></td></tr></table></figure><p>æ›´æ–°yumï¼Œå»ºç«‹ç¼“å­˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum makecache fast</span><br></pre></td></tr></table></figure><h1 id="3-å®‰è£…Docker"><a href="#3-å®‰è£…Docker" class="headerlink" title="3.å®‰è£…Docker"></a>3.å®‰è£…Docker</h1><p>æœ€åï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œå®‰è£…Docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><h1 id="4-å¯åŠ¨å’Œæ ¡éªŒ"><a href="#4-å¯åŠ¨å’Œæ ¡éªŒ" class="headerlink" title="4.å¯åŠ¨å’Œæ ¡éªŒ"></a>4.å¯åŠ¨å’Œæ ¡éªŒ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨Docker</span></span><br><span class="line">systemctl start docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢Docker</span></span><br><span class="line">systemctl stop docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯</span></span><br><span class="line">systemctl restart docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¼€æœºè‡ªå¯</span></span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œdocker pså‘½ä»¤ï¼Œå¦‚æœä¸æŠ¥é”™ï¼Œè¯´æ˜å®‰è£…å¯åŠ¨æˆåŠŸ</span></span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure><h1 id="5-é…ç½®é•œåƒåŠ é€Ÿ"><a href="#5-é…ç½®é•œåƒåŠ é€Ÿ" class="headerlink" title="5.é…ç½®é•œåƒåŠ é€Ÿ"></a>5.é…ç½®é•œåƒåŠ é€Ÿ</h1><p>é•œåƒåœ°å€å¯èƒ½ä¼šå˜æ›´ï¼Œå¦‚æœå¤±æ•ˆå¯ä»¥ç™¾åº¦æ‰¾æœ€æ–°çš„dockeré•œåƒã€‚</p><p>é…ç½®é•œåƒæ­¥éª¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /etc/docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶å†…å®¹ï¼Œæ³¨æ„æŠŠå…¶ä¸­çš„é•œåƒåŠ é€Ÿåœ°å€æ”¹æˆä½ è‡ªå·±çš„</span></span><br><span class="line"><span class="built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;registry-mirrors&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;http://hub-mirror.c.163.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://mirrors.tuna.tsinghua.edu.cn&quot;</span>,</span><br><span class="line">        <span class="string">&quot;http://mirrors.sohu.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://ustc-edu-cn.mirror.aliyuncs.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://ccr.ccs.tencentyun.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://docker.m.daocloud.io&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://docker.awsl9527.cn&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½é…ç½®</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯Docker</span></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h1 id="5-é…ç½®é•œåƒåŠ é€Ÿ-é˜¿é‡Œäº‘å·²åœç”¨ï¼‰"><a href="#5-é…ç½®é•œåƒåŠ é€Ÿ-é˜¿é‡Œäº‘å·²åœç”¨ï¼‰" class="headerlink" title="5.é…ç½®é•œåƒåŠ é€Ÿ(é˜¿é‡Œäº‘å·²åœç”¨ï¼‰"></a>5.é…ç½®é•œåƒåŠ é€Ÿ(é˜¿é‡Œäº‘å·²åœç”¨ï¼‰</h1><p>è¿™é‡Œä»¥é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿä¸ºä¾‹ã€‚</p><h2 id="5-1-æ³¨å†Œé˜¿é‡Œäº‘è´¦å·"><a href="#5-1-æ³¨å†Œé˜¿é‡Œäº‘è´¦å·" class="headerlink" title="5.1.æ³¨å†Œé˜¿é‡Œäº‘è´¦å·"></a>5.1.æ³¨å†Œé˜¿é‡Œäº‘è´¦å·</h2><p>é¦–å…ˆè®¿é—®é˜¿é‡Œäº‘ç½‘ç«™:</p><p><a href="https://www.aliyun.com/">https://www.aliyun.com/</a></p><p>æ³¨å†Œä¸€ä¸ªè´¦å·ã€‚</p><h2 id="5-2-å¼€é€šé•œåƒæœåŠ¡"><a href="#5-2-å¼€é€šé•œåƒæœåŠ¡" class="headerlink" title="5.2.å¼€é€šé•œåƒæœåŠ¡"></a>5.2.å¼€é€šé•œåƒæœåŠ¡</h2><p>åœ¨é¦–é¡µçš„äº§å“ä¸­ï¼Œæ‰¾åˆ°é˜¿é‡Œäº‘çš„<strong>å®¹å™¨é•œåƒæœåŠ¡</strong>ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e5fdc96e9b7801cb735d9f6fcd550d9e645325325.png" alt="img"></p><p>ç‚¹å‡»åè¿›å…¥æ§åˆ¶å°ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/ca35f5110bac0e539cee2da0f91f6ea8645325325.png" alt="img"></p><p>é¦–æ¬¡å¯èƒ½éœ€è¦é€‰æ‹©ç«‹åˆ»å¼€é€šï¼Œç„¶åè¿›å…¥æ§åˆ¶å°ã€‚</p><h2 id="5-3-é…ç½®é•œåƒåŠ é€Ÿ"><a href="#5-3-é…ç½®é•œåƒåŠ é€Ÿ" class="headerlink" title="5.3.é…ç½®é•œåƒåŠ é€Ÿ"></a>5.3.é…ç½®é•œåƒåŠ é€Ÿ</h2><p>æ‰¾åˆ°<strong>é•œåƒå·¥å…·</strong>ä¸‹çš„<strong>é•œåƒ****åŠ é€Ÿå™¨</strong>ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/ea9c66a01669367115d6679813ca63a7645325325.png" alt="img"></p><p>é¡µé¢å‘ä¸‹æ»šåŠ¨ï¼Œå³å¯æ‰¾åˆ°é…ç½®çš„æ–‡æ¡£è¯´æ˜ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/43a13114af74eb85fc1abba0b81ff607645325325.png" alt="img"></p><p>å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /etc/docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶å†…å®¹ï¼Œæ³¨æ„æŠŠå…¶ä¸­çš„é•œåƒåŠ é€Ÿåœ°å€æ”¹æˆä½ è‡ªå·±çš„</span></span><br><span class="line"><span class="built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://xxxx.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½é…ç½®</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯Docker</span></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹æ­å»ºDockerç¯å¢ƒ</title>
      <link href="/posts/52689.html"/>
      <url>/posts/52689.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="1-å‡†å¤‡Linuxç¯å¢ƒ"><a href="#1-å‡†å¤‡Linuxç¯å¢ƒ" class="headerlink" title="1.å‡†å¤‡Linuxç¯å¢ƒ"></a>1.å‡†å¤‡Linuxç¯å¢ƒ</h1><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦å‡†å¤‡ä¸€ä¸ªLinuxçš„ç³»ç»Ÿï¼Œæˆæœ¬æœ€ä½çš„æ–¹å¼å°±æ˜¯åœ¨æœ¬åœ°å®‰è£…ä¸€å°è™šæ‹Ÿæœºã€‚ä¸ºäº†ç»Ÿä¸€å­¦ä¹ ç¯å¢ƒï¼Œä¸ç®¡æ˜¯ä½¿ç”¨MacOSè¿˜æ˜¯Windowsç³»ç»Ÿçš„åŒå­¦ï¼Œéƒ½å»ºè®®å®‰è£…ä¸€å°è™šæ‹Ÿæœºã€‚</p><p>windowsé‡‡ç”¨VMwareï¼ŒMacåˆ™é‡‡ç”¨Fusion</p><h2 id="1-1-å®‰è£…VMware"><a href="#1-1-å®‰è£…VMware" class="headerlink" title="1.1.å®‰è£…VMware"></a>1.1.å®‰è£…VMware</h2><p>VMwareæ˜¯ä¸šç•Œæœ€å¥½ç”¨çš„è™šæ‹Ÿæœºè½¯ä»¶ä¹‹ä¸€ã€‚</p><p>windowsç‰ˆæœ¬çš„ç½‘ç«™å¦‚ä¸‹ï¼š</p><p><a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html">https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html</a></p><p>Macä¸‹ä¹Ÿæœ‰å¯¹åº”ç‰ˆæœ¬ï¼Œå«åšVMware Fusionï¼š</p><p><a href="https://www.vmware.com/cn/products/fusion.html">https://www.vmware.com/cn/products/fusion.html</a></p><p>ç‰¹åˆ«æ³¨æ„ï¼ŒWindows10ä»¥ä¸Šç‰ˆæœ¬æ“ä½œç³»ç»Ÿéœ€è¦ä¸‹è½½å®‰è£…VMware Workstation Pro16åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå®‰è£…æ–¹å¼æ­¤å¤„ç•¥ã€‚</p><p>å¦‚æœè‡ªå·±ç”µè„‘ä¸Šå·²ç»æœ‰äº†ä½ç‰ˆæœ¬çš„VMwareï¼Œåˆ™éœ€è¦å…ˆå¸è½½ï¼Œå†é‡æ–°å®‰è£…ã€‚å¸è½½è¿‡ç¨‹æ¯”è¾ƒéº»çƒ¦ã€‚</p><h3 id="1-1-1-å¸è½½æ—§ç‰ˆVMwareï¼ˆå¯é€‰ï¼‰"><a href="#1-1-1-å¸è½½æ—§ç‰ˆVMwareï¼ˆå¯é€‰ï¼‰" class="headerlink" title="1.1.1.å¸è½½æ—§ç‰ˆVMwareï¼ˆå¯é€‰ï¼‰"></a>1.1.1.å¸è½½æ—§ç‰ˆVMwareï¼ˆå¯é€‰ï¼‰</h3><p>é¦–å…ˆï¼Œåœ¨æ§åˆ¶é¢æ¿æ‰¾åˆ°ç¨‹åºå’ŒåŠŸèƒ½é€‰é¡¹ï¼Œæ‰¾åˆ°VMwareï¼Œè¿›è¡Œå¸è½½æ“ä½œï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/2f07fd9b47c3f21a452f3554df63aa03645325325.png" alt="img"></p><p>å¼¹å‡ºç¡®è®¤æ¡†, ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€:</p><p><img src="https://i0.hdslb.com/bfs/article/331412756a48eba0c4577958675fbf40645325325.png" alt="img"></p><p>ä¸‹ä¸€æ­¥ä¹‹å, é€‰æ‹©åˆ é™¤:</p><p><img src="https://i0.hdslb.com/bfs/article/2429c653c72005c1ae56d5b7e9c079c7645325325.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼ŒæŒ‰ç…§æç¤ºå®Œæˆå¸è½½æ“ä½œå³å¯ã€‚</p><p>å¸è½½å®Œæˆåï¼Œè¿˜éœ€è¦çœ‹çœ‹VMwareçš„å®‰è£…ç›®å½•æ˜¯å¦æœ‰æ—§æ•°æ®ï¼Œä¸€å¹¶æ¸…ç†æ‰ã€‚</p><p>æ¯”å¦‚å®‰è£…åœ¨<strong>Cç›˜çš„**<strong>Program Files</strong></strong>(<strong><strong>x86</strong></strong>)**ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f74a9a058a13ff6f345250521430b995645325325.png" alt="img"></p><p>åˆ™éœ€è¦ç›´æ¥åˆ é™¤æ•´ä¸ªVMwareç›®å½•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e62dec4be580eb55b4b987fafcbaeaea645325325.png" alt="img"></p><p>æ¥ä¸‹æ¥è¦æ¸…ç†æ³¨å†Œè¡¨ï¼š</p><p>é¦–å…ˆï¼ŒæŒ‰ä½Windows + R , åœ¨å¼¹å‡ºæ¡†ä¸­è¾“å…¥ â€œregeditâ€ è°ƒå‡ºæ³¨å†Œè¡¨ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/511f204c591f912420076a3136959127645325325.png" alt="img"></p><p>è¿›å…¥æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e3c3479f3c586d386d7fcd135204ea0b645325325.png" alt="img"></p><p>æ‰“å¼€**<code>HKEY_CURRENT_USER</code><strong>æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°</strong><code>Software</code>**æ–‡ä»¶å¤¹å¹¶æ‰“å¼€</p><p><img src="https://i0.hdslb.com/bfs/article/1dc6a671248fbb962659da34c3baaa58645325325.png" alt="img"></p><p>æ‰¾åˆ°â€œVMware.Incâ€ï¼Œå³é”®åˆ é™¤ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/b1b1b6f38220f71dbb6c019a774b22f1645325325.png" alt="img"></p><h3 id="1-1-2-å®‰è£…VMware"><a href="#1-1-2-å®‰è£…VMware" class="headerlink" title="1.1.2.å®‰è£…VMware"></a>1.1.2.å®‰è£…VMware</h3><p>å®‰è£…æ­¥éª¤ç•¥ã€‚ã€‚</p><p>å®‰è£…ä»¥åå¯ä»¥å…è´¹è¯•ç”¨ï¼Œå¤§å®¶å¯ä»¥å»å®˜ç½‘è´­ä¹°æ­£ç‰ˆè®¸å¯è¯ï¼Œæˆ–è€…å»ç½‘ä¸Šçœ‹çœ‹æœ‰æ²¡æœ‰å¥½å¿ƒäººèµ é€ä½ ä¸€ä¸ªè®¸å¯è¯ã€‚å¯åŠ¨åçš„ç•Œé¢å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/ad973da49016bd1a891264233d29e8e8645325325.png" alt="img"></p><h3 id="1-1-3-å¸¸è§é”™è¯¯"><a href="#1-1-3-å¸¸è§é”™è¯¯" class="headerlink" title="1.1.3.å¸¸è§é”™è¯¯"></a>1.1.3.å¸¸è§é”™è¯¯</h3><p>å¦‚æœVMwareè™šæ‹Ÿæœºè¿è¡ŒæŠ¥é”™ï¼Œä¾‹å¦‚ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/44e4fcba1f0d4f6adde572d5f5457afa645325325.png" alt="img"></p><p>è¿™ä¸ªæ˜¯ç”±äºè‹±ç‰¹å°”çš„è™šæ‹ŸåŒ–æŠ€æœ¯, æ²¡æœ‰å¼€å¯, éœ€è¦è¿›å…¥ç³»ç»Ÿçš„BIOSç•Œé¢ , å¼€å¯è‹±ç‰¹å°”çš„è™šæ‹ŸåŒ–æŠ€æœ¯ ; ä¸åŒçš„ç”µè„‘å‹å· , è¿›å…¥BIOSç•Œé¢çš„æ–¹å¼ä¸åŒ, éœ€è¦ç™¾åº¦æŸ¥è¯¢ä¸€ä¸‹è‡ªå·±ç”µè„‘çš„å‹å· , å¦‚ä½•è¿›BIOS ;</p><p>windows10ç³»ç»Ÿå¯ä»¥å‚è€ƒ: <a href="https://blog.csdn.net/biu_code/article/details/107504627">https://blog.csdn.net/biu_code/article/details/107504627</a></p><p>ä»¥ThinkPadä¸ºä¾‹ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/d07ca10de8f7e45145b81032db503deb645325325.png" alt="img"></p><h2 id="1-2-åˆ›å»ºè™šæ‹Ÿæœº"><a href="#1-2-åˆ›å»ºè™šæ‹Ÿæœº" class="headerlink" title="1.2.åˆ›å»ºè™šæ‹Ÿæœº"></a>1.2.åˆ›å»ºè™šæ‹Ÿæœº</h2><p>Centos7æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªLinuxå‘è¡Œç‰ˆæœ¬ï¼Œåœ¨å›½å†…çš„ä½¿ç”¨æ¯”ä¾‹è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚</p><p>å¤§å®¶é¦–å…ˆè¦ä¸‹è½½ä¸€ä¸ªCentos7çš„isoæ–‡ä»¶ï¼Œæˆ‘åœ¨èµ„æ–™ä¸­ç»™å¤§å®¶å‡†å¤‡äº†ä¸€ä¸ªminiçš„ç‰ˆæœ¬ï¼Œä½“ç§¯ä¸åˆ°1Gï¼Œæ¨èå¤§å®¶ä½¿ç”¨ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/ad4a6250dcd48754a13c5c4beab8b0e8645325325.png" alt="img"></p><p>æˆ‘ä»¬åœ¨VMwareã€Šä¸»é¡µã€‹ç•Œé¢ä¸­ç‚¹å‡»ã€Šåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºã€‹æŒ‰é’®ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/7497ba151fc4841372f987a8915d0cc8645325325.png" alt="img"></p><p>ç„¶åä¼šå¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/aaae45616f176682832b1a6b92c86095645325325.png" alt="img"></p><p>ç„¶åé¡µé¢ä¸­é€‰æ‹©ä½ å‡†å¤‡å¥½çš„ISOæ–‡ä»¶ï¼Œç»§ç»­ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/dd1c88a03aa9b5c683747dc567e2861a645325325.png" alt="img"></p><p>ç„¶åå¡«å†™<code>è™šæ‹Ÿæœºçš„åç§°</code>ä»¥åŠè™šæ‹Ÿæœºå°†æ¥<code>ä¿å­˜çš„ä½ç½®</code>ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f6618fa89d0c71249dc323a787b4102d645325325.png" alt="img"></p><p>å†æ¬¡ä¸‹ä¸€æ­¥ï¼Œå¡«å†™è™šæ‹Ÿæœºç£ç›˜å¤§å°ã€‚è¿™é‡Œå»ºè®®ç»™å¤§ä¸€ç‚¹ï¼Œå¦åˆ™å°†æ¥ä¸å¤Ÿç”¨è°ƒæ•´èµ·æ¥éº»çƒ¦ã€‚è€Œä¸”è¿™é‡Œè®¾ç½®å¤§å°å¹¶ä¸æ˜¯ç«‹åˆ»å ç”¨è¿™ä¹ˆå¤šï¼Œè€Œæ˜¯è®¾ç½®ä¸€ä¸ªä¸Šé™ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/3e9c3b919cd7d76eb97e75cb8826d57a645325325.png" alt="img"></p><p>ç»§ç»­ä¸‹ä¸€æ­¥ï¼Œç„¶åé€‰æ‹©è™šæ‹Ÿæœºç¡¬ä»¶è®¾ç½®ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/94a31baf537eed69567b0990c89625b4645325325.png" alt="img"></p><p>åœ¨å¼¹å‡ºçš„çª—å£ä¸­è®¾ç½®è™šæ‹Ÿæœºç¡¬ä»¶ï¼Œå»ºè®®CPUç»™åˆ°4æ ¸ï¼Œå†…å­˜ç»™åˆ°8Gï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/eca9a4d13383ee098b07f5cecd94e7c8645325325.png" alt="img"></p><p>é…ç½®å®Œæˆåï¼Œç‚¹å‡»<code>å…³é—­</code>ï¼Œå›åˆ°ä¸Šä¸€é¡µé¢ï¼Œç»§ç»­ç‚¹å‡»<code>å®Œæˆ</code>ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/da3c311e082c7bbe7cebb2c5298f1153645325325.png" alt="img"></p><p>è™šæ‹Ÿæœºå°±åˆ›å»ºå®Œæ¯•äº†ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/cc2837244a6581ed631278dd09ebd8a2645325325.png" alt="img"></p><h2 id="1-3-å®‰è£…Centos7"><a href="#1-3-å®‰è£…Centos7" class="headerlink" title="1.3.å®‰è£…Centos7"></a>1.3.å®‰è£…Centos7</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯åŠ¨åˆšåˆšåˆ›å»ºçš„è™šæ‹Ÿæœºï¼Œå¼€å§‹å®‰è£…Centos7ç³»ç»Ÿï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/9dd573c7fb87272650bd72098502a3c2645325325.png" alt="img"></p><p>å¯åŠ¨åéœ€è¦é€‰æ‹©å®‰è£…èœå•ï¼Œå°†é¼ æ ‡ç§»å…¥é»‘çª—å£ä¸­åï¼Œå°†æ— æ³•å†ä½¿ç”¨é¼ æ ‡ï¼Œéœ€è¦æŒ‰ä¸Šä¸‹é”®é€‰æ‹©èœå•ã€‚é€‰ä¸­Install Centos 7 åæŒ‰ä¸‹å›è½¦ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f63605e29248dba3f28b2266c61e0655645325325.png" alt="img"></p><p>ç„¶åä¼šæç¤ºæˆ‘ä»¬æŒ‰ä¸‹enteré”®ç»§ç»­ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/9692d998fa438e03cb042bb74a73a242645325325.png" alt="img"></p><p>è¿‡ä¸€ä¼šå„¿åï¼Œä¼šè¿›å…¥è¯­è¨€é€‰æ‹©èœå•ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨é¼ æ ‡é€‰æ‹©ã€‚é€‰æ‹©ä¸­æ–‡-ç®€ä½“ä¸­æ–‡ï¼Œç„¶åç»§ç»­ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/72589b84d410b0197af1beb8672ca79c645325325.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œä¼šè¿›å…¥å®‰è£…é…ç½®é¡µé¢ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/558e50c33b0f248308b62a27ee3b7d21645325325.png" alt="img"></p><p>é¼ æ ‡å‘ä¸‹æ»šåŠ¨åï¼Œæ‰¾åˆ°ç³»ç»Ÿ-å®‰è£…ä½ç½®é…ç½®ï¼Œç‚¹å‡»ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/60f824e56003175439a3a0e9ee4674ea645325325.png" alt="img"></p><p>é€‰æ‹©åˆšåˆšæ·»åŠ çš„ç£ç›˜ï¼Œå¹¶ç‚¹å‡»å®Œæˆï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/c60556bdc94fcfbec2930f1cb4649ec2645325325.png" alt="img"></p><p>ç„¶åå›åˆ°é…ç½®é¡µé¢ï¼Œè¿™æ¬¡ç‚¹å‡»ã€Šç½‘ç»œå’Œä¸»æœºåã€‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/a2cb2982e5f260dc7d167d387dac4055645325325.png" alt="img"></p><p>åœ¨ç½‘ç»œé¡µé¢åšä¸‹é¢çš„å‡ ä»¶äº‹æƒ…ï¼š</p><ol><li>ä¿®æ”¹ä¸»æœºåä¸ºè‡ªå·±å–œæ¬¢çš„ä¸»æœºåï¼Œä¸è¦å‡ºç°ä¸­æ–‡å’Œç‰¹æ®Šå­—ç¬¦ï¼Œå»ºè®®ç”¨localhost</li><li>ç‚¹å‡»åº”ç”¨</li><li>å°†ç½‘ç»œè¿æ¥æ‰“å¼€</li><li>ç‚¹å‡»é…ç½®ï¼Œè®¾ç½®è¯¦ç»†ç½‘ç»œä¿¡æ¯</li></ol><p><img src="https://i0.hdslb.com/bfs/article/a830c111e9d1270fb5d9eab2fe0e8b1d645325325.png" alt="img"></p><p>æœ€å¥½ç”¨ä¸€ä¸ªæˆªå›¾è½¯ä»¶ï¼Œè®°ä½ä¸Šå›¾ä¸­çš„ç½‘ç»œè¯¦ç»†ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥çš„é…ç½®è¦å‚è€ƒï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/4b606ca23f9883671bec903e380b0805645325325.png" alt="img"></p><p>ç‚¹å‡»é…ç½®æŒ‰é’®åï¼Œæˆ‘ä»¬éœ€è¦æŠŠç½‘å¡åœ°å€æ”¹ä¸ºé™æ€IPï¼Œè¿™æ ·å¯ä»¥é¿å…æ¯æ¬¡å¯åŠ¨è™šæ‹ŸæœºIPéƒ½å˜åŒ–ã€‚æ‰€æœ‰é…ç½®ç…§æ¬ä½ è‡ªå·±æˆªå›¾çš„ç½‘ç»œä¿¡æ¯å¡«å†™ï¼Œä¸è¦ç…§æŠ„æˆ‘çš„ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/4980c7eda43c85ef5068141675a2e875645325325.png" alt="img"></p><p>ä¸Šå›¾ä¸­çš„å››ä¸ªä¿¡æ¯å‚è€ƒä¹‹å‰çš„<strong>ä»¥å¤ªç½‘</strong>**(ens33)**<strong>ç½‘å¡</strong>çš„æˆªå›¾ï¼Œä¸è¦ç…§æ¬æˆ‘çš„æ¥å†™ã€‚</p><p>æœ€åï¼Œç‚¹å‡»å®ŒæˆæŒ‰é’®ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/67b63d5713f45dcde2ada79cd6f1dac8645325325.png" alt="img"></p><p>å›åˆ°é…ç½®ç•Œé¢åï¼Œç‚¹å‡»<code>å¼€å§‹å®‰è£…</code>ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/3215f798fe87c0457cc3c9b78b5751f5645325325.png" alt="img"></p><p>æ¥ä¸‹æ¥éœ€è¦è®¾ç½®rootå¯†ç ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/462b0780bffcd264b9a76bf88ea44e2e645325325.png" alt="img"></p><p>å¡«å†™ä½ è¦ä½¿ç”¨çš„rootå¯†ç ï¼Œç„¶åç‚¹å‡»å®Œæˆï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/6cc801ddfe7e7fb88b56bdd17041649e645325325.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œè€å¿ƒç­‰å¾…å®‰è£…å³å¯ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/25739c7dae60ef5d9de7a25febfc15db645325325.png" alt="img"></p><p>ç­‰å¾…å®‰è£…å®Œæˆåï¼Œç‚¹å‡»<strong>é‡å¯</strong>ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f4f2f49c793c59afa50df42f3b35d281645325325.png" alt="img"></p><p>è€å¿ƒç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œä¸è¦åšä»»ä½•æ“ä½œï¼Œè™šæ‹Ÿæœºå³å¯å¯åŠ¨å®Œæ¯•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/b10006c6604f6be19d1d108149e9e6df645325325.png" alt="img"></p><p>è¾“å…¥ç”¨æˆ·årootï¼Œç„¶åç‚¹å‡»å›è½¦ï¼Œä¼šè¦æ±‚ä½ è¾“å…¥å¯†ç ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/bfe1aa74ed1fbedd3e6ecff180f8c716645325325.png" alt="img"></p><p>æ­¤æ—¶ä½ è¦è¾“å…¥å¯†ç ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯å¯†ç æ˜¯<strong>éšè—</strong>çš„ï¼Œè¾“å…¥äº†ä¹Ÿçœ‹ä¸è§ã€‚æ‰€ä»¥æ”¾å¿ƒè¾“å…¥ï¼Œå®Œæˆåå›è½¦å³å¯ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/2749ce3f2a244a0552e5db4d46649322645325325.png" alt="img"></p><p>åªè¦å¯†ç è¾“å…¥æ­£ç¡®ï¼Œå°±å¯ä»¥æ­£å¸¸ç™»å½•ã€‚æ­¤æ—¶å¯ä»¥ç”¨å‘½ä»¤æµ‹è¯•è™šæ‹Ÿæœºç½‘ç»œæ˜¯å¦ç•…é€šï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping www.baidu.com</span><br></pre></td></tr></table></figure><p>å¦‚æœçœ‹åˆ°è¿™æ ·çš„ç»“æœä»£è¡¨ç½‘ç»œç•…é€šï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/fd4a5a4773d616a9fa8576384e7916ec645325325.png" alt="img"></p><p>é»˜è®¤pingå‘½ä»¤ä¼šæŒç»­æ‰§è¡Œï¼ŒæŒ‰ä¸‹<code>CTRL </code>+ <code>C</code>åå‘½ä»¤å³å¯åœæ­¢ã€‚</p><h2 id="1-4-è®¾ç½®è™šæ‹Ÿæœºå¿«ç…§"><a href="#1-4-è®¾ç½®è™šæ‹Ÿæœºå¿«ç…§" class="headerlink" title="1.4.è®¾ç½®è™šæ‹Ÿæœºå¿«ç…§"></a>1.4.è®¾ç½®è™šæ‹Ÿæœºå¿«ç…§</h2><p>åœ¨è™šæ‹Ÿæœºå®‰è£…å®Œæˆåï¼Œæœ€å¥½ç«‹åˆ»è®¾ç½®ä¸€ä¸ªå¿«ç…§ï¼Œè¿™æ ·ä¸€æ—¦å°†æ¥è™šæ‹Ÿæœºå‡ºç°é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿæ¢å¤ã€‚</p><p>æˆ‘ä»¬å…ˆåœæ­¢è™šæ‹Ÿæœºï¼Œç‚¹å‡»VMwareé¡¶éƒ¨èœå•ä¸­çš„<code>æš‚åœ</code>**<code>ä¸‹æ‹‰é€‰æ¡†</code>**ï¼Œé€‰æ‹©<code>å…³é—­å®¢æˆ·æœº</code>ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/5649db35099ce698f827733446ddd8a7645325325.png" alt="img"></p><p>æ¥ç€ï¼Œç‚¹å‡»VMwareèœå•ä¸­çš„ğŸ”§æŒ‰é’®:</p><p><img src="https://i0.hdslb.com/bfs/article/1c860ae7b7fb84fbe0528e2d7639de7c645325325.png" alt="img"></p><p>ç„¶ååœ¨å¼¹å‡ºçš„å¿«ç…§ç®¡ç†çª—å£ä¸­ï¼Œç‚¹å‡»<strong>æ‹æ‘„å¿«ç…§</strong>ï¼Œå¡«å†™æ–°çš„å¿«ç…§ä¿¡æ¯ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/a95a0ddf10cd0efe0128d021d576343c645325325.png" alt="img"></p><p>å¿«ç…§æ‹æ‘„å®Œæˆäº†ï¼è€Œä¸”æˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒé˜¶æ®µæ‹æ‘„å¤šä¸ªä¸åŒå¿«ç…§ä½œä¸ºå¤‡ä»½ï¼Œæ–¹ä¾¿åæœŸæ¢å¤æ•°æ®ã€‚</p><p>å‡å¦‚ä»¥åè™šæ‹Ÿæœºæ–‡ä»¶å—æŸï¼Œéœ€è¦æ¢å¤åˆ°åˆå§‹çŠ¶æ€çš„è¯ï¼Œå¯ä»¥é€‰ä¸­è¦æ¢å¤çš„å¿«ç…§ï¼Œç‚¹å‡»è½¬åˆ°å³å¯ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f3b4045e22dc32024c51d8d447c1336e645325325.png" alt="img"></p><h1 id="2-SSHå®¢æˆ·ç«¯"><a href="#2-SSHå®¢æˆ·ç«¯" class="headerlink" title="2.SSHå®¢æˆ·ç«¯"></a>2.SSHå®¢æˆ·ç«¯</h1><p>åœ¨VMwareç•Œé¢ä¸­æ“ä½œè™šæ‹Ÿæœºéå¸¸ä¸å‹å¥½ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¨èä½¿ç”¨ä¸“é—¨çš„SSHå®¢æˆ·ç«¯ã€‚å¸‚é¢ä¸Šå¸¸è§çš„æœ‰ï¼š</p><ul><li>Xshellï¼šä¸ªäººå…è´¹ï¼Œå•†ä¸šæ”¶è´¹ï¼Œä¹‹å‰çˆ†å‡ºè¿‡æœ‰éšè—åé—¨ã€‚ä¸æ¨è</li><li>Finshellï¼šåŸºç¡€åŠŸèƒ½å…è´¹ï¼Œé«˜çº§åŠŸèƒ½æ”¶è´¹ï¼ŒåŸºäºJavaï¼Œå†…å­˜å ç”¨è¾ƒé«˜ï¼ˆåœ¨1ä¸ªGå·¦å³ï¼‰ã€‚ä¸æ¨è</li><li>MobarXtermï¼šåŸºç¡€åŠŸèƒ½å…è´¹ã€é«˜çº§åŠŸèƒ½æ”¶è´¹ã€‚å¼€æºã€åŠŸèƒ½å¼ºå¤§ã€å†…å­˜å ç”¨ä½ï¼ˆåªæœ‰10må·¦å³ï¼‰ï¼Œä½†æ˜¯ç•Œé¢ä¸å¤ªæ¼‚äº®ã€‚æ¨èä½¿ç”¨</li></ul><h2 id="2-1-å®‰è£…MobarXterm"><a href="#2-1-å®‰è£…MobarXterm" class="headerlink" title="2.1.å®‰è£…MobarXterm"></a>2.1.å®‰è£…MobarXterm</h2><p>è¿™é‡Œæˆ‘ä»¬ä¼šé€‰æ‹©å†…å­˜å ç”¨è¾ƒä½çš„MobarXtermä½œä¸ºSSHå®¢æˆ·ç«¯ï¼Œå…¶å®˜ç½‘åœ°å€ï¼š</p><p><a href="https://mobaxterm.mobatek.net/">https://mobaxterm.mobatek.net/</a></p><p>å®‰è£…å®Œæˆåç•Œé¢å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/89b59772d91c2d446b84794600e7510a645325325.png" alt="img"></p><p>ç‚¹å‡»sessionæŒ‰é’®ï¼Œè¿›å…¥ä¼šè¯ç®¡ç†ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/9331ad5c992910b8d9e9d807adb13234645325325.png" alt="img"></p><p>åœ¨å¼¹å‡ºçš„sessionç®¡ç†é¡µé¢ä¸­ï¼ŒæŒ‰ç…§ä¸‹å›¾å¡«å†™ä¿¡æ¯å¹¶ä¿å­˜ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e01c25cc5235a3858e930ee7c65989c6645325325.png" alt="img"></p><p>ç‚¹å‡»OKåä¼šæç¤ºä½ æ˜¯ç¬¬ä¸€æ¬¡è¿æ¥ï¼Œè¯¢é—®ä½ æ˜¯ä¿¡ä»»è¿æ¥çš„æœåŠ¡ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/3380d8ee2db528a028ad760cf12be8e3645325325.png" alt="img"></p><p>é€‰æ‹©acceptä¹‹åï¼Œä¼šè¯¢é—®ä½ æ˜¯å¦è¦è®°ä½å¯†ç ï¼Œé€‰æ‹©yesï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/9e93ce5e3806be9b1233066bce15223b645325325.png" alt="img"></p><p>ç´§æ¥ç€éœ€è¦ä½ è®¾ç½®ä¸€ä¸ªMobarXtermçš„å…¨å±€å¯†ç ç”¨äºåšå¯†ç ç®¡ç†ï¼Œå»ºè®®è®¾ç½®ä¸€ä¸ªä¸è™šæ‹Ÿæœºå¯†ç ä¸åŒçš„ï¼š</p><p>è¾“å…¥å¯†ç ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/9f48ec7b9674da4aee74c7552d1eee01645325325.png" alt="img"></p><p>è¾“å…¥æˆåŠŸåï¼Œå°±ä¼šè¿æ¥æˆåŠŸï¼Œå¹¶è¿›å…¥æ“ä½œç•Œé¢äº†ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/867f44ebf3871558f723b831f0397bac645325325.png" alt="img"></p><p>è¿™é‡Œéœ€è¦åšä¸€äº›åŸºç¡€çš„é…ç½®ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/79d1da0356cca425426c4ed30e3f9e64645325325.png" alt="img"></p><h2 id="2-2-é…ç½®é»˜è®¤ç¼–è¾‘å™¨"><a href="#2-2-é…ç½®é»˜è®¤ç¼–è¾‘å™¨" class="headerlink" title="2.2.é…ç½®é»˜è®¤ç¼–è¾‘å™¨"></a>2.2.é…ç½®é»˜è®¤ç¼–è¾‘å™¨</h2><p>é¦–å…ˆå»ºè®®è®¾ç½®ä¸€ä¸‹é»˜è®¤ç¼–è¾‘å™¨ï¼Œè¿™æ ·æˆ‘ä»¬é€šè¿‡MobarXtermçš„FTPå·¥å…·æ‰“å¼€æ–‡ä»¶æ—¶ä¼šä»¥æŒ‡å®šçš„ç¼–è¾‘å™¨æ‰“å¼€ï¼Œæ–¹ä¾¿ä¿®æ”¹ã€‚æˆ‘è¿™é‡Œé…ç½®çš„æ˜¯vscodeï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/803169276a026d5e4eb6a6dfda17daa2645325325.png" alt="img"></p><h2 id="2-3-é…ç½®å³é”®ç²˜è´´"><a href="#2-3-é…ç½®å³é”®ç²˜è´´" class="headerlink" title="2.3.é…ç½®å³é”®ç²˜è´´"></a>2.3.é…ç½®å³é”®ç²˜è´´</h2><p>å¤åˆ¶ç²˜è´´æ˜¯å¾ˆå¸¸ç”¨çš„é…ç½®ï¼ŒMobarXtermé»˜è®¤å·¦é”®é€‰ä¸­å³<strong>å¤åˆ¶</strong>ï¼Œä½†æ˜¯éœ€è¦é…ç½®å³é”®ç‚¹å‡»ä¸º<strong>ç²˜è´´ï¼š</strong></p><p><img src="https://i0.hdslb.com/bfs/article/61d55313766f7286b0325cdb54f3f939645325325.png" alt="img"></p><p>è¿™æ ·ï¼Œå¤åˆ¶å’Œç²˜è´´å¯ä»¥å…¨éƒ¨é€šè¿‡é¼ æ ‡æ“ä½œï¼Œæ— éœ€æŒ‰é”®ã€‚</p><h2 id="2-4-SSHé…ç½®"><a href="#2-4-SSHé…ç½®" class="headerlink" title="2.4.SSHé…ç½®"></a>2.4.SSHé…ç½®</h2><p>æ¥ä¸‹æ¥è¿˜æœ‰å‡ ä¸ªsshé…ç½®ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/bd302b510f78a64f6d9dc33c018a3359645325325.png" alt="img"></p><p>åˆ†åˆ«æ˜¯ï¼š</p><ul><li>é»˜è®¤çš„ç™»å½•ç”¨æˆ·</li><li>sshä¿æŒè¿æ¥</li><li>å–æ¶ˆè¿æ¥æˆåŠŸåçš„æ¬¢è¿banner</li></ul><h2 id="2-5-å…³é—­X-ServeræœåŠ¡"><a href="#2-5-å…³é—­X-ServeræœåŠ¡" class="headerlink" title="2.5.å…³é—­X-ServeræœåŠ¡"></a>2.5.å…³é—­X-ServeræœåŠ¡</h2><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ²¡æœ‰x-serverçš„éœ€æ±‚ï¼Œå› æ­¤å¯ä»¥é€‰æ‹©ä¸è¦è‡ªå¯åŠ¨ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/4d915dd7257704861f8f7e556a6f7d82645325325.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå­¦ä¹ ç¬”è®°</title>
      <link href="/posts/10048.html"/>
      <url>/posts/10048.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="1-å¿«é€Ÿå…¥é—¨"><a href="#1-å¿«é€Ÿå…¥é—¨" class="headerlink" title="1.å¿«é€Ÿå…¥é—¨"></a>1.å¿«é€Ÿå…¥é—¨</h1><h2 id="1-1-éƒ¨ç½²MySQL"><a href="#1-1-éƒ¨ç½²MySQL" class="headerlink" title="1.1.éƒ¨ç½²MySQL"></a>1.1.éƒ¨ç½²MySQL</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ©ç”¨Dockeræ¥å®‰è£…ä¸€ä¸ªMySQLè½¯ä»¶ï¼Œå¤§å®¶å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ä¹‹å‰ä¼ ç»Ÿçš„å®‰è£…æ–¹å¼ï¼Œçœ‹çœ‹å“ªä¸ªæ•ˆç‡æ›´é«˜ä¸€äº›ã€‚</p><p>å¦‚æœæ˜¯åˆ©ç”¨ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²MySQLï¼Œå¤§æ¦‚çš„æ­¥éª¤æœ‰ï¼š</p><ul><li>æœç´¢å¹¶ä¸‹è½½MySQLå®‰è£…åŒ…</li><li>ä¸Šä¼ è‡³Linuxç¯å¢ƒ</li><li>ç¼–è¯‘å’Œé…ç½®ç¯å¢ƒ</li><li>å®‰è£…</li></ul><p>è€Œä½¿ç”¨Dockerå®‰è£…ï¼Œä»…ä»…éœ€è¦ä¸€æ­¥å³å¯ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼ˆå»ºè®®é‡‡ç”¨CVå¤§æ³•ï¼‰ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run <span class="literal">-d</span> \</span><br><span class="line">  <span class="literal">--name</span> mysql \</span><br><span class="line">  <span class="literal">-p</span> <span class="number">3306</span>:<span class="number">3306</span> \</span><br><span class="line">  <span class="literal">-e</span> TZ=Asia/Shanghai \</span><br><span class="line">  <span class="literal">-e</span> MYSQL_ROOT_PASSWORD=<span class="number">123</span> \</span><br><span class="line">  mysql</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå¦‚å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/082b0f5b5c6c7d41bffaaa7589874325645325325.png" alt="img"></p><p>MySQLå®‰è£…å®Œæ¯•ï¼é€šè¿‡ä»»æ„å®¢æˆ·ç«¯å·¥å…·å³å¯è¿æ¥åˆ°MySQL.</p><p>å¤§å®¶å¯ä»¥å‘ç°ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œå‘½ä»¤åï¼ŒDockeråšçš„ç¬¬ä¸€ä»¶äº‹æƒ…ï¼Œæ˜¯å»è‡ªåŠ¨æœç´¢å¹¶ä¸‹è½½äº†MySQLï¼Œç„¶åä¼šè‡ªåŠ¨è¿è¡ŒMySQLï¼Œæˆ‘ä»¬å®Œå…¨ä¸ç”¨æ’æ‰‹ï¼Œæ˜¯ä¸æ˜¯éå¸¸æ–¹ä¾¿ã€‚</p><p>è€Œä¸”ï¼Œè¿™ç§å®‰è£…æ–¹å¼ä½ å®Œå…¨ä¸ç”¨è€ƒè™‘è¿è¡Œçš„æ“ä½œç³»ç»Ÿç¯å¢ƒï¼Œå®ƒä¸ä»…ä»…åœ¨CentOSç³»ç»Ÿæ˜¯è¿™æ ·ï¼Œåœ¨Ubuntuç³»ç»Ÿã€macOSç³»ç»Ÿã€ç”šè‡³æ˜¯è£…äº†WSLçš„Windowsä¸‹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™æ¡å‘½ä»¤æ¥å®‰è£…MySQLã€‚</p><p>è¦çŸ¥é“ï¼Œ<strong>ä¸åŒæ“ä½œç³»ç»Ÿä¸‹å…¶å®‰è£…åŒ…ã€è¿è¡Œç¯å¢ƒæ˜¯éƒ½ä¸ç›¸åŒçš„</strong>ï¼å¦‚æœæ˜¯<strong>æ‰‹åŠ¨å®‰è£…ï¼Œå¿…é¡»æ‰‹åŠ¨è§£å†³å®‰è£…åŒ…ä¸åŒã€ç¯å¢ƒä¸åŒçš„ã€é…ç½®ä¸åŒçš„é—®é¢˜</strong>ï¼</p><p>è€Œä½¿ç”¨Dockerï¼Œè¿™äº›å®Œå…¨ä¸ç”¨è€ƒè™‘ã€‚å°±æ˜¯å› ä¸ºDockerä¼šè‡ªåŠ¨æœç´¢å¹¶ä¸‹è½½MySQLã€‚æ³¨æ„ï¼šè¿™é‡Œä¸‹è½½çš„ä¸æ˜¯å®‰è£…åŒ…ï¼Œè€Œæ˜¯<strong>é•œåƒã€‚</strong>é•œåƒä¸­ä¸ä»…åŒ…å«äº†MySQLæœ¬èº«ï¼Œè¿˜åŒ…å«äº†å…¶è¿è¡Œæ‰€éœ€è¦çš„ç¯å¢ƒã€é…ç½®ã€ç³»ç»Ÿçº§å‡½æ•°åº“ã€‚å› æ­¤å®ƒåœ¨è¿è¡Œæ—¶å°±æœ‰è‡ªå·±ç‹¬ç«‹çš„ç¯å¢ƒï¼Œå°±å¯ä»¥è·¨ç³»ç»Ÿè¿è¡Œï¼Œä¹Ÿä¸éœ€è¦æ‰‹åŠ¨å†æ¬¡é…ç½®ç¯å¢ƒäº†ã€‚è¿™å¥—ç‹¬ç«‹è¿è¡Œçš„éš”ç¦»ç¯å¢ƒæˆ‘ä»¬ç§°ä¸º<strong>å®¹å™¨</strong>ã€‚</p><p>è¯´æ˜ï¼š</p><ul><li>é•œåƒï¼šè‹±æ–‡æ˜¯image</li><li>å®¹å™¨ï¼šè‹±æ–‡æ˜¯container</li></ul><blockquote><p>å› æ­¤ï¼ŒDockerå®‰è£…è½¯ä»¶çš„è¿‡ç¨‹ï¼Œå°±æ˜¯è‡ªåŠ¨æœç´¢ä¸‹è½½é•œåƒï¼Œç„¶ååˆ›å»ºå¹¶è¿è¡Œå®¹å™¨çš„è¿‡ç¨‹ã€‚</p></blockquote><p>Dockerä¼šæ ¹æ®å‘½ä»¤ä¸­çš„é•œåƒåç§°è‡ªåŠ¨æœç´¢å¹¶ä¸‹è½½é•œåƒï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå®ƒæ˜¯å»å“ªé‡Œæœç´¢å’Œä¸‹è½½é•œåƒçš„å‘¢ï¼Ÿè¿™äº›é•œåƒåˆæ˜¯è°åˆ¶ä½œçš„å‘¢ï¼Ÿ</p><p>Dockerå®˜æ–¹æä¾›äº†ä¸€ä¸ªä¸“é—¨ç®¡ç†ã€å­˜å‚¨é•œåƒçš„ç½‘ç«™ï¼Œå¹¶å¯¹å¤–å¼€æ”¾äº†é•œåƒä¸Šä¼ ã€ä¸‹è½½çš„æƒåˆ©ã€‚Dockerå®˜æ–¹æä¾›äº†ä¸€äº›åŸºç¡€é•œåƒï¼Œç„¶åå„å¤§è½¯ä»¶å…¬å¸åˆåœ¨åŸºç¡€é•œåƒåŸºç¡€ä¸Šï¼Œåˆ¶ä½œäº†è‡ªå®¶è½¯ä»¶çš„é•œåƒï¼Œå…¨éƒ¨éƒ½å­˜æ”¾åœ¨è¿™ä¸ªç½‘ç«™ã€‚è¿™ä¸ªç½‘ç«™å°±æˆäº†Dockeré•œåƒäº¤æµçš„ç¤¾åŒºï¼š</p><p><a href="https://hub.docker.com/">https://hub.docker.com/</a></p><p>åŸºæœ¬ä¸Šæˆ‘ä»¬å¸¸ç”¨çš„å„ç§è½¯ä»¶éƒ½èƒ½åœ¨è¿™ä¸ªç½‘ç«™ä¸Šæ‰¾åˆ°ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥è‡ªå·±åˆ¶ä½œé•œåƒä¸Šä¼ ä¸Šå»ã€‚</p><p>åƒè¿™ç§æä¾›å­˜å‚¨ã€ç®¡ç†Dockeré•œåƒçš„æœåŠ¡å™¨ï¼Œè¢«ç§°ä¸ºDockerRegistryï¼Œå¯ä»¥ç¿»è¯‘ä¸ºé•œåƒä»“åº“ã€‚DockerHubç½‘ç«™æ˜¯å®˜æ–¹ä»“åº“ï¼Œé˜¿é‡Œäº‘ã€åä¸ºäº‘ä¼šæä¾›ä¸€äº›ç¬¬ä¸‰æ–¹ä»“åº“ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æ­å»ºç§æœ‰çš„é•œåƒä»“åº“ã€‚</p><p>å®˜æ–¹ä»“åº“åœ¨å›½å¤–ï¼Œä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šä½¿ç”¨ç¬¬ä¸‰æ–¹ä»“åº“æä¾›çš„é•œåƒåŠ é€ŸåŠŸèƒ½ï¼Œæé«˜ä¸‹è½½é€Ÿåº¦ã€‚è€Œä¼ä¸šå†…éƒ¨çš„æœºå¯†é¡¹ç›®ï¼Œå¾€å¾€ä¼šé‡‡ç”¨ç§æœ‰é•œåƒä»“åº“ã€‚</p><p>æ€»ä¹‹ï¼Œé•œåƒçš„æ¥æºæœ‰ä¸¤ç§ï¼š</p><ul><li>åŸºäºå®˜æ–¹åŸºç¡€é•œåƒè‡ªå·±åˆ¶ä½œ</li><li>ç›´æ¥å»DockerRegistryä¸‹è½½</li></ul><p><strong>æ€»ç»“ä¸€ä¸‹</strong>ï¼š</p><p>Dockeræœ¬èº«åŒ…å«ä¸€ä¸ªåå°æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨Dockerå‘½ä»¤å‘Šè¯‰DockeræœåŠ¡ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿéƒ¨ç½²æŒ‡å®šçš„åº”ç”¨ã€‚DockeræœåŠ¡éƒ¨ç½²åº”ç”¨æ—¶ï¼Œé¦–å…ˆè¦å»æœç´¢å¹¶ä¸‹è½½åº”ç”¨å¯¹åº”çš„é•œåƒï¼Œç„¶åæ ¹æ®é•œåƒåˆ›å»ºå¹¶å…è®¸å®¹å™¨ï¼Œåº”ç”¨å°±éƒ¨ç½²å®Œæˆäº†ã€‚</p><p>ç”¨ä¸€å¹…å›¾æ ‡ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/0352c747db4ecc27b68af7e5072c25d0645325325.png" alt="image-20240815184207816"></p><h2 id="1-2-å‘½ä»¤è§£è¯»"><a href="#1-2-å‘½ä»¤è§£è¯»" class="headerlink" title="1.2.å‘½ä»¤è§£è¯»"></a>1.2.å‘½ä»¤è§£è¯»</h2><p>åˆ©ç”¨Dockerå¿«é€Ÿçš„å®‰è£…äº†MySQLï¼Œéå¸¸çš„æ–¹ä¾¿ï¼Œä¸è¿‡æˆ‘ä»¬æ‰§è¡Œçš„å‘½ä»¤åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run <span class="literal">-d</span> \</span><br><span class="line">  <span class="literal">--name</span> mysql \</span><br><span class="line">  <span class="literal">-p</span> <span class="number">3306</span>:<span class="number">3306</span> \</span><br><span class="line">  <span class="literal">-e</span> TZ=Asia/Shanghai \</span><br><span class="line">  <span class="literal">-e</span> MYSQL_ROOT_PASSWORD=<span class="number">123</span> \</span><br><span class="line">  mysql</span><br></pre></td></tr></table></figure><div class="note danger no-icon flat"><p>è§£è¯»ï¼š</p><ul><li><code>docker run -d</code> ï¼šåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œ<code>-d</code>åˆ™æ˜¯è®©å®¹å™¨ä»¥åå°è¿›ç¨‹è¿è¡Œ</li><li><code>--name`` mysql </code> : ç»™å®¹å™¨èµ·ä¸ªåå­—å«<code>mysql</code>ï¼Œä½ å¯ä»¥å«åˆ«çš„</li><li><code>-p 3306:3306</code> : è®¾ç½®ç«¯å£æ˜ å°„ã€‚<ul><li><strong>å®¹å™¨æ˜¯éš”ç¦»ç¯å¢ƒ</strong>ï¼Œå¤–ç•Œä¸å¯è®¿é—®ã€‚ä½†æ˜¯å¯ä»¥<strong>å°†<strong><strong>å®¿ä¸»æœº</strong></strong>ç«¯å£****æ˜ å°„å®¹å™¨å†…åˆ°ç«¯å£</strong>ï¼Œå½“è®¿é—®å®¿ä¸»æœºæŒ‡å®šç«¯å£æ—¶ï¼Œå°±æ˜¯åœ¨è®¿é—®å®¹å™¨å†…çš„ç«¯å£äº†ã€‚</li><li>å®¹å™¨å†…ç«¯å£å¾€å¾€æ˜¯ç”±å®¹å™¨å†…çš„è¿›ç¨‹å†³å®šï¼Œä¾‹å¦‚MySQLè¿›ç¨‹é»˜è®¤ç«¯å£æ˜¯3306ï¼Œå› æ­¤å®¹å™¨å†…ç«¯å£ä¸€å®šæ˜¯3306ï¼›è€Œå®¿ä¸»æœºç«¯å£åˆ™å¯ä»¥ä»»æ„æŒ‡å®šï¼Œä¸€èˆ¬ä¸å®¹å™¨å†…ä¿æŒä¸€è‡´ã€‚</li><li>æ ¼å¼ï¼š <code>-p å®¿ä¸»æœºç«¯å£:å®¹å™¨å†…ç«¯å£</code>ï¼Œç¤ºä¾‹ä¸­å°±æ˜¯å°†å®¿ä¸»æœºçš„3306æ˜ å°„åˆ°å®¹å™¨å†…çš„3306ç«¯å£</li></ul></li><li><code>-``e`` TZ=Asia/Shanghai</code> : é…ç½®å®¹å™¨å†…è¿›ç¨‹è¿è¡Œæ—¶çš„ä¸€äº›å‚æ•°<ul><li>æ ¼å¼ï¼š<code>-e KEY=VALUE</code>ï¼ŒKEYå’ŒVALUEéƒ½ç”±å®¹å™¨å†…è¿›ç¨‹å†³å®š</li><li>æ¡ˆä¾‹ä¸­ï¼Œ<code>TZ``=Asia/Shanghai</code>æ˜¯è®¾ç½®æ—¶åŒºï¼›<code>MYSQL_ROOT_PASSWORD=123</code>æ˜¯è®¾ç½®MySQLé»˜è®¤å¯†ç </li></ul></li><li><code>mysql</code> : è®¾ç½®<strong>é•œåƒ</strong>åç§°ï¼ŒDockerä¼šæ ¹æ®è¿™ä¸ªåå­—æœç´¢å¹¶ä¸‹è½½é•œåƒ<ul><li>æ ¼å¼ï¼š<code>REPOSITORY:TAG</code>ï¼Œä¾‹å¦‚<code>mysql:8.0</code>ï¼Œå…¶ä¸­<code>REPOSITORY</code>å¯ä»¥ç†è§£ä¸ºé•œåƒåï¼Œ<code>TAG</code>æ˜¯ç‰ˆæœ¬å·</li><li>åœ¨æœªæŒ‡å®š<code>TAG</code>çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯<code>mysql:latest</code></li></ul></li></ul></div><p>é•œåƒçš„åç§°ä¸æ˜¯éšæ„çš„ï¼Œè€Œæ˜¯è¦åˆ°DockerRegistryä¸­å¯»æ‰¾ï¼Œé•œåƒè¿è¡Œæ—¶çš„é…ç½®ä¹Ÿä¸æ˜¯éšæ„çš„ï¼Œè¦å‚è€ƒé•œåƒçš„å¸®åŠ©æ–‡æ¡£ï¼Œè¿™äº›åœ¨DockerHubç½‘ç«™æˆ–è€…è½¯ä»¶çš„å®˜æ–¹ç½‘ç«™ä¸­éƒ½èƒ½æ‰¾åˆ°ã€‚</p><p>å¦‚æœæˆ‘ä»¬è¦å®‰è£…å…¶å®ƒè½¯ä»¶ï¼Œä¹Ÿå¯ä»¥åˆ°DockerRegistryä¸­å¯»æ‰¾å¯¹åº”çš„é•œåƒåç§°å’Œç‰ˆæœ¬ï¼Œé˜…è¯»ç›¸å…³é…ç½®å³å¯ã€‚</p><h1 id="2-DockeråŸºç¡€"><a href="#2-DockeråŸºç¡€" class="headerlink" title="2.DockeråŸºç¡€"></a>2.DockeråŸºç¡€</h1><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ Dockerä½¿ç”¨çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œä¸ºå°†æ¥éƒ¨ç½²é¡¹ç›®æ‰“ä¸‹åŸºç¡€ã€‚å…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒDockerå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://docs.docker.com/">https://docs.docker.com/</a></p><h2 id="2-1-å¸¸è§å‘½ä»¤"><a href="#2-1-å¸¸è§å‘½ä»¤" class="headerlink" title="2.1.å¸¸è§å‘½ä»¤"></a>2.1.å¸¸è§å‘½ä»¤</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥å­¦ä¹ Dockerä¸­çš„å¸¸è§å‘½ä»¤ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://docs.docker.com/engine/reference/commandline/cli/">https://docs.docker.com/engine/reference/commandline/cli/</a></p><h3 id="2-1-1-å‘½ä»¤ä»‹ç»"><a href="#2-1-1-å‘½ä»¤ä»‹ç»" class="headerlink" title="2.1.1.å‘½ä»¤ä»‹ç»"></a>2.1.1.å‘½ä»¤ä»‹ç»</h3><p>å…¶ä¸­ï¼Œæ¯”è¾ƒå¸¸è§çš„å‘½ä»¤æœ‰ï¼š</p><table><thead><tr><th align="left"><strong>å‘½ä»¤</strong></th><th align="left"><strong>è¯´æ˜</strong></th><th align="left"><strong>æ–‡æ¡£åœ°å€</strong></th></tr></thead><tbody><tr><td align="left">docker pull</td><td align="left">æ‹‰å–é•œåƒ</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/pull/">docker pull</a></td></tr><tr><td align="left">docker push</td><td align="left">æ¨é€é•œåƒåˆ°DockerRegistry</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/push/">docker push</a></td></tr><tr><td align="left">docker images</td><td align="left">æŸ¥çœ‹æœ¬åœ°é•œåƒ</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/images/">docker images</a></td></tr><tr><td align="left">docker rmi</td><td align="left">åˆ é™¤æœ¬åœ°é•œåƒ</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/rmi/">docker rmi</a></td></tr><tr><td align="left">docker run</td><td align="left">åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨ï¼ˆä¸èƒ½é‡å¤åˆ›å»ºï¼‰</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/run/">docker run</a></td></tr><tr><td align="left">docker stop</td><td align="left">åœæ­¢æŒ‡å®šå®¹å™¨</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/stop/">docker stop</a></td></tr><tr><td align="left">docker start</td><td align="left">å¯åŠ¨æŒ‡å®šå®¹å™¨</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/start/">docker start</a></td></tr><tr><td align="left">docker restart</td><td align="left">é‡æ–°å¯åŠ¨å®¹å™¨</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/restart/">docker restart</a></td></tr><tr><td align="left">docker rm</td><td align="left">åˆ é™¤æŒ‡å®šå®¹å™¨</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/rm/">docs.docker.com</a></td></tr><tr><td align="left">docker ps</td><td align="left">æŸ¥çœ‹å®¹å™¨</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/ps/">docker ps</a></td></tr><tr><td align="left">docker logs</td><td align="left">æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¥å¿—</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/logs/">docker logs</a></td></tr><tr><td align="left">docker exec</td><td align="left">è¿›å…¥å®¹å™¨</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/exec/">docker exec</a></td></tr><tr><td align="left">docker save</td><td align="left">ä¿å­˜é•œåƒåˆ°æœ¬åœ°å‹ç¼©æ–‡ä»¶</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/save/">docker save</a></td></tr><tr><td align="left">docker load</td><td align="left">åŠ è½½æœ¬åœ°å‹ç¼©æ–‡ä»¶åˆ°é•œåƒ</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/load/">docker load</a></td></tr><tr><td align="left">docker inspect</td><td align="left">æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/inspect/">docker inspect</a></td></tr></tbody></table><p>ç”¨ä¸€å‰¯å›¾æ¥è¡¨ç¤ºè¿™äº›å‘½ä»¤çš„å…³ç³»ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/36323eb5b52f6f6ea7c2ac56b5525f05645325325.png" alt="image-20240815184138146"></p><p>è¡¥å……ï¼š</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯æ¬¡é‡å¯è™šæ‹Ÿæœºæˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨å¯åŠ¨Dockerå’ŒDockerä¸­çš„å®¹å™¨ã€‚é€šè¿‡å‘½ä»¤å¯ä»¥å®ç°å¼€æœºè‡ªå¯ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Dockerå¼€æœºè‡ªå¯</span></span><br><span class="line">systemctl enable docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># Dockerå®¹å™¨å¼€æœºè‡ªå¯</span></span><br><span class="line">docker update <span class="literal">--restart</span>=always [å®¹å™¨å/å®¹å™¨<span class="type">id</span>]</span><br></pre></td></tr></table></figure><h3 id="2-1-2-æ¼”ç¤º"><a href="#2-1-2-æ¼”ç¤º" class="headerlink" title="2.1.2.æ¼”ç¤º"></a>2.1.2.æ¼”ç¤º</h3><p>æ•™å­¦ç¯èŠ‚è¯´æ˜ï¼šæˆ‘ä»¬ä»¥Nginxä¸ºä¾‹ç»™å¤§å®¶æ¼”ç¤ºä¸Šè¿°å‘½ä»¤ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬1æ­¥ï¼Œå»DockerHubæŸ¥çœ‹nginxé•œåƒä»“åº“åŠç›¸å…³ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬2æ­¥ï¼Œæ‹‰å–Nginxé•œåƒ</span></span><br><span class="line">docker pull nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬3æ­¥ï¼ŒæŸ¥çœ‹é•œåƒ</span></span><br><span class="line">docker images</span><br><span class="line"><span class="comment"># ç»“æœå¦‚ä¸‹ï¼š</span></span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">nginx        latest    <span class="number">605</span>c77e624dd   <span class="number">16</span> months ago   <span class="number">141</span>MB</span><br><span class="line">mysql        latest    <span class="number">3218</span>b38490ce   <span class="number">17</span> months ago   <span class="number">516</span>MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬4æ­¥ï¼Œåˆ›å»ºå¹¶å…è®¸Nginxå®¹å™¨</span></span><br><span class="line">docker run <span class="literal">-d</span> <span class="literal">--name</span> nginx <span class="literal">-p</span> <span class="number">80</span>:<span class="number">80</span> nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬5æ­¥ï¼ŒæŸ¥çœ‹è¿è¡Œä¸­å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">ps</span></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥åŠ æ ¼å¼åŒ–æ–¹å¼è®¿é—®ï¼Œæ ¼å¼ä¼šæ›´åŠ æ¸…çˆ½</span></span><br><span class="line">docker <span class="built_in">ps</span> <span class="literal">--format</span> <span class="string">&quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬6æ­¥ï¼Œè®¿é—®ç½‘é¡µï¼Œåœ°å€ï¼šhttp://è™šæ‹Ÿæœºåœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬7æ­¥ï¼Œåœæ­¢å®¹å™¨</span></span><br><span class="line">docker stop nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬8æ­¥ï¼ŒæŸ¥çœ‹æ‰€æœ‰å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">ps</span> <span class="literal">-a</span> <span class="literal">--format</span> <span class="string">&quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬9æ­¥ï¼Œå†æ¬¡å¯åŠ¨nginxå®¹å™¨</span></span><br><span class="line">docker <span class="built_in">start</span> nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬10æ­¥ï¼Œå†æ¬¡æŸ¥çœ‹å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">ps</span> <span class="literal">--format</span> <span class="string">&quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬11æ­¥ï¼ŒæŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">docker inspect nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬12æ­¥ï¼Œè¿›å…¥å®¹å™¨,æŸ¥çœ‹å®¹å™¨å†…ç›®å½•</span></span><br><span class="line">docker exec <span class="literal">-it</span> nginx bash</span><br><span class="line"><span class="comment"># æˆ–è€…ï¼Œå¯ä»¥è¿›å…¥MySQL</span></span><br><span class="line">docker exec <span class="literal">-it</span> mysql mysql <span class="literal">-uroot</span> <span class="literal">-p</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬13æ­¥ï¼Œåˆ é™¤å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">rm</span> nginx</span><br><span class="line"><span class="comment"># å‘ç°æ— æ³•åˆ é™¤ï¼Œå› ä¸ºå®¹å™¨è¿è¡Œä¸­ï¼Œå¼ºåˆ¶åˆ é™¤å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">rm</span> <span class="operator">-f</span> nginx</span><br></pre></td></tr></table></figure><h3 id="2-1-3-å‘½ä»¤åˆ«å"><a href="#2-1-3-å‘½ä»¤åˆ«å" class="headerlink" title="2.1.3.å‘½ä»¤åˆ«å"></a>2.1.3.å‘½ä»¤åˆ«å</h3><p>ç»™å¸¸ç”¨Dockerå‘½ä»¤èµ·åˆ«åï¼Œæ–¹ä¾¿æˆ‘ä»¬è®¿é—®ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹/root/.bashrcæ–‡ä»¶</span></span><br><span class="line">vi /root/.bashrc</span><br><span class="line">å†…å®¹å¦‚ä¸‹ï¼š</span><br><span class="line"><span class="comment"># .bashrc</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User specific aliases and functions</span></span><br><span class="line"></span><br><span class="line">alias <span class="built_in">rm</span>=<span class="string">&#x27;rm -i&#x27;</span></span><br><span class="line">alias <span class="built_in">cp</span>=<span class="string">&#x27;cp -i&#x27;</span></span><br><span class="line">alias <span class="built_in">mv</span>=<span class="string">&#x27;mv -i&#x27;</span></span><br><span class="line">alias dps=<span class="string">&#x27;docker ps --format &quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;&#x27;</span></span><br><span class="line">alias dis=<span class="string">&#x27;docker images&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Source global definitions</span></span><br><span class="line"><span class="keyword">if</span> [ -<span class="type">f</span> /<span class="type">etc</span>/<span class="type">bashrc</span> ]; then</span><br><span class="line">        . /etc/bashrc</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæ‰§è¡Œå‘½ä»¤ä½¿åˆ«åç”Ÿæ•ˆ</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /root/.bashrc</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œè¯•è¯•çœ‹æ–°çš„å‘½ä»¤å§ã€‚</p><h2 id="2-2-æ•°æ®å·"><a href="#2-2-æ•°æ®å·" class="headerlink" title="2.2.æ•°æ®å·"></a>2.2.æ•°æ®å·</h2><p>å®¹å™¨æ˜¯éš”ç¦»ç¯å¢ƒï¼Œå®¹å™¨å†…ç¨‹åºçš„æ–‡ä»¶ã€é…ç½®ã€è¿è¡Œæ—¶äº§ç”Ÿçš„å®¹å™¨éƒ½åœ¨å®¹å™¨å†…éƒ¨ï¼Œæˆ‘ä»¬è¦è¯»å†™å®¹å™¨å†…çš„æ–‡ä»¶éå¸¸ä¸æ–¹ä¾¿ã€‚å¤§å®¶æ€è€ƒå‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>å¦‚æœè¦å‡çº§MySQLç‰ˆæœ¬ï¼Œéœ€è¦é”€æ¯æ—§å®¹å™¨ï¼Œé‚£ä¹ˆæ•°æ®å²‚ä¸æ˜¯è·Ÿç€è¢«é”€æ¯äº†ï¼Ÿ</li><li>MySQLã€Nginxå®¹å™¨è¿è¡Œåï¼Œå¦‚æœæˆ‘è¦ä¿®æ”¹å…¶ä¸­çš„æŸäº›é…ç½®è¯¥æ€ä¹ˆåŠï¼Ÿ</li><li>æˆ‘æƒ³è¦è®©Nginxä»£ç†æˆ‘çš„é™æ€èµ„æºæ€ä¹ˆåŠï¼Ÿ</li></ul><p>å› æ­¤ï¼Œå®¹å™¨æä¾›ç¨‹åºçš„è¿è¡Œç¯å¢ƒï¼Œä½†æ˜¯<strong>ç¨‹åºè¿è¡Œäº§ç”Ÿçš„æ•°æ®ã€ç¨‹åºè¿è¡Œä¾èµ–çš„é…ç½®éƒ½åº”è¯¥ä¸å®¹å™¨****è§£è€¦</strong>ã€‚</p><h3 id="2-2-1-ä»€ä¹ˆæ˜¯æ•°æ®å·"><a href="#2-2-1-ä»€ä¹ˆæ˜¯æ•°æ®å·" class="headerlink" title="2.2.1.ä»€ä¹ˆæ˜¯æ•°æ®å·"></a>2.2.1.ä»€ä¹ˆæ˜¯æ•°æ®å·</h3><p><strong>æ•°æ®å·ï¼ˆvolumeï¼‰</strong>æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼Œæ˜¯<strong>å®¹å™¨å†…ç›®å½•</strong>ä¸<strong>å®¿ä¸»æœº****ç›®å½•</strong>ä¹‹é—´æ˜ å°„çš„æ¡¥æ¢ã€‚</p><p>ä»¥Nginxä¸ºä¾‹ï¼Œæˆ‘ä»¬çŸ¥é“Nginxä¸­æœ‰ä¸¤ä¸ªå…³é”®çš„ç›®å½•ï¼š</p><ul><li><code>html</code>ï¼šæ”¾ç½®ä¸€äº›é™æ€èµ„æº</li><li><code>conf</code>ï¼šæ”¾ç½®é…ç½®æ–‡ä»¶</li></ul><p>å¦‚æœæˆ‘ä»¬è¦è®©Nginxä»£ç†æˆ‘ä»¬çš„é™æ€èµ„æºï¼Œæœ€å¥½æ˜¯æ”¾åˆ°<code>html</code>ç›®å½•ï¼›å¦‚æœæˆ‘ä»¬è¦ä¿®æ”¹Nginxçš„é…ç½®ï¼Œæœ€å¥½æ˜¯æ‰¾åˆ°<code>conf</code>ä¸‹çš„<code>nginx.conf</code>æ–‡ä»¶ã€‚</p><p>ä½†é—æ†¾çš„æ˜¯ï¼Œå®¹å™¨è¿è¡Œçš„Nginxæ‰€æœ‰çš„æ–‡ä»¶éƒ½åœ¨å®¹å™¨å†…éƒ¨ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»åˆ©ç”¨æ•°æ®å·å°†ä¸¤ä¸ªç›®å½•ä¸å®¿ä¸»æœºç›®å½•å…³è”ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ“ä½œã€‚å¦‚å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/0bda30d3d0072fddf4eff420cc00d3e6645325325.png" alt="image-20240815184236280"></p><p>åœ¨ä¸Šå›¾ä¸­ï¼š</p><ul><li>æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªæ•°æ®å·ï¼š<code>conf</code>ã€<code>html</code></li><li>Nginxå®¹å™¨å†…éƒ¨çš„<code>conf</code>ç›®å½•å’Œ<code>html</code>ç›®å½•åˆ†åˆ«ä¸ä¸¤ä¸ªæ•°æ®å·å…³è”ã€‚</li><li>è€Œæ•°æ®å·confå’Œhtmlåˆ†åˆ«æŒ‡å‘äº†å®¿ä¸»æœºçš„<code>/var/lib/docker/volumes/conf/_data</code>ç›®å½•å’Œ<code>/var/lib/docker/volumes/html/_data</code>ç›®å½•</li></ul><p>è¿™æ ·ä»¥æ¥ï¼Œå®¹å™¨å†…çš„<code>conf</code>å’Œ<code>html</code>ç›®å½•å°± ä¸å®¿ä¸»æœºçš„<code>conf</code>å’Œ<code>html</code>ç›®å½•å…³è”èµ·æ¥ï¼Œæˆ‘ä»¬ç§°ä¸º<strong>æŒ‚è½½</strong>ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬æ“ä½œå®¿ä¸»æœºçš„<code>/var/lib/docker/volumes/html/_data</code>å°±æ˜¯åœ¨æ“ä½œå®¹å™¨å†…çš„<code>/usr/share/nginx/html/_data</code>ç›®å½•ã€‚åªè¦æˆ‘ä»¬å°†é™æ€èµ„æºæ”¾å…¥å®¿ä¸»æœºå¯¹åº”ç›®å½•ï¼Œå°±å¯ä»¥è¢«Nginxä»£ç†äº†ã€‚</p><p><strong>å°æç¤º</strong>ï¼š</p><p><code>/var/lib/docker/volumes</code>è¿™ä¸ªç›®å½•å°±æ˜¯é»˜è®¤çš„å­˜æ”¾æ‰€æœ‰å®¹å™¨æ•°æ®å·çš„ç›®å½•ï¼Œå…¶ä¸‹å†æ ¹æ®æ•°æ®å·åç§°åˆ›å»ºæ–°ç›®å½•ï¼Œæ ¼å¼ä¸º<code>/æ•°æ®å·å/_data</code>ã€‚</p><p><strong>ä¸ºä»€ä¹ˆä¸è®©å®¹å™¨ç›®å½•ç›´æ¥æŒ‡å‘<strong><strong>å®¿ä¸»æœº</strong></strong>ç›®å½•å‘¢</strong>ï¼Ÿ</p><ul><li>å› ä¸ºç›´æ¥æŒ‡å‘å®¿ä¸»æœºç›®å½•å°±ä¸å®¿ä¸»æœºå¼ºè€¦åˆäº†ï¼Œå¦‚æœåˆ‡æ¢äº†ç¯å¢ƒï¼Œå®¿ä¸»æœºç›®å½•å°±å¯èƒ½å‘ç”Ÿæ”¹å˜äº†ã€‚ç”±äºå®¹å™¨ä¸€æ—¦åˆ›å»ºï¼Œç›®å½•æŒ‚è½½å°±æ— æ³•ä¿®æ”¹ï¼Œè¿™æ ·å®¹å™¨å°±æ— æ³•æ­£å¸¸å·¥ä½œäº†ã€‚</li><li>ä½†æ˜¯å®¹å™¨æŒ‡å‘æ•°æ®å·ï¼Œä¸€ä¸ªé€»è¾‘åç§°ï¼Œè€Œæ•°æ®å·å†æŒ‡å‘å®¿ä¸»æœºç›®å½•ï¼Œå°±ä¸å­˜åœ¨å¼ºè€¦åˆã€‚å¦‚æœå®¿ä¸»æœºç›®å½•å‘ç”Ÿæ”¹å˜ï¼Œåªè¦æ”¹å˜æ•°æ®å·ä¸å®¿ä¸»æœºç›®å½•ä¹‹é—´çš„æ˜ å°„å…³ç³»å³å¯ã€‚</li></ul><p>ä¸è¿‡ï¼Œæˆ‘ä»¬é€šè¿‡ç”±äºæ•°æ®å·ç›®å½•æ¯”è¾ƒæ·±ï¼Œä¸å¥½å¯»æ‰¾ï¼Œé€šå¸¸æˆ‘ä»¬ä¹Ÿ<strong>å…è®¸è®©å®¹å™¨ç›´æ¥ä¸<strong><strong>å®¿ä¸»æœº</strong></strong>ç›®å½•æŒ‚è½½è€Œä¸ä½¿ç”¨æ•°æ®å·</strong>ï¼Œå…·ä½“å‚è€ƒ2.2.3å°èŠ‚ã€‚</p><h3 id="2-2-2-æ•°æ®å·å‘½ä»¤"><a href="#2-2-2-æ•°æ®å·å‘½ä»¤" class="headerlink" title="2.2.2.æ•°æ®å·å‘½ä»¤"></a>2.2.2.æ•°æ®å·å‘½ä»¤</h3><p>æ•°æ®å·çš„ç›¸å…³å‘½ä»¤æœ‰ï¼š</p><table><thead><tr><th align="left"><strong>å‘½ä»¤</strong></th><th align="left"><strong>è¯´æ˜</strong></th><th align="left"><strong>æ–‡æ¡£åœ°å€</strong></th></tr></thead><tbody><tr><td align="left">docker volume create</td><td align="left">åˆ›å»ºæ•°æ®å·</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/volume_create/">docker volume create</a></td></tr><tr><td align="left">docker volume ls</td><td align="left">æŸ¥çœ‹æ‰€æœ‰æ•°æ®å·</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/volume_ls/">docs.docker.com</a></td></tr><tr><td align="left">docker volume rm</td><td align="left">åˆ é™¤æŒ‡å®šæ•°æ®å·</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/volume_prune/">docs.docker.com</a></td></tr><tr><td align="left">docker volume inspect</td><td align="left">æŸ¥çœ‹æŸä¸ªæ•°æ®å·çš„è¯¦æƒ…</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/volume_inspect/">docs.docker.com</a></td></tr><tr><td align="left">docker volume prune</td><td align="left">æ¸…é™¤æ•°æ®å·</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/volume_prune/">docker volume prune</a></td></tr></tbody></table><p>æ³¨æ„ï¼šå®¹å™¨ä¸æ•°æ®å·çš„æŒ‚è½½è¦åœ¨åˆ›å»ºå®¹å™¨æ—¶é…ç½®ï¼Œå¯¹äºåˆ›å»ºå¥½çš„å®¹å™¨ï¼Œæ˜¯ä¸èƒ½è®¾ç½®æ•°æ®å·çš„ã€‚è€Œä¸”<strong>åˆ›å»ºå®¹å™¨çš„è¿‡ç¨‹ä¸­ï¼Œæ•°æ®å·ä¼šè‡ªåŠ¨åˆ›å»º</strong>ã€‚</p><p>æ•™å­¦<strong>æ¼”ç¤ºç¯èŠ‚</strong>ï¼šæ¼”ç¤ºä¸€ä¸‹nginxçš„htmlç›®å½•æŒ‚è½½</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.é¦–å…ˆåˆ›å»ºå®¹å™¨å¹¶æŒ‡å®šæ•°æ®å·ï¼Œæ³¨æ„é€šè¿‡ -v å‚æ•°æ¥æŒ‡å®šæ•°æ®å·</span></span><br><span class="line">docker run <span class="literal">-d</span> <span class="literal">--name</span> nginx <span class="literal">-p</span> <span class="number">80</span>:<span class="number">80</span> <span class="literal">-v</span> html:/usr/share/nginx/html nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ç„¶åæŸ¥çœ‹æ•°æ®å·</span></span><br><span class="line">docker volume <span class="built_in">ls</span></span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line">local     <span class="number">29524</span>ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f</span><br><span class="line">local     html</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æŸ¥çœ‹æ•°æ®å·è¯¦æƒ…</span></span><br><span class="line">docker volume inspect html</span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;CreatedAt&quot;</span>: <span class="string">&quot;2024-05-17T19:57:08+08:00&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Driver&quot;</span>: <span class="string">&quot;local&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Labels&quot;</span>: <span class="type">null</span>,</span><br><span class="line">        <span class="string">&quot;Mountpoint&quot;</span>: <span class="string">&quot;/var/lib/docker/volumes/html/_data&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Name&quot;</span>: <span class="string">&quot;html&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Options&quot;</span>: <span class="type">null</span>,</span><br><span class="line">        <span class="string">&quot;Scope&quot;</span>: <span class="string">&quot;local&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æŸ¥çœ‹/var/lib/docker/volumes/html/_dataç›®å½•</span></span><br><span class="line">ll /var/lib/docker/volumes/html/_data</span><br><span class="line"><span class="comment"># å¯ä»¥çœ‹åˆ°ä¸nginxçš„htmlç›®å½•å†…å®¹ä¸€æ ·ï¼Œç»“æœå¦‚ä¸‹ï¼š</span></span><br><span class="line">æ€»ç”¨é‡ <span class="number">8</span></span><br><span class="line"><span class="literal">-rw-r--r--</span>. <span class="number">1</span> root root <span class="number">497</span> <span class="number">12</span>æœˆ <span class="number">28</span> <span class="number">2021</span> <span class="number">50</span>x.html</span><br><span class="line"><span class="literal">-rw-r--r--</span>. <span class="number">1</span> root root <span class="number">615</span> <span class="number">12</span>æœˆ <span class="number">28</span> <span class="number">2021</span> index.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.è¿›å…¥è¯¥ç›®å½•ï¼Œå¹¶éšæ„ä¿®æ”¹index.htmlå†…å®¹</span></span><br><span class="line"><span class="built_in">cd</span> /var/lib/docker/volumes/html/_data</span><br><span class="line">vi index.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.æ‰“å¼€é¡µé¢ï¼ŒæŸ¥çœ‹æ•ˆæœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.è¿›å…¥å®¹å™¨å†…éƒ¨ï¼ŒæŸ¥çœ‹/usr/share/nginx/htmlç›®å½•å†…çš„æ–‡ä»¶æ˜¯å¦å˜åŒ–</span></span><br><span class="line">docker exec <span class="literal">-it</span> nginx bash</span><br></pre></td></tr></table></figure><p>æ•™å­¦<strong>æ¼”ç¤ºç¯èŠ‚</strong>ï¼šæ¼”ç¤ºä¸€ä¸‹MySQLçš„åŒ¿åæ•°æ®å·</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æŸ¥çœ‹MySQLå®¹å™¨è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">docker inspect mysql</span><br><span class="line"><span class="comment"># å…³æ³¨å…¶ä¸­.Config.Volumeséƒ¨åˆ†å’Œ.Mountséƒ¨åˆ†</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…³æ³¨ä¸¤éƒ¨åˆ†å†…å®¹ï¼Œç¬¬ä¸€æ˜¯<code>.Config.Volumes</code>éƒ¨åˆ†ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Config&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ... ç•¥</span></span><br><span class="line">    <span class="attr">&quot;Volumes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;/var/lib/mysql&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="comment">// ... ç•¥</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°è¿™ä¸ªå®¹å™¨å£°æ˜äº†ä¸€ä¸ªæœ¬åœ°ç›®å½•ï¼Œéœ€è¦æŒ‚è½½æ•°æ®å·ï¼Œä½†æ˜¯<strong>æ•°æ®å·æœªå®šä¹‰</strong>ã€‚è¿™å°±æ˜¯åŒ¿åå·ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å†çœ‹ç»“æœä¸­çš„<code>.Mounts</code>éƒ¨åˆ†ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Mounts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;volume&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Source&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/var/lib/docker/volumes/29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f/_data&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Destination&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/var/lib/mysql&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Driver&quot;</span><span class="punctuation">:</span> <span class="string">&quot;local&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°ï¼Œå…¶ä¸­æœ‰å‡ ä¸ªå…³é”®å±æ€§ï¼š</p><ul><li>Nameï¼šæ•°æ®å·åç§°ã€‚ç”±äºå®šä¹‰å®¹å™¨æœªè®¾ç½®å®¹å™¨åï¼Œè¿™é‡Œçš„å°±æ˜¯åŒ¿åå·è‡ªåŠ¨ç”Ÿæˆçš„åå­—ï¼Œä¸€ä¸²hashå€¼ã€‚</li><li>Sourceï¼šå®¿ä¸»æœºç›®å½•</li><li>Destination : å®¹å™¨å†…çš„ç›®å½•</li></ul><p>ä¸Šè¿°é…ç½®æ˜¯å°†å®¹å™¨å†…çš„<code>/var/lib/mysql</code>è¿™ä¸ªç›®å½•ï¼Œä¸æ•°æ®å·<code>29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f</code>æŒ‚è½½ã€‚äºæ˜¯åœ¨å®¿ä¸»æœºä¸­å°±æœ‰äº†<code>/var/lib/docker/volumes/29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f/_data</code>è¿™ä¸ªç›®å½•ã€‚è¿™å°±æ˜¯åŒ¿åæ•°æ®å·å¯¹åº”çš„ç›®å½•ï¼Œå…¶ä½¿ç”¨æ–¹å¼ä¸æ™®é€šæ•°æ®å·æ²¡æœ‰å·®åˆ«ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥ç›®å½•ä¸‹çš„MySQLçš„dataæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l /var/lib/docker/volumes/29524ff09715d3688eae3f99803a2796558dbd00ca584a25a4bbc193ca82459f/_data</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæ¯ä¸€ä¸ªä¸åŒçš„é•œåƒï¼Œå°†æ¥åˆ›å»ºå®¹å™¨åå†…éƒ¨æœ‰å“ªäº›ç›®å½•å¯ä»¥æŒ‚è½½ï¼Œå¯ä»¥å‚è€ƒDockerHubå¯¹åº”çš„é¡µé¢</p><h3 id="2-2-3-æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶"><a href="#2-2-3-æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶" class="headerlink" title="2.2.3.æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶"></a>2.2.3.æŒ‚è½½æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶</h3><p>å¯ä»¥å‘ç°ï¼Œæ•°æ®å·çš„ç›®å½•ç»“æ„è¾ƒæ·±ï¼Œå¦‚æœæˆ‘ä»¬å»æ“ä½œæ•°æ®å·ç›®å½•ä¼šä¸å¤ªæ–¹ä¾¿ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šç›´æ¥å°†å®¹å™¨ç›®å½•ä¸å®¿ä¸»æœºæŒ‡å®šç›®å½•æŒ‚è½½ã€‚æŒ‚è½½è¯­æ³•ä¸æ•°æ®å·ç±»ä¼¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‚è½½æœ¬åœ°ç›®å½•</span></span><br><span class="line">-v æœ¬åœ°ç›®å½•:å®¹å™¨å†…ç›®å½•</span><br><span class="line"><span class="comment"># æŒ‚è½½æœ¬åœ°æ–‡ä»¶</span></span><br><span class="line">-v æœ¬åœ°æ–‡ä»¶:å®¹å™¨å†…æ–‡ä»¶</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šæœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶å¿…é¡»ä»¥ <code>/</code> æˆ– <code>./</code>å¼€å¤´ï¼Œå¦‚æœç›´æ¥ä»¥åå­—å¼€å¤´ï¼Œä¼šè¢«è¯†åˆ«ä¸ºæ•°æ®å·åè€Œéæœ¬åœ°ç›®å½•åã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-v mysql:/var/lib/mysql <span class="comment"># ä¼šè¢«è¯†åˆ«ä¸ºä¸€ä¸ªæ•°æ®å·å«mysqlï¼Œè¿è¡Œæ—¶ä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªæ•°æ®å·</span></span><br><span class="line">-v ./mysql:/var/lib/mysql <span class="comment"># ä¼šè¢«è¯†åˆ«ä¸ºå½“å‰ç›®å½•ä¸‹çš„mysqlç›®å½•ï¼Œè¿è¡Œæ—¶å¦‚æœä¸å­˜åœ¨ä¼šåˆ›å»ºç›®å½•</span></span><br></pre></td></tr></table></figure><p><strong>æ•™å­¦æ¼”ç¤º</strong>ï¼Œåˆ é™¤å¹¶é‡æ–°åˆ›å»ºmysqlå®¹å™¨ï¼Œå¹¶å®Œæˆæœ¬åœ°ç›®å½•æŒ‚è½½ï¼š</p><ul><li>æŒ‚è½½<code>/root/mysql/data</code>åˆ°å®¹å™¨å†…çš„<code>/var/lib/mysql</code>ç›®å½•</li><li>æŒ‚è½½<code>/root/mysql/init</code>åˆ°å®¹å™¨å†…çš„<code>/docker-entrypoint-initdb.d</code>ç›®å½•ï¼ˆåˆå§‹åŒ–çš„SQLè„šæœ¬ç›®å½•ï¼‰</li><li>æŒ‚è½½<code>/root/mysql/conf</code>åˆ°å®¹å™¨å†…çš„<code>/etc/mysql/conf.d</code>ç›®å½•ï¼ˆè¿™ä¸ªæ˜¯MySQLé…ç½®æ–‡ä»¶ç›®å½•ï¼‰</li></ul><p>åœ¨è¯¾å‰èµ„æ–™ä¸­å·²ç»å‡†å¤‡å¥½äº†mysqlçš„<code>init</code>ç›®å½•å’Œ<code>conf</code>ç›®å½•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/69713f9bc4c38c2b3944b2c192ccee9f645325325.png" alt="img"></p><p>ä»¥åŠå¯¹åº”çš„åˆå§‹åŒ–SQLè„šæœ¬å’Œé…ç½®æ–‡ä»¶ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/931bc742734f30260b76d6599cdc4fbf645325325.png" alt="img"></p><p><img src="https://i0.hdslb.com/bfs/article/d4f0f313c8f1a24e590d7dd3598a478d645325325.png" alt="img"></p><p>å…¶ä¸­ï¼Œhm.cnfä¸»è¦æ˜¯é…ç½®äº†MySQLçš„é»˜è®¤ç¼–ç ï¼Œæ”¹ä¸ºutf8mb4ï¼›è€Œhmall.sqlåˆ™æ˜¯åé¢æˆ‘ä»¬è¦ç”¨åˆ°çš„é»‘é©¬å•†åŸé¡¹ç›®çš„åˆå§‹åŒ–SQLè„šæœ¬ã€‚</p><p>æˆ‘ä»¬ç›´æ¥å°†æ•´ä¸ªmysqlç›®å½•ä¸Šä¼ è‡³è™šæ‹Ÿæœºçš„<code>/root</code>ç›®å½•ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/0247b26ef22104b3889977724cbff547645325325.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¼”ç¤ºæœ¬åœ°ç›®å½•æŒ‚è½½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åˆ é™¤åŸæ¥çš„MySQLå®¹å™¨</span></span><br><span class="line">docker <span class="built_in">rm</span> -f mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.è¿›å…¥rootç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.åˆ›å»ºå¹¶è¿è¡Œæ–°mysqlå®¹å™¨ï¼ŒæŒ‚è½½æœ¬åœ°ç›®å½•</span></span><br><span class="line">docker run -d \</span><br><span class="line">  --name mysql \</span><br><span class="line">  -p 3306:3306 \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  -e MYSQL_ROOT_PASSWORD=123 \</span><br><span class="line">  -v ./mysql/data:/var/lib/mysql \</span><br><span class="line">  -v ./mysql/conf:/etc/mysql/conf.d \</span><br><span class="line">  -v ./mysql/init:/docker-entrypoint-initdb.d \</span><br><span class="line">  mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æŸ¥çœ‹rootç›®å½•ï¼Œå¯ä»¥å‘ç°~/mysql/dataç›®å½•å·²ç»è‡ªåŠ¨åˆ›å»ºå¥½äº†</span></span><br><span class="line"><span class="built_in">ls</span> -l mysql</span><br><span class="line"><span class="comment"># ç»“æœï¼š</span></span><br><span class="line">æ€»ç”¨é‡ 4</span><br><span class="line">drwxr-xr-x. 2 root    root   20 5æœˆ  19 15:11 conf</span><br><span class="line">drwxr-xr-x. 7 polkitd root 4096 5æœˆ  19 15:11 data</span><br><span class="line">drwxr-xr-x. 2 root    root   23 5æœˆ  19 15:11 init</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹dataç›®å½•ï¼Œä¼šå‘ç°é‡Œé¢æœ‰å¤§é‡æ•°æ®åº“æ•°æ®ï¼Œè¯´æ˜æ•°æ®åº“å®Œæˆäº†åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">ls</span> -l data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æŸ¥çœ‹MySQLå®¹å™¨å†…æ•°æ®</span></span><br><span class="line"><span class="comment"># 5.1.è¿›å…¥MySQL</span></span><br><span class="line">docker <span class="built_in">exec</span> -it mysql mysql -uroot -p123</span><br><span class="line"><span class="comment"># 5.2.æŸ¥çœ‹ç¼–ç è¡¨</span></span><br><span class="line">show variables like <span class="string">&quot;%char%&quot;</span>;</span><br><span class="line"><span class="comment"># 5.3.ç»“æœï¼Œå‘ç°ç¼–ç æ˜¯utf8mb4æ²¡æœ‰é—®é¢˜</span></span><br><span class="line">+--------------------------+--------------------------------+</span><br><span class="line">| Variable_name            | Value                          |</span><br><span class="line">+--------------------------+--------------------------------+</span><br><span class="line">| character_set_client     | utf8mb4                        |</span><br><span class="line">| character_set_connection | utf8mb4                        |</span><br><span class="line">| character_set_database   | utf8mb4                        |</span><br><span class="line">| character_set_filesystem | binary                         |</span><br><span class="line">| character_set_results    | utf8mb4                        |</span><br><span class="line">| character_set_server     | utf8mb4                        |</span><br><span class="line">| character_set_system     | utf8mb3                        |</span><br><span class="line">| character_sets_dir       | /usr/share/mysql-8.0/charsets/ |</span><br><span class="line">+--------------------------+--------------------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.æŸ¥çœ‹æ•°æ®</span></span><br><span class="line"><span class="comment"># 6.1.æŸ¥çœ‹æ•°æ®åº“</span></span><br><span class="line">show databases;</span><br><span class="line"><span class="comment"># ç»“æœï¼Œhmallæ˜¯é»‘é©¬å•†åŸæ•°æ®åº“</span></span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| hmall              |</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"><span class="comment"># 6.2.åˆ‡æ¢åˆ°hmallæ•°æ®åº“</span></span><br><span class="line">use hmall;</span><br><span class="line"><span class="comment"># 6.3.æŸ¥çœ‹è¡¨</span></span><br><span class="line">show tables;</span><br><span class="line"><span class="comment"># ç»“æœï¼š</span></span><br><span class="line">+-----------------+</span><br><span class="line">| Tables_in_hmall |</span><br><span class="line">+-----------------+</span><br><span class="line">| address         |</span><br><span class="line">| cart            |</span><br><span class="line">| item            |</span><br><span class="line">| order           |</span><br><span class="line">| order_detail    |</span><br><span class="line">| order_logistics |</span><br><span class="line">| pay_order       |</span><br><span class="line">| user            |</span><br><span class="line">+-----------------+</span><br><span class="line"><span class="comment"># 6.4.æŸ¥çœ‹addressè¡¨æ•°æ®</span></span><br><span class="line">+----+---------+----------+--------+----------+-------------+---------------+-----------+------------+-------+</span><br><span class="line">| <span class="built_in">id</span> | user_id | province | city   | town     | mobile      | street        | contact   | is_default | notes |</span><br><span class="line">+----+---------+----------+--------+----------+-------------+---------------+-----------+------------+-------+</span><br><span class="line">| 59 |       1 | åŒ—äº¬     | åŒ—äº¬   | æœé˜³åŒº    | 13900112222 | é‡‘ç‡•é¾™åŠå…¬æ¥¼   | æä½³è¯š    | 0          | NULL  |</span><br><span class="line">| 60 |       1 | åŒ—äº¬     | åŒ—äº¬   | æœé˜³åŒº    | 13700221122 | ä¿®æ­£å¤§å¦       | æä½³çº¢    | 0          | NULL  |</span><br><span class="line">| 61 |       1 | ä¸Šæµ·     | ä¸Šæµ·   | æµ¦ä¸œæ–°åŒº  | 13301212233 | èˆªå¤´é•‡èˆªå¤´è·¯   | æä½³æ˜Ÿ    | 1          | NULL  |</span><br><span class="line">| 63 |       1 | å¹¿ä¸œ     | ä½›å±±   | æ°¸æ˜¥      | 13301212233 | æ°¸æ˜¥æ­¦é¦†       | ææ™“é¾™    | 0          | NULL  |</span><br><span class="line">+----+---------+----------+--------+----------+-------------+---------------+-----------+------------+-------+</span><br><span class="line">4 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h2 id="2-3-é•œåƒ"><a href="#2-3-é•œåƒ" class="headerlink" title="2.3.é•œåƒ"></a>2.3.é•œåƒ</h2><p>å‰é¢æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨åˆ«äººå‡†å¤‡å¥½çš„é•œåƒï¼Œé‚£å¦‚æœæˆ‘è¦éƒ¨ç½²ä¸€ä¸ªJavaé¡¹ç›®ï¼ŒæŠŠå®ƒæ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><h3 id="2-3-1-é•œåƒç»“æ„"><a href="#2-3-1-é•œåƒç»“æ„" class="headerlink" title="2.3.1.é•œåƒç»“æ„"></a>2.3.1.é•œåƒç»“æ„</h3><p>è¦æƒ³è‡ªå·±æ„å»ºé•œåƒï¼Œå¿…é¡»å…ˆäº†è§£é•œåƒçš„ç»“æ„ã€‚</p><p>ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼Œé•œåƒä¹‹æ‰€ä»¥èƒ½è®©æˆ‘ä»¬å¿«é€Ÿè·¨æ“ä½œç³»ç»Ÿéƒ¨ç½²åº”ç”¨è€Œå¿½ç•¥å…¶è¿è¡Œç¯å¢ƒã€é…ç½®ï¼Œå°±æ˜¯å› ä¸ºé•œåƒä¸­åŒ…å«äº†ç¨‹åºè¿è¡Œéœ€è¦çš„ç³»ç»Ÿå‡½æ•°åº“ã€ç¯å¢ƒã€é…ç½®ã€ä¾èµ–ã€‚</p><p>å› æ­¤ï¼Œè‡ªå®šä¹‰é•œåƒæœ¬è´¨å°±æ˜¯ä¾æ¬¡å‡†å¤‡å¥½ç¨‹åºè¿è¡Œçš„åŸºç¡€ç¯å¢ƒã€ä¾èµ–ã€åº”ç”¨æœ¬èº«ã€è¿è¡Œé…ç½®ç­‰æ–‡ä»¶ï¼Œå¹¶ä¸”æ‰“åŒ…è€Œæˆã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è¦ä»0éƒ¨ç½²ä¸€ä¸ªJavaåº”ç”¨ï¼Œå¤§æ¦‚æµç¨‹æ˜¯è¿™æ ·ï¼š</p><ul><li>å‡†å¤‡ä¸€ä¸ªlinuxæœåŠ¡ï¼ˆCentOSæˆ–è€…Ubuntuå‡å¯ï¼‰</li><li>å®‰è£…å¹¶é…ç½®JDK</li><li>ä¸Šä¼ JaråŒ…</li><li>è¿è¡ŒjaråŒ…</li></ul><p>é‚£å› æ­¤ï¼Œæˆ‘ä»¬æ‰“åŒ…é•œåƒä¹Ÿæ˜¯åˆ†æˆè¿™ä¹ˆå‡ æ­¥ï¼š</p><ul><li>å‡†å¤‡Linuxè¿è¡Œç¯å¢ƒï¼ˆjavaé¡¹ç›®å¹¶ä¸éœ€è¦å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œä»…ä»…æ˜¯åŸºç¡€è¿è¡Œç¯å¢ƒå³å¯ï¼‰</li><li>å®‰è£…å¹¶é…ç½®JDK</li><li>æ‹·è´jaråŒ…</li><li>é…ç½®å¯åŠ¨è„šæœ¬</li></ul><p>ä¸Šè¿°æ­¥éª¤ä¸­çš„æ¯ä¸€æ¬¡æ“ä½œå…¶å®éƒ½æ˜¯åœ¨ç”Ÿäº§ä¸€äº›æ–‡ä»¶ï¼ˆç³»ç»Ÿè¿è¡Œç¯å¢ƒã€å‡½æ•°åº“ã€é…ç½®æœ€ç»ˆéƒ½æ˜¯ç£ç›˜æ–‡ä»¶ï¼‰ï¼Œæ‰€ä»¥<strong>é•œåƒå°±æ˜¯ä¸€å †æ–‡ä»¶çš„é›†åˆ</strong>ã€‚</p><p>ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé•œåƒæ–‡ä»¶ä¸æ˜¯éšæ„å †æ”¾çš„ï¼Œè€Œæ˜¯æŒ‰ç…§æ“ä½œçš„æ­¥éª¤åˆ†å±‚å åŠ è€Œæˆï¼Œæ¯ä¸€å±‚å½¢æˆçš„æ–‡ä»¶éƒ½ä¼šå•ç‹¬æ‰“åŒ…å¹¶æ ‡è®°ä¸€ä¸ªå”¯ä¸€idï¼Œç§°ä¸º<strong>Layer</strong>ï¼ˆ<strong>å±‚</strong>ï¼‰ã€‚è¿™æ ·ï¼Œå¦‚æœæˆ‘ä»¬æ„å»ºæ—¶ç”¨åˆ°çš„æŸäº›å±‚å…¶ä»–äººå·²ç»åˆ¶ä½œè¿‡ï¼Œå°±å¯ä»¥ç›´æ¥æ‹·è´ä½¿ç”¨è¿™äº›å±‚ï¼Œè€Œä¸ç”¨é‡å¤åˆ¶ä½œã€‚</p><p>ä¾‹å¦‚ï¼Œç¬¬ä¸€æ­¥ä¸­éœ€è¦çš„Linuxè¿è¡Œç¯å¢ƒï¼Œé€šç”¨æ€§å°±å¾ˆå¼ºï¼Œæ‰€ä»¥Dockerå®˜æ–¹å°±åˆ¶ä½œäº†è¿™æ ·çš„åªåŒ…å«Linuxè¿è¡Œç¯å¢ƒçš„é•œåƒã€‚æˆ‘ä»¬åœ¨åˆ¶ä½œjavaé•œåƒæ—¶ï¼Œå°±æ— éœ€é‡å¤åˆ¶ä½œï¼Œç›´æ¥ä½¿ç”¨Dockerå®˜æ–¹æä¾›çš„CentOSæˆ–Ubuntué•œåƒä½œä¸ºåŸºç¡€é•œåƒã€‚ç„¶åå†æ­å»ºå…¶å®ƒå±‚å³å¯ï¼Œè¿™æ ·é€å±‚æ­å»ºï¼Œæœ€ç»ˆæ•´ä¸ªJavaé¡¹ç›®çš„é•œåƒç»“æ„å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/1714ad2b5e760fa81b2407903b3a56bd645325325.png" alt="img"></p><h3 id="2-3-2-Dockerfile"><a href="#2-3-2-Dockerfile" class="headerlink" title="2.3.2.Dockerfile"></a>2.3.2.Dockerfile</h3><p>ç”±äºåˆ¶ä½œé•œåƒçš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦é€å±‚å¤„ç†å’Œæ‰“åŒ…ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥Dockerå°±æä¾›äº†è‡ªåŠ¨æ‰“åŒ…é•œåƒçš„åŠŸèƒ½ã€‚æˆ‘ä»¬åªéœ€è¦å°†æ‰“åŒ…çš„è¿‡ç¨‹ï¼Œæ¯ä¸€å±‚è¦åšçš„äº‹æƒ…ç”¨å›ºå®šçš„è¯­æ³•å†™ä¸‹æ¥ï¼Œäº¤ç»™Dockerå»æ‰§è¡Œå³å¯ã€‚</p><p>è€Œè¿™ç§è®°å½•é•œåƒç»“æ„çš„æ–‡ä»¶å°±ç§°ä¸º<strong>Dockerfile</strong>ï¼Œå…¶å¯¹åº”çš„è¯­æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a></p><p>å…¶ä¸­çš„è¯­æ³•æ¯”è¾ƒå¤šï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æœ‰ï¼š</p><table><thead><tr><th align="left"><strong>æŒ‡ä»¤</strong></th><th align="left"><strong>è¯´æ˜</strong></th><th align="left"><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td align="left"><strong>FROM</strong></td><td align="left">æŒ‡å®šåŸºç¡€é•œåƒ</td><td align="left"><code>FROM centos:6</code></td></tr><tr><td align="left"><strong>ENV</strong></td><td align="left">è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå¯åœ¨åé¢æŒ‡ä»¤ä½¿ç”¨</td><td align="left"><code>ENV key value</code></td></tr><tr><td align="left"><strong>COPY</strong></td><td align="left">æ‹·è´æœ¬åœ°æ–‡ä»¶åˆ°é•œåƒçš„æŒ‡å®šç›®å½•</td><td align="left"><code>COPY ./xx.jar /tmp/app.jar</code></td></tr><tr><td align="left"><strong>RUN</strong></td><td align="left">æ‰§è¡ŒLinuxçš„shellå‘½ä»¤ï¼Œä¸€èˆ¬æ˜¯å®‰è£…è¿‡ç¨‹çš„å‘½ä»¤</td><td align="left"><code>RUN yum install gcc</code></td></tr><tr><td align="left"><strong>EXPOSE</strong></td><td align="left">æŒ‡å®šå®¹å™¨è¿è¡Œæ—¶ç›‘å¬çš„ç«¯å£ï¼Œæ˜¯ç»™é•œåƒä½¿ç”¨è€…çœ‹çš„</td><td align="left">EXPOSE 8080</td></tr><tr><td align="left"><strong>ENTRYPOINT</strong></td><td align="left">é•œåƒä¸­åº”ç”¨çš„å¯åŠ¨å‘½ä»¤ï¼Œå®¹å™¨è¿è¡Œæ—¶è°ƒç”¨</td><td align="left">ENTRYPOINT java -jar xx.jar</td></tr></tbody></table><p>ä¾‹å¦‚ï¼Œè¦åŸºäºUbuntué•œåƒæ¥æ„å»ºä¸€ä¸ªJavaåº”ç”¨ï¼Œå…¶Dockerfileå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®šåŸºç¡€é•œåƒ</span></span><br><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">16.04</span></span><br><span class="line"><span class="comment"># é…ç½®ç¯å¢ƒå˜é‡ï¼ŒJDKçš„å®‰è£…ç›®å½•ã€å®¹å™¨å†…æ—¶åŒº</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_DIR=/usr/local</span><br><span class="line"><span class="keyword">ENV</span> TZ=Asia/Shanghai</span><br><span class="line"><span class="comment"># æ‹·è´jdkå’Œjavaé¡¹ç›®çš„åŒ…</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./jdk8.tar.gz <span class="variable">$JAVA_DIR</span>/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./docker-demo.jar /tmp/app.jar</span></span><br><span class="line"><span class="comment"># è®¾å®šæ—¶åŒº</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">ln</span> -snf /usr/share/zoneinfo/<span class="variable">$TZ</span> /etc/localtime &amp;&amp; <span class="built_in">echo</span> <span class="variable">$TZ</span> &gt; /etc/timezone</span></span><br><span class="line"><span class="comment"># å®‰è£…JDK</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">cd</span> <span class="variable">$JAVA_DIR</span> \</span></span><br><span class="line"><span class="language-bash"> &amp;&amp; tar -xf ./jdk8.tar.gz \</span></span><br><span class="line"><span class="language-bash"> &amp;&amp; <span class="built_in">mv</span> ./jdk1.8.0_144 ./java8</span></span><br><span class="line"><span class="comment"># é…ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME=$JAVA_DIR/java8</span><br><span class="line"><span class="keyword">ENV</span> PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line"><span class="comment"># æŒ‡å®šé¡¹ç›®ç›‘å¬çš„ç«¯å£</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"><span class="comment"># å…¥å£ï¼Œjavaé¡¹ç›®çš„å¯åŠ¨å‘½ä»¤</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>, <span class="string">&quot;-jar&quot;</span>, <span class="string">&quot;/app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>åŒå­¦ä»¬æ€è€ƒä¸€ä¸‹ï¼šä»¥åæˆ‘ä»¬ä¼šæœ‰å¾ˆå¤šå¾ˆå¤šjavaé¡¹ç›®éœ€è¦æ‰“åŒ…ä¸ºé•œåƒï¼Œä»–ä»¬éƒ½éœ€è¦Linuxç³»ç»Ÿç¯å¢ƒã€JDKç¯å¢ƒè¿™ä¸¤å±‚ï¼Œåªæœ‰ä¸Šé¢çš„3å±‚ä¸åŒï¼ˆå› ä¸ºjaråŒ…ä¸åŒï¼‰ã€‚å¦‚æœæ¯æ¬¡åˆ¶ä½œjavaé•œåƒéƒ½é‡å¤åˆ¶ä½œå‰ä¸¤å±‚é•œåƒï¼Œæ˜¯ä¸æ˜¯å¾ˆéº»çƒ¦ã€‚</p><p>æ‰€ä»¥ï¼Œå°±æœ‰äººæä¾›äº†åŸºç¡€çš„ç³»ç»ŸåŠ JDKç¯å¢ƒï¼Œæˆ‘ä»¬åœ¨æ­¤åŸºç¡€ä¸Šåˆ¶ä½œjavaé•œåƒï¼Œå°±å¯ä»¥çœå»JDKçš„é…ç½®äº†ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºç¡€é•œåƒ</span></span><br><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">11.0</span>-jre-buster</span><br><span class="line"><span class="comment"># è®¾å®šæ—¶åŒº</span></span><br><span class="line"><span class="keyword">ENV</span> TZ=Asia/Shanghai</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">ln</span> -snf /usr/share/zoneinfo/<span class="variable">$TZ</span> /etc/localtime &amp;&amp; <span class="built_in">echo</span> <span class="variable">$TZ</span> &gt; /etc/timezone</span></span><br><span class="line"><span class="comment"># æ‹·è´jaråŒ…</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> docker-demo.jar /app.jar</span></span><br><span class="line"><span class="comment"># å…¥å£</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>, <span class="string">&quot;-jar&quot;</span>, <span class="string">&quot;/app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯ç®€å•å¤šäº†ã€‚</p><h3 id="2-3-3-æ„å»ºé•œåƒ"><a href="#2-3-3-æ„å»ºé•œåƒ" class="headerlink" title="2.3.3.æ„å»ºé•œåƒ"></a>2.3.3.æ„å»ºé•œåƒ</h3><p>å½“Dockerfileæ–‡ä»¶å†™å¥½ä»¥åï¼Œå°±å¯ä»¥åˆ©ç”¨å‘½ä»¤æ¥æ„å»ºé•œåƒäº†ã€‚</p><p>åœ¨è¯¾å‰èµ„æ–™ä¸­ï¼Œæˆ‘ä»¬å‡†å¤‡å¥½äº†ä¸€ä¸ªdemoé¡¹ç›®åŠå¯¹åº”çš„Dockerfileï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/340547d80e3ad12520e50f6d300e710c645325325.png" alt="img"></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†è¯¾å‰èµ„æ–™æä¾›çš„<code>docker-demo.jar</code>åŒ…ä»¥åŠ<code>Dockerfile</code>æ‹·è´åˆ°è™šæ‹Ÿæœºçš„<code>/root/demo</code>ç›®å½•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e4b279f2def1b5716fcaa9546c01b844645325325.png" alt="img"></p><p>ç„¶åï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œæ„å»ºé•œåƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥é•œåƒç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> /root/demo</span><br><span class="line"><span class="comment"># å¼€å§‹æ„å»º</span></span><br><span class="line">docker build -t docker-demo:1.0 .</span><br></pre></td></tr></table></figure><p>å‘½ä»¤è¯´æ˜ï¼š</p><ul><li><p><code>docker build </code>: å°±æ˜¯æ„å»ºä¸€ä¸ªdockeré•œåƒ</p></li><li><p><code>-t docker-demo:1.0</code> ï¼š<code>-t</code>å‚æ•°æ˜¯æŒ‡å®šé•œåƒçš„åç§°ï¼ˆ<code>repository</code>å’Œ<code>tag</code>ï¼‰</p></li><li><p><code>.</code> : æœ€åçš„ç‚¹æ˜¯æŒ‡æ„å»ºæ—¶Dockerfileæ‰€åœ¨è·¯å¾„ï¼Œç”±äºæˆ‘ä»¬è¿›å…¥äº†demoç›®å½•ï¼Œæ‰€ä»¥æŒ‡å®šçš„æ˜¯<code>.</code>ä»£è¡¨å½“å‰ç›®å½•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥<code>æŒ‡å®šDockerfileç›®å½•</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment"># ç›´æ¥æŒ‡å®šDockerfileç›®å½•</span></span><br><span class="line">  docker build -t docker-demo:1.0 /root/demo</span><br><span class="line"></span><br><span class="line">ç»“æœï¼š</span><br><span class="line"></span><br><span class="line">![img](https://i0.hdslb.com/bfs/article/95e8e280adadcc6721533da831610219645325325.png)</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹é•œåƒåˆ—è¡¨ï¼š</span><br><span class="line"></span><br><span class="line">```Bash</span><br><span class="line"><span class="comment"># æŸ¥çœ‹é•œåƒåˆ—è¡¨ï¼š</span></span><br><span class="line">docker images</span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">docker-demo   1.0       d6ab0b9e64b9   27 minutes ago   327MB</span><br><span class="line">nginx         latest    605c77e624dd   16 months ago    141MB</span><br><span class="line">mysql         latest    3218b38490ce   17 months ago    516MB</span><br></pre></td></tr></table></figure></li></ul><p>ç„¶åå°è¯•è¿è¡Œè¯¥é•œåƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨</span></span><br><span class="line">docker run -d --name <span class="built_in">dd</span> -p 8080:8080 docker-demo:1.0</span><br><span class="line"><span class="comment"># 2.æŸ¥çœ‹å®¹å™¨</span></span><br><span class="line">dps</span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">CONTAINER ID   IMAGE             PORTS                                                  STATUS         NAMES</span><br><span class="line">78a000447b49   docker-demo:1.0   0.0.0.0:8080-&gt;8080/tcp, :::8090-&gt;8090/tcp              Up 2 seconds   <span class="built_in">dd</span></span><br><span class="line">f63cfead8502   mysql             0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp   Up 2 hours     mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.è®¿é—®</span></span><br><span class="line">curl localhost:8080/hello/count</span><br><span class="line"><span class="comment"># ç»“æœï¼š</span></span><br><span class="line">&lt;h5&gt;æ¬¢è¿è®¿é—®é»‘é©¬å•†åŸ, è¿™æ˜¯æ‚¨ç¬¬1æ¬¡è®¿é—®&lt;h5&gt;</span><br></pre></td></tr></table></figure><h2 id="2-4-ç½‘ç»œ"><a href="#2-4-ç½‘ç»œ" class="headerlink" title="2.4.ç½‘ç»œ"></a>2.4.ç½‘ç»œ</h2><p>ä¸ŠèŠ‚è¯¾æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªJavaé¡¹ç›®çš„å®¹å™¨ï¼Œè€ŒJavaé¡¹ç›®å¾€å¾€éœ€è¦è®¿é—®å…¶å®ƒå„ç§ä¸­é—´ä»¶ï¼Œä¾‹å¦‚MySQLã€Redisç­‰ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬çš„å®¹å™¨ä¹‹é—´èƒ½å¦äº’ç›¸è®¿é—®å‘¢ï¼Ÿæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸‹MySQLå®¹å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œé‡ç‚¹å…³æ³¨å…¶ä¸­çš„ç½‘ç»œIPåœ°å€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ç”¨åŸºæœ¬å‘½ä»¤ï¼Œå¯»æ‰¾Networks.bridge.IPAddresså±æ€§</span></span><br><span class="line">docker inspect mysql</span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨formatè¿‡æ»¤ç»“æœ</span></span><br><span class="line">docker inspect --format=<span class="string">&#x27;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;println .IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;&#x27;</span> mysql</span><br><span class="line"><span class="comment"># å¾—åˆ°IPåœ°å€å¦‚ä¸‹ï¼š</span></span><br><span class="line">172.17.0.2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ç„¶åé€šè¿‡å‘½ä»¤è¿›å…¥ddå®¹å™¨</span></span><br><span class="line">docker <span class="built_in">exec</span> -it <span class="built_in">dd</span> bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.åœ¨å®¹å™¨å†…ï¼Œé€šè¿‡pingå‘½ä»¤æµ‹è¯•ç½‘ç»œ</span></span><br><span class="line">ping 172.17.0.2</span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">PING 172.17.0.2 (172.17.0.2) 56(84) bytes of data.</span><br><span class="line">64 bytes from 172.17.0.2: icmp_seq=1 ttl=64 time=0.053 ms</span><br><span class="line">64 bytes from 172.17.0.2: icmp_seq=2 ttl=64 time=0.059 ms</span><br><span class="line">64 bytes from 172.17.0.2: icmp_seq=3 ttl=64 time=0.058 ms</span><br></pre></td></tr></table></figure><p>å‘ç°å¯ä»¥äº’è”ï¼Œæ²¡æœ‰é—®é¢˜ã€‚</p><p>ä½†æ˜¯ï¼Œå®¹å™¨çš„ç½‘ç»œIPå…¶å®æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„IPï¼Œå…¶å€¼å¹¶ä¸å›ºå®šä¸æŸä¸€ä¸ªå®¹å™¨ç»‘å®šï¼Œå¦‚æœæˆ‘ä»¬åœ¨å¼€å‘æ—¶å†™æ­»æŸä¸ªIPï¼Œè€Œåœ¨éƒ¨ç½²æ—¶å¾ˆå¯èƒ½MySQLå®¹å™¨çš„IPä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿æ¥ä¼šå¤±è´¥ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»å€ŸåŠ©äºdockerçš„ç½‘ç»œåŠŸèƒ½æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://docs.docker.com/engine/reference/commandline/network/">https://docs.docker.com/engine/reference/commandline/network/</a></p><p>å¸¸è§å‘½ä»¤æœ‰ï¼š</p><table><thead><tr><th align="left"><strong>å‘½ä»¤</strong></th><th align="left"><strong>è¯´æ˜</strong></th><th align="left"><strong>æ–‡æ¡£åœ°å€</strong></th></tr></thead><tbody><tr><td align="left">docker network create</td><td align="left">åˆ›å»ºä¸€ä¸ªç½‘ç»œ</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/network_create/">docker network create</a></td></tr><tr><td align="left">docker network ls</td><td align="left">æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œ</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/network_ls/">docs.docker.com</a></td></tr><tr><td align="left">docker network rm</td><td align="left">åˆ é™¤æŒ‡å®šç½‘ç»œ</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/network_rm/">docs.docker.com</a></td></tr><tr><td align="left">docker network prune</td><td align="left">æ¸…é™¤æœªä½¿ç”¨çš„ç½‘ç»œ</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/network_prune/">docs.docker.com</a></td></tr><tr><td align="left">docker network connect</td><td align="left">ä½¿æŒ‡å®šå®¹å™¨è¿æ¥åŠ å…¥æŸç½‘ç»œ</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/network_connect/">docs.docker.com</a></td></tr><tr><td align="left">docker network disconnect</td><td align="left">ä½¿æŒ‡å®šå®¹å™¨è¿æ¥ç¦»å¼€æŸç½‘ç»œ</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/network_disconnect/">docker network disconnect</a></td></tr><tr><td align="left">docker network inspect</td><td align="left">æŸ¥çœ‹ç½‘ç»œè¯¦ç»†ä¿¡æ¯</td><td align="left"><a href="https://docs.docker.com/engine/reference/commandline/network_inspect/">docker network inspect</a></td></tr></tbody></table><p>æ•™å­¦æ¼”ç¤ºï¼šè‡ªå®šä¹‰ç½‘ç»œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.é¦–å…ˆé€šè¿‡å‘½ä»¤åˆ›å»ºä¸€ä¸ªç½‘ç»œ</span></span><br><span class="line">docker network create hmall</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ç„¶åæŸ¥çœ‹ç½‘ç»œ</span></span><br><span class="line">docker network <span class="built_in">ls</span></span><br><span class="line"><span class="comment"># ç»“æœï¼š</span></span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">639bc44d0a87   bridge    bridge    <span class="built_in">local</span></span><br><span class="line">403f16ec62a2   hmall     bridge    <span class="built_in">local</span></span><br><span class="line">0dc0f72a0fbb   host      host      <span class="built_in">local</span></span><br><span class="line">cd8d3e8df47b   none      null      <span class="built_in">local</span></span><br><span class="line"><span class="comment"># å…¶ä¸­ï¼Œé™¤äº†hmallä»¥å¤–ï¼Œå…¶å®ƒéƒ½æ˜¯é»˜è®¤çš„ç½‘ç»œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.è®©ddå’Œmysqléƒ½åŠ å…¥è¯¥ç½‘ç»œï¼Œæ³¨æ„ï¼Œåœ¨åŠ å…¥ç½‘ç»œæ—¶å¯ä»¥é€šè¿‡--aliasç»™å®¹å™¨èµ·åˆ«å</span></span><br><span class="line"><span class="comment"># è¿™æ ·è¯¥ç½‘ç»œå†…çš„å…¶å®ƒå®¹å™¨å¯ä»¥ç”¨åˆ«åäº’ç›¸è®¿é—®ï¼</span></span><br><span class="line"><span class="comment"># 3.1.mysqlå®¹å™¨ï¼ŒæŒ‡å®šåˆ«åä¸ºdbï¼Œå¦å¤–æ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰ä¸€ä¸ªåˆ«åæ˜¯å®¹å™¨å</span></span><br><span class="line">docker network connect hmall mysql --<span class="built_in">alias</span> db</span><br><span class="line"><span class="comment"># 3.2.dbå®¹å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„javaé¡¹ç›®</span></span><br><span class="line">docker network connect hmall <span class="built_in">dd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.è¿›å…¥ddå®¹å™¨ï¼Œå°è¯•åˆ©ç”¨åˆ«åè®¿é—®db</span></span><br><span class="line"><span class="comment"># 4.1.è¿›å…¥å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">exec</span> -it <span class="built_in">dd</span> bash</span><br><span class="line"><span class="comment"># 4.2.ç”¨dbåˆ«åè®¿é—®</span></span><br><span class="line">ping db</span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">PING db (172.18.0.2) 56(84) bytes of data.</span><br><span class="line">64 bytes from mysql.hmall (172.18.0.2): icmp_seq=1 ttl=64 time=0.070 ms</span><br><span class="line">64 bytes from mysql.hmall (172.18.0.2): icmp_seq=2 ttl=64 time=0.056 ms</span><br><span class="line"><span class="comment"># 4.3.ç”¨å®¹å™¨åè®¿é—®</span></span><br><span class="line">ping mysql</span><br><span class="line"><span class="comment"># ç»“æœï¼š</span></span><br><span class="line">PING mysql (172.18.0.2) 56(84) bytes of data.</span><br><span class="line">64 bytes from mysql.hmall (172.18.0.2): icmp_seq=1 ttl=64 time=0.044 ms</span><br><span class="line">64 bytes from mysql.hmall (172.18.0.2): icmp_seq=2 ttl=64 time=0.054 ms</span><br></pre></td></tr></table></figure><p>OKï¼Œç°åœ¨æ— éœ€è®°ä½IPåœ°å€ä¹Ÿå¯ä»¥å®ç°å®¹å™¨äº’è”äº†ã€‚</p><p><strong>æ€»ç»“</strong>ï¼š</p><ul><li>åœ¨è‡ªå®šä¹‰ç½‘ç»œä¸­ï¼Œå¯ä»¥ç»™å®¹å™¨èµ·å¤šä¸ªåˆ«åï¼Œé»˜è®¤çš„åˆ«åæ˜¯å®¹å™¨åæœ¬èº«</li><li>åœ¨åŒä¸€ä¸ªè‡ªå®šä¹‰ç½‘ç»œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡åˆ«åäº’ç›¸è®¿é—®</li></ul><h1 id="3-é¡¹ç›®éƒ¨ç½²"><a href="#3-é¡¹ç›®éƒ¨ç½²" class="headerlink" title="3.é¡¹ç›®éƒ¨ç½²"></a>3.é¡¹ç›®éƒ¨ç½²</h1><p>å¥½äº†ï¼Œæˆ‘ä»¬å·²ç»ç†Ÿæ‚‰äº†Dockerçš„åŸºæœ¬ç”¨æ³•ï¼Œæ¥ä¸‹æ¥å¯ä»¥å°è¯•éƒ¨ç½²é¡¹ç›®äº†ã€‚</p><p>åœ¨è¯¾å‰èµ„æ–™ä¸­å·²ç»æä¾›äº†ä¸€ä¸ªé»‘é©¬å•†åŸé¡¹ç›®ç»™å¤§å®¶ï¼Œå¦‚å›¾ï¼š</p><p>é¡¹ç›®è¯´æ˜ï¼š</p><ul><li>hmallï¼šå•†åŸçš„åç«¯ä»£ç </li><li>hmall-portalï¼šå•†åŸç”¨æˆ·ç«¯çš„å‰ç«¯ä»£ç </li><li>hmall-adminï¼šå•†åŸç®¡ç†ç«¯çš„å‰ç«¯ä»£ç </li></ul><p>éƒ¨ç½²çš„å®¹å™¨åŠç«¯å£è¯´æ˜ï¼š</p><table><thead><tr><th align="left"><strong>é¡¹ç›®</strong></th><th align="left"><strong>å®¹å™¨å</strong></th><th align="left"><strong>ç«¯å£</strong></th><th align="left"><strong>å¤‡æ³¨</strong></th></tr></thead><tbody><tr><td align="left">hmall</td><td align="left">hmall</td><td align="left">8080</td><td align="left">é»‘é©¬å•†åŸåç«¯APIå…¥å£</td></tr><tr><td align="left">hmall-portal</td><td align="left">nginx</td><td align="left">18080</td><td align="left">é»‘é©¬å•†åŸç”¨æˆ·ç«¯å…¥å£</td></tr><tr><td align="left">hmall-admin</td><td align="left">18081</td><td align="left">é»‘é©¬å•†åŸç®¡ç†ç«¯å…¥å£</td><td align="left"></td></tr><tr><td align="left">mysql</td><td align="left">mysql</td><td align="left">3306</td><td align="left">æ•°æ®åº“</td></tr></tbody></table><p>åœ¨æ­£å¼éƒ¨ç½²å‰ï¼Œæˆ‘ä»¬å…ˆåˆ é™¤ä¹‹å‰çš„nginxã€ddä¸¤ä¸ªå®¹å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> -f nginx <span class="built_in">dd</span></span><br></pre></td></tr></table></figure><p>mysqlå®¹å™¨ä¸­å·²ç»å‡†å¤‡å¥½äº†å•†åŸçš„æ•°æ®ï¼Œæ‰€ä»¥å°±ä¸å†åˆ é™¤äº†ã€‚</p><h2 id="3-1-éƒ¨ç½²Javaé¡¹ç›®"><a href="#3-1-éƒ¨ç½²Javaé¡¹ç›®" class="headerlink" title="3.1.éƒ¨ç½²Javaé¡¹ç›®"></a>3.1.éƒ¨ç½²Javaé¡¹ç›®</h2><p><code>hmall</code>é¡¹ç›®æ˜¯ä¸€ä¸ªmavenèšåˆé¡¹ç›®ï¼Œä½¿ç”¨IDEAæ‰“å¼€<code>hmall</code>é¡¹ç›®ï¼ŒæŸ¥çœ‹é¡¹ç›®ç»“æ„å¦‚å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/57df5ad4e2f3802d1791227f0bf02e81645325325.png" alt="img"></p><p>æˆ‘ä»¬è¦éƒ¨ç½²çš„å°±æ˜¯å…¶ä¸­çš„<code>hm-service</code>ï¼Œå…¶ä¸­çš„é…ç½®æ–‡ä»¶é‡‡ç”¨äº†å¤šç¯å¢ƒçš„æ–¹å¼ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e1384cf237e137cd6db7c6228dbf9c16645325325.png" alt="img"></p><p>å…¶ä¸­çš„<code>application-dev.yaml</code>æ˜¯éƒ¨ç½²åˆ°å¼€å‘ç¯å¢ƒçš„é…ç½®ï¼Œ<code>application-local.yaml</code>æ˜¯æœ¬åœ°è¿è¡Œæ—¶çš„é…ç½®ã€‚</p><p>æŸ¥çœ‹application.yamlï¼Œä½ ä¼šå‘ç°å…¶ä¸­çš„JDBCåœ°å€å¹¶æœªå†™æ­»ï¼Œè€Œæ˜¯è¯»å–å˜é‡ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/79f016ab015522b045a9e56ebabf1bb6645325325.png" alt="img"></p><p>è¿™ä¸¤ä¸ªå˜é‡åœ¨<code>application-dev.yaml</code>å’Œ<code>application-local.yaml</code>ä¸­å¹¶ä¸ç›¸åŒï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/d2583b6e4a043ee5fce902890043e84b645325325.png" alt="img"></p><p>åœ¨devå¼€å‘ç¯å¢ƒï¼ˆä¹Ÿå°±æ˜¯Dockeréƒ¨ç½²æ—¶ï¼‰é‡‡ç”¨äº†mysqlä½œä¸ºåœ°å€ï¼Œåˆšå¥½æ˜¯æˆ‘ä»¬çš„mysqlå®¹å™¨åï¼Œåªè¦ä¸¤è€…åœ¨ä¸€ä¸ªç½‘ç»œï¼Œå°±ä¸€å®šèƒ½äº’ç›¸è®¿é—®ã€‚</p><p>æˆ‘ä»¬å°†é¡¹ç›®æ‰“åŒ…ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/5ffdfc84dc1673a826a0a2c1074a33e3645325325.png" alt="img"></p><p>ç»“æœï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/4932ec87eddd453fdd468eaacc04ae42645325325.png" alt="img"></p><p>å°†<code>hm-service</code>ç›®å½•ä¸‹çš„<code>Dockerfile</code>å’Œ<code>hm-service/target</code>ç›®å½•ä¸‹çš„<code>hm-service.jar</code>ä¸€èµ·ä¸Šä¼ åˆ°è™šæ‹Ÿæœºçš„<code>root</code>ç›®å½•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/c8b495ce1034c6ce3e1e2e1c228ce518645325325.png" alt="img"></p><p>éƒ¨ç½²é¡¹ç›®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æ„å»ºé¡¹ç›®é•œåƒï¼Œä¸æŒ‡å®štagï¼Œåˆ™é»˜è®¤ä¸ºlatest</span></span><br><span class="line">docker build -t hmall .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æŸ¥çœ‹é•œåƒ</span></span><br><span class="line">docker images</span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">hmall         latest    0bb07b2c34b9   43 seconds ago   362MB</span><br><span class="line">docker-demo   1.0       49743484da68   24 hours ago     327MB</span><br><span class="line">nginx         latest    605c77e624dd   16 months ago    141MB</span><br><span class="line">mysql         latest    3218b38490ce   17 months ago    516MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨ï¼Œå¹¶é€šè¿‡--networkå°†å…¶åŠ å…¥hmallç½‘ç»œï¼Œè¿™æ ·æ‰èƒ½é€šè¿‡å®¹å™¨åè®¿é—®mysql</span></span><br><span class="line">docker run -d --name hmall --network hmall -p 8080:8080 hmall</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼Œé€šè¿‡æµè§ˆå™¨è®¿é—®ï¼šhttp:&#x2F;&#x2F;ä½ çš„è™šæ‹Ÿæœºåœ°å€:8080&#x2F;search&#x2F;list</p><h2 id="3-2-éƒ¨ç½²å‰ç«¯"><a href="#3-2-éƒ¨ç½²å‰ç«¯" class="headerlink" title="3.2.éƒ¨ç½²å‰ç«¯"></a>3.2.éƒ¨ç½²å‰ç«¯</h2><p><code>hmall-portal</code>å’Œ<code>hmall-admin</code>æ˜¯å‰ç«¯ä»£ç ï¼Œéœ€è¦åŸºäºnginxéƒ¨ç½²ã€‚åœ¨è¯¾å‰èµ„æ–™ä¸­å·²ç»ç»™å¤§å®¶æä¾›äº†nginxçš„éƒ¨ç½²ç›®å½•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/4c0e95846cc679e855c3e31ab773b662645325325.png" alt="img"></p><p>å…¶ä¸­ï¼š</p><ul><li><code>html</code>æ˜¯é™æ€èµ„æºç›®å½•ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ<code>hmall-portal</code>ä»¥åŠ<code>hmall-admin</code>éƒ½å¤åˆ¶è¿›å»</li><li><code>nginx.conf</code>æ˜¯nginxçš„é…ç½®æ–‡ä»¶ï¼Œä¸»è¦æ˜¯å®Œæˆå¯¹<code>html</code>ä¸‹çš„ä¸¤ä¸ªé™æ€èµ„æºç›®å½•åšä»£ç†</li></ul><p>æˆ‘ä»¬ç°åœ¨è¦åšçš„å°±æ˜¯æŠŠæ•´ä¸ªnginxç›®å½•ä¸Šä¼ åˆ°è™šæ‹Ÿæœºçš„<code>/root</code>ç›®å½•ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/ae0a0e7d419ca1cd07e8c615f09e0199645325325.png" alt="img"></p><p>ç„¶ååˆ›å»ºnginxå®¹å™¨å¹¶å®Œæˆä¸¤ä¸ªæŒ‚è½½ï¼š</p><ul><li>æŠŠ<code>/root/nginx/nginx.conf</code>æŒ‚è½½åˆ°<code>/etc/nginx/nginx.conf</code></li><li>æŠŠ<code>/root/nginx/html</code>æŒ‚è½½åˆ°<code>/usr/share/nginx/html</code></li></ul><p>ç”±äºéœ€è¦è®©nginxåŒæ—¶ä»£ç†hmall-portalå’Œhmall-adminä¸¤å¥—å‰ç«¯èµ„æºï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æš´éœ²ä¸¤ä¸ªç«¯å£ï¼š</p><ul><li>18080ï¼šå¯¹åº”hmall-portal</li><li>18081ï¼šå¯¹åº”hmall-admin</li></ul><p>å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name nginx \</span><br><span class="line">  -p 18080:18080 \</span><br><span class="line">  -p 18081:18081 \</span><br><span class="line">  -v /root/nginx/html:/usr/share/nginx/html \</span><br><span class="line">  -v /root/nginx/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">  --network hmall \</span><br><span class="line">  nginx</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼Œé€šè¿‡æµè§ˆå™¨è®¿é—®ï¼šhttp:&#x2F;&#x2F;ä½ çš„è™šæ‹Ÿæœºip:18080</p><p><img src="https://i0.hdslb.com/bfs/article/65a25367961ad775cd893a1873c8ba3f645325325.png" alt="img"></p><h2 id="3-3-DockerCompose"><a href="#3-3-DockerCompose" class="headerlink" title="3.3.DockerCompose"></a>3.3.DockerCompose</h2><p>å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬éƒ¨ç½²ä¸€ä¸ªç®€å•çš„javaé¡¹ç›®ï¼Œå…¶ä¸­åŒ…å«3ä¸ªå®¹å™¨ï¼š</p><ul><li>MySQL</li><li>Nginx</li><li>Javaé¡¹ç›®</li></ul><p>è€Œç¨å¾®å¤æ‚çš„é¡¹ç›®ï¼Œå…¶ä¸­è¿˜ä¼šæœ‰å„ç§å„æ ·çš„å…¶å®ƒä¸­é—´ä»¶ï¼Œéœ€è¦éƒ¨ç½²çš„ä¸œè¥¿è¿œä¸æ­¢3ä¸ªã€‚å¦‚æœè¿˜åƒä¹‹å‰é‚£æ ·æ‰‹åŠ¨çš„é€ä¸€éƒ¨ç½²ï¼Œå°±å¤ªéº»çƒ¦äº†ã€‚</p><p>è€ŒDocker Composeå°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°<strong>å¤šä¸ªç›¸äº’å…³è”çš„Dockerå®¹å™¨çš„å¿«é€Ÿéƒ¨ç½²</strong>ã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ docker-compose.yml æ¨¡æ¿æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ã€‚</p><h3 id="3-3-1-åŸºæœ¬è¯­æ³•"><a href="#3-3-1-åŸºæœ¬è¯­æ³•" class="headerlink" title="3.3.1.åŸºæœ¬è¯­æ³•"></a>3.3.1.åŸºæœ¬è¯­æ³•</h3><p>docker-compose.ymlæ–‡ä»¶çš„åŸºæœ¬è¯­æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://docs.docker.com/compose/compose-file/compose-file-v3/">https://docs.docker.com/compose/compose-file/compose-file-v3/</a></p><p>docker-composeæ–‡ä»¶ä¸­å¯ä»¥å®šä¹‰å¤šä¸ªç›¸äº’å…³è”çš„åº”ç”¨å®¹å™¨ï¼Œæ¯ä¸€ä¸ªåº”ç”¨å®¹å™¨è¢«ç§°ä¸ºä¸€ä¸ªæœåŠ¡ï¼ˆserviceï¼‰ã€‚ç”±äºserviceå°±æ˜¯åœ¨å®šä¹‰æŸä¸ªåº”ç”¨çš„è¿è¡Œæ—¶å‚æ•°ï¼Œå› æ­¤ä¸<code>docker run</code>å‚æ•°éå¸¸ç›¸ä¼¼ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œç”¨docker runéƒ¨ç½²MySQLçš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name mysql \</span><br><span class="line">  -p 3306:3306 \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  -e MYSQL_ROOT_PASSWORD=123 \</span><br><span class="line">  -v ./mysql/data:/var/lib/mysql \</span><br><span class="line">  -v ./mysql/conf:/etc/mysql/conf.d \</span><br><span class="line">  -v ./mysql/init:/docker-entrypoint-initdb.d \</span><br><span class="line">  --network hmall</span><br><span class="line">  mysql</span><br></pre></td></tr></table></figure><p>å¦‚æœç”¨<code>docker-compose.yml</code>æ–‡ä»¶æ¥å®šä¹‰ï¼Œå°±æ˜¯è¿™æ ·ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="number">123</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./mysql/conf:/etc/mysql/conf.d&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./mysql/data:/var/lib/mysql&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">new</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">new:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">hmall</span></span><br></pre></td></tr></table></figure><p>å¯¹æ¯”å¦‚ä¸‹ï¼š</p><table><thead><tr><th align="left"><strong>docker run å‚æ•°</strong></th><th align="left"><strong>docker compose æŒ‡ä»¤</strong></th><th align="left"><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td align="left">â€“name</td><td align="left">container_name</td><td align="left">å®¹å™¨åç§°</td></tr><tr><td align="left">-p</td><td align="left">ports</td><td align="left">ç«¯å£æ˜ å°„</td></tr><tr><td align="left">-e</td><td align="left">environment</td><td align="left">ç¯å¢ƒå˜é‡</td></tr><tr><td align="left">-v</td><td align="left">volumes</td><td align="left">æ•°æ®å·é…ç½®</td></tr><tr><td align="left">â€“network</td><td align="left">networks</td><td align="left">ç½‘ç»œ</td></tr></tbody></table><p>æ˜ç™½äº†å…¶ä¸­çš„å¯¹åº”å…³ç³»ï¼Œç›¸ä¿¡ç¼–å†™<code>docker-compose</code>æ–‡ä»¶åº”è¯¥éš¾ä¸å€’å¤§å®¶ã€‚</p><p>é»‘é©¬å•†åŸéƒ¨ç½²æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="number">123</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./mysql/conf:/etc/mysql/conf.d&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./mysql/data:/var/lib/mysql&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./mysql/init:/docker-entrypoint-initdb.d&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hm-net</span></span><br><span class="line">  <span class="attr">hmall:</span></span><br><span class="line">    <span class="attr">build:</span> </span><br><span class="line">      <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">hmall</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8080:8080&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hm-net</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mysql</span></span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;18080:18080&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;18081:18081&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./nginx/nginx.conf:/etc/nginx/nginx.conf&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./nginx/html:/usr/share/nginx/html&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hmall</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hm-net</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">hm-net:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">hmall</span></span><br></pre></td></tr></table></figure><h3 id="3-3-2-åŸºç¡€å‘½ä»¤"><a href="#3-3-2-åŸºç¡€å‘½ä»¤" class="headerlink" title="3.3.2.åŸºç¡€å‘½ä»¤"></a>3.3.2.åŸºç¡€å‘½ä»¤</h3><p>ç¼–å†™å¥½docker-compose.ymlæ–‡ä»¶ï¼Œå°±å¯ä»¥éƒ¨ç½²é¡¹ç›®äº†ã€‚å¸¸è§çš„å‘½ä»¤ï¼š</p><p><a href="https://docs.docker.com/compose/reference/">https://docs.docker.com/compose/reference/</a></p><p>åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose [OPTIONS] [COMMAND]</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼ŒOPTIONSå’ŒCOMMANDéƒ½æ˜¯å¯é€‰å‚æ•°ï¼Œæ¯”è¾ƒå¸¸è§çš„æœ‰ï¼š</p><table><thead><tr><th align="left"><strong>ç±»å‹</strong></th><th align="left"><strong>å‚æ•°æˆ–æŒ‡ä»¤</strong></th><th align="left"><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td align="left">Options</td><td align="left">-f</td><td align="left">æŒ‡å®šcomposeæ–‡ä»¶çš„è·¯å¾„å’Œåç§°</td></tr><tr><td align="left">-p</td><td align="left">æŒ‡å®šprojectåç§°ã€‚projectå°±æ˜¯å½“å‰composeæ–‡ä»¶ä¸­è®¾ç½®çš„å¤šä¸ªserviceçš„é›†åˆï¼Œæ˜¯é€»è¾‘æ¦‚å¿µ</td><td align="left"></td></tr><tr><td align="left">Commands</td><td align="left">up</td><td align="left">åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰serviceå®¹å™¨</td></tr><tr><td align="left">down</td><td align="left">åœæ­¢å¹¶ç§»é™¤æ‰€æœ‰å®¹å™¨ã€ç½‘ç»œ</td><td align="left"></td></tr><tr><td align="left">ps</td><td align="left">åˆ—å‡ºæ‰€æœ‰å¯åŠ¨çš„å®¹å™¨</td><td align="left"></td></tr><tr><td align="left">logs</td><td align="left">æŸ¥çœ‹æŒ‡å®šå®¹å™¨çš„æ—¥å¿—</td><td align="left"></td></tr><tr><td align="left">stop</td><td align="left">åœæ­¢å®¹å™¨</td><td align="left"></td></tr><tr><td align="left">start</td><td align="left">å¯åŠ¨å®¹å™¨</td><td align="left"></td></tr><tr><td align="left">restart</td><td align="left">é‡å¯å®¹å™¨</td><td align="left"></td></tr><tr><td align="left">top</td><td align="left">æŸ¥çœ‹è¿è¡Œçš„è¿›ç¨‹</td><td align="left"></td></tr><tr><td align="left">exec</td><td align="left">åœ¨æŒ‡å®šçš„è¿è¡Œä¸­å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤</td><td align="left"></td></tr></tbody></table><p>æ•™å­¦æ¼”ç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.è¿›å…¥rootç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.åˆ é™¤æ—§å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">rm</span> -f $(docker ps -qa)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.åˆ é™¤hmallé•œåƒ</span></span><br><span class="line">docker rmi hmall</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æ¸…ç©ºMySQLæ•°æ®</span></span><br><span class="line"><span class="built_in">rm</span> -rf mysql/data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.å¯åŠ¨æ‰€æœ‰, -d å‚æ•°æ˜¯åå°å¯åŠ¨</span></span><br><span class="line">docker compose up -d</span><br><span class="line"><span class="comment"># ç»“æœï¼š</span></span><br><span class="line">[+] Building 15.5s (8/8) FINISHED</span><br><span class="line"> =&gt; [internal] load build definition from Dockerfile                                    0.0s</span><br><span class="line"> =&gt; =&gt; transferring dockerfile: 358B                                                    0.0s</span><br><span class="line"> =&gt; [internal] load .dockerignore                                                       0.0s</span><br><span class="line"> =&gt; =&gt; transferring context: 2B                                                         0.0s</span><br><span class="line"> =&gt; [internal] load metadata <span class="keyword">for</span> docker.io/library/openjdk:11.0-jre-buster             15.4s</span><br><span class="line"> =&gt; [1/3] FROM docker.io/library/openjdk:11.0-jre-buster@sha256:3546a17e6fb4ff4fa681c3  0.0s</span><br><span class="line"> =&gt; [internal] load build context                                                       0.0s</span><br><span class="line"> =&gt; =&gt; transferring context: 98B                                                        0.0s</span><br><span class="line"> =&gt; CACHED [2/3] RUN <span class="built_in">ln</span> -snf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; <span class="built_in">echo</span>   0.0s</span><br><span class="line"> =&gt; CACHED [3/3] COPY hm-service.jar /app.jar                                           0.0s</span><br><span class="line"> =&gt; exporting to image                                                                  0.0s</span><br><span class="line"> =&gt; =&gt; exporting layers                                                                 0.0s</span><br><span class="line"> =&gt; =&gt; writing image sha256:32eebee16acde22550232f2eb80c69d2ce813ed099640e4cfed2193f71  0.0s</span><br><span class="line"> =&gt; =&gt; naming to docker.io/library/root-hmall                                           0.0s</span><br><span class="line">[+] Running 4/4</span><br><span class="line"> âœ” Network hmall    Created                                                             0.2s</span><br><span class="line"> âœ” Container mysql  Started                                                             0.5s</span><br><span class="line"> âœ” Container hmall  Started                                                             0.9s</span><br><span class="line"> âœ” Container nginx  Started                                                             1.5s</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.æŸ¥çœ‹é•œåƒ</span></span><br><span class="line">docker compose images</span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">CONTAINER           REPOSITORY          TAG                 IMAGE ID            SIZE</span><br><span class="line">hmall               root-hmall          latest              32eebee16acd        362MB</span><br><span class="line">mysql               mysql               latest              3218b38490ce        516MB</span><br><span class="line">nginx               nginx               latest              605c77e624dd        141MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.æŸ¥çœ‹å®¹å™¨</span></span><br><span class="line">docker compose ps</span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">NAME                IMAGE               COMMAND                  SERVICE             CREATED             STATUS              PORTS</span><br><span class="line">hmall               root-hmall          <span class="string">&quot;java -jar /app.jar&quot;</span>     hmall               54 seconds ago      Up 52 seconds       0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp</span><br><span class="line">mysql               mysql               <span class="string">&quot;docker-entrypoint.sâ€¦&quot;</span>   mysql               54 seconds ago      Up 53 seconds       0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp</span><br><span class="line">nginx               nginx               <span class="string">&quot;/docker-entrypoint.â€¦&quot;</span>   nginx               54 seconds ago      Up 52 seconds       80/tcp, 0.0.0.0:18080-18081-&gt;18080-18081/tcp, :::18080-18081-&gt;18080-18081/tcp</span><br></pre></td></tr></table></figure><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š<a href="http://yourip:8080/">http://yourIp:8080</a></p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MybatisPluså­¦ä¹ ç¬”è®°</title>
      <link href="/posts/18374.html"/>
      <url>/posts/18374.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h1 id="1-å¿«é€Ÿå…¥é—¨"><a href="#1-å¿«é€Ÿå…¥é—¨" class="headerlink" title="1. å¿«é€Ÿå…¥é—¨"></a>1. å¿«é€Ÿå…¥é—¨</h1><h2 id="1-1-å¸¸è§æ³¨è§£"><a href="#1-1-å¸¸è§æ³¨è§£" class="headerlink" title="1.1 å¸¸è§æ³¨è§£"></a>1.1 å¸¸è§æ³¨è§£</h2><p>åœ¨åˆšåˆšçš„å…¥é—¨æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»…ä»…å¼•å…¥äº†ä¾èµ–ï¼Œç»§æ‰¿äº† <code>BaseMapper</code>å°±èƒ½ä½¿ç”¨ MybatisPlusï¼Œéå¸¸ç®€å•ã€‚ä½†æ˜¯é—®é¢˜æ¥äº†ï¼š MybatisPluså¦‚ä½•çŸ¥é“æˆ‘ä»¬è¦æŸ¥è¯¢çš„æ˜¯å“ªå¼ è¡¨ï¼Ÿè¡¨ä¸­æœ‰å“ªäº›å­—æ®µå‘¢ï¼Ÿ</p><p>å¤§å®¶å›å¿†ä¸€ä¸‹ï¼ŒUserMapper åœ¨ç»§æ‰¿ BaseMapper çš„æ—¶å€™æŒ‡å®šäº†ä¸€ä¸ªæ³›å‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/908d7bb2784a2898ef4e62058a34a8ae645325325.png" alt="img"></p><p>æ³›å‹ä¸­çš„ User å°±æ˜¯ä¸æ•°æ®åº“å¯¹åº”çš„ POã€‚</p><p>Mybatis Plus å°±æ˜¯æ ¹æ® PO å®ä½“çš„ä¿¡æ¯æ¥æ¨æ–­å‡ºè¡¨çš„ä¿¡æ¯ï¼Œä»è€Œç”Ÿæˆ SQL çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼š</p><ul><li>MybatisPlus ä¼šæŠŠ PO å®ä½“çš„ç±»åé©¼å³°è½¬ä¸‹åˆ’çº¿ä½œä¸ºè¡¨å</li><li>MybatisPlus ä¼šæŠŠ PO å®ä½“çš„æ‰€æœ‰å˜é‡åé©¼å³°è½¬ä¸‹åˆ’çº¿ä½œä¸ºè¡¨çš„å­—æ®µåï¼Œå¹¶æ ¹æ®å˜é‡ç±»å‹æ¨æ–­å­—æ®µç±»å‹</li><li>MybatisPlus ä¼šæŠŠåä¸º id çš„å­—æ®µä½œä¸ºä¸»é”®</li></ul><p>ä½†å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé»˜è®¤çš„å®ç°ä¸å®é™…åœºæ™¯ä¸ç¬¦ï¼Œå› æ­¤ MybatisPlus æä¾›äº†ä¸€äº›æ³¨è§£ä¾¿äºæˆ‘ä»¬å£°æ˜è¡¨ä¿¡æ¯ã€‚</p><h3 id="1-1-1-TableName"><a href="#1-1-1-TableName" class="headerlink" title="1.1.1 @TableName"></a>1.1.1 <strong>@TableName</strong></h3><p>è¯´æ˜ï¼š</p><ul><li>æè¿°ï¼šè¡¨åæ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨</li><li>ä½¿ç”¨ä½ç½®ï¼šå®ä½“ç±»</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>TableName æ³¨è§£é™¤äº†æŒ‡å®šè¡¨åä»¥å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šå¾ˆå¤šå…¶å®ƒå±æ€§ï¼š</p><table><thead><tr><th><strong>å±æ€§</strong></th><th><strong>ç±»å‹</strong></th><th><strong>å¿…é¡»æŒ‡å®š</strong></th><th><strong>é»˜è®¤å€¼</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>value</td><td>String</td><td>å¦</td><td>â€œâ€</td><td>è¡¨å</td></tr><tr><td>schema</td><td>String</td><td>å¦</td><td>â€œâ€</td><td>schema</td></tr><tr><td>keepGlobalPrefix</td><td>boolean</td><td>å¦</td><td>false</td><td>æ˜¯å¦ä¿æŒä½¿ç”¨å…¨å±€çš„ tablePrefix çš„å€¼ï¼ˆå½“å…¨å±€ tablePrefix ç”Ÿæ•ˆæ—¶ï¼‰</td></tr><tr><td>resultMap</td><td>String</td><td>å¦</td><td>â€œâ€</td><td>xml ä¸­ resultMap çš„ idï¼ˆç”¨äºæ»¡è¶³ç‰¹å®šç±»å‹çš„å®ä½“ç±»å¯¹è±¡ç»‘å®šï¼‰</td></tr><tr><td>autoResultMap</td><td>boolean</td><td>å¦</td><td>false</td><td>æ˜¯å¦è‡ªåŠ¨æ„å»º resultMap å¹¶ä½¿ç”¨ï¼ˆå¦‚æœè®¾ç½® resultMap åˆ™ä¸ä¼šè¿›è¡Œ resultMap çš„è‡ªåŠ¨æ„å»ºä¸æ³¨å…¥ï¼‰</td></tr><tr><td>excludeProperty</td><td>String[]</td><td>å¦</td><td>{}</td><td>éœ€è¦æ’é™¤çš„å±æ€§å @since 3.3.1</td></tr></tbody></table><h3 id="1-1-2-TableId"><a href="#1-1-2-TableId" class="headerlink" title="1.1.2 @TableId"></a>1.1.2 <strong>@TableId</strong></h3><p>è¯´æ˜ï¼š</p><ul><li>æè¿°ï¼šä¸»é”®æ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»ä¸­çš„ä¸»é”®å­—æ®µ</li><li>ä½¿ç”¨ä½ç½®ï¼šå®ä½“ç±»çš„ä¸»é”®å­—æ®µ</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>TableId</code>æ³¨è§£æ”¯æŒä¸¤ä¸ªå±æ€§ï¼š</p><table><thead><tr><th align="left"><strong>å±æ€§</strong></th><th align="left"><strong>ç±»å‹</strong></th><th align="left"><strong>å¿…é¡»æŒ‡å®š</strong></th><th align="left"><strong>é»˜è®¤å€¼</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">value</td><td align="left">String</td><td align="left">å¦</td><td align="left">â€œâ€</td><td align="left">è¡¨å</td></tr><tr><td align="left">type</td><td align="left">Enum</td><td align="left">å¦</td><td align="left">IdType.NONE</td><td align="left">æŒ‡å®šä¸»é”®ç±»å‹</td></tr></tbody></table><p><code>IdType</code>æ”¯æŒçš„ç±»å‹æœ‰ï¼š</p><table><thead><tr><th align="left"><strong>å€¼</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">AUTO</td><td align="left">æ•°æ®åº“ ID è‡ªå¢</td></tr><tr><td align="left">NONE</td><td align="left">æ— çŠ¶æ€ï¼Œè¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹ï¼ˆæ³¨è§£é‡Œç­‰äºè·Ÿéšå…¨å±€ï¼Œå…¨å±€é‡Œçº¦ç­‰äº INPUTï¼‰</td></tr><tr><td align="left">INPUT</td><td align="left">insert å‰è‡ªè¡Œ set ä¸»é”®å€¼</td></tr><tr><td align="left">ASSIGN_ID</td><td align="left">åˆ†é… ID(ä¸»é”®ç±»å‹ä¸º Number(Long å’Œ Integer)æˆ– String)(since 3.3.0),ä½¿ç”¨æ¥å£IdentifierGeneratorçš„æ–¹æ³•nextId(é»˜è®¤å®ç°ç±»ä¸ºDefaultIdentifierGeneratoré›ªèŠ±ç®—æ³•)</td></tr><tr><td align="left">ASSIGN_UUID</td><td align="left">åˆ†é… UUID,ä¸»é”®ç±»å‹ä¸º String(since 3.3.0),ä½¿ç”¨æ¥å£IdentifierGeneratorçš„æ–¹æ³•nextUUID(é»˜è®¤ default æ–¹æ³•)</td></tr><tr><td align="left">ID_WORKER</td><td align="left">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ ID é•¿æ•´å‹ç±»å‹(please use ASSIGN_ID)</td></tr><tr><td align="left">UUID</td><td align="left">32 ä½ UUID å­—ç¬¦ä¸²(please use ASSIGN_UUID)</td></tr><tr><td align="left">ID_WORKER_STR</td><td align="left">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ ID å­—ç¬¦ä¸²ç±»å‹(please use ASSIGN_ID)</td></tr></tbody></table><p>è¿™é‡Œæ¯”è¾ƒå¸¸è§çš„æœ‰ä¸‰ç§ï¼š</p><ul><li><code>AUTO</code>ï¼šåˆ©ç”¨æ•°æ®åº“çš„idè‡ªå¢é•¿</li><li><code>INPUT</code>ï¼šæ‰‹åŠ¨ç”Ÿæˆid</li><li><code>ASSIGN_ID</code>ï¼šé›ªèŠ±ç®—æ³•ç”Ÿæˆ<code>Long</code>ç±»å‹çš„å…¨å±€å”¯ä¸€idï¼Œè¿™æ˜¯é»˜è®¤çš„IDç­–ç•¥</li></ul><h3 id="1-1-3-TableField"><a href="#1-1-3-TableField" class="headerlink" title="1.1.3  @TableField"></a>1.1.3  <strong>@TableField</strong></h3><p>è¯´æ˜ï¼š</p><blockquote><p>æè¿°ï¼šæ™®é€šå­—æ®µæ³¨è§£</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="meta">@TableField(&quot;isMarried&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean isMarried;</span><br><span class="line">    <span class="meta">@TableField(&quot;concat&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String concat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¹¶ä¸éœ€è¦ç»™å­—æ®µæ·»åŠ  <code>@TableField</code> æ³¨è§£ï¼Œä¸€äº›ç‰¹æ®Šæƒ…å†µé™¤å¤–ï¼š</p><ul><li>æˆå‘˜å˜é‡åä¸æ•°æ®åº“å­—æ®µåä¸ä¸€è‡´</li><li>æˆå‘˜å˜é‡æ˜¯ä»¥ <code>isXXX</code> å‘½åï¼ŒæŒ‰ç…§ <code>JavaBean</code> çš„è§„èŒƒï¼Œ<code>MybatisPlus</code> è¯†åˆ«å­—æ®µæ—¶ä¼šæŠŠ <code>is</code> å»é™¤ï¼Œè¿™å°±å¯¼è‡´ä¸æ•°æ®åº“ä¸ç¬¦ã€‚</li><li>æˆå‘˜å˜é‡åä¸æ•°æ®åº“ä¸€è‡´ï¼Œä½†æ˜¯ä¸æ•°æ®åº“çš„å…³é”®å­—å†²çªã€‚ä½¿ç”¨ <code>@TableField </code>æ³¨è§£ç»™å­—æ®µåæ·»åŠ &#96;&#96;&#96;&#96;è½¬ä¹‰</li></ul><p>æ”¯æŒçš„å…¶å®ƒå±æ€§å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/5c8452a9b933bebd25f94405e0812d25645325325.png" alt="image-20240812115447764"></p><h2 id="1-2-å¸¸è§é…ç½®"><a href="#1-2-å¸¸è§é…ç½®" class="headerlink" title="1.2 å¸¸è§é…ç½®"></a>1.2 å¸¸è§é…ç½®</h2><p>å¤§å¤šæ•°çš„é…ç½®éƒ½æœ‰é»˜è®¤å€¼ï¼Œå› æ­¤æˆ‘ä»¬éƒ½æ— éœ€é…ç½®ã€‚ä½†è¿˜æœ‰ä¸€äº›æ˜¯æ²¡æœ‰é»˜è®¤å€¼çš„ï¼Œä¾‹å¦‚:</p><ul><li>å®ä½“ç±»çš„åˆ«åæ‰«æåŒ…</li><li>å…¨å±€ id ç±»å‹</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.itheima.mp.domain.po</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span> <span class="comment"># å…¨å±€idç±»å‹ä¸ºè‡ªå¢é•¿</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMyBatisPlus ä¹Ÿæ”¯æŒæ‰‹å†™ SQL çš„ï¼Œè€Œ mapper æ–‡ä»¶çš„è¯»å–åœ°å€å¯ä»¥è‡ªå·±é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">&quot;classpath*:/mapper/**/*.xml&quot;</span> <span class="comment"># Mapper.xmlæ–‡ä»¶åœ°å€ï¼Œå½“å‰è¿™ä¸ªæ˜¯é»˜è®¤å€¼ã€‚</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°é»˜è®¤å€¼æ˜¯ <code>classpath*:/mapper/**/*.xml </code>ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªè¦æŠŠ mapper.xml æ–‡ä»¶æ”¾ç½®è¿™ä¸ªç›®å½•ä¸‹å°±ä¸€å®šä¼šè¢«åŠ è½½ã€‚</p><h1 id="2-æ ¸å¿ƒåŠŸèƒ½"><a href="#2-æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="2. æ ¸å¿ƒåŠŸèƒ½"></a>2. æ ¸å¿ƒåŠŸèƒ½</h1><h2 id="2-1-æ¡ä»¶æ„é€ å™¨"><a href="#2-1-æ¡ä»¶æ„é€ å™¨" class="headerlink" title="2.1 æ¡ä»¶æ„é€ å™¨"></a>2.1 æ¡ä»¶æ„é€ å™¨</h2><p>é™¤äº†æ–°å¢ä»¥å¤–ï¼Œä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢çš„ SQL è¯­å¥éƒ½éœ€è¦æŒ‡å®š where æ¡ä»¶ã€‚å› æ­¤ BaseMapper ä¸­æä¾›çš„ç›¸å…³æ–¹æ³•é™¤äº†ä»¥ <code>id</code> ä½œä¸º<code>where </code>æ¡ä»¶ä»¥å¤–ï¼Œè¿˜æ”¯æŒæ›´åŠ å¤æ‚çš„ <code>where</code> æ¡ä»¶ã€‚</p><p><img src="https://i0.hdslb.com/bfs/article/83b88d49024ae990ae7a846a5064d544645325325.png" alt="img"></p><p>å‚æ•°ä¸­çš„ <code>Wrapper</code> å°±æ˜¯æ¡ä»¶æ„é€ çš„æŠ½è±¡ç±»ï¼Œå…¶ä¸‹æœ‰å¾ˆå¤šé»˜è®¤å®ç°ï¼Œç»§æ‰¿å…³ç³»å¦‚å›¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/d541317263975a081620f75986e222a3645325325.png" alt="img"></p><p><code>Wrapper</code> çš„å­ç±» <code>AbstractWrapper</code> æä¾›äº† where ä¸­åŒ…å«çš„æ‰€æœ‰æ¡ä»¶æ„é€ æ–¹æ³•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/818872329e442d41009e962926cb1ccf645325325.png" alt="img"></p><p>è€Œ QueryWrapper åœ¨ AbstractWrapper çš„åŸºç¡€ä¸Šæ‹“å±•äº†ä¸€ä¸ªselect æ–¹æ³•ï¼Œå…è®¸æŒ‡å®šæŸ¥è¯¢å­—æ®µï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/99f02662a31cec7c3c3d263d29285e48645325325.png" alt="img"></p><p>è€Œ UpdateWrapper åœ¨ AbstractWrapper çš„åŸºç¡€ä¸Šæ‹“å±•äº†ä¸€ä¸ª setæ–¹æ³•ï¼Œå…è®¸æŒ‡å®š SQL ä¸­çš„ SET éƒ¨åˆ†ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/91bc8b8eab09babcb736a7f21a417fd1645325325.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•åˆ©ç”¨ <code>Wrapper</code> å®ç°å¤æ‚æŸ¥è¯¢ã€‚</p><h3 id="2-1-1-QueryWrapper"><a href="#2-1-1-QueryWrapper" class="headerlink" title="2.1.1 QueryWrapper"></a>2.1.1 QueryWrapper</h3><p>æ— è®ºæ˜¯ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ QueryWrapper æ¥æ„å»ºæŸ¥è¯¢æ¡ä»¶ã€‚æ¥ä¸‹æ¥çœ‹ä¸€äº›ä¾‹å­ï¼š </p><p><strong>æŸ¥è¯¢</strong>ï¼šæŸ¥è¯¢å‡ºåå­—ä¸­å¸¦ <code>o</code> çš„ï¼Œå­˜æ¬¾å¤§äºç­‰äº 1000 å…ƒçš„äººã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæŸ¥è¯¢æ¡ä»¶ where name like &quot;%o%&quot; AND balance &gt;= 1000</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;()</span><br><span class="line">            .select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;info&quot;</span>, <span class="string">&quot;balance&quot;</span>)</span><br><span class="line">            .like(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">            .ge(<span class="string">&quot;balance&quot;</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ›´æ–°</strong>ï¼šæ›´æ–°ç”¨æˆ·åä¸ºjackçš„ç”¨æˆ·çš„ä½™é¢ä¸º2000ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateByQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæŸ¥è¯¢æ¡ä»¶ where name = &quot;Jack&quot;</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().eq(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;Jack&quot;</span>);</span><br><span class="line">    <span class="comment">// 2.æ›´æ–°æ•°æ®ï¼Œuserä¸­énullå­—æ®µéƒ½ä¼šä½œä¸ºsetè¯­å¥</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setBalance(<span class="number">2000</span>);</span><br><span class="line">    userMapper.update(user, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-1-2-UpdateWrapper"><a href="#2-1-2-UpdateWrapper" class="headerlink" title="2.1.2 UpdateWrapper"></a><strong>2.1.2 UpdateWrapper</strong></h3><p>åŸºäº BaseMapper ä¸­çš„ update æ–¹æ³•æ›´æ–°æ—¶åªèƒ½ç›´æ¥èµ‹å€¼ï¼Œå¯¹äºä¸€äº›å¤æ‚çš„éœ€æ±‚å°±éš¾ä»¥å®ç°ã€‚ ä¾‹å¦‚ï¼šæ›´æ–°idä¸º <code>1,2,4</code> çš„ç”¨æˆ·çš„ä½™é¢ï¼Œæ‰£ 200ï¼Œå¯¹åº”çš„ SQL åº”è¯¥æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE user <span class="type">SET</span> <span class="variable">balance</span> <span class="operator">=</span> balance - <span class="number">200</span> WHERE id <span class="title function_">in</span> <span class="params">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>)</span></span><br></pre></td></tr></table></figure><p>SET çš„èµ‹å€¼ç»“æœæ˜¯åŸºäºå­—æ®µç°æœ‰å€¼çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦åˆ©ç”¨UpdateWrapper ä¸­çš„ setSql åŠŸèƒ½äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;Long&gt; ids = List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>);</span><br><span class="line">    <span class="comment">// 1.ç”ŸæˆSQL</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;User&gt;()</span><br><span class="line">            .setSql(<span class="string">&quot;balance = balance - 200&quot;</span>) <span class="comment">// SET balance = balance - 200</span></span><br><span class="line">            .in(<span class="string">&quot;id&quot;</span>, ids); <span class="comment">// WHERE id in (1, 2, 4)</span></span><br><span class="line">        <span class="comment">// 2.æ›´æ–°ï¼Œæ³¨æ„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ç»™nullï¼Œä¹Ÿå°±æ˜¯ä¸å¡«æ›´æ–°å­—æ®µå’Œæ•°æ®ï¼Œ</span></span><br><span class="line">    <span class="comment">// è€Œæ˜¯åŸºäºUpdateWrapperä¸­çš„setSQLæ¥æ›´æ–°</span></span><br><span class="line">    userMapper.update(<span class="literal">null</span>, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-1-3-LambdaQueryWrapper"><a href="#2-1-3-LambdaQueryWrapper" class="headerlink" title="2.1.3 LambdaQueryWrapper"></a><strong>2.1.3 LambdaQueryWrapper</strong></h3><p>æ— è®ºæ˜¯ QueryWrapper è¿˜æ˜¯ UpdateWrapper åœ¨æ„é€ æ¡ä»¶çš„æ—¶å€™éƒ½éœ€è¦å†™æ­»å­—æ®µåç§°ï¼Œä¼šå‡ºç°å­—ç¬¦ä¸² <code>é­”æ³•å€¼</code> ã€‚è¿™åœ¨ç¼–ç¨‹è§„èŒƒä¸­æ˜¾ç„¶æ˜¯ä¸æ¨èçš„ã€‚ é‚£æ€ä¹ˆæ ·æ‰èƒ½ä¸å†™å­—æ®µåï¼Œåˆèƒ½çŸ¥é“å­—æ®µåå‘¢ï¼Ÿ</p><p>å…¶ä¸­ä¸€ç§åŠæ³•æ˜¯åŸºäºå˜é‡çš„ <code>gettter</code> æ–¹æ³•ç»“åˆåå°„æŠ€æœ¯ã€‚å› æ­¤æˆ‘ä»¬åªè¦å°†æ¡ä»¶å¯¹åº”çš„å­—æ®µçš„ <code>getter</code> æ–¹æ³•ä¼ é€’ç»™ MybatisPlusï¼Œå®ƒå°±èƒ½è®¡ç®—å‡ºå¯¹åº”çš„å˜é‡åäº†ã€‚è€Œä¼ é€’æ–¹æ³•å¯ä»¥ä½¿ç”¨ JDK8 ä¸­çš„ <code>æ–¹æ³•å¼•ç”¨</code> å’Œ <code>Lambda</code> è¡¨è¾¾å¼ã€‚ å› æ­¤ MybatisPlus åˆæä¾›äº†ä¸€å¥—åŸºäº Lambda çš„ Wrapperï¼ŒåŒ…å«ä¸¤ä¸ªï¼š</p><ul><li>LambdaQueryWrapper</li><li>LambdaUpdateWrapper</li></ul><p>åˆ†åˆ«å¯¹åº” QueryWrapper å’Œ UpdateWrapper</p><p>å…¶ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testLambdaQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæ¡ä»¶ WHERE username LIKE &quot;%o%&quot; AND balance &gt;= 1000</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    wrapper.lambda()</span><br><span class="line">            .select(User::getId, User::getUsername, User::getInfo, User::getBalance)</span><br><span class="line">            .like(User::getUsername, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">            .ge(User::getBalance, <span class="number">1000</span>);</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-2-è‡ªå®šä¹‰SQL"><a href="#2-2-è‡ªå®šä¹‰SQL" class="headerlink" title="2.2 è‡ªå®šä¹‰SQL"></a>2.2 è‡ªå®šä¹‰SQL</h2><p>åœ¨æ¼”ç¤º UpdateWrapper çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ä»£ç ä¸­ç¼–å†™äº†æ›´æ–°çš„ SQL è¯­å¥ï¼š<img src="https://i0.hdslb.com/bfs/article/c2ca59f15e262d5b0878375f8e4cac55645325325.png" alt="img"></p><p>è¿™ç§å†™æ³•åœ¨æŸäº›ä¼ä¸šä¹Ÿæ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸º SQL è¯­å¥æœ€å¥½éƒ½ç»´æŠ¤åœ¨æŒä¹…å±‚ï¼Œè€Œä¸æ˜¯ä¸šåŠ¡å±‚ã€‚å°±å½“å‰æ¡ˆä¾‹æ¥è¯´ï¼Œç”±äºæ¡ä»¶æ˜¯ in è¯­å¥ï¼Œåªèƒ½å°† SQL å†™åœ¨ Mapper.xml æ–‡ä»¶ï¼Œåˆ©ç”¨ foreach æ¥ç”ŸæˆåŠ¨æ€ SQL ã€‚ è¿™å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ã€‚å‡å¦‚æŸ¥è¯¢æ¡ä»¶æ›´å¤æ‚ï¼ŒåŠ¨æ€ SQL çš„ç¼–å†™ä¹Ÿä¼šæ›´åŠ å¤æ‚ã€‚</p><p>æ‰€ä»¥ï¼ŒMybatisPlus æä¾›äº†è‡ªå®šä¹‰ SQL åŠŸèƒ½ï¼Œå¯ä»¥è®©æˆ‘ä»¬åˆ©ç”¨Wrapper ç”ŸæˆæŸ¥è¯¢æ¡ä»¶ï¼Œå†ç»“åˆ Mapper.xml ç¼–å†™ SQL</p><h3 id="2-2-1-åŸºæœ¬ç”¨æ³•"><a href="#2-2-1-åŸºæœ¬ç”¨æ³•" class="headerlink" title="2.2.1.åŸºæœ¬ç”¨æ³•"></a><strong>2.2.1.åŸºæœ¬ç”¨æ³•</strong></h3><p>ä»¥å½“å‰æ¡ˆä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCustomWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.å‡†å¤‡è‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    List&lt;Long&gt; ids = List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>);</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().in(<span class="string">&quot;id&quot;</span>, ids);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.è°ƒç”¨mapperçš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œç›´æ¥ä¼ é€’Wrapper</span></span><br><span class="line">    userMapper.deductBalanceByIds(<span class="number">200</span>, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨UserMapperä¸­è‡ªå®šä¹‰SQLï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Update;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;UPDATE user SET balance = balance - #&#123;money&#125; $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deductBalanceByIds</span><span class="params">(<span class="meta">@Param(&quot;money&quot;)</span> <span class="type">int</span> money, <span class="meta">@Param(&quot;ew&quot;)</span> QueryWrapper&lt;User&gt; wrapper)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±çœå»äº†ç¼–å†™å¤æ‚æŸ¥è¯¢æ¡ä»¶çš„çƒ¦æ¼äº†ã€‚</p><h3 id="2-2-2-å¤šè¡¨å…³è”"><a href="#2-2-2-å¤šè¡¨å…³è”" class="headerlink" title="2.2.2 å¤šè¡¨å…³è”"></a><strong>2.2.2 å¤šè¡¨å…³è”</strong></h3><p>ç†è®ºä¸Šæ¥è®² MyBatisPlus æ˜¯ä¸æ”¯æŒå¤šè¡¨æŸ¥è¯¢çš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Wrapper ä¸­è‡ªå®šä¹‰æ¡ä»¶ç»“åˆè‡ªå®šä¹‰ SQL æ¥å®ç°å¤šè¡¨æŸ¥è¯¢çš„æ•ˆæœã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦æŸ¥è¯¢å‡ºæ‰€æœ‰æ”¶è´§åœ°å€åœ¨åŒ—äº¬çš„å¹¶ä¸”ç”¨æˆ· id åœ¨ 1ã€2ã€4 ä¹‹ä¸­çš„ç”¨æˆ·</p><p>è¦æ˜¯è‡ªå·±åŸºäº mybatis å®ç° SQLï¼Œå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserByIdAndAddr&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.mp.domain.po.User&quot;</span>&gt;</span></span><br><span class="line">      SELECT *</span><br><span class="line">      FROM user u</span><br><span class="line">      INNER JOIN address a ON u.id = a.user_id</span><br><span class="line">      WHERE u.id</span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;IN (&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">          #&#123;id&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">      AND a.city = #&#123;city&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºå…¶ä¸­æœ€å¤æ‚çš„å°±æ˜¯ WHERE æ¡ä»¶çš„ç¼–å†™ï¼Œå¦‚æœä¸šåŠ¡å¤æ‚ä¸€äº›ï¼Œè¿™é‡Œçš„ SQL ä¼šæ›´å˜æ€ã€‚</p><p>ä½†æ˜¯åŸºäºè‡ªå®šä¹‰ SQL ç»“åˆ Wrapper çš„ç©æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨Wrapper æ¥æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œç„¶åæ‰‹å†™ SELECT åŠ FROM éƒ¨åˆ†ï¼Œå®ç°å¤šè¡¨æŸ¥è¯¢ã€‚</p><p>æŸ¥è¯¢æ¡ä»¶è¿™æ ·æ¥æ„å»ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCustomJoinWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.å‡†å¤‡è‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;()</span><br><span class="line">            .in(<span class="string">&quot;u.id&quot;</span>, List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>))</span><br><span class="line">            .eq(<span class="string">&quot;a.city&quot;</span>, <span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.è°ƒç”¨mapperçš„è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.queryUserByWrapper(wrapper);</span><br><span class="line"></span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨UserMapperä¸­è‡ªå®šä¹‰æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;SELECT u.* FROM user u INNER JOIN address a ON u.id = a.user_id $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">queryUserByWrapper</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span>QueryWrapper&lt;User&gt; wrapper)</span>;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åœ¨ <code>UserMapper.xml</code> ä¸­å†™ SQL ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserByIdAndAddr&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.mp.domain.po.User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM user u INNER JOIN address a ON u.id = a.user_id $&#123;ew.customSqlSegment&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-3-Serviceæ¥å£"><a href="#2-3-Serviceæ¥å£" class="headerlink" title="2.3 Serviceæ¥å£"></a>2.3 Serviceæ¥å£</h2><p>MybatisPlus ä¸ä»…æä¾›äº† BaseMapperï¼Œè¿˜æä¾›äº†é€šç”¨çš„ Service æ¥å£åŠé»˜è®¤å®ç°ï¼Œå°è£…äº†ä¸€äº›å¸¸ç”¨çš„ service æ¨¡æ¿æ–¹æ³•ã€‚ é€šç”¨æ¥å£ä¸º <code>IService</code>ï¼Œé»˜è®¤å®ç°ä¸º <code>ServiceImpl</code>ï¼Œå…¶ä¸­å°è£…çš„æ–¹æ³•å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p><ul><li><code>save</code>ï¼šæ–°å¢</li><li><code>remove</code>ï¼šåˆ é™¤</li><li><code>update</code>ï¼šæ›´æ–°</li><li><code>get</code>ï¼šæŸ¥è¯¢å•ä¸ªç»“æœ</li><li><code>list</code>ï¼šæŸ¥è¯¢é›†åˆç»“æœ</li><li><code>count</code>ï¼šè®¡æ•°</li><li><code>page</code>ï¼šåˆ†é¡µæŸ¥è¯¢</li></ul><h3 id="2-3-1-CRUD"><a href="#2-3-1-CRUD" class="headerlink" title="2.3.1 CRUD"></a>2.3.1 CRUD</h3><p>æˆ‘ä»¬å…ˆä¿©çœ‹ä¸‹åŸºæœ¬çš„ CRUD æ¥å£ã€‚ <strong>æ–°å¢</strong>ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/42fd7711fb375c03501eaf2793e73f27645325325.png" alt="img"></p><ul><li><code>save </code>æ˜¯æ–°å¢å•ä¸ªå…ƒç´ </li><li><code>saveBatch </code>æ˜¯æ‰¹é‡æ–°å¢</li><li><code>saveOrUpdate</code> æ˜¯æ ¹æ® id åˆ¤æ–­ï¼Œå¦‚æœæ•°æ®å­˜åœ¨å°±æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™æ–°å¢</li><li><code>saveOrUpdateBatch </code>æ˜¯æ‰¹é‡çš„æ–°å¢æˆ–ä¿®æ”¹</li></ul><p><strong>åˆ é™¤ï¼š</strong></p><p><img src="https://i0.hdslb.com/bfs/article/8f65a72b8fd5acca75bd261262f7b8bb645325325.png" alt="img"></p><ul><li><code>removeById</code>ï¼šæ ¹æ® id åˆ é™¤</li><li><code>removeByIds</code>ï¼šæ ¹æ® id æ‰¹é‡åˆ é™¤</li><li><code>removeByMap</code>ï¼šæ ¹æ® Map ä¸­çš„é”®å€¼å¯¹ä¸ºæ¡ä»¶åˆ é™¤</li><li><code>remove(Wrapper&lt;T&gt;)</code>ï¼šæ ¹æ® Wrapper æ¡ä»¶åˆ é™¤</li><li><code>~~removeBatchByIds~~</code>ï¼šæš‚ä¸æ”¯æŒ</li></ul><p><strong>ä¿®æ”¹ï¼š</strong></p><p><img src="https://i0.hdslb.com/bfs/article/43bff06f7511ad106dfe3708ce7c217b645325325.png" alt="img"></p><ul><li><code>updateById</code>ï¼šæ ¹æ® id ä¿®æ”¹</li><li><code>update(Wrapper&lt;T&gt;)</code>ï¼šæ ¹æ® <code>UpdateWrapper</code> ä¿®æ”¹ï¼Œ<code>Wrapper</code>ä¸­åŒ…å« <code>set</code> å’Œ <code>where</code> éƒ¨åˆ†</li><li><code>update(Tï¼ŒWrapper&lt;T&gt;)</code>ï¼šæŒ‰ç…§ <code>T</code> å†…çš„æ•°æ®ä¿®æ”¹ä¸ <code>Wrapper</code>åŒ¹é…åˆ°çš„æ•°æ®</li><li><code>updateBatchById</code>ï¼šæ ¹æ® id æ‰¹é‡ä¿®æ”¹</li></ul><p><strong>Getï¼š</strong></p><p><img src="https://i0.hdslb.com/bfs/article/8f548b70dc679ce4afc846782b5b7f47645325325.png" alt="img"></p><ul><li><code>getById</code>ï¼šæ ¹æ® id æŸ¥è¯¢ 1 æ¡æ•°æ®</li><li><code>getOne(Wrapper&lt;T&gt;)</code>ï¼šæ ¹æ® <code>Wrapper </code>æŸ¥è¯¢ 1 æ¡æ•°æ®</li><li><code>getBaseMapper</code>ï¼šè·å– <code>Service</code> å†…çš„ <code>BaseMapper</code> å®ç°ï¼ŒæŸäº›æ—¶å€™éœ€è¦ç›´æ¥è°ƒç”¨ <code>Mapper</code> å†…çš„è‡ªå®šä¹‰ <code>SQL</code> æ—¶å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•è·å–åˆ° <code>Mapper</code></li></ul><p><strong>Listï¼š</strong></p><p><img src="https://i0.hdslb.com/bfs/article/905c6fdfd49ba5dde28e1ceaf20d5c7f645325325.png" alt="img"></p><ul><li><code>listByIds</code>ï¼šæ ¹æ® id æ‰¹é‡æŸ¥è¯¢</li><li><code>list(Wrapper&lt;T&gt;)</code>ï¼šæ ¹æ® Wrapper æ¡ä»¶æŸ¥è¯¢å¤šæ¡æ•°æ®</li><li><code>list()</code>ï¼šæŸ¥è¯¢æ‰€æœ‰</li></ul><p><strong>Count</strong>ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/56513bcf3044ff17d9c5f1411434ed46645325325.png" alt="img"></p><ul><li><code>count()</code>ï¼šç»Ÿè®¡æ‰€æœ‰æ•°é‡</li><li><code>count(Wrapper&lt;T&gt;)</code>ï¼šç»Ÿè®¡ç¬¦åˆ <code>Wrapper</code> æ¡ä»¶çš„æ•°æ®æ•°é‡</li></ul><p><strong>getBaseMapper</strong>ï¼š å½“æˆ‘ä»¬åœ¨ service ä¸­è¦è°ƒç”¨ Mapper ä¸­è‡ªå®šä¹‰ SQL æ—¶ï¼Œå°±å¿…é¡»è·å– service å¯¹åº”çš„ Mapperï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e507ac2922fda90f6ebd2159ddd252d5645325325.png" alt="img"></p><h3 id="2-3-2-åŸºæœ¬ç”¨æ³•"><a href="#2-3-2-åŸºæœ¬ç”¨æ³•" class="headerlink" title="2.3.2.åŸºæœ¬ç”¨æ³•"></a><strong>2.3.2.åŸºæœ¬ç”¨æ³•</strong></h3><p>ç”±äº <code>Service</code> ä¸­ç»å¸¸éœ€è¦å®šä¹‰ä¸ä¸šåŠ¡æœ‰å…³çš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨ <code>IService</code> ï¼Œè€Œæ˜¯è‡ªå®šä¹‰ <code>Service</code> æ¥å£ï¼Œç„¶åç»§æ‰¿ <code>IService</code> ä»¥æ‹“å±•æ–¹æ³•ã€‚åŒæ—¶ï¼Œè®©è‡ªå®šä¹‰çš„ <code>Serviceå®ç°ç±»</code> ç»§æ‰¿ <code>ServiceImpl</code> ï¼Œè¿™æ ·å°±ä¸ç”¨è‡ªå·±å®ç° <code>IService</code> ä¸­çš„æ¥å£äº†ã€‚</p><p>é¦–å…ˆï¼Œå®šä¹‰ <code>IUserService</code>ï¼Œç»§æ‰¿ <code>IService</code> ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="comment">// æ‹“å±•è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œç¼–å†™ <code>UserServiceImpl</code> ç±»ï¼Œç»§æ‰¿ <code>ServiceImpl</code>ï¼Œå®ç° <code>IUserService</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt;</span><br><span class="line">                                                                                                        <span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e9b3f97fd179215eaea9d16e58d9f4c3645325325.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¿«é€Ÿå®ç°ä¸‹é¢4ä¸ªæ¥å£ï¼š</p><table><thead><tr><th align="left"><strong>ç¼–å·</strong></th><th align="left"><strong>æ¥å£</strong></th><th align="left"><strong>è¯·æ±‚æ–¹å¼</strong></th><th align="left"><strong>è¯·æ±‚è·¯å¾„</strong></th><th align="left"><strong>è¯·æ±‚å‚æ•°</strong></th><th align="left"><strong>è¿”å›å€¼</strong></th></tr></thead><tbody><tr><td align="left">1</td><td align="left">æ–°å¢ç”¨æˆ·</td><td align="left">POST</td><td align="left">&#x2F;users</td><td align="left">ç”¨æˆ·è¡¨å•å®ä½“</td><td align="left">æ— </td></tr><tr><td align="left">2</td><td align="left">åˆ é™¤ç”¨æˆ·</td><td align="left">DELETE</td><td align="left">&#x2F;users&#x2F;{id}</td><td align="left">ç”¨æˆ·id</td><td align="left">æ— </td></tr><tr><td align="left">3</td><td align="left">æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</td><td align="left">GET</td><td align="left">&#x2F;users&#x2F;{id}</td><td align="left">ç”¨æˆ·id</td><td align="left">ç”¨æˆ·VO</td></tr><tr><td align="left">4</td><td align="left">æ ¹æ®idæ‰¹é‡æŸ¥è¯¢</td><td align="left">GET</td><td align="left">&#x2F;users</td><td align="left">ç”¨æˆ·idé›†åˆ</td><td align="left">ç”¨æˆ·VOé›†åˆ</td></tr></tbody></table><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¼•å…¥å‡ ä¸ªä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.xiaoymin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>knife4j-openapi2-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--web--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åéœ€è¦é…ç½® swagger ä¿¡æ¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">openapi:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">ç”¨æˆ·ç®¡ç†æ¥å£æ–‡æ¡£</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;ç”¨æˆ·ç®¡ç†æ¥å£æ–‡æ¡£&quot;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">zhanghuyi@itcast.cn</span></span><br><span class="line">    <span class="attr">concat:</span> <span class="string">è™å“¥</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://www.itcast.cn</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">v1.0.0</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">group-name:</span> <span class="string">default</span></span><br><span class="line">        <span class="attr">api-rule:</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">api-rule-resources:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">com.itheima.mp.controller</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæ¥å£éœ€è¦ä¸¤ä¸ªå®ä½“ï¼š</p><ul><li>UserFormDTOï¼šä»£è¡¨æ–°å¢æ—¶çš„ç”¨æˆ·è¡¨å•</li><li>UserVOï¼šä»£è¡¨æŸ¥è¯¢çš„è¿”å›ç»“æœ</li></ul><p>é¦–å…ˆæ˜¯ UserFormDTOï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.handlers.JacksonTypeHandler;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;ç”¨æˆ·è¡¨å•å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserFormDTO</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·å&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;å¯†ç &quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;æ³¨å†Œæ‰‹æœºå·&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;è¯¦ç»†ä¿¡æ¯ï¼ŒJSONé£æ ¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String info;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;è´¦æˆ·ä½™é¢&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer balance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæ˜¯ UserVOï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;ç”¨æˆ·VOå®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserVO</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·å&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;è¯¦ç»†ä¿¡æ¯&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String info;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ä½¿ç”¨çŠ¶æ€ï¼ˆ1æ­£å¸¸ 2å†»ç»“ï¼‰&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;è´¦æˆ·ä½™é¢&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer balance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼ŒæŒ‰ç…§ Restful é£æ ¼ç¼–å†™ Controller æ¥å£æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.bean.BeanUtil;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.dto.UserFormDTO;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.vo.UserVO;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.service.IUserService;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Api(tags = &quot;ç”¨æˆ·ç®¡ç†æ¥å£&quot;)</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IUserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æ–°å¢ç”¨æˆ·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveUser</span><span class="params">(<span class="meta">@RequestBody</span> UserFormDTO userFormDTO)</span>&#123;</span><br><span class="line">        <span class="comment">// 1.è½¬æ¢DTOä¸ºPO</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> BeanUtil.copyProperties(userFormDTO, User.class);</span><br><span class="line">        <span class="comment">// 2.æ–°å¢</span></span><br><span class="line">        userService.save(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;åˆ é™¤ç”¨æˆ·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeUserById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long userId)</span>&#123;</span><br><span class="line">        userService.removeById(userId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> UserVO <span class="title function_">queryUserById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long userId)</span>&#123;</span><br><span class="line">        <span class="comment">// 1.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getById(userId);</span><br><span class="line">        <span class="comment">// 2.å¤„ç†vo</span></span><br><span class="line">        <span class="keyword">return</span> BeanUtil.copyProperties(user, UserVO.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æ ¹æ®idé›†åˆæŸ¥è¯¢ç”¨æˆ·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;UserVO&gt; <span class="title function_">queryUserByIds</span><span class="params">(<span class="meta">@RequestParam(&quot;ids&quot;)</span> List&lt;Long&gt; ids)</span>&#123;</span><br><span class="line">        <span class="comment">// 1.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        List&lt;User&gt; users = userService.listByIds(ids);</span><br><span class="line">        <span class="comment">// 2.å¤„ç†vo</span></span><br><span class="line">        <span class="keyword">return</span> BeanUtil.copyToList(users, UserVO.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ä¸Šè¿°æ¥å£éƒ½ç›´æ¥åœ¨ controller å³å¯å®ç°ï¼Œæ— éœ€ç¼–å†™ä»»ä½• service ä»£ç ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><p>ä¸è¿‡ï¼Œä¸€äº›å¸¦æœ‰ä¸šåŠ¡é€»è¾‘çš„æ¥å£åˆ™éœ€è¦åœ¨ service ä¸­è‡ªå®šä¹‰å®ç°äº†ã€‚ä¾‹å¦‚ä¸‹é¢çš„éœ€æ±‚ï¼š</p><ul><li>æ ¹æ® id æ‰£å‡ç”¨æˆ·ä½™é¢</li></ul><p>è¿™çœ‹èµ·æ¥æ˜¯ä¸ªç®€å•ä¿®æ”¹åŠŸèƒ½ï¼Œåªè¦ä¿®æ”¹ç”¨æˆ·ä½™é¢å³å¯ã€‚ä½†è¿™ä¸ªä¸šåŠ¡åŒ…å«ä¸€äº›ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼š</p><ul><li>åˆ¤æ–­ç”¨æˆ·çŠ¶æ€æ˜¯å¦æ­£å¸¸</li><li>åˆ¤æ–­ç”¨æˆ·ä½™é¢æ˜¯å¦å……è¶³</li></ul><p>è¿™äº›ä¸šåŠ¡é€»è¾‘éƒ½è¦åœ¨ service å±‚æ¥åšï¼Œå¦å¤–æ›´æ–°ä½™é¢éœ€è¦è‡ªå®šä¹‰ SQLï¼Œè¦åœ¨ mapper ä¸­æ¥å®ç°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é™¤äº†è¦ç¼–å†™ controller ä»¥å¤–ï¼Œå…·ä½“çš„ä¸šåŠ¡è¿˜è¦åœ¨ service å’Œ mapper ä¸­ç¼–å†™ã€‚</p><p>é¦–å…ˆåœ¨ UserController ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PutMapping(&quot;&#123;id&#125;/deduction/&#123;money&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ‰£å‡ç”¨æˆ·ä½™é¢&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deductBalance</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id, <span class="meta">@PathVariable(&quot;money&quot;)</span>Integer money)</span>&#123;</span><br><span class="line">    userService.deductBalance(id, money);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæ˜¯ UserService æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deductBalance</span><span class="params">(Long id, Integer money)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åæ˜¯ UserServiceImpl å®ç°ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.service.IUserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deductBalance</span><span class="params">(Long id, Integer money)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> getById(id);</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­ç”¨æˆ·çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span> || user.getStatus() == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·çŠ¶æ€å¼‚å¸¸&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3.åˆ¤æ–­ç”¨æˆ·ä½™é¢</span></span><br><span class="line">        <span class="keyword">if</span> (user.getBalance() &lt; money) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·ä½™é¢ä¸è¶³&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.æ‰£å‡ä½™é¢</span></span><br><span class="line">        baseMapper.deductMoneyById(id, money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åæ˜¯ mapperï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Update(&quot;UPDATE user SET balance = balance - #&#123;money&#125; WHERE id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deductMoneyById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Long id, <span class="meta">@Param(&quot;money&quot;)</span> Integer money)</span>;</span><br></pre></td></tr></table></figure><h3 id="2-3-3-Lambda"><a href="#2-3-3-Lambda" class="headerlink" title="2.3.3 Lambda"></a><strong>2.3.3 Lambda</strong></h3><p>IService ä¸­è¿˜æä¾›äº† Lambda åŠŸèƒ½æ¥ç®€åŒ–æˆ‘ä»¬çš„å¤æ‚æŸ¥è¯¢åŠæ›´æ–°åŠŸèƒ½ã€‚æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹æ¥å­¦ä¹ ä¸€ä¸‹ã€‚</p><p>æ¡ˆä¾‹ä¸€ï¼šå®ç°ä¸€ä¸ªæ ¹æ®å¤æ‚æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·çš„æ¥å£ï¼ŒæŸ¥è¯¢æ¡ä»¶å¦‚ä¸‹ï¼š</p><ul><li>nameï¼šç”¨æˆ·åå…³é”®å­—ï¼Œå¯ä»¥ä¸ºç©º</li><li>statusï¼šç”¨æˆ·çŠ¶æ€ï¼Œå¯ä»¥ä¸ºç©º</li><li>minBalanceï¼šæœ€å°ä½™é¢ï¼Œå¯ä»¥ä¸ºç©º</li><li>maxBalanceï¼šæœ€å¤§ä½™é¢ï¼Œå¯ä»¥ä¸ºç©º</li></ul><p>å¯ä»¥ç†è§£æˆä¸€ä¸ªç”¨æˆ·çš„åå°ç®¡ç†ç•Œé¢ï¼Œç®¡ç†å‘˜å¯ä»¥è‡ªå·±é€‰æ‹©æ¡ä»¶æ¥ç­›é€‰ç”¨æˆ·ï¼Œå› æ­¤ä¸Šè¿°æ¡ä»¶ä¸ä¸€å®šå­˜åœ¨ï¼Œéœ€è¦åšåˆ¤æ–­ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆéœ€è¦å®šä¹‰ä¸€ä¸ªæŸ¥è¯¢æ¡ä»¶å®ä½“ï¼ŒUserQuery å®ä½“ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;ç”¨æˆ·æŸ¥è¯¢æ¡ä»¶å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserQuery</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·åå…³é”®å­—&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ2-å†»ç»“&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ä½™é¢æœ€å°å€¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer minBalance;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ä½™é¢æœ€å¤§å€¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer maxBalance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ UserController ä¸­å®šä¹‰ä¸€ä¸ª controller æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ ¹æ®idé›†åˆæŸ¥è¯¢ç”¨æˆ·&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;UserVO&gt; <span class="title function_">queryUsers</span><span class="params">(UserQuery query)</span>&#123;</span><br><span class="line">    <span class="comment">// 1.ç»„ç»‡æ¡ä»¶</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> query.getName();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">status</span> <span class="operator">=</span> query.getStatus();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">minBalance</span> <span class="operator">=</span> query.getMinBalance();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">maxBalance</span> <span class="operator">=</span> query.getMaxBalance();</span><br><span class="line">    LambdaQueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().lambda()</span><br><span class="line">            .like(username != <span class="literal">null</span>, User::getUsername, username)</span><br><span class="line">            .eq(status != <span class="literal">null</span>, User::getStatus, status)</span><br><span class="line">            .ge(minBalance != <span class="literal">null</span>, User::getBalance, minBalance)</span><br><span class="line">            .le(maxBalance != <span class="literal">null</span>, User::getBalance, maxBalance);</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    List&lt;User&gt; users = userService.list(wrapper);</span><br><span class="line">    <span class="comment">// 3.å¤„ç†vo</span></span><br><span class="line">    <span class="keyword">return</span> BeanUtil.copyToList(users, UserVO.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç»„ç»‡æŸ¥è¯¢æ¡ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬åŠ å…¥äº†  <code>username != null</code>  è¿™æ ·çš„å‚æ•°ï¼Œæ„æ€å°±æ˜¯å½“æ¡ä»¶æˆç«‹æ—¶æ‰ä¼šæ·»åŠ è¿™ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼ Mybatis çš„ mapper.xml æ–‡ä»¶ä¸­çš„ <code>&lt;if&gt;</code> æ ‡ç­¾ã€‚è¿™æ ·å°±å®ç°äº†åŠ¨æ€æŸ¥è¯¢æ¡ä»¶æ•ˆæœäº†ã€‚</p><p>ä¸è¿‡ï¼Œä¸Šè¿°æ¡ä»¶æ„å»ºçš„ä»£ç å¤ªéº»çƒ¦äº†ã€‚ å› æ­¤ Service ä¸­å¯¹  <code>LambdaQueryWrapper</code>  å’Œ  <code>LambdaUpdateWrapper</code>  çš„ç”¨æ³•è¿›ä¸€æ­¥åšäº†ç®€åŒ–ã€‚æˆ‘ä»¬æ— éœ€è‡ªå·±é€šè¿‡ <code>new</code> çš„æ–¹å¼æ¥åˆ›å»º  <code>Wrapper</code> ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ <code>lambdaQuery </code> å’Œ <code>lambdaUpdate</code> æ–¹æ³•ï¼š</p><p>åŸºäº Lambda æŸ¥è¯¢ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ ¹æ®idé›†åˆæŸ¥è¯¢ç”¨æˆ·&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;UserVO&gt; <span class="title function_">queryUsers</span><span class="params">(UserQuery query)</span>&#123;</span><br><span class="line">    <span class="comment">// 1.ç»„ç»‡æ¡ä»¶</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> query.getName();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">status</span> <span class="operator">=</span> query.getStatus();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">minBalance</span> <span class="operator">=</span> query.getMinBalance();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">maxBalance</span> <span class="operator">=</span> query.getMaxBalance();</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    List&lt;User&gt; users = userService.lambdaQuery()</span><br><span class="line">            .like(username != <span class="literal">null</span>, User::getUsername, username)</span><br><span class="line">            .eq(status != <span class="literal">null</span>, User::getStatus, status)</span><br><span class="line">            .ge(minBalance != <span class="literal">null</span>, User::getBalance, minBalance)</span><br><span class="line">            .le(maxBalance != <span class="literal">null</span>, User::getBalance, maxBalance)</span><br><span class="line">            .list();</span><br><span class="line">    <span class="comment">// 3.å¤„ç†vo</span></span><br><span class="line">    <span class="keyword">return</span> BeanUtil.copyToList(users, UserVO.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç° lambdaQuery æ–¹æ³•ä¸­é™¤äº†å¯ä»¥æ„å»ºæ¡ä»¶ï¼Œè¿˜éœ€è¦åœ¨é“¾å¼ç¼–ç¨‹çš„æœ€åæ·»åŠ ä¸€ä¸ª <code>list()</code> ï¼Œè¿™æ˜¯åœ¨å‘Šè¯‰ MP æˆ‘ä»¬çš„è°ƒç”¨ç»“æœéœ€è¦æ˜¯ä¸€ä¸ª list é›†åˆã€‚è¿™é‡Œä¸ä»…å¯ä»¥ç”¨ <code>list()</code> ï¼Œå¯é€‰çš„æ–¹æ³•æœ‰ï¼š</p><ul><li><code>.one()</code>ï¼šæœ€å¤š1ä¸ªç»“æœ</li><li><code>.list()</code>ï¼šè¿”å›é›†åˆç»“æœ</li><li><code>.count()</code>ï¼šè¿”å›è®¡æ•°ç»“æœ</li></ul><p>MybatisPlus ä¼šæ ¹æ®é“¾å¼ç¼–ç¨‹çš„æœ€åä¸€ä¸ªæ–¹æ³•æ¥åˆ¤æ–­æœ€ç»ˆçš„è¿”å›ç»“æœã€‚</p><p>ä¸ lambdaQuery æ–¹æ³•ç±»ä¼¼ï¼Œ IService ä¸­çš„ lambdaUpdate æ–¹æ³•å¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°å¤æ‚æ›´æ–°ä¸šåŠ¡ã€‚</p><p>ä¾‹å¦‚ä¸‹é¢çš„éœ€æ±‚ï¼š</p><blockquote><p>éœ€æ±‚ï¼šæ”¹é€ æ ¹æ® id ä¿®æ”¹ç”¨æˆ·ä½™é¢çš„æ¥å£ï¼Œè¦æ±‚å¦‚ä¸‹</p><ul><li>å¦‚æœæ‰£å‡åä½™é¢ä¸º 0ï¼Œåˆ™å°†ç”¨æˆ· status ä¿®æ”¹ä¸ºå†»ç»“çŠ¶æ€ï¼ˆ2ï¼‰</li></ul></blockquote><p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨æ‰£å‡ç”¨æˆ·ä½™é¢æ—¶ï¼Œéœ€è¦å¯¹ç”¨æˆ·å‰©ä½™ä½™é¢åšå‡ºåˆ¤æ–­ï¼Œå¦‚æœå‘ç°å‰©ä½™ä½™é¢ä¸º 0ï¼Œåˆ™åº”è¯¥å°† status ä¿®æ”¹ä¸º 2ï¼Œè¿™å°±æ˜¯è¯´ update è¯­å¥çš„ set éƒ¨åˆ†æ˜¯åŠ¨æ€çš„ã€‚</p><p>å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deductBalance</span><span class="params">(Long id, Integer money)</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> getById(id);</span><br><span class="line">    <span class="comment">// 2.æ ¡éªŒç”¨æˆ·çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">if</span> (user == <span class="literal">null</span> || user.getStatus() == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·çŠ¶æ€å¼‚å¸¸ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3.æ ¡éªŒä½™é¢æ˜¯å¦å……è¶³</span></span><br><span class="line">    <span class="keyword">if</span> (user.getBalance() &lt; money) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·ä½™é¢ä¸è¶³ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4.æ‰£å‡ä½™é¢ update tb_user set balance = balance - ?</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">remainBalance</span> <span class="operator">=</span> user.getBalance() - money;</span><br><span class="line">    lambdaUpdate()</span><br><span class="line">            .set(User::getBalance, remainBalance) <span class="comment">// æ›´æ–°ä½™é¢</span></span><br><span class="line">            .set(remainBalance == <span class="number">0</span>, User::getStatus, <span class="number">2</span>) <span class="comment">// åŠ¨æ€åˆ¤æ–­ï¼Œæ˜¯å¦æ›´æ–°status</span></span><br><span class="line">            .eq(User::getId, id)</span><br><span class="line">            .eq(User::getBalance, user.getBalance()) <span class="comment">// ä¹è§‚é”</span></span><br><span class="line">            .update();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-4-æ‰¹é‡æ–°å¢"><a href="#2-3-4-æ‰¹é‡æ–°å¢" class="headerlink" title="2.3.4 æ‰¹é‡æ–°å¢"></a><strong>2.3.4 æ‰¹é‡æ–°å¢</strong></h3><p>å†è¯•è¯• MybatisPlus çš„æ‰¹å¤„ç†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSaveBatch</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// å‡†å¤‡10ä¸‡æ¡æ•°æ®</span></span><br><span class="line">    List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">1000</span>);</span><br><span class="line">    <span class="type">long</span> <span class="variable">b</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">100000</span>; i++) &#123;</span><br><span class="line">        list.add(buildUser(i));</span><br><span class="line">        <span class="comment">// æ¯1000æ¡æ‰¹é‡æ’å…¥ä¸€æ¬¡</span></span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">1000</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            userService.saveBatch(list);</span><br><span class="line">            list.clear();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="variable">e</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;è€—æ—¶ï¼š&quot;</span> + (e - b));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨äº†æ‰¹å¤„ç†ä»¥åï¼Œæ¯”é€æ¡æ–°å¢æ•ˆç‡æé«˜äº† 10 å€å·¦å³ï¼Œæ€§èƒ½è¿˜æ˜¯ä¸é”™çš„ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘ä»¬ç®€å•æŸ¥çœ‹ä¸€ä¸‹ <code>MybatisPlus</code> æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sqlStatement</span> <span class="operator">=</span> getSqlStatement(SqlMethod.INSERT_ONE);</span><br><span class="line">    <span class="keyword">return</span> executeBatch(entityList, batchSize, (sqlSession, entity) -&gt; sqlSession.insert(sqlStatement, entity));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...SqlHelper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; <span class="type">boolean</span> <span class="title function_">executeBatch</span><span class="params">(Class&lt;?&gt; entityClass, Log log, Collection&lt;E&gt; list, <span class="type">int</span> batchSize, BiConsumer&lt;SqlSession, E&gt; consumer)</span> &#123;</span><br><span class="line">    Assert.isFalse(batchSize &lt; <span class="number">1</span>, <span class="string">&quot;batchSize must not be less than one&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> !CollectionUtils.isEmpty(list) &amp;&amp; executeBatch(entityClass, log, sqlSession -&gt; &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> list.size();</span><br><span class="line">        <span class="type">int</span> <span class="variable">idxLimit</span> <span class="operator">=</span> Math.min(batchSize, size);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (E element : list) &#123;</span><br><span class="line">            consumer.accept(sqlSession, element);</span><br><span class="line">            <span class="keyword">if</span> (i == idxLimit) &#123;</span><br><span class="line">                sqlSession.flushStatements();</span><br><span class="line">                idxLimit = Math.min(idxLimit + batchSize, size);</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°å…¶å® <code>MybatisPlus</code> çš„æ‰¹å¤„ç†æ˜¯åŸºäº <code>PrepareStatement</code> çš„é¢„ç¼–è¯‘æ¨¡å¼ï¼Œç„¶åæ‰¹é‡æäº¤ï¼Œæœ€ç»ˆåœ¨æ•°æ®åº“æ‰§è¡Œæ—¶è¿˜æ˜¯ä¼šæœ‰å¤šæ¡ insert è¯­å¥ï¼Œé€æ¡æ’å…¥æ•°æ®ã€‚</p><p>MySQL çš„å®¢æˆ·ç«¯è¿æ¥å‚æ•°ä¸­æœ‰è¿™æ ·çš„ä¸€ä¸ªå‚æ•°ï¼š <code>rewriteBatchedStatements</code> ã€‚é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯é‡å†™æ‰¹å¤„ç†çš„ <code>statement</code> è¯­å¥ã€‚</p><p>è¿™ä¸ªå‚æ•°çš„é»˜è®¤å€¼æ˜¯ falseï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹è¿æ¥å‚æ•°ï¼Œå°†å…¶é…ç½®ä¸º true</p><p>ä¿®æ”¹é¡¹ç›®ä¸­çš„ application.yml æ–‡ä»¶ï¼Œåœ¨ jdbc çš„ url åé¢æ·»åŠ å‚æ•°<code>&amp;rewriteBatchedStatements=true</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai&amp;rewriteBatchedStatements=true</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">MySQL123</span></span><br></pre></td></tr></table></figure><h1 id="3-æ‰©å±•åŠŸèƒ½"><a href="#3-æ‰©å±•åŠŸèƒ½" class="headerlink" title="3. æ‰©å±•åŠŸèƒ½"></a><strong>3. æ‰©å±•åŠŸèƒ½</strong></h1><h2 id="3-1-ä»£ç ç”Ÿæˆ"><a href="#3-1-ä»£ç ç”Ÿæˆ" class="headerlink" title="3.1 ä»£ç ç”Ÿæˆ"></a><strong>3.1 ä»£ç ç”Ÿæˆ</strong></h2><p>åœ¨ä½¿ç”¨ MybatisPlus ä»¥åï¼ŒåŸºç¡€çš„ <code>Mapper</code>ã€<code>Service</code>ã€<code>PO</code> ä»£ç ç›¸å¯¹å›ºå®šï¼Œé‡å¤ç¼–å†™ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚å› æ­¤ MybatisPlus å®˜æ–¹æä¾›äº†ä»£ç ç”Ÿæˆå™¨æ ¹æ®æ•°æ®åº“è¡¨ç»“æ„ç”Ÿæˆ <code>PO</code>ã€<code>Mapper</code>ã€<code>Service</code> ç­‰ç›¸å…³ä»£ç ã€‚åªä¸è¿‡ä»£ç ç”Ÿæˆå™¨åŒæ ·è¦ç¼–ç ä½¿ç”¨ï¼Œä¹Ÿå¾ˆéº»çƒ¦ã€‚</p><p>è¿™é‡Œæ¨èå¤§å®¶ä½¿ç”¨ä¸€æ¬¾ <code>MybatisPlus</code> çš„æ’ä»¶ï¼Œå®ƒå¯ä»¥åŸºäºå›¾å½¢åŒ–ç•Œé¢å®Œæˆ <code>MybatisPlus</code> çš„ä»£ç ç”Ÿæˆï¼Œéå¸¸ç®€å•ã€‚</p><h2 id="3-2-é™æ€å·¥å…·"><a href="#3-2-é™æ€å·¥å…·" class="headerlink" title="3.2 é™æ€å·¥å…·"></a><strong>3.2 é™æ€å·¥å…·</strong></h2><p>æœ‰çš„æ—¶å€™ Service ä¹‹é—´ä¹Ÿä¼šç›¸äº’è°ƒç”¨ï¼Œä¸ºäº†é¿å…å‡ºç°å¾ªç¯ä¾èµ–é—®é¢˜ï¼ŒMybatisPlus æä¾›ä¸€ä¸ªé™æ€å·¥å…·ç±»ï¼š <code>Db</code> ï¼Œå…¶ä¸­çš„ä¸€äº›é™æ€æ–¹æ³•ä¸ <code>IService</code> ä¸­æ–¹æ³•ç­¾ååŸºæœ¬ä¸€è‡´ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç° CRUD åŠŸèƒ½ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/fe9a9a2a1aeb4141d104f7329e5ccd88645325325.png" alt="img"></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDbGet</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> Db.getById(<span class="number">1L</span>, User.class);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDbList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ©ç”¨Dbå®ç°å¤æ‚æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line">    List&lt;User&gt; list = Db.lambdaQuery(User.class)</span><br><span class="line">            .like(User::getUsername, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">            .ge(User::getBalance, <span class="number">1000</span>)</span><br><span class="line">            .list();</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDbUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">    Db.lambdaUpdate(User.class)</span><br><span class="line">            .set(User::getBalance, <span class="number">2000</span>)</span><br><span class="line">            .eq(User::getUsername, <span class="string">&quot;Rose&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éœ€æ±‚ï¼šæ”¹é€ æ ¹æ® id ç”¨æˆ·æŸ¥è¯¢çš„æ¥å£ï¼ŒæŸ¥è¯¢ç”¨æˆ·çš„åŒæ—¶è¿”å›ç”¨æˆ·æ”¶è´§åœ°å€åˆ—è¡¨</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªæ”¶è´§åœ°å€çš„ VO å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;æ”¶è´§åœ°å€VO&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddressVO</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long userId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;çœ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;å¸‚&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;å¿/åŒº&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String town;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;æ‰‹æœº&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;è¯¦ç»†åœ°å€&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String street;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;è”ç³»äºº&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String contact;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;æ˜¯å¦æ˜¯é»˜è®¤ 1é»˜è®¤ 0å¦&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean isDefault;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;å¤‡æ³¨&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String notes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæ”¹é€ åŸæ¥çš„ UserVOï¼Œæ·»åŠ ä¸€ä¸ªåœ°å€å±æ€§ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/4b30d0a2ff33b4bfa191535a37d80ba4645325325.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œä¿®æ”¹ UserController ä¸­æ ¹æ® id æŸ¥è¯¢ç”¨æˆ·çš„ä¸šåŠ¡æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·&quot;)</span></span><br><span class="line"><span class="keyword">public</span> UserVO <span class="title function_">queryUserById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long userId)</span>&#123;</span><br><span class="line">    <span class="comment">// åŸºäºè‡ªå®šä¹‰serviceæ–¹æ³•æŸ¥è¯¢</span></span><br><span class="line">    <span class="keyword">return</span> userService.queryUserAndAddressById(userId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºæŸ¥è¯¢ä¸šåŠ¡å¤æ‚ï¼Œæ‰€ä»¥è¦åœ¨ service å±‚æ¥å®ç°ã€‚é¦–å…ˆåœ¨ IUserService ä¸­å®šä¹‰æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.po.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.vo.UserVO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deduct</span><span class="params">(Long id, Integer money)</span>;</span><br><span class="line"></span><br><span class="line">    UserVO <span class="title function_">queryUserAndAddressById</span><span class="params">(Long userId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨ UserServiceImpl ä¸­å®ç°è¯¥æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> UserVO <span class="title function_">queryUserAndAddressById</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> getById(userId);</span><br><span class="line">    <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢æ”¶è´§åœ°å€</span></span><br><span class="line">    List&lt;Address&gt; addresses = Db.lambdaQuery(Address.class)</span><br><span class="line">            .eq(Address::getUserId, userId)</span><br><span class="line">            .list();</span><br><span class="line">    <span class="comment">// 3.å¤„ç†vo</span></span><br><span class="line">    <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> BeanUtil.copyProperties(user, UserVO.class);</span><br><span class="line">    userVO.setAddresses(BeanUtil.copyToList(addresses, AddressVO.class));</span><br><span class="line">    <span class="keyword">return</span> userVO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æŸ¥è¯¢åœ°å€æ—¶ï¼Œæˆ‘ä»¬é‡‡ç”¨äº† Db çš„é™æ€æ–¹æ³•ï¼Œå› æ­¤é¿å…äº†æ³¨å…¥ AddressServiceï¼Œå‡å°‘äº†å¾ªç¯ä¾èµ–çš„é£é™©ã€‚</p><h2 id="3-3-é€»è¾‘åˆ é™¤"><a href="#3-3-é€»è¾‘åˆ é™¤" class="headerlink" title="3.3 é€»è¾‘åˆ é™¤"></a><strong>3.3 é€»è¾‘åˆ é™¤</strong></h2><p>å¯¹äºä¸€äº›æ¯”è¾ƒé‡è¦çš„æ•°æ®ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šé‡‡ç”¨é€»è¾‘åˆ é™¤çš„æ–¹æ¡ˆï¼Œå³ï¼š</p><ul><li>åœ¨è¡¨ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µæ ‡è®°æ•°æ®æ˜¯å¦è¢«åˆ é™¤</li><li>å½“åˆ é™¤æ•°æ®æ—¶æŠŠæ ‡è®°ç½®ä¸º true</li><li>æŸ¥è¯¢æ—¶è¿‡æ»¤æ‰æ ‡è®°ä¸º true çš„æ•°æ®</li></ul><p>ä¸€æ—¦é‡‡ç”¨äº†é€»è¾‘åˆ é™¤ï¼Œæ‰€æœ‰çš„æŸ¥è¯¢å’Œåˆ é™¤é€»è¾‘éƒ½è¦è·Ÿç€å˜åŒ–ï¼Œéå¸¸éº»çƒ¦ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒMybatisPlus å°±æ·»åŠ äº†å¯¹é€»è¾‘åˆ é™¤çš„æ”¯æŒã€‚</p><p><strong>æ³¨æ„</strong>ï¼Œåªæœ‰ MybatisPlus ç”Ÿæˆçš„ SQL è¯­å¥æ‰æ”¯æŒè‡ªåŠ¨çš„é€»è¾‘åˆ é™¤ï¼Œè‡ªå®šä¹‰ SQL éœ€è¦è‡ªå·±æ‰‹åŠ¨å¤„ç†é€»è¾‘åˆ é™¤ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç»™ <code>address</code> è¡¨æ·»åŠ ä¸€ä¸ªé€»è¾‘åˆ é™¤å­—æ®µï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> address <span class="keyword">add</span> deleted bit <span class="keyword">default</span> b<span class="string">&#x27;0&#x27;</span> <span class="keyword">null</span> comment <span class="string">&#x27;é€»è¾‘åˆ é™¤&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ç„¶åç»™ <code>Address</code> å®ä½“æ·»åŠ  <code>deleted</code> å­—æ®µï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/cfc433d2efeb24305c3fee24f3b68638645325325.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åœ¨ <code>application.yml</code> ä¸­é…ç½®é€»è¾‘åˆ é™¤å­—æ®µï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">deleted</span> <span class="comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå(since 3.3.0,é…ç½®åå¯ä»¥å¿½ç•¥ä¸é…ç½®æ­¥éª¤2)</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š é¦–å…ˆï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªåˆ é™¤æ“ä½œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDeleteByLogic</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ é™¤æ–¹æ³•ä¸ä»¥å‰æ²¡æœ‰åŒºåˆ«</span></span><br><span class="line">    addressService.removeById(<span class="number">59L</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•ä¸æ™®é€šåˆ é™¤ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯åº•å±‚çš„SQLé€»è¾‘å˜äº†ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/90fd1a32a082d0e31f3b13f8455ae48a645325325.png" alt="img"></p><p>æŸ¥è¯¢ä¸€ä¸‹è¯•è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQuery</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;Address&gt; list = addressService.list();</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼šå‘ç°idä¸º59çš„ç¡®å®æ²¡æœ‰æŸ¥è¯¢å‡ºæ¥ï¼Œè€Œä¸”SQLä¸­ä¹Ÿå¯¹é€»è¾‘åˆ é™¤å­—æ®µåšäº†åˆ¤æ–­ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/7f72510ccb7e5bf81c4cbdaf0e465686645325325.png" alt="img"></p><p>ç»¼ä¸Šï¼Œ å¼€å¯äº†é€»è¾‘åˆ é™¤åŠŸèƒ½ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒæ™®é€šåˆ é™¤ä¸€æ ·åš CRUD ï¼ŒåŸºæœ¬ä¸ç”¨è€ƒè™‘ä»£ç é€»è¾‘é—®é¢˜ã€‚è¿˜æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚</p><p><strong>æ³¨æ„</strong>ï¼š é€»è¾‘åˆ é™¤æœ¬èº«ä¹Ÿæœ‰è‡ªå·±çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p><ul><li>ä¼šå¯¼è‡´æ•°æ®åº“è¡¨åƒåœ¾æ•°æ®è¶Šæ¥è¶Šå¤šï¼Œä»è€Œå½±å“æŸ¥è¯¢æ•ˆç‡</li><li>SQL ä¸­å…¨éƒ½éœ€è¦å¯¹é€»è¾‘åˆ é™¤å­—æ®µåšåˆ¤æ–­ï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡</li></ul><p>å› æ­¤ï¼Œæˆ‘ä¸å¤ªæ¨èé‡‡ç”¨é€»è¾‘åˆ é™¤åŠŸèƒ½ï¼Œå¦‚æœæ•°æ®ä¸èƒ½åˆ é™¤ï¼Œå¯ä»¥é‡‡ç”¨æŠŠæ•°æ®è¿ç§»åˆ°å…¶å®ƒè¡¨çš„åŠæ³•ã€‚</p><h2 id="3-3-é€šç”¨æšä¸¾"><a href="#3-3-é€šç”¨æšä¸¾" class="headerlink" title="3.3 é€šç”¨æšä¸¾"></a><strong>3.3 é€šç”¨æšä¸¾</strong></h2><p>User ç±»ä¸­æœ‰ä¸€ä¸ªç”¨æˆ·çŠ¶æ€å­—æ®µï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/e5e725a68a8127269ff02f6fd351ad99645325325.png" alt="img"></p><p>åƒè¿™ç§å­—æ®µæˆ‘ä»¬ä¸€èˆ¬ä¼šå®šä¹‰ä¸€ä¸ªæšä¸¾ï¼Œåšä¸šåŠ¡åˆ¤æ–­çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥åŸºäºæšä¸¾åšæ¯”è¾ƒã€‚ä½†æ˜¯æˆ‘ä»¬æ•°æ®åº“é‡‡ç”¨çš„æ˜¯ <code>int</code> ç±»å‹ï¼Œå¯¹åº”çš„POä¹Ÿæ˜¯ <code>Integer</code> ã€‚å› æ­¤ä¸šåŠ¡æ“ä½œæ—¶å¿…é¡»æ‰‹åŠ¨æŠŠ <code>æšä¸¾</code> ä¸ <code>Integer</code> è½¬æ¢ï¼Œéå¸¸éº»çƒ¦ã€‚</p><p>å› æ­¤ï¼ŒMybatisPlus æä¾›äº†ä¸€ä¸ªå¤„ç†æšä¸¾çš„ç±»å‹è½¬æ¢å™¨ï¼Œå¯ä»¥å¸®æˆ‘ä»¬<strong>æŠŠæšä¸¾ç±»å‹ä¸æ•°æ®åº“ç±»å‹è‡ªåŠ¨è½¬æ¢</strong>ã€‚</p><h3 id="3-3-1-å®šä¹‰æšä¸¾"><a href="#3-3-1-å®šä¹‰æšä¸¾" class="headerlink" title="3.3.1 å®šä¹‰æšä¸¾"></a><strong>3.3.1 å®šä¹‰æšä¸¾</strong></h3><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç”¨æˆ·çŠ¶æ€çš„æšä¸¾ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/5656c78242b92db82f007507eb595f3e645325325.png" alt="img"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.EnumValue;</span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">UserStatus</span> &#123;</span><br><span class="line">    NORMAL(<span class="number">1</span>, <span class="string">&quot;æ­£å¸¸&quot;</span>),</span><br><span class="line">    FREEZE(<span class="number">2</span>, <span class="string">&quot;å†»ç»“&quot;</span>)</span><br><span class="line">    ;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> value;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String desc;</span><br><span class="line"></span><br><span class="line">    UserStatus(<span class="type">int</span> value, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæŠŠ <code>User</code> ç±»ä¸­çš„ <code>status</code> å­—æ®µæ”¹ä¸º <code>UserStatus</code>  ç±»å‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/20bd888067095da7294b7125597524cb645325325.png" alt="img"></p><p>è¦è®© <code>MybatisPlus</code> å¤„ç†æšä¸¾ä¸æ•°æ®åº“ç±»å‹è‡ªåŠ¨è½¬æ¢ï¼Œæˆ‘ä»¬å¿…é¡»å‘Šè¯‰ <code>MybatisPlus</code> ï¼Œæšä¸¾ä¸­çš„å“ªä¸ªå­—æ®µçš„å€¼ä½œä¸ºæ•°æ®åº“å€¼ã€‚ <code>MybatisPlus</code> æä¾›äº† <code>@EnumValue</code> æ³¨è§£æ¥æ ‡è®°æšä¸¾å±æ€§ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/94467a2a29bc795dbfc9f1c2c3e044eb645325325.png" alt="img"></p><h3 id="3-3-2-é…ç½®æšä¸¾å¤„ç†å™¨"><a href="#3-3-2-é…ç½®æšä¸¾å¤„ç†å™¨" class="headerlink" title="3.3.2 é…ç½®æšä¸¾å¤„ç†å™¨"></a><strong>3.3.2 é…ç½®æšä¸¾å¤„ç†å™¨</strong></h3><p>åœ¨ application.yaml æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br></pre></td></tr></table></figure><h3 id="3-3-3-æµ‹è¯•"><a href="#3-3-3-æµ‹è¯•" class="headerlink" title="3.3.3 æµ‹è¯•"></a><strong>3.3.3 æµ‹è¯•</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testService</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;User&gt; list = userService.list();</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆï¼ŒæŸ¥è¯¢å‡ºçš„ <code>User</code> ç±»çš„ <code>status</code> å­—æ®µä¼šæ˜¯æšä¸¾ç±»å‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/cf70d49e02247ee6c944f6350fa13144645325325.png" alt="img"></p><p>åŒæ—¶ï¼Œä¸ºäº†ä½¿é¡µé¢æŸ¥è¯¢ç»“æœä¹Ÿæ˜¯æšä¸¾æ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ UserVO ä¸­çš„ status å±æ€§ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/d2b88642d4cea8da3b180a67997251c3645325325.png" alt="img"></p><p>å¹¶ä¸”ï¼Œåœ¨ UserStatus æšä¸¾ä¸­é€šè¿‡ <code>@JsonValue</code> æ³¨è§£æ ‡è®° JSON åºåˆ—åŒ–æ—¶å±•ç¤ºçš„å­—æ®µï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/5325b3d7a57f762dccb7592adba6c305645325325.png" alt="img"></p><p>æœ€åï¼Œåœ¨é¡µé¢æŸ¥è¯¢ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/ccb45e126313fd44bb8d8a56a6e658a9645325325.png" alt="img"></p><h2 id="3-4-JSONç±»å‹å¤„ç†å™¨"><a href="#3-4-JSONç±»å‹å¤„ç†å™¨" class="headerlink" title="3.4 JSONç±»å‹å¤„ç†å™¨"></a><strong>3.4 JSONç±»å‹å¤„ç†å™¨</strong></h2><p>æ•°æ®åº“çš„ user è¡¨ä¸­æœ‰ä¸€ä¸ª <code>info</code> å­—æ®µï¼Œæ˜¯ JSON ç±»å‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/fd1c4f4ff0397a51a15c7040048b8ae6645325325.png" alt="img"></p><p>æ ¼å¼åƒè¿™æ ·ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span> <span class="attr">&quot;intro&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½›ç³»é’å¹´&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;male&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è€Œç›®å‰ <code>User</code> å®ä½“ç±»ä¸­å´æ˜¯ <code>String</code> ç±»å‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/1d15c93540cb442a3f1a7081e74d950f645325325.png" alt="img"></p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬è¦è¯»å– info ä¸­çš„å±æ€§æ—¶å°±éå¸¸ä¸æ–¹ä¾¿ã€‚å¦‚æœè¦æ–¹ä¾¿è·å–ï¼Œinfo çš„ç±»å‹æœ€å¥½æ˜¯ä¸€ä¸ª <code>Map</code> æˆ–è€…å®ä½“ç±»ã€‚</p><p>è€Œä¸€æ—¦æˆ‘ä»¬æŠŠ <code>info </code>æ”¹ä¸º <code>å¯¹è±¡</code> ç±»å‹ï¼Œå°±éœ€è¦åœ¨å†™å…¥æ•°æ®åº“æ—¶æ‰‹åŠ¨è½¬ä¸º <code>String</code> ï¼Œå†è¯»å–æ•°æ®åº“æ—¶ï¼Œæ‰‹åŠ¨è½¬æ¢ä¸º <code>å¯¹è±¡</code> ï¼Œè¿™ä¼šéå¸¸éº»çƒ¦ã€‚</p><p>å› æ­¤ MybatisPlus æä¾›äº†å¾ˆå¤šç‰¹æ®Šç±»å‹å­—æ®µçš„ç±»å‹å¤„ç†å™¨ï¼Œè§£å†³ç‰¹æ®Šå­—æ®µç±»å‹ä¸æ•°æ®åº“ç±»å‹è½¬æ¢çš„é—®é¢˜ã€‚ä¾‹å¦‚å¤„ç† JSON å°±å¯ä»¥ä½¿ç”¨ <code>JacksonTypeHandler</code> å¤„ç†å™¨ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™ä¸ªå¤„ç†å™¨è¯¥å¦‚ä½•ä½¿ç”¨ã€‚</p><h3 id="3-4-1-å®šä¹‰å®ä½“"><a href="#3-4-1-å®šä¹‰å®ä½“" class="headerlink" title="3.4.1 å®šä¹‰å®ä½“"></a><strong>3.4.1 å®šä¹‰å®ä½“</strong></h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå•ç‹¬å®ä½“ç±»æ¥ä¸ info å­—æ®µçš„å±æ€§åŒ¹é…ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/ce9f1c2df159682a9cbb6373ea3d78d5645325325.png" alt="img"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.po;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserInfo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String intro;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-2-ä½¿ç”¨ç±»å‹å¤„ç†å™¨"><a href="#3-4-2-ä½¿ç”¨ç±»å‹å¤„ç†å™¨" class="headerlink" title="3.4.2 ä½¿ç”¨ç±»å‹å¤„ç†å™¨"></a><strong>3.4.2 ä½¿ç”¨ç±»å‹å¤„ç†å™¨</strong></h3><p>æ¥ä¸‹æ¥ï¼Œå°† User ç±»çš„ info å­—æ®µä¿®æ”¹ä¸º UserInfo ç±»å‹ï¼Œå¹¶å£°æ˜ç±»å‹å¤„ç†å™¨ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/987bb9313e449a6a45fb8bafc3e2e669645325325.png" alt="img"></p><p>æµ‹è¯•å¯ä»¥å‘ç°ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ­£ç¡®å°è£…åˆ° UserInfo å½“ä¸­äº†ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/f2da69b1573c55e614bd91af775ec1ca645325325.png" alt="img"></p><p>åŒæ—¶ï¼Œä¸ºäº†è®©é¡µé¢è¿”å›çš„ç»“æœä¹Ÿä»¥å¯¹è±¡æ ¼å¼è¿”å›ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹ UserVO ä¸­çš„ info å­—æ®µï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/c0df955c4b881feb98ee469612e59480645325325.png" alt="img"></p><p>æ­¤æ—¶ï¼Œåœ¨é¡µé¢æŸ¥è¯¢ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/3f9e1e417112c7cd1cad4c27e7a2cb8e645325325.png" alt="img"></p><h1 id="4-æ’ä»¶åŠŸèƒ½"><a href="#4-æ’ä»¶åŠŸèƒ½" class="headerlink" title="4. æ’ä»¶åŠŸèƒ½"></a>4. æ’ä»¶åŠŸèƒ½</h1><p>MybatisPlus æä¾›äº†å¾ˆå¤šçš„æ’ä»¶åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥æ‹“å±•å…¶åŠŸèƒ½ã€‚ç›®å‰å·²æœ‰çš„æ’ä»¶æœ‰ï¼š</p><ul><li><code>PaginationInnerInterceptor</code>ï¼šè‡ªåŠ¨åˆ†é¡µ</li><li><code>TenantLineInnerInterceptor</code>ï¼šå¤šç§Ÿæˆ·</li><li><code>DynamicTableNameInnerInterceptor</code>ï¼šåŠ¨æ€è¡¨å</li><li><code>OptimisticLockerInnerInterceptor</code>ï¼šä¹è§‚é”</li><li><code>IllegalSQLInnerInterceptor</code>ï¼šsql æ€§èƒ½è§„èŒƒ</li><li><code>BlockAttackInnerInterceptor</code>ï¼šé˜²æ­¢å…¨è¡¨æ›´æ–°ä¸åˆ é™¤</li></ul><p><strong>æ³¨æ„ï¼š</strong> ä½¿ç”¨å¤šä¸ªåˆ†é¡µæ’ä»¶çš„æ—¶å€™éœ€è¦æ³¨æ„æ’ä»¶å®šä¹‰é¡ºåºï¼Œå»ºè®®ä½¿ç”¨é¡ºåºå¦‚ä¸‹ï¼š</p><ul><li>å¤šç§Ÿæˆ·ï¼ŒåŠ¨æ€è¡¨å</li><li>åˆ†é¡µï¼Œä¹è§‚é”</li><li>sql æ€§èƒ½è§„èŒƒï¼Œé˜²æ­¢å…¨è¡¨æ›´æ–°ä¸åˆ é™¤</li></ul><p>è¿™é‡Œæˆ‘ä»¬ä»¥åˆ†é¡µæ’ä»¶ä¸ºé‡Œæ¥å­¦ä¹ æ’ä»¶çš„ç”¨æ³•ã€‚</p><h2 id="4-1-åˆ†é¡µæ’ä»¶"><a href="#4-1-åˆ†é¡µæ’ä»¶" class="headerlink" title="4.1 åˆ†é¡µæ’ä»¶"></a><strong>4.1 åˆ†é¡µæ’ä»¶</strong></h2><p>åœ¨æœªå¼•å…¥åˆ†é¡µæ’ä»¶çš„æƒ…å†µä¸‹ï¼Œ<code>MybatisPlus</code> æ˜¯ä¸æ”¯æŒåˆ†é¡µåŠŸèƒ½çš„ï¼Œ <code>IService</code> å’Œ <code>BaseMapper</code> ä¸­çš„åˆ†é¡µæ–¹æ³•éƒ½æ— æ³•æ­£å¸¸èµ·æ•ˆã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»é…ç½®åˆ†é¡µæ’ä»¶ã€‚</p><h3 id="4-1-1-é…ç½®åˆ†é¡µæ’ä»¶"><a href="#4-1-1-é…ç½®åˆ†é¡µæ’ä»¶" class="headerlink" title="4.1.1 é…ç½®åˆ†é¡µæ’ä»¶"></a><strong>4.1.1 é…ç½®åˆ†é¡µæ’ä»¶</strong></h3><p>åœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ªé…ç½®ç±»ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/056e58ac0dbd415152662940613f3bdb645325325.png" alt="img"></p><p>å…¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æ ¸å¿ƒæ’ä»¶</span></span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">// æ·»åŠ åˆ†é¡µæ’ä»¶</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-1-2-åˆ†é¡µ-API"><a href="#4-1-2-åˆ†é¡µ-API" class="headerlink" title="4.1.2 åˆ†é¡µ API"></a><strong>4.1.2 åˆ†é¡µ API</strong></h3><p>ç¼–å†™ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢çš„æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testPageQuery</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.åˆ†é¡µæŸ¥è¯¢ï¼Œnew Page()çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼šé¡µç ã€æ¯é¡µå¤§å°</span></span><br><span class="line">    Page&lt;User&gt; p = userService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">2</span>, <span class="number">2</span>));</span><br><span class="line">    <span class="comment">// 2.æ€»æ¡æ•°</span></span><br><span class="line">    System.out.println(<span class="string">&quot;total = &quot;</span> + p.getTotal());</span><br><span class="line">    <span class="comment">// 3.æ€»é¡µæ•°</span></span><br><span class="line">    System.out.println(<span class="string">&quot;pages = &quot;</span> + p.getPages());</span><br><span class="line">    <span class="comment">// 4.æ•°æ®</span></span><br><span class="line">    List&lt;User&gt; records = p.getRecords();</span><br><span class="line">    records.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œçš„SQLå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/08c90fb72fdcb69efccaaa13f126f56d645325325.png" alt="img"></p><p>è¿™é‡Œç”¨åˆ°äº†åˆ†é¡µå‚æ•°ï¼ŒPageï¼Œå³å¯ä»¥æ”¯æŒåˆ†é¡µå‚æ•°ï¼Œä¹Ÿå¯ä»¥æ”¯æŒæ’åºå‚æ•°ã€‚å¸¸è§çš„ API å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">pageNo</span> <span class="operator">=</span> <span class="number">1</span>, pageSize = <span class="number">5</span>;</span><br><span class="line"><span class="comment">// åˆ†é¡µå‚æ•°</span></span><br><span class="line">Page&lt;User&gt; page = Page.of(pageNo, pageSize);</span><br><span class="line"><span class="comment">// æ’åºå‚æ•°, é€šè¿‡OrderItemæ¥æŒ‡å®š</span></span><br><span class="line">page.addOrder(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(<span class="string">&quot;balance&quot;</span>, <span class="literal">false</span>));</span><br><span class="line"></span><br><span class="line">userService.page(page);</span><br></pre></td></tr></table></figure><h2 id="4-2-é€šç”¨åˆ†é¡µå®ä½“"><a href="#4-2-é€šç”¨åˆ†é¡µå®ä½“" class="headerlink" title="4.2 é€šç”¨åˆ†é¡µå®ä½“"></a><strong>4.2 é€šç”¨åˆ†é¡µå®ä½“</strong></h2><p>ç°åœ¨è¦å®ç°ä¸€ä¸ªç”¨æˆ·åˆ†é¡µæŸ¥è¯¢çš„æ¥å£ï¼Œæ¥å£è§„èŒƒå¦‚ä¸‹ï¼š</p><table><thead><tr><th><strong>å‚æ•°</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>è¯·æ±‚æ–¹å¼</td><td>GET</td></tr><tr><td>è¯·æ±‚è·¯å¾„</td><td>&#x2F;users&#x2F;page</td></tr><tr><td>è¯·æ±‚å‚æ•°</td><td><code>&#123;    &quot;pageNo&quot;: 1,    &quot;pageSize&quot;: 5,    &quot;sortBy&quot;: &quot;balance&quot;,    &quot;isAsc&quot;: false,    &quot;name&quot;: &quot;o&quot;,    &quot;status&quot;: 1 &#125;</code></td></tr><tr><td>è¿”å›å€¼</td><td><code>&#123;    &quot;total&quot;: 100006,    &quot;pages&quot;: 50003,    &quot;list&quot;: [        &#123;            &quot;id&quot;: 1685100878975279298,            &quot;username&quot;: &quot;user_9****&quot;,            &quot;info&quot;: &#123;                &quot;age&quot;: 24,                &quot;intro&quot;: &quot;è‹±æ–‡è€å¸ˆ&quot;,                &quot;gender&quot;: &quot;female&quot;            &#125;,            &quot;status&quot;: &quot;æ­£å¸¸&quot;,            &quot;balance&quot;: 2000        &#125;    ] &#125;</code></td></tr><tr><td>ç‰¹æ®Šè¯´æ˜</td><td>å¦‚æœæ’åºå­—æ®µä¸ºç©ºï¼Œé»˜è®¤æŒ‰ç…§æ›´æ–°æ—¶é—´æ’åºæ’åºå­—æ®µä¸ä¸ºç©ºï¼Œåˆ™æŒ‰ç…§æ’åºå­—æ®µæ’åº</td></tr></tbody></table><p>è¿™é‡Œéœ€è¦å®šä¹‰ 3 ä¸ªå®ä½“ï¼š</p><ul><li><code>UserQuery</code>ï¼šåˆ†é¡µæŸ¥è¯¢æ¡ä»¶çš„å®ä½“ï¼ŒåŒ…å«åˆ†é¡µã€æ’åºå‚æ•°ã€è¿‡æ»¤æ¡ä»¶</li><li><code>PageDTO</code>ï¼šåˆ†é¡µç»“æœå®ä½“ï¼ŒåŒ…å«æ€»æ¡æ•°ã€æ€»é¡µæ•°ã€å½“å‰é¡µæ•°æ®</li><li><code>UserVO</code>ï¼šç”¨æˆ·é¡µé¢è§†å›¾å®ä½“</li></ul><h3 id="4-2-1-å®ä½“"><a href="#4-2-1-å®ä½“" class="headerlink" title="4.2.1 å®ä½“"></a><strong>4.2.1 å®ä½“</strong></h3><p>ç”±äº UserQuery ä¹‹å‰å·²ç»å®šä¹‰è¿‡äº†ï¼Œå¹¶ä¸”å…¶ä¸­å·²ç»åŒ…å«äº†è¿‡æ»¤æ¡ä»¶ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;ç”¨æˆ·æŸ¥è¯¢æ¡ä»¶å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserQuery</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·åå…³é”®å­—&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ2-å†»ç»“&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ä½™é¢æœ€å°å€¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer minBalance;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ä½™é¢æœ€å¤§å€¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer maxBalance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ç¼ºå°‘çš„ä»…ä»…æ˜¯åˆ†é¡µæ¡ä»¶ï¼Œè€Œåˆ†é¡µæ¡ä»¶ä¸ä»…ä»…ç”¨æˆ·åˆ†é¡µæŸ¥è¯¢éœ€è¦ï¼Œä»¥åå…¶å®ƒä¸šåŠ¡ä¹Ÿéƒ½æœ‰åˆ†é¡µæŸ¥è¯¢çš„éœ€æ±‚ã€‚å› æ­¤å»ºè®®å°†åˆ†é¡µæŸ¥è¯¢æ¡ä»¶å•ç‹¬å®šä¹‰ä¸ºä¸€ä¸ª <code>PageQuery</code> å®ä½“ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/9116162f2064a8cc9d7df82bcc427824645325325.png" alt="img"></p><p><code>PageQuery</code> æ˜¯å‰ç«¯æäº¤çš„æŸ¥è¯¢å‚æ•°ï¼Œä¸€èˆ¬åŒ…å«å››ä¸ªå±æ€§ï¼š</p><ul><li><code>pageNo</code>ï¼šé¡µç </li><li><code>pageSize</code>ï¼šæ¯é¡µæ•°æ®æ¡æ•°</li><li><code>sortBy</code>ï¼šæ’åºå­—æ®µ</li><li><code>isAsc</code>ï¼šæ˜¯å¦å‡åº</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;åˆ†é¡µæŸ¥è¯¢å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageQuery</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;é¡µç &quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer pageNo;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;é¡µç &quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer pageSize;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;æ’åºå­—æ®µ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sortBy;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;æ˜¯å¦å‡åº&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean isAsc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œè®©æˆ‘ä»¬çš„UserQueryç»§æ‰¿è¿™ä¸ªå®ä½“ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = true)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;ç”¨æˆ·æŸ¥è¯¢æ¡ä»¶å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserQuery</span> <span class="keyword">extends</span> <span class="title class_">PageQuery</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·åå…³é”®å­—&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ2-å†»ç»“&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ä½™é¢æœ€å°å€¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer minBalance;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ä½™é¢æœ€å¤§å€¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer maxBalance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿”å›å€¼çš„ç”¨æˆ·å®ä½“æ²¿ç”¨ä¹‹å‰å®šä¸€ä¸ª <code>UserVO</code> å®ä½“ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/08e32a5796145c2b4aa21767e8334953645325325.png" alt="img"></p><p>æœ€åï¼Œåˆ™æ˜¯åˆ†é¡µå®ä½“ PageDTO :</p><p><img src="https://i0.hdslb.com/bfs/article/583247ca7fd04f092635dac6e775d9db645325325.png" alt="img"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;åˆ†é¡µç»“æœ&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageDTO</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;æ€»æ¡æ•°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long total;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;æ€»é¡µæ•°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long pages;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;é›†åˆ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;T&gt; list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2-2-å¼€å‘æ¥å£"><a href="#4-2-2-å¼€å‘æ¥å£" class="headerlink" title="4.2.2 å¼€å‘æ¥å£"></a><strong>4.2.2 å¼€å‘æ¥å£</strong></h3><p>æˆ‘ä»¬åœ¨ <code>UserController</code> ä¸­å®šä¹‰åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·çš„æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.dto.PageDTO;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.query.PageQuery;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.domain.vo.UserVO;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mp.service.UserService;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;users&quot;)</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> PageDTO&lt;UserVO&gt; <span class="title function_">queryUsersPage</span><span class="params">(UserQuery query)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.queryUsersPage(query);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ã€‚ã€‚ã€‚ ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>IUserService</code> ä¸­åˆ›å»º <code>queryUsersPage</code> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PageDTO&lt;UserVO&gt; <span class="title function_">queryUsersPage</span><span class="params">(PageQuery query)</span>;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œåœ¨ UserServiceImpl ä¸­å®ç°è¯¥æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> PageDTO&lt;UserVO&gt; <span class="title function_">queryUsersPage</span><span class="params">(PageQuery query)</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæ¡ä»¶</span></span><br><span class="line">    <span class="comment">// 1.1.åˆ†é¡µæ¡ä»¶</span></span><br><span class="line">    Page&lt;User&gt; page = Page.of(query.getPageNo(), query.getPageSize());</span><br><span class="line">    <span class="comment">// 1.2.æ’åºæ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (query.getSortBy() != <span class="literal">null</span>) &#123;</span><br><span class="line">        page.addOrder(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(query.getSortBy(), query.getIsAsc()));</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// é»˜è®¤æŒ‰ç…§æ›´æ–°æ—¶é—´æ’åº</span></span><br><span class="line">        page.addOrder(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(<span class="string">&quot;update_time&quot;</span>, <span class="literal">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢</span></span><br><span class="line">    page(page);</span><br><span class="line">    <span class="comment">// 3.æ•°æ®éç©ºæ ¡éªŒ</span></span><br><span class="line">    List&lt;User&gt; records = page.getRecords();</span><br><span class="line">    <span class="keyword">if</span> (records == <span class="literal">null</span> || records.size() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// æ— æ•°æ®ï¼Œè¿”å›ç©ºç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(page.getTotal(), page.getPages(), Collections.emptyList());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4.æœ‰æ•°æ®ï¼Œè½¬æ¢</span></span><br><span class="line">    List&lt;UserVO&gt; list = BeanUtil.copyToList(records, UserVO.class);</span><br><span class="line">    <span class="comment">// 5.å°è£…è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;UserVO&gt;(page.getTotal(), page.getPages(), list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨é¡¹ç›®ï¼Œåœ¨é¡µé¢æŸ¥çœ‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/1553ff22ef4e097186845bbb7ce4f0d8645325325.png" alt="img"></p><h3 id="4-2-3-æ”¹é€ -PageQuery-å®ä½“"><a href="#4-2-3-æ”¹é€ -PageQuery-å®ä½“" class="headerlink" title="4.2.3 æ”¹é€  PageQuery å®ä½“"></a><strong>4.2.3 æ”¹é€  PageQuery å®ä½“</strong></h3><p>åœ¨åˆšæ‰çš„ä»£ç ä¸­ï¼Œä» <code>PageQuery</code> åˆ° <code>MybatisPlus</code> çš„ <code>Page</code> ä¹‹é—´è½¬æ¢çš„è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ã€‚</p><p>æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ <code>PageQuery</code> è¿™ä¸ªå®ä½“ä¸­å®šä¹‰ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œç®€åŒ–å¼€å‘ã€‚ åƒè¿™æ ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.query;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.OrderItem;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageQuery</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer pageNo;</span><br><span class="line">    <span class="keyword">private</span> Integer pageSize;</span><br><span class="line">    <span class="keyword">private</span> String sortBy;</span><br><span class="line">    <span class="keyword">private</span> Boolean isAsc;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt;  Page&lt;T&gt; <span class="title function_">toMpPage</span><span class="params">(OrderItem ... orders)</span>&#123;</span><br><span class="line">        <span class="comment">// 1.åˆ†é¡µæ¡ä»¶</span></span><br><span class="line">        Page&lt;T&gt; p = Page.of(pageNo, pageSize);</span><br><span class="line">        <span class="comment">// 2.æ’åºæ¡ä»¶</span></span><br><span class="line">        <span class="comment">// 2.1.å…ˆçœ‹å‰ç«¯æœ‰æ²¡æœ‰ä¼ æ’åºå­—æ®µ</span></span><br><span class="line">        <span class="keyword">if</span> (sortBy != <span class="literal">null</span>) &#123;</span><br><span class="line">            p.addOrder(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(sortBy, isAsc));</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.2.å†çœ‹æœ‰æ²¡æœ‰æ‰‹åŠ¨æŒ‡å®šæ’åºå­—æ®µ</span></span><br><span class="line">        <span class="keyword">if</span>(orders != <span class="literal">null</span>)&#123;</span><br><span class="line">            p.addOrder(orders);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="title function_">toMpPage</span><span class="params">(String defaultSortBy, <span class="type">boolean</span> isAsc)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.toMpPage(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(defaultSortBy, isAsc));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="title function_">toMpPageDefaultSortByCreateTimeDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> toMpPage(<span class="string">&quot;create_time&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="title function_">toMpPageDefaultSortByUpdateTimeDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> toMpPage(<span class="string">&quot;update_time&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬åœ¨å¼€å‘ä¹Ÿæ—¶å°±å¯ä»¥çœå»å¯¹ä» <code>PageQuery</code> åˆ° <code>Page</code> çš„çš„è½¬æ¢ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.æ„å»ºæ¡ä»¶</span></span><br><span class="line">Page&lt;User&gt; page = query.toMpPageDefaultSortByCreateTimeDesc();</span><br></pre></td></tr></table></figure><h3 id="4-2-4-æ”¹é€ -PageDTO-å®ä½“"><a href="#4-2-4-æ”¹é€ -PageDTO-å®ä½“" class="headerlink" title="4.2.4 æ”¹é€  PageDTO å®ä½“"></a><strong>4.2.4 æ”¹é€  PageDTO å®ä½“</strong></h3><p>åœ¨æŸ¥è¯¢å‡ºåˆ†é¡µç»“æœåï¼Œæ•°æ®çš„éç©ºæ ¡éªŒï¼Œæ•°æ®çš„ vo è½¬æ¢éƒ½æ˜¯æ¨¡æ¿ä»£ç ï¼Œç¼–å†™èµ·æ¥å¾ˆéº»çƒ¦ã€‚</p><p>æˆ‘ä»¬å®Œå…¨å¯ä»¥å°†å…¶å°è£…åˆ° PageDTO çš„å·¥å…·æ–¹æ³•ä¸­ï¼Œç®€åŒ–æ•´ä¸ªè¿‡ç¨‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mp.domain.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.bean.BeanUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Function;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageDTO</span>&lt;V&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Long total;</span><br><span class="line">    <span class="keyword">private</span> Long pages;</span><br><span class="line">    <span class="keyword">private</span> List&lt;V&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›ç©ºåˆ†é¡µç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> p MybatisPlusçš„åˆ†é¡µç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;V&gt; ç›®æ ‡VOç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;P&gt; åŸå§‹POç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> VOçš„åˆ†é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;V, P&gt; PageDTO&lt;V&gt; <span class="title function_">empty</span><span class="params">(Page&lt;P&gt; p)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(p.getTotal(), p.getPages(), Collections.emptyList());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†MybatisPlusåˆ†é¡µç»“æœè½¬ä¸º VOåˆ†é¡µç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> p MybatisPlusçš„åˆ†é¡µç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> voClass ç›®æ ‡VOç±»å‹çš„å­—èŠ‚ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;V&gt; ç›®æ ‡VOç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;P&gt; åŸå§‹POç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> VOçš„åˆ†é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;V, P&gt; PageDTO&lt;V&gt; <span class="title function_">of</span><span class="params">(Page&lt;P&gt; p, Class&lt;V&gt; voClass)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.éç©ºæ ¡éªŒ</span></span><br><span class="line">        List&lt;P&gt; records = p.getRecords();</span><br><span class="line">        <span class="keyword">if</span> (records == <span class="literal">null</span> || records.size() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ— æ•°æ®ï¼Œè¿”å›ç©ºç»“æœ</span></span><br><span class="line">            <span class="keyword">return</span> empty(p);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.æ•°æ®è½¬æ¢</span></span><br><span class="line">        List&lt;V&gt; vos = BeanUtil.copyToList(records, voClass);</span><br><span class="line">        <span class="comment">// 3.å°è£…è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(p.getTotal(), p.getPages(), vos);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†MybatisPlusåˆ†é¡µç»“æœè½¬ä¸º VOåˆ†é¡µç»“æœï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰POåˆ°VOçš„è½¬æ¢æ–¹å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> p MybatisPlusçš„åˆ†é¡µç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> convertor POåˆ°VOçš„è½¬æ¢å‡½æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;V&gt; ç›®æ ‡VOç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;P&gt; åŸå§‹POç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> VOçš„åˆ†é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;V, P&gt; PageDTO&lt;V&gt; <span class="title function_">of</span><span class="params">(Page&lt;P&gt; p, Function&lt;P, V&gt; convertor)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.éç©ºæ ¡éªŒ</span></span><br><span class="line">        List&lt;P&gt; records = p.getRecords();</span><br><span class="line">        <span class="keyword">if</span> (records == <span class="literal">null</span> || records.size() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ— æ•°æ®ï¼Œè¿”å›ç©ºç»“æœ</span></span><br><span class="line">            <span class="keyword">return</span> empty(p);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.æ•°æ®è½¬æ¢</span></span><br><span class="line">        List&lt;V&gt; vos = records.stream().map(convertor).collect(Collectors.toList());</span><br><span class="line">        <span class="comment">// 3.å°è£…è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(p.getTotal(), p.getPages(), vos);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆï¼Œä¸šåŠ¡å±‚çš„ä»£ç å¯ä»¥ç®€åŒ–ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> PageDTO&lt;UserVO&gt; <span class="title function_">queryUserByPage</span><span class="params">(PageQuery query)</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæ¡ä»¶</span></span><br><span class="line">    Page&lt;User&gt; page = query.toMpPageDefaultSortByCreateTimeDesc();</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢</span></span><br><span class="line">    page(page);</span><br><span class="line">    <span class="comment">// 3.å°è£…è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> PageDTO.of(page, UserVO.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯å¸Œæœ›è‡ªå®šä¹‰ PO åˆ° VO çš„è½¬æ¢è¿‡ç¨‹ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> PageDTO&lt;UserVO&gt; <span class="title function_">queryUserByPage</span><span class="params">(PageQuery query)</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæ¡ä»¶</span></span><br><span class="line">    Page&lt;User&gt; page = query.toMpPageDefaultSortByCreateTimeDesc();</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢</span></span><br><span class="line">    page(page);</span><br><span class="line">    <span class="comment">// 3.å°è£…è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> PageDTO.of(page, user -&gt; &#123;</span><br><span class="line">        <span class="comment">// æ‹·è´å±æ€§åˆ°VO</span></span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">vo</span> <span class="operator">=</span> BeanUtil.copyProperties(user, UserVO.class);</span><br><span class="line">        <span class="comment">// ç”¨æˆ·åè„±æ•</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> vo.getUsername();</span><br><span class="line">        vo.setUsername(username.substring(<span class="number">0</span>, username.length() - <span class="number">2</span>) + <span class="string">&quot;**&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> vo;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæŸ¥è¯¢çš„ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://i0.hdslb.com/bfs/article/252a338f2d0322d1588c70b5134ccc50645325325.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> Javaåç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MybatisPlus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tag Plugins</title>
      <link href="/posts/12220.html"/>
      <url>/posts/12220.html</url>
      
        <content type="html"><![CDATA[<div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>æ¯æ¬¡ä½¿ç”¨æ ‡ç­¾å¤–æŒ‚éƒ½è¦å»ç‰¹æ„çš„æœç´¢ ï¼Œè¿™é‡ŒæŠŠè‡ªå·±å¸¸ç”¨çš„å†…å®¹ç»™å†™ä¸‹æ¥ ï¼Œæ–¹ä¾¿ä»¥åè‡ªå·±ä½¿ç”¨ï¼</p></div><h2 id="1-Note-Bootstrap-Callout"><a href="#1-Note-Bootstrap-Callout" class="headerlink" title="1. Note (Bootstrap Callout)"></a>1. Note (Bootstrap Callout)</h2><mark class="hl-label pink">è¿™é‡Œä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰æ–¹å¼</mark> <p><h3 id="simple"><a href="#simple" class="headerlink" title="simple"></a>simple</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;</span><br><span class="line">2021å¹´å¿«åˆ°äº†....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;</span><br><span class="line">å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;</span><br><span class="line">è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;</span><br><span class="line">å‰ªåˆ€çŸ³å¤´å¸ƒ</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;</span><br><span class="line">å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><h3 id="modern"><a href="#modern" class="headerlink" title="modern"></a>modern</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;</span><br><span class="line">2021å¹´å¿«åˆ°äº†....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;</span><br><span class="line">å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;</span><br><span class="line">è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;</span><br><span class="line">å‰ªåˆ€çŸ³å¤´å¸ƒ</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;</span><br><span class="line">å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><h3 id="flat"><a href="#flat" class="headerlink" title="flat"></a>flat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;</span><br><span class="line">2021å¹´å¿«åˆ°äº†....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;</span><br><span class="line">å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;</span><br><span class="line">è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;</span><br><span class="line">å‰ªåˆ€çŸ³å¤´å¸ƒ</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;</span><br><span class="line">å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><h3 id="disabled"><a href="#disabled" class="headerlink" title="disabled"></a>disabled</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;</span><br><span class="line">2021å¹´å¿«åˆ°äº†....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;</span><br><span class="line">å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;</span><br><span class="line">è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;</span><br><span class="line">å‰ªåˆ€çŸ³å¤´å¸ƒ</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;</span><br><span class="line">å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><h3 id="no-icon"><a href="#no-icon" class="headerlink" title="no-icon"></a>no-icon</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue no-icon %&#125;</span><br><span class="line">2021å¹´å¿«åˆ°äº†....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink no-icon %&#125;</span><br><span class="line">å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red no-icon %&#125;</span><br><span class="line">è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange no-icon %&#125;</span><br><span class="line">ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple no-icon %&#125;</span><br><span class="line">å‰ªåˆ€çŸ³å¤´å¸ƒ</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green no-icon %&#125;</span><br><span class="line">å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue no-icon flat"><p>2021å¹´å¿«åˆ°äº†â€¦.</p></div><div class="note pink no-icon flat"><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red no-icon flat"><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple no-icon flat"><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green no-icon flat"><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><h2 id="2-tag-hide"><a href="#2-tag-hide" class="headerlink" title="2. tag-hide"></a>2. tag-hide</h2><p>blockç‹¬ç«‹çš„blockéšè—å†…å®¹ï¼Œå¯ä»¥éšè—å¾ˆå¤šå†…å®¹ï¼ŒåŒ…æ‹¬å›¾ç‰‡ï¼Œä»£ç å—ç­‰ç­‰</p><p>( display ä¸èƒ½åŒ…å«è‹±æ–‡é€—å·ï¼Œå¯ç”¨<code>&amp;sbquo;</code>)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><ul><li>content: æ–‡æœ¬å†…å®¹</li><li>display: æŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—(å¯é€‰)</li><li>bg: æŒ‰é’®çš„èƒŒæ™¯é¢œè‰²(å¯é€‰)</li><li>color: æŒ‰é’®æ–‡å­—çš„é¢œè‰²(å¯é€‰)</li></ul><blockquote><p>æ¡ˆä¾‹ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹ç­”æ¡ˆ</span><br><span class="line">&#123;% hideBlock æŸ¥çœ‹ç­”æ¡ˆ %&#125;</span><br><span class="line">å‚»å­ï¼Œæ€ä¹ˆå¯èƒ½æœ‰ç­”æ¡ˆ</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç­”æ¡ˆ</p><div class="hide-block"><button type="button" class="hide-button" style="">æŸ¥çœ‹ç­”æ¡ˆ    </button><div class="hide-content"><p>å‚»å­ï¼Œæ€ä¹ˆå¯èƒ½æœ‰ç­”æ¡ˆ</p></div></div><h2 id="3-Button"><a href="#3-Button" class="headerlink" title="3. Button"></a>3. Button</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,green larger %&#125;</span><br></pre></td></tr></table></figure><a class="btn-beautify larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify blue larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify pink larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify red larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify purple larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify orange larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify green larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;btn-center&quot;&gt;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline green larger %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><div class="btn-center"><a class="btn-beautify outline larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline blue larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline pink larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline red larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline purple larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline orange larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline green larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a></div><h2 id="4-inlineImg"><a href="#4-inlineImg" class="headerlink" title="4. inlineImg"></a>4. inlineImg</h2><p>é¢˜ä¸­çš„å›¾ç‰‡éƒ½æ˜¯é»˜è®¤ä»¥å—çº§å…ƒç´ æ˜¾ç¤ºï¼Œå¦‚æœä½ æƒ³ä»¥å†…è”å…ƒç´ æ˜¾ç¤ºï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ ‡ç­¾å¤–æŒ‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% inlineImg [src] [height] %&#125;</span><br><span class="line"></span><br><span class="line">[src]      :    å›¾ç‰‡é“¾æ¥</span><br><span class="line">[height]   ï¼š   å›¾ç‰‡é«˜åº¦é™åˆ¶ã€å¯é€‰ã€‘</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šæˆ‘è§‰å¾—å¾ˆæ¼‚äº® <img class="inline-img" src="https://i.loli.net/2021/03/19/5M4jUB3ynq7ePgw.png" style="height:150px" /></p><h2 id="5-label"><a href="#5-label" class="headerlink" title="5. label"></a>5. label</h2><blockquote><p>å»ºè®® ä¸è¦ åœ¨æ®µè½å¼€å¤´ä½¿ç”¨ label æ ‡ç­¾å¤–æŒ‚</p></blockquote><p>é«˜äº®æ‰€éœ€çš„æ–‡å­—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% label text color %&#125;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°è§£é‡Š</li><li>textæ–‡å­—</li><li>colorã€å¯é€‰ã€‘èƒŒæ™¯é¢œè‰²ï¼Œé»˜è®¤ä¸º default : default&#x2F;blue&#x2F;pink&#x2F;red&#x2F;purple&#x2F;orange&#x2F;green</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è‡£äº®è¨€ï¼š&#123;% label å…ˆå¸ %&#125;åˆ›ä¸šæœªåŠï¼Œè€Œ&#123;% label ä¸­é“å´©æ®‚ blue %&#125;ã€‚ä»Šå¤©ä¸‹ä¸‰åˆ†ï¼Œ&#123;% label ç›Šå·ç–²æ• pink %&#125;ï¼Œæ­¤è¯š&#123;% label å±æ€¥å­˜äº¡ä¹‹ç§‹ red %&#125;ä¹Ÿï¼ç„¶ä¾è¡ä¹‹è‡£ï¼Œä¸æ‡ˆäºå†…ï¼›&#123;% label å¿ å¿—ä¹‹å£« purple %&#125;ï¼Œå¿˜èº«äºå¤–è€…ï¼Œç›–è¿½å…ˆå¸ä¹‹æ®Šé‡ï¼Œæ¬²æŠ¥ä¹‹äºé™›ä¸‹ä¹Ÿã€‚è¯šå®œå¼€å¼ åœ£å¬ï¼Œä»¥å…‰å…ˆå¸é—å¾·ï¼Œæ¢å¼˜å¿—å£«ä¹‹æ°”ï¼›ä¸å®œå¦„è‡ªè²è–„ï¼Œå¼•å–»å¤±ä¹‰ï¼Œä»¥å¡å¿ è°ä¹‹è·¯ä¹Ÿã€‚</span><br><span class="line">å®«ä¸­ã€åºœä¸­ï¼Œä¿±ä¸ºä¸€ä½“ï¼›é™Ÿç½šè‡§å¦ï¼Œä¸å®œå¼‚åŒã€‚è‹¥æœ‰&#123;% label ä½œå¥¸ orange %&#125;ã€&#123;% label çŠ¯ç§‘ green %&#125;ï¼ŒåŠä¸ºå¿ å–„è€…ï¼Œå®œä»˜æœ‰å¸ï¼Œè®ºå…¶åˆ‘èµï¼Œä»¥æ˜­é™›ä¸‹å¹³æ˜ä¹‹æ²»ï¼›ä¸å®œåç§ï¼Œä½¿å†…å¤–å¼‚æ³•ä¹Ÿã€‚</span><br></pre></td></tr></table></figure><p>è‡£äº®è¨€ï¼š<mark class="hl-label default">å…ˆå¸</mark> åˆ›ä¸šæœªåŠï¼Œè€Œ<mark class="hl-label blue">ä¸­é“å´©æ®‚</mark> ã€‚ä»Šå¤©ä¸‹ä¸‰åˆ†ï¼Œ<mark class="hl-label pink">ç›Šå·ç–²æ•</mark> ï¼Œæ­¤è¯š<mark class="hl-label red">å±æ€¥å­˜äº¡ä¹‹ç§‹</mark> ä¹Ÿï¼ç„¶ä¾è¡ä¹‹è‡£ï¼Œä¸æ‡ˆäºå†…ï¼›<mark class="hl-label purple">å¿ å¿—ä¹‹å£«</mark> ï¼Œå¿˜èº«äºå¤–è€…ï¼Œç›–è¿½å…ˆå¸ä¹‹æ®Šé‡ï¼Œæ¬²æŠ¥ä¹‹äºé™›ä¸‹ä¹Ÿã€‚è¯šå®œå¼€å¼ åœ£å¬ï¼Œä»¥å…‰å…ˆå¸é—å¾·ï¼Œæ¢å¼˜å¿—å£«ä¹‹æ°”ï¼›ä¸å®œå¦„è‡ªè²è–„ï¼Œå¼•å–»å¤±ä¹‰ï¼Œä»¥å¡å¿ è°ä¹‹è·¯ä¹Ÿã€‚<br>å®«ä¸­ã€åºœä¸­ï¼Œä¿±ä¸ºä¸€ä½“ï¼›é™Ÿç½šè‡§å¦ï¼Œä¸å®œå¼‚åŒã€‚è‹¥æœ‰<mark class="hl-label orange">ä½œå¥¸</mark> ã€<mark class="hl-label green">çŠ¯ç§‘</mark> ï¼ŒåŠä¸ºå¿ å–„è€…ï¼Œå®œä»˜æœ‰å¸ï¼Œè®ºå…¶åˆ‘èµï¼Œä»¥æ˜­é™›ä¸‹å¹³æ˜ä¹‹æ²»ï¼›ä¸å®œåç§ï¼Œä½¿å†…å¤–å¼‚æ³•ä¹Ÿã€‚</p><h2 id="6-timeline"><a href="#6-timeline" class="headerlink" title="6. timeline"></a>6. timeline</h2><p>ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline title,color %&#125;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><ul><li>titleæ ‡é¢˜&#x2F;æ—¶é—´çº¿</li><li>colortimeline é¢œè‰² : default(ç•™ç©º) &#x2F; blue &#x2F; pink &#x2F; red &#x2F; purple &#x2F; orange &#x2F; green</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 2022 %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">è¿™æ˜¯æµ‹è¯•é¡µé¢</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2022</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>01-02</p></div></div><div class='timeline-item-content'><p>è¿™æ˜¯æµ‹è¯•é¡µé¢</p></div></div></div>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterflyä¸»é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ä½¿ç”¨bilibiliå›¾åºŠ</title>
      <link href="/posts/62197.html"/>
      <url>/posts/62197.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><h2 id="å®‰è£…å’Œé…ç½®"><a href="#å®‰è£…å’Œé…ç½®" class="headerlink" title="å®‰è£…å’Œé…ç½®"></a>å®‰è£…å’Œé…ç½®</h2><ol><li>å®‰è£…<a href="https://github.com/Molunerfinn/PicGo">PicGo</a> , ç„¶åå†å®‰è£…</li><li>è·å–Bç«™SESSDATA<ol><li>ç™»å½•<a href="https://www.bilibili.com/">Bç«™</a></li><li>æŒ‰<code>F12</code>â€‹æ‰“å¼€æ§åˆ¶å°</li><li>æ‰¾åˆ°<code>SESSDATA</code>â€‹è¿˜æœ‰<code>bli_jct</code>â€‹å¤åˆ¶å³å¯</li></ol></li></ol><h2 id="å›¾ç‰‡æ ·å¼"><a href="#å›¾ç‰‡æ ·å¼" class="headerlink" title="å›¾ç‰‡æ ·å¼"></a>å›¾ç‰‡æ ·å¼</h2><p>ä¾‹å¦‚åŸå›¾ï¼š <a href="https://i0.hdslb.com/bfs/article/ce0946fa9b4dbb61dde1ae65ad153ada645325325.png">https://i0.hdslb.com/bfs/article/ce0946fa9b4dbb61dde1ae65ad153ada645325325.png</a></p><p>è§„å®šé«˜å®½ï¼Œè´¨é‡å‹ç¼©: <a href="https://i0.hdslb.com/bfs/article/ce0946fa9b4dbb61dde1ae65ad153ada645325325.png@104w_104h_1e_1c.jpg">https:&#x2F;&#x2F;i0.hdslb.com&#x2F;bfs&#x2F;article&#x2F;ce0946fa9b4dbb61dde1ae65ad153ada645325325.png@104w_104h_1e_1c.jpg</a></p><table><thead><tr><th>Type</th><th>Url</th></tr></thead><tbody><tr><td>åŸå›¾</td><td>baseURL&#x2F;1.jpg</td></tr><tr><td>åŸåˆ†è¾¨ç‡ï¼Œè´¨é‡å‹ç¼©</td><td>baseURL&#x2F;<a href="mailto:1.jpg@1e_1c.jpg">1.jpg@1e_1c.jpg</a></td></tr><tr><td>è§„å®šå®½ï¼Œé«˜åº¦è‡ªé€‚åº”ï¼Œè´¨é‡å‹ç¼©</td><td>baseURL&#x2F;<a href="mailto:1.jpg@104w_1e_1c.jpg">1.jpg@104w_1e_1c.jpg</a></td></tr><tr><td>è§„å®šé«˜ï¼Œå®½åº¦è‡ªé€‚åº”ï¼Œè´¨é‡å‹ç¼©</td><td>baseURL&#x2F;<a href="mailto:1.jpg@104h_1e_1c.jpg">1.jpg@104h_1e_1c.jpg</a></td></tr><tr><td>è§„å®šé«˜å®½ï¼Œè´¨é‡å‹ç¼©</td><td>baseURL&#x2F;<a href="mailto:1.jpg@104w_104h_1e_1c.jpg">1.jpg@104w_104h_1e_1c.jpg</a></td></tr><tr><td>åŸåˆ†è¾¨ç‡ï¼Œwebpæ ¼å¼(å ç”¨æœ€å°)</td><td>baseURL&#x2F;<a href="mailto:1.jpg@104w_104h_1e_1c.webp">1.jpg@104w_104h_1e_1c.webp</a></td></tr><tr><td>è§„å®šé«˜åº¦ï¼Œwebpæ ¼å¼(å ç”¨æœ€å°)</td><td>baseURL&#x2F;<a href="mailto:1.jpg@104w_104h_1e_1c.webp">1.jpg@104w_104h_1e_1c.webp</a></td></tr></tbody></table><p>æ ¼å¼ï¼š(å›¾åƒåŸé“¾æ¥)@(\d+[whsepqoc]_?)*(.(|webp|gif|png|jpg|jpeg))?$</p><ul><li>w:[1, 9223372036854775807] (widthï¼Œå›¾åƒå®½åº¦)</li><li>h:[1, 9223372036854775807] (heightï¼Œå›¾åƒé«˜åº¦)</li><li>s:[1, 9223372036854775807] (ä½œç”¨æœªçŸ¥)</li><li>e:[0,2] (resizeï¼Œ0:ä¿ç•™æ¯”ä¾‹å–å…¶å°ï¼Œ1:ä¿ç•™æ¯”ä¾‹å–å…¶å¤§ï¼Œ2:ä¸ä¿ç•™åŸæ¯”ä¾‹ï¼Œä¸ä¸cæ··ç”¨)</li><li>p:[1,1000] (é»˜è®¤100ï¼Œæ”¾å¤§å€æ•°ï¼Œä¸ä¸cæ··ç”¨)</li><li>q:[1,100] (qualityï¼Œé»˜è®¤75ï¼Œå›¾åƒè´¨é‡)</li><li>o:[0,1] (ä½œç”¨æœªçŸ¥)</li><li>c:[0,1] (clipï¼Œ0:é»˜è®¤ï¼Œ1:è£å‰ª)</li><li>webp,png,jpeg,gif(ä¸åŠ åˆ™ä¿ç•™åŸæ ¼å¼)</li><li>ä¸åŒºåˆ†å¤§å°å†™ï¼Œç›¸åŒçš„å‚æ•°åé¢è¦†ç›–å‰é¢</li><li>è®¡ç®—åçš„å®é™…w<em>hä¸èƒ½å¤§äºåŸw</em>hï¼Œå¦åˆ™whå‚æ•°å¤±æ•ˆ</li></ul><h2 id="è§£å†³Bç«™é˜²ç›—é“¾ï¼ˆ403ï¼‰"><a href="#è§£å†³Bç«™é˜²ç›—é“¾ï¼ˆ403ï¼‰" class="headerlink" title="è§£å†³Bç«™é˜²ç›—é“¾ï¼ˆ403ï¼‰"></a>è§£å†³Bç«™é˜²ç›—é“¾ï¼ˆ403ï¼‰</h2><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>Bç«™å¼€å¯äº†é˜²ç›—é“¾ï¼Œåˆ©ç”¨çš„æ˜¯HTTPçš„Refererå±æ€§åšåˆ¤æ–­ã€‚å¦‚æœRefereræ˜¯ä»–ç™½åå•ä¹‹å¤–çš„ç½‘ç«™ï¼Œå°±ä¼šè¿”å›403</p></div><h4 id="å…¨ç«™å›¾ç‰‡ä½¿ç”¨"><a href="#å…¨ç«™å›¾ç‰‡ä½¿ç”¨" class="headerlink" title="å…¨ç«™å›¾ç‰‡ä½¿ç”¨"></a>å…¨ç«™å›¾ç‰‡ä½¿ç”¨</h4><p>åœ¨htmlçš„headæ ‡ç­¾ä¸­è®¾ç½®å¦‚ä¸‹æ ‡å¿—ï¼Œé‚£ä¹ˆå…¨ç«™èµ„æºå¼•ç”¨éƒ½ä¸ä¼šæºå¸¦referrer</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;referrer&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-referrer&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ–°çª—å£æ‰“å¼€"><a href="#æ–°çª—å£æ‰“å¼€" class="headerlink" title="æ–°çª—å£æ‰“å¼€"></a>æ–°çª—å£æ‰“å¼€</h4><p>ä¸»è¦è®¾ç½®<code>rel=&quot;noreferrer&quot;</code>â€‹ï¼Œä½¿ç”¨<code>window.open</code>â€‹æ‰“å¼€çš„è¯æ˜¯ä¼šé»˜è®¤æºå¸¦<code>referrer</code>â€‹çš„ï¼Œç¬¬ä¸€æ¬¡è¿˜æ˜¯ä¼š403</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">rel</span>=<span class="string">&quot;noreferrer&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span> </span><br></pre></td></tr></table></figure><p>å›¾ç‰‡æµ‹è¯•ï¼š<br>â€<br><img src="https://i0.hdslb.com/bfs/article/17b5b67790c291b15ad6930078b0b1da645325325.png@1e_1c.webp"></p>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åºŠæ­å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¥èº«æ—¥è®°</title>
      <link href="/posts/5413be0e.html"/>
      <url>/posts/5413be0e.html</url>
      
        <content type="html"><![CDATA[<div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>è¡Œä¸‡é‡Œè·¯ ï¼Œç»ƒç™¾ä¸‡æ‹³</p></div><div class="timeline orange"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>TimeLine</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2024-08-13 07:33</p></div></div><div class='timeline-item-content'><p>æ›´åƒæ˜¯å¥èº«æ—¥å¯„</p></div></div></div>]]></content>
      
      
      <categories>
          
          <category> æœˆå½±å¢¨ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘åœ¨äººé—´å‡‘æ•°çš„æ—¥å­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç©ºè¯è‰ºæœ¯2ï¼šæˆ‘è§‰å¾—å·¥ä½œå®ä¹ éƒ½å¾ˆå¿™ï¼Œæ²¡ç©ºå»å­¦ä¹ å’Œç§¯ç´¯</title>
      <link href="/posts/50040.html"/>
      <url>/posts/50040.html</url>
      
        <content type="html"><![CDATA[<div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>æ ¸å¿ƒçŸ›ç›¾ä¸æ˜¯åœ¨å¿™ä¸å¿™ä¸Šï¼Œè€Œæ˜¯ä½ çš„æ¬²æœ›æ˜¯å¦çœŸçš„åœ¨è¿™ä»¶äº‹æƒ…ä¸Šé¢ã€‚å¾ˆå¤šäººè‡ªå·±å…ˆè‡ªæˆ‘å‚¬çœ ä¸Šäº†</p></div><h2 id="æœ€å¸¸è§çš„ä¸¤ç§æ²Ÿé€šæ˜¯è¿™æ ·å­çš„"><a href="#æœ€å¸¸è§çš„ä¸¤ç§æ²Ÿé€šæ˜¯è¿™æ ·å­çš„" class="headerlink" title="æœ€å¸¸è§çš„ä¸¤ç§æ²Ÿé€šæ˜¯è¿™æ ·å­çš„"></a><span data-type="text" style="color: var(--b3-font-color10);">æœ€å¸¸è§çš„ä¸¤ç§æ²Ÿé€šæ˜¯è¿™æ ·å­çš„</span></h2><ol><li>ä¸€ç§å’Œæˆ‘è¯´ï¼Œé™ˆè€å¸ˆï¼Œæˆ‘ç°åœ¨å¾ˆå¿™ï¼Œæˆ–è€…æˆ‘è§‰å¾—æœªæ¥æˆ‘å­¦ä¹ å¾ˆå¿™ï¼Œåˆè¦æ¯•ä¸šåˆè¦å¿™å®ä¹ ï¼Œä½†æˆ‘è§‰å¾—è¿™äº›æ²¡æœ‰å•¥ä»·å€¼ï¼Œæµªè´¹äº†æˆ‘çš„æ—¶é—´ï¼Œæˆ‘æ ¹æœ¬æ²¡æ—¶é—´å»å­¦ä¹ ï¼Œå»ç¤¾äº¤</li><li>å¦å¤–ä¸€ç§å°±æ˜¯å’Œæˆ‘è¯´ï¼Œå“å‘€ï¼Œæˆ‘ç°åœ¨å·¥ä½œå¾ˆå¿™ï¼ŒåŠ ç­å¾ˆä¸¥é‡ï¼Œbalabalaã€‚ç„¶åè¯´è‡ªå·±æ²¡ç©ºå»å­¦ä¹ ï¼Œå»ç¤¾äº¤</li><li>ç„¶åè¿˜æœ‰ä¸€ç§å‘¢å°±æ˜¯è¯´è®©æˆ‘äºŒé€‰ä¸€çš„ï¼Œæ¯”å¦‚ç°åœ¨æœ‰ä¸ªä»€ä¹ˆofferæˆ–è€…æœ‰ä¸ªä»€ä¹ˆç¡•å£«è¦ä¸è¦å»è¯»ï¼Œç„¶åè¯´è‡ªå·±æƒ³æ›´å¥½çš„åšå•†ä¸šï¼Œå»ç§¯ç´¯ï¼Œè¦å»å­¦ä¹ ç­‰ç­‰ï¼Œè¦æ‰¾ä¸€äº›ç©ºä¸€ç‚¹çš„æˆ–è€…è¯´å°±æ˜¯ç›¸å¯¹åŠ ç­ä¸é‚£ä¹ˆä¸¥é‡çš„é€‰æ‹©</li><li>è¯´çœŸçš„ï¼Œæœ‰æ—¶å€™æˆ‘ä¹Ÿæ˜¯å‚»é€¼ï¼Œæˆ‘çœŸçš„è¢«ä»–ä»¬å¸¦è¿‡å»äº†ï¼Œç„¶åå¼€å§‹è®¤çœŸåˆ†æè¿™äº›é€‰æ‹©ï¼Œç„¶åæˆ‘å°±çªç„¶æ„è¯†åˆ°ï¼Œä¸å¯¹å•Š</li><li>æ ¸å¿ƒçŸ›ç›¾æ˜¯åœ¨å¿™ä¸Šé¢ä¹ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</li></ol><h2 id="æ ¸å¿ƒçŸ›ç›¾"><a href="#æ ¸å¿ƒçŸ›ç›¾" class="headerlink" title="æ ¸å¿ƒçŸ›ç›¾"></a><span data-type="text" style="color: var(--b3-font-color4);">æ ¸å¿ƒçŸ›ç›¾</span></h2><ol><li>æˆ‘ä»¬ä»¥å‰å°±è¯´è¿‡ï¼Œå­¦ä¹ æœ¬èº«æ˜¯<span data-type="text" style="background-color: var(--b3-card-success-background); color: var(--b3-card-success-color);">éœ€è¦æ–¹æ³•çš„</span>ï¼Œä¹Ÿæ˜¯<span data-type="text" style="background-color: var(--b3-card-success-background); color: var(--b3-card-success-color);">éœ€è¦æ¯…åŠ›çš„</span>ã€‚è€Œæ–¹æ³•å’Œå®è·µæ˜¯ç›¸è¾…ç›¸æˆçš„</li><li>å°±æ¯”å¦‚æˆ‘ä»¬è¯´ç¤¾äº¤ï¼Œç¤¾äº¤å±‚é¢æ€ä¹ˆå’Œåˆ«äººè‡ªæˆ‘ä»‹ç»å‘¢ï¼Ÿä»‹ç»ä¹‹ååˆåº”è¯¥è¯´ç‚¹ä»€ä¹ˆå‘¢ï¼Ÿå’Œäººæ€ä¹ˆå¼€å§‹æ²Ÿé€šï¼Œåˆ°æ²Ÿé€šä¸šåŠ¡ï¼Œåˆ°åˆä½œå‘¢ï¼Ÿ</li><li>ä½ è¯´æœ‰æ²¡æœ‰æ–¹æ³•è®ºï¼Œä¹Ÿæœ‰ï¼Œä½†å…¶å®å¦‚ä½•è®©ä½ è‡ªå·±èä¼šè´¯é€šæ˜¯éœ€è¦ä½ ä¸åœçš„å»å®è·µçš„</li><li>è€Œåœ¨ç¤¾ä¼šä¸Šï¼ŒæˆåŠŸæœ¬æ¥å°±æ˜¯å°æ¦‚ç‡äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ç¢°è§çš„å¤§éƒ¨åˆ†äººå…¶å®æ— æ³•å’Œä½ åˆä½œæˆ–è€…è¯´ä¼šç›´æ¥æ‹’ç»ä½ ã€‚é‚£ä¹ˆä½ å°±éœ€è¦ä¸åœçš„å»å°è¯•ï¼Œå¤ç›˜ï¼Œä¿®æ­£ï¼Œå®è·µ</li><li>æ‰€ä»¥æ ¸å¿ƒçŸ›ç›¾å…¶å®æ˜¯ä¸¤ä¸ªï¼Œ<span data-type="text" style="background-color: var(--b3-card-success-background); color: var(--b3-card-success-color);">ä¸€ä¸ªæ˜¯æœ‰æ²¡æœ‰æ¯”è¾ƒå¥½çš„å­¦ä¹ çš„æ–¹æ³•ï¼Œæˆ–è€…è¯´æœç´¢ä¿¡æ¯çš„èƒ½åŠ›</span>ï¼Œ<span data-type="text" style="background-color: var(--b3-card-error-background); color: var(--b3-card-error-color);">å¦å¤–ä¸€ä¸ªå°±æ˜¯ä½ æœ‰æ²¡æœ‰æ¯…åŠ›</span></li></ol><h2 id="ç°åœ¨çš„ä¿¡æ¯å…¶å®éƒ½æ˜¯ç¢ç‰‡åŒ–çš„ï¼Œç”šè‡³å¾ˆå¤šéƒ½ä¸æ˜¯æœ‰æ•ˆä¿¡æ¯"><a href="#ç°åœ¨çš„ä¿¡æ¯å…¶å®éƒ½æ˜¯ç¢ç‰‡åŒ–çš„ï¼Œç”šè‡³å¾ˆå¤šéƒ½ä¸æ˜¯æœ‰æ•ˆä¿¡æ¯" class="headerlink" title="ç°åœ¨çš„ä¿¡æ¯å…¶å®éƒ½æ˜¯ç¢ç‰‡åŒ–çš„ï¼Œç”šè‡³å¾ˆå¤šéƒ½ä¸æ˜¯æœ‰æ•ˆä¿¡æ¯"></a>ç°åœ¨çš„ä¿¡æ¯å…¶å®éƒ½æ˜¯ç¢ç‰‡åŒ–çš„ï¼Œç”šè‡³å¾ˆå¤šéƒ½ä¸æ˜¯æœ‰æ•ˆä¿¡æ¯</h2><ol><li>å…¶å®åˆ°äº†ç°åœ¨ï¼Œæˆ‘æ¯æ¬¡å°±ä¼šåé—®ä»–ä»¬ï¼Œå¦‚æœä½ ä»¬ç©ºäº†ï¼Œæˆ–è€…é€‰æ‹©äº†ä¸€ä¸ªæ”¾å¼ƒä¸€ä¸ªå¾ªè§„è¹ˆçŸ©çš„é€‰æ‹©ä¹‹åï¼Œä½ çœŸçš„ä¼šå»å­¦ä¹ ä¹ˆï¼Ÿè€Œä¸æ˜¯åˆ·dyå‘¢ï¼Ÿè€Œä¸æ˜¯å»è°ˆæ‹çˆ±å‘¢ï¼Ÿ</li><li>ä½†å¦‚æœä½ æ ¹æœ¬ä¸èƒ½æœ‰æ¯…åŠ›çš„å»ç§¯ç´¯å»å­¦ä¹ ï¼Œé‚£ä¹ˆä½ å½“åˆä¸ºä»€ä¹ˆè¦å»åšè¿™ä¸ªé€‰æ‹©å‘¢ï¼Ÿç­‰ä½ å›è¿‡ç¥æ¥çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯å°±åæ‚”äº†</li><li>å…¶å®å¤§æ¦‚ç‡æ˜¯è¿™æ ·çš„é—®é¢˜ï¼Œå¾ˆå¤šäººå…¶å®åœ¨è¿™ä¸ªæ—¶ä»£ï¼Œåªè¦æ²¡äººå»æ•™ï¼Œæ²¡æœ‰ç³»ç»Ÿæ€§çš„å­¦ä¹ èµ„æ–™ï¼Œè‡ªå·±åŸºæœ¬ä¸Šå·²ç»ä¸ä¼šå­¦ä¹ äº†ï¼Œ<span data-type="text" style="background-color: var(--b3-card-error-background); color: var(--b3-card-error-color);">ä»€ä¹ˆéƒ½è¦åˆ«äººæ•™</span></li><li>é‚£ä¹ˆä½ è¯´è‡ªå·±å¾ˆå¿™ï¼Œæ²¡ç©ºbalabalaï¼Œå°±å·²ç»æ¯«æ— æ„ä¹‰äº†</li></ol><h2 id="æ‰€ä»¥åå‘ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½ ä¸èƒ½è¯´å·¥ä½œæˆ–è€…è¯»ä¹¦å¤ªå¿™å°±æ²¡ç©ºå­¦ä¹ "><a href="#æ‰€ä»¥åå‘ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½ ä¸èƒ½è¯´å·¥ä½œæˆ–è€…è¯»ä¹¦å¤ªå¿™å°±æ²¡ç©ºå­¦ä¹ " class="headerlink" title="æ‰€ä»¥åå‘ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½ ä¸èƒ½è¯´å·¥ä½œæˆ–è€…è¯»ä¹¦å¤ªå¿™å°±æ²¡ç©ºå­¦ä¹ "></a>æ‰€ä»¥åå‘ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½ ä¸èƒ½è¯´å·¥ä½œæˆ–è€…è¯»ä¹¦å¤ªå¿™å°±æ²¡ç©ºå­¦ä¹ </h2><ol><li>èƒ½å¿™åˆ°å“ªå„¿å»ï¼Ÿå®Œå…¨ä¸èƒ½æ‘¸é±¼ï¼Ÿå°±ç°åœ¨è¿™ç§ç”Ÿäº§åŠ›è¿‡å‰©çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä¸èƒ½è¯´å®Œå…¨æ²¡æœ‰è¿™ç§ç°è±¡å§ï¼Œä½†æ˜¯é‚£ä¹ˆå¤šäººéƒ½å’Œæˆ‘è¿™æ ·è¯´ï¼Œå°±è¿‡åˆ†äº†å§</li><li>è€Œä¸”å¤§éƒ¨åˆ†äººä¹Ÿéƒ½æ˜¯å¹´è½»äººï¼Œæˆ‘ä»–å¦ˆæ¯æ¬¡é—®ä»–ä»¬ï¼Œæ€ä¹ˆäº†ï¼Œè¿™å…¬å¸å¼€äº†5-10å¹´äº†ï¼Œå°±ç¼ºä½ è¿™æ ·ä¸€ä¸ªäººï¼Ÿä½ æ‘¸é±¼äº†ï¼Œç”šè‡³æœªæ¥ä½ ä¸åšäº†ï¼Œæ€ä¹ˆäº†ï¼Ÿå€’é—­äº†ï¼Ÿ</li><li><span data-type="text" style="background-color: var(--b3-card-success-background); color: var(--b3-card-success-color);">æ‰€ä»¥æœ¬è´¨ä¸Šè¿˜æ˜¯è‡ªå·±æ²¡æœ‰åŠ¨èµ·æ¥ï¼Œæ²¡æœ‰èµ°å‡ºç¬¬ä¸€æ­¥</span>ï¼Œæ‰€ä»¥å°±ä¸‹æ„è¯†çš„å»è¯´å·¥ä½œå¿™ï¼Œè‡ªå·±ç´¯ï¼Œæˆ–è€…æ€ä¹ˆæ ·ã€‚</li><li>å’±å°±è¿™æ ·è¯´ï¼Œå½“ä¸‹ è¿™ä¸ªæ—¶ä»£ï¼Œè°ä¸ç´¯ï¼Ÿè°ä¸å¿™ï¼Ÿ<span data-type="text" style="background-color: var(--b3-card-warning-background); color: var(--b3-card-warning-color);">æ—¢ç„¶è¦æœ‰æ‰€çªç ´ï¼Œè¦0åˆ°1ï¼Œä¸å¾—ä»˜å‡ºæ¯”å…¶ä»–äººæ›´å¤šçš„æ—¶é—´ä¹ˆï¼Ÿ</span>å¦åˆ™å‘¢ï¼Ÿ</li></ol>]]></content>
      
      
      <categories>
          
          <category> æœˆæ¹–ç¬”è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç©ºè¯è‰ºæœ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç©ºè¯è‰ºæœ¯1ï¼šxxxå†³å®šäº†ä¸‹é™</title>
      <link href="/posts/1705.html"/>
      <url>/posts/1705.html</url>
      
        <content type="html"><![CDATA[<h3 id="å¾ˆå¤šäººå°±å–œæ¬¢è¯´ç©ºè¯"><a href="#å¾ˆå¤šäººå°±å–œæ¬¢è¯´ç©ºè¯" class="headerlink" title="å¾ˆå¤šäººå°±å–œæ¬¢è¯´ç©ºè¯"></a>å¾ˆå¤šäººå°±å–œæ¬¢è¯´ç©ºè¯</h3><ol><li>æ¯”å¦‚è¿™ç§<code>xxå†³å®šä¸‹é™</code>â€‹æ¯”å¦‚ä»€ä¹ˆå­¦å†å•Š ï¼Œå·¥ä½œç»å†å•Š ï¼Œå¤§å‚å•Š ï¼Œå’Œè°è°åˆä½œå•Š ï¼Œå†³å®šä¸‹é™</li><li>æˆ‘ä»¬å°±åˆ†å¼€æ¥è¯´ ï¼ŒæŸä¸ªä¸œè¥¿æ˜¯å†³å®šäº†å¤§ä¼—çš„ä¸‹é™ï¼Ÿå¦‚æœæ‘¸ä¸ªä¸œè¥¿å†³å®šäº†å¤§ä¼—çš„ä¸‹é™ ï¼Œé‚£ä¹ˆä¸‹é™æ˜¯ä»€ä¹ˆï¼Ÿæ‰¾å¾—åˆ°å·¥ä½œï¼Ÿè¿˜æ˜¯æœ€ä½è–ªèµ„ï¼Ÿä½†ç°åœ¨ä¿è¯äº†ä¹ˆï¼Ÿå¹¶æ²¡æœ‰å•Šï¼Ÿé‚£å†³å®šä»€ä¹ˆä¸‹é™ï¼Ÿ</li><li>å¦‚æœè¯´ä¸€ä¸ªä¸œè¥¿å®è§‚å±‚é¢å†³å®šäº†å¤§ä¼—çš„ä¸‹é™ ï¼Œå¹¶æ²¡æœ‰ç‰¹å®šçš„æ¡ˆä¾‹æˆ–è€…case by caseçš„å»åˆ†æ ï¼Œä¸å°±æ˜¯ç©ºè¯å˜›</li><li>å¦‚æœè¿™ä¸ªå†³å®šçš„ä¸‹é™å’Œä½ æ— å…³ ï¼Œå’ŒæŸä¸ªç‰¹å®šçš„äººæ— å…³ ï¼Œé‚£ä¹ˆè¿™ä¸å°±å±è¯å—ï¼Ÿ</li></ol><h3 id="æˆ‘é—®å‡ ä¸ªé—®é¢˜"><a href="#æˆ‘é—®å‡ ä¸ªé—®é¢˜" class="headerlink" title="æˆ‘é—®å‡ ä¸ªé—®é¢˜"></a>æˆ‘é—®å‡ ä¸ªé—®é¢˜</h3><ol><li>ä½ å‡ºäº†ç¤¾ä¼šä¹‹åï¼Œå»å“ªå·¥ä½œä½ èƒ½å†³å®šå˜›ï¼Ÿä½ èƒ½å¾ˆç¨³å®šçš„å·¥ä½œåˆ°å‡ å²ä½ èƒ½å†³å®šå—ï¼Ÿæœªæ¥ä¼šå‘ç”Ÿä»€ä¹ˆä½ èƒ½å†³å®šå—ï¼Ÿæˆ–è€…è¯æœ‰è¯´å›æ¥ ï¼Œä½ èƒ½å†³å®šä»€ä¹ˆï¼Ÿ</li><li>ä½ å¯¹ç¤¾ä¼šäº†è§£å¤šå°‘ï¼Ÿè¿˜æ˜¯ä½ åšä¸åš ï¼Œéšä¾¿åš ï¼Œå®¶é‡Œéƒ½èƒ½å…œåº•</li><li>æ— è®ºè°éƒ½æ— æ³•å†ä»»ä½•äº‹æƒ…ä¸Šåšå‡ºè‚¯å®šçš„ä¸€ç§å†³å®š ï¼Œè¿™å°±æ˜¯ç¤¾ä¼šæœ¬èº« ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ ï¼Œè¦çœŸçš„è¯´ä¸‹é™åªæœ‰ä½ è‡ªå·± ï¼Œç‰¹å®šæƒ…å†µç‰¹å®šåˆ†æ ï¼Œæ¯”å¦‚ä½ ä»€ä¹ˆæ€§æ ¼ ï¼Œä½ ä»€ä¹ˆåšäº‹å„¿çš„æ€åº¦ ï¼Œä½ ä»€ä¹ˆè¡Œä¸š ï¼Œä½ å¤§æ¦‚ä¼šä»€ä¹ˆ ï¼Œç»¼åˆæ¥è®²å†³å®šä½ çš„ä¸‹é™</li><li>è€Œä¸æ˜¯ä¸€ä¸ªä»€ä¹ˆå­¦å† ï¼Œå­¦æ ¡æˆ–è€…è¯´ä¸€ä¸ªå·¥ä½œç»éªŒå°±å†³å®šä½ çš„ä¸‹é™äº†ã€‚è¦çœŸçš„èƒ½é‚£ä¹ˆç®€å•å’Œå®¹æ˜“ ï¼Œå¤§å®¶ä¹Ÿæ²¡æœ‰å¿…è¦å·äº†</li></ol><h3 id="æ— æ³•ç†è§£ä¸‹é™æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æ— æ³•ç†è§£ä¸‹é™æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ— æ³•ç†è§£ä¸‹é™æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>æ— æ³•ç†è§£ä¸‹é™æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ol><li>ä¸‹é™æŒ‡çš„æ˜¯å•¥ ï¼Œæˆ‘ä¸€ç›´ä¸æ˜å¤ª ï¼Œå·¥ä½œï¼Ÿæ”¶å…¥ ï¼Ÿ å¯¹è±¡ï¼Ÿèµ„äº§ï¼Ÿè¿˜æ˜¯æˆ·å£ï¼Ÿè¿˜æ˜¯å•¥ï¼Ÿ</li><li>å› ä¸ºè¿™ä¸€åˆ‡é‡Œé¢æ²¡æœ‰è‚¯å®šçš„å› æœå…³ç³» ï¼Œæ—¢ç„¶æ²¡æœ‰è‚¯å®šçš„å› æœå…³ç³» ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç©ºè¯</li><li>è¿™è¯æ”¾å‡ºæ¥å°±æ˜¯ä¸ºäº† pua è‡ªå·± ï¼Œæ¶å¿ƒå“ªäº›æ²¡æœ‰ä¸‹é™çš„äºº ï¼Œå°±è®©è‡ªå·±æ„Ÿè§‰åˆ° ï¼Œå¯ä»¥äº† ï¼Œåæ­£æœ‰äº†ä¸€ä¸ªå­¦å† ï¼Œå»äº†å¤§å‚å°±å¥½äº† ï¼Œå°±æœ‰äº†ä¸‹é™äº† ã€‚ç„¶åå‘Šè¯‰å“ªäº›æ²¡æœ‰è¿™äº›å­¦å† ï¼Œæ²¡æœ‰è¿™äº›ç»éªŒçš„äºº ï¼Œä½ ä»¬ä¸è¡Œ</li><li>æˆ‘è¯å°±æ‰”ç€äº† ï¼Œ30å¤šå²å¼€å§‹ ï¼Œå†³å®šä¸‹é™çš„åªæœ‰å…³ç³»å’Œèµ„æº ï¼Œåˆ«çš„ä»»ä½•ç”¨å¤„éƒ½æ²¡æœ‰ ï¼Œå› ä¸ºæœ‰åŒæ ·çš„ç‰Œçš„äººå¤ªå¤šäº† ï¼Œæ€ä¹ˆäº† ï¼Ÿå¤§å®¶ä¸‹é™éƒ½ä¸€æ · ï¼Ÿä½ ä»¬è‡ªå·±å¯ä»¥å¤šæƒ³æƒ³</li></ol><h3 id="çœŸæ­£æ˜ç™½å†³å®šä¸€ä¸ªäººå‘å±•çš„ä¹Ÿæ˜¯è¯´ä¸å‡ºè¿™ç§è¯çš„"><a href="#çœŸæ­£æ˜ç™½å†³å®šä¸€ä¸ªäººå‘å±•çš„ä¹Ÿæ˜¯è¯´ä¸å‡ºè¿™ç§è¯çš„" class="headerlink" title="çœŸæ­£æ˜ç™½å†³å®šä¸€ä¸ªäººå‘å±•çš„ä¹Ÿæ˜¯è¯´ä¸å‡ºè¿™ç§è¯çš„"></a>çœŸæ­£æ˜ç™½å†³å®šä¸€ä¸ªäººå‘å±•çš„ä¹Ÿæ˜¯è¯´ä¸å‡ºè¿™ç§è¯çš„</h3><ol><li>è¯´ç™½äº† ï¼Œç½‘è·¯ä¸Šä¹Ÿå¥½ ï¼Œä½ ä»¬é¢†å¯¼ä¹Ÿç½¢ ï¼Œä½†å‡¡å’Œä½ ä»¬è¯´è¿™ç§è¯çš„ ï¼Œä½ ä»¬å°±è¦æ¸…æ¥š ï¼Œå¤šæ–¹è¦ä¹ˆè‡ªå·±å°±æ˜¯æ²¡æƒ³æ˜ç™½ ï¼Œè¦ä¹ˆå°±æ˜¯puaä½  ï¼Œè‚¯å®šæ˜¯ä¸é è°±çš„</li><li>çœŸæ­£æ˜ç™½ä¸€ä¸ªäººæ€ä¹ˆå‘å±• ï¼Œæ€ä¹ˆç”Ÿå­˜ ï¼Œä¸€å®šè¦ç»“åˆä½ ä¸ªäººçš„å®é™…æƒ…å†µä¸‹ ï¼Œæ¥è®²åˆ°åº•ä»€ä¹ˆä¸œè¥¿èƒ½ç»™ä½ å¸¦æ¥ä»€ä¹ˆå½±å“ ï¼Œä»¥åŠæŸäº›ä¸œæ—­ä¹Ÿè®¸æ˜¯åŠ åˆ†é¡¹ ï¼Œä½†ä¹Ÿæ˜¯æ¯”ä¾‹åŠ åˆ† ï¼Œä¸æ˜¯å›ºå®šçš„åŠ åˆ†</li><li>ä¿—è¯è¯´å¾—å¥½ ï¼Œæ­»ä¹Ÿè¦æ­»çš„æ˜ç™½ ï¼Œæˆ‘å°±ç®—æ²¡æœ‰å¤©èµ‹ ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹æ®ŠæŠ€èƒ½ ï¼Œæˆ‘å°±ç®—æœ€åå°±æ˜¯ä¸‹é™å¾ˆä½ ï¼Œä½†æˆ‘ä¹Ÿæ¸…æ¥šçš„ç¡®æœ‰è¿™ç§å…³ç³» ï¼Œæˆ‘ä¸æƒ³ä¸€ç›´æ´»åœ¨è¢«åˆ«äººpuaçš„ä¸–ç•Œé‡Œ ï¼Œç›´åˆ°æŸä¸€å¤©å‘ç°å’Œæˆ‘è®¤çŸ¥çš„ä¸åŒ</li><li>æ‰€ä»¥æˆ‘è¿˜æ˜¯é‚£å¥è¯ ï¼Œå®è§‚çš„æ­£ç¡®çš„è¯ä¸è¦è¯´å‡ºæ¥ ï¼Œéƒ½æ˜¯ç©ºè¯ ï¼Œé™¤äº†puaè‡ªå·± ï¼Œå°±æ˜¯å®³äº†åˆ«äºº</li></ol><p>â€</p>]]></content>
      
      
      <categories>
          
          <category> æœˆæ¹–ç¬”è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç©ºè¯è‰ºæœ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ€æºç¬”è®°å¸¸ç”¨ä»£ç ç‰‡æ®µ</title>
      <link href="/posts/42038.html"/>
      <url>/posts/42038.html</url>
      
        <content type="html"><![CDATA[<h2 id="VSCodeä¸»é¢˜ä¸‹èƒŒæ™¯è‰²è®¾ç½®"><a href="#VSCodeä¸»é¢˜ä¸‹èƒŒæ™¯è‰²è®¾ç½®" class="headerlink" title="VSCodeä¸»é¢˜ä¸‹èƒŒæ™¯è‰²è®¾ç½®"></a>VSCodeä¸»é¢˜ä¸‹èƒŒæ™¯è‰²è®¾ç½®</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attr">--b3-font-background1</span>: <span class="number">#423a3a</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background2</span>: <span class="number">#4b3722</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background3</span>: <span class="number">#203854c2</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background4</span>: <span class="number">#2c5438a3</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background5</span>: <span class="number">#4c525778</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background6</span>: <span class="number">#1b3f758a</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background7</span>: <span class="number">#664a1c73</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background8</span>: <span class="number">#5b1d1770</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background9</span>: <span class="number">#541b3594</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background10</span>: <span class="number">#6b2f6b70</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background11</span>: <span class="number">#2f4c264f</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background12</span>: <span class="number">#72390f54</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background13</span>: <span class="number">#3c3c3cd9</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é€‚ç”¨Savorçš„è‡ªå®šä¹‰æ–‡å­—é¢œè‰²"><a href="#é€‚ç”¨Savorçš„è‡ªå®šä¹‰æ–‡å­—é¢œè‰²" class="headerlink" title="é€‚ç”¨Savorçš„è‡ªå®šä¹‰æ–‡å­—é¢œè‰²"></a>é€‚ç”¨Savorçš„è‡ªå®šä¹‰æ–‡å­—é¢œè‰²</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span>&#123;</span><br><span class="line">    <span class="attr">--b3-font-color1</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attr">--b3-font-color2</span>: <span class="built_in">rgba</span>(<span class="number">105</span>, <span class="number">64</span>, <span class="number">165</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-color3</span>: <span class="built_in">rgb</span>(<span class="number">100</span>, <span class="number">71</span>, <span class="number">58</span>);</span><br><span class="line">    <span class="attr">--b3-font-color4</span>: <span class="built_in">rgb</span>(<span class="number">217</span>, <span class="number">115</span>, <span class="number">13</span>);</span><br><span class="line">    <span class="attr">--b3-font-color5</span>: <span class="number">#f5822e</span>;</span><br><span class="line">    <span class="attr">--b3-font-color6</span>: <span class="built_in">rgb</span>(<span class="number">223</span>, <span class="number">171</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="attr">--b3-font-color7</span>: <span class="number">#65b84d</span>;</span><br><span class="line">    <span class="attr">--b3-font-color8</span>: <span class="built_in">rgb</span>(<span class="number">15</span>, <span class="number">123</span>, <span class="number">108</span>);</span><br><span class="line">    <span class="attr">--b3-font-color9</span>: <span class="number">#2972f4</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-color10</span>: <span class="built_in">rgb</span>(<span class="number">105</span>, <span class="number">64</span>, <span class="number">165</span>);</span><br><span class="line">    <span class="attr">--b3-font-color11</span>: <span class="built_in">rgb</span>(<span class="number">173</span>, <span class="number">26</span>, <span class="number">114</span>);</span><br><span class="line">    <span class="attr">--b3-font-color12</span>: <span class="built_in">rgb</span>(<span class="number">224</span>, <span class="number">62</span>, <span class="number">62</span>);</span><br><span class="line">    <span class="attr">--b3-font-color13</span>: <span class="number">#e81123</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="attr">--b3-font-background1</span>: <span class="number">#fbbfbc</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background2</span>: <span class="number">#fed4a4</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background3</span>: <span class="number">#ffe9a1</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background4</span>: <span class="number">#b7edb1</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background5</span>: <span class="number">#d1ecf1</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background6</span>: <span class="number">#bacefd</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background7</span>: <span class="number">#cdb2fa</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background8</span>: <span class="number">#e1e1e1</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background9</span>: <span class="number">#fae1de</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background10</span>: <span class="built_in">rgb</span>(<span class="number">221</span>, <span class="number">235</span>, <span class="number">241</span>);</span><br><span class="line">    <span class="attr">--b3-font-background11</span>: <span class="built_in">rgb</span>(<span class="number">234</span>, <span class="number">228</span>, <span class="number">242</span>);</span><br><span class="line">    <span class="attr">--b3-font-background12</span>: <span class="built_in">rgb</span>(<span class="number">244</span>, <span class="number">223</span>, <span class="number">235</span>);</span><br><span class="line">    <span class="attr">--b3-font-background13</span>: <span class="built_in">rgb</span>(<span class="number">251</span>, <span class="number">228</span>, <span class="number">228</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* å¡ç‰‡èƒŒæ™¯ */</span></span><br><span class="line">    <span class="attr">--b3-card-error-color</span>: <span class="built_in">rgb</span>(<span class="number">97</span>, <span class="number">26</span>, <span class="number">21</span>);</span><br><span class="line">    <span class="attr">--b3-card-error-background</span>: <span class="built_in">rgb</span>(<span class="number">238</span>, <span class="number">213</span>, <span class="number">210</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-card-warning-color</span>: <span class="built_in">rgb</span>(<span class="number">102</span>, <span class="number">60</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--b3-card-warning-background</span>: <span class="built_in">rgb</span>(<span class="number">243</span>, <span class="number">225</span>, <span class="number">200</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-card-info-color</span>: <span class="built_in">rgb</span>(<span class="number">13</span>, <span class="number">60</span>, <span class="number">97</span>);</span><br><span class="line">    <span class="attr">--b3-card-info-background</span>: <span class="built_in">rgb</span>(<span class="number">204</span>, <span class="number">223</span>, <span class="number">237</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-card-success-color</span>: <span class="built_in">rgb</span>(<span class="number">30</span>, <span class="number">70</span>, <span class="number">32</span>);</span><br><span class="line">    <span class="attr">--b3-card-success-background</span>: <span class="built_in">rgb</span>(<span class="number">217</span>, <span class="number">239</span>, <span class="number">217</span>) <span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*æ•°æ®åº“*/</span></span><br><span class="line">    <span class="attr">--S-font-color13</span>: <span class="built_in">rgb</span>(<span class="number">93</span>, <span class="number">23</span>, <span class="number">21</span>);</span><br><span class="line">    <span class="attr">--S-font-color12</span>: <span class="built_in">rgb</span>(<span class="number">76</span>, <span class="number">35</span>, <span class="number">55</span>);</span><br><span class="line">    <span class="attr">--S-font-color11</span>: <span class="built_in">rgb</span>(<span class="number">65</span>, <span class="number">36</span>, <span class="number">84</span>);</span><br><span class="line">    <span class="attr">--S-font-color10</span>: <span class="built_in">rgb</span>(<span class="number">24</span>, <span class="number">51</span>, <span class="number">71</span>);</span><br><span class="line">    <span class="attr">--S-font-color9</span>: <span class="built_in">rgb</span>(<span class="number">24</span>, <span class="number">51</span>, <span class="number">71</span>);</span><br><span class="line">    <span class="attr">--S-font-color8</span>: <span class="built_in">rgb</span>(<span class="number">28</span>, <span class="number">56</span>, <span class="number">41</span>);</span><br><span class="line">    <span class="attr">--S-font-color7</span>: <span class="built_in">rgb</span>(<span class="number">64</span>, <span class="number">44</span>, <span class="number">27</span>);</span><br><span class="line">    <span class="attr">--S-font-color6</span>: <span class="built_in">rgb</span>(<span class="number">73</span>, <span class="number">41</span>, <span class="number">14</span>);</span><br><span class="line">    <span class="attr">--S-font-color5</span>: <span class="built_in">rgb</span>(<span class="number">73</span>, <span class="number">41</span>, <span class="number">14</span>);</span><br><span class="line">    <span class="attr">--S-font-color4</span>: <span class="built_in">rgb</span>(<span class="number">50</span>, <span class="number">48</span>, <span class="number">44</span>);</span><br><span class="line">    <span class="attr">--S-font-color3</span>: <span class="built_in">rgb</span>(<span class="number">50</span>, <span class="number">48</span>, <span class="number">44</span>);</span><br><span class="line">    <span class="attr">--S-font-color2</span>: <span class="built_in">rgb</span>(<span class="number">50</span>, <span class="number">48</span>, <span class="number">44</span>);</span><br><span class="line">    <span class="attr">--S-font-color1</span>: <span class="built_in">rgb</span>(<span class="number">50</span>, <span class="number">48</span>, <span class="number">44</span>);</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color1)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color1)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color1)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color1)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;1&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#FFC3D3</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color13)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color2)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color2)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color2)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color2)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;2&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#FFD18D</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color12)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color3)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color3)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color3)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color3)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;3&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#FDE57A</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color11)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color4)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color4)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color4)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color4)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;4&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#A7FDB4</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color10)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color5)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color5)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color5)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color5)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;5&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#A3F4FF</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color9)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color6)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color6)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color6)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color6)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;6&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#BDE2FF</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color8)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color7)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color7)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color7)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color7)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;7&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background7)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color7)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color8)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color8)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color8)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color8)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;8&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background6)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color6)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color9)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color9)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color9)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color9)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;9&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background5)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color5)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color10)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color10)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color10)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color10)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;10&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background4)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color4)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color11)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color11)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color11)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color11)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;11&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background3)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color3)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color12)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color12)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color12)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color12)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;12&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background2)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color2)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color13)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color13)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color13)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color13)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;13&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:transparent<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color1)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ–‡å­—é¢œè‰²ä¿®æ”¹ */</span></span><br><span class="line"><span class="selector-attr">[style*=<span class="string">&quot;color:var(--b3-font-color2)&quot;</span>]</span>, <span class="selector-attr">[style*=<span class="string">&quot;color: var(--b3-font-color2)&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">3px</span> dashed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é»„è‰²é‚®ç¥¨ */</span></span><br><span class="line"><span class="selector-attr">[style*=<span class="string">&quot;color:var(--b3-font-color3)&quot;</span>]</span>, <span class="selector-attr">[style*=<span class="string">&quot;color: var(--b3-font-color3)&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0em</span> <span class="number">0.3em</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: inherit;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">border-style</span>: dashed;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">235</span>, <span class="number">205</span>);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details class="folding-tag" yellow><summary> é€‚ç”¨äºSavorä¸»é¢˜Sugaré…è‰² </summary>              <div class='content'>              <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span>&#123;</span><br><span class="line"><span class="attr">--b3-font-color1</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attr">--b3-font-color2</span>: <span class="built_in">rgba</span>(<span class="number">105</span>, <span class="number">64</span>, <span class="number">165</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-color3</span>: <span class="built_in">rgb</span>(<span class="number">100</span>, <span class="number">71</span>, <span class="number">58</span>);</span><br><span class="line"><span class="attr">--b3-font-color4</span>: <span class="built_in">rgb</span>(<span class="number">217</span>, <span class="number">115</span>, <span class="number">13</span>);</span><br><span class="line">    <span class="attr">--b3-font-color5</span>: <span class="number">#f5822e</span>;</span><br><span class="line"><span class="attr">--b3-font-color6</span>: <span class="built_in">rgb</span>(<span class="number">223</span>, <span class="number">171</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="attr">--b3-font-color7</span>: <span class="number">#65b84d</span>;</span><br><span class="line"><span class="attr">--b3-font-color8</span>: <span class="built_in">rgb</span>(<span class="number">15</span>, <span class="number">123</span>, <span class="number">108</span>);</span><br><span class="line">    <span class="attr">--b3-font-color9</span>: <span class="number">#0023ff</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-color10</span>: <span class="built_in">rgb</span>(<span class="number">105</span>, <span class="number">64</span>, <span class="number">165</span>);</span><br><span class="line">    <span class="attr">--b3-font-color11</span>: <span class="built_in">rgb</span>(<span class="number">173</span>, <span class="number">26</span>, <span class="number">114</span>);</span><br><span class="line">    <span class="attr">--b3-font-color12</span>: <span class="built_in">rgb</span>(<span class="number">224</span>, <span class="number">62</span>, <span class="number">62</span>);</span><br><span class="line">    <span class="attr">--b3-font-color13</span>: <span class="number">#e81123</span>;</span><br><span class="line">    </span><br><span class="line"><span class="attr">--b3-font-background1</span>: <span class="number">#fbbfbc</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background2</span>: <span class="number">#fed4a4</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background3</span>: <span class="number">#ffe9a1</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background4</span>: <span class="number">#b7edb1</span> <span class="meta">!important</span>;</span><br><span class="line"><span class="attr">--b3-font-background5</span>: <span class="number">#d1ecf1</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background6</span>: <span class="number">#bacefd</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background7</span>: <span class="number">#cdb2fa</span> <span class="meta">!important</span>;</span><br><span class="line"><span class="attr">--b3-font-background8</span>: <span class="number">#e1e1e1</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background9</span>: <span class="number">#fae1de</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-font-background10</span>: <span class="built_in">rgb</span>(<span class="number">221</span>, <span class="number">235</span>, <span class="number">241</span>);</span><br><span class="line">    <span class="attr">--b3-font-background11</span>: <span class="built_in">rgb</span>(<span class="number">234</span>, <span class="number">228</span>, <span class="number">242</span>);</span><br><span class="line">    <span class="attr">--b3-font-background12</span>: <span class="built_in">rgb</span>(<span class="number">244</span>, <span class="number">223</span>, <span class="number">235</span>);</span><br><span class="line">    <span class="attr">--b3-font-background13</span>: <span class="built_in">rgb</span>(<span class="number">251</span>, <span class="number">228</span>, <span class="number">228</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* å¡ç‰‡èƒŒæ™¯ */</span></span><br><span class="line">    <span class="attr">--b3-card-error-color</span>: <span class="built_in">rgb</span>(<span class="number">97</span>, <span class="number">26</span>, <span class="number">21</span>);</span><br><span class="line">    <span class="attr">--b3-card-error-background</span>: <span class="built_in">rgb</span>(<span class="number">238</span>, <span class="number">213</span>, <span class="number">210</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-card-warning-color</span>: <span class="built_in">rgb</span>(<span class="number">102</span>, <span class="number">60</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--b3-card-warning-background</span>: <span class="built_in">rgb</span>(<span class="number">243</span>, <span class="number">225</span>, <span class="number">200</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-card-info-color</span>: <span class="built_in">rgb</span>(<span class="number">13</span>, <span class="number">60</span>, <span class="number">97</span>);</span><br><span class="line">    <span class="attr">--b3-card-info-background</span>: <span class="built_in">rgb</span>(<span class="number">204</span>, <span class="number">223</span>, <span class="number">237</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attr">--b3-card-success-color</span>: <span class="built_in">rgb</span>(<span class="number">30</span>, <span class="number">70</span>, <span class="number">32</span>);</span><br><span class="line">    <span class="attr">--b3-card-success-background</span>: <span class="built_in">rgb</span>(<span class="number">217</span>, <span class="number">239</span>, <span class="number">217</span>) <span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*æ•°æ®åº“*/</span></span><br><span class="line"><span class="attr">--S-font-color13</span>: <span class="built_in">rgb</span>(<span class="number">93</span>, <span class="number">23</span>, <span class="number">21</span>);</span><br><span class="line"><span class="attr">--S-font-color12</span>: <span class="built_in">rgb</span>(<span class="number">76</span>, <span class="number">35</span>, <span class="number">55</span>);</span><br><span class="line"><span class="attr">--S-font-color11</span>: <span class="built_in">rgb</span>(<span class="number">65</span>, <span class="number">36</span>, <span class="number">84</span>);</span><br><span class="line"><span class="attr">--S-font-color10</span>: <span class="built_in">rgb</span>(<span class="number">24</span>, <span class="number">51</span>, <span class="number">71</span>);</span><br><span class="line"><span class="attr">--S-font-color9</span>: <span class="built_in">rgb</span>(<span class="number">24</span>, <span class="number">51</span>, <span class="number">71</span>);</span><br><span class="line"><span class="attr">--S-font-color8</span>: <span class="built_in">rgb</span>(<span class="number">28</span>, <span class="number">56</span>, <span class="number">41</span>);</span><br><span class="line"><span class="attr">--S-font-color7</span>: <span class="built_in">rgb</span>(<span class="number">64</span>, <span class="number">44</span>, <span class="number">27</span>);</span><br><span class="line"><span class="attr">--S-font-color6</span>: <span class="built_in">rgb</span>(<span class="number">73</span>, <span class="number">41</span>, <span class="number">14</span>);</span><br><span class="line"><span class="attr">--S-font-color5</span>: <span class="built_in">rgb</span>(<span class="number">73</span>, <span class="number">41</span>, <span class="number">14</span>);</span><br><span class="line"><span class="attr">--S-font-color4</span>: <span class="built_in">rgb</span>(<span class="number">50</span>, <span class="number">48</span>, <span class="number">44</span>);</span><br><span class="line"><span class="attr">--S-font-color3</span>: <span class="built_in">rgb</span>(<span class="number">50</span>, <span class="number">48</span>, <span class="number">44</span>);</span><br><span class="line"><span class="attr">--S-font-color2</span>: <span class="built_in">rgb</span>(<span class="number">50</span>, <span class="number">48</span>, <span class="number">44</span>);</span><br><span class="line"><span class="attr">--S-font-color1</span>: <span class="built_in">rgb</span>(<span class="number">50</span>, <span class="number">48</span>, <span class="number">44</span>);</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color1)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color1)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color1)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color1)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;1&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#FFC3D3</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color13)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color2)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color2)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color2)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color2)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;2&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#FFD18D</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color12)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color3)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color3)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color3)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color3)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;3&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#FDE57A</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color11)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color4)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color4)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color4)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color4)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;4&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#A7FDB4</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color10)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color5)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color5)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color5)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color5)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;5&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#A3F4FF</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color9)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color6)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color6)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color6)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color6)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;6&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="number">#BDE2FF</span><span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color8)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color7)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color7)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color7)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color7)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;7&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background7)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color7)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color8)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color8)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color8)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color8)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;8&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background6)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color6)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color9)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color9)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color9)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color9)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;9&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background5)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color5)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color10)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color10)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color10)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color10)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;10&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background4)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color4)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color11)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color11)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color11)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color11)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;11&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background3)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color3)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color12)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color12)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color12)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color12)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;12&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:<span class="built_in">var</span>(--b3-font-background2)<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color2)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.custom-attr__avvalue</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color13)&quot;</span>]</span>,<span class="selector-class">.av__cell</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color13)&quot;</span>]</span>,<span class="selector-class">.av__panel</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[style*=<span class="string">&quot;color13)&quot;</span>]</span>,<span class="selector-attr">[data-name=<span class="string">&quot;av-col-option&quot;</span>]</span> <span class="selector-class">.color__square</span><span class="selector-attr">[style*=<span class="string">&quot;color13)&quot;</span>]</span>,<span class="selector-class">.b3-menu__label</span> <span class="selector-class">.b3-chip</span><span class="selector-attr">[data-color=<span class="string">&quot;13&quot;</span>]</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>:transparent<span class="meta">!important</span>;</span><br><span class="line">        <span class="attribute">color</span>:<span class="built_in">var</span>(--S-font-color1)<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ–‡å­—é¢œè‰²ä¿®æ”¹ */</span></span><br><span class="line"><span class="selector-attr">[style*=<span class="string">&quot;color:var(--b3-font-color2)&quot;</span>]</span>, <span class="selector-attr">[style*=<span class="string">&quot;color: var(--b3-font-color2)&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">3px</span> dashed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é»„è‰²é‚®ç¥¨ */</span></span><br><span class="line"><span class="selector-attr">[style*=<span class="string">&quot;color:var(--b3-font-color3)&quot;</span>]</span>, <span class="selector-attr">[style*=<span class="string">&quot;color: var(--b3-font-color3)&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0em</span> <span class="number">0.3em</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: inherit;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">border-style</span>: dashed;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">235</span>, <span class="number">205</span>);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¼•ç”¨å¿«å¤–è§‚ */</span></span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="æ–‡å­—åŠ ç²—é¢œè‰²"><a href="#æ–‡å­—åŠ ç²—é¢œè‰²" class="headerlink" title="æ–‡å­—åŠ ç²—é¢œè‰²"></a>æ–‡å­—åŠ ç²—é¢œè‰²</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.b3-typography</span> <span class="selector-tag">strong</span>, <span class="selector-class">.b3-typography</span> <span class="selector-tag">span</span><span class="selector-attr">[data-type~=strong]</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-tag">strong</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-tag">span</span><span class="selector-attr">[data-type~=strong]</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#73a6ff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨å—ç¾åŒ–"><a href="#å¼•ç”¨å—ç¾åŒ–" class="headerlink" title="å¼•ç”¨å—ç¾åŒ–"></a>å¼•ç”¨å—ç¾åŒ–</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.b3-typography</span> <span class="selector-tag">blockquote</span>, <span class="selector-class">.b3-typography</span> <span class="selector-class">.bq</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-tag">blockquote</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-class">.bq</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">0.25em</span> solid <span class="number">#0b960e</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--b3-list-hover);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">4px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åº•éƒ¨æ é¢œè‰²"><a href="#åº•éƒ¨æ é¢œè‰²" class="headerlink" title="åº•éƒ¨æ é¢œè‰²"></a>åº•éƒ¨æ é¢œè‰²</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.status</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#3C3C3C</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.status</span> * &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#Dadada</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;Cascadia Mono&#x27;</span>, <span class="string">&#x27;Cascadia Code&#x27;</span>, <span class="string">&#x27;Microsoft YaHei UI&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç½‘å€é“¾æ¥"><a href="#ç½‘å€é“¾æ¥" class="headerlink" title="ç½‘å€é“¾æ¥"></a>ç½‘å€é“¾æ¥</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span> <span class="selector-tag">span</span><span class="selector-attr">[data-type~=a]</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#7badff</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--b3-border-color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¢˜å¤´å›¾"><a href="#é¢˜å¤´å›¾" class="headerlink" title="é¢˜å¤´å›¾"></a>é¢˜å¤´å›¾</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.protyle-background__img</span> &#123;</span><br><span class="line"><span class="attribute">opacity</span>:<span class="number">1</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨å¿«å­—ä½“é¢œè‰²"><a href="#å¼•ç”¨å¿«å­—ä½“é¢œè‰²" class="headerlink" title="å¼•ç”¨å¿«å­—ä½“é¢œè‰²"></a>å¼•ç”¨å¿«å­—ä½“é¢œè‰²</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.b3-typography</span> <span class="selector-tag">blockquote</span>, <span class="selector-class">.b3-typography</span> <span class="selector-class">.bq</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-tag">blockquote</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-class">.bq</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#DADADA</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">0.25em</span> solid <span class="number">#0b960e</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--b3-list-hover);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">4px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹å›¾ç‰‡äº®åº¦"><a href="#ä¿®æ”¹å›¾ç‰‡äº®åº¦" class="headerlink" title="ä¿®æ”¹å›¾ç‰‡äº®åº¦"></a>ä¿®æ”¹å›¾ç‰‡äº®åº¦</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.b3-typography</span> <span class="selector-class">.img</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-class">.img</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">    user-<span class="selector-tag">select</span>: none;</span><br><span class="line">    <span class="attribute">word-break</span>: keep-all;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">brightness</span>(<span class="number">0.75</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤§çº²å­—ä½“å¤§å°"><a href="#å¤§çº²å­—ä½“å¤§å°" class="headerlink" title="å¤§çº²å­—ä½“å¤§å°"></a>å¤§çº²å­—ä½“å¤§å°</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.fn__flex-column</span><span class="selector-class">.layout__dockr</span> <span class="selector-class">.file-tree</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»£ç å—å­—ä½“æ ·å¼"><a href="#ä»£ç å—å­—ä½“æ ·å¼" class="headerlink" title="ä»£ç å—å­—ä½“æ ·å¼"></a>ä»£ç å—å­—ä½“æ ·å¼</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.b3-typography</span> <span class="selector-class">.hljs</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-class">.hljs</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Consolas <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs-comment</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é’‰ä½çš„åŒæ—¶æ˜¾ç¤º-icon-å’Œæ ‡é¢˜-CSS-ç‰‡æ®µ"><a href="#é’‰ä½çš„åŒæ—¶æ˜¾ç¤º-icon-å’Œæ ‡é¢˜-CSS-ç‰‡æ®µ" class="headerlink" title="é’‰ä½çš„åŒæ—¶æ˜¾ç¤º icon å’Œæ ‡é¢˜ CSS ç‰‡æ®µ"></a>é’‰ä½çš„åŒæ—¶æ˜¾ç¤º icon å’Œæ ‡é¢˜ CSS ç‰‡æ®µ</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* é’‰ä½çš„åŒæ—¶æ˜¾ç¤º icon å’Œæ ‡é¢˜ CSSç‰‡æ®µ */</span></span><br><span class="line"><span class="selector-class">.layout-tab-bar</span> <span class="selector-class">.item</span><span class="selector-class">.item--pin</span> <span class="selector-class">.item__text</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">    <span class="attribute">max-width</span>: none;</span><br><span class="line">    <span class="attribute">display</span>: flex <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç±»ä¼¼-logseq-çš„å±‚æ¬¡å­å¼¹çº¿-CSS-ç‰‡æ®µ"><a href="#ç±»ä¼¼-logseq-çš„å±‚æ¬¡å­å¼¹çº¿-CSS-ç‰‡æ®µ" class="headerlink" title="ç±»ä¼¼ logseq çš„å±‚æ¬¡å­å¼¹çº¿ CSS ç‰‡æ®µ"></a>ç±»ä¼¼ logseq çš„å±‚æ¬¡å­å¼¹çº¿ CSS ç‰‡æ®µ</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç±»ä¼¼ logseq çš„å±‚æ¬¡å­å¼¹çº¿ CSSç‰‡æ®µ */</span></span><br><span class="line"><span class="comment">/* REF https://github.com/svchord/Rem-Craft */</span></span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.protyle-action</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>:<span class="built_in">rgb</span>(<span class="number">70</span>, <span class="number">110</span>, <span class="number">220</span>);;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.protyle-action</span> <span class="selector-tag">svg</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">padding</span>:<span class="number">0px</span> <span class="number">0px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>:block;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">pointer-events</span>:none;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">34px</span>;</span><br><span class="line">    <span class="attribute">left</span>:-<span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">top</span>:-<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border-style</span>:solid;</span><br><span class="line">    <span class="attribute">border-color</span>:<span class="built_in">rgb</span>(<span class="number">70</span>, <span class="number">110</span>, <span class="number">220</span>);;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>))<span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">bottom</span>:-<span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">border-width</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">38px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border-width</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">2px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)~<span class="selector-class">.li</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>))<span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">border-color</span>:<span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-attr">[data-subtype=o]</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">24px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-attr">[data-subtype=t]</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">28px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>:block;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">pointer-events</span>:none;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">34px</span>;</span><br><span class="line">    <span class="attribute">left</span>:-<span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">top</span>:-<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border-style</span>:solid;</span><br><span class="line">    <span class="attribute">border-color</span>:<span class="built_in">rgb</span>(<span class="number">70</span>, <span class="number">110</span>, <span class="number">220</span>);</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="built_in">calc</span>(<span class="number">100%</span> + <span class="number">4px</span>);</span><br><span class="line">    <span class="attribute">border-width</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-pseudo">:has</span>(+<span class="selector-class">.list</span>)<span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:auto;</span><br><span class="line">    <span class="attribute">bottom</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-attr">[data-type=NodeHeading]</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">185%</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-pseudo">::after</span>,<span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)~<span class="selector-attr">[data-node-id]</span><span class="selector-pseudo">::after</span>,<span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-class">.bq</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-pseudo">::after</span>,<span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-class">.bq</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)~<span class="selector-attr">[data-node-id]</span><span class="selector-pseudo">::after</span>,<span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-class">.sb</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-pseudo">::after</span>,<span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-class">.sb</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)~<span class="selector-attr">[data-node-id]</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">border-color</span>:<span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-attr">[fold=<span class="string">&quot;1&quot;</span>]</span>&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-pseudo">::after</span>,<span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-pseudo">:has</span>(&gt;<span class="selector-class">.block-focus</span>)&gt;<span class="selector-attr">[data-node-id]</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">border-color</span>:<span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-attr">[data-subtype=o]</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>:-<span class="number">10px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-attr">[data-subtype=o]</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">28px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-attr">[data-subtype=t]</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.protyle-action</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>:<span class="built_in">rgb</span>(<span class="number">70</span>, <span class="number">110</span>, <span class="number">220</span>);;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-attr">[data-subtype=t]</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.protyle-action</span> <span class="selector-tag">svg</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">padding</span>:<span class="number">0px</span> <span class="number">0px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-attr">[data-subtype=t]</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">top</span>:-<span class="number">14px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-attr">[data-subtype=t]</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">32px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.protyle-wysiwyg</span> <span class="selector-attr">[data-node-id]</span><span class="selector-class">.li</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-attr">[data-subtype=t]</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)<span class="selector-class">.protyle-task--done</span>&gt;<span class="selector-class">.list</span><span class="selector-pseudo">:has</span>(<span class="selector-class">.block-focus</span>)&gt;<span class="selector-class">.li</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">border-color</span>:<span class="built_in">rgba</span>(<span class="number">139</span>, <span class="number">139</span>, <span class="number">139</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç±»ä¼¼-logseq-çš„å±‚æ¬¡å­å¼¹çº¿-JS-ç‰‡æ®µ"><a href="#ç±»ä¼¼-logseq-çš„å±‚æ¬¡å­å¼¹çº¿-JS-ç‰‡æ®µ" class="headerlink" title="ç±»ä¼¼ logseq çš„å±‚æ¬¡å­å¼¹çº¿ JS ç‰‡æ®µ"></a>ç±»ä¼¼ logseq çš„å±‚æ¬¡å­å¼¹çº¿ JS ç‰‡æ®µ</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç±»ä¼¼ logseq çš„å±‚æ¬¡å­å¼¹çº¿ JSç‰‡æ®µ */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å¾—æŒ‡å®šå—ä½äºçš„ç¼–è¾‘åŒº</span></span><br><span class="line"><span class="comment"> * @params &#123;HTMLElement&#125;</span></span><br><span class="line"><span class="comment"> * @return &#123;HTMLElement&#125; å…‰æ ‡æ‰€åœ¨å—ä½äºçš„ç¼–è¾‘åŒº</span></span><br><span class="line"><span class="comment"> * @return &#123;null&#125; å…‰æ ‡ä¸åœ¨å—å†…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">function getTargetEditor(block) &#123;</span><br><span class="line">    while (block != null &amp;&amp; !block<span class="selector-class">.classList</span><span class="selector-class">.contains</span>(&#x27;protyle-wysiwyg&#x27;)) block = block<span class="selector-class">.parentElement</span>;</span><br><span class="line">    return block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å¾—ç„¦ç‚¹æ‰€åœ¨çš„å—</span></span><br><span class="line"><span class="comment"> * @return &#123;HTMLElement&#125; å…‰æ ‡æ‰€åœ¨å—</span></span><br><span class="line"><span class="comment"> * @return &#123;null&#125; å…‰æ ‡ä¸åœ¨å—å†…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">function getFocusedBlock() &#123;</span><br><span class="line">    if (document<span class="selector-class">.activeElement</span><span class="selector-class">.classList</span><span class="selector-class">.contains</span>(&#x27;protyle-wysiwyg&#x27;)) &#123;</span><br><span class="line">        let block = window<span class="selector-class">.getSelection</span>()?<span class="selector-class">.focusNode</span>?<span class="selector-class">.parentElement</span>; // å½“å‰å…‰æ ‡</span><br><span class="line">        while (block != null &amp;&amp; block<span class="selector-class">.dataset</span><span class="selector-class">.nodeId</span> == null) block = block<span class="selector-class">.parentElement</span>;</span><br><span class="line">        return block;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function focusHandler() &#123;</span><br><span class="line">    <span class="comment">/* è·å–å½“å‰ç¼–è¾‘åŒº */</span></span><br><span class="line">    let block = getFocusedBlock(); // å½“å‰å…‰æ ‡æ‰€åœ¨å—</span><br><span class="line">    <span class="comment">/* å½“å‰å—å·²ç»è®¾ç½®ç„¦ç‚¹ */</span></span><br><span class="line">    if (block?<span class="selector-class">.classList</span><span class="selector-class">.contains</span>(`block-focus`)) return;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* å½“å‰å—æœªè®¾ç½®ç„¦ç‚¹ */</span></span><br><span class="line">    const editor = getTargetEditor(block); // å½“å‰å…‰æ ‡æ‰€åœ¨å—ä½äºçš„ç¼–è¾‘åŒº</span><br><span class="line">    if (editor) &#123;</span><br><span class="line">        editor<span class="selector-class">.querySelectorAll</span>(`<span class="selector-class">.block-focus</span>`)<span class="selector-class">.forEach</span>((element) =&gt; element<span class="selector-class">.classList</span><span class="selector-class">.remove</span>(`block-focus`));</span><br><span class="line">        block<span class="selector-class">.classList</span><span class="selector-class">.add</span>(`block-focus`);</span><br><span class="line">        // setSelector(block);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function bulletMain() &#123;</span><br><span class="line">    // è·Ÿè¸ªå½“å‰æ‰€åœ¨å—</span><br><span class="line">    window<span class="selector-class">.addEventListener</span>(&#x27;mouseup&#x27;, focusHandler, true);</span><br><span class="line">    window<span class="selector-class">.addEventListener</span>(&#x27;keyup&#x27;, focusHandler, true);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(async () =&gt; &#123;</span><br><span class="line">    bulletMain();</span><br><span class="line">    console<span class="selector-class">.log</span>(&#x27;åŠ è½½å­å¼¹çº¿æˆåŠŸ&#x27;)</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h2 id="å»é™¤å›¾ç‰‡åçš„å¤šä½™ç©ºè¡Œ-CSS-ç‰‡æ®µ"><a href="#å»é™¤å›¾ç‰‡åçš„å¤šä½™ç©ºè¡Œ-CSS-ç‰‡æ®µ" class="headerlink" title="å»é™¤å›¾ç‰‡åçš„å¤šä½™ç©ºè¡Œ CSS ç‰‡æ®µ"></a>å»é™¤å›¾ç‰‡åçš„å¤šä½™ç©ºè¡Œ CSS ç‰‡æ®µ</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å»é™¤å›¾ç‰‡åçš„å¤šä½™ç©ºè¡Œ CSSç‰‡æ®µ */</span></span><br><span class="line"><span class="selector-class">.b3-typography</span> <span class="selector-class">.img</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[style]</span>), <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-class">.img</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[style]</span>) &#123;</span><br><span class="line">   <span class="attribute">display</span>:inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»£ç å—å­—ä½“è®¾ç½®"><a href="#ä»£ç å—å­—ä½“è®¾ç½®" class="headerlink" title="ä»£ç å—å­—ä½“è®¾ç½®"></a>ä»£ç å—å­—ä½“è®¾ç½®</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.b3-list-item</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">35px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--b3-theme-on-background);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">1px</span> <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.b3-typography</span> <span class="selector-tag">blockquote</span>, <span class="selector-class">.b3-typography</span> <span class="selector-class">.bq</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-tag">blockquote</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-class">.bq</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">0.25em</span> solid <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--b3-list-hover);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">4px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è™šçº¿å¤‡æ³¨"><a href="#è™šçº¿å¤‡æ³¨" class="headerlink" title="è™šçº¿å¤‡æ³¨"></a>è™šçº¿å¤‡æ³¨</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* è™šçº¿å¤‡æ³¨ CSSç‰‡æ®µ https://github.com/TCOTC/siyuan-css-dashed-line-memo */</span></span><br><span class="line"><span class="selector-class">.b3-typography</span> <span class="selector-tag">span</span><span class="selector-attr">[data-type~=inline-memo]</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-tag">span</span><span class="selector-attr">[data-type~=inline-memo]</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">2px</span> dashed <span class="built_in">var</span>(--b3-theme-primary) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="éšè—å¤§çº²å‰é¢çš„å—æ ‡è®°-H"><a href="#éšè—å¤§çº²å‰é¢çš„å—æ ‡è®°-H" class="headerlink" title="éšè—å¤§çº²å‰é¢çš„å—æ ‡è®° H"></a>éšè—å¤§çº²å‰é¢çš„å—æ ‡è®° H</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sy__outline</span> <span class="selector-class">.b3-list-item__graphic</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¡Œé—´è·"><a href="#è¡Œé—´è·" class="headerlink" title="è¡Œé—´è·"></a>è¡Œé—´è·</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.protyle-wysiwyg</span>&gt;<span class="selector-class">.p</span> &#123;</span><br><span class="line"> <span class="attribute">line-height</span>: <span class="number">2.3</span>;  <span class="comment">/*æ®µè½å—çš„è¡Œé—´è·ï¼Œæ®µé—´è·çš„è¯å‰é¢è¯¥æ”¹æˆmargin*/</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡æ¡£æ ‘å—é—´è·"><a href="#æ–‡æ¡£æ ‘å—é—´è·" class="headerlink" title="æ–‡æ¡£æ ‘å—é—´è·"></a>æ–‡æ¡£æ ‘å—é—´è·</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.b3-list-item</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">35px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--b3-theme-on-background);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">1px</span> <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.b3-typography</span> <span class="selector-tag">blockquote</span>, <span class="selector-class">.b3-typography</span> <span class="selector-class">.bq</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-tag">blockquote</span>, <span class="selector-class">.protyle-wysiwyg</span> <span class="selector-class">.bq</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">0.25em</span> solid <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--b3-list-hover);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">4px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ ‡é¢˜å±…ä¸­"><a href="#æ ‡é¢˜å±…ä¸­" class="headerlink" title="æ ‡é¢˜å±…ä¸­"></a>æ ‡é¢˜å±…ä¸­</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.protyle-title__input</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="plugin-custom-fonts-style"><a href="#plugin-custom-fonts-style" class="headerlink" title="plugin-custom-fonts-style"></a>plugin-custom-fonts-style</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Twemoji Mozilla: https://github.com/mozilla/twemoji-colr */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;Twemoji Mozilla&quot;</span>;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;plugins/custom-fonts/static/fonts/Twemoji.Mozilla/Twemoji.Mozilla-0.7.0.ttf&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attr">--b3-font-family-emoji</span>: <span class="string">&quot;Twemoji Mozilla&quot;</span>, <span class="string">&quot;Segoe UI Emoji&quot;</span>, <span class="string">&quot;Segoe UI Symbol&quot;</span>, <span class="string">&quot;Segoe UI&quot;</span>, <span class="string">&quot;Apple Color Emoji&quot;</span>, <span class="string">&quot;Noto Color Emoji&quot;</span>, <span class="string">&quot;Android Emoji&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ€æºç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€æºç¬”è®°ç›¸å…³CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰Calloutæ ·å¼</title>
      <link href="/posts/442fdc66.html"/>
      <url>/posts/442fdc66.html</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨æ’ä»¶ï¼š<code>Savor Callout</code></p><p><img src="https://cdn.jsdelivr.net/gh/NorthPoet/images/images/image-20240630102100-xcvud18.png" alt="image">â€‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Info&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ğŸ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;New Callout&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;bg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;light&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(8, 109, 221, 0.15)&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(53, 76, 75, .5)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;box&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;light&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(238, 245, 248, .3)&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgbaa(53, 76, 75, 1)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hide&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;custom&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/NorthPoet/images/images/image-20240630102033-95ggmba.png" alt="image">â€‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;success&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ğŸƒ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;New Callout&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;bg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;light&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(8, 185, 78, 0.1)&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(53, 76, 75, .5)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;box&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;light&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(238, 245, 248, .3)&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgbaa(53, 76, 75, 1)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hide&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;custom&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/NorthPoet/images/images/image-20240630102115-gje9wuz.png" alt="image">â€‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Example&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ğŸ“Œ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;New Callout&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;bg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;light&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(217, 201, 248, 0.38)&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(53, 76, 75, .5)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;box&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;light&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(238, 245, 248, .3)&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgbaa(53, 76, 75, 1)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hide&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;custom&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/NorthPoet/images/images/image-20240630102144-uvspsd3.png" alt="image">â€‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Danger&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ğŸ–Œ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;New Callout&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;bg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;light&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(255, 235, 236, 80)&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(53, 76, 75, .5)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;box&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;light&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgba(238, 245, 248, .3)&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rgbaa(53, 76, 75, 1)&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hide&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;custom&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ€æºç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€æºç¬”è®°ç›¸å…³CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºç‹¬å¤„</title>
      <link href="/posts/750cb0cc.html"/>
      <url>/posts/750cb0cc.html</url>
      
        <content type="html"><![CDATA[<p>ä½ å¼€å§‹æœ‰ä¸€ç‚¹æŠ‘éƒçš„è¿¹è±¡äº†ï¼Œæ˜¯ä¸æ˜¯æœ€è¿‘å­¦ä¹ å‹åŠ›å¤§ï¼Œæˆ–è€…æ˜¯ä¸å®¿å‹åŒå­¦çš„å…³ç³»å¤„ç†ä¸å¤ªå¥½ï¼Œå»ºè®®ä½ ä¸è¦æ€»æ˜¯æŠŠè‡ªå·±å°é—­åœ¨ä¸€ä¸ªç‹­å°çš„ç©ºé—´ï¼Œå¤šå‡ºå»èµ°èµ°ï¼Œä¹Ÿå¯ä»¥å‡ºå»åšåšè¿åŠ¨ï¼Œæˆ–è€…æ˜¯å‚åŠ å­¦æ ¡ä¸€äº›é›†ä½“æ´»åŠ¨ï¼Œæˆ–è€…å»å›¾ä¹¦é¦†å‡ æœ¬ä¹¦çœ‹ï¼Œå¿ƒæƒ…ä¼šèˆ’ç•…å¾ˆå¤šï¼Œå­¤ç‹¬æ„Ÿä¹Ÿä¼šè‡ªç„¶è€Œç„¶æ¶ˆé™¤äº†ï¼Œå¦‚æœä½ æ€»æ˜¯ä¹ æƒ¯æ€§çš„å›åˆ°å®¿èˆèººåœ¨åºŠä¸Šç©æ‰‹æœºï¼Œä¹…è€Œä¹…ä¹‹ä½ ä¼šå¯¹æ‰‹æœºäº§ç”Ÿä¾èµ–ï¼Œç”šè‡³ç½‘ç»œä¸Šçš„ä¸€äº›é”™è¯¯çš„è§‚å¿µä¼šç›´æ¥å½±å“ä½ çš„æ€æƒ³ï¼Œæ²‰è¿·ä¸çŸ­è§†é¢‘åï¼Œå®ƒä¼šå ç”¨ä½ å¤§é‡çš„ä¸ªäººæ—¶é—´ï¼Œä¸€æ—¦äº§ç”Ÿä¾èµ–ï¼Œå°±æ˜¯å¾ˆéš¾ä¸“æ³¨çš„å­¦ä¹ ï¼Œåˆ¶å®šçš„å­¦ä¹ è®¡åˆ’ä¹Ÿä¼šæ²‰è¿·ç½‘ç»œéš¾ä»¥æ‰§è¡Œä¸‹å»ï¼Œç”šè‡³ä¼šå› ä¸ºç½‘ç»œä¸Šä¸€äº›é”™è¯¯çš„è§‚å¿µä¸­é€”åœæ­¢è®¡åˆ’ã€‚è¿˜æœ‰å°±æ˜¯ä½ çš„èº«ä½“ï¼Œç”±äºä½ ä¹ æƒ¯æ€§èººåœ¨åºŠä¸Šç©æ‰‹æœºï¼Œæ²‰è¿·äºç½‘ç»œï¼Œä¹…è€Œä¹…ä¹‹ä½ çš„èº«ä½“ç´ è´¨ä¼šæ…¢æ…¢å˜å·®ï¼Œèº«ä½“å¼€å§‹ä¼šå‡ºç°ä¸€äº›ç–¾ç—…ï¼Œåˆ°åæœŸçš„è¯ä½ å¯èƒ½å°±éœ€è¦ç»å¸¸å»åŒ»é™¢äº†ã€‚ä½ çš„ç¤¾äº¤åœˆä¹Ÿä¼šå› ä¸ºä½ ç»å¸¸å°é—­åœ¨ä¸€ä¸ªç©ºé—´é‡Œé¢æ— æ³•æ‹“å±•ï¼Œä½ çš„æ€ç»´èƒ½åŠ›ä¸è¡¨è¾¾èƒ½åŠ›ä¹Ÿä¼šé€æ¸è¡°é€€ã€‚è¿˜æœ‰å°±æ˜¯ä½ è®¤ä¸ºäºŒæœ¬ä¸å¥½ï¼Œé‚£ä½ çŸ¥ä¸çŸ¥é“å…¶å®åœ¨ä¸­å›½ï¼Œèƒ½å¤Ÿæœ‰æ‹¥æœ‰æœ¬ç§‘å­¦å†çš„æ¯”ä¾‹å…¶å®å¹¶ä¸é«˜ï¼Œç»å¤§å¤šäººå­¦å†åªæœ‰åˆä¸­åˆ°å¤§ä¸“çš„å­¦å†ï¼Œä½ è¿™ä¸ªå­¦å†ï¼Œä½ å»é‚£äº›çŸ¥åçš„å…¬å¸ä¸æ”¿åºœå•ä½å¯èƒ½ä¸ä¼šå—å¾…è§ï¼Œä½†å¦‚æœæ˜¯å»ä¸€äº›æ™®é€šçš„å·¥å‚ï¼Œä½ å·²ç»æ˜¯ç®—æ˜¯é«˜å­¦å†çš„äººæ‰ï¼Œèƒ½å¤Ÿèƒœä»»æŠ€æœ¯å·¥ç¨‹å¸ˆä¸åŠå…¬å®¤çš„æ–‡èŒå·¥ä½œï¼Œè€Œä¸æ˜¯å»æµæ°´çº¿æ‰“èºä¸ã€‚è¿˜æœ‰å°±æ˜¯ä½ è§‰å¾—äºŒæœ¬ä¸å¥½ï¼Œå¯èƒ½æ˜¯åˆ«äººç»™ä½ çŒè¾“çš„è§‚å¿µï¼Œä½†å¦‚æœä½ æ¥å—äº†è¿™ç§è§‚å¿µï¼Œä½ çš„æ€æƒ³ä¸è¡Œä¸ºä¼šæ”¶åˆ°å¾ˆå¤§å½±å“ï¼Œæ€æƒ³ä¼šå˜å¾—è‡ªå‘ï¼Œä¸æ€è¿›å–ï¼Œè¡Œä¸ºä¹Ÿä¼šå˜å¾—ç¼ºä¹åŠ¨åŠ›ï¼Œå› ä¸ºä»å¿ƒç†ä¸Šä½ å·²ç»å®šä¹‰äº†ä½ è‡ªå·±æ˜¯ä¸è¡Œï¼Œä½ ç»™è‡ªå·±è´´ä¸Šçš„æ ‡ç­¾ï¼Œä¼šå¾ˆå¤§ç¨‹åº¦å½±å“æ—¥åçš„æ‰€æœ‰è¡ŒåŠ¨ã€‚ä¸è¦å°ç§å¿ƒç†å¯¹äººçš„å½±å“ï¼Œå¾€æ­£é¢çœ‹ä»–å¯ä»¥ä½¿ä¸€ä¸ªäººå˜å¾—è¶Šæ¥è¶Šä¸Šè¿›ï¼Œå¾€è´Ÿé¢çœ‹å®ƒä¹Ÿå¯ä»¥åœ¨æ— å½¢ä¸­åºŸæ‰ä¸€ä¸ªäººã€‚æŠ±æ€¨æ˜¯ä¸ä¼šå¯¹ç°çŠ¶æœ‰ä»»ä½•æ”¹å˜çš„ï¼Œåªä¼šé€æ¸è®©ä½ ä¸§å¤±æ–—å¿—å¯¹ç”Ÿæ´»å¤±å»å¸Œæœ›ï¼Œä½ å”¯æœ‰æŠ±æœ‰ä¸€ç§æ°¸ä¸æœè¾“çš„ç²¾ç¥ï¼Œä½ æ‰ä¼šæœ‰é‚£å‹‡æ°”ï¼Œæ’å¿ƒï¼Œæ¯…åŠ›å»å…‹æœé˜»ç¢å‰è¿›é“è·¯çš„æ‰€æœ‰å›°éš¾ã€‚å…¶å®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¥½æ‚²å“€ï¼Œå¦‚æœæ˜¯ç”Ÿæ´»ç»™ä½ åˆ¶é€ å„ç§å›°éš¾ï¼Œé‚£ä½ åº”è¯¥æƒ³ç€å¦‚ä½•è§£å†³è¿™ä¸ªå›°éš¾ï¼Œåˆæˆ–è€…æ˜¯æŸäº›äººç»™ä½ åˆ¶é€ äº†é—®é¢˜ï¼Œä½ å°±è¦æƒ³å¦‚ä½•å»è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå½“ä½ èƒ½å¤Ÿå‡­å€Ÿä½ çš„æ™ºæ…§æŠŠå›°éš¾è§£å†³ï¼Œé‚£ä¹ˆåœ¨ä½ å‰è¿›é“è·¯ä¸Šçš„é˜»ç¢å°±å˜å°‘äº†ï¼Œä½ çš„äººç”Ÿé“è·¯ä¼šè¶Šæ¥è¶Šé¡ºç•…ã€‚ç”šè‡³ä¸€äº›æ›¾ç»çš„ç¼ºç‚¹ä¹Ÿä¼šå› ä¸ºç»è¿‡æ”¹å˜åå˜æˆä½ çš„ä¼˜ç‚¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æœˆå½±å¢¨ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘åœ¨äººé—´å‡‘æ•°çš„æ—¥å­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly-è‡ªç”¨æ•°æ®è®°å½•</title>
      <link href="/posts/59798.html"/>
      <url>/posts/59798.html</url>
      
        <content type="html"><![CDATA[<h2 id="åšå®¢å®½å±é€‚é…ï¼ˆè‡ªç”¨ï¼‰"><a href="#åšå®¢å®½å±é€‚é…ï¼ˆè‡ªç”¨ï¼‰" class="headerlink" title="åšå®¢å®½å±é€‚é…ï¼ˆè‡ªç”¨ï¼‰"></a>åšå®¢å®½å±é€‚é…ï¼ˆè‡ªç”¨ï¼‰</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å…¨å±€å®½åº¦ */</span></span><br><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">1460px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¾§è¾¹å¡ç‰‡æ å®½åº¦ */</span></span><br><span class="line"><span class="selector-class">.aside-content</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">318px</span>;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¹³æ¿å°ºå¯¸è‡ªé€‚åº”(ä¸å¯ç”¨ä¾§è¾¹æ å®½åº¦é™åˆ¶) */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">900px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.aside-content</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.layout</span><span class="selector-class">.hide-aside</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">1400px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details class="folding-tag" cyan><summary> åšå®¢å®½å±é€‚é…æ›´æ–° </summary>              <div class='content'>              <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å…¨å±€å®½åº¦ */</span></span><br><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">1460px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¾§è¾¹å¡ç‰‡æ å®½åº¦ */</span></span><br><span class="line"><span class="selector-class">.aside-content</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">318px</span>;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.layout</span>&gt;<span class="selector-tag">div</span><span class="selector-pseudo">:first-child</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">318px</span>);</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">  -o-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">  -ms-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">3s</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¹³æ¿å°ºå¯¸è‡ªé€‚åº”(ä¸å¯ç”¨ä¾§è¾¹æ å®½åº¦é™åˆ¶) */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">900px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.aside-content</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.layout</span><span class="selector-class">.hide-aside</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">1400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.post-bg</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">460px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="ä¸ªäººä¿¡æ¯å¡ç‰‡èƒŒæ™¯å›¾"><a href="#ä¸ªäººä¿¡æ¯å¡ç‰‡èƒŒæ™¯å›¾" class="headerlink" title="ä¸ªäººä¿¡æ¯å¡ç‰‡èƒŒæ™¯å›¾"></a>ä¸ªäººä¿¡æ¯å¡ç‰‡èƒŒæ™¯å›¾</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">https://s11.ax1x.com/2023/05/02/p9GWEin.jpg</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-attachment</span>: inherit;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">https://s11.ax1x.com/2023/05/02/p9GWVGq.jpg</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-attachment</span>: inherit;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¸ªäººä¿¡æ¯å¡ç‰‡èƒŒæ™¯å›¾ */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¸ªäººå¡ç‰‡ä¿¡æ¯ */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">24px</span> <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« å¡ç‰‡æ“¦äº®åŠ¨ç”»"><a href="#æ–‡ç« å¡ç‰‡æ“¦äº®åŠ¨ç”»" class="headerlink" title="æ–‡ç« å¡ç‰‡æ“¦äº®åŠ¨ç”»"></a>æ–‡ç« å¡ç‰‡æ“¦äº®åŠ¨ç”»</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> <span class="selector-class">.post_cover</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#recent-posts</span>&gt;<span class="selector-class">.recent-post-item</span> <span class="selector-class">.post_cover</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,.<span class="number">5</span>);</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: -webkit-transform .<span class="number">3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: -moz-transform .<span class="number">3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: -o-transform .<span class="number">3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: -ms-transform .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">transition</span>: transform .<span class="number">3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">60deg</span>) <span class="built_in">translate3d</span>(<span class="number">15%</span>,-<span class="number">150%</span>,<span class="number">0</span>);</span><br><span class="line">    -moz-<span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">60deg</span>) <span class="built_in">translate3d</span>(<span class="number">15%</span>,-<span class="number">150%</span>,<span class="number">0</span>);</span><br><span class="line">    -o-<span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">60deg</span>) <span class="built_in">translate3d</span>(<span class="number">15%</span>,-<span class="number">150%</span>,<span class="number">0</span>);</span><br><span class="line">    -ms-<span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">60deg</span>) <span class="built_in">translate3d</span>(<span class="number">15%</span>,-<span class="number">150%</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">60deg</span>) <span class="built_in">translate3d</span>(<span class="number">15%</span>,-<span class="number">150%</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#recent-posts</span>&gt;<span class="selector-class">.recent-post-item</span> <span class="selector-class">.post_cover</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">60deg</span>) <span class="built_in">translate3d</span>(<span class="number">0</span>,<span class="number">130%</span>,<span class="number">0</span>);</span><br><span class="line">    -moz-<span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">60deg</span>) <span class="built_in">translate3d</span>(<span class="number">0</span>,<span class="number">130%</span>,<span class="number">0</span>);</span><br><span class="line">    -o-<span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">60deg</span>) <span class="built_in">translate3d</span>(<span class="number">0</span>,<span class="number">130%</span>,<span class="number">0</span>);</span><br><span class="line">    -ms-<span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">60deg</span>) <span class="built_in">translate3d</span>(<span class="number">0</span>,<span class="number">130%</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale3d</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="built_in">rotate</span>(<span class="number">60deg</span>) <span class="built_in">translate3d</span>(<span class="number">0</span>,<span class="number">130%</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ–‡ç« å¡ç‰‡æ“¦äº®åŠ¨ç”» */</span></span><br></pre></td></tr></table></figure><h2 id="ç¿»é¡µæŒ‰é’®"><a href="#ç¿»é¡µæŒ‰é’®" class="headerlink" title="ç¿»é¡µæŒ‰é’®"></a>ç¿»é¡µæŒ‰é’®</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç¿»é¡µæŒ‰é’®å±…ä¸­ */</span></span><br><span class="line"><span class="selector-id">#pagination</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« æ ‡é¢˜å±…ä¸­"><a href="#æ–‡ç« æ ‡é¢˜å±…ä¸­" class="headerlink" title="æ–‡ç« æ ‡é¢˜å±…ä¸­"></a>æ–‡ç« æ ‡é¢˜å±…ä¸­</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#page-header</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="comment">/* è¿™é‡Œçš„bottomï¼šçš„å€¼å¯ä»¥è°ƒèŠ‚æ ‡é¢˜çš„ä¸Šä¸‹ä½ç½® */</span></span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">8%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« å­—ä½“"><a href="#æ–‡ç« å­—ä½“" class="headerlink" title="æ–‡ç« å­—ä½“"></a>æ–‡ç« å­—ä½“</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;HarmonyOS_Sans_SC_Medium&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>:HarmonyOS_Sans_SC_Medium;<span class="attribute">font-style</span>: normal;<span class="attribute">font-display</span>: swap;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://cdn.jsdelivr.net/gh/irozhi/HarmonyOS-Sans/HarmonyOS_Sans_SC/HarmonyOS_Sans_SC_Medium.woff2&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>),</span><br><span class="line">       <span class="built_in">url</span>(<span class="string">&#x27;https://cdn.jsdelivr.net/gh/irozhi/HarmonyOS-Sans/HarmonyOS_Sans_SC/HarmonyOS_Sans_SC_Medium.woff&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« è¡Œé—´è·"><a href="#æ–‡ç« è¡Œé—´è·" class="headerlink" title="æ–‡ç« è¡Œé—´è·"></a>æ–‡ç« è¡Œé—´è·</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ–‡ç« è¡Œé—´è· */</span></span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2.3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ—¶é—´è½´èƒŒæ™¯å›¾"><a href="#æ—¶é—´è½´èƒŒæ™¯å›¾" class="headerlink" title="æ—¶é—´è½´èƒŒæ™¯å›¾"></a>æ—¶é—´è½´èƒŒæ™¯å›¾</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æ—¶é—´è½´æ ·å¼ */</span></span><br><span class="line"><span class="selector-id">#page-header</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="comment">/* background-color: #49b1f5; */</span></span><br><span class="line">  <span class="attribute">background-position</span>: center center;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">  -o-<span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">  -ms-<span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.5s</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">https://cdn.jsdelivr.net/gh/NorthPoet/images/images/picture-2312336.jpg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="èœå•å­—ä½“æ ·å¼"><a href="#èœå•å­—ä½“æ ·å¼" class="headerlink" title="èœå•å­—ä½“æ ·å¼"></a>èœå•å­—ä½“æ ·å¼</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å­—ä½“ */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: ZhuZiAYuanJWD;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">https://npm.elemecdn.com/anzhiyu-blog@1.1.6/fonts/ZhuZiAWan.woff2</span>);</span><br><span class="line">  <span class="attribute">font-display</span>: swap;</span><br><span class="line">  <span class="attribute">font-weight</span>: lighter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#menus</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;ZhuZiAYuanJWD&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span><span class="selector-id">#site-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: ZhuZiAYuanJWD;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">3em</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.article-title</span>,</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.blog-slider__title</span>,</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.categoryBar-list-link</span>,</span><br><span class="line"><span class="selector-tag">h1</span><span class="selector-class">.post-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: ZhuZiAYuanJWD;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯¼èˆªæ å±…ä¸­"><a href="#å¯¼èˆªæ å±…ä¸­" class="headerlink" title="å¯¼èˆªæ å±…ä¸­"></a>å¯¼èˆªæ å±…ä¸­</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å¯¼èˆªæ  */</span></span><br><span class="line"><span class="comment">/* ä¸€çº§èœå•å±…ä¸­ */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: fit-content <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å­èœå•æ¨ªå‘å±•ç¤º */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è¿™é‡Œçš„2æ˜¯ä»£è¡¨å¯¼èˆªæ çš„ç¬¬2ä¸ªå…ƒç´ ï¼Œå³æœ‰å­èœå•çš„å…ƒç´ ï¼Œå¯ä»¥æŒ‰è‡ªå·±éœ€æ±‚ä¿®æ”¹ */</span></span><br><span class="line"><span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">125px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¡ç‰‡è¾¹æ¡†"><a href="#å¡ç‰‡è¾¹æ¡†" class="headerlink" title="å¡ç‰‡è¾¹æ¡†"></a>å¡ç‰‡è¾¹æ¡†</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cardHover</span>,</span><br><span class="line"><span class="selector-class">.error404</span> <span class="selector-id">#error-wrap</span> <span class="selector-class">.error-content</span>,</span><br><span class="line"><span class="selector-class">.layout</span>&gt;<span class="selector-tag">div</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.recent-posts</span>),</span><br><span class="line"><span class="selector-id">#recent-posts</span>&gt;<span class="selector-class">.recent-post-item</span>,</span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span>,</span><br><span class="line"><span class="selector-class">.layout</span>&gt;<span class="selector-class">.recent-posts</span> <span class="selector-class">.pagination</span>&gt;*<span class="selector-pseudo">:not</span>(<span class="selector-class">.space</span>) &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--card-bg);</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--card-box-shadow);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--card-box-shadow);</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">  -o-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">  -ms-<span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cardHover</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.error404</span> <span class="selector-id">#error-wrap</span> <span class="selector-class">.error-content</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.layout</span>&gt;<span class="selector-tag">div</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.recent-posts</span>)<span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#recent-posts</span>&gt;<span class="selector-class">.recent-post-item</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.layout</span>&gt;<span class="selector-class">.recent-posts</span> <span class="selector-class">.pagination</span>&gt;*<span class="selector-pseudo">:not</span>(<span class="selector-class">.space</span>)<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--card-hover-box-shadow);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--card-hover-box-shadow);</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#425AEF</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¸¦æ¡†æ¡†çš„åˆ†ç±»æ ·å¼"><a href="#å¸¦æ¡†æ¡†çš„åˆ†ç±»æ ·å¼" class="headerlink" title="å¸¦æ¡†æ¡†çš„åˆ†ç±»æ ·å¼"></a>å¸¦æ¡†æ¡†çš„åˆ†ç±»æ ·å¼</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.category-lists</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">width</span>: fit-content;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.2em</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.2em</span> <span class="number">0.5em</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0.5em</span> <span class="number">0.5em</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  -webkit-<span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">  -webkit-<span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1.5px</span> solid <span class="number">#e3e8f7</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#2c2d300c</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.category-lists</span> <span class="selector-class">.category-list</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5em</span> <span class="number">0</span> <span class="number">3em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¸¦æ¡†æ¡†çš„æ ‡ç­¾æ ·å¼"><a href="#å¸¦æ¡†æ¡†çš„æ ‡ç­¾æ ·å¼" class="headerlink" title="å¸¦æ¡†æ¡†çš„æ ‡ç­¾æ ·å¼"></a>å¸¦æ¡†æ¡†çš„æ ‡ç­¾æ ·å¼</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tag-cloud-list</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: fit-content;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.2em</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.2em</span> <span class="number">0.5em</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0.5em</span> <span class="number">0.5em</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  -webkit-<span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">  -webkit-<span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1.5px</span> solid <span class="number">#e3e8f7</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#2c2d300c</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tag-cloud-list</span><span class="selector-class">.is-center</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5em</span> <span class="number">0</span> <span class="number">3em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« å¤´éƒ¨å¢åŠ é«˜åº¦"><a href="#æ–‡ç« å¤´éƒ¨å¢åŠ é«˜åº¦" class="headerlink" title="æ–‡ç« å¤´éƒ¨å¢åŠ é«˜åº¦"></a>æ–‡ç« å¤´éƒ¨å¢åŠ é«˜åº¦</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  <span class="selector-id">#page-header</span><span class="selector-class">.post-bg</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">460px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¾§è¾¹æ æ ‡ç­¾ç»Ÿä¸€å­—ä½“å¤§å°"><a href="#ä¾§è¾¹æ æ ‡ç­¾ç»Ÿä¸€å­—ä½“å¤§å°" class="headerlink" title="ä¾§è¾¹æ æ ‡ç­¾ç»Ÿä¸€å­—ä½“å¤§å°"></a>ä¾§è¾¹æ æ ‡ç­¾ç»Ÿä¸€å­—ä½“å¤§å°</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä¾§è¾¹æ æ ‡ç­¾ç»Ÿä¸€å­—ä½“å¤§å° */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-tag-cloud</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç»éªŒåˆ†äº« </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterflyä¸»é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½»è¯­æ—¶å…‰</title>
      <link href="/posts/8ebfad52.html"/>
      <url>/posts/8ebfad52.html</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer"><div class="timeline pink"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>å°åŒ—ã®ç¢ç¢å¿µ</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-16 11:18</p></div></div><div class='timeline-item-content'><p>ç”Ÿæ´»ä¸æ˜¯ä¸ºäº†èµ¶è·¯ ï¼Œè€Œæ˜¯ä¸ºäº†æ„Ÿå—ç”Ÿæ´»ä¸å¬ä¸–ä¿—çš„è€³è¯­ ï¼Œåªçœ‹è‡ªå·±å–œæ¬¢çš„é£æ™¯</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-16 11:18</p></div></div><div class='timeline-item-content'><p>ä¸æ˜¯åœ¨è§£å†³bugå°±æ˜¯åœ¨è§£å†³bugçš„è·¯ä¸Š~~~</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-15 09:58</p></div></div><div class='timeline-item-content'><p>åˆæ˜¯ä¸€ä¸ªå¿™ç¢Œçš„å°å‡æœŸ</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-06 23:28</p></div></div><div class='timeline-item-content'><p>æ˜¯éæˆè´¥è½¬å¤´ç©º ï¼Œé’å±±ä¾æ—§åœ¨ ï¼Œå‡ åº¦å¤•é˜³çº¢<br>ä¸€å£¶æµŠé…’å–œç›¸é€¢ ï¼Œå¤ä»Šå¤šå°‘äº‹ ï¼Œéƒ½ä»˜ç¬‘è°ˆä¸­<br><psw>å¼€å§‹å›å½’ç°å®ç”Ÿæ´»äº†ï¼</psw></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-06 23:28</p></div></div><div class='timeline-item-content'><p>è‡ªå·±åŠ¨æ‰‹ä¿®æ”¹äº†ä¸‹æ€æºç¬”è®°çš„æ–‡å­—èƒŒæ™¯é¢œè‰²å’Œæ•°æ®åº“é¢œè‰² ï¼Œæ•´ä½“ä¸Šçœ‹ç€èˆ’æœå¤šäº†</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-05 21:29</p></div></div><div class='timeline-item-content'><p>äººæœ€å¤§çš„å¯¹æ‰‹ï¼Œå°±æ˜¯è‡ªå·±çš„æ‡’æƒ°ï¼›åšä¸€ä»¶äº‹å¹¶ä¸éš¾ï¼Œéš¾çš„åœ¨äºåšæŒï¼›åšæŒä¸€ä¸‹ä¹Ÿä¸éš¾ï¼Œéš¾çš„æ˜¯åšæŒåˆ°åº•ï¼›ä½ å…¨åŠ›ä»¥èµ´äº†å†ä¸æˆåŠŸï¼Œæ‰æœ‰èµ„æ ¼è¯´è‡ªå·±è¿æ°”ä¸å¥½ï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-04 08:00</p></div></div><div class='timeline-item-content'><p>æˆ‘çš„å¢“ç¢‘ä¸‹æœ‰ä¸€å…·å°¸ä½“ï¼Œå’Œæˆ‘é•¿å¾—ä¸€æ¨¡ä¸€æ ·ï¼Œå´å¤šäº†ä¸€ä¸ç¨šæ°”ä¸å¤©çœŸã€‚ä¸çŸ¥ä½•æ—¶æœ¨æ¿è¢«äººæ‰“å¼€äº†ï¼Œæˆ‘å¹¶ä¸æ‹…å¿ƒï¼Œæ¯•ç«Ÿè¿™æ˜¯å¤§å®¶è®©æˆ‘åŸ‹çš„ã€‚ä»–æ˜¯æˆ‘ï¼Œæˆ‘ä¸æ˜¯ä»–ã€‚æ‰­å¤´å‡ºé—¨ï¼Œåˆæ˜¯ç¹å¿™çš„ä¸€å¤©</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-03 14:26</p></div></div><div class='timeline-item-content'><p>ç”Ÿæ´»ä¸æ˜¯ä¸ºäº†èµ¶è·¯ï¼Œè€Œæ˜¯ä¸ºäº†æ„Ÿå—ç”Ÿæ´»ä¸å¬ä¸–ä¿—çš„è€³è¯­ï¼Œåªçœ‹è‡ªå·±å–œæ¬¢çš„é£æ™¯</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-02 07:09</p></div></div><div class='timeline-item-content'><p>å·²ç»æ˜¯ç¬¬ä¹å¤©æ‰“å¡äº†ï¼ç»§ç»­åšæŒ</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-09-01 20:07</p></div></div><div class='timeline-item-content'><p>ä»Šæœè¿½æº¯å¿†æ½‡å®¢ï¼Œå¾ä¹ƒäººé—´ä¸€æ•£ä»™<br><img src="https://i0.hdslb.com/bfs/article/24144973c84e0f40f561e7fa7427280e645325325.png"></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-29 09:34</p></div></div><div class='timeline-item-content'><p>ç¬¬ä¸€æ¬¡å‡Œæ™¨é›¶ç‚¹å¤šå›å®¿èˆ ï¼Œè¿æ°”æ˜¯çœŸçš„å¥½ ï¼Œé˜¿å§¨è¿˜ç»™ç•™é—¨äº†</p><img src="https://i0.hdslb.com/bfs/article/7d45f483db25c8c81148cb76435ae9e5645325325.jpg" style="zoom: 25%;" /></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-27 23:11</p></div></div><div class='timeline-item-content'><p>æ˜å¤©å‡†å¤‡ä¸Šå­¦å»äº† ï¼Œæ­¤ç»ä¸€å» ï¼Œå½’æ¥å´ä¸çŸ¥ä½•æ—¶ ï¼Œèšå°‘ç¦»å¤š</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-26 09:41</p></div></div><div class='timeline-item-content'><p>æœ€è¿‘ä¼‘æ¯ä¼‘æ¯ ï¼Œè°ƒæ•´ä¸‹çŠ¶æ€ï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-23 07:33</p></div></div><div class='timeline-item-content'><p>åæ¥æˆ‘æ‰æ˜ç™½ ï¼Œå¹¶ä¸æ˜¯æµªæµªå±±æŸç¼šäº†æˆ‘ ï¼Œè€Œæ˜¯æµªæµªå±±æ”¶ç•™äº†å¹³åº¸çš„æˆ‘ ï¼Œè°ä¸æƒ³ç¦»å¼€æµªæµªå±±å»çœ‹é‚£ç†Ÿæ‚‰åˆé™Œç”Ÿçš„åœ°æ–¹å‘¢â€¦â€¦</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-22 22:01</p></div></div><div class='timeline-item-content'><p>æ™šä¸Šåˆšå¥½æ²¡ä»€ä¹ˆäº‹æƒ… ï¼Œé¡ºä¾¿åšäº†ä¸‹åšå®¢çš„å®½å±é€‚é…å’Œå¯¹æ–‡ç« æ³¢æµªçº¿æ ·å¼çš„è°ƒæ•´ ï¼Œçœ‹ç€é¡ºçœ¼å¤šäº†</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-22 18:04</p></div></div><div class='timeline-item-content'><p>å¿µå¿µä¸å¿˜ ï¼Œå¿…æœ‰å›å“æ˜¯ç”µå½±é‡Œçš„æ¡¥æ®µ<br><img src="https://i0.hdslb.com/bfs/article/45a7de2fd4bda4a337a7bd6709dad9de645325325.jpg" alt="LunaNorth"></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-21 23:27</p></div></div><div class='timeline-item-content'><p>å°±è¿™æ ·å§ ï¼Œç³Ÿç³•çš„ä¸€å¤© ï¼Œä¸ºä»€ä¹ˆæˆ‘æ‰“æ¸¸æˆè€æ˜¯è¾“å‘¢ ï¼Œå°±ç¦»è°±ï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-20 23:36</p></div></div><div class='timeline-item-content'><p>ç¦»è°±çš„ç‹è€…è£è€€ ï¼Œä½ æ˜¯çœŸçš„ä¸æƒ³è®©æˆ‘èµ¢ä¸€å±€å•Šï¼å¯æ¶~~~</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-20 08:47</p></div></div><div class='timeline-item-content'><p>çŠ¶æ€ä¹Ÿå¼€å§‹é€æ¸çš„å›å½’ ï¼Œ<psw>ä»Šå¤©æ˜¯æ‰“å¡çš„ç¬¬äº”å¤© ï¼Œæµ…æµ…çš„è®°å½•ä¸€ä¸‹</psw></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-19 16:20</p></div></div><div class='timeline-item-content'><p>ç†æƒ³ä¸»ä¹‰çš„èŠ±ï¼Œä¸ä¼šå¼€åœ¨æµªæ¼«ä¸»ä¹‰çš„åœŸåœ°é‡Œï¼Œç»ˆæœ‰ä¸€å¤©ï¼Œä½ ä¼šæ”¾å¼ƒç†æƒ³ï¼Œå¯¹æµªæ¼«ä¸å†æœŸå¾…ï¼Œå°±åƒæŠŠè‡ªå·±çš„çµé­‚æµ¸å…¥é‚£è‡­ä¸å¯é—»çš„ä¸‹æ°´é“æ·¤æ³¥é‡Œï¼Œæ—¢ä¸æ­»ä¹Ÿä¸æ´»</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-16 14:20</p></div></div><div class='timeline-item-content'><p>å†é‡æ–°å¬ä¸€éå‰‘æ¥ä¹Ÿæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©<br><img src="https://i0.hdslb.com/bfs/article/ec67f2cda72f3c63d4813ac65f0e3332645325325.jpg"></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-14 07:29</p></div></div><div class='timeline-item-content'><p>æˆ‘ä¸æˆ‘å‘¨æ—‹ä¹…,å®ä½œæˆ‘!<br><img src="https://i0.hdslb.com/bfs/article/71385bd1b888173d9ea65a4857b62083645325325.jpg"></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-14 07:29</p></div></div><div class='timeline-item-content'><p>æ„¿è®¸ç§‹é£ç¦»åˆ«æ„ ï¼Œæ•£æˆ‘å¿ƒä¸­æ„éš¾å¹³<br>å“ˆå“ˆ ï¼Œæœ€è¿‘æœ‰ç‚¹å¤ªæ‚²è§‚äº† ï¼Œå¥½å¥½è°ƒæ•´ä¸‹å¿ƒæ€å’Œä½œæ¯ğŸ³ğŸ³ğŸ³</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-13 20:43</p></div></div><div class='timeline-item-content'><p>çœ‹ä¸è‰¯äººï¼Œå¾—åˆ°æœ€å¥½çš„ç»“è®ºå°±æ˜¯ï¼šå‰æœŸä½ çœ‹ä¸æ‡‚ææ˜Ÿäº‘ï¼Œå› ä¸ºé‚£æ—¶ä½ å°±æ˜¯ææ˜Ÿäº‘ï¼Œå¹´å¹¼æ—¶ä½ ä¸æƒ³è´Ÿä»»ä½•è´£ä»»ï¼Œåªæƒ³ç€æ— å¿§æ— è™‘çš„è¿‡æ—¥å­ï¼Œè€Œå¤§å¸…å°±åƒæ˜¯ä½ å®¶é‡Œçš„äººï¼Œå‰æœŸå¸®ä½ å„ç§é“ºè·¯ï¼Œå¯æ˜¯ç­‰ä½ é•¿å¤§äº†ï¼Œå®¶é‡Œäººä¸åœ¨äº†ï¼Œä½ å‘ç°ä½ ç¦»å¼€å®¶é‡Œäººï¼Œå…¶å®å•¥ä¹Ÿä¸ä¼šã€‚ä½ å¼€å§‹æ— åŠ©ã€ä¸å®‰ã€ç„¦è™‘ï¼Œä½ ä¸å¾—å·²æ‰å¼€å§‹åœ¨ç¤¾ä¼šä¸ŠåŠªåŠ›å­¦ä¹ è¯•é”™ï¼Œå’Œå„ç§è‡ªå·±ä¸æœçš„äº‹å’Œäººåšç€æŠ—äº‰ã€‚<br>çœ‹åˆ°ç¬¬å››å­£ä»¥åï¼Œç»ˆäºä½ æ˜ç™½äº†ï¼Œå½“åˆè¯´é‚£ä¸ªçƒ‚æ³¥æ‰¶ä¸ä¸Šå¢™çš„äººï¼Œå…¶å®å°±æ˜¯ä½ è‡ªå·±å•Šï¼Œä½ åˆä½•å°ä¸æ˜¯æƒ³åƒææ˜Ÿäº‘è¯´çš„é‚£æ ·ï¼Œè¿‡é—²äº‘é‡é¹¤èˆ¬çš„ç”Ÿæ´»ï¼Œå¯æ˜¯æ— å¥ˆæ—¶ä»£ä¸å…è®¸ï¼Œç”Ÿæ´»ä¸å…è®¸ï¼Œå®¶äººä¸å…è®¸ã€‚<br>åˆ°æœ€åä½ ä¹Ÿå‘ç°äº†ï¼Œå…¶å®ä½ å°±æ˜¯ææ˜Ÿäº‘ï¼Œä½ ä¹Ÿæ˜ç™½äº†ï¼Œå…¶å®å¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½èƒ½åšè‡ªå·±æƒ³åšçš„äº‹ï¼Œæˆä¸ºè‡ªå·±æƒ³æˆä¸ºçš„äººã€‚<br><img src="https://i0.hdslb.com/bfs/article/4c081d91e2501773ba1ce4d9c07aca31645325325.jpg"></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-13 07:50</p></div></div><div class='timeline-item-content'><p>æˆ‘è¯¥å¤±æœ›çš„äº‹ ï¼Œä»æ¥æ²¡æœ‰è¾œè´Ÿæˆ‘</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-11 23:57</p></div></div><div class='timeline-item-content'><p>å°‘å¹´å¤§ç¬‘å‡ºé—¨å»ï¼Œåƒé‡Œè½èŠ±é£ï¼›å¦‚ä»Šé’è¡«ä»—å‰‘å›ï¼Œå±±æ²³æ»¡æ˜¥é£ï¼›ç¾äººèµ æˆ‘é‡‘åˆ€é”™ï¼Œå‰‘æ°”é•¿åŸå‰‘æ°”è¿‘ï¼›äººé—´æ¸…éƒ½å±±æ°´éƒï¼Œå°‘å¹´æœ€ä¸ºæ€æ— é‚ªï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-11 16:40</p></div></div><div class='timeline-item-content'><p>çœŸæ˜¯ç³Ÿç³•çš„ä¸€å¤©<br><img src="https://testingcf.jsdelivr.net/gh/LunaNorth/img-cloud/images/Snipaste_2024-08-10_09-45-22.png" alt="north"></p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-08 11:38</p></div></div><div class='timeline-item-content'><p>è¿™ç³Ÿç³•çš„äººå•Šï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-08-01 17:21</p></div></div><div class='timeline-item-content'><p>æˆ‘ä»¬çœ‹æƒ¯äº†å°è¯´å’Œç”µå½±ä¸­çš„ç¾å¥½ç»“å±€ ï¼Œå´å¿˜äº†ç°å®ä¸­çš„é—æ†¾æ‰æ˜¯å¸¸æ€</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-31 18:21</p></div></div><div class='timeline-item-content'><p>çœ‹ä¸‹ä¸€ä¸‹åˆçš„å°è¯´ ï¼Œç½ªæ¶å•Šï¼ğŸ¥±ğŸ¥±ğŸ¥±</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-31 11:24</p></div></div><div class='timeline-item-content'><p>å¹´å°‘è½»ç‹‚çš„å²æœˆï¼Œæ²‰æ·€ä¸‹æ¥çš„æ˜¯é‚£äº›å†ä¹Ÿå›ä¸åˆ°çš„è¿‡å»ï¼Œæ€»è®©äººæ„Ÿå¹ï¼Œè¿™æ˜¯æœªæ›¾çæƒœè€Œé‚£å¤±å»çš„é‚£äº›ï¼Œä½†è¿™äº›æ°æ°ä¹Ÿæ˜¯æˆ‘ä»¬æƒ³è®©ä½ å»ä½“ä¼šçš„ï¼Œå› ä¸ºå¹´å°‘è½»ç‹‚çš„å²æœˆï¼Œä¸€ç”Ÿåªæœ‰ä¸€æ¬¡ï¼Œä¸–é—´æœ€çè´µçš„ï¼Œä¸æ˜¯å¾—ä¸åˆ°å’Œå·²å¤±å»çš„ï¼Œè€Œæ˜¯ç°åœ¨èƒ½æŠŠæ¡çš„ï¼Œæˆ‘ä»¬ç”Ÿæ´»åœ¨ä¸€ä¸ªå¤æ‚è€Œåˆå……æ»¡æ— å¥ˆçš„ä¸–ç•Œï¼Œèº«ä¸ŠèƒŒè´Ÿå¤ªå¤šå¤ªå¤šçš„è´£ä»»å’Œä½¿å‘½ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¤„ç†ä¸å½“ï¼Œå°±ä¼šä¸å ªé‡è´Ÿï¼Œéš¾ä»¥å¿å—ï¼Œæœ€å®½é˜”çš„æ˜¯æµ·æ´‹ï¼Œæ¯”æµ·æ´‹æ›´å®½é˜”çš„æ˜¯å¤©ç©ºï¼Œæ¯”å¤©ç©ºæ›´å®½é˜”çš„æ˜¯äººçš„èƒ¸æ€€ï¼Œå½“ä½ ç´§æ¡åŒæ‰‹é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œå½“ä½ æ‰“å¼€åŒæ‰‹ï¼Œä¸–ç•Œå°±åœ¨ä½ æ‰‹ä¸­</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-29 18:42</p></div></div><div class='timeline-item-content'><p>è‡ªä»Šæ—¥èµ· ï¼Œæ¢å¤é”»ç‚¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-28 10:52</p></div></div><div class='timeline-item-content'><p>è¿˜æ˜¯ä¸è¦ç†¬å¤œçš„å¥½ ï¼Œæ˜¨å¤©ç¡å¤ªæ™šäº† ï¼Œå¯¼è‡´ä»Šå¤©çš„ç²¾ç¥çŠ¶æ€éƒ½ä¸æ˜¯å¾ˆå¥½ğŸ˜´ğŸ˜´ğŸ˜´</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-25 10:38</p></div></div><div class='timeline-item-content'><p>äº‰å–ä¸¤å¤©æ—¶é—´å­¦å®Œé»‘é©¬ç‚¹è¯„ï¼ï¼ï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-23 10:36</p></div></div><div class='timeline-item-content'><p>ç¨‹åºå‘˜çš„æ‚²å“€æ˜¯ä»€ä¹ˆï¼Ÿ<br>æ²¾æ²¾è‡ªå–œå­¦äº†ä¸€è¾ˆå­æŠ€æœ¯ï¼Œæœ€ç»ˆä¸è¿‡æ˜¯ä¸€ä¸ªè‡ªå¸¦ä¼˜è¶Šæ„Ÿçš„å·¥å…·äººã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-22 06:53</p></div></div><div class='timeline-item-content'><p>å¥½åƒå¿«ä¸€ä¸ªæœˆæ²¡æœ‰å­¦ä¹ äº†ï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-19 20:20</p></div></div><div class='timeline-item-content'><p>ç”µå­æ¸¸æˆæ— æ„Ÿäº†ï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-20 19:20</p></div></div><div class='timeline-item-content'><p>åé¢çš„è¯ ï¼Œä¹Ÿæ‰“ç®—å¼€å§‹è®°å½•è‡ªå·±çš„å­¦ä¹ ç”Ÿæ´»äº† ï¼Œå¸Œæœ›è‡ªå·±å¯ä»¥åšæŒä¸‹æ¥å§ï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-18 20:55</p></div></div><div class='timeline-item-content'><p>é”»ç‚¼å®Œæ„Ÿè§‰æˆ‘çŠ¶æ€åˆå›æ¥äº† ï¼Œæ˜å¤©å‡†å¤‡æ—©èµ·å­¦ä¹  âœ¨âœ¨âœ¨</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-18 17:20</p></div></div><div class='timeline-item-content'><p>çœŸçš„çƒ¦ ï¼Œå‘ç°è‡ªå·±å¥½åƒåˆå›åˆ°äº†ä¹‹å‰çš„çŠ¶æ€äº† ï¼Œä¸è¡Œ ï¼Œæˆ‘è¦ç»™è‡ªå·±æ¥ä¸ªå¼ºåˆ¶å¼€æœº ï¼Œå…ˆå‡†å¤‡é”»ç‚¼å»ğŸ¦‰</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-18 13:33</p></div></div><div class='timeline-item-content'><p>å…¶å®äººä¸€è¾ˆå­æ˜¯éœ€è¦ä¸€äº›å»ºè®®çš„ï¼Œå¯»æ±‚ç­”æ¡ˆï¼Œå°±æ˜¯å½“è‡ªå·±å¯»æ‰¾ä¸å‡ºç­”æ¡ˆåšä¸å‡ºæ­£ç¡®çš„é€‰æ‹©æ—¶ï¼Œéœ€è¦å€Ÿé‰´åˆ«äººçš„å»ºè®®ï¼Œä¾›è‡ªå·±åšå‡ºé€‰æ‹©ï¼Œä»–äººçš„é«˜åº¦ç¡®å®å¯èƒ½é™åˆ¶äº†ä½ çš„è§†é‡ï¼Œä½†å¦‚æœå½“è‡ªå·±æ²¡æœ‰åˆ«äººçš„é«˜åº¦æ—¶ï¼Œæ˜¯å¯ä»¥å€Ÿé‰´åˆ«äººçš„è§†é‡æ¥ï¼Œçœ‹æ¸…è‡ªå·±ï¼Œç­”æ¡ˆæ°¸è¿œæ˜¯è‡ªå·±è®¤åŒï¼Œå¹¶ä¸éœ€è¦è¿½æ±‚åˆ«äººçš„è®¤åŒï¼Œè¿™æ ·æ‰ä¸èƒ½è¢«ä¸–äººçš„é«˜å¢™å›´ä½ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-18 07:26</p></div></div><div class='timeline-item-content'><p>å‡†å¤‡ç»§ç»­é”»ç‚¼ ï¼Œå¼€å§‹è‡ªå¾‹ ï¼Œè¿˜æ˜¯ç»§ç»­ä¸‰åˆ†åŒ–è®­ç»ƒåŠ æ—©èµ·ç©ºè…¹æœ‰æ°§è¿åŠ¨ ï¼Œè´µåœ¨åšæŒ ï¼Œå†²å†²å†²ï¼ï¼ï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-17 22:48</p></div></div><div class='timeline-item-content'><p>é‡äº‹ä¸å†³ ï¼Œå¯é—®æ˜¥é£</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> 2024-07-17 22:37</p></div></div><div class='timeline-item-content'><p>æˆ‘æ°¸è¿œå–œæ¬¢å–œå¤šå·æµ·æ¢¦ï¼ï¼<br><img src="https://i0.hdslb.com/bfs/article/bd1509913091b89448e0657d19ec5441645325325.jpg"></p></div></div></div>]]></content>
      
      
      <categories>
          
          <category> æœˆå½±å¢¨ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘åœ¨äººé—´å‡‘æ•°çš„æ—¥å­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly ä¸»é¢˜ç¾åŒ–ä¹‹æ—…ï¼šä»ç»šçƒ‚å›å½’è´¨æœ´</title>
      <link href="/posts/a0708e01.html"/>
      <url>/posts/a0708e01.html</url>
      
        <content type="html"><![CDATA[<p>åœ¨è¿™ä¸ªå……æ»¡å„ç§å¯èƒ½çš„æ—¶ä»£ï¼Œåšå®¢ä¸ä»…æ˜¯ä¸ªäººå±•ç¤ºæ‰åä¸çŸ¥è¯†çš„çª—å£ï¼Œä¹Ÿæ˜¯æŠ€æœ¯çˆ±å¥½è€…åˆ†äº«ç»éªŒã€è®°å½•æˆé•¿çš„å¹³å°ã€‚å¯¹äºè®¸å¤šåšä¸»æ¥è¯´ï¼Œåšå®¢çš„ä¸»é¢˜ä¸ä»…ä»…æ˜¯ç®€å•çš„è§†è§‰å‘ˆç°ï¼Œæ›´æ˜¯ä¸ªæ€§ä¸å“å‘³çš„å±•ç°ã€‚ç„¶è€Œï¼Œåœ¨è¿½æ±‚å®Œç¾çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šé™·å…¥ä¸€ä¸ªè¯¯åŒºâ€”â€”è¿‡åº¦ç¾åŒ–åšå®¢ä¸»é¢˜ï¼Œä»¥è‡³äºå¿˜è®°äº†åšå®¢æœ€æ ¸å¿ƒçš„ä»·å€¼æ‰€åœ¨ï¼šå†…å®¹æœ¬èº«ã€‚</p><h2 id="ç¾åŒ–ä¹‹æ—…çš„èµ·ç‚¹"><a href="#ç¾åŒ–ä¹‹æ—…çš„èµ·ç‚¹" class="headerlink" title="ç¾åŒ–ä¹‹æ—…çš„èµ·ç‚¹"></a>ç¾åŒ–ä¹‹æ—…çš„èµ·ç‚¹</h2><p>è®°å¾—å½“åˆé€‰æ‹©äº†Hexoä½œä¸ºæˆ‘çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œå¹¶å®‰è£…äº†Butterflyä¸»é¢˜æ—¶ï¼Œæˆ‘å¯¹å®ƒçš„ç¬¬ä¸€å°è±¡æ˜¯ç®€æ´è€Œä¼˜é›…ã€‚Butterflyä¸»é¢˜ä»¥å…¶è½»é‡çº§ã€é«˜æ€§èƒ½è€Œè‘—ç§°ï¼Œå®ƒåœ¨å¼€å‘è€…ç¤¾åŒºä¸­æœ‰ç€è‰¯å¥½çš„å£ç¢‘ã€‚èµ·åˆï¼Œæˆ‘å¹¶æ²¡æœ‰è¿‡å¤šåœ°è€ƒè™‘ä¸»é¢˜çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œåªæ˜¯ç®€å•åœ°è°ƒæ•´äº†ä¸€äº›åŸºæœ¬çš„é…ç½®é¡¹ï¼Œå¦‚ç½‘ç«™æ ‡é¢˜ã€logoç­‰ã€‚</p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘å¼€å§‹è§‰å¾—è¿™ä¸ªä¸»é¢˜è¿‡äºæœ´ç´ ï¼Œç¼ºä¹ä¸ªæ€§ã€‚äºæ˜¯ï¼Œæˆ‘è¸ä¸Šäº†ä¸»é¢˜ç¾åŒ–çš„å¾ç¨‹ã€‚æˆ‘å¼€å§‹å­¦ä¹ CSSã€Sassç­‰å‰ç«¯æŠ€æœ¯ï¼Œç ”ç©¶äº†Butterflyä¸»é¢˜çš„æºç ç»“æ„ï¼Œå°è¯•ç€æ”¹å˜èƒŒæ™¯é¢œè‰²ã€å­—ä½“æ ·å¼ã€å¸ƒå±€ç»“æ„â€¦â€¦æ¯ä¸€æ­¥éƒ½è®©æˆ‘æ„Ÿåˆ°å…´å¥‹ï¼Œä¹Ÿè®©æˆ‘æ›´åŠ æ²‰è¿·äºä¸»é¢˜çš„è®¾è®¡ä¹‹ä¸­ã€‚</p><p>æˆ‘èŠ±è´¹äº†å¤§é‡çš„æ—¶é—´åœ¨å¯»æ‰¾åˆé€‚çš„å­—ä½“ã€èƒŒæ™¯å›¾ä»¥åŠåŠ¨ç”»æ•ˆæœä¸Šã€‚æˆ‘è¿˜ä¸ºåšå®¢æ·»åŠ äº†å„ç§æ’ä»¶ï¼Œä¾‹å¦‚ä»£ç é«˜äº®ã€æ–‡ç« ç›®å½•ã€é˜…è¯»è¿›åº¦æ¡ç­‰ç­‰ã€‚è¿™äº›åŠŸèƒ½ä¸ä»…è®©åšå®¢çœ‹èµ·æ¥æ›´åŠ ä¸“ä¸šï¼Œä¹Ÿè®©ç”¨æˆ·ä½“éªŒå¾—åˆ°äº†æå‡ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘å›è¿‡å¤´æ¥çœ‹è‡ªå·±çš„æ–‡ç« æ—¶ï¼Œæˆ‘å‘ç°è¿™æ®µæ—¶é—´é‡Œæˆ‘å‡ ä¹æ²¡æœ‰æ›´æ–°è¿‡ä»»ä½•æœ‰ä»·å€¼çš„å†…å®¹ã€‚æˆ‘å¼€å§‹æ€è€ƒï¼Œè¿™ç§è¿‡åˆ†å…³æ³¨å¤–è§‚çš„è¡Œä¸ºæ˜¯å¦å€¼å¾—ï¼Ÿ</p><h2 id="ä»ç»šçƒ‚åˆ°å›å½’è´¨æœ´"><a href="#ä»ç»šçƒ‚åˆ°å›å½’è´¨æœ´" class="headerlink" title="ä»ç»šçƒ‚åˆ°å›å½’è´¨æœ´"></a>ä»ç»šçƒ‚åˆ°å›å½’è´¨æœ´</h2><p>ç»è¿‡ä¸€æ®µæ—¶é—´çš„åŠªåŠ›ï¼Œæˆ‘çš„åšå®¢ç»ˆäºå˜å¾—äº”å½©æ–‘æ–“ã€ç‹¬å…·ç‰¹è‰²ã€‚æˆ‘ç”šè‡³å¼€å§‹åœ¨ç¤¾äº¤åª’ä½“ä¸Šåˆ†äº«æˆ‘çš„ä¸»é¢˜ç¾åŒ–å¿ƒå¾—ï¼Œæ”¶åˆ°äº†ä¸å°‘å¥½è¯„ã€‚ç„¶è€Œï¼Œå½“æˆ‘é™ä¸‹å¿ƒæ¥åæ€è¿™æ®µæ—¶é—´çš„ç»å†æ—¶ï¼Œæˆ‘æ„è¯†åˆ°ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘èŠ±äº†å¤ªå¤šçš„æ—¶é—´åœ¨åšå®¢çš„å¤–è§‚ä¸Šï¼Œå´å¿½è§†äº†æœ€é‡è¦çš„éƒ¨åˆ†â€”â€”å†…å®¹åˆ›ä½œã€‚</p><h3 id="ç¾åŒ–çš„å°½å¤´"><a href="#ç¾åŒ–çš„å°½å¤´" class="headerlink" title="ç¾åŒ–çš„å°½å¤´"></a>ç¾åŒ–çš„å°½å¤´</h3><p>éšç€æ€è€ƒçš„æ·±å…¥ï¼Œæˆ‘é€æ¸æ„è¯†åˆ°ï¼Œæ— è®ºä¸»é¢˜å¤šä¹ˆåä¸½ï¼Œå¦‚æœåšå®¢æ²¡æœ‰é«˜è´¨é‡çš„æ–‡ç« æ”¯æ’‘ï¼Œé‚£å®ƒå°±åƒæ˜¯ä¸€åº§ç©ºå£³ã€‚çœŸæ­£çš„ç¾æ„Ÿä¸ä»…ä»…ä½“ç°åœ¨è§†è§‰æ•ˆæœä¸Šï¼Œæ›´åœ¨äºæ–‡å­—æ‰€ä¼ è¾¾çš„æ€æƒ³ä¸æƒ…æ„Ÿã€‚æˆ‘å¼€å§‹é‡æ–°å®¡è§†é‚£äº›èŠ±è´¹æ— æ•°æ—¶é—´ç²¾å¿ƒè®¾è®¡çš„ä¸»é¢˜å…ƒç´ ï¼Œå‘ç°å®ƒä»¬è™½ç„¶èƒ½å¤Ÿå¸å¼•çœ¼çƒï¼Œä½†å´ä¸èƒ½é•¿ä¹…ç•™ä½è¯»è€…çš„å¿ƒã€‚</p><h3 id="å›å½’é»˜è®¤"><a href="#å›å½’é»˜è®¤" class="headerlink" title="å›å½’é»˜è®¤"></a>å›å½’é»˜è®¤</h3><p>æœ€ç»ˆï¼Œæˆ‘å†³å®šå›å½’åˆ°Butterflyä¸»é¢˜çš„é»˜è®¤æ ·å¼ã€‚è¿™å¹¶ä¸æ˜¯è¯´æˆ‘ä¸å†å…³å¿ƒåšå®¢çš„å¤–è§‚ï¼Œè€Œæ˜¯æˆ‘è®¤ä¸ºç®€çº¦è€Œä¸å¤±ä¸ªæ€§çš„è®¾è®¡æ›´é€‚åˆåšå®¢çš„å®šä½ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘å¯ä»¥å°†æ›´å¤šçš„ç²¾åŠ›æŠ•å…¥åˆ°åˆ›ä½œä¼˜è´¨å†…å®¹ä¸Šï¼Œè®©æ–‡å­—æœ¬èº«æˆä¸ºåšå®¢æœ€å¸å¼•äººçš„åœ°æ–¹ã€‚</p><p>å›å½’é»˜è®¤çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘åˆ é™¤äº†è®¸å¤šä¹‹å‰æ·»åŠ çš„æ’ä»¶å’Œç‰¹æ•ˆï¼Œåªä¿ç•™äº†æœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚è¿™æ ·çš„å˜åŒ–ä½¿å¾—é¡µé¢åŠ è½½é€Ÿåº¦æ›´å¿«ï¼Œç”¨æˆ·è®¿é—®ä½“éªŒæ›´å¥½ã€‚æˆ‘ä¹Ÿå¼€å§‹é‡æ–°å®¡è§†è‡ªå·±çš„å†™ä½œè®¡åˆ’ï¼Œè§„åˆ’æœªæ¥è¦å‘è¡¨çš„æ–‡ç« å†…å®¹ï¼Œç¡®ä¿å®ƒä»¬æ—¢æœ‰æ·±åº¦åˆæœ‰è¶£å‘³æ€§ã€‚</p><h2 id="å†™ä½œä¸å®¡ç¾çš„å¹³è¡¡"><a href="#å†™ä½œä¸å®¡ç¾çš„å¹³è¡¡" class="headerlink" title="å†™ä½œä¸å®¡ç¾çš„å¹³è¡¡"></a>å†™ä½œä¸å®¡ç¾çš„å¹³è¡¡</h2><p>ç»å†äº†è¿™æ®µæ—…ç¨‹ä¹‹åï¼Œæˆ‘æ„è¯†åˆ°åšå®¢çš„æˆåŠŸä¸ä»…ä»…å–å†³äºç¾è§‚çš„ä¸»é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯å†…å®¹çš„è´¨é‡ã€‚æˆ‘å¼€å§‹æ›´åŠ ä¸“æ³¨äºæé«˜è‡ªå·±çš„å†™ä½œæŠ€å·§ï¼Œå­¦ä¹ å¦‚ä½•æ›´å¥½åœ°ç»„ç»‡è¯­è¨€ï¼Œå¦‚ä½•è®©æ–‡ç« æ›´å…·å¸å¼•åŠ›ã€‚åŒæ—¶ï¼Œæˆ‘ä¹Ÿæ„è¯†åˆ°ï¼Œé€‚åº¦çš„ç¾åŒ–æ˜¯å¯ä»¥æå‡ç”¨æˆ·ä½“éªŒçš„ï¼Œä½†å…³é”®æ˜¯è¦æ‰¾åˆ°ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚</p><h3 id="æŒç»­æ”¹è¿›"><a href="#æŒç»­æ”¹è¿›" class="headerlink" title="æŒç»­æ”¹è¿›"></a>æŒç»­æ”¹è¿›</h3><p>ç°åœ¨ï¼Œæ¯å½“æˆ‘åœ¨é”®ç›˜ä¸Šæ•²ä¸‹ä¸€è¡Œè¡Œæ–‡å­—æ—¶ï¼Œæˆ‘éƒ½æ„Ÿåˆ°æ ¼å¤–çš„æ»¡è¶³ä¸å¹¸ç¦ã€‚å› ä¸ºæˆ‘æ·±çŸ¥ï¼Œè¿™äº›æ–‡å­—å°†ä¼šæ˜¯è¿æ¥æˆ‘å’Œè¯»è€…ä¹‹é—´æœ€åšå›ºçš„æ¡¥æ¢ã€‚æˆ‘ä¹Ÿä¼šå®šæœŸå¯¹åšå®¢è¿›è¡Œå¾®è°ƒï¼Œä¿æŒå…¶æ–°é²œæ„Ÿï¼Œä½†ä¸å†æ²‰è¿·äºæ— ä¼‘æ­¢çš„ç¾åŒ–å·¥ä½œã€‚</p><h3 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><p>ç¾åŒ–åšå®¢ä¸»é¢˜çš„è¿‡ç¨‹æ˜¯ä¸€æ®µå®è´µçš„æ—…ç¨‹ï¼Œå®ƒè®©æˆ‘å­¦åˆ°äº†å¾ˆå¤šæŠ€èƒ½ï¼Œä¹Ÿè®©æˆ‘æ˜ç™½äº†ä¸€ä¸ªé“ç†ï¼šçœŸæ­£çš„ç¾ä¸åœ¨äºå¤–è¡¨çš„åä¸½ï¼Œè€Œåœ¨äºå†…å®¹çš„æ·±åº¦ã€‚æˆ‘é¼“åŠ±æ¯ä¸€ä½åšä¸»éƒ½è¦æ‰¾åˆ°è‡ªå·±çš„å¹³è¡¡ç‚¹ï¼Œè®©åšå®¢æˆä¸ºä¸€ä¸ªæ—¢ç¾è§‚åˆå……æ»¡ä»·å€¼çš„åœ°æ–¹ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¹Ÿè®¸ä½ ä¼šå‘ç°ï¼Œæœ€ç¾å¥½çš„çŠ¶æ€å¾€å¾€æ˜¯æœ€ç®€å•ã€æœ€è‡ªç„¶çš„æ ·å­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æœˆå½±å¢¨ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¢ç¢å¿µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘åœ¨äººé—´å‡‘æ•°çš„æ—¥å­</title>
      <link href="/posts/facab7a2.html"/>
      <url>/posts/facab7a2.html</url>
      
        <content type="html"><![CDATA[<div class="timeline green"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>ææœˆäº®ã®å°åŒ—</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> å“ªå¥è¯æ‹¯æ•‘äº†è½é­„æ—¶çš„ä½ </p></div></div><div class='timeline-item-content'><p>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾é‚£ä¸ªèƒ½æ”¹å˜ä½ ç”Ÿæ´»çš„äºº ï¼Œè¯·ç…§ç…§é•œå­</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> è¯­æ–‡</p></div></div><div class='timeline-item-content'><p>è¯­æ–‡æ²¡æœ‰ä¸€ç¯‡è¯¾æ–‡æ˜¯å……æ•°çš„ï¼Œåªæ˜¯å½“æ—¶å¿™ç€èµ¶è·¯ï¼Œå´å¿˜äº†çª¥æ¢å¤äººé£éª¨ã€‚è¯»æ—¶ä»¥ä¸ºæ˜¯æŸç¼šè‡ªå·±çš„ç²—å¸ƒéº»ç»³ï¼Œå›æœ›å‘ç°çš†æ˜¯ç† ç† ç”Ÿè¾‰çš„ä¸ç»¸ç¼å¸¦</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> ä»€ä¹ˆæ˜¯é—æ†¾</p></div></div><div class='timeline-item-content'><p>é—æ†¾æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯åˆè§å°‘å¹´æ‹‰æ»¡å¼“ï¼Œä¸æƒ§å²æœˆä¸æƒ§é£ã€‚å¯ç»ˆæ˜¯ä¸œé£å¹é†’è‹±é›„æ¢¦ï¼Œç”Ÿæ´»ç£¨å¹³å°‘å¹´å¿ƒã€‚åŸä»¥ä¸ºå±±ä¸€ç¨‹ï¼Œæ°´ä¸€ç¨‹äººç”Ÿä½•å¤„ä¸ç›¸é€¢ã€‚å¯åæ¥æ‰å‘ç°ä¸€åˆ«å†æ— å½’æœŸï¼Œç›¸è§åªåœ¨æ¢¦é‡Œã€‚èŠ±å¼€æœ‰æ—¶è½ï¼Œè‹±é›„ä¼šæš®å¹´ã€‚ç¾äººä¼šè€å»ï¼Œäººç”Ÿæœ€æ˜“é”™ã€‚ä¸–äº‹éš¾ä¸¤å…¨ï¼Œå¾—å¤±æ€»ç›¸ä¼´ã€‚æˆ–è®¸é—æ†¾æ‰æ˜¯å¸¸æ€ï¼Œä¸å®Œç¾æ‰æ˜¯äººç”Ÿï¼</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> æœªå®Œå¾…ç»­â€¦â€¦</p></div></div><div class='timeline-item-content'><p>ç«¥å¹´æ˜¯ä¸€æŠŠæ²¡æœ‰åƒå®Œçš„ç³–æœï¼Œæˆ‘ä»¬å§‹ç»ˆè®°å¾—ä»–æ‰€å¸¦ç»™æˆ‘ä»¬çš„å¿«ä¹ï¼Œç­‰é•¿å¤§ä¹‹åå†æƒ³è·å¾—è¿™ä»½å¿«ä¹ï¼Œå´æ€»æ˜¯åƒä¸å‡ºç³–æœåŸæœ¬çš„ç”œå‘³</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> çœŸæ­£æ”¾ä¸‹ä¸€ä¸ªäººæ˜¯ä»€ä¹ˆæ„Ÿè§‰</p></div></div><div class='timeline-item-content'><p>åƒæ˜¯çƒŸèŠ±ç‚¸å¼€æ—¶çœ¼ç¥å¤±ç„¦çš„æƒ‹æƒœï¼Œæœ¦èƒ§çš„ç¾å¥½è¿åŒç»šçƒ‚çƒ™å°åœ¨äº†å½±å­é‡Œï¼Œä»–è¯´ä»–çœŸçš„æ”¾ä¸‹äº†ï¼Œå¯å½±å­é•‚ç©ºå¤„å´é€è¿‡äº†é†’ç›®çš„å…‰</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> ä¸ºä»€ä¹ˆç°åœ¨çš„äººè¶Šæ¥è¶Šæ²¡æœ‰äººæƒ…å‘³äº†</p></div></div><div class='timeline-item-content'><p>å½“äººä¸äººä¹‹é—´çš„è”ç³»è¢«ç‰©è´¨å’Œåˆ©ç›Šæ‰€å–ä»£ï¼Œæˆ‘ä»¬ä¾¿å¤±å»äº†è¿™ä¸ªä¸–ç•Œä¸Šçš„äººæƒ…å‘³ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> æœèŠ±å¤•æ‹¾çš„æ„æ€</p></div></div><div class='timeline-item-content'><p>æœèŠ±å¤•æ‹¾ï¼Œæœ‰æ²¡æœ‰å¦ä¸€ç§å¯èƒ½ï¼Œå°±æ˜¯æ›¾ç»çš„ç¾å¥½é—å¤±äº†ï¼Œç­‰æ¡èµ·æ¥çš„æ—¶å€™ï¼Œå¥¹å¯èƒ½å·²ç»æ¯èç ´è´¥ï¼Œä½†æ˜¯çœ‹ç€å¥¹çš„æ ·å­ï¼Œæ€»èƒ½æƒ³èµ·å¥¹æœ€ç»šçƒ‚çš„æ—¶å€™ï¼Œè¿½å¿†ç¾å¥½çš„è¿‡å¾€ï¼Œæ€€å¿µæ›¾ç»æ— å¿§æ— è™‘çš„ä½ æˆ‘ï¼Œç¼…æ€€é€å»çš„æµå¹´â€¦â€¦</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> ä»–å¥½åƒæƒ³ä¸é€š ï¼Œä¸ºä»€ä¹ˆè¿™æ¡è·¯æ²¡äººèµ°</p></div></div><div class='timeline-item-content'><p>éš¾èµ°çš„è·¯ï¼Œä»æ¥éƒ½ä¸æ‹¥æŒ¤ã€‚ å¦‚æœæˆ‘ä¹Ÿä¸€èº«è½»è£…ï¼Œæˆ‘ä¹Ÿä¼šé€‰æ‹©éš¾èµ°çš„è·¯â€¦</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> ç”Ÿæ´»</p></div></div><div class='timeline-item-content'><p>ç”Ÿæ´»ä¸€åŠçƒŸç«ï¼Œä¸€åŠæ¸…æ¬¢å¹¸ç¦ä¸€åŠæŒ£å–ï¼Œä¸€åŠéšç¼˜ï¼Œäººç”Ÿä¸€åŠæ¸…é†’ï¼Œä¸€åŠé‡Šç„¶ã€‚å½“ä¸€åˆ‡éƒ½æˆè¿‡å¾€ï¼Œå«£ç„¶å›é¦–ä¸€ç¬‘ç½®ä¹‹</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p> é’æ˜¥å’Œé’æ˜¥çš„æ„Ÿå—æ€»æ˜¯ä¸èƒ½åŒæ—¶è·å¾—</p></div></div><div class='timeline-item-content'><p>ä»“ä¿ƒçš„ä¸çŸ¥é“è¯»å®Œä¹‹åä»å“ªä¸ªç‰‡æ®µå¼€å§‹å›å‘³æ‰èƒ½æ˜¾å¾—æ‚ æ‚ æ¼«é•¿</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>å¦‚æœç¦»åˆ«æ˜¯å°½å¤´ ï¼Œé‚£ä¹ˆç›¸é‡çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ</p></div></div><div class='timeline-item-content'><p>ç›¸é‡çš„æ„ä¹‰åœ¨äºå½¼æ­¤ç…§äº®ï¼Œæˆä¸ºå½¼æ­¤äººç”ŸæŸä¸€æ®µæ—…ç¨‹çš„ç²¾ç¥å¯„æ‰˜ï¼Œä¸ºå¹³å‡¡çš„ç”Ÿæ´»æ·»ä¸€ä»½ç¾å¥½ï¼Œä¸ºå†·æ¼ çš„ä¸–ç•ŒåŠ ä¸€ä»½å®‰å®šï¼Œæ— è®ºæˆ‘ä»¬æœ€åç»“å±€å¦‚ä½•ï¼Œåœ¨ç›¸é‡çš„é‚£ä¸€åˆ»ã€åœ¨å¯¹è§†çš„é‚£ä¸€åˆ»ï¼Œæˆ‘ä»¬ä¾¿æ˜¯å½¼æ­¤æ˜æš—ä¸–ç•Œä¸­çš„ä¸€æŸå¾®å…‰</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>çæƒœçœ¼å‰äººå§â€¦â€¦</p></div></div><div class='timeline-item-content'><p>æ€»æœ‰ä¸€å¤©ï¼Œä½ ä¼šæ˜ç™½ï¼Œèƒ½å¤Ÿæ²»æ„ˆä½ çš„ï¼Œä»æ¥éƒ½ä¸æ˜¯æ—¶é—´ï¼Œè€Œæ˜¯ä½ å¿ƒé‡Œçš„é‚£è‚¡é‡Šæ€€å’Œæ ¼å±€ã€‚åªè¦å†…å¿ƒä¸æ…Œä¹±ï¼Œè¿ä¸–ç•Œéƒ½éš¾å½±å“ä½ ã€‚ä½ å¯ä»¥æ¶ˆæ²‰ï¼Œä¹Ÿå¯ä»¥æŠ±æ€¨ï¼Œç”šè‡³å¯ä»¥å´©æºƒï¼Œä½†ä¸èƒ½ä¸§å¤±è‡ªæ„ˆçš„èƒ½åŠ›ï¼Œè¦å­¦ä¼šåŠæ—¶æ­¢æŸã€‚äººç”Ÿä¸ä¸€å®šè¦èµ¢ï¼Œä½†ç»ä¸èƒ½è¾“ç»™è¿‡å»çš„é”™è¯¯å’Œæ„šè ¢ã€‚äººç”Ÿå“ªæœ‰ç™½èµ°çš„è·¯ï¼Œæ¯ä¸€æ­¥éƒ½æ˜¯æˆé•¿ï¼Œä½ è¦æŠŠå¤´æŠ¬èµ·æ¥ï¼Œä¸€ç›´å¾€å‰èµ°ï¼Œå¤©æ€»ä¼šäº®çš„ã€‚ä¸€è¾ˆå­å¾ˆçŸ­ï¼Œè¦å¥½å¥½çˆ±è‡ªå·±ï¼Œä½ çš„ä¼˜ç§€è¦é‡åˆ°è¯†è´§çš„äººï¼Œä½ çš„çœŸå¿ƒè¦é‡åˆ°çæƒœä½ çš„äººï¼Œä½ çš„å–„è‰¯è¦é‡åˆ°æ„Ÿæ©çš„äººã€‚è°‹ç”Ÿçš„è·¯ä¸Šä¸æŠ›å¼ƒè‰¯çŸ¥ï¼Œè°‹çˆ±çš„è·¯ä¸æ”¾å¼ƒå°Šä¸¥ã€‚ä½ è¯¥æœ‰çš„æ ·å­å°±æ˜¯ï¼šååˆ†æ²‰é™ï¼Œä¹åˆ†æ°”è´¨ï¼Œå…«åˆ†é—æ†¾ï¼Œä¸ƒåˆ†ç°å®ï¼Œä¸‰åˆ†é¢œå€¼ï¼Œä¸¤åˆ†ç³Šæ¶‚ï¼Œä¸€åˆ†è‡ªçŸ¥ä¹‹æ˜ã€‚æ— è®ºèº«åœ¨ä½•æ–¹ï¼Œé™·äºä½•åœ°ï¼Œéƒ½è¦å‘ä¸‹æ‰æ ¹ï¼Œå‘ä¸Šå¼€èŠ±ï¼Œä¸è´Ÿç”Ÿæ´»</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>ä»¥å‰å¿—æ°”å¾ˆå¤§ ï¼Œæ€»æƒ³èµ°å‡ºå®¶ä¹¡ ï¼Œç°åœ¨ä¸è¡Œäº†æ²¡å‡ºæ¯äº† ï¼Œæ€»æƒ³åœ¨å®¶å¾…ä¸€è¾ˆå­</p></div></div><div class='timeline-item-content'><p>æ—¶å…‰æµè½¬ï¼Œç»å†è¿‡äººç”Ÿçš„èµ·èµ·è½è½ï¼Œæˆ‘ä»¬æˆ–è®¸æ¸æ¸æ„Ÿå—åˆ°äº†å®¶çš„æ¸©æš–ä¸å®‰å®ã€‚åœ¨å®¶å¾…ä¸€è¾ˆå­ï¼Œä¹Ÿè®¸å¹¶ä¸æ˜¯ä¸€ç§é€ƒé¿ï¼Œè€Œæ˜¯ä¸€ç§é€‰æ‹©ï¼Œä¸€ç§å¯¹å¹³æ·¡ç”Ÿæ´»çš„çƒ­çˆ±ä¸å‘å¾€ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>æ²¡æœ‰ç”¨å®é™…è¡ŒåŠ¨è¡¨è¾¾çš„çˆ±æ„éƒ½æ˜¯é”™è§‰å—</p></div></div><div class='timeline-item-content'><p>çœŸæ­£å–œæ¬¢çš„ä¸œè¥¿ï¼Œä¸ä¼šä¸€ç›´æ”¾åœ¨è´­ç‰©è½¦é‡Œï¼ŒçœŸæ­£å–œæ¬¢çš„äººï¼Œä¹Ÿä¸ä¼šä¸€ç›´ä¸ç¡®å®šå…³ç³»ï¼Œæ€åº¦å°±æ˜¯ç­”æ¡ˆ</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>é‡Šæ€€çš„å°½å¤´æ˜¯é—å¿˜å—</p></div></div><div class='timeline-item-content'><p>æˆ–è®¸å®ƒæ›´åƒæ˜¯ä¸€åœºå†…å¿ƒçš„èœ•å˜ï¼Œè®©æˆ‘ä»¬åœ¨æ—¶å…‰çš„æ´—ç¤¼ä¸­ï¼Œé€æ¸æ”¾ä¸‹è¿‡å»çš„åŒ…è¢±ï¼Œæ‹¥æŠ±æœªæ¥çš„æ— é™å¯èƒ½ã€‚é—å¿˜å¹¶ä¸æ˜¯ç»ˆç‚¹ï¼Œè€Œæ˜¯æˆ‘ä»¬å¿ƒçµå¾—ä»¥è‡ªç”±é£ç¿”çš„èµ·ç‚¹ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>å­¤ç‹¬æ‰æ˜¯ç”Ÿå‘½çš„å¸¸æ€å—ï¼Ÿ</p></div></div><div class='timeline-item-content'><p>å­¤ç‹¬ä»ä¸æ¥è‡ªé™Œç”Ÿäººï¼ŒåŸå¸‚ä¸­äº’ä¸ç›¸è¯†çš„äººä»¬ä¼¼ä¹æˆ´ç€ç½©å­ï¼Œå„è‡ªç©¿æ¢­ï¼Œæ¼«å¤©é›¨æ°´æ•²å‡»ä¸åˆ°å¿ƒçµã€‚å­¤ç‹¬æ¥è‡ªç”Ÿå‘½ä¸­é‚£äº›é‡è¦çš„äººï¼Œä»–ä»¬çš„å½±å­æ‰æ ¹åœ¨æ—§æ—¶å…‰ï¼Œç¬‘å®¹ä¸çŸ¥é“å»äº†ä½•æ–¹ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>æˆå¹´äººçš„ä¸–ç•Œæœ‰çˆ±æƒ…å—ï¼Ÿ</p></div></div><div class='timeline-item-content'><p>å¤§æµ·æ°¸è¿œä¼šæ˜ ç…§ç€å¤©ä¸Šçš„æ˜Ÿè¾°ï¼Œå¤©ä¸Šçš„æ˜Ÿè¾°æ°¸è¿œä¸ä¼šå­¤å•ï¼Œå¹¸è¿çš„æµ·é£ä¹Ÿä¼šä¸€ç›´å¹æ‹‚ç€ä½ çš„è„¸åºï¼Œè€Œä½ ï¼æˆ‘çš„æœ‹å‹ï¼Œä½ çš„çˆ±æƒ…ä¹Ÿä¸ä¼šå¤ªè¿Ÿ</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>éº»ç»³ä¸“æŒ‘ç»†å¤„æ–­ ï¼Œå„è¿ä¸“æŒ‘è‹¦å‘½äºº</p></div></div><div class='timeline-item-content'><p>æˆ‘å‡è£…ç”Ÿç—…ä¸ä¸Šè¯¾ ï¼Œçˆ¶äº²å‡è£…å¥åº·å»ä¸Šç­</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>ä¸ºä»€ä¹ˆäººä¸äººå†³å®šè¦åˆ†å¼€çš„æ—¶å€™ ï¼Œæ€»ä¼šè¯´ä¸€äº›éš¾å¬çš„è¯</p></div></div><div class='timeline-item-content'><p>æ¬²ä¸äººç»ï¼Œè¨€ä¸­æ¶è¯­ï¼Œéæ— æƒ…ï¼Œæƒ§æ‚”ä¹Ÿã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>å…³äºè¿·èŒ«</p></div></div><div class='timeline-item-content'><p>å½“ä½ è¿·èŒ«ï¼Œä¸ç¡®å®šè„šä¸‹çš„è·¯å¦‚ä½•èµ°çš„æ—¶å€™ï¼Œå°±çœ‹ä¸€çœ‹å²é“ç”Ÿçš„è¿™ä¸€å¥è¯ï¼š   â€œè¦ç´§çš„æ˜¯æœæ•¢åœ°è¿ˆå‡ºç¬¬ä¸€æ­¥ï¼Œå¯¹ä¸é”™å…ˆéƒ½ä¸ç®¡è‡ªå¤å°±æ²¡æœ‰æŠŠä¸€åˆ‡éƒ½è®¾è®¡å¥½å†å¼€æ­¥çš„äº‹ã€‚åˆ«æƒ³æŠŠä¸€åˆ‡éƒ½å¼„æ¸…æ¥šï¼Œå†å»èµ°è·¯ã€‚é²è½è€…è¦å­¦ä¼šæ€è€ƒï¼Œå–„æ€è€…è¦å…‹æœçš„æ˜¯çŠ¹è±«ã€‚â€</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>å¦‚ä½•åšåˆ°å–œæ¬¢å´ä¸è”ç³»çš„</p></div></div><div class='timeline-item-content'><p>çˆ±åˆ°æè‡´ä¸çº ç¼ ï¼Œæ€åˆ°æè‡´ä¸æƒ³è§ã€‚  é‚£æ—¶å€™å¤ªå–œæ¬¢äº†ï¼Œä»¥è‡³äºé‚£ç¢—å¤¹ç”Ÿé¥­ï¼Œå’½äº†åˆå’½ï¼Œä¹Ÿæ¯«æ— æ€¨è¨€ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>å…³äºå¯¹å®¶åº­çš„è®¨åŒ</p></div></div><div class='timeline-item-content'><p>ä½ è®¨åŒå¦ˆå¦ˆçš„å¸‚ä¾©åœ†æ»‘ï¼Œå´ä¸çŸ¥é“å¥¹æ›¾ç»è·Ÿä½ ä¸€æ ·æ†§æ†¬è¿‡æœªæ¥ï¼Œä½ è®¨åŒçˆ¶äº²çš„å¹³åº¸ï¼Œå´ä¸çŸ¥é“ä»–æ›¾ç»ä¹Ÿæ˜¯ä¸ªæ€€æ£æ¢¦æƒ³çš„ç”·å­©</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>æ˜æ˜å·²ç»å¤±å»äº†ï¼Œé‚£ä¸ºä½•è¿˜ä¼šæ—¶é•¿æƒ³èµ·</p></div></div><div class='timeline-item-content'><p>å®«å´éªè¯´è¿‡ï¼šå…¶å®æˆ‘å¾ˆæ—©å°±çŸ¥é“ï¼Œæˆ‘ä»¬ä¸åˆé€‚ï¼Œä½†æˆ‘è¿˜æ˜¯æ‹’ç»äº†æ‰€æœ‰äººï¼Œé™ªä½ èµ°äº†ä¸€æ®µæ²¡æœ‰ç»“æœçš„è·¯ï¼Œè™½ç„¶æ—¶é—´ä¸é•¿ï¼Œä½†æ¯•ç”Ÿéš¾å¿˜ã€‚æˆ‘å–œæ¬¢ä½ ï¼Œä»¥ä¸ºä½ ä¹Ÿå–œæ¬¢æˆ‘ï¼Œä½†æ˜¯ï¼Œæ¹–æ˜¯æ¹–ï¼Œæµ·æ˜¯æµ·ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>æ”¯æ”¯å¾å¾ä¹Ÿå¾ˆæµªæ¼« å™æ„ä¸æ¸…ä¹Ÿä»£è¡¨å–œæ¬¢</p></div></div><div class='timeline-item-content'><p>æˆ‘è¯ä¸è¾¾æ„çš„è¡¨ç™½ï¼Œé¥±å«çœŸè¯šå–œæ„Ÿï¼Œå¿«é¤å¼çš„æ‹çˆ±å¹´ä»£ã€‚å¤ªå¤šäººéº»æœ¨çˆ±ä¸ªå¤§æ¦‚ï¼Œè°éƒ½ä¸æ˜ç™½ã€‚ç«ç‘°åœ¨æ²™æ¼ ç››å¼€ï¼Œå¤§é›¨åˆ«ç¦»ä¼šåœä¸‹æ¥ã€‚è®©æµ·é£å¹èµ°å–§åš£è…çƒ‚çš„çˆ±ï¼Œæ»¡æ€€çœŸå¿ƒè€Œæ¥ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>å½“ä½ å®ç°è´¢å¯Œè‡ªç”±äº†ï¼Œä½ æœ€æƒ³åšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿ</p></div></div><div class='timeline-item-content'><p>æŠ¹å»æ¯äº²ç¾¡æ…•çš„çœ¼ç¥ ï¼Œæ‰¶æ­£çˆ¶äº²å¼¯ä¸‹çš„è…°æ†</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>è‡ªç”±äºŒå­—æœ¬å°±æ¡æ¡æ¡†æ¡† ï¼Œç‰¢ç¬¼äºŒå­—åå€’æ˜¯å››é¢é€é£</p></div></div><div class='timeline-item-content'><p>è‡ªç”±çœ‹ä¼¼æ¡æ¡æ¡†æ¡†ä½†æ˜¯æ€»æœ‰ä¸€ç¬”å‡ºå¤´ï¼Œç‰¢ç¬¼çœ‹ç€é€é£å´è¢«ç½©ä½äº†å¤´</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>æ‰€ä»¥çœŸçˆ±è¿˜æ˜¯æ— æ•Œå—ï¼Ÿ</p></div></div><div class='timeline-item-content'><p>ç†æƒ³ä¸»ä¹‰çš„èŠ±ï¼Œä¸ä¼šå¼€åœ¨æµªæ¼«ä¸»ä¹‰çš„åœŸåœ°é‡Œï¼Œç»ˆæœ‰ä¸€å¤©ï¼Œä½ ä¼šæ”¾å¼ƒç†æƒ³ï¼Œå¯¹æµªæ¼«ä¸å†æœŸå¾…ï¼Œå°±åƒæŠŠè‡ªå·±çš„çµé­‚æµ¸å…¥é‚£è‡­ä¸å¯é—»çš„ä¸‹æ°´é“æ·¤æ³¥é‡Œï¼Œæ—¢ä¸æ­»ä¹Ÿä¸æ´»</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>å…³äºå»ºè®®</p></div></div><div class='timeline-item-content'><p>å…¶å®äººä¸€è¾ˆå­æ˜¯éœ€è¦ä¸€äº›å»ºè®®çš„ï¼Œå¯»æ±‚ç­”æ¡ˆï¼Œå°±æ˜¯å½“è‡ªå·±å¯»æ‰¾ä¸å‡ºç­”æ¡ˆåšä¸å‡ºæ­£ç¡®çš„é€‰æ‹©æ—¶ï¼Œéœ€è¦å€Ÿé‰´åˆ«äººçš„å»ºè®®ï¼Œä¾›è‡ªå·±åšå‡ºé€‰æ‹©ï¼Œä»–äººçš„é«˜åº¦ç¡®å®å¯èƒ½é™åˆ¶äº†ä½ çš„è§†é‡ï¼Œä½†å¦‚æœå½“è‡ªå·±æ²¡æœ‰åˆ«äººçš„é«˜åº¦æ—¶ï¼Œæ˜¯å¯ä»¥å€Ÿé‰´åˆ«äººçš„è§†é‡æ¥ï¼Œçœ‹æ¸…è‡ªå·±ï¼Œç­”æ¡ˆæ°¸è¿œæ˜¯è‡ªå·±è®¤åŒï¼Œå¹¶ä¸éœ€è¦è¿½æ±‚åˆ«äººçš„è®¤åŒï¼Œè¿™æ ·æ‰ä¸èƒ½è¢«ä¸–äººçš„é«˜å¢™å›´ä½ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>å…³äºç¦»å¼€</p></div></div><div class='timeline-item-content'><p>èµ°è¿›ä¸€ä¸ªäººçš„æ—¶å€™ ï¼Œè¦æ…¢ä¸€ç‚¹ ï¼Œä»¥å…çœ‹ä¸æ¸… ã€‚ç¦»å¼€ä¸€ä¸ªäººçš„æ—¶å€™è¦å¿«ä¸€ç‚¹ ï¼Œä»¥å…èˆä¸å¾—.<br>äººæµ·èŒ«èŒ« ï¼Œå…ˆæœ‰ä¸ç”˜ ï¼Œåæœ‰å¿ƒå®‰ ï¼Œä¹çŸ¥å¤©å‘½ ï¼Œæ•…ä¸å¿§ !</p></div></div></div>]]></content>
      
      
      <categories>
          
          <category> æœˆå½±å¢¨ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘åœ¨äººé—´å‡‘æ•°çš„æ—¥å­ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
